"use strict";var Mt=Object.defineProperty,dt=Object.defineProperties,Et=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable,ut=(Z,R,r)=>R in Z?Mt(Z,R,{enumerable:!0,configurable:!0,writable:!0,value:r}):Z[R]=r,_t=(Z,R)=>{for(var r in R||(R={}))vt.call(R,r)&&ut(Z,r,R[r]);if(ft)for(var r of ft(R))Ct.call(R,r)&&ut(Z,r,R[r]);return Z},pt=(Z,R)=>dt(Z,Et(R));(self.webpackChunkangular_anb=self.webpackChunkangular_anb||[]).push([[7897],{28594:(Z,R,r)=>{r.d(R,{vF:()=>yt,_D:()=>s,Qp:()=>lt,P_:()=>z,ut:()=>M,Hq:()=>W,zD:()=>A,tB:()=>B,nF:()=>c,VO:()=>x,Mk:()=>X,kZ:()=>xt,kr:()=>ht});var D=r(15861),b=(r(29132),r(26584)),N=r(62208),nt=r(16730),U=r(56741),J=r(2004),O=r(49672);const S=5e-4;function X(t,n,e){return!(0,U.Up)(t,n,e)}function p(t,n,e){const a=X(t,n,e);if(a&&!(0,U.kR)())throw new b.Z("rasterprojectionhelper-project","projection engine is not loaded");return a}const st=function(t,n,e){const a=(t[0]+t[4]+t[4*n.cols]+t[4*n.cols+4])/4,i=(t[1]+t[5]+t[4*n.rows+1]+t[4*n.rows+5])/4,o=(t[4*n.cols]-t[0]+t[4*n.cols+4]-t[4])/e[0]*.5,l=(t[4*n.cols+1]-t[1]+t[4*n.cols+5]-t[5])/e[1]*.5;return[0===o||isNaN(o)?0:Math.abs(a-t[2*n.rows+2])/Math.abs(o),0===l||isNaN(l)?0:Math.abs(i-t[2*n.rows+3])/Math.abs(l)]},rt={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244};function A(){return K.apply(this,arguments)}function K(){return(K=(0,D.Z)(function*(){if((0,U.kR)())return null;yield(0,U.zD)()})).apply(this,arguments)}function s(t,n,e){return p(t.spatialReference,n)?e?(0,U.rS)(n,t.spatialReference,t):(0,U.rS)(t.spatialReference,n,t):null}function x(t,n,e,a=null){if(t.spatialReference.equals(n))return t;p(t.spatialReference,n,a);const i=e.center,o=new J.Z({xmin:i.x-t.x/2,xmax:i.x+t.x/2,ymin:i.y-t.y/2,ymax:i.y+t.y/2,spatialReference:t.spatialReference}),l=(0,U.iV)(o,n,a);return(0,N.Wi)(l)?null:{x:l.xmax-l.xmin,y:l.ymax-l.ymin}}function P(t,n=.01){return(0,nt.c9)(t)?n/(0,nt.c9)(t):0}function c(t,n,e=null,a=!0){const i=t.spatialReference;if(i.equals(n))return t;p(i,n,e);const o=(0,U.iV)(t,n,e);if(a&&n.isGeographic){const[l,f]=H(i,!0),h=P(i);h&&null!=l&&null!=f&&(Math.abs(t.x-l)<h&&Math.abs(180-o.x)<S?o.x-=360:Math.abs(t.x-f)<h&&Math.abs(180+o.x)<S&&(o.x+=360))}return o}function _(t){const n=M(t[0].spatialReference);if(t.length<2||!(0,N.pC)(n))return t[0];let{xmin:e,xmax:a,ymin:i,ymax:o}=t[0];for(let l=1;l<t.length;l++){const f=t[l];a=f.xmax+n*l,i=Math.min(i,f.ymin),o=Math.max(o,f.ymax)}return new J.Z({xmin:e,xmax:a,ymin:i,ymax:o,spatialReference:t[0].spatialReference})}function B(t,n,e=null,a=!0){if(t.spatialReference.equals(n))return t;const i=W(t),o=M(t.spatialReference,!0);return(0,N.pC)(o)&&0!==i?_(t.clone().normalize().map(l=>Y(l,n,e,a))):Y(t,n,e,a)}function Y(t,n,e=null,a=!0){const i=t.spatialReference;if(i.equals(n))return t;p(i,n,e);const o=(0,U.iV)(t,n,e);let[l,f]=H(i,!0);if(o&&a&&i.isWebMercator&&n.isGeographic&&null!=l&&null!=f){if(Math.abs(t.xmin-l)<.001&&Math.abs(f-t.xmax)>1e3&&Math.abs(180-o.xmax)<S){o.xmin=-180;const E=[];E.push(new O.Z(t.xmax,t.ymin,i)),E.push(new O.Z(t.xmax,(t.ymin+t.ymax)/2,i)),E.push(new O.Z(t.xmax,t.ymax,i));const y=E.map(v=>c(v,n,e)).filter(v=>!isNaN(null==v?void 0:v.x)).map(v=>v.x);o.xmax=Math.max.apply(null,y)}if(Math.abs(t.xmax-f)<.001&&Math.abs(l-t.xmin)>1e3&&Math.abs(180+o.xmin)<S){o.xmax=180;const E=[];E.push(new O.Z(t.xmin,t.ymin,i)),E.push(new O.Z(t.xmin,(t.ymin+t.ymax)/2,i)),E.push(new O.Z(t.xmin,t.ymax,i));const y=E.map(v=>c(v,n,e)).filter(v=>!isNaN(null==v?void 0:v.x)).map(v=>v.x);o.xmin=Math.min.apply(null,y)}}[l,f]=H(n,!0);const h=P(n);return h&&null!=l&&null!=f&&o&&(Math.abs(o.xmin-l)<h&&(o.xmin=l),Math.abs(o.xmax-f)<h&&(o.xmax=f)),o}function M(t,n=!1){return t.isWebMercator?2*(n?20037508.342787:20037508.342788905):t.wkid&&t.isGeographic?360:2*rt[t.wkid]||null}function H(t,n=!1){const e=[],a=M(t,n);return(0,N.pC)(a)&&(e.push(-a/2),e.push(a/2)),e}function q(t,n,e,a){let i=(t-n)/e;return i-Math.floor(i)!=0?i=Math.floor(i):a&&(i-=1),i}function W(t,n=!1){const e=M(t.spatialReference);if(!(0,N.pC)(e))return 0;const a=n?0:-e/2;return q(t.xmax,a,e,!0)-q(t.xmin,a,e,!1)}function z(t){const n=t.storageInfo.origin.x,e=M(t.spatialReference,!0);if(!(0,N.pC)(e))return{originX:n,halfWorldWidth:null,pyramidsInfo:null};const a=e/2,{nativePixelSize:i,storageInfo:o,extent:l}=t,{maximumPyramidLevel:f,blockWidth:h,pyramidScalingFactor:j}=o;let d=i.x;const E=[],y=(0,N.pC)(t.transform)&&"gcs-shift"===t.transform.type,v=n+(y?0:a),C=y?e-n:a-n;for(let g=0;g<=f;g++){const I=(l.xmax-n)/d/h,w=I-Math.floor(I)==0?I:Math.ceil(I),L=C/d/h,m=L-Math.floor(L)==0?L:Math.ceil(L),G=Math.floor(v/d/h),T=Math.round(v/d)%h,V=(h-Math.round(C/d)%h)%h;E.push({resolutionX:d,blockWidth:h,datsetColumnCount:w,worldColumnCountFromOrigin:m,leftMargin:T,rightPadding:V,originColumnOffset:G}),d*=j}return{originX:n,halfWorldWidth:a,pyramidsInfo:E,hasGCSSShiftTransform:y}}function lt(t){const n=t.isAdaptive&&null==t.spacing,e=t.spacing||[32,32];let a=at(t),i={cols:a.size[0]+1,rows:a.size[1]+1},o=st(a.offsets,i,e);const f=a.outofBoundPointCount>0&&a.outofBoundPointCount<a.offsets.length/2;return n&&(f||(o[0]+o[1])/2>4)&&(a=at(pt(_t({},t),{spacing:[4,4]})),i={cols:a.size[0]+1,rows:a.size[1]+1},o=st(a.offsets,i,e)),a.error=o,a.coefficients=function mt(t,n,e){const{cols:a,rows:i}=n,o=new Float32Array((a-1)*(i-1)*2*6),l=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),f=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let h=0;h<a-1;h++){for(let j=0;j<i-1;j++){let d=h*i*2+2*j;const E=t[d],y=t[d+1],v=t[d+2],C=t[d+3];d+=2*i;const g=t[d],I=t[d+1],w=t[d+2],L=t[d+3];let m=0,G=12*(j*(a-1)+h);for(let T=0;T<3;T++)o[G++]=l[m++]*E+l[m++]*v+l[m++]*w;m=0;for(let T=0;T<3;T++)o[G++]=l[m++]*y+l[m++]*C+l[m++]*L;m=0;for(let T=0;T<3;T++)o[G++]=f[m++]*E+f[m++]*g+f[m++]*w;m=0;for(let T=0;T<3;T++)o[G++]=f[m++]*y+f[m++]*I+f[m++]*L}if(e)for(let j=0;j<o.length;j++)isNaN(o[j])&&(o[j]=-1)}return o}(a.offsets,i,f),a}function at(t){const{projectedExtent:n,srcBufferExtent:e,pixelSize:a,datumTransformation:i,rasterTransform:o}=t,l=n.spatialReference,f=e.spatialReference;p(l,f);const{xmin:h,ymin:j,xmax:d,ymax:E}=n,y=M(f),v=t.hasWrapAround||"gcs-shift"===(null==o?void 0:o.type),C=t.spacing||[32,32],g={x:C[0]*a.x,y:C[1]*a.y},I_cols=Math.ceil((d-h)/g.x-.1/C[0])+1,I_rows=Math.ceil((E-j)/g.y-.1/C[1])+1,w=g.x,L=g.y,m=[];let G,T=0;const V=[];for(let tt=0;tt<I_cols;tt++)for(let ot=0;ot<I_rows;ot++)V.push(new O.Z({x:h+w*tt,y:E-L*ot,spatialReference:l}));const ct=function u(t,n,e=null){const a=t[0].spatialReference;return a.equals(n)?t:(p(a,n,e),(0,U.iV)(t,n,e))}(V,f,i);for(let tt=0;tt<I_cols;tt++){const ot=[];for(let it=0;it<I_rows;it++){let Q=ct[tt*I_rows+it];o&&(Q=o.inverseTransform(Q)),ot.push(Q),tt>0&&v&&Q&&G[it]&&(0,N.pC)(y)&&Q.x<G[it].x&&(Q.x+=y),Q?(m.push((Q.x-e.xmin)/(e.xmax-e.xmin)),m.push((e.ymax-Q.y)/(e.ymax-e.ymin))):(m.push(NaN),m.push(NaN),T++)}G=ot}return{offsets:m,error:null,coefficients:null,outofBoundPointCount:T,spacing:C,size:[I_cols-1,I_rows-1]}}function xt(t){const n=t.clone().normalize();return 1===n.length?n[0]:_(n)}function ht(t,n,e){const{storageInfo:a,pixelSize:i}=n;let o,l=!1;const{pyramidResolutions:f}=a;if((0,N.pC)(f)&&f.length){const y=(t.x+t.y)/2,v=f[f.length-1],C=(v.x+v.y)/2,g=(i.x+i.y)/2;if(y<=g)o=0;else if(y>=C)o=f.length,l=y/C>8;else{let w,L=g;for(let m=1;m<=f.length;m++){if(w=(f[m-1].x+f[m-1].y)/2,y<=w){y===w?o=m:"down"===e?(o=m-1,l=y/L>8):o="up"===e||y-L>w-y||y/L>2?m:m-1;break}L=w}}const I=0===o?i:f[o-1];return{pyramidLevel:o,pyramidResolution:new O.Z({x:I.x,y:I.y,spatialReference:n.spatialReference}),excessiveReading:l}}const h=Math.log(t.x/i.x)/Math.LN2,j=Math.log(t.y/i.y)/Math.LN2,d=n.storageInfo.maximumPyramidLevel||0;o="down"===e?Math.floor(Math.min(h,j)):"up"===e?Math.ceil(Math.max(h,j)):Math.round((h+j)/2),o<0?o=0:o>d&&(l=o>d+3,o=d);const E=2**o;return{pyramidLevel:o,pyramidResolution:new O.Z({x:E*n.nativePixelSize.x,y:E*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:l}}function yt(t,n,e=512,a=!0){const{extent:i,spatialReference:o,pixelSize:l}=t,f=x(new O.Z({x:l.x,y:l.y,spatialReference:o}),n,i);if(null==f)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const h=(f.x+f.y)/2,j=(0,nt.c9)(n),d=h*j*96*39.37,E=n.isGeographic?256/e*295828763.7958547:256/e*591657527.591555;let y="vector-magdir"===t.dataType||"vector-uv"===t.dataType;const v=B(i,n);y||a&&(n.isGeographic||n.isWebMercator)&&(y=v.xmin*v.xmax<0);let C,g=d;const I=1.001;if(y){g=E;const T=n.isGeographic?1341104507446289e-21:.29858214164761665,V=T*(96*j*39.37);C=x(new O.Z({x:T,y:T,spatialReference:{wkid:n.isGeographic?4326:3857}}),o,v),C.x*=g/V,C.y*=g/V}else{C={x:l.x,y:l.y};const T=Math.ceil(Math.log(Math.min(t.width,t.height)/32)/Math.LN2);let V=0;for(;g<E*(I/2)&&V<T;)V++,g*=2,C.x*=2,C.y*=2;Math.max(g,E)/Math.min(g,E)<=I&&(g=E)}const w=[g],L=[{x:C.x,y:C.y}],G=Math.min(70.5310735,d)/I;for(;g>=G;)g/=2,C.x/=2,C.y/=2,w.push(g),L.push({x:C.x,y:C.y});return{projectedPixelSize:f,scales:w,srcResolutions:L,isCustomTilingScheme:!y}}},96504:(Z,R,r)=>{r.d(R,{Z:()=>S});var D=r(17626),$=r(86162),b=r(77712),J=(r(85931),r(8314),r(90912),r(76898));let O=class extends $.wq{get affectsPixelSize(){return!1}forwardTransform(X){return X}inverseTransform(X){return X}};(0,D._)([(0,b.Cb)()],O.prototype,"affectsPixelSize",null),(0,D._)([(0,b.Cb)({json:{write:!0}})],O.prototype,"spatialReference",void 0),O=(0,D._)([(0,J.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],O);const S=O},76671:(Z,R,r)=>{r.d(R,{Z:()=>X});var D=r(17626),$=r(77712),U=(r(85931),r(8314),r(90912),r(55342)),J=r(76898),O=r(96504);let S=class extends O.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(p){return"point"===(p=p.clone()).type?(p.x>180+this.tolerance&&(p.x-=360),p):(p.xmin>=180-this.tolerance?(p.xmax-=360,p.xmin-=360):p.xmax>180+this.tolerance&&(p.xmin=-180,p.xmax=180),p)}inverseTransform(p){return"point"===(p=p.clone()).type?(p.x<-this.tolerance&&(p.x+=360),p):(p.xmin<-this.tolerance&&(p.xmin+=360,p.xmax+=360),p)}};(0,D._)([(0,U.J)({GCSShiftXform:"gcs-shift"})],S.prototype,"type",void 0),(0,D._)([(0,$.Cb)()],S.prototype,"tolerance",void 0),S=(0,D._)([(0,J.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],S);const X=S},85374:(Z,R,r)=>{r.d(R,{Z:()=>K});var D=r(17626),b=(r(29132),r(77712)),J=(r(85931),r(8314),r(90912),r(55342)),O=r(68653),S=r(76898),X=r(99433),p=r(96504),st=r(49672),rt=r(2004);function F(s,x,P){const{x:c,y:u}=x;if(P<2)return{x:s[0]+c*s[2]+u*s[4],y:s[1]+c*s[3]+u*s[5]};if(2===P){const z=c*c,lt=u*u,at=c*u;return{x:s[0]+c*s[2]+u*s[4]+z*s[6]+at*s[8]+lt*s[10],y:s[1]+c*s[3]+u*s[5]+z*s[7]+at*s[9]+lt*s[11]}}const _=c*c,B=u*u,Y=c*u,M=_*c,H=_*u,q=c*B,W=u*B;return{x:s[0]+c*s[2]+u*s[4]+_*s[6]+Y*s[8]+B*s[10]+M*s[12]+H*s[14]+q*s[16]+W*s[18],y:s[1]+c*s[3]+u*s[5]+_*s[7]+Y*s[9]+B*s[11]+M*s[13]+H*s[15]+q*s[17]+W*s[19]}}function k(s,x,P){const{xmin:c,ymin:u,xmax:_,ymax:B,spatialReference:Y}=x;let M=[];if(P<2)M.push({x:c,y:B}),M.push({x:_,y:B}),M.push({x:c,y:u}),M.push({x:_,y:u});else{let W=10;for(let z=0;z<W;z++)M.push({x:c,y:u+(B-u)*z/(W-1)}),M.push({x:_,y:u+(B-u)*z/(W-1)});W=8;for(let z=1;z<=W;z++)M.push({x:c+(_-c)*z/W,y:u}),M.push({x:c+(_-c)*z/W,y:B})}M=M.map(W=>F(s,W,P));const H=M.map(W=>W.x),q=M.map(W=>W.y);return new rt.Z({xmin:Math.min.apply(null,H),xmax:Math.max.apply(null,H),ymin:Math.min.apply(null,q),ymax:Math.max.apply(null,q),spatialReference:Y})}let A=class extends p.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(s,x){const{coeffX:P,coeffY:c}=x;if(null==P||!P.length||null==c||!c.length||P.length!==c.length)return null;const u=[];for(let _=0;_<P.length;_++)u.push(P[_]),u.push(c[_]);return u}writeForwardCoefficients(s,x,P){const c=[],u=[];for(let _=0;_<(null==s?void 0:s.length);_++)_%2==0?c.push(s[_]):u.push(s[_]);x.coeffX=c,x.coeffY=u}get inverseCoefficients(){let s=this._get("inverseCoefficients");const x=this._get("forwardCoefficients");return!s&&x&&this.polynomialOrder<2&&(s=function et(s){const[x,P,c,u,_,B]=s,Y=c*B-_*u,M=_*u-c*B;return[(_*P-x*B)/Y,(c*P-x*u)/M,B/Y,u/M,-_/Y,-c/M]}(x)),s}set inverseCoefficients(s){this._set("inverseCoefficients",s)}readInverseCoefficients(s,x){const{inverseCoeffX:P,inverseCoeffY:c}=x;if(null==P||!P.length||null==c||!c.length||P.length!==c.length)return null;const u=[];for(let _=0;_<P.length;_++)u.push(P[_]),u.push(c[_]);return u}writeInverseCoefficients(s,x,P){const c=[],u=[];for(let _=0;_<(null==s?void 0:s.length);_++)_%2==0?c.push(s[_]):u.push(s[_]);x.inverseCoeffX=c,x.inverseCoeffY=u}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(s){if("point"===s.type){const x=F(this.forwardCoefficients,s,this.polynomialOrder);return new st.Z({x:x.x,y:x.y,spatialReference:s.spatialReference})}return k(this.forwardCoefficients,s,this.polynomialOrder)}inverseTransform(s){if("point"===s.type){const x=F(this.inverseCoefficients,s,this.polynomialOrder);return new st.Z({x:x.x,y:x.y,spatialReference:s.spatialReference})}return k(this.inverseCoefficients,s,this.polynomialOrder)}};(0,D._)([(0,b.Cb)({json:{write:!0}})],A.prototype,"polynomialOrder",void 0),(0,D._)([(0,b.Cb)()],A.prototype,"forwardCoefficients",void 0),(0,D._)([(0,O.r)("forwardCoefficients",["coeffX","coeffY"])],A.prototype,"readForwardCoefficients",null),(0,D._)([(0,X.c)("forwardCoefficients")],A.prototype,"writeForwardCoefficients",null),(0,D._)([(0,b.Cb)({json:{write:!0}})],A.prototype,"inverseCoefficients",null),(0,D._)([(0,O.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],A.prototype,"readInverseCoefficients",null),(0,D._)([(0,X.c)("inverseCoefficients")],A.prototype,"writeInverseCoefficients",null),(0,D._)([(0,b.Cb)()],A.prototype,"affectsPixelSize",null),(0,D._)([(0,J.J)({PolynomialXform:"polynomial"})],A.prototype,"type",void 0),A=(0,D._)([(0,S.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],A);const K=A},46572:(Z,R,r)=>{r.d(R,{j:()=>et,c:()=>A});var D=r(76671),$=r(17626),O=(r(63290),r(90912),r(85931),r(8314),r(82255),r(55342)),S=r(76898),X=r(96504);let p=class extends X.Z{constructor(){super(...arguments),this.type="identity"}};(0,$._)([(0,O.J)({IdentityXform:"identity"})],p.prototype,"type",void 0),p=(0,$._)([(0,S.j)("esri.layers.support.rasterTransforms.IdentityTransform")],p);const st=p;var rt=r(85374);const F={GCSShiftXform:D.Z,IdentityXform:st,PolynomialXform:rt.Z},k=Object.keys(F);function et(K){return!K||k.includes(null==K?void 0:K.type)}function A(K){if(!(null==K?void 0:K.type))return null;const s=F[null==K?void 0:K.type];if(s){const x=new s;return x.read(K),x}return null}}}]);