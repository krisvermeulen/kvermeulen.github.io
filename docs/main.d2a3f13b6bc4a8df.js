var wne=Object.defineProperty,Mne=Object.defineProperties,xne=Object.getOwnPropertyDescriptors,n4=Object.getOwnPropertySymbols,Dne=Object.prototype.hasOwnProperty,Sne=Object.prototype.propertyIsEnumerable,i4=(ut,Oe,C)=>Oe in ut?wne(ut,Oe,{enumerable:!0,configurable:!0,writable:!0,value:C}):ut[Oe]=C,Ot=(ut,Oe)=>{for(var C in Oe||(Oe={}))Dne.call(Oe,C)&&i4(ut,C,Oe[C]);if(n4)for(var C of n4(Oe))Sne.call(Oe,C)&&i4(ut,C,Oe[C]);return ut},nn=(ut,Oe)=>Mne(ut,xne(Oe));(self.webpackChunkangular_anb=self.webpackChunkangular_anb||[]).push([[179],{88653:(ut,Oe,C)=>{"use strict";function x(g){return"function"==typeof g}function T(g){const y=g(v=>{Error.call(v),v.stack=(new Error).stack});return y.prototype=Object.create(Error.prototype),y.prototype.constructor=y,y}const ne=T(g=>function(y){g(this),this.message=y?`${y.length} errors occurred during unsubscription:\n${y.map((v,_)=>`${_+1}) ${v.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=y});function ie(g,p){if(g){const y=g.indexOf(p);0<=y&&g.splice(y,1)}}class te{constructor(p){this.initialTeardown=p,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let p;if(!this.closed){this.closed=!0;const{_parentage:y}=this;if(y)if(this._parentage=null,Array.isArray(y))for(const E of y)E.remove(this);else y.remove(this);const{initialTeardown:v}=this;if(x(v))try{v()}catch(E){p=E instanceof ne?E.errors:[E]}const{_finalizers:_}=this;if(_){this._finalizers=null;for(const E of _)try{j(E)}catch(w){p=null!=p?p:[],w instanceof ne?p=[...p,...w.errors]:p.push(w)}}if(p)throw new ne(p)}}add(p){var y;if(p&&p!==this)if(this.closed)j(p);else{if(p instanceof te){if(p.closed||p._hasParent(this))return;p._addParent(this)}(this._finalizers=null!==(y=this._finalizers)&&void 0!==y?y:[]).push(p)}}_hasParent(p){const{_parentage:y}=this;return y===p||Array.isArray(y)&&y.includes(p)}_addParent(p){const{_parentage:y}=this;this._parentage=Array.isArray(y)?(y.push(p),y):y?[y,p]:p}_removeParent(p){const{_parentage:y}=this;y===p?this._parentage=null:Array.isArray(y)&&ie(y,p)}remove(p){const{_finalizers:y}=this;y&&ie(y,p),p instanceof te&&p._removeParent(this)}}te.EMPTY=(()=>{const g=new te;return g.closed=!0,g})();const oe=te.EMPTY;function Y(g){return g instanceof te||g&&"closed"in g&&x(g.remove)&&x(g.add)&&x(g.unsubscribe)}function j(g){x(g)?g():g.unsubscribe()}const L={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},B={setTimeout(g,p,...y){const{delegate:v}=B;return(null==v?void 0:v.setTimeout)?v.setTimeout(g,p,...y):setTimeout(g,p,...y)},clearTimeout(g){const{delegate:p}=B;return((null==p?void 0:p.clearTimeout)||clearTimeout)(g)},delegate:void 0};function X(g){B.setTimeout(()=>{const{onUnhandledError:p}=L;if(!p)throw g;p(g)})}function Z(){}const z=V("C",void 0,void 0);function V(g,p,y){return{kind:g,value:p,error:y}}let P=null;function F(g){if(L.useDeprecatedSynchronousErrorHandling){const p=!P;if(p&&(P={errorThrown:!1,error:null}),g(),p){const{errorThrown:y,error:v}=P;if(P=null,y)throw v}}else g()}class J extends te{constructor(p){super(),this.isStopped=!1,p?(this.destination=p,Y(p)&&p.add(this)):this.destination=Q}static create(p,y,v){return new ye(p,y,v)}next(p){this.isStopped?se(function K(g){return V("N",g,void 0)}(p),this):this._next(p)}error(p){this.isStopped?se(function ae(g){return V("E",void 0,g)}(p),this):(this.isStopped=!0,this._error(p))}complete(){this.isStopped?se(z,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(p){this.destination.next(p)}_error(p){try{this.destination.error(p)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const H=Function.prototype.bind;function de(g,p){return H.call(g,p)}class ee{constructor(p){this.partialObserver=p}next(p){const{partialObserver:y}=this;if(y.next)try{y.next(p)}catch(v){le(v)}}error(p){const{partialObserver:y}=this;if(y.error)try{y.error(p)}catch(v){le(v)}else le(p)}complete(){const{partialObserver:p}=this;if(p.complete)try{p.complete()}catch(y){le(y)}}}class ye extends J{constructor(p,y,v){let _;if(super(),x(p)||!p)_={next:null!=p?p:void 0,error:null!=y?y:void 0,complete:null!=v?v:void 0};else{let E;this&&L.useDeprecatedNextContext?(E=Object.create(p),E.unsubscribe=()=>this.unsubscribe(),_={next:p.next&&de(p.next,E),error:p.error&&de(p.error,E),complete:p.complete&&de(p.complete,E)}):_=p}this.destination=new ee(_)}}function le(g){L.useDeprecatedSynchronousErrorHandling?function $(g){L.useDeprecatedSynchronousErrorHandling&&P&&(P.errorThrown=!0,P.error=g)}(g):X(g)}function se(g,p){const{onStoppedNotification:y}=L;y&&B.setTimeout(()=>y(g,p))}const Q={closed:!0,next:Z,error:function ge(g){throw g},complete:Z},pe="function"==typeof Symbol&&Symbol.observable||"@@observable";function ue(g){return g}let fe=(()=>{class g{constructor(y){y&&(this._subscribe=y)}lift(y){const v=new g;return v.source=this,v.operator=y,v}subscribe(y,v,_){const E=function he(g){return g&&g instanceof J||function ce(g){return g&&x(g.next)&&x(g.error)&&x(g.complete)}(g)&&Y(g)}(y)?y:new ye(y,v,_);return F(()=>{const{operator:w,source:D}=this;E.add(w?w.call(E,D):D?this._subscribe(E):this._trySubscribe(E))}),E}_trySubscribe(y){try{return this._subscribe(y)}catch(v){y.error(v)}}forEach(y,v){return new(v=Me(v))((_,E)=>{const w=new ye({next:D=>{try{y(D)}catch(O){E(O),w.unsubscribe()}},error:E,complete:_});this.subscribe(w)})}_subscribe(y){var v;return null===(v=this.source)||void 0===v?void 0:v.subscribe(y)}[pe](){return this}pipe(...y){return function ve(g){return 0===g.length?ue:1===g.length?g[0]:function(y){return g.reduce((v,_)=>_(v),y)}}(y)(this)}toPromise(y){return new(y=Me(y))((v,_)=>{let E;this.subscribe(w=>E=w,w=>_(w),()=>v(E))})}}return g.create=p=>new g(p),g})();function Me(g){var p;return null!==(p=null!=g?g:L.Promise)&&void 0!==p?p:Promise}const De=T(g=>function(){g(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let xe=(()=>{class g extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(y){const v=new Pe(this,this);return v.operator=y,v}_throwIfClosed(){if(this.closed)throw new De}next(y){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const v of this.currentObservers)v.next(y)}})}error(y){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=y;const{observers:v}=this;for(;v.length;)v.shift().error(y)}})}complete(){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:y}=this;for(;y.length;)y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var y;return(null===(y=this.observers)||void 0===y?void 0:y.length)>0}_trySubscribe(y){return this._throwIfClosed(),super._trySubscribe(y)}_subscribe(y){return this._throwIfClosed(),this._checkFinalizedStatuses(y),this._innerSubscribe(y)}_innerSubscribe(y){const{hasError:v,isStopped:_,observers:E}=this;return v||_?oe:(this.currentObservers=null,E.push(y),new te(()=>{this.currentObservers=null,ie(E,y)}))}_checkFinalizedStatuses(y){const{hasError:v,thrownError:_,isStopped:E}=this;v?y.error(_):E&&y.complete()}asObservable(){const y=new fe;return y.source=this,y}}return g.create=(p,y)=>new Pe(p,y),g})();class Pe extends xe{constructor(p,y){super(),this.destination=p,this.source=y}next(p){var y,v;null===(v=null===(y=this.destination)||void 0===y?void 0:y.next)||void 0===v||v.call(y,p)}error(p){var y,v;null===(v=null===(y=this.destination)||void 0===y?void 0:y.error)||void 0===v||v.call(y,p)}complete(){var p,y;null===(y=null===(p=this.destination)||void 0===p?void 0:p.complete)||void 0===y||y.call(p)}_subscribe(p){var y,v;return null!==(v=null===(y=this.source)||void 0===y?void 0:y.subscribe(p))&&void 0!==v?v:oe}}function je(g){return x(null==g?void 0:g.lift)}function rt(g){return p=>{if(je(p))return p.lift(function(y){try{return g(y,this)}catch(v){this.error(v)}});throw new TypeError("Unable to lift unknown Observable type")}}function Le(g,p,y,v,_){return new Ce(g,p,y,v,_)}class Ce extends J{constructor(p,y,v,_,E,w){super(p),this.onFinalize=E,this.shouldUnsubscribe=w,this._next=y?function(D){try{y(D)}catch(O){p.error(O)}}:super._next,this._error=_?function(D){try{_(D)}catch(O){p.error(O)}finally{this.unsubscribe()}}:super._error,this._complete=v?function(){try{v()}catch(D){p.error(D)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var p;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:y}=this;super.unsubscribe(),!y&&(null===(p=this.onFinalize)||void 0===p||p.call(this))}}}function Te(g,p){return rt((y,v)=>{let _=0;y.subscribe(Le(v,E=>{v.next(g.call(p,E,_++))}))})}function $e(g,p,y,v){return new(y||(y=Promise))(function(E,w){function D(W){try{A(v.next(W))}catch(q){w(q)}}function O(W){try{A(v.throw(W))}catch(q){w(q)}}function A(W){W.done?E(W.value):function _(E){return E instanceof y?E:new y(function(w){w(E)})}(W.value).then(D,O)}A((v=v.apply(g,p||[])).next())})}function Vt(g){return this instanceof Vt?(this.v=g,this):new Vt(g)}function Zt(g,p,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,v=y.apply(g,p||[]),E=[];return _={},w("next"),w("throw"),w("return"),_[Symbol.asyncIterator]=function(){return this},_;function w(_e){v[_e]&&(_[_e]=function(be){return new Promise(function(We,qe){E.push([_e,be,We,qe])>1||D(_e,be)})})}function D(_e,be){try{!function O(_e){_e.value instanceof Vt?Promise.resolve(_e.value.v).then(A,W):q(E[0][2],_e)}(v[_e](be))}catch(We){q(E[0][3],We)}}function A(_e){D("next",_e)}function W(_e){D("throw",_e)}function q(_e,be){_e(be),E.shift(),E.length&&D(E[0][0],E[0][1])}}function vr(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,p=g[Symbol.asyncIterator];return p?p.call(g):(g=function bt(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),y={},v("next"),v("throw"),v("return"),y[Symbol.asyncIterator]=function(){return this},y);function v(E){y[E]=g[E]&&function(w){return new Promise(function(D,O){!function _(E,w,D,O){Promise.resolve(O).then(function(A){E({value:A,done:D})},w)}(D,O,(w=g[E](w)).done,w.value)})}}}const lr=g=>g&&"number"==typeof g.length&&"function"!=typeof g;function fr(g){return x(null==g?void 0:g.then)}function ht(g){return x(g[pe])}function St(g){return Symbol.asyncIterator&&x(null==g?void 0:g[Symbol.asyncIterator])}function Nt(g){return new TypeError(`You provided ${null!==g&&"object"==typeof g?"an invalid object":`'${g}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Qt=function Wt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Kt(g){return x(null==g?void 0:g[Qt])}function Ze(g){return Zt(this,arguments,function*(){const y=g.getReader();try{for(;;){const{value:v,done:_}=yield Vt(y.read());if(_)return yield Vt(void 0);yield yield Vt(v)}}finally{y.releaseLock()}})}function st(g){return x(null==g?void 0:g.getReader)}function Ge(g){if(g instanceof fe)return g;if(null!=g){if(ht(g))return function Xe(g){return new fe(p=>{const y=g[pe]();if(x(y.subscribe))return y.subscribe(p);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(g);if(lr(g))return function He(g){return new fe(p=>{for(let y=0;y<g.length&&!p.closed;y++)p.next(g[y]);p.complete()})}(g);if(fr(g))return function Ue(g){return new fe(p=>{g.then(y=>{p.closed||(p.next(y),p.complete())},y=>p.error(y)).then(null,X)})}(g);if(St(g))return wt(g);if(Kt(g))return function it(g){return new fe(p=>{for(const y of g)if(p.next(y),p.closed)return;p.complete()})}(g);if(st(g))return function nr(g){return wt(Ze(g))}(g)}throw Nt(g)}function wt(g){return new fe(p=>{(function wr(g,p){var y,v,_,E;return $e(this,void 0,void 0,function*(){try{for(y=vr(g);!(v=yield y.next()).done;)if(p.next(v.value),p.closed)return}catch(w){_={error:w}}finally{try{v&&!v.done&&(E=y.return)&&(yield E.call(y))}finally{if(_)throw _.error}}p.complete()})})(g,p).catch(y=>p.error(y))})}function Dr(g,p,y,v=0,_=!1){const E=p.schedule(function(){y(),_?g.add(this.schedule(null,v)):this.unsubscribe()},v);if(g.add(E),!_)return E}function Wr(g,p,y=1/0){return x(p)?Wr((v,_)=>Te((E,w)=>p(v,E,_,w))(Ge(g(v,_))),y):("number"==typeof p&&(y=p),rt((v,_)=>function kr(g,p,y,v,_,E,w,D){const O=[];let A=0,W=0,q=!1;const _e=()=>{q&&!O.length&&!A&&p.complete()},be=qe=>A<v?We(qe):O.push(qe),We=qe=>{E&&p.next(qe),A++;let dt=!1;Ge(y(qe,W++)).subscribe(Le(p,gt=>{null==_||_(gt),E?be(gt):p.next(gt)},()=>{dt=!0},void 0,()=>{if(dt)try{for(A--;O.length&&A<v;){const gt=O.shift();w?Dr(p,w,()=>We(gt)):We(gt)}_e()}catch(gt){p.error(gt)}}))};return g.subscribe(Le(p,be,()=>{q=!0,_e()})),()=>{null==D||D()}}(v,_,g,y)))}function cn(g=1/0){return Wr(ue,g)}const Kn=new fe(g=>g.complete());function co(g){return g&&x(g.schedule)}function xo(g){return g[g.length-1]}function qn(g){return co(xo(g))?g.pop():void 0}function Fn(g,p=0){return rt((y,v)=>{y.subscribe(Le(v,_=>Dr(v,g,()=>v.next(_),p),()=>Dr(v,g,()=>v.complete(),p),_=>Dr(v,g,()=>v.error(_),p)))})}function Li(g,p=0){return rt((y,v)=>{v.add(g.schedule(()=>y.subscribe(v),p))})}function ms(g,p){if(!g)throw new Error("Iterable cannot be null");return new fe(y=>{Dr(y,p,()=>{const v=g[Symbol.asyncIterator]();Dr(y,p,()=>{v.next().then(_=>{_.done?y.complete():y.next(_.value)})},0,!0)})})}function Nn(g,p){return p?function Ji(g,p){if(null!=g){if(ht(g))return function js(g,p){return Ge(g).pipe(Li(p),Fn(p))}(g,p);if(lr(g))return function Ea(g,p){return new fe(y=>{let v=0;return p.schedule(function(){v===g.length?y.complete():(y.next(g[v++]),y.closed||this.schedule())})})}(g,p);if(fr(g))return function ss(g,p){return Ge(g).pipe(Li(p),Fn(p))}(g,p);if(St(g))return ms(g,p);if(Kt(g))return function Do(g,p){return new fe(y=>{let v;return Dr(y,p,()=>{v=g[Qt](),Dr(y,p,()=>{let _,E;try{({value:_,done:E}=v.next())}catch(w){return void y.error(w)}E?y.complete():y.next(_)},0,!0)}),()=>x(null==v?void 0:v.return)&&v.return()})}(g,p);if(st(g))return function Bs(g,p){return ms(Ze(g),p)}(g,p)}throw Nt(g)}(g,p):Ge(g)}function So(...g){const p=qn(g),y=function mi(g,p){return"number"==typeof xo(g)?g.pop():p}(g,1/0),v=g;return v.length?1===v.length?Ge(v[0]):cn(y)(Nn(v,p)):Kn}function ei(g){return g<=0?()=>Kn:rt((p,y)=>{let v=0;p.subscribe(Le(y,_=>{++v<=g&&(y.next(_),g<=v&&y.complete())}))})}function Ve(g={}){const{connector:p=(()=>new xe),resetOnError:y=!0,resetOnComplete:v=!0,resetOnRefCountZero:_=!0}=g;return E=>{let w=null,D=null,O=null,A=0,W=!1,q=!1;const _e=()=>{null==D||D.unsubscribe(),D=null},be=()=>{_e(),w=O=null,W=q=!1},We=()=>{const qe=w;be(),null==qe||qe.unsubscribe()};return rt((qe,dt)=>{A++,!q&&!W&&_e();const gt=O=null!=O?O:p();dt.add(()=>{A--,0===A&&!q&&!W&&(D=Yt(We,_))}),gt.subscribe(dt),w||(w=new ye({next:lt=>gt.next(lt),error:lt=>{q=!0,_e(),D=Yt(be,y,lt),gt.error(lt)},complete:()=>{W=!0,_e(),D=Yt(be,v),gt.complete()}}),Nn(qe).subscribe(w))})(E)}}function Yt(g,p,...y){return!0===p?(g(),null):!1===p?null:p(...y).pipe(ei(1)).subscribe(()=>g())}function Ut(g){for(let p in g)if(g[p]===Ut)return p;throw Error("Could not find renamed property on target object.")}function br(g){if("string"==typeof g)return g;if(Array.isArray(g))return"["+g.map(br).join(", ")+"]";if(null==g)return""+g;if(g.overriddenName)return`${g.overriddenName}`;if(g.name)return`${g.name}`;const p=g.toString();if(null==p)return""+p;const y=p.indexOf("\n");return-1===y?p:p.substring(0,y)}function Yr(g,p){return null==g||""===g?null===p?"":p:null==p||""===p?g:g+" "+p}const fn=Ut({__forward_ref__:Ut});function Rr(g){return g.__forward_ref__=Rr,g.toString=function(){return br(this())},g}function xr(g){return function bn(g){return"function"==typeof g&&g.hasOwnProperty(fn)&&g.__forward_ref__===Rr}(g)?g():g}class zr extends Error{constructor(p,y){super(function qt(g,p){return`NG0${Math.abs(g)}${p?": "+p:""}`}(p,y)),this.code=p}}function Or(g){return"string"==typeof g?g:null==g?"":String(g)}function Un(g){return"function"==typeof g?g.name||g.toString():"object"==typeof g&&null!=g&&"function"==typeof g.type?g.type.name||g.type.toString():Or(g)}function ui(g,p){const y=p?` in ${p}`:"";throw new zr(-201,`No provider for ${Un(g)} found${y}`)}function Qn(g,p){null==g&&function Xr(g,p,y,v){throw new Error(`ASSERTION ERROR: ${g}`+(null==v?"":` [Expected=> ${y} ${v} ${p} <=Actual]`))}(p,g,null,"!=")}function xt(g){return{token:g.token,providedIn:g.providedIn||null,factory:g.factory,value:void 0}}const vt=xt;function Lt(g){return{providers:g.providers||[],imports:g.imports||[]}}function ar(g){return tr(g,jt)||tr(g,mr)}function tr(g,p){return g.hasOwnProperty(p)?g[p]:null}function Et(g){return g&&(g.hasOwnProperty(zt)||g.hasOwnProperty(Er))?g[zt]:null}const jt=Ut({\u0275prov:Ut}),zt=Ut({\u0275inj:Ut}),mr=Ut({ngInjectableDef:Ut}),Er=Ut({ngInjectorDef:Ut});var hr=(()=>((hr=hr||{})[hr.Default=0]="Default",hr[hr.Host=1]="Host",hr[hr.Self=2]="Self",hr[hr.SkipSelf=4]="SkipSelf",hr[hr.Optional=8]="Optional",hr))();let on;function Be(g){const p=on;return on=g,p}function nt(g,p,y){const v=ar(g);return v&&"root"==v.providedIn?void 0===v.value?v.value=v.factory():v.value:y&hr.Optional?null:void 0!==p?p:void ui(br(g),"Injector")}function Ne(g){return{toString:g}.toString()}var ke=(()=>((ke=ke||{})[ke.OnPush=0]="OnPush",ke[ke.Default=1]="Default",ke))(),kt=(()=>{return(g=kt||(kt={}))[g.Emulated=0]="Emulated",g[g.None=2]="None",g[g.ShadowDom=3]="ShadowDom",kt;var g})();const Jt="undefined"!=typeof globalThis&&globalThis,ir="undefined"!=typeof window&&window,Sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Fr=Jt||"undefined"!=typeof global&&global||ir||Sr,Ki={},Cn=[],dl=Ut({\u0275cmp:Ut}),hl=Ut({\u0275dir:Ut}),ys=Ut({\u0275pipe:Ut}),lm=Ut({\u0275mod:Ut}),fl=Ut({\u0275fac:Ut}),od=Ut({__NG_ELEMENT_ID__:Ut});let i_=0;function jl(g){return Ne(()=>{const y={},v={type:g.type,providersResolver:null,decls:g.decls,vars:g.vars,factory:null,template:g.template||null,consts:g.consts||null,ngContentSelectors:g.ngContentSelectors,hostBindings:g.hostBindings||null,hostVars:g.hostVars||0,hostAttrs:g.hostAttrs||null,contentQueries:g.contentQueries||null,declaredInputs:y,inputs:null,outputs:null,exportAs:g.exportAs||null,onPush:g.changeDetection===ke.OnPush,directiveDefs:null,pipeDefs:null,selectors:g.selectors||Cn,viewQuery:g.viewQuery||null,features:g.features||null,data:g.data||{},encapsulation:g.encapsulation||kt.Emulated,id:"c",styles:g.styles||Cn,_:null,setInput:null,schemas:g.schemas||null,tView:null},_=g.directives,E=g.features,w=g.pipes;return v.id+=i_++,v.inputs=fm(g.inputs,y),v.outputs=fm(g.outputs),E&&E.forEach(D=>D(v)),v.directiveDefs=_?()=>("function"==typeof _?_():_).map(um):null,v.pipeDefs=w?()=>("function"==typeof w?w():w).map(cm):null,v})}function um(g){return as(g)||function ks(g){return g[hl]||null}(g)}function cm(g){return function _u(g){return g[ys]||null}(g)}const dm={};function ra(g){return Ne(()=>{const p={type:g.type,bootstrap:g.bootstrap||Cn,declarations:g.declarations||Cn,imports:g.imports||Cn,exports:g.exports||Cn,transitiveCompileScopes:null,schemas:g.schemas||null,id:g.id||null};return null!=g.id&&(dm[g.id]=g.type),p})}function fm(g,p){if(null==g)return Ki;const y={};for(const v in g)if(g.hasOwnProperty(v)){let _=g[v],E=_;Array.isArray(_)&&(E=_[1],_=_[0]),y[_]=v,p&&(p[_]=E)}return y}const dn=jl;function as(g){return g[dl]||null}function Fo(g,p){const y=g[lm]||null;if(!y&&!0===p)throw new Error(`Type ${br(g)} does not have '\u0275mod' property.`);return y}function Wa(g){return Array.isArray(g)&&"object"==typeof g[1]}function wa(g){return Array.isArray(g)&&!0===g[1]}function Wf(g){return 0!=(8&g.flags)}function tc(g){return 2==(2&g.flags)}function Jd(g){return 1==(1&g.flags)}function Ma(g){return null!==g.template}function l_(g){return 0!=(512&g[2])}function Vl(g,p){return g.hasOwnProperty(fl)?g[fl]:null}class Qd{constructor(p,y,v){this.previousValue=p,this.currentValue=y,this.firstChange=v}isFirstChange(){return this.firstChange}}function Ws(){return nc}function nc(g){return g.type.prototype.ngOnChanges&&(g.setInput=_m),ic}function ic(){const g=Em(this),p=null==g?void 0:g.current;if(p){const y=g.previous;if(y===Ki)g.previous=p;else for(let v in p)y[v]=p[v];g.current=null,this.ngOnChanges(p)}}function _m(g,p,y,v){const _=Em(g)||function E_(g,p){return g[$f]=p}(g,{previous:Ki,current:null}),E=_.current||(_.current={}),w=_.previous,D=this.declaredInputs[y],O=w[D];E[D]=new Qd(O&&O.currentValue,p,w===Ki),g[v]=p}Ws.ngInherit=!0;const $f="__ngSimpleChanges__";function Em(g){return g[$f]||null}let wu;function Fe(g){return!!g.listen}const Se={createRenderer:(g,p)=>function Ie(){return void 0!==wu?wu:"undefined"!=typeof document?document:void 0}()};function et(g){for(;Array.isArray(g);)g=g[0];return g}function Gt(g,p){return et(p[g])}function cr(g,p){return et(p[g.index])}function Ar(g,p){return g.data[p]}function Qr(g,p){const y=p[g];return Wa(y)?y:y[0]}function Dn(g){return 4==(4&g[2])}function kn(g){return 128==(128&g[2])}function vn(g,p){return null==p?null:g[p]}function Bo(g){g[18]=0}function oc(g,p){g[5]+=p;let y=g,v=g[3];for(;null!==v&&(1===p&&1===y[5]||-1===p&&0===y[5]);)v[5]+=p,y=v,v=v[3]}const An={lFrame:Xw(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Kf(){return An.bindingsEnabled}function Ir(){return An.lFrame.lView}function ci(){return An.lFrame.tView}function Yo(){let g=Kw();for(;null!==g&&64===g.type;)g=g.parent;return g}function Kw(){return An.lFrame.currentTNode}function kl(g,p){const y=An.lFrame;y.currentTNode=g,y.isParent=p}function S_(){return An.lFrame.isParent}function Mm(){return An.isInCheckNoChangesMode}function xm(g){An.isInCheckNoChangesMode=g}function rh(){return An.lFrame.bindingIndex++}function a4(g,p){const y=An.lFrame;y.bindingIndex=y.bindingRootIndex=g,I_(p)}function I_(g){An.lFrame.currentDirectiveIndex=g}function Hw(){return An.lFrame.currentQueryIndex}function A_(g){An.lFrame.currentQueryIndex=g}function u4(g){const p=g[1];return 2===p.type?p.declTNode:1===p.type?g[6]:null}function Yw(g,p,y){if(y&hr.SkipSelf){let _=p,E=g;for(;!(_=_.parent,null!==_||y&hr.Host||(_=u4(E),null===_||(E=E[15],10&_.type))););if(null===_)return!1;p=_,g=E}const v=An.lFrame=Jw();return v.currentTNode=p,v.lView=g,!0}function Dm(g){const p=Jw(),y=g[1];An.lFrame=p,p.currentTNode=y.firstChild,p.lView=g,p.tView=y,p.contextLView=g,p.bindingIndex=y.bindingStartIndex,p.inI18n=!1}function Jw(){const g=An.lFrame,p=null===g?null:g.child;return null===p?Xw(g):p}function Xw(g){const p={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:g,child:null,inI18n:!1};return null!==g&&(g.child=p),p}function Qw(){const g=An.lFrame;return An.lFrame=g.parent,g.currentTNode=null,g.lView=null,g}const qw=Qw;function Sm(){const g=Qw();g.isParent=!0,g.tView=null,g.selectedIndex=-1,g.contextLView=null,g.elementDepthCount=0,g.currentDirectiveIndex=-1,g.currentNamespace=null,g.bindingRootIndex=-1,g.bindingIndex=-1,g.currentQueryIndex=0}function $s(){return An.lFrame.selectedIndex}function sc(g){An.lFrame.selectedIndex=g}function Om(){An.lFrame.currentNamespace="svg"}function Im(){!function f4(){An.lFrame.currentNamespace=null}()}function Tm(g,p){for(let y=p.directiveStart,v=p.directiveEnd;y<v;y++){const E=g.data[y].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:D,ngAfterViewInit:O,ngAfterViewChecked:A,ngOnDestroy:W}=E;w&&(g.contentHooks||(g.contentHooks=[])).push(-y,w),D&&((g.contentHooks||(g.contentHooks=[])).push(y,D),(g.contentCheckHooks||(g.contentCheckHooks=[])).push(y,D)),O&&(g.viewHooks||(g.viewHooks=[])).push(-y,O),A&&((g.viewHooks||(g.viewHooks=[])).push(y,A),(g.viewCheckHooks||(g.viewCheckHooks=[])).push(y,A)),null!=W&&(g.destroyHooks||(g.destroyHooks=[])).push(y,W)}}function Am(g,p,y){eM(g,p,3,y)}function Pm(g,p,y,v){(3&g[2])===y&&eM(g,p,y,v)}function P_(g,p){let y=g[2];(3&y)===p&&(y&=2047,y+=1,g[2]=y)}function eM(g,p,y,v){const E=null!=v?v:-1,w=p.length-1;let D=0;for(let O=void 0!==v?65535&g[18]:0;O<w;O++)if("number"==typeof p[O+1]){if(D=p[O],null!=v&&D>=v)break}else p[O]<0&&(g[18]+=65536),(D<E||-1==E)&&(g4(g,y,p,O),g[18]=(4294901760&g[18])+O+2),O++}function g4(g,p,y,v){const _=y[v]<0,E=y[v+1],D=g[_?-y[v]:y[v]];if(_){if(g[2]>>11<g[18]>>16&&(3&g[2])===p){g[2]+=2048;try{E.call(D)}finally{}}}else try{E.call(D)}finally{}}class Hf{constructor(p,y,v){this.factory=p,this.resolving=!1,this.canSeeViewProviders=y,this.injectImpl=v}}function Rm(g,p,y){const v=Fe(g);let _=0;for(;_<y.length;){const E=y[_];if("number"==typeof E){if(0!==E)break;_++;const w=y[_++],D=y[_++],O=y[_++];v?g.setAttribute(p,D,O,w):p.setAttributeNS(w,D,O)}else{const w=E,D=y[++_];L_(w)?v&&g.setProperty(p,w,D):v?g.setAttribute(p,w,D):p.setAttribute(w,D),_++}}return _}function tM(g){return 3===g||4===g||6===g}function L_(g){return 64===g.charCodeAt(0)}function Lm(g,p){if(null!==p&&0!==p.length)if(null===g||0===g.length)g=p.slice();else{let y=-1;for(let v=0;v<p.length;v++){const _=p[v];"number"==typeof _?y=_:0===y||rM(g,y,_,null,-1===y||2===y?p[++v]:null)}}return g}function rM(g,p,y,v,_){let E=0,w=g.length;if(-1===p)w=-1;else for(;E<g.length;){const D=g[E++];if("number"==typeof D){if(D===p){w=-1;break}if(D>p){w=E-1;break}}}for(;E<g.length;){const D=g[E];if("number"==typeof D)break;if(D===y){if(null===v)return void(null!==_&&(g[E+1]=_));if(v===g[E+1])return void(g[E+2]=_)}E++,null!==v&&E++,null!==_&&E++}-1!==w&&(g.splice(w,0,p),E=w+1),g.splice(E++,0,y),null!==v&&g.splice(E++,0,v),null!==_&&g.splice(E++,0,_)}function nM(g){return-1!==g}function nh(g){return 32767&g}function ih(g,p){let y=function b4(g){return g>>16}(g),v=p;for(;y>0;)v=v[15],y--;return v}let N_=!0;function Nm(g){const p=N_;return N_=g,p}let C4=0;function Jf(g,p){const y=j_(g,p);if(-1!==y)return y;const v=p[1];v.firstCreatePass&&(g.injectorIndex=p.length,F_(v.data,g),F_(p,null),F_(v.blueprint,null));const _=Fm(g,p),E=g.injectorIndex;if(nM(_)){const w=nh(_),D=ih(_,p),O=D[1].data;for(let A=0;A<8;A++)p[E+A]=D[w+A]|O[w+A]}return p[E+8]=_,E}function F_(g,p){g.push(0,0,0,0,0,0,0,0,p)}function j_(g,p){return-1===g.injectorIndex||g.parent&&g.parent.injectorIndex===g.injectorIndex||null===p[g.injectorIndex+8]?-1:g.injectorIndex}function Fm(g,p){if(g.parent&&-1!==g.parent.injectorIndex)return g.parent.injectorIndex;let y=0,v=null,_=p;for(;null!==_;){const E=_[1],w=E.type;if(v=2===w?E.declTNode:1===w?_[6]:null,null===v)return-1;if(y++,_=_[15],-1!==v.injectorIndex)return v.injectorIndex|y<<16}return-1}function jm(g,p,y){!function w4(g,p,y){let v;"string"==typeof y?v=y.charCodeAt(0)||0:y.hasOwnProperty(od)&&(v=y[od]),null==v&&(v=y[od]=C4++);const _=255&v;p.data[g+(_>>5)]|=1<<_}(g,p,y)}function sM(g,p,y){if(y&hr.Optional)return g;ui(p,"NodeInjector")}function aM(g,p,y,v){if(y&hr.Optional&&void 0===v&&(v=null),0==(y&(hr.Self|hr.Host))){const _=g[9],E=Be(void 0);try{return _?_.get(p,v,y&hr.Optional):nt(p,v,y&hr.Optional)}finally{Be(E)}}return sM(v,p,y)}function lM(g,p,y,v=hr.Default,_){if(null!==g){const E=function S4(g){if("string"==typeof g)return g.charCodeAt(0)||0;const p=g.hasOwnProperty(od)?g[od]:void 0;return"number"==typeof p?p>=0?255&p:x4:p}(y);if("function"==typeof E){if(!Yw(p,g,v))return v&hr.Host?sM(_,y,v):aM(p,y,v,_);try{const w=E(v);if(null!=w||v&hr.Optional)return w;ui(y)}finally{qw()}}else if("number"==typeof E){let w=null,D=j_(g,p),O=-1,A=v&hr.Host?p[16][6]:null;for((-1===D||v&hr.SkipSelf)&&(O=-1===D?Fm(g,p):p[D+8],-1!==O&&dM(v,!1)?(w=p[1],D=nh(O),p=ih(O,p)):D=-1);-1!==D;){const W=p[1];if(cM(E,D,W.data)){const q=D4(D,p,y,w,v,A);if(q!==uM)return q}O=p[D+8],-1!==O&&dM(v,p[1].data[D+8]===A)&&cM(E,D,p)?(w=W,D=nh(O),p=ih(O,p)):D=-1}}}return aM(p,y,v,_)}const uM={};function x4(){return new oh(Yo(),Ir())}function D4(g,p,y,v,_,E){const w=p[1],D=w.data[g+8],W=Bm(D,w,y,null==v?tc(D)&&N_:v!=w&&0!=(3&D.type),_&hr.Host&&E===D);return null!==W?Xf(p,w,W,D):uM}function Bm(g,p,y,v,_){const E=g.providerIndexes,w=p.data,D=1048575&E,O=g.directiveStart,W=E>>20,_e=_?D+W:g.directiveEnd;for(let be=v?D:D+W;be<_e;be++){const We=w[be];if(be<O&&y===We||be>=O&&We.type===y)return be}if(_){const be=w[O];if(be&&Ma(be)&&be.type===y)return O}return null}function Xf(g,p,y,v){let _=g[y];const E=p.data;if(function y4(g){return g instanceof Hf}(_)){const w=_;w.resolving&&function ai(g,p){const y=p?`. Dependency path: ${p.join(" > ")} > ${g}`:"";throw new zr(-200,`Circular dependency in DI detected for ${g}${y}`)}(Un(E[y]));const D=Nm(w.canSeeViewProviders);w.resolving=!0;const O=w.injectImpl?Be(w.injectImpl):null;Yw(g,v,hr.Default);try{_=g[y]=w.factory(void 0,E,g,v),p.firstCreatePass&&y>=v.directiveStart&&function m4(g,p,y){const{ngOnChanges:v,ngOnInit:_,ngDoCheck:E}=p.type.prototype;if(v){const w=nc(p);(y.preOrderHooks||(y.preOrderHooks=[])).push(g,w),(y.preOrderCheckHooks||(y.preOrderCheckHooks=[])).push(g,w)}_&&(y.preOrderHooks||(y.preOrderHooks=[])).push(0-g,_),E&&((y.preOrderHooks||(y.preOrderHooks=[])).push(g,E),(y.preOrderCheckHooks||(y.preOrderCheckHooks=[])).push(g,E))}(y,E[y],p)}finally{null!==O&&Be(O),Nm(D),w.resolving=!1,qw()}}return _}function cM(g,p,y){return!!(y[p+(g>>5)]&1<<g)}function dM(g,p){return!(g&hr.Self||g&hr.Host&&p)}class oh{constructor(p,y){this._tNode=p,this._lView=y}get(p,y,v){return lM(this._tNode,this._lView,p,v,y)}}const ah="__parameters__";function uh(g,p,y){return Ne(()=>{const v=function U_(g){return function(...y){if(g){const v=g(...y);for(const _ in v)this[_]=v[_]}}}(p);function _(...E){if(this instanceof _)return v.apply(this,E),this;const w=new _(...E);return D.annotation=w,D;function D(O,A,W){const q=O.hasOwnProperty(ah)?O[ah]:Object.defineProperty(O,ah,{value:[]})[ah];for(;q.length<=W;)q.push(null);return(q[W]=q[W]||[]).push(w),O}}return y&&(_.prototype=Object.create(y.prototype)),_.prototype.ngMetadataName=g,_.annotationCls=_,_})}class pn{constructor(p,y){this._desc=p,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof y?this.__NG_ELEMENT_ID__=y:void 0!==y&&(this.\u0275prov=xt({token:this,providedIn:y.providedIn||"root",factory:y.factory}))}toString(){return`InjectionToken ${this._desc}`}}const I4=new pn("AnalyzeForEntryComponents");function Za(g,p){void 0===p&&(p=g);for(let y=0;y<g.length;y++){let v=g[y];Array.isArray(v)?(p===g&&(p=g.slice(0,y)),Za(v,p)):p!==g&&p.push(v)}return p}function Wl(g,p){g.forEach(y=>Array.isArray(y)?Wl(y,p):p(y))}function fM(g,p,y){p>=g.length?g.push(y):g.splice(p,0,y)}function Um(g,p){return p>=g.length-1?g.pop():g.splice(p,1)[0]}function Da(g,p,y){let v=ch(g,p);return v>=0?g[1|v]=y:(v=~v,function P4(g,p,y,v){let _=g.length;if(_==p)g.push(y,v);else if(1===_)g.push(v,g[0]),g[0]=y;else{for(_--,g.push(g[_-1],g[_]);_>p;)g[_]=g[_-2],_--;g[p]=y,g[p+1]=v}}(g,v,p,y)),v}function k_(g,p){const y=ch(g,p);if(y>=0)return g[1|y]}function ch(g,p){return function gM(g,p,y){let v=0,_=g.length>>y;for(;_!==v;){const E=v+(_-v>>1),w=g[E<<y];if(p===w)return E<<y;w>p?_=E:v=E+1}return~(_<<y)}(g,p,1)}const rp={},Z_="__NG_DI_FLAG__",km="ngTempTokenPath",U4=/\n/gm,vM="__source",k4=Ut({provide:String,useValue:Ut});let np;function _M(g){const p=np;return np=g,p}function W4(g,p=hr.Default){if(void 0===np)throw new zr(203,"");return null===np?nt(g,void 0,p):np.get(g,p&hr.Optional?null:void 0,p)}function _n(g,p=hr.Default){return(function yn(){return on}()||W4)(xr(g),p)}const oo=_n;function $_(g){const p=[];for(let y=0;y<g.length;y++){const v=xr(g[y]);if(Array.isArray(v)){if(0===v.length)throw new zr(900,"");let _,E=hr.Default;for(let w=0;w<v.length;w++){const D=v[w],O=Z4(D);"number"==typeof O?-1===O?_=D.token:E|=O:_=D}p.push(_n(_,E))}else p.push(_n(v))}return p}function ip(g,p){return g[Z_]=p,g.prototype[Z_]=p,g}function Z4(g){return g[Z_]}const Wm=ip(uh("Inject",g=>({token:g})),-1),lc=ip(uh("Optional"),8),op=ip(uh("SkipSelf"),4);class OM{constructor(p){this.changingThisBreaksApplicationSecurity=p}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function uc(g){return g instanceof OM?g.changingThisBreaksApplicationSecurity:g}const dL=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,hL=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Uo=(()=>((Uo=Uo||{})[Uo.NONE=0]="NONE",Uo[Uo.HTML=1]="HTML",Uo[Uo.STYLE=2]="STYLE",Uo[Uo.SCRIPT=3]="SCRIPT",Uo[Uo.URL=4]="URL",Uo[Uo.RESOURCE_URL=5]="RESOURCE_URL",Uo))();function Q_(g){const p=function up(){const g=Ir();return g&&g[12]}();return p?p.sanitize(Uo.URL,g)||"":function ap(g,p){const y=function aL(g){return g instanceof OM&&g.getTypeName()||null}(g);if(null!=y&&y!==p){if("ResourceURL"===y&&"URL"===p)return!0;throw new Error(`Required a safe ${p}, got a ${y} (see https://g.co/ng/security#xss)`)}return y===p}(g,"URL")?uc(g):function zm(g){return(g=String(g)).match(dL)||g.match(hL)?g:"unsafe:"+g}(Or(g))}const BM="__ngContext__";function Os(g,p){g[BM]=p}function e1(g){const p=function cp(g){return g[BM]||null}(g);return p?Array.isArray(p)?p:p.lView:null}function r1(g){return g.ngOriginalError}function NL(g,...p){g.error(...p)}class dp{constructor(){this._console=console}handleError(p){const y=this._findOriginalError(p),v=function LL(g){return g&&g.ngErrorLogger||NL}(p);v(this._console,"ERROR",p),y&&v(this._console,"ORIGINAL ERROR",y)}_findOriginalError(p){let y=p&&r1(p);for(;y&&r1(y);)y=r1(y);return y||null}}const KL=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Fr))();function $l(g){return g instanceof Function?g():g}var Sa=(()=>((Sa=Sa||{})[Sa.Important=1]="Important",Sa[Sa.DashCase=2]="DashCase",Sa))();function i1(g,p){return undefined(g,p)}function hp(g){const p=g[3];return wa(p)?p[3]:p}function o1(g){return GM(g[13])}function s1(g){return GM(g[4])}function GM(g){for(;null!==g&&!wa(g);)g=g[4];return g}function ph(g,p,y,v,_){if(null!=v){let E,w=!1;wa(v)?E=v:Wa(v)&&(w=!0,v=v[0]);const D=et(v);0===g&&null!==y?null==_?qM(p,y,D):dd(p,y,D,_||null,!0):1===g&&null!==y?dd(p,y,D,_||null,!0):2===g?function sx(g,p,y){const v=Hm(g,p);v&&function o5(g,p,y,v){Fe(g)?g.removeChild(p,y,v):p.removeChild(y)}(g,v,p,y)}(p,D,w):3===g&&p.destroyNode(D),null!=E&&function l5(g,p,y,v,_){const E=y[7];E!==et(y)&&ph(p,g,v,E,_);for(let D=10;D<y.length;D++){const O=y[D];fp(O[1],O,g,p,v,E)}}(p,g,E,y,_)}}function l1(g,p,y){if(Fe(g))return g.createElement(p,y);{const v=null!==y?function mo(g){const p=g.toLowerCase();return"svg"===p?"http://www.w3.org/2000/svg":"math"===p?"http://www.w3.org/1998/MathML/":null}(y):null;return null===v?g.createElement(p):g.createElementNS(v,p)}}function YM(g,p){const y=g[9],v=y.indexOf(p),_=p[3];1024&p[2]&&(p[2]&=-1025,oc(_,-1)),y.splice(v,1)}function u1(g,p){if(g.length<=10)return;const y=10+p,v=g[y];if(v){const _=v[17];null!==_&&_!==g&&YM(_,v),p>0&&(g[y-1][4]=v[4]);const E=Um(g,10+p);!function XL(g,p){fp(g,p,p[11],2,null,null),p[0]=null,p[6]=null}(v[1],v);const w=E[19];null!==w&&w.detachView(E[1]),v[3]=null,v[4]=null,v[2]&=-129}return v}function JM(g,p){if(!(256&p[2])){const y=p[11];Fe(y)&&y.destroyNode&&fp(g,p,y,3,null,null),function e5(g){let p=g[13];if(!p)return c1(g[1],g);for(;p;){let y=null;if(Wa(p))y=p[13];else{const v=p[10];v&&(y=v)}if(!y){for(;p&&!p[4]&&p!==g;)Wa(p)&&c1(p[1],p),p=p[3];null===p&&(p=g),Wa(p)&&c1(p[1],p),y=p&&p[4]}p=y}}(p)}}function c1(g,p){if(!(256&p[2])){p[2]&=-129,p[2]|=256,function i5(g,p){let y;if(null!=g&&null!=(y=g.destroyHooks))for(let v=0;v<y.length;v+=2){const _=p[y[v]];if(!(_ instanceof Hf)){const E=y[v+1];if(Array.isArray(E))for(let w=0;w<E.length;w+=2){const D=_[E[w]],O=E[w+1];try{O.call(D)}finally{}}else try{E.call(_)}finally{}}}}(g,p),function n5(g,p){const y=g.cleanup,v=p[7];let _=-1;if(null!==y)for(let E=0;E<y.length-1;E+=2)if("string"==typeof y[E]){const w=y[E+1],D="function"==typeof w?w(p):et(p[w]),O=v[_=y[E+2]],A=y[E+3];"boolean"==typeof A?D.removeEventListener(y[E],O,A):A>=0?v[_=A]():v[_=-A].unsubscribe(),E+=2}else{const w=v[_=y[E+1]];y[E].call(w)}if(null!==v){for(let E=_+1;E<v.length;E++)v[E]();p[7]=null}}(g,p),1===p[1].type&&Fe(p[11])&&p[11].destroy();const y=p[17];if(null!==y&&wa(p[3])){y!==p[3]&&YM(y,p);const v=p[19];null!==v&&v.detachView(g)}}}function XM(g,p,y){return function QM(g,p,y){let v=p;for(;null!==v&&40&v.type;)v=(p=v).parent;if(null===v)return y[0];if(2&v.flags){const _=g.data[v.directiveStart].encapsulation;if(_===kt.None||_===kt.Emulated)return null}return cr(v,y)}(g,p.parent,y)}function dd(g,p,y,v,_){Fe(g)?g.insertBefore(p,y,v,_):p.insertBefore(y,v,_)}function qM(g,p,y){Fe(g)?g.appendChild(p,y):p.appendChild(y)}function ex(g,p,y,v,_){null!==v?dd(g,p,y,v,_):qM(g,p,y)}function Hm(g,p){return Fe(g)?g.parentNode(p):p.parentNode}let nx=function rx(g,p,y){return 40&g.type?cr(g,y):null};function Ym(g,p,y,v){const _=XM(g,v,p),E=p[11],D=function tx(g,p,y){return nx(g,p,y)}(v.parent||p[6],v,p);if(null!=_)if(Array.isArray(y))for(let O=0;O<y.length;O++)ex(E,_,y[O],D,!1);else ex(E,_,y,D,!1)}function Jm(g,p){if(null!==p){const y=p.type;if(3&y)return cr(p,g);if(4&y)return h1(-1,g[p.index]);if(8&y){const v=p.child;if(null!==v)return Jm(g,v);{const _=g[p.index];return wa(_)?h1(-1,_):et(_)}}if(32&y)return i1(p,g)()||et(g[p.index]);{const v=ox(g,p);return null!==v?Array.isArray(v)?v[0]:Jm(hp(g[16]),v):Jm(g,p.next)}}return null}function ox(g,p){return null!==p?g[16][6].projection[p.projection]:null}function h1(g,p){const y=10+g+1;if(y<p.length){const v=p[y],_=v[1].firstChild;if(null!==_)return Jm(v,_)}return p[7]}function f1(g,p,y,v,_,E,w){for(;null!=y;){const D=v[y.index],O=y.type;if(w&&0===p&&(D&&Os(et(D),v),y.flags|=4),64!=(64&y.flags))if(8&O)f1(g,p,y.child,v,_,E,!1),ph(p,g,_,D,E);else if(32&O){const A=i1(y,v);let W;for(;W=A();)ph(p,g,_,W,E);ph(p,g,_,D,E)}else 16&O?ax(g,p,v,y,_,E):ph(p,g,_,D,E);y=w?y.projectionNext:y.next}}function fp(g,p,y,v,_,E){f1(y,v,g.firstChild,p,_,E,!1)}function ax(g,p,y,v,_,E){const w=y[16],O=w[6].projection[v.projection];if(Array.isArray(O))for(let A=0;A<O.length;A++)ph(p,g,_,O[A],E);else f1(g,p,O,w[3],_,E,!0)}function lx(g,p,y){Fe(g)?g.setAttribute(p,"style",y):p.style.cssText=y}function p1(g,p,y){Fe(g)?""===y?g.removeAttribute(p,"class"):g.setAttribute(p,"class",y):p.className=y}function ux(g,p,y){let v=g.length;for(;;){const _=g.indexOf(p,y);if(-1===_)return _;if(0===_||g.charCodeAt(_-1)<=32){const E=p.length;if(_+E===v||g.charCodeAt(_+E)<=32)return _}y=_+1}}const cx="ng-template";function c5(g,p,y){let v=0;for(;v<g.length;){let _=g[v++];if(y&&"class"===_){if(_=g[v],-1!==ux(_.toLowerCase(),p,0))return!0}else if(1===_){for(;v<g.length&&"string"==typeof(_=g[v++]);)if(_.toLowerCase()===p)return!0;return!1}}return!1}function dx(g){return 4===g.type&&g.value!==cx}function d5(g,p,y){return p===(4!==g.type||y?g.value:cx)}function h5(g,p,y){let v=4;const _=g.attrs||[],E=function m5(g){for(let p=0;p<g.length;p++)if(tM(g[p]))return p;return g.length}(_);let w=!1;for(let D=0;D<p.length;D++){const O=p[D];if("number"!=typeof O){if(!w)if(4&v){if(v=2|1&v,""!==O&&!d5(g,O,y)||""===O&&1===p.length){if(pl(v))return!1;w=!0}}else{const A=8&v?O:p[++D];if(8&v&&null!==g.attrs){if(!c5(g.attrs,A,y)){if(pl(v))return!1;w=!0}continue}const q=f5(8&v?"class":O,_,dx(g),y);if(-1===q){if(pl(v))return!1;w=!0;continue}if(""!==A){let _e;_e=q>E?"":_[q+1].toLowerCase();const be=8&v?_e:null;if(be&&-1!==ux(be,A,0)||2&v&&A!==_e){if(pl(v))return!1;w=!0}}}}else{if(!w&&!pl(v)&&!pl(O))return!1;if(w&&pl(O))continue;w=!1,v=O|1&v}}return pl(v)||w}function pl(g){return 0==(1&g)}function f5(g,p,y,v){if(null===p)return-1;let _=0;if(v||!y){let E=!1;for(;_<p.length;){const w=p[_];if(w===g)return _;if(3===w||6===w)E=!0;else{if(1===w||2===w){let D=p[++_];for(;"string"==typeof D;)D=p[++_];continue}if(4===w)break;if(0===w){_+=4;continue}}_+=E?1:2}return-1}return function g5(g,p){let y=g.indexOf(4);if(y>-1)for(y++;y<g.length;){const v=g[y];if("number"==typeof v)return-1;if(v===p)return y;y++}return-1}(p,g)}function hx(g,p,y=!1){for(let v=0;v<p.length;v++)if(h5(g,p[v],y))return!0;return!1}function fx(g,p){return g?":not("+p.trim()+")":p}function v5(g){let p=g[0],y=1,v=2,_="",E=!1;for(;y<g.length;){let w=g[y];if("string"==typeof w)if(2&v){const D=g[++y];_+="["+w+(D.length>0?'="'+D+'"':"")+"]"}else 8&v?_+="."+w:4&v&&(_+=" "+w);else""!==_&&!pl(w)&&(p+=fx(E,_),_=""),v=w,E=E||!pl(v);y++}return""!==_&&(p+=fx(E,_)),p}const Wn={};function mx(g,p,y,v){if(!v)if(3==(3&p[2])){const E=g.preOrderCheckHooks;null!==E&&Am(p,E,y)}else{const E=g.preOrderHooks;null!==E&&Pm(p,E,0,y)}sc(y)}function Xm(g,p){return g<<17|p<<2}function ml(g){return g>>17&32767}function m1(g){return 2|g}function Du(g){return(131068&g)>>2}function g1(g,p){return-131069&g|p<<2}function y1(g){return 1|g}function Dx(g,p){const y=g.contentQueries;if(null!==y)for(let v=0;v<y.length;v+=2){const _=y[v],E=y[v+1];if(-1!==E){const w=g.data[E];A_(_),w.contentQueries(2,p[E],E)}}}function pp(g,p,y,v,_,E,w,D,O,A){const W=p.blueprint.slice();return W[0]=_,W[2]=140|v,Bo(W),W[3]=W[15]=g,W[8]=y,W[10]=w||g&&g[10],W[11]=D||g&&g[11],W[12]=O||g&&g[12]||null,W[9]=A||g&&g[9]||null,W[6]=E,W[16]=2==p.type?g[16]:W,W}function mh(g,p,y,v,_){let E=g.data[p];if(null===E)E=function D1(g,p,y,v,_){const E=Kw(),w=S_(),O=g.data[p]=function F5(g,p,y,v,_,E){return{type:y,index:v,insertBeforeIndex:null,injectorIndex:p?p.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:_,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:p,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?E:E&&E.parent,y,p,v,_);return null===g.firstChild&&(g.firstChild=O),null!==E&&(w?null==E.child&&null!==O.parent&&(E.child=O):null===E.next&&(E.next=O)),O}(g,p,y,v,_),function s4(){return An.lFrame.inI18n}()&&(E.flags|=64);else if(64&E.type){E.type=y,E.value=v,E.attrs=_;const w=function Gf(){const g=An.lFrame,p=g.currentTNode;return g.isParent?p:p.parent}();E.injectorIndex=null===w?-1:w.injectorIndex}return kl(E,!0),E}function gh(g,p,y,v){if(0===y)return-1;const _=p.length;for(let E=0;E<y;E++)p.push(v),g.blueprint.push(v),g.data.push(null);return _}function mp(g,p,y){Dm(p);try{const v=g.viewQuery;null!==v&&N1(1,v,y);const _=g.template;null!==_&&Sx(g,p,_,1,y),g.firstCreatePass&&(g.firstCreatePass=!1),g.staticContentQueries&&Dx(g,p),g.staticViewQueries&&N1(2,g.viewQuery,y);const E=g.components;null!==E&&function R5(g,p){for(let y=0;y<p.length;y++)e7(g,p[y])}(p,E)}catch(v){throw g.firstCreatePass&&(g.incompleteFirstPass=!0,g.firstCreatePass=!1),v}finally{p[2]&=-5,Sm()}}function yh(g,p,y,v){const _=p[2];if(256==(256&_))return;Dm(p);const E=Mm();try{Bo(p),function zw(g){return An.lFrame.bindingIndex=g}(g.bindingStartIndex),null!==y&&Sx(g,p,y,2,v);const w=3==(3&_);if(!E)if(w){const A=g.preOrderCheckHooks;null!==A&&Am(p,A,null)}else{const A=g.preOrderHooks;null!==A&&Pm(p,A,0,null),P_(p,0)}if(function Q5(g){for(let p=o1(g);null!==p;p=s1(p)){if(!p[2])continue;const y=p[9];for(let v=0;v<y.length;v++){const _=y[v],E=_[3];0==(1024&_[2])&&oc(E,1),_[2]|=1024}}}(p),function X5(g){for(let p=o1(g);null!==p;p=s1(p))for(let y=10;y<p.length;y++){const v=p[y],_=v[1];kn(v)&&yh(_,v,_.template,v[8])}}(p),null!==g.contentQueries&&Dx(g,p),!E)if(w){const A=g.contentCheckHooks;null!==A&&Am(p,A)}else{const A=g.contentHooks;null!==A&&Pm(p,A,1),P_(p,1)}!function A5(g,p){const y=g.hostBindingOpCodes;if(null!==y)try{for(let v=0;v<y.length;v++){const _=y[v];if(_<0)sc(~_);else{const E=_,w=y[++v],D=y[++v];a4(w,E),D(2,p[E])}}}finally{sc(-1)}}(g,p);const D=g.components;null!==D&&function P5(g,p){for(let y=0;y<p.length;y++)q5(g,p[y])}(p,D);const O=g.viewQuery;if(null!==O&&N1(2,O,v),!E)if(w){const A=g.viewCheckHooks;null!==A&&Am(p,A)}else{const A=g.viewHooks;null!==A&&Pm(p,A,2),P_(p,2)}!0===g.firstUpdatePass&&(g.firstUpdatePass=!1),E||(p[2]&=-73),1024&p[2]&&(p[2]&=-1025,oc(p[3],-1))}finally{Sm()}}function L5(g,p,y,v){const _=p[10],E=!Mm(),w=Dn(p);try{E&&!w&&_.begin&&_.begin(),w&&mp(g,p,v),yh(g,p,y,v)}finally{E&&!w&&_.end&&_.end()}}function Sx(g,p,y,v,_){const E=$s(),w=2&v;try{sc(-1),w&&p.length>20&&mx(g,p,20,Mm()),y(v,_)}finally{sc(E)}}function Ix(g){const p=g.tView;return null===p||p.incompleteFirstPass?g.tView=eg(1,null,g.template,g.decls,g.vars,g.directiveDefs,g.pipeDefs,g.viewQuery,g.schemas,g.consts):p}function eg(g,p,y,v,_,E,w,D,O,A){const W=20+v,q=W+_,_e=function N5(g,p){const y=[];for(let v=0;v<p;v++)y.push(v<g?null:Wn);return y}(W,q),be="function"==typeof A?A():A;return _e[1]={type:g,blueprint:_e,template:y,queries:null,viewQuery:D,declTNode:p,data:_e.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:O,consts:be,incompleteFirstPass:!1}}function Px(g,p,y,v){const _=Wx(p);null===y?_.push(v):(_.push(y),g.firstCreatePass&&Zx(g).push(v,_.length-1))}function Rx(g,p,y){for(let v in g)if(g.hasOwnProperty(v)){const _=g[v];(y=null===y?{}:y).hasOwnProperty(v)?y[v].push(p,_):y[v]=[p,_]}return y}function Nx(g,p,y,v,_,E){const w=E.hostBindings;if(w){let D=g.hostBindingOpCodes;null===D&&(D=g.hostBindingOpCodes=[]);const O=~p.index;(function W5(g){let p=g.length;for(;p>0;){const y=g[--p];if("number"==typeof y&&y<0)return y}return 0})(D)!=O&&D.push(O),D.push(v,_,w)}}function Fx(g,p){null!==g.hostBindings&&g.hostBindings(1,p)}function jx(g,p){p.flags|=2,(g.components||(g.components=[])).push(p.index)}function G5(g,p,y){if(y){if(p.exportAs)for(let v=0;v<p.exportAs.length;v++)y[p.exportAs[v]]=g;Ma(p)&&(y[""]=g)}}function Bx(g,p,y){g.flags|=1,g.directiveStart=p,g.directiveEnd=p+y,g.providerIndexes=p}function Ux(g,p,y,v,_){g.data[v]=_;const E=_.factory||(_.factory=Vl(_.type)),w=new Hf(E,Ma(_),null);g.blueprint[v]=w,y[v]=w,Nx(g,p,0,v,gh(g,y,_.hostVars,Wn),_)}function H5(g,p,y){const v=cr(p,g),_=Ix(y),E=g[10],w=tg(g,pp(g,_,null,y.onPush?64:16,v,p,E,E.createRenderer(v,y),null,null));g[p.index]=w}function Kl(g,p,y,v,_,E){const w=cr(g,p);!function T1(g,p,y,v,_,E,w){if(null==E)Fe(g)?g.removeAttribute(p,_,y):p.removeAttribute(_);else{const D=null==w?Or(E):w(E,v||"",_);Fe(g)?g.setAttribute(p,_,D,y):y?p.setAttributeNS(y,_,D):p.setAttribute(_,D)}}(p[11],w,E,g.value,y,v,_)}function Y5(g,p,y,v,_,E){const w=E[p];if(null!==w){const D=v.setInput;for(let O=0;O<w.length;){const A=w[O++],W=w[O++],q=w[O++];null!==D?v.setInput(y,q,A,W):y[W]=q}}}function J5(g,p){let y=null,v=0;for(;v<p.length;){const _=p[v];if(0!==_)if(5!==_){if("number"==typeof _)break;g.hasOwnProperty(_)&&(null===y&&(y=[]),y.push(_,g[_],p[v+1])),v+=2}else v+=2;else v+=4}return y}function q5(g,p){const y=Qr(p,g);if(kn(y)){const v=y[1];80&y[2]?yh(v,y,v.template,y[8]):y[5]>0&&A1(y)}}function A1(g){for(let v=o1(g);null!==v;v=s1(v))for(let _=10;_<v.length;_++){const E=v[_];if(1024&E[2]){const w=E[1];yh(w,E,w.template,E[8])}else E[5]>0&&A1(E)}const y=g[1].components;if(null!==y)for(let v=0;v<y.length;v++){const _=Qr(y[v],g);kn(_)&&_[5]>0&&A1(_)}}function e7(g,p){const y=Qr(p,g),v=y[1];(function t7(g,p){for(let y=p.length;y<g.blueprint.length;y++)p.push(g.blueprint[y])})(v,y),mp(v,y,y[8])}function tg(g,p){return g[13]?g[14][4]=p:g[13]=p,g[14]=p,p}function P1(g){for(;g;){g[2]|=64;const p=hp(g);if(l_(g)&&!p)return g;g=p}return null}function L1(g,p,y){const v=p[10];v.begin&&v.begin();try{yh(g,p,g.template,y)}catch(_){throw Kx(p,_),_}finally{v.end&&v.end()}}function kx(g){!function R1(g){for(let p=0;p<g.components.length;p++){const y=g.components[p],v=e1(y),_=v[1];L5(_,v,_.template,y)}}(g[8])}function N1(g,p,y){A_(0),p(g,y)}const o7=(()=>Promise.resolve(null))();function Wx(g){return g[7]||(g[7]=[])}function Zx(g){return g.cleanup||(g.cleanup=[])}function Kx(g,p){const y=g[9],v=y?y.get(dp,null):null;v&&v.handleError(p)}function Su(g,p,y){const v=Gt(p,g);!function HM(g,p,y){Fe(g)?g.setValue(p,y):p.textContent=y}(g[11],v,y)}function rg(g,p,y){let v=y?g.styles:null,_=y?g.classes:null,E=0;if(null!==p)for(let w=0;w<p.length;w++){const D=p[w];"number"==typeof D?E=D:1==E?_=Yr(_,D):2==E&&(v=Yr(v,D+": "+p[++w]+";"))}y?g.styles=v:g.stylesWithoutHost=v,y?g.classes=_:g.classesWithoutHost=_}const F1=new pn("INJECTOR",-1);class Gx{get(p,y=rp){if(y===rp){const v=new Error(`NullInjectorError: No provider for ${br(p)}!`);throw v.name="NullInjectorError",v}return y}}const j1=new pn("Set Injector scope."),gp={},l7={};let B1;function Hx(){return void 0===B1&&(B1=new Gx),B1}function Yx(g,p=null,y=null,v){const _=Jx(g,p,y,v);return _._resolveInjectorDefTypes(),_}function Jx(g,p=null,y=null,v){return new u7(g,y,p||Hx(),v)}class u7{constructor(p,y,v,_=null){this.parent=v,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const E=[];y&&Wl(y,D=>this.processProvider(D,p,y)),Wl([p],D=>this.processInjectorType(D,[],E)),this.records.set(F1,vh(void 0,this));const w=this.records.get(j1);this.scope=null!=w?w.value:null,this.source=_||("object"==typeof p?null:br(p))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(p=>p.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(p,y=rp,v=hr.Default){this.assertNotDestroyed();const _=_M(this),E=Be(void 0);try{if(!(v&hr.SkipSelf)){let D=this.records.get(p);if(void 0===D){const O=function y7(g){return"function"==typeof g||"object"==typeof g&&g instanceof pn}(p)&&ar(p);D=O&&this.injectableDefInScope(O)?vh(U1(p),gp):null,this.records.set(p,D)}if(null!=D)return this.hydrate(p,D)}return(v&hr.Self?Hx():this.parent).get(p,y=v&hr.Optional&&y===rp?null:y)}catch(w){if("NullInjectorError"===w.name){if((w[km]=w[km]||[]).unshift(br(p)),_)throw w;return function $4(g,p,y,v){const _=g[km];throw p[vM]&&_.unshift(p[vM]),g.message=function K4(g,p,y,v=null){g=g&&"\n"===g.charAt(0)&&"\u0275"==g.charAt(1)?g.substr(2):g;let _=br(p);if(Array.isArray(p))_=p.map(br).join(" -> ");else if("object"==typeof p){let E=[];for(let w in p)if(p.hasOwnProperty(w)){let D=p[w];E.push(w+":"+("string"==typeof D?JSON.stringify(D):br(D)))}_=`{${E.join(", ")}}`}return`${y}${v?"("+v+")":""}[${_}]: ${g.replace(U4,"\n  ")}`}("\n"+g.message,_,y,v),g.ngTokenPath=_,g[km]=null,g}(w,p,"R3InjectorError",this.source)}throw w}finally{Be(E),_M(_)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(p=>this.get(p))}toString(){const p=[];return this.records.forEach((v,_)=>p.push(br(_))),`R3Injector[${p.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new zr(205,!1)}processInjectorType(p,y,v){if(!(p=xr(p)))return!1;let _=Et(p);const E=null==_&&p.ngModule||void 0,w=void 0===E?p:E,D=-1!==v.indexOf(w);if(void 0!==E&&(_=Et(E)),null==_)return!1;if(null!=_.imports&&!D){let W;v.push(w);try{Wl(_.imports,q=>{this.processInjectorType(q,y,v)&&(void 0===W&&(W=[]),W.push(q))})}finally{}if(void 0!==W)for(let q=0;q<W.length;q++){const{ngModule:_e,providers:be}=W[q];Wl(be,We=>this.processProvider(We,_e,be||Cn))}}this.injectorDefTypes.add(w);const O=Vl(w)||(()=>new w);this.records.set(w,vh(O,gp));const A=_.providers;if(null!=A&&!D){const W=p;Wl(A,q=>this.processProvider(q,W,A))}return void 0!==E&&void 0!==p.providers}processProvider(p,y,v){let _=_h(p=xr(p))?p:xr(p&&p.provide);const E=function d7(g,p,y){return Qx(g)?vh(void 0,g.useValue):vh(function Xx(g,p,y){let v;if(_h(g)){const _=xr(g);return Vl(_)||U1(_)}if(Qx(g))v=()=>xr(g.useValue);else if(function f7(g){return!(!g||!g.useFactory)}(g))v=()=>g.useFactory(...$_(g.deps||[]));else if(function h7(g){return!(!g||!g.useExisting)}(g))v=()=>_n(xr(g.useExisting));else{const _=xr(g&&(g.useClass||g.provide));if(!function m7(g){return!!g.deps}(g))return Vl(_)||U1(_);v=()=>new _(...$_(g.deps))}return v}(g),gp)}(p);if(_h(p)||!0!==p.multi)this.records.get(_);else{let w=this.records.get(_);w||(w=vh(void 0,gp,!0),w.factory=()=>$_(w.multi),this.records.set(_,w)),_=p,w.multi.push(p)}this.records.set(_,E)}hydrate(p,y){return y.value===gp&&(y.value=l7,y.value=y.factory()),"object"==typeof y.value&&y.value&&function g7(g){return null!==g&&"object"==typeof g&&"function"==typeof g.ngOnDestroy}(y.value)&&this.onDestroy.add(y.value),y.value}injectableDefInScope(p){if(!p.providedIn)return!1;const y=xr(p.providedIn);return"string"==typeof y?"any"===y||y===this.scope:this.injectorDefTypes.has(y)}}function U1(g){const p=ar(g),y=null!==p?p.factory:Vl(g);if(null!==y)return y;if(g instanceof pn)throw new zr(204,!1);if(g instanceof Function)return function c7(g){const p=g.length;if(p>0)throw function tp(g,p){const y=[];for(let v=0;v<g;v++)y.push(p);return y}(p,"?"),new zr(204,!1);const y=function pr(g){const p=g&&(g[jt]||g[mr]);if(p){const y=function or(g){if(g.hasOwnProperty("name"))return g.name;const p=(""+g).match(/^function\s*([^\s(]+)/);return null===p?"":p[1]}(g);return console.warn(`DEPRECATED: DI is instantiating a token "${y}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${y}" class.`),p}return null}(g);return null!==y?()=>y.factory(g):()=>new g}(g);throw new zr(204,!1)}function vh(g,p,y=!1){return{factory:g,value:p,multi:y?[]:void 0}}function Qx(g){return null!==g&&"object"==typeof g&&k4 in g}function _h(g){return"function"==typeof g}let Is=(()=>{class g{static create(y,v){var _;if(Array.isArray(y))return Yx({name:""},v,y,"");{const E=null!==(_=y.name)&&void 0!==_?_:"";return Yx({name:E},y.parent,y.providers,E)}}}return g.THROW_IF_NOT_FOUND=rp,g.NULL=new Gx,g.\u0275prov=xt({token:g,providedIn:"any",factory:()=>_n(F1)}),g.__NG_ELEMENT_ID__=-1,g})();function x7(g,p){Tm(e1(g)[1],Yo())}let ng=null;function Eh(){if(!ng){const g=Fr.Symbol;if(g&&g.iterator)ng=g.iterator;else{const p=Object.getOwnPropertyNames(Map.prototype);for(let y=0;y<p.length;++y){const v=p[y];"entries"!==v&&"size"!==v&&Map.prototype[v]===Map.prototype.entries&&(ng=v)}}}return ng}function Ts(g,p,y){return!Object.is(g[p],y)&&(g[p]=y,!0)}function Gl(g,p,y,v){const _=Ir();return Ts(_,rh(),p)&&(ci(),Kl(function go(){const g=An.lFrame;return Ar(g.tView,g.selectedIndex)}(),_,g,p,y,v)),Gl}function Lr(g,p=hr.Default){const y=Ir();return null===y?_n(g,p):lM(Yo(),y,xr(g),p)}function H1(){throw new Error("invalid")}function Y1(g,p,y,v,_){const w=_?"class":"style";!function zx(g,p,y,v,_){for(let E=0;E<y.length;){const w=y[E++],D=y[E++],O=p[w],A=g.data[w];null!==A.setInput?A.setInput(O,_,v,D):O[D]=_}}(g,y,p.inputs[w],w,v)}function Vo(g,p,y,v){const _=Ir(),E=ci(),w=20+g,D=_[11],O=_[w]=l1(D,p,function p4(){return An.lFrame.currentNamespace}()),A=E.firstCreatePass?function o9(g,p,y,v,_,E,w){const D=p.consts,A=mh(p,g,2,_,vn(D,E));return function I1(g,p,y,v){let _=!1;if(Kf()){const E=function K5(g,p,y){const v=g.directiveRegistry;let _=null;if(v)for(let E=0;E<v.length;E++){const w=v[E];hx(y,w.selectors,!1)&&(_||(_=[]),jm(Jf(y,p),g,w.type),Ma(w)?(jx(g,y),_.unshift(w)):_.push(w))}return _}(g,p,y),w=null===v?null:{"":-1};if(null!==E){_=!0,Bx(y,g.data.length,E.length);for(let W=0;W<E.length;W++){const q=E[W];q.providersResolver&&q.providersResolver(q)}let D=!1,O=!1,A=gh(g,p,E.length,null);for(let W=0;W<E.length;W++){const q=E[W];y.mergedAttrs=Lm(y.mergedAttrs,q.hostAttrs),Ux(g,y,p,A,q),G5(A,q,w),null!==q.contentQueries&&(y.flags|=8),(null!==q.hostBindings||null!==q.hostAttrs||0!==q.hostVars)&&(y.flags|=128);const _e=q.type.prototype;!D&&(_e.ngOnChanges||_e.ngOnInit||_e.ngDoCheck)&&((g.preOrderHooks||(g.preOrderHooks=[])).push(y.index),D=!0),!O&&(_e.ngOnChanges||_e.ngDoCheck)&&((g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(y.index),O=!0),A++}!function j5(g,p){const v=p.directiveEnd,_=g.data,E=p.attrs,w=[];let D=null,O=null;for(let A=p.directiveStart;A<v;A++){const W=_[A],q=W.inputs,_e=null===E||dx(p)?null:J5(q,E);w.push(_e),D=Rx(q,A,D),O=Rx(W.outputs,A,O)}null!==D&&(D.hasOwnProperty("class")&&(p.flags|=16),D.hasOwnProperty("style")&&(p.flags|=32)),p.initialInputs=w,p.inputs=D,p.outputs=O}(g,y)}w&&function z5(g,p,y){if(p){const v=g.localNames=[];for(let _=0;_<p.length;_+=2){const E=y[p[_+1]];if(null==E)throw new zr(-301,!1);v.push(p[_],E)}}}(y,v,w)}return y.mergedAttrs=Lm(y.mergedAttrs,y.attrs),_}(p,y,A,vn(D,w)),null!==A.attrs&&rg(A,A.attrs,!1),null!==A.mergedAttrs&&rg(A,A.mergedAttrs,!0),null!==p.queries&&p.queries.elementStart(p,A),A}(w,E,_,0,p,y,v):E.data[w];kl(A,!0);const W=A.mergedAttrs;null!==W&&Rm(D,O,W);const q=A.classes;null!==q&&p1(D,O,q);const _e=A.styles;return null!==_e&&lx(D,O,_e),64!=(64&A.flags)&&Ym(E,_,O,A),0===function cd(){return An.lFrame.elementDepthCount}()&&Os(O,_),function M_(){An.lFrame.elementDepthCount++}(),Jd(A)&&(function S1(g,p,y){!Kf()||(function Z5(g,p,y,v){const _=y.directiveStart,E=y.directiveEnd;g.firstCreatePass||Jf(y,p),Os(v,p);const w=y.initialInputs;for(let D=_;D<E;D++){const O=g.data[D],A=Ma(O);A&&H5(p,y,O);const W=Xf(p,g,D,y);Os(W,p),null!==w&&Y5(0,D-_,W,O,0,w),A&&(Qr(y.index,p)[8]=W)}}(g,p,y,cr(y,p)),128==(128&y.flags)&&function $5(g,p,y){const v=y.directiveStart,_=y.directiveEnd,w=y.index,D=function l4(){return An.lFrame.currentDirectiveIndex}();try{sc(w);for(let O=v;O<_;O++){const A=g.data[O],W=p[O];I_(O),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Fx(A,W)}}finally{sc(-1),I_(D)}}(g,p,y))}(E,_,A),function Ox(g,p,y){if(Wf(p)){const _=p.directiveEnd;for(let E=p.directiveStart;E<_;E++){const w=g.data[E];w.contentQueries&&w.contentQueries(1,y[E],E)}}}(E,A,_)),null!==v&&function O1(g,p,y=cr){const v=p.localNames;if(null!==v){let _=p.index+1;for(let E=0;E<v.length;E+=2){const w=v[E+1],D=-1===w?y(p,g):g[w];g[_++]=D}}}(_,A),Vo}function ko(){let g=Yo();S_()?function O_(){An.lFrame.isParent=!1}():(g=g.parent,kl(g,!1));const p=g;!function x_(){An.lFrame.elementDepthCount--}();const y=ci();return y.firstCreatePass&&(Tm(y,g),Wf(g)&&y.queries.elementEnd(g)),null!=p.classesWithoutHost&&function _4(g){return 0!=(16&g.flags)}(p)&&Y1(y,p,Ir(),p.classesWithoutHost,!0),null!=p.stylesWithoutHost&&function E4(g){return 0!=(32&g.flags)}(p)&&Y1(y,p,Ir(),p.stylesWithoutHost,!1),ko}function yl(g,p,y,v){return Vo(g,p,y,v),ko(),yl}function _p(g){return!!g&&"function"==typeof g.then}const Q1=function PD(g){return!!g&&"function"==typeof g.subscribe};function zs(g,p,y,v){const _=Ir(),E=ci(),w=Yo();return function LD(g,p,y,v,_,E,w,D){const O=Jd(v),W=g.firstCreatePass&&Zx(g),q=p[8],_e=Wx(p);let be=!0;if(3&v.type||D){const dt=cr(v,p),gt=D?D(dt):dt,lt=_e.length,Tt=D?Rt=>D(et(Rt[v.index])):v.index;if(Fe(y)){let Rt=null;if(!D&&O&&(Rt=function l9(g,p,y,v){const _=g.cleanup;if(null!=_)for(let E=0;E<_.length-1;E+=2){const w=_[E];if(w===y&&_[E+1]===v){const D=p[7],O=_[E+2];return D.length>O?D[O]:null}"string"==typeof w&&(E+=2)}return null}(g,p,_,v.index)),null!==Rt)(Rt.__ngLastListenerFn__||Rt).__ngNextListenerFn__=E,Rt.__ngLastListenerFn__=E,be=!1;else{E=q1(v,p,q,E,!1);const Xt=y.listen(gt,_,E);_e.push(E,Xt),W&&W.push(_,Tt,lt,lt+1)}}else E=q1(v,p,q,E,!0),gt.addEventListener(_,E,w),_e.push(E),W&&W.push(_,Tt,lt,w)}else E=q1(v,p,q,E,!1);const We=v.outputs;let qe;if(be&&null!==We&&(qe=We[_])){const dt=qe.length;if(dt)for(let gt=0;gt<dt;gt+=2){const ur=p[qe[gt]][qe[gt+1]].subscribe(E),_r=_e.length;_e.push(E,ur),W&&W.push(_,v.index,_r,-(_r+1))}}}(E,_,_[11],w,g,p,!!y,v),zs}function ND(g,p,y,v){try{return!1!==y(v)}catch(_){return Kx(g,_),!1}}function q1(g,p,y,v,_){return function E(w){if(w===Function)return v;const D=2&g.flags?Qr(g.index,p):p;0==(32&p[2])&&P1(D);let O=ND(p,0,v,w),A=E.__ngNextListenerFn__;for(;A;)O=ND(p,0,A,w)&&O,A=A.__ngNextListenerFn__;return _&&!1===O&&(w.preventDefault(),w.returnValue=!1),O}}function KD(g,p,y,v,_){const E=g[y+1],w=null===p;let D=v?ml(E):Du(E),O=!1;for(;0!==D&&(!1===O||w);){const W=g[D+1];m9(g[D],p)&&(O=!0,g[D+1]=v?y1(W):m1(W)),D=v?ml(W):Du(W)}O&&(g[y+1]=v?m1(E):y1(E))}function m9(g,p){return null===g||null==p||(Array.isArray(g)?g[1]:g)===p||!(!Array.isArray(g)||"string"!=typeof p)&&ch(g,p)>=0}function tE(g,p,y){return function vl(g,p,y,v){const _=Ir(),E=ci(),w=function xu(g){const p=An.lFrame,y=p.bindingIndex;return p.bindingIndex=p.bindingIndex+g,y}(2);E.firstUpdatePass&&function qD(g,p,y,v){const _=g.data;if(null===_[y+1]){const E=_[$s()],w=function QD(g,p){return p>=g.expandoStartIndex}(g,y);(function nS(g,p){return 0!=(g.flags&(p?16:32))})(E,v)&&null===p&&!w&&(p=!1),p=function M9(g,p,y,v){const _=function T_(g){const p=An.lFrame.currentDirectiveIndex;return-1===p?null:g[p]}(g);let E=v?p.residualClasses:p.residualStyles;if(null===_)0===(v?p.classBindings:p.styleBindings)&&(y=Ep(y=rE(null,g,p,y,v),p.attrs,v),E=null);else{const w=p.directiveStylingLast;if(-1===w||g[w]!==_)if(y=rE(_,g,p,y,v),null===E){let O=function x9(g,p,y){const v=y?p.classBindings:p.styleBindings;if(0!==Du(v))return g[ml(v)]}(g,p,v);void 0!==O&&Array.isArray(O)&&(O=rE(null,g,p,O[1],v),O=Ep(O,p.attrs,v),function D9(g,p,y,v){g[ml(y?p.classBindings:p.styleBindings)]=v}(g,p,v,O))}else E=function S9(g,p,y){let v;const _=p.directiveEnd;for(let E=1+p.directiveStylingLast;E<_;E++)v=Ep(v,g[E].hostAttrs,y);return Ep(v,p.attrs,y)}(g,p,v)}return void 0!==E&&(v?p.residualClasses=E:p.residualStyles=E),y}(_,E,p,v),function f9(g,p,y,v,_,E){let w=E?p.classBindings:p.styleBindings,D=ml(w),O=Du(w);g[v]=y;let W,A=!1;if(Array.isArray(y)){const q=y;W=q[1],(null===W||ch(q,W)>0)&&(A=!0)}else W=y;if(_)if(0!==O){const _e=ml(g[D+1]);g[v+1]=Xm(_e,D),0!==_e&&(g[_e+1]=g1(g[_e+1],v)),g[D+1]=function b5(g,p){return 131071&g|p<<17}(g[D+1],v)}else g[v+1]=Xm(D,0),0!==D&&(g[D+1]=g1(g[D+1],v)),D=v;else g[v+1]=Xm(O,0),0===D?D=v:g[O+1]=g1(g[O+1],v),O=v;A&&(g[v+1]=m1(g[v+1])),KD(g,W,v,!0),KD(g,W,v,!1),function p9(g,p,y,v,_){const E=_?g.residualClasses:g.residualStyles;null!=E&&"string"==typeof p&&ch(E,p)>=0&&(y[v+1]=y1(y[v+1]))}(p,W,g,v,E),w=Xm(D,O),E?p.classBindings=w:p.styleBindings=w}(_,E,p,y,w,v)}}(E,g,w,v),p!==Wn&&Ts(_,w,p)&&function tS(g,p,y,v,_,E,w,D){if(!(3&p.type))return;const O=g.data,A=O[D+1];ag(function vx(g){return 1==(1&g)}(A)?rS(O,p,y,_,Du(A),w):void 0)||(ag(E)||function yx(g){return 2==(2&g)}(A)&&(E=rS(O,null,y,_,D,w)),function u5(g,p,y,v,_){const E=Fe(g);if(p)_?E?g.addClass(y,v):y.classList.add(v):E?g.removeClass(y,v):y.classList.remove(v);else{let w=-1===v.indexOf("-")?void 0:Sa.DashCase;if(null==_)E?g.removeStyle(y,v,w):y.style.removeProperty(v);else{const D="string"==typeof _&&_.endsWith("!important");D&&(_=_.slice(0,-10),w|=Sa.Important),E?g.setStyle(y,v,_,w):y.style.setProperty(v,_,D?"important":"")}}}(v,w,Gt($s(),y),_,E))}(E,E.data[$s()],_,_[11],g,_[w+1]=function T9(g,p){return null==g||("string"==typeof p?g+=p:"object"==typeof g&&(g=br(uc(g)))),g}(p,y),v,w)}(g,p,y,!1),tE}function rE(g,p,y,v,_){let E=null;const w=y.directiveEnd;let D=y.directiveStylingLast;for(-1===D?D=y.directiveStart:D++;D<w&&(E=p[D],v=Ep(v,E.hostAttrs,_),E!==g);)D++;return null!==g&&(y.directiveStylingLast=D),v}function Ep(g,p,y){const v=y?1:2;let _=-1;if(null!==p)for(let E=0;E<p.length;E++){const w=p[E];"number"==typeof w?_=w:_===v&&(Array.isArray(g)||(g=void 0===g?[]:["",g]),Da(g,w,!!y||p[++E]))}return void 0===g?null:g}function rS(g,p,y,v,_,E){const w=null===p;let D;for(;_>0;){const O=g[_],A=Array.isArray(O),W=A?O[1]:O,q=null===W;let _e=y[_+1];_e===Wn&&(_e=q?Cn:void 0);let be=q?k_(_e,v):W===v?_e:void 0;if(A&&!ag(be)&&(be=k_(O,v)),ag(be)&&(D=be,w))return D;const We=g[_+1];_=w?ml(We):Du(We)}if(null!==p){let O=E?p.residualClasses:p.residualStyles;null!=O&&(D=k_(O,v))}return D}function ag(g){return void 0!==g}function Ka(g,p=""){const y=Ir(),v=ci(),_=g+20,E=v.firstCreatePass?mh(v,_,1,p,null):v.data[_],w=y[_]=function a1(g,p){return Fe(g)?g.createText(p):g.createTextNode(p)}(y[11],p);Ym(v,y,w,E),kl(E,!1)}function lg(g,p,y){const v=Ir(),_=function Ch(g,p,y,v){return Ts(g,rh(),y)?p+Or(y)+v:Wn}(v,g,p,y);return _!==Wn&&Su(v,$s(),_),lg}const ug="en-US";let DS=ug;class XS{}class QN{resolveComponentFactory(p){throw function XN(g){const p=Error(`No component factory found for ${br(g)}. Did you add it to @NgModule.entryComponents?`);return p.ngComponent=g,p}(p)}}let xp=(()=>{class g{}return g.NULL=new QN,g})();function qN(){return Lh(Yo(),Ir())}function Lh(g,p){return new Ia(cr(g,p))}let Ia=(()=>{class g{constructor(y){this.nativeElement=y}}return g.__NG_ELEMENT_ID__=qN,g})();function eF(g){return g instanceof Ia?g.nativeElement:g}class qS{}let nF=(()=>{class g{}return g.\u0275prov=xt({token:g,providedIn:"root",factory:()=>null}),g})();class Dp{constructor(p){this.full=p,this.major=p.split(".")[0],this.minor=p.split(".")[1],this.patch=p.split(".").slice(2).join(".")}}const iF=new Dp("13.2.7"),uE={};function pg(g,p,y,v,_=!1){for(;null!==y;){const E=p[y.index];if(null!==E&&v.push(et(E)),wa(E))for(let D=10;D<E.length;D++){const O=E[D],A=O[1].firstChild;null!==A&&pg(O[1],O,A,v)}const w=y.type;if(8&w)pg(g,p,y.child,v);else if(32&w){const D=i1(y,p);let O;for(;O=D();)v.push(O)}else if(16&w){const D=ox(p,y);if(Array.isArray(D))v.push(...D);else{const O=hp(p[16]);pg(O[1],O,D,v,!0)}}y=_?y.projectionNext:y.next}return v}class Sp{constructor(p,y){this._lView=p,this._cdRefInjectingView=y,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const p=this._lView,y=p[1];return pg(y,p,y.firstChild,[])}get context(){return this._lView[8]}set context(p){this._lView[8]=p}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const p=this._lView[3];if(wa(p)){const y=p[8],v=y?y.indexOf(this):-1;v>-1&&(u1(p,v),Um(y,v))}this._attachedToViewContainer=!1}JM(this._lView[1],this._lView)}onDestroy(p){Px(this._lView[1],this._lView,null,p)}markForCheck(){P1(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){L1(this._lView[1],this._lView,this.context)}checkNoChanges(){!function n7(g,p,y){xm(!0);try{L1(g,p,y)}finally{xm(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new zr(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qL(g,p){fp(g,p,p[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(p){if(this._attachedToViewContainer)throw new zr(902,"");this._appRef=p}}class oF extends Sp{constructor(p){super(p),this._view=p}detectChanges(){kx(this._view)}checkNoChanges(){!function i7(g){xm(!0);try{kx(g)}finally{xm(!1)}}(this._view)}get context(){return null}}class eO extends xp{constructor(p){super(),this.ngModule=p}resolveComponentFactory(p){const y=as(p);return new cE(y,this.ngModule)}}function tO(g){const p=[];for(let y in g)g.hasOwnProperty(y)&&p.push({propName:g[y],templateName:y});return p}class cE extends XS{constructor(p,y){super(),this.componentDef=p,this.ngModule=y,this.componentType=p.type,this.selector=function _5(g){return g.map(v5).join(",")}(p.selectors),this.ngContentSelectors=p.ngContentSelectors?p.ngContentSelectors:[],this.isBoundToModule=!!y}get inputs(){return tO(this.componentDef.inputs)}get outputs(){return tO(this.componentDef.outputs)}create(p,y,v,_){const E=(_=_||this.ngModule)?function aF(g,p){return{get:(y,v,_)=>{const E=g.get(y,uE,_);return E!==uE||v===uE?E:p.get(y,v,_)}}}(p,_.injector):p,w=E.get(qS,Se),D=E.get(nF,null),O=w.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",W=v?function Ax(g,p,y){if(Fe(g))return g.selectRootElement(p,y===kt.ShadowDom);let v="string"==typeof p?g.querySelector(p):p;return v.textContent="",v}(O,v,this.componentDef.encapsulation):l1(w.createRenderer(null,this.componentDef),A,function sF(g){const p=g.toLowerCase();return"svg"===p?"svg":"math"===p?"math":null}(A)),q=this.componentDef.onPush?576:528,_e=function uD(g,p){return{components:[],scheduler:g||KL,clean:o7,playerHandler:p||null,flags:0}}(),be=eg(0,null,null,1,0,null,null,null,null,null),We=pp(null,be,_e,q,null,null,w,O,D,E);let qe,dt;Dm(We);try{const gt=function aD(g,p,y,v,_,E){const w=y[1];y[20]=g;const O=mh(w,20,2,"#host",null),A=O.mergedAttrs=p.hostAttrs;null!==A&&(rg(O,A,!0),null!==g&&(Rm(_,g,A),null!==O.classes&&p1(_,g,O.classes),null!==O.styles&&lx(_,g,O.styles)));const W=v.createRenderer(g,p),q=pp(y,Ix(p),null,p.onPush?64:16,y[20],O,v,W,E||null,null);return w.firstCreatePass&&(jm(Jf(O,y),w,p.type),jx(w,O),Bx(O,y.length,1)),tg(y,q),y[20]=q}(W,this.componentDef,We,w,O);if(W)if(v)Rm(O,W,["ng-version",iF.full]);else{const{attrs:lt,classes:Tt}=function E5(g){const p=[],y=[];let v=1,_=2;for(;v<g.length;){let E=g[v];if("string"==typeof E)2===_?""!==E&&p.push(E,g[++v]):8===_&&y.push(E);else{if(!pl(_))break;_=E}v++}return{attrs:p,classes:y}}(this.componentDef.selectors[0]);lt&&Rm(O,W,lt),Tt&&Tt.length>0&&p1(O,W,Tt.join(" "))}if(dt=Ar(be,20),void 0!==y){const lt=dt.projection=[];for(let Tt=0;Tt<this.ngContentSelectors.length;Tt++){const Rt=y[Tt];lt.push(null!=Rt?Array.from(Rt):null)}}qe=function lD(g,p,y,v,_){const E=y[1],w=function k5(g,p,y){const v=Yo();g.firstCreatePass&&(y.providersResolver&&y.providersResolver(y),Ux(g,v,p,gh(g,p,1,null),y));const _=Xf(p,g,v.directiveStart,v);Os(_,p);const E=cr(v,p);return E&&Os(E,p),_}(E,y,p);if(v.components.push(w),g[8]=w,_&&_.forEach(O=>O(w,p)),p.contentQueries){const O=Yo();p.contentQueries(1,w,O.directiveStart)}const D=Yo();return!E.firstCreatePass||null===p.hostBindings&&null===p.hostAttrs||(sc(D.index),Nx(y[1],D,0,D.directiveStart,D.directiveEnd,p),Fx(p,w)),w}(gt,this.componentDef,We,_e,[x7]),mp(be,We,null)}finally{Sm()}return new uF(this.componentType,qe,Lh(dt,We),We,dt)}}class uF extends class JN{}{constructor(p,y,v,_,E){super(),this.location=v,this._rootLView=_,this._tNode=E,this.instance=y,this.hostView=this.changeDetectorRef=new oF(_),this.componentType=p}get injector(){return new oh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(p){this.hostView.onDestroy(p)}}class Iu{}class rO{}const Nh=new Map;class oO extends Iu{constructor(p,y){super(),this._parent=y,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eO(this);const v=Fo(p);this._bootstrapComponents=$l(v.bootstrap),this._r3Injector=Jx(p,y,[{provide:Iu,useValue:this},{provide:xp,useValue:this.componentFactoryResolver}],br(p)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(p)}get(p,y=Is.THROW_IF_NOT_FOUND,v=hr.Default){return p===Is||p===Iu||p===F1?this:this._r3Injector.get(p,y,v)}destroy(){const p=this._r3Injector;!p.destroyed&&p.destroy(),this.destroyCbs.forEach(y=>y()),this.destroyCbs=null}onDestroy(p){this.destroyCbs.push(p)}}class dE extends rO{constructor(p){super(),this.moduleType=p,null!==Fo(p)&&function dF(g){const p=new Set;!function y(v){const _=Fo(v,!0),E=_.id;null!==E&&(function nO(g,p,y){if(p&&p!==y)throw new Error(`Duplicate module registered for ${g} - ${br(p)} vs ${br(p.name)}`)}(E,Nh.get(E),v),Nh.set(E,v));const w=$l(_.imports);for(const D of w)p.has(D)||(p.add(D),y(D))}(g)}(p)}create(p){return new oO(this.moduleType,p)}}function hE(g){return p=>{setTimeout(g,void 0,p)}}const gi=class IF extends xe{constructor(p=!1){super(),this.__isAsync=p}emit(p){super.next(p)}subscribe(p,y,v){var _,E,w;let D=p,O=y||(()=>null),A=v;if(p&&"object"==typeof p){const q=p;D=null===(_=q.next)||void 0===_?void 0:_.bind(q),O=null===(E=q.error)||void 0===E?void 0:E.bind(q),A=null===(w=q.complete)||void 0===w?void 0:w.bind(q)}this.__isAsync&&(O=hE(O),D&&(D=hE(D)),A&&(A=hE(A)));const W=super.subscribe({next:D,error:O,complete:A});return p instanceof te&&p.add(W),W}};function TF(){return this._results[Eh()]()}class fE{constructor(p=!1){this._emitDistinctChangesOnly=p,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const y=Eh(),v=fE.prototype;v[y]||(v[y]=TF)}get changes(){return this._changes||(this._changes=new gi)}get(p){return this._results[p]}map(p){return this._results.map(p)}filter(p){return this._results.filter(p)}find(p){return this._results.find(p)}reduce(p,y){return this._results.reduce(p,y)}forEach(p){this._results.forEach(p)}some(p){return this._results.some(p)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(p,y){const v=this;v.dirty=!1;const _=Za(p);(this._changesDetected=!function T4(g,p,y){if(g.length!==p.length)return!1;for(let v=0;v<g.length;v++){let _=g[v],E=p[v];if(y&&(_=y(_),E=y(E)),E!==_)return!1}return!0}(v._results,_,y))&&(v._results=_,v.length=_.length,v.last=_[this.length-1],v.first=_[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Tu=(()=>{class g{}return g.__NG_ELEMENT_ID__=RF,g})();const AF=Tu,PF=class extends AF{constructor(p,y,v){super(),this._declarationLView=p,this._declarationTContainer=y,this.elementRef=v}createEmbeddedView(p){const y=this._declarationTContainer.tViews,v=pp(this._declarationLView,y,p,16,null,y.declTNode,null,null,null,null);v[17]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[19];return null!==E&&(v[19]=E.createEmbeddedView(y)),mp(y,v,p),new Sp(v)}};function RF(){return mg(Yo(),Ir())}function mg(g,p){return 4&g.type?new PF(p,g,Lh(g,p)):null}let El=(()=>{class g{}return g.__NG_ELEMENT_ID__=LF,g})();function LF(){return fO(Yo(),Ir())}const NF=El,dO=class extends NF{constructor(p,y,v){super(),this._lContainer=p,this._hostTNode=y,this._hostLView=v}get element(){return Lh(this._hostTNode,this._hostLView)}get injector(){return new oh(this._hostTNode,this._hostLView)}get parentInjector(){const p=Fm(this._hostTNode,this._hostLView);if(nM(p)){const y=ih(p,this._hostLView),v=nh(p);return new oh(y[1].data[v+8],y)}return new oh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(p){const y=hO(this._lContainer);return null!==y&&y[p]||null}get length(){return this._lContainer.length-10}createEmbeddedView(p,y,v){const _=p.createEmbeddedView(y||{});return this.insert(_,v),_}createComponent(p,y,v,_,E){const w=p&&!function ep(g){return"function"==typeof g}(p);let D;if(w)D=y;else{const q=y||{};D=q.index,v=q.injector,_=q.projectableNodes,E=q.ngModuleRef}const O=w?p:new cE(as(p)),A=v||this.parentInjector;if(!E&&null==O.ngModule){const _e=(w?A:this.parentInjector).get(Iu,null);_e&&(E=_e)}const W=O.create(A,_,void 0,E);return this.insert(W.hostView,D),W}insert(p,y){const v=p._lView,_=v[1];if(function Xn(g){return wa(g[3])}(v)){const W=this.indexOf(p);if(-1!==W)this.detach(W);else{const q=v[3],_e=new dO(q,q[6],q[3]);_e.detach(_e.indexOf(p))}}const E=this._adjustIndex(y),w=this._lContainer;!function t5(g,p,y,v){const _=10+v,E=y.length;v>0&&(y[_-1][4]=p),v<E-10?(p[4]=y[_],fM(y,10+v,p)):(y.push(p),p[4]=null),p[3]=y;const w=p[17];null!==w&&y!==w&&function r5(g,p){const y=g[9];p[16]!==p[3][3][16]&&(g[2]=!0),null===y?g[9]=[p]:y.push(p)}(w,p);const D=p[19];null!==D&&D.insertView(g),p[2]|=128}(_,v,w,E);const D=h1(E,w),O=v[11],A=Hm(O,w[7]);return null!==A&&function QL(g,p,y,v,_,E){v[0]=_,v[6]=p,fp(g,v,y,1,_,E)}(_,w[6],O,v,A,D),p.attachToViewContainerRef(),fM(pE(w),E,p),p}move(p,y){return this.insert(p,y)}indexOf(p){const y=hO(this._lContainer);return null!==y?y.indexOf(p):-1}remove(p){const y=this._adjustIndex(p,-1),v=u1(this._lContainer,y);v&&(Um(pE(this._lContainer),y),JM(v[1],v))}detach(p){const y=this._adjustIndex(p,-1),v=u1(this._lContainer,y);return v&&null!=Um(pE(this._lContainer),y)?new Sp(v):null}_adjustIndex(p,y=0){return null==p?this.length+y:p}};function hO(g){return g[8]}function pE(g){return g[8]||(g[8]=[])}function fO(g,p){let y;const v=p[g.index];if(wa(v))y=v;else{let _;if(8&g.type)_=et(v);else{const E=p[11];_=E.createComment("");const w=cr(g,p);dd(E,Hm(E,w),_,function s5(g,p){return Fe(g)?g.nextSibling(p):p.nextSibling}(E,w),!1)}p[g.index]=y=function Vx(g,p,y,v){return new Array(g,!0,!1,p,null,0,v,y,null,null)}(v,p,_,g),tg(p,y)}return new dO(y,g,p)}class mE{constructor(p){this.queryList=p,this.matches=null}clone(){return new mE(this.queryList)}setDirty(){this.queryList.setDirty()}}class gE{constructor(p=[]){this.queries=p}createEmbeddedView(p){const y=p.queries;if(null!==y){const v=null!==p.contentQueries?p.contentQueries[0]:y.length,_=[];for(let E=0;E<v;E++){const w=y.getByIndex(E);_.push(this.queries[w.indexInDeclarationView].clone())}return new gE(_)}return null}insertView(p){this.dirtyQueriesWithMatches(p)}detachView(p){this.dirtyQueriesWithMatches(p)}dirtyQueriesWithMatches(p){for(let y=0;y<this.queries.length;y++)null!==vO(p,y).matches&&this.queries[y].setDirty()}}class pO{constructor(p,y,v=null){this.predicate=p,this.flags=y,this.read=v}}class yE{constructor(p=[]){this.queries=p}elementStart(p,y){for(let v=0;v<this.queries.length;v++)this.queries[v].elementStart(p,y)}elementEnd(p){for(let y=0;y<this.queries.length;y++)this.queries[y].elementEnd(p)}embeddedTView(p){let y=null;for(let v=0;v<this.length;v++){const _=null!==y?y.length:0,E=this.getByIndex(v).embeddedTView(p,_);E&&(E.indexInDeclarationView=v,null!==y?y.push(E):y=[E])}return null!==y?new yE(y):null}template(p,y){for(let v=0;v<this.queries.length;v++)this.queries[v].template(p,y)}getByIndex(p){return this.queries[p]}get length(){return this.queries.length}track(p){this.queries.push(p)}}class vE{constructor(p,y=-1){this.metadata=p,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=y}elementStart(p,y){this.isApplyingToNode(y)&&this.matchTNode(p,y)}elementEnd(p){this._declarationNodeIndex===p.index&&(this._appliesToNextNode=!1)}template(p,y){this.elementStart(p,y)}embeddedTView(p,y){return this.isApplyingToNode(p)?(this.crossesNgTemplate=!0,this.addMatch(-p.index,y),new vE(this.metadata)):null}isApplyingToNode(p){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const y=this._declarationNodeIndex;let v=p.parent;for(;null!==v&&8&v.type&&v.index!==y;)v=v.parent;return y===(null!==v?v.index:-1)}return this._appliesToNextNode}matchTNode(p,y){const v=this.metadata.predicate;if(Array.isArray(v))for(let _=0;_<v.length;_++){const E=v[_];this.matchTNodeWithReadOption(p,y,BF(y,E)),this.matchTNodeWithReadOption(p,y,Bm(y,p,E,!1,!1))}else v===Tu?4&y.type&&this.matchTNodeWithReadOption(p,y,-1):this.matchTNodeWithReadOption(p,y,Bm(y,p,v,!1,!1))}matchTNodeWithReadOption(p,y,v){if(null!==v){const _=this.metadata.read;if(null!==_)if(_===Ia||_===El||_===Tu&&4&y.type)this.addMatch(y.index,-2);else{const E=Bm(y,p,_,!1,!1);null!==E&&this.addMatch(y.index,E)}else this.addMatch(y.index,v)}}addMatch(p,y){null===this.matches?this.matches=[p,y]:this.matches.push(p,y)}}function BF(g,p){const y=g.localNames;if(null!==y)for(let v=0;v<y.length;v+=2)if(y[v]===p)return y[v+1];return null}function VF(g,p,y,v){return-1===y?function UF(g,p){return 11&g.type?Lh(g,p):4&g.type?mg(g,p):null}(p,g):-2===y?function kF(g,p,y){return y===Ia?Lh(p,g):y===Tu?mg(p,g):y===El?fO(p,g):void 0}(g,p,v):Xf(g,g[1],y,p)}function mO(g,p,y,v){const _=p[19].queries[v];if(null===_.matches){const E=g.data,w=y.matches,D=[];for(let O=0;O<w.length;O+=2){const A=w[O];D.push(A<0?null:VF(p,E[A],w[O+1],y.metadata.read))}_.matches=D}return _.matches}function _E(g,p,y,v){const _=g.queries.getByIndex(y),E=_.matches;if(null!==E){const w=mO(g,p,_,y);for(let D=0;D<E.length;D+=2){const O=E[D];if(O>0)v.push(w[D/2]);else{const A=E[D+1],W=p[-O];for(let q=10;q<W.length;q++){const _e=W[q];_e[17]===_e[3]&&_E(_e[1],_e,A,v)}if(null!==W[9]){const q=W[9];for(let _e=0;_e<q.length;_e++){const be=q[_e];_E(be[1],be,A,v)}}}}}return v}function Tp(g){const p=Ir(),y=ci(),v=Hw();A_(v+1);const _=vO(y,v);if(g.dirty&&Dn(p)===(2==(2&_.metadata.flags))){if(null===_.matches)g.reset([]);else{const E=_.crossesNgTemplate?_E(y,p,v,[]):mO(y,p,_,v);g.reset(E,eF),g.notifyOnChanges()}return!0}return!1}function EE(g,p,y){const v=ci();v.firstCreatePass&&(function yO(g,p,y){null===g.queries&&(g.queries=new yE),g.queries.track(new vE(p,y))}(v,new pO(g,p,y),-1),2==(2&p)&&(v.staticViewQueries=!0)),function gO(g,p,y){const v=new fE(4==(4&y));Px(g,p,v,v.destroy),null===p[19]&&(p[19]=new gE),p[19].queries.push(new mE(v))}(v,Ir(),p)}function Ap(){return function WF(g,p){return g[19].queries[p].queryList}(Ir(),Hw())}function vO(g,p){return g.queries.getByIndex(p)}function vg(...g){}const _g=new pn("Application Initializer");let SE=(()=>{class g{constructor(y){this.appInits=y,this.resolve=vg,this.reject=vg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((v,_)=>{this.resolve=v,this.reject=_})}runInitializers(){if(this.initialized)return;const y=[],v=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let _=0;_<this.appInits.length;_++){const E=this.appInits[_]();if(_p(E))y.push(E);else if(Q1(E)){const w=new Promise((D,O)=>{E.subscribe({complete:D,error:O})});y.push(w)}}Promise.all(y).then(()=>{v()}).catch(_=>{this.reject(_)}),0===y.length&&v(),this.initialized=!0}}return g.\u0275fac=function(y){return new(y||g)(_n(_g,8))},g.\u0275prov=xt({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const Rp=new pn("AppId",{providedIn:"root",factory:function NO(){return`${OE()}${OE()}${OE()}`}});function OE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const FO=new pn("Platform Initializer"),Lp=new pn("Platform ID"),jO=new pn("appBootstrapListener");let BO=(()=>{class g{log(y){console.log(y)}warn(y){console.warn(y)}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();const hc=new pn("LocaleId",{providedIn:"root",factory:()=>oo(hc,hr.Optional|hr.SkipSelf)||function aj(){return"undefined"!=typeof $localize&&$localize.locale||ug}()});class uj{constructor(p,y){this.ngModuleFactory=p,this.componentFactories=y}}let UO=(()=>{class g{compileModuleSync(y){return new dE(y)}compileModuleAsync(y){return Promise.resolve(this.compileModuleSync(y))}compileModuleAndAllComponentsSync(y){const v=this.compileModuleSync(y),E=$l(Fo(y).declarations).reduce((w,D)=>{const O=as(D);return O&&w.push(new cE(O)),w},[]);return new uj(v,E)}compileModuleAndAllComponentsAsync(y){return Promise.resolve(this.compileModuleAndAllComponentsSync(y))}clearCache(){}clearCacheFor(y){}getModuleId(y){}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=xt({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const dj=(()=>Promise.resolve(0))();function IE(g){"undefined"==typeof Zone?dj.then(()=>{g&&g.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",g)}class cs{constructor({enableLongStackTrace:p=!1,shouldCoalesceEventChangeDetection:y=!1,shouldCoalesceRunChangeDetection:v=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gi(!1),this.onMicrotaskEmpty=new gi(!1),this.onStable=new gi(!1),this.onError=new gi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const _=this;_._nesting=0,_._outer=_._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(_._inner=_._inner.fork(new Zone.TaskTrackingZoneSpec)),p&&Zone.longStackTraceZoneSpec&&(_._inner=_._inner.fork(Zone.longStackTraceZoneSpec)),_.shouldCoalesceEventChangeDetection=!v&&y,_.shouldCoalesceRunChangeDetection=v,_.lastRequestAnimationFrameId=-1,_.nativeRequestAnimationFrame=function hj(){let g=Fr.requestAnimationFrame,p=Fr.cancelAnimationFrame;if("undefined"!=typeof Zone&&g&&p){const y=g[Zone.__symbol__("OriginalDelegate")];y&&(g=y);const v=p[Zone.__symbol__("OriginalDelegate")];v&&(p=v)}return{nativeRequestAnimationFrame:g,nativeCancelAnimationFrame:p}}().nativeRequestAnimationFrame,function mj(g){const p=()=>{!function pj(g){g.isCheckStableRunning||-1!==g.lastRequestAnimationFrameId||(g.lastRequestAnimationFrameId=g.nativeRequestAnimationFrame.call(Fr,()=>{g.fakeTopEventTask||(g.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{g.lastRequestAnimationFrameId=-1,AE(g),g.isCheckStableRunning=!0,TE(g),g.isCheckStableRunning=!1},void 0,()=>{},()=>{})),g.fakeTopEventTask.invoke()}),AE(g))}(g)};g._inner=g._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(y,v,_,E,w,D)=>{try{return VO(g),y.invokeTask(_,E,w,D)}finally{(g.shouldCoalesceEventChangeDetection&&"eventTask"===E.type||g.shouldCoalesceRunChangeDetection)&&p(),kO(g)}},onInvoke:(y,v,_,E,w,D,O)=>{try{return VO(g),y.invoke(_,E,w,D,O)}finally{g.shouldCoalesceRunChangeDetection&&p(),kO(g)}},onHasTask:(y,v,_,E)=>{y.hasTask(_,E),v===_&&("microTask"==E.change?(g._hasPendingMicrotasks=E.microTask,AE(g),TE(g)):"macroTask"==E.change&&(g.hasPendingMacrotasks=E.macroTask))},onHandleError:(y,v,_,E)=>(y.handleError(_,E),g.runOutsideAngular(()=>g.onError.emit(E)),!1)})}(_)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(cs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(p,y,v){return this._inner.run(p,y,v)}runTask(p,y,v,_){const E=this._inner,w=E.scheduleEventTask("NgZoneEvent: "+_,p,fj,vg,vg);try{return E.runTask(w,y,v)}finally{E.cancelTask(w)}}runGuarded(p,y,v){return this._inner.runGuarded(p,y,v)}runOutsideAngular(p){return this._outer.run(p)}}const fj={};function TE(g){if(0==g._nesting&&!g.hasPendingMicrotasks&&!g.isStable)try{g._nesting++,g.onMicrotaskEmpty.emit(null)}finally{if(g._nesting--,!g.hasPendingMicrotasks)try{g.runOutsideAngular(()=>g.onStable.emit(null))}finally{g.isStable=!0}}}function AE(g){g.hasPendingMicrotasks=!!(g._hasPendingMicrotasks||(g.shouldCoalesceEventChangeDetection||g.shouldCoalesceRunChangeDetection)&&-1!==g.lastRequestAnimationFrameId)}function VO(g){g._nesting++,g.isStable&&(g.isStable=!1,g.onUnstable.emit(null))}function kO(g){g._nesting--,TE(g)}class gj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gi,this.onMicrotaskEmpty=new gi,this.onStable=new gi,this.onError=new gi}run(p,y,v){return p.apply(y,v)}runGuarded(p,y,v){return p.apply(y,v)}runOutsideAngular(p){return p()}runTask(p,y,v,_){return p.apply(y,v)}}let PE=(()=>{class g{constructor(y){this._ngZone=y,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),y.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cs.assertNotInAngularZone(),IE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())IE(()=>{for(;0!==this._callbacks.length;){let y=this._callbacks.pop();clearTimeout(y.timeoutId),y.doneCb(this._didWork)}this._didWork=!1});else{let y=this.getPendingTasks();this._callbacks=this._callbacks.filter(v=>!v.updateCb||!v.updateCb(y)||(clearTimeout(v.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(y=>({source:y.source,creationLocation:y.creationLocation,data:y.data})):[]}addCallback(y,v,_){let E=-1;v&&v>0&&(E=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==E),y(this._didWork,this.getPendingTasks())},v)),this._callbacks.push({doneCb:y,timeoutId:E,updateCb:_})}whenStable(y,v,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(y,v,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(y,v,_){return[]}}return g.\u0275fac=function(y){return new(y||g)(_n(cs))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})(),WO=(()=>{class g{constructor(){this._applications=new Map,RE.addToWindow(this)}registerApplication(y,v){this._applications.set(y,v)}unregisterApplication(y){this._applications.delete(y)}unregisterAllApplications(){this._applications.clear()}getTestability(y){return this._applications.get(y)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(y,v=!0){return RE.findTestabilityInTree(this,y,v)}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();class yj{addToWindow(p){}findTestabilityInTree(p,y,v){return null}}let bl,RE=new yj;const ZO=new pn("AllowMultipleToken");class $O{constructor(p,y){this.name=p,this.token=y}}function KO(g,p,y=[]){const v=`Platform: ${p}`,_=new pn(v);return(E=[])=>{let w=zO();if(!w||w.injector.get(ZO,!1))if(g)g(y.concat(E).concat({provide:_,useValue:!0}));else{const D=y.concat(E).concat({provide:_,useValue:!0},{provide:j1,useValue:"platform"});!function bj(g){if(bl&&!bl.destroyed&&!bl.injector.get(ZO,!1))throw new zr(400,"");bl=g.get(GO);const p=g.get(FO,null);p&&p.forEach(y=>y())}(Is.create({providers:D,name:v}))}return function Cj(g){const p=zO();if(!p)throw new zr(401,"");return p}()}}function zO(){return bl&&!bl.destroyed?bl:null}let GO=(()=>{class g{constructor(y){this._injector=y,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(y,v){const D=function wj(g,p){let y;return y="noop"===g?new gj:("zone.js"===g?void 0:g)||new cs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==p?void 0:p.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==p?void 0:p.ngZoneRunCoalescing)}),y}(v?v.ngZone:void 0,{ngZoneEventCoalescing:v&&v.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:v&&v.ngZoneRunCoalescing||!1}),O=[{provide:cs,useValue:D}];return D.run(()=>{const A=Is.create({providers:O,parent:this.injector,name:y.moduleType.name}),W=y.create(A),q=W.injector.get(dp,null);if(!q)throw new zr(402,"");return D.runOutsideAngular(()=>{const _e=D.onError.subscribe({next:be=>{q.handleError(be)}});W.onDestroy(()=>{LE(this._modules,W),_e.unsubscribe()})}),function Mj(g,p,y){try{const v=y();return _p(v)?v.catch(_=>{throw p.runOutsideAngular(()=>g.handleError(_)),_}):v}catch(v){throw p.runOutsideAngular(()=>g.handleError(v)),v}}(q,D,()=>{const _e=W.injector.get(SE);return _e.runInitializers(),_e.donePromise.then(()=>(function tN(g){Qn(g,"Expected localeId to be defined"),"string"==typeof g&&(DS=g.toLowerCase().replace(/_/g,"-"))}(W.injector.get(hc,ug)||ug),this._moduleDoBootstrap(W),W))})})}bootstrapModule(y,v=[]){const _=HO({},v);return function _j(g,p,y){const v=new dE(y);return Promise.resolve(v)}(0,0,y).then(E=>this.bootstrapModuleFactory(E,_))}_moduleDoBootstrap(y){const v=y.injector.get(Eg);if(y._bootstrapComponents.length>0)y._bootstrapComponents.forEach(_=>v.bootstrap(_));else{if(!y.instance.ngDoBootstrap)throw new zr(403,"");y.instance.ngDoBootstrap(v)}this._modules.push(y)}onDestroy(y){this._destroyListeners.push(y)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new zr(404,"");this._modules.slice().forEach(y=>y.destroy()),this._destroyListeners.forEach(y=>y()),this._destroyed=!0}get destroyed(){return this._destroyed}}return g.\u0275fac=function(y){return new(y||g)(_n(Is))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();function HO(g,p){return Array.isArray(p)?p.reduce(HO,g):Object.assign(Object.assign({},g),p)}let Eg=(()=>{class g{constructor(y,v,_,E,w){this._zone=y,this._injector=v,this._exceptionHandler=_,this._componentFactoryResolver=E,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new fe(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),O=new fe(A=>{let W;this._zone.runOutsideAngular(()=>{W=this._zone.onStable.subscribe(()=>{cs.assertNotInAngularZone(),IE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{cs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{W.unsubscribe(),q.unsubscribe()}});this.isStable=So(D,O.pipe(Ve()))}bootstrap(y,v){if(!this._initStatus.done)throw new zr(405,"");let _;_=y instanceof XS?y:this._componentFactoryResolver.resolveComponentFactory(y),this.componentTypes.push(_.componentType);const E=function Ej(g){return g.isBoundToModule}(_)?void 0:this._injector.get(Iu),D=_.create(Is.NULL,[],v||_.selector,E),O=D.location.nativeElement,A=D.injector.get(PE,null),W=A&&D.injector.get(WO);return A&&W&&W.registerApplication(O,A),D.onDestroy(()=>{this.detachView(D.hostView),LE(this.components,D),W&&W.unregisterApplication(O)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new zr(101,"");try{this._runningTick=!0;for(let y of this._views)y.detectChanges()}catch(y){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(y))}finally{this._runningTick=!1}}attachView(y){const v=y;this._views.push(v),v.attachToAppRef(this)}detachView(y){const v=y;LE(this._views,v),v.detachFromAppRef()}_loadComponent(y){this.attachView(y.hostView),this.tick(),this.components.push(y),this._injector.get(jO,[]).concat(this._bootstrapListeners).forEach(_=>_(y))}ngOnDestroy(){this._views.slice().forEach(y=>y.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return g.\u0275fac=function(y){return new(y||g)(_n(cs),_n(Is),_n(dp),_n(xp),_n(SE))},g.\u0275prov=xt({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();function LE(g,p){const y=g.indexOf(p);y>-1&&g.splice(y,1)}let JO=!0,bg=(()=>{class g{}return g.__NG_ELEMENT_ID__=Sj,g})();function Sj(g){return function Oj(g,p,y){if(tc(g)&&!y){const v=Qr(g.index,p);return new Sp(v,v)}return 47&g.type?new Sp(p[16],p):null}(Yo(),Ir(),16==(16&g))}const kj=KO(null,"core",[{provide:Lp,useValue:"unknown"},{provide:GO,deps:[Is]},{provide:WO,deps:[]},{provide:BO,deps:[]}]);let Wj=(()=>{class g{constructor(y){}}return g.\u0275fac=function(y){return new(y||g)(_n(Eg))},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({}),g})(),xg=null;function Jl(){return xg}const ia=new pn("DocumentToken");let md=(()=>{class g{historyGo(y){throw new Error("Not implemented")}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=xt({token:g,factory:function(){return function zj(){return _n(aI)}()},providedIn:"platform"}),g})();const Gj=new pn("Location Initialized");let aI=(()=>{class g extends md{constructor(y){super(),this._doc=y,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jl().getBaseHref(this._doc)}onPopState(y){const v=Jl().getGlobalEventTarget(this._doc,"window");return v.addEventListener("popstate",y,!1),()=>v.removeEventListener("popstate",y)}onHashChange(y){const v=Jl().getGlobalEventTarget(this._doc,"window");return v.addEventListener("hashchange",y,!1),()=>v.removeEventListener("hashchange",y)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(y){this.location.pathname=y}pushState(y,v,_){lI()?this._history.pushState(y,v,_):this.location.hash=_}replaceState(y,v,_){lI()?this._history.replaceState(y,v,_):this.location.hash=_}forward(){this._history.forward()}back(){this._history.back()}historyGo(y=0){this._history.go(y)}getState(){return this._history.state}}return g.\u0275fac=function(y){return new(y||g)(_n(ia))},g.\u0275prov=xt({token:g,factory:function(){return function Hj(){return new aI(_n(ia))}()},providedIn:"platform"}),g})();function lI(){return!!window.history.pushState}function UE(g,p){if(0==g.length)return p;if(0==p.length)return g;let y=0;return g.endsWith("/")&&y++,p.startsWith("/")&&y++,2==y?g+p.substring(1):1==y?g+p:g+"/"+p}function uI(g){const p=g.match(/#|\?|$/),y=p&&p.index||g.length;return g.slice(0,y-("/"===g[y-1]?1:0))+g.slice(y)}function Au(g){return g&&"?"!==g[0]?"?"+g:g}let jh=(()=>{class g{historyGo(y){throw new Error("Not implemented")}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=xt({token:g,factory:function(){return function Yj(g){const p=_n(ia).location;return new cI(_n(md),p&&p.origin||"")}()},providedIn:"root"}),g})();const VE=new pn("appBaseHref");let cI=(()=>{class g extends jh{constructor(y,v){if(super(),this._platformLocation=y,this._removeListenerFns=[],null==v&&(v=this._platformLocation.getBaseHrefFromDOM()),null==v)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=v}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(y){this._removeListenerFns.push(this._platformLocation.onPopState(y),this._platformLocation.onHashChange(y))}getBaseHref(){return this._baseHref}prepareExternalUrl(y){return UE(this._baseHref,y)}path(y=!1){const v=this._platformLocation.pathname+Au(this._platformLocation.search),_=this._platformLocation.hash;return _&&y?`${v}${_}`:v}pushState(y,v,_,E){const w=this.prepareExternalUrl(_+Au(E));this._platformLocation.pushState(y,v,w)}replaceState(y,v,_,E){const w=this.prepareExternalUrl(_+Au(E));this._platformLocation.replaceState(y,v,w)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(y=0){var v,_;null===(_=(v=this._platformLocation).historyGo)||void 0===_||_.call(v,y)}}return g.\u0275fac=function(y){return new(y||g)(_n(md),_n(VE,8))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})(),Jj=(()=>{class g extends jh{constructor(y,v){super(),this._platformLocation=y,this._baseHref="",this._removeListenerFns=[],null!=v&&(this._baseHref=v)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(y){this._removeListenerFns.push(this._platformLocation.onPopState(y),this._platformLocation.onHashChange(y))}getBaseHref(){return this._baseHref}path(y=!1){let v=this._platformLocation.hash;return null==v&&(v="#"),v.length>0?v.substring(1):v}prepareExternalUrl(y){const v=UE(this._baseHref,y);return v.length>0?"#"+v:v}pushState(y,v,_,E){let w=this.prepareExternalUrl(_+Au(E));0==w.length&&(w=this._platformLocation.pathname),this._platformLocation.pushState(y,v,w)}replaceState(y,v,_,E){let w=this.prepareExternalUrl(_+Au(E));0==w.length&&(w=this._platformLocation.pathname),this._platformLocation.replaceState(y,v,w)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(y=0){var v,_;null===(_=(v=this._platformLocation).historyGo)||void 0===_||_.call(v,y)}}return g.\u0275fac=function(y){return new(y||g)(_n(md),_n(VE,8))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})(),kE=(()=>{class g{constructor(y,v){this._subject=new gi,this._urlChangeListeners=[],this._platformStrategy=y;const _=this._platformStrategy.getBaseHref();this._platformLocation=v,this._baseHref=uI(dI(_)),this._platformStrategy.onPopState(E=>{this._subject.emit({url:this.path(!0),pop:!0,state:E.state,type:E.type})})}path(y=!1){return this.normalize(this._platformStrategy.path(y))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(y,v=""){return this.path()==this.normalize(y+Au(v))}normalize(y){return g.stripTrailingSlash(function Qj(g,p){return g&&p.startsWith(g)?p.substring(g.length):p}(this._baseHref,dI(y)))}prepareExternalUrl(y){return y&&"/"!==y[0]&&(y="/"+y),this._platformStrategy.prepareExternalUrl(y)}go(y,v="",_=null){this._platformStrategy.pushState(_,"",y,v),this._notifyUrlChangeListeners(this.prepareExternalUrl(y+Au(v)),_)}replaceState(y,v="",_=null){this._platformStrategy.replaceState(_,"",y,v),this._notifyUrlChangeListeners(this.prepareExternalUrl(y+Au(v)),_)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(y=0){var v,_;null===(_=(v=this._platformStrategy).historyGo)||void 0===_||_.call(v,y)}onUrlChange(y){this._urlChangeListeners.push(y),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(v=>{this._notifyUrlChangeListeners(v.url,v.state)}))}_notifyUrlChangeListeners(y="",v){this._urlChangeListeners.forEach(_=>_(y,v))}subscribe(y,v,_){return this._subject.subscribe({next:y,error:v,complete:_})}}return g.normalizeQueryParams=Au,g.joinWithSlash=UE,g.stripTrailingSlash=uI,g.\u0275fac=function(y){return new(y||g)(_n(jh),_n(md))},g.\u0275prov=xt({token:g,factory:function(){return function Xj(){return new kE(_n(jh),_n(md))}()},providedIn:"root"}),g})();function dI(g){return g.replace(/\/index.html$/,"")}let MI=(()=>{class g{}return g.\u0275fac=function(y){return new(y||g)},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({}),g})();const xI="browser";function DI(g){return g===xI}let yU=(()=>{class g{}return g.\u0275prov=xt({token:g,providedIn:"root",factory:()=>new vU(_n(ia),window)}),g})();class vU{constructor(p,y){this.document=p,this.window=y,this.offset=()=>[0,0]}setOffset(p){this.offset=Array.isArray(p)?()=>p:p}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(p){this.supportsScrolling()&&this.window.scrollTo(p[0],p[1])}scrollToAnchor(p){if(!this.supportsScrolling())return;const y=function _U(g,p){const y=g.getElementById(p)||g.getElementsByName(p)[0];if(y)return y;if("function"==typeof g.createTreeWalker&&g.body&&(g.body.createShadowRoot||g.body.attachShadow)){const v=g.createTreeWalker(g.body,NodeFilter.SHOW_ELEMENT);let _=v.currentNode;for(;_;){const E=_.shadowRoot;if(E){const w=E.getElementById(p)||E.querySelector(`[name="${p}"]`);if(w)return w}_=v.nextNode()}}return null}(this.document,p);y&&(this.scrollToElement(y),y.focus())}setHistoryScrollRestoration(p){if(this.supportScrollRestoration()){const y=this.window.history;y&&y.scrollRestoration&&(y.scrollRestoration=p)}}scrollToElement(p){const y=p.getBoundingClientRect(),v=y.left+this.window.pageXOffset,_=y.top+this.window.pageYOffset,E=this.offset();this.window.scrollTo(v-E[0],_-E[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const p=SI(this.window.history)||SI(Object.getPrototypeOf(this.window.history));return!(!p||!p.writable&&!p.set)}catch(p){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(p){return!1}}}function SI(g){return Object.getOwnPropertyDescriptor(g,"scrollRestoration")}class tb extends class bU extends class Kj{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function $j(g){xg||(xg=g)}(new tb)}onAndCancel(p,y,v){return p.addEventListener(y,v,!1),()=>{p.removeEventListener(y,v,!1)}}dispatchEvent(p,y){p.dispatchEvent(y)}remove(p){p.parentNode&&p.parentNode.removeChild(p)}createElement(p,y){return(y=y||this.getDefaultDocument()).createElement(p)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(p){return p.nodeType===Node.ELEMENT_NODE}isShadowRoot(p){return p instanceof DocumentFragment}getGlobalEventTarget(p,y){return"window"===y?window:"document"===y?p:"body"===y?p.body:null}getBaseHref(p){const y=function CU(){return Bp=Bp||document.querySelector("base"),Bp?Bp.getAttribute("href"):null}();return null==y?null:function wU(g){Ng=Ng||document.createElement("a"),Ng.setAttribute("href",g);const p=Ng.pathname;return"/"===p.charAt(0)?p:`/${p}`}(y)}resetBaseElement(){Bp=null}getUserAgent(){return window.navigator.userAgent}getCookie(p){return function NB(g,p){p=encodeURIComponent(p);for(const y of g.split(";")){const v=y.indexOf("="),[_,E]=-1==v?[y,""]:[y.slice(0,v),y.slice(v+1)];if(_.trim()===p)return decodeURIComponent(E)}return null}(document.cookie,p)}}let Ng,Bp=null;const OI=new pn("TRANSITION_ID"),xU=[{provide:_g,useFactory:function MU(g,p,y){return()=>{y.get(SE).donePromise.then(()=>{const v=Jl(),_=p.querySelectorAll(`style[ng-transition="${g}"]`);for(let E=0;E<_.length;E++)v.remove(_[E])})}},deps:[OI,ia,Is],multi:!0}];class rb{static init(){!function vj(g){RE=g}(new rb)}addToWindow(p){Fr.getAngularTestability=(v,_=!0)=>{const E=p.findTestabilityInTree(v,_);if(null==E)throw new Error("Could not find testability for element.");return E},Fr.getAllAngularTestabilities=()=>p.getAllTestabilities(),Fr.getAllAngularRootElements=()=>p.getAllRootElements(),Fr.frameworkStabilizers||(Fr.frameworkStabilizers=[]),Fr.frameworkStabilizers.push(v=>{const _=Fr.getAllAngularTestabilities();let E=_.length,w=!1;const D=function(O){w=w||O,E--,0==E&&v(w)};_.forEach(function(O){O.whenStable(D)})})}findTestabilityInTree(p,y,v){if(null==y)return null;const _=p.getTestability(y);return null!=_?_:v?Jl().isShadowRoot(y)?this.findTestabilityInTree(p,y.host,!0):this.findTestabilityInTree(p,y.parentElement,!0):null}}let DU=(()=>{class g{build(){return new XMLHttpRequest}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();const Fg=new pn("EventManagerPlugins");let jg=(()=>{class g{constructor(y,v){this._zone=v,this._eventNameToPlugin=new Map,y.forEach(_=>_.manager=this),this._plugins=y.slice().reverse()}addEventListener(y,v,_){return this._findPluginFor(v).addEventListener(y,v,_)}addGlobalEventListener(y,v,_){return this._findPluginFor(v).addGlobalEventListener(y,v,_)}getZone(){return this._zone}_findPluginFor(y){const v=this._eventNameToPlugin.get(y);if(v)return v;const _=this._plugins;for(let E=0;E<_.length;E++){const w=_[E];if(w.supports(y))return this._eventNameToPlugin.set(y,w),w}throw new Error(`No event manager plugin found for event ${y}`)}}return g.\u0275fac=function(y){return new(y||g)(_n(Fg),_n(cs))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();class II{constructor(p){this._doc=p}addGlobalEventListener(p,y,v){const _=Jl().getGlobalEventTarget(this._doc,p);if(!_)throw new Error(`Unsupported event target ${_} for event ${y}`);return this.addEventListener(_,y,v)}}let TI=(()=>{class g{constructor(){this._stylesSet=new Set}addStyles(y){const v=new Set;y.forEach(_=>{this._stylesSet.has(_)||(this._stylesSet.add(_),v.add(_))}),this.onStylesAdded(v)}onStylesAdded(y){}getAllStyles(){return Array.from(this._stylesSet)}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})(),Up=(()=>{class g extends TI{constructor(y){super(),this._doc=y,this._hostNodes=new Map,this._hostNodes.set(y.head,[])}_addStylesToHost(y,v,_){y.forEach(E=>{const w=this._doc.createElement("style");w.textContent=E,_.push(v.appendChild(w))})}addHost(y){const v=[];this._addStylesToHost(this._stylesSet,y,v),this._hostNodes.set(y,v)}removeHost(y){const v=this._hostNodes.get(y);v&&v.forEach(AI),this._hostNodes.delete(y)}onStylesAdded(y){this._hostNodes.forEach((v,_)=>{this._addStylesToHost(y,_,v)})}ngOnDestroy(){this._hostNodes.forEach(y=>y.forEach(AI))}}return g.\u0275fac=function(y){return new(y||g)(_n(ia))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();function AI(g){Jl().remove(g)}const nb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ib=/%COMP%/g;function Bg(g,p,y){for(let v=0;v<p.length;v++){let _=p[v];Array.isArray(_)?Bg(g,_,y):(_=_.replace(ib,g),y.push(_))}return y}function LI(g){return p=>{if("__ngUnwrap__"===p)return g;!1===g(p)&&(p.preventDefault(),p.returnValue=!1)}}let ob=(()=>{class g{constructor(y,v,_){this.eventManager=y,this.sharedStylesHost=v,this.appId=_,this.rendererByCompId=new Map,this.defaultRenderer=new sb(y)}createRenderer(y,v){if(!y||!v)return this.defaultRenderer;switch(v.encapsulation){case kt.Emulated:{let _=this.rendererByCompId.get(v.id);return _||(_=new PU(this.eventManager,this.sharedStylesHost,v,this.appId),this.rendererByCompId.set(v.id,_)),_.applyToHost(y),_}case 1:case kt.ShadowDom:return new RU(this.eventManager,this.sharedStylesHost,y,v);default:if(!this.rendererByCompId.has(v.id)){const _=Bg(v.id,v.styles,[]);this.sharedStylesHost.addStyles(_),this.rendererByCompId.set(v.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return g.\u0275fac=function(y){return new(y||g)(_n(jg),_n(Up),_n(Rp))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();class sb{constructor(p){this.eventManager=p,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(p,y){return y?document.createElementNS(nb[y]||y,p):document.createElement(p)}createComment(p){return document.createComment(p)}createText(p){return document.createTextNode(p)}appendChild(p,y){p.appendChild(y)}insertBefore(p,y,v){p&&p.insertBefore(y,v)}removeChild(p,y){p&&p.removeChild(y)}selectRootElement(p,y){let v="string"==typeof p?document.querySelector(p):p;if(!v)throw new Error(`The selector "${p}" did not match any elements`);return y||(v.textContent=""),v}parentNode(p){return p.parentNode}nextSibling(p){return p.nextSibling}setAttribute(p,y,v,_){if(_){y=_+":"+y;const E=nb[_];E?p.setAttributeNS(E,y,v):p.setAttribute(y,v)}else p.setAttribute(y,v)}removeAttribute(p,y,v){if(v){const _=nb[v];_?p.removeAttributeNS(_,y):p.removeAttribute(`${v}:${y}`)}else p.removeAttribute(y)}addClass(p,y){p.classList.add(y)}removeClass(p,y){p.classList.remove(y)}setStyle(p,y,v,_){_&(Sa.DashCase|Sa.Important)?p.style.setProperty(y,v,_&Sa.Important?"important":""):p.style[y]=v}removeStyle(p,y,v){v&Sa.DashCase?p.style.removeProperty(y):p.style[y]=""}setProperty(p,y,v){p[y]=v}setValue(p,y){p.nodeValue=y}listen(p,y,v){return"string"==typeof p?this.eventManager.addGlobalEventListener(p,y,LI(v)):this.eventManager.addEventListener(p,y,LI(v))}}class PU extends sb{constructor(p,y,v,_){super(p),this.component=v;const E=Bg(_+"-"+v.id,v.styles,[]);y.addStyles(E),this.contentAttr=function IU(g){return"_ngcontent-%COMP%".replace(ib,g)}(_+"-"+v.id),this.hostAttr=function TU(g){return"_nghost-%COMP%".replace(ib,g)}(_+"-"+v.id)}applyToHost(p){super.setAttribute(p,this.hostAttr,"")}createElement(p,y){const v=super.createElement(p,y);return super.setAttribute(v,this.contentAttr,""),v}}class RU extends sb{constructor(p,y,v,_){super(p),this.sharedStylesHost=y,this.hostEl=v,this.shadowRoot=v.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const E=Bg(_.id,_.styles,[]);for(let w=0;w<E.length;w++){const D=document.createElement("style");D.textContent=E[w],this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(p){return p===this.hostEl?this.shadowRoot:p}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(p,y){return super.appendChild(this.nodeOrShadowRoot(p),y)}insertBefore(p,y,v){return super.insertBefore(this.nodeOrShadowRoot(p),y,v)}removeChild(p,y){return super.removeChild(this.nodeOrShadowRoot(p),y)}parentNode(p){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(p)))}}let LU=(()=>{class g extends II{constructor(y){super(y)}supports(y){return!0}addEventListener(y,v,_){return y.addEventListener(v,_,!1),()=>this.removeEventListener(y,v,_)}removeEventListener(y,v,_){return y.removeEventListener(v,_)}}return g.\u0275fac=function(y){return new(y||g)(_n(ia))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();const FI=["alt","control","meta","shift"],FU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jI={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jU={alt:g=>g.altKey,control:g=>g.ctrlKey,meta:g=>g.metaKey,shift:g=>g.shiftKey};let BU=(()=>{class g extends II{constructor(y){super(y)}supports(y){return null!=g.parseEventName(y)}addEventListener(y,v,_){const E=g.parseEventName(v),w=g.eventCallback(E.fullKey,_,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jl().onAndCancel(y,E.domEventName,w))}static parseEventName(y){const v=y.toLowerCase().split("."),_=v.shift();if(0===v.length||"keydown"!==_&&"keyup"!==_)return null;const E=g._normalizeKey(v.pop());let w="";if(FI.forEach(O=>{const A=v.indexOf(O);A>-1&&(v.splice(A,1),w+=O+".")}),w+=E,0!=v.length||0===E.length)return null;const D={};return D.domEventName=_,D.fullKey=w,D}static getEventFullKey(y){let v="",_=function UU(g){let p=g.key;if(null==p){if(p=g.keyIdentifier,null==p)return"Unidentified";p.startsWith("U+")&&(p=String.fromCharCode(parseInt(p.substring(2),16)),3===g.location&&jI.hasOwnProperty(p)&&(p=jI[p]))}return FU[p]||p}(y);return _=_.toLowerCase()," "===_?_="space":"."===_&&(_="dot"),FI.forEach(E=>{E!=_&&jU[E](y)&&(v+=E+".")}),v+=_,v}static eventCallback(y,v,_){return E=>{g.getEventFullKey(E)===y&&_.runGuarded(()=>v(E))}}static _normalizeKey(y){return"esc"===y?"escape":y}}return g.\u0275fac=function(y){return new(y||g)(_n(ia))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();const ZU=KO(kj,"browser",[{provide:Lp,useValue:xI},{provide:FO,useValue:function VU(){tb.makeCurrent(),rb.init()},multi:!0},{provide:ia,useFactory:function WU(){return function C_(g){wu=g}(document),document},deps:[]}]),$U=[{provide:j1,useValue:"root"},{provide:dp,useFactory:function kU(){return new dp},deps:[]},{provide:Fg,useClass:LU,multi:!0,deps:[ia,cs,Lp]},{provide:Fg,useClass:BU,multi:!0,deps:[ia]},{provide:ob,useClass:ob,deps:[jg,Up,Rp]},{provide:qS,useExisting:ob},{provide:TI,useExisting:Up},{provide:Up,useClass:Up,deps:[ia]},{provide:PE,useClass:PE,deps:[cs]},{provide:jg,useClass:jg,deps:[Fg,cs]},{provide:class EU{},useClass:DU,deps:[]}];let KU=(()=>{class g{constructor(y){if(y)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(y){return{ngModule:g,providers:[{provide:Rp,useValue:y.appId},{provide:OI,useExisting:Rp},xU]}}}return g.\u0275fac=function(y){return new(y||g)(_n(g,12))},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({providers:$U,imports:[MI,Wj]}),g})();function Zn(...g){return Nn(g,qn(g))}"undefined"!=typeof window&&window;class Ha extends xe{constructor(p){super(),this._value=p}get value(){return this.getValue()}_subscribe(p){const y=super._subscribe(p);return!y.closed&&p.next(this._value),y}getValue(){const{hasError:p,thrownError:y,_value:v}=this;if(p)throw y;return this._throwIfClosed(),v}next(p){super.next(this._value=p)}}const{isArray:rV}=Array,{getPrototypeOf:nV,prototype:iV,keys:oV}=Object;const{isArray:aV}=Array;function lb(g){return Te(p=>function lV(g,p){return aV(p)?g(...p):g(p)}(g,p))}function uV(...g){const p=qn(g),y=function Yi(g){return x(xo(g))?g.pop():void 0}(g),{args:v,keys:_}=function VI(g){if(1===g.length){const p=g[0];if(rV(p))return{args:p,keys:null};if(function sV(g){return g&&"object"==typeof g&&nV(g)===iV}(p)){const y=oV(p);return{args:y.map(v=>p[v]),keys:y}}}return{args:g,keys:null}}(g);if(0===v.length)return Nn([],p);const E=new fe(function cV(g,p,y=ue){return v=>{WI(p,()=>{const{length:_}=g,E=new Array(_);let w=_,D=_;for(let O=0;O<_;O++)WI(p,()=>{const A=Nn(g[O],p);let W=!1;A.subscribe(Le(v,q=>{E[O]=q,W||(W=!0,D--),D||v.next(y(E.slice()))},()=>{--w||v.complete()}))},v)},v)}}(v,p,_?w=>function kI(g,p){return g.reduce((y,v,_)=>(y[v]=p[_],y),{})}(_,w):ue));return y?E.pipe(lb(y)):E}function WI(g,p,y){g?Dr(y,g,p):p()}function Vp(g,p){const y=x(g)?g:()=>g,v=_=>_.error(y());return new fe(p?_=>p.schedule(v,0,_):v)}const Ug=T(g=>function(){g(this),this.name="EmptyError",this.message="no elements in sequence"});function kp(...g){return function dV(){return cn(1)}()(Nn(g,qn(g)))}function Vg(g){return new fe(p=>{Ge(g()).subscribe(p)})}function ZI(){return rt((g,p)=>{let y=null;g._refCount++;const v=Le(p,void 0,void 0,void 0,()=>{if(!g||g._refCount<=0||0<--g._refCount)return void(y=null);const _=g._connection,E=y;y=null,_&&(!E||_===E)&&_.unsubscribe(),p.unsubscribe()});g.subscribe(v),v.closed||(y=g.connect())})}class $I extends fe{constructor(p,y){super(),this.source=p,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,je(p)&&(this.lift=p.lift)}_subscribe(p){return this.getSubject().subscribe(p)}getSubject(){const p=this._subject;return(!p||p.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:p}=this;this._subject=this._connection=null,null==p||p.unsubscribe()}connect(){let p=this._connection;if(!p){p=this._connection=new te;const y=this.getSubject();p.add(this.source.subscribe(Le(y,void 0,()=>{this._teardown(),y.complete()},v=>{this._teardown(),y.error(v)},()=>this._teardown()))),p.closed&&(this._connection=null,p=te.EMPTY)}return p}refCount(){return ZI()(this)}}function Ml(g,p){return rt((y,v)=>{let _=null,E=0,w=!1;const D=()=>w&&!_&&v.complete();y.subscribe(Le(v,O=>{null==_||_.unsubscribe();let A=0;const W=E++;Ge(g(O,W)).subscribe(_=Le(v,q=>v.next(p?p(O,q,W,A++):q),()=>{_=null,D()}))},()=>{w=!0,D()}))})}function KI(...g){const p=qn(g);return rt((y,v)=>{(p?kp(g,y,p):kp(g,y)).subscribe(v)})}function hV(g,p,y,v,_){return(E,w)=>{let D=y,O=p,A=0;E.subscribe(Le(w,W=>{const q=A++;O=D?g(O,W,q):(D=!0,W),v&&w.next(O)},_&&(()=>{D&&w.next(O),w.complete()})))}}function zI(g,p){return rt(hV(g,p,arguments.length>=2,!0))}function Ya(g,p){return rt((y,v)=>{let _=0;y.subscribe(Le(v,E=>g.call(p,E,_++)&&v.next(E)))})}function pc(g){return rt((p,y)=>{let E,v=null,_=!1;v=p.subscribe(Le(y,void 0,void 0,w=>{E=Ge(g(w,pc(g)(p))),v?(v.unsubscribe(),v=null,E.subscribe(y)):_=!0})),_&&(v.unsubscribe(),v=null,E.subscribe(y))})}function Wp(g,p){return x(p)?Wr(g,p,1):Wr(g,1)}function ub(g){return g<=0?()=>Kn:rt((p,y)=>{let v=[];p.subscribe(Le(y,_=>{v.push(_),g<v.length&&v.shift()},()=>{for(const _ of v)y.next(_);y.complete()},void 0,()=>{v=null}))})}function GI(g=fV){return rt((p,y)=>{let v=!1;p.subscribe(Le(y,_=>{v=!0,y.next(_)},()=>v?y.complete():y.error(g())))})}function fV(){return new Ug}function HI(g){return rt((p,y)=>{let v=!1;p.subscribe(Le(y,_=>{v=!0,y.next(_)},()=>{v||y.next(g),y.complete()}))})}function Bh(g,p){const y=arguments.length>=2;return v=>v.pipe(g?Ya((_,E)=>g(_,E,v)):ue,ei(1),y?HI(p):GI(()=>new Ug))}function sa(g,p,y){const v=x(g)||p||y?{next:g,error:p,complete:y}:g;return v?rt((_,E)=>{var w;null===(w=v.subscribe)||void 0===w||w.call(v);let D=!0;_.subscribe(Le(E,O=>{var A;null===(A=v.next)||void 0===A||A.call(v,O),E.next(O)},()=>{var O;D=!1,null===(O=v.complete)||void 0===O||O.call(v),E.complete()},O=>{var A;D=!1,null===(A=v.error)||void 0===A||A.call(v,O),E.error(O)},()=>{var O,A;D&&(null===(O=v.unsubscribe)||void 0===O||O.call(v)),null===(A=v.finalize)||void 0===A||A.call(v)}))}):ue}function YI(g){return rt((p,y)=>{try{p.subscribe(y)}finally{y.add(g)}})}class Ru{constructor(p,y){this.id=p,this.url=y}}class cb extends Ru{constructor(p,y,v="imperative",_=null){super(p,y),this.navigationTrigger=v,this.restoredState=_}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zp extends Ru{constructor(p,y,v){super(p,y),this.urlAfterRedirects=v}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class JI extends Ru{constructor(p,y,v){super(p,y),this.reason=v}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mV extends Ru{constructor(p,y,v){super(p,y),this.error=v}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gV extends Ru{constructor(p,y,v,_){super(p,y),this.urlAfterRedirects=v,this.state=_}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yV extends Ru{constructor(p,y,v,_){super(p,y),this.urlAfterRedirects=v,this.state=_}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vV extends Ru{constructor(p,y,v,_,E){super(p,y),this.urlAfterRedirects=v,this.state=_,this.shouldActivate=E}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _V extends Ru{constructor(p,y,v,_){super(p,y),this.urlAfterRedirects=v,this.state=_}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EV extends Ru{constructor(p,y,v,_){super(p,y),this.urlAfterRedirects=v,this.state=_}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XI{constructor(p){this.route=p}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QI{constructor(p){this.route=p}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bV{constructor(p){this.snapshot=p}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CV{constructor(p){this.snapshot=p}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wV{constructor(p){this.snapshot=p}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MV{constructor(p){this.snapshot=p}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qI{constructor(p,y,v){this.routerEvent=p,this.position=y,this.anchor=v}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ri="primary";class xV{constructor(p){this.params=p||{}}has(p){return Object.prototype.hasOwnProperty.call(this.params,p)}get(p){if(this.has(p)){const y=this.params[p];return Array.isArray(y)?y[0]:y}return null}getAll(p){if(this.has(p)){const y=this.params[p];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Uh(g){return new xV(g)}const eT="ngNavigationCancelingError";function db(g){const p=Error("NavigationCancelingError: "+g);return p[eT]=!0,p}function SV(g,p,y){const v=y.path.split("/");if(v.length>g.length||"full"===y.pathMatch&&(p.hasChildren()||v.length<g.length))return null;const _={};for(let E=0;E<v.length;E++){const w=v[E],D=g[E];if(w.startsWith(":"))_[w.substring(1)]=D;else if(w!==D.path)return null}return{consumed:g.slice(0,v.length),posParams:_}}function Xl(g,p){const y=g?Object.keys(g):void 0,v=p?Object.keys(p):void 0;if(!y||!v||y.length!=v.length)return!1;let _;for(let E=0;E<y.length;E++)if(_=y[E],!tT(g[_],p[_]))return!1;return!0}function tT(g,p){if(Array.isArray(g)&&Array.isArray(p)){if(g.length!==p.length)return!1;const y=[...g].sort(),v=[...p].sort();return y.every((_,E)=>v[E]===_)}return g===p}function rT(g){return Array.prototype.concat.apply([],g)}function nT(g){return g.length>0?g[g.length-1]:null}function _s(g,p){for(const y in g)g.hasOwnProperty(y)&&p(g[y],y)}function Ql(g){return Q1(g)?g:_p(g)?Nn(Promise.resolve(g)):Zn(g)}const TV={exact:function sT(g,p,y){if(!yd(g.segments,p.segments)||!kg(g.segments,p.segments,y)||g.numberOfChildren!==p.numberOfChildren)return!1;for(const v in p.children)if(!g.children[v]||!sT(g.children[v],p.children[v],y))return!1;return!0},subset:aT},iT={exact:function AV(g,p){return Xl(g,p)},subset:function PV(g,p){return Object.keys(p).length<=Object.keys(g).length&&Object.keys(p).every(y=>tT(g[y],p[y]))},ignored:()=>!0};function oT(g,p,y){return TV[y.paths](g.root,p.root,y.matrixParams)&&iT[y.queryParams](g.queryParams,p.queryParams)&&!("exact"===y.fragment&&g.fragment!==p.fragment)}function aT(g,p,y){return lT(g,p,p.segments,y)}function lT(g,p,y,v){if(g.segments.length>y.length){const _=g.segments.slice(0,y.length);return!(!yd(_,y)||p.hasChildren()||!kg(_,y,v))}if(g.segments.length===y.length){if(!yd(g.segments,y)||!kg(g.segments,y,v))return!1;for(const _ in p.children)if(!g.children[_]||!aT(g.children[_],p.children[_],v))return!1;return!0}{const _=y.slice(0,g.segments.length),E=y.slice(g.segments.length);return!!(yd(g.segments,_)&&kg(g.segments,_,v)&&g.children[ri])&&lT(g.children[ri],p,E,v)}}function kg(g,p,y){return p.every((v,_)=>iT[y](g[_].parameters,v.parameters))}class gd{constructor(p,y,v){this.root=p,this.queryParams=y,this.fragment=v}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uh(this.queryParams)),this._queryParamMap}toString(){return NV.serialize(this)}}class di{constructor(p,y){this.segments=p,this.children=y,this.parent=null,_s(y,(v,_)=>v.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wg(this)}}class $p{constructor(p,y){this.path=p,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Uh(this.parameters)),this._parameterMap}toString(){return fT(this)}}function yd(g,p){return g.length===p.length&&g.every((y,v)=>y.path===p[v].path)}class uT{}class cT{parse(p){const y=new $V(p);return new gd(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(p){const y=`/${Kp(p.root,!0)}`,v=function BV(g){const p=Object.keys(g).map(y=>{const v=g[y];return Array.isArray(v)?v.map(_=>`${Zg(y)}=${Zg(_)}`).join("&"):`${Zg(y)}=${Zg(v)}`}).filter(y=>!!y);return p.length?`?${p.join("&")}`:""}(p.queryParams);return`${y}${v}${"string"==typeof p.fragment?`#${function FV(g){return encodeURI(g)}(p.fragment)}`:""}`}}const NV=new cT;function Wg(g){return g.segments.map(p=>fT(p)).join("/")}function Kp(g,p){if(!g.hasChildren())return Wg(g);if(p){const y=g.children[ri]?Kp(g.children[ri],!1):"",v=[];return _s(g.children,(_,E)=>{E!==ri&&v.push(`${E}:${Kp(_,!1)}`)}),v.length>0?`${y}(${v.join("//")})`:y}{const y=function LV(g,p){let y=[];return _s(g.children,(v,_)=>{_===ri&&(y=y.concat(p(v,_)))}),_s(g.children,(v,_)=>{_!==ri&&(y=y.concat(p(v,_)))}),y}(g,(v,_)=>_===ri?[Kp(g.children[ri],!1)]:[`${_}:${Kp(v,!1)}`]);return 1===Object.keys(g.children).length&&null!=g.children[ri]?`${Wg(g)}/${y[0]}`:`${Wg(g)}/(${y.join("//")})`}}function dT(g){return encodeURIComponent(g).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zg(g){return dT(g).replace(/%3B/gi,";")}function hb(g){return dT(g).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $g(g){return decodeURIComponent(g)}function hT(g){return $g(g.replace(/\+/g,"%20"))}function fT(g){return`${hb(g.path)}${function jV(g){return Object.keys(g).map(p=>`;${hb(p)}=${hb(g[p])}`).join("")}(g.parameters)}`}const UV=/^[^\/()?;=#]+/;function Kg(g){const p=g.match(UV);return p?p[0]:""}const VV=/^[^=?&#]+/,WV=/^[^&#]+/;class $V{constructor(p){this.url=p,this.remaining=p}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new di([],{}):new di([],this.parseChildren())}parseQueryParams(){const p={};if(this.consumeOptional("?"))do{this.parseQueryParam(p)}while(this.consumeOptional("&"));return p}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const p=[];for(this.peekStartsWith("(")||p.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),p.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let v={};return this.peekStartsWith("(")&&(v=this.parseParens(!1)),(p.length>0||Object.keys(y).length>0)&&(v[ri]=new di(p,y)),v}parseSegment(){const p=Kg(this.remaining);if(""===p&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(p),new $p($g(p),this.parseMatrixParams())}parseMatrixParams(){const p={};for(;this.consumeOptional(";");)this.parseParam(p);return p}parseParam(p){const y=Kg(this.remaining);if(!y)return;this.capture(y);let v="";if(this.consumeOptional("=")){const _=Kg(this.remaining);_&&(v=_,this.capture(v))}p[$g(y)]=$g(v)}parseQueryParam(p){const y=function kV(g){const p=g.match(VV);return p?p[0]:""}(this.remaining);if(!y)return;this.capture(y);let v="";if(this.consumeOptional("=")){const w=function ZV(g){const p=g.match(WV);return p?p[0]:""}(this.remaining);w&&(v=w,this.capture(v))}const _=hT(y),E=hT(v);if(p.hasOwnProperty(_)){let w=p[_];Array.isArray(w)||(w=[w],p[_]=w),w.push(E)}else p[_]=E}parseParens(p){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const v=Kg(this.remaining),_=this.remaining[v.length];if("/"!==_&&")"!==_&&";"!==_)throw new Error(`Cannot parse url '${this.url}'`);let E;v.indexOf(":")>-1?(E=v.substr(0,v.indexOf(":")),this.capture(E),this.capture(":")):p&&(E=ri);const w=this.parseChildren();y[E]=1===Object.keys(w).length?w[ri]:new di([],w),this.consumeOptional("//")}return y}peekStartsWith(p){return this.remaining.startsWith(p)}consumeOptional(p){return!!this.peekStartsWith(p)&&(this.remaining=this.remaining.substring(p.length),!0)}capture(p){if(!this.consumeOptional(p))throw new Error(`Expected "${p}".`)}}class pT{constructor(p){this._root=p}get root(){return this._root.value}parent(p){const y=this.pathFromRoot(p);return y.length>1?y[y.length-2]:null}children(p){const y=fb(p,this._root);return y?y.children.map(v=>v.value):[]}firstChild(p){const y=fb(p,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(p){const y=pb(p,this._root);return y.length<2?[]:y[y.length-2].children.map(_=>_.value).filter(_=>_!==p)}pathFromRoot(p){return pb(p,this._root).map(y=>y.value)}}function fb(g,p){if(g===p.value)return p;for(const y of p.children){const v=fb(g,y);if(v)return v}return null}function pb(g,p){if(g===p.value)return[p];for(const y of p.children){const v=pb(g,y);if(v.length)return v.unshift(p),v}return[]}class Lu{constructor(p,y){this.value=p,this.children=y}toString(){return`TreeNode(${this.value})`}}function Vh(g){const p={};return g&&g.children.forEach(y=>p[y.value.outlet]=y),p}class mT extends pT{constructor(p,y){super(p),this.snapshot=y,mb(this,p)}toString(){return this.snapshot.toString()}}function gT(g,p){const y=function KV(g,p){const w=new zg([],{},{},"",{},ri,p,null,g.root,-1,{});return new vT("",new Lu(w,[]))}(g,p),v=new Ha([new $p("",{})]),_=new Ha({}),E=new Ha({}),w=new Ha({}),D=new Ha(""),O=new kh(v,_,w,D,E,ri,p,y.root);return O.snapshot=y.root,new mT(new Lu(O,[]),y)}class kh{constructor(p,y,v,_,E,w,D,O){this.url=p,this.params=y,this.queryParams=v,this.fragment=_,this.data=E,this.outlet=w,this.component=D,this._futureSnapshot=O}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Te(p=>Uh(p)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Te(p=>Uh(p)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yT(g,p="emptyOnly"){const y=g.pathFromRoot;let v=0;if("always"!==p)for(v=y.length-1;v>=1;){const _=y[v],E=y[v-1];if(_.routeConfig&&""===_.routeConfig.path)v--;else{if(E.component)break;v--}}return function zV(g){return g.reduce((p,y)=>({params:Object.assign(Object.assign({},p.params),y.params),data:Object.assign(Object.assign({},p.data),y.data),resolve:Object.assign(Object.assign({},p.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(v))}class zg{constructor(p,y,v,_,E,w,D,O,A,W,q){this.url=p,this.params=y,this.queryParams=v,this.fragment=_,this.data=E,this.outlet=w,this.component=D,this.routeConfig=O,this._urlSegment=A,this._lastPathIndex=W,this._resolve=q}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(v=>v.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vT extends pT{constructor(p,y){super(y),this.url=p,mb(this,y)}toString(){return _T(this._root)}}function mb(g,p){p.value._routerState=g,p.children.forEach(y=>mb(g,y))}function _T(g){const p=g.children.length>0?` { ${g.children.map(_T).join(", ")} } `:"";return`${g.value}${p}`}function gb(g){if(g.snapshot){const p=g.snapshot,y=g._futureSnapshot;g.snapshot=y,Xl(p.queryParams,y.queryParams)||g.queryParams.next(y.queryParams),p.fragment!==y.fragment&&g.fragment.next(y.fragment),Xl(p.params,y.params)||g.params.next(y.params),function OV(g,p){if(g.length!==p.length)return!1;for(let y=0;y<g.length;++y)if(!Xl(g[y],p[y]))return!1;return!0}(p.url,y.url)||g.url.next(y.url),Xl(p.data,y.data)||g.data.next(y.data)}else g.snapshot=g._futureSnapshot,g.data.next(g._futureSnapshot.data)}function yb(g,p){const y=Xl(g.params,p.params)&&function RV(g,p){return yd(g,p)&&g.every((y,v)=>Xl(y.parameters,p[v].parameters))}(g.url,p.url);return y&&!(!g.parent!=!p.parent)&&(!g.parent||yb(g.parent,p.parent))}function zp(g,p,y){if(y&&g.shouldReuseRoute(p.value,y.value.snapshot)){const v=y.value;v._futureSnapshot=p.value;const _=function HV(g,p,y){return p.children.map(v=>{for(const _ of y.children)if(g.shouldReuseRoute(v.value,_.value.snapshot))return zp(g,v,_);return zp(g,v)})}(g,p,y);return new Lu(v,_)}{if(g.shouldAttach(p.value)){const E=g.retrieve(p.value);if(null!==E){const w=E.route;return w.value._futureSnapshot=p.value,w.children=p.children.map(D=>zp(g,D)),w}}const v=function YV(g){return new kh(new Ha(g.url),new Ha(g.params),new Ha(g.queryParams),new Ha(g.fragment),new Ha(g.data),g.outlet,g.component,g)}(p.value),_=p.children.map(E=>zp(g,E));return new Lu(v,_)}}function Gg(g){return"object"==typeof g&&null!=g&&!g.outlets&&!g.segmentPath}function Gp(g){return"object"==typeof g&&null!=g&&g.outlets}function vb(g,p,y,v,_){let E={};if(v&&_s(v,(D,O)=>{E[O]=Array.isArray(D)?D.map(A=>`${A}`):`${D}`}),g===p)return new gd(y,E,_);const w=ET(g,p,y);return new gd(w,E,_)}function ET(g,p,y){const v={};return _s(g.children,(_,E)=>{v[E]=_===p?y:ET(_,p,y)}),new di(g.segments,v)}class bT{constructor(p,y,v){if(this.isAbsolute=p,this.numberOfDoubleDots=y,this.commands=v,p&&v.length>0&&Gg(v[0]))throw new Error("Root segment cannot have matrix parameters");const _=v.find(Gp);if(_&&_!==nT(v))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _b{constructor(p,y,v){this.segmentGroup=p,this.processChildren=y,this.index=v}}function CT(g,p,y){if(g||(g=new di([],{})),0===g.segments.length&&g.hasChildren())return Hg(g,p,y);const v=function tk(g,p,y){let v=0,_=p;const E={match:!1,pathIndex:0,commandIndex:0};for(;_<g.segments.length;){if(v>=y.length)return E;const w=g.segments[_],D=y[v];if(Gp(D))break;const O=`${D}`,A=v<y.length-1?y[v+1]:null;if(_>0&&void 0===O)break;if(O&&A&&"object"==typeof A&&void 0===A.outlets){if(!MT(O,A,w))return E;v+=2}else{if(!MT(O,{},w))return E;v++}_++}return{match:!0,pathIndex:_,commandIndex:v}}(g,p,y),_=y.slice(v.commandIndex);if(v.match&&v.pathIndex<g.segments.length){const E=new di(g.segments.slice(0,v.pathIndex),{});return E.children[ri]=new di(g.segments.slice(v.pathIndex),g.children),Hg(E,0,_)}return v.match&&0===_.length?new di(g.segments,{}):v.match&&!g.hasChildren()?Eb(g,p,y):v.match?Hg(g,0,_):Eb(g,p,y)}function Hg(g,p,y){if(0===y.length)return new di(g.segments,{});{const v=function ek(g){return Gp(g[0])?g[0].outlets:{[ri]:g}}(y),_={};return _s(v,(E,w)=>{"string"==typeof E&&(E=[E]),null!==E&&(_[w]=CT(g.children[w],p,E))}),_s(g.children,(E,w)=>{void 0===v[w]&&(_[w]=E)}),new di(g.segments,_)}}function Eb(g,p,y){const v=g.segments.slice(0,p);let _=0;for(;_<y.length;){const E=y[_];if(Gp(E)){const O=rk(E.outlets);return new di(v,O)}if(0===_&&Gg(y[0])){v.push(new $p(g.segments[p].path,wT(y[0]))),_++;continue}const w=Gp(E)?E.outlets[ri]:`${E}`,D=_<y.length-1?y[_+1]:null;w&&D&&Gg(D)?(v.push(new $p(w,wT(D))),_+=2):(v.push(new $p(w,{})),_++)}return new di(v,{})}function rk(g){const p={};return _s(g,(y,v)=>{"string"==typeof y&&(y=[y]),null!==y&&(p[v]=Eb(new di([],{}),0,y))}),p}function wT(g){const p={};return _s(g,(y,v)=>p[v]=`${y}`),p}function MT(g,p,y){return g==y.path&&Xl(p,y.parameters)}class ik{constructor(p,y,v,_){this.routeReuseStrategy=p,this.futureState=y,this.currState=v,this.forwardEvent=_}activate(p){const y=this.futureState._root,v=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,v,p),gb(this.futureState.root),this.activateChildRoutes(y,v,p)}deactivateChildRoutes(p,y,v){const _=Vh(y);p.children.forEach(E=>{const w=E.value.outlet;this.deactivateRoutes(E,_[w],v),delete _[w]}),_s(_,(E,w)=>{this.deactivateRouteAndItsChildren(E,v)})}deactivateRoutes(p,y,v){const _=p.value,E=y?y.value:null;if(_===E)if(_.component){const w=v.getContext(_.outlet);w&&this.deactivateChildRoutes(p,y,w.children)}else this.deactivateChildRoutes(p,y,v);else E&&this.deactivateRouteAndItsChildren(y,v)}deactivateRouteAndItsChildren(p,y){p.value.component&&this.routeReuseStrategy.shouldDetach(p.value.snapshot)?this.detachAndStoreRouteSubtree(p,y):this.deactivateRouteAndOutlet(p,y)}detachAndStoreRouteSubtree(p,y){const v=y.getContext(p.value.outlet),_=v&&p.value.component?v.children:y,E=Vh(p);for(const w of Object.keys(E))this.deactivateRouteAndItsChildren(E[w],_);if(v&&v.outlet){const w=v.outlet.detach(),D=v.children.onOutletDeactivated();this.routeReuseStrategy.store(p.value.snapshot,{componentRef:w,route:p,contexts:D})}}deactivateRouteAndOutlet(p,y){const v=y.getContext(p.value.outlet),_=v&&p.value.component?v.children:y,E=Vh(p);for(const w of Object.keys(E))this.deactivateRouteAndItsChildren(E[w],_);v&&v.outlet&&(v.outlet.deactivate(),v.children.onOutletDeactivated(),v.attachRef=null,v.resolver=null,v.route=null)}activateChildRoutes(p,y,v){const _=Vh(y);p.children.forEach(E=>{this.activateRoutes(E,_[E.value.outlet],v),this.forwardEvent(new MV(E.value.snapshot))}),p.children.length&&this.forwardEvent(new CV(p.value.snapshot))}activateRoutes(p,y,v){const _=p.value,E=y?y.value:null;if(gb(_),_===E)if(_.component){const w=v.getOrCreateContext(_.outlet);this.activateChildRoutes(p,y,w.children)}else this.activateChildRoutes(p,y,v);else if(_.component){const w=v.getOrCreateContext(_.outlet);if(this.routeReuseStrategy.shouldAttach(_.snapshot)){const D=this.routeReuseStrategy.retrieve(_.snapshot);this.routeReuseStrategy.store(_.snapshot,null),w.children.onOutletReAttached(D.contexts),w.attachRef=D.componentRef,w.route=D.route.value,w.outlet&&w.outlet.attach(D.componentRef,D.route.value),gb(D.route.value),this.activateChildRoutes(p,null,w.children)}else{const D=function ok(g){for(let p=g.parent;p;p=p.parent){const y=p.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(_.snapshot),O=D?D.module.componentFactoryResolver:null;w.attachRef=null,w.route=_,w.resolver=O,w.outlet&&w.outlet.activateWith(_,O),this.activateChildRoutes(p,null,w.children)}}else this.activateChildRoutes(p,null,v)}}class bb{constructor(p,y){this.routes=p,this.module=y}}function mc(g){return"function"==typeof g}function vd(g){return g instanceof gd}const Hp=Symbol("INITIAL_VALUE");function Yp(){return Ml(g=>uV(g.map(p=>p.pipe(ei(1),KI(Hp)))).pipe(zI((p,y)=>{let v=!1;return y.reduce((_,E,w)=>_!==Hp?_:(E===Hp&&(v=!0),v||!1!==E&&w!==y.length-1&&!vd(E)?_:E),p)},Hp),Ya(p=>p!==Hp),Te(p=>vd(p)?p:!0===p),ei(1)))}class dk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jp,this.attachRef=null}}class Jp{constructor(){this.contexts=new Map}onChildOutletCreated(p,y){const v=this.getOrCreateContext(p);v.outlet=y,this.contexts.set(p,v)}onChildOutletDestroyed(p){const y=this.getContext(p);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const p=this.contexts;return this.contexts=new Map,p}onOutletReAttached(p){this.contexts=p}getOrCreateContext(p){let y=this.getContext(p);return y||(y=new dk,this.contexts.set(p,y)),y}getContext(p){return this.contexts.get(p)||null}}let Cb=(()=>{class g{constructor(y,v,_,E,w){this.parentContexts=y,this.location=v,this.resolver=_,this.changeDetector=w,this.activated=null,this._activatedRoute=null,this.activateEvents=new gi,this.deactivateEvents=new gi,this.attachEvents=new gi,this.detachEvents=new gi,this.name=E||ri,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,v){this.activated=y,this._activatedRoute=v,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,v){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const w=(v=v||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),D=this.parentContexts.getOrCreateContext(this.name).children,O=new hk(y,D,this.location.injector);this.activated=this.location.createComponent(w,this.location.length,O),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return g.\u0275fac=function(y){return new(y||g)(Lr(Jp),Lr(El),Lr(xp),function Qf(g){return function M4(g,p){if("class"===p)return g.classes;if("style"===p)return g.styles;const y=g.attrs;if(y){const v=y.length;let _=0;for(;_<v;){const E=y[_];if(tM(E))break;if(0===E)_+=2;else if("number"==typeof E)for(_++;_<v&&"string"==typeof y[_];)_++;else{if(E===p)return y[_+1];_+=2}}}return null}(Yo(),g)}("name"),Lr(bg))},g.\u0275dir=dn({type:g,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),g})();class hk{constructor(p,y,v){this.route=p,this.childContexts=y,this.parent=v}get(p,y){return p===kh?this.route:p===Jp?this.childContexts:this.parent.get(p,y)}}let xT=(()=>{class g{}return g.\u0275fac=function(y){return new(y||g)},g.\u0275cmp=jl({type:g,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,v){1&y&&yl(0,"router-outlet")},directives:[Cb],encapsulation:2}),g})();function DT(g,p=""){for(let y=0;y<g.length;y++){const v=g[y];fk(v,pk(p,v))}}function fk(g,p){g.children&&DT(g.children,p)}function pk(g,p){return p?g||p.path?g&&!p.path?`${g}/`:!g&&p.path?p.path:`${g}/${p.path}`:"":g}function wb(g){const p=g.children&&g.children.map(wb),y=p?Object.assign(Object.assign({},g),{children:p}):Object.assign({},g);return!y.component&&(p||y.loadChildren)&&y.outlet&&y.outlet!==ri&&(y.component=xT),y}function Ja(g){return g.outlet||ri}function ST(g,p){const y=g.filter(v=>Ja(v)===p);return y.push(...g.filter(v=>Ja(v)!==p)),y}const OT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yg(g,p,y){var v;if(""===p.path)return"full"===p.pathMatch&&(g.hasChildren()||y.length>0)?Object.assign({},OT):{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const E=(p.matcher||SV)(y,g,p);if(!E)return Object.assign({},OT);const w={};_s(E.posParams,(O,A)=>{w[A]=O.path});const D=E.consumed.length>0?Object.assign(Object.assign({},w),E.consumed[E.consumed.length-1].parameters):w;return{matched:!0,consumedSegments:E.consumed,remainingSegments:y.slice(E.consumed.length),parameters:D,positionalParamSegments:null!==(v=E.posParams)&&void 0!==v?v:{}}}function Jg(g,p,y,v,_="corrected"){if(y.length>0&&function yk(g,p,y){return y.some(v=>Xg(g,p,v)&&Ja(v)!==ri)}(g,y,v)){const w=new di(p,function gk(g,p,y,v){const _={};_[ri]=v,v._sourceSegment=g,v._segmentIndexShift=p.length;for(const E of y)if(""===E.path&&Ja(E)!==ri){const w=new di([],{});w._sourceSegment=g,w._segmentIndexShift=p.length,_[Ja(E)]=w}return _}(g,p,v,new di(y,g.children)));return w._sourceSegment=g,w._segmentIndexShift=p.length,{segmentGroup:w,slicedSegments:[]}}if(0===y.length&&function vk(g,p,y){return y.some(v=>Xg(g,p,v))}(g,y,v)){const w=new di(g.segments,function mk(g,p,y,v,_,E){const w={};for(const D of v)if(Xg(g,y,D)&&!_[Ja(D)]){const O=new di([],{});O._sourceSegment=g,O._segmentIndexShift="legacy"===E?g.segments.length:p.length,w[Ja(D)]=O}return Object.assign(Object.assign({},_),w)}(g,p,y,v,g.children,_));return w._sourceSegment=g,w._segmentIndexShift=p.length,{segmentGroup:w,slicedSegments:y}}const E=new di(g.segments,g.children);return E._sourceSegment=g,E._segmentIndexShift=p.length,{segmentGroup:E,slicedSegments:y}}function Xg(g,p,y){return(!(g.hasChildren()||p.length>0)||"full"!==y.pathMatch)&&""===y.path}function IT(g,p,y,v){return!!(Ja(g)===v||v!==ri&&Xg(p,y,g))&&("**"===g.path||Yg(p,g,y).matched)}function TT(g,p,y){return 0===p.length&&!g.children[y]}class Qg{constructor(p){this.segmentGroup=p||null}}class AT{constructor(p){this.urlTree=p}}function Xp(g){return Vp(new Qg(g))}function PT(g){return Vp(new AT(g))}class Ck{constructor(p,y,v,_,E){this.configLoader=y,this.urlSerializer=v,this.urlTree=_,this.config=E,this.allowRedirects=!0,this.ngModule=p.get(Iu)}apply(){const p=Jg(this.urlTree.root,[],[],this.config).segmentGroup,y=new di(p.segments,p.children);return this.expandSegmentGroup(this.ngModule,this.config,y,ri).pipe(Te(E=>this.createUrlTree(Mb(E),this.urlTree.queryParams,this.urlTree.fragment))).pipe(pc(E=>{if(E instanceof AT)return this.allowRedirects=!1,this.match(E.urlTree);throw E instanceof Qg?this.noMatchError(E):E}))}match(p){return this.expandSegmentGroup(this.ngModule,this.config,p.root,ri).pipe(Te(_=>this.createUrlTree(Mb(_),p.queryParams,p.fragment))).pipe(pc(_=>{throw _ instanceof Qg?this.noMatchError(_):_}))}noMatchError(p){return new Error(`Cannot match any routes. URL Segment: '${p.segmentGroup}'`)}createUrlTree(p,y,v){const _=p.segments.length>0?new di([],{[ri]:p}):p;return new gd(_,y,v)}expandSegmentGroup(p,y,v,_){return 0===v.segments.length&&v.hasChildren()?this.expandChildren(p,y,v).pipe(Te(E=>new di([],E))):this.expandSegment(p,v,y,v.segments,_,!0)}expandChildren(p,y,v){const _=[];for(const E of Object.keys(v.children))"primary"===E?_.unshift(E):_.push(E);return Nn(_).pipe(Wp(E=>{const w=v.children[E],D=ST(y,E);return this.expandSegmentGroup(p,D,w,E).pipe(Te(O=>({segment:O,outlet:E})))}),zI((E,w)=>(E[w.outlet]=w.segment,E),{}),function pV(g,p){const y=arguments.length>=2;return v=>v.pipe(g?Ya((_,E)=>g(_,E,v)):ue,ub(1),y?HI(p):GI(()=>new Ug))}())}expandSegment(p,y,v,_,E,w){return Nn(v).pipe(Wp(D=>this.expandSegmentAgainstRoute(p,y,v,D,_,E,w).pipe(pc(A=>{if(A instanceof Qg)return Zn(null);throw A}))),Bh(D=>!!D),pc((D,O)=>{if(D instanceof Ug||"EmptyError"===D.name)return TT(y,_,E)?Zn(new di([],{})):Xp(y);throw D}))}expandSegmentAgainstRoute(p,y,v,_,E,w,D){return IT(_,y,E,w)?void 0===_.redirectTo?this.matchSegmentAgainstRoute(p,y,_,E,w):D&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(p,y,v,_,E,w):Xp(y):Xp(y)}expandSegmentAgainstRouteUsingRedirect(p,y,v,_,E,w){return"**"===_.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(p,v,_,w):this.expandRegularSegmentAgainstRouteUsingRedirect(p,y,v,_,E,w)}expandWildCardWithParamsAgainstRouteUsingRedirect(p,y,v,_){const E=this.applyRedirectCommands([],v.redirectTo,{});return v.redirectTo.startsWith("/")?PT(E):this.lineralizeSegments(v,E).pipe(Wr(w=>{const D=new di(w,{});return this.expandSegment(p,D,y,w,_,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(p,y,v,_,E,w){const{matched:D,consumedSegments:O,remainingSegments:A,positionalParamSegments:W}=Yg(y,_,E);if(!D)return Xp(y);const q=this.applyRedirectCommands(O,_.redirectTo,W);return _.redirectTo.startsWith("/")?PT(q):this.lineralizeSegments(_,q).pipe(Wr(_e=>this.expandSegment(p,y,v,_e.concat(A),w,!1)))}matchSegmentAgainstRoute(p,y,v,_,E){if("**"===v.path)return v.loadChildren?(v._loadedConfig?Zn(v._loadedConfig):this.configLoader.load(p.injector,v)).pipe(Te(q=>(v._loadedConfig=q,new di(_,{})))):Zn(new di(_,{}));const{matched:w,consumedSegments:D,remainingSegments:O}=Yg(y,v,_);return w?this.getChildConfig(p,v,_).pipe(Wr(W=>{const q=W.module,_e=W.routes,{segmentGroup:be,slicedSegments:We}=Jg(y,D,O,_e),qe=new di(be.segments,be.children);if(0===We.length&&qe.hasChildren())return this.expandChildren(q,_e,qe).pipe(Te(Tt=>new di(D,Tt)));if(0===_e.length&&0===We.length)return Zn(new di(D,{}));const dt=Ja(v)===E;return this.expandSegment(q,qe,_e,We,dt?ri:E,!0).pipe(Te(lt=>new di(D.concat(lt.segments),lt.children)))})):Xp(y)}getChildConfig(p,y,v){return y.children?Zn(new bb(y.children,p)):y.loadChildren?void 0!==y._loadedConfig?Zn(y._loadedConfig):this.runCanLoadGuards(p.injector,y,v).pipe(Wr(_=>_?this.configLoader.load(p.injector,y).pipe(Te(E=>(y._loadedConfig=E,E))):function Ek(g){return Vp(db(`Cannot load children because the guard of the route "path: '${g.path}'" returned false`))}(y))):Zn(new bb([],p))}runCanLoadGuards(p,y,v){const _=y.canLoad;return _&&0!==_.length?Zn(_.map(w=>{const D=p.get(w);let O;if(function ak(g){return g&&mc(g.canLoad)}(D))O=D.canLoad(y,v);else{if(!mc(D))throw new Error("Invalid CanLoad guard");O=D(y,v)}return Ql(O)})).pipe(Yp(),sa(w=>{if(!vd(w))return;const D=db(`Redirecting to "${this.urlSerializer.serialize(w)}"`);throw D.url=w,D}),Te(w=>!0===w)):Zn(!0)}lineralizeSegments(p,y){let v=[],_=y.root;for(;;){if(v=v.concat(_.segments),0===_.numberOfChildren)return Zn(v);if(_.numberOfChildren>1||!_.children[ri])return Vp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${p.redirectTo}'`));_=_.children[ri]}}applyRedirectCommands(p,y,v){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),p,v)}applyRedirectCreatreUrlTree(p,y,v,_){const E=this.createSegmentGroup(p,y.root,v,_);return new gd(E,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(p,y){const v={};return _s(p,(_,E)=>{if("string"==typeof _&&_.startsWith(":")){const D=_.substring(1);v[E]=y[D]}else v[E]=_}),v}createSegmentGroup(p,y,v,_){const E=this.createSegments(p,y.segments,v,_);let w={};return _s(y.children,(D,O)=>{w[O]=this.createSegmentGroup(p,D,v,_)}),new di(E,w)}createSegments(p,y,v,_){return y.map(E=>E.path.startsWith(":")?this.findPosParam(p,E,_):this.findOrReturn(E,v))}findPosParam(p,y,v){const _=v[y.path.substring(1)];if(!_)throw new Error(`Cannot redirect to '${p}'. Cannot find '${y.path}'.`);return _}findOrReturn(p,y){let v=0;for(const _ of y){if(_.path===p.path)return y.splice(v),_;v++}return p}}function Mb(g){const p={};for(const v of Object.keys(g.children)){const E=Mb(g.children[v]);(E.segments.length>0||E.hasChildren())&&(p[v]=E)}return function wk(g){if(1===g.numberOfChildren&&g.children[ri]){const p=g.children[ri];return new di(g.segments.concat(p.segments),p.children)}return g}(new di(g.segments,p))}class RT{constructor(p){this.path=p,this.route=this.path[this.path.length-1]}}class qg{constructor(p,y){this.component=p,this.route=y}}function xk(g,p,y){const v=g._root;return Qp(v,p?p._root:null,y,[v.value])}function ey(g,p,y){const v=function Sk(g){if(!g)return null;for(let p=g.parent;p;p=p.parent){const y=p.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(p);return(v?v.module.injector:y).get(g)}function Qp(g,p,y,v,_={canDeactivateChecks:[],canActivateChecks:[]}){const E=Vh(p);return g.children.forEach(w=>{(function Ok(g,p,y,v,_={canDeactivateChecks:[],canActivateChecks:[]}){const E=g.value,w=p?p.value:null,D=y?y.getContext(g.value.outlet):null;if(w&&E.routeConfig===w.routeConfig){const O=function Ik(g,p,y){if("function"==typeof y)return y(g,p);switch(y){case"pathParamsChange":return!yd(g.url,p.url);case"pathParamsOrQueryParamsChange":return!yd(g.url,p.url)||!Xl(g.queryParams,p.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yb(g,p)||!Xl(g.queryParams,p.queryParams);default:return!yb(g,p)}}(w,E,E.routeConfig.runGuardsAndResolvers);O?_.canActivateChecks.push(new RT(v)):(E.data=w.data,E._resolvedData=w._resolvedData),Qp(g,p,E.component?D?D.children:null:y,v,_),O&&D&&D.outlet&&D.outlet.isActivated&&_.canDeactivateChecks.push(new qg(D.outlet.component,w))}else w&&qp(p,D,_),_.canActivateChecks.push(new RT(v)),Qp(g,null,E.component?D?D.children:null:y,v,_)})(w,E[w.value.outlet],y,v.concat([w.value]),_),delete E[w.value.outlet]}),_s(E,(w,D)=>qp(w,y.getContext(D),_)),_}function qp(g,p,y){const v=Vh(g),_=g.value;_s(v,(E,w)=>{qp(E,_.component?p?p.children.getContext(w):null:p,y)}),y.canDeactivateChecks.push(new qg(_.component&&p&&p.outlet&&p.outlet.isActivated?p.outlet.component:null,_))}class Bk{}function LT(g){return new fe(p=>p.error(g))}class Vk{constructor(p,y,v,_,E,w){this.rootComponentType=p,this.config=y,this.urlTree=v,this.url=_,this.paramsInheritanceStrategy=E,this.relativeLinkResolution=w}recognize(){const p=Jg(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,p,ri);if(null===y)return null;const v=new zg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ri,this.rootComponentType,null,this.urlTree.root,-1,{}),_=new Lu(v,y),E=new vT(this.url,_);return this.inheritParamsAndData(E._root),E}inheritParamsAndData(p){const y=p.value,v=yT(y,this.paramsInheritanceStrategy);y.params=Object.freeze(v.params),y.data=Object.freeze(v.data),p.children.forEach(_=>this.inheritParamsAndData(_))}processSegmentGroup(p,y,v){return 0===y.segments.length&&y.hasChildren()?this.processChildren(p,y):this.processSegment(p,y,y.segments,v)}processChildren(p,y){const v=[];for(const E of Object.keys(y.children)){const w=y.children[E],D=ST(p,E),O=this.processSegmentGroup(D,w,E);if(null===O)return null;v.push(...O)}const _=NT(v);return function kk(g){g.sort((p,y)=>p.value.outlet===ri?-1:y.value.outlet===ri?1:p.value.outlet.localeCompare(y.value.outlet))}(_),_}processSegment(p,y,v,_){for(const E of p){const w=this.processSegmentAgainstRoute(E,y,v,_);if(null!==w)return w}return TT(y,v,_)?[]:null}processSegmentAgainstRoute(p,y,v,_){if(p.redirectTo||!IT(p,y,v,_))return null;let E,w=[],D=[];if("**"===p.path){const be=v.length>0?nT(v).parameters:{};E=new zg(v,be,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,BT(p),Ja(p),p.component,p,FT(y),jT(y)+v.length,UT(p))}else{const be=Yg(y,p,v);if(!be.matched)return null;w=be.consumedSegments,D=be.remainingSegments,E=new zg(w,be.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,BT(p),Ja(p),p.component,p,FT(y),jT(y)+w.length,UT(p))}const O=function Wk(g){return g.children?g.children:g.loadChildren?g._loadedConfig.routes:[]}(p),{segmentGroup:A,slicedSegments:W}=Jg(y,w,D,O.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution);if(0===W.length&&A.hasChildren()){const be=this.processChildren(O,A);return null===be?null:[new Lu(E,be)]}if(0===O.length&&0===W.length)return[new Lu(E,[])];const q=Ja(p)===_,_e=this.processSegment(O,A,W,q?ri:_);return null===_e?null:[new Lu(E,_e)]}}function Zk(g){const p=g.value.routeConfig;return p&&""===p.path&&void 0===p.redirectTo}function NT(g){const p=[],y=new Set;for(const v of g){if(!Zk(v)){p.push(v);continue}const _=p.find(E=>v.value.routeConfig===E.value.routeConfig);void 0!==_?(_.children.push(...v.children),y.add(_)):p.push(v)}for(const v of y){const _=NT(v.children);p.push(new Lu(v.value,_))}return p.filter(v=>!y.has(v))}function FT(g){let p=g;for(;p._sourceSegment;)p=p._sourceSegment;return p}function jT(g){let p=g,y=p._segmentIndexShift?p._segmentIndexShift:0;for(;p._sourceSegment;)p=p._sourceSegment,y+=p._segmentIndexShift?p._segmentIndexShift:0;return y-1}function BT(g){return g.data||{}}function UT(g){return g.resolve||{}}function VT(g){return[...Object.keys(g),...Object.getOwnPropertySymbols(g)]}function xb(g){return Ml(p=>{const y=g(p);return y?Nn(y).pipe(Te(()=>p)):Zn(p)})}class Xk extends class Jk{shouldDetach(p){return!1}store(p,y){}shouldAttach(p){return!1}retrieve(p){return null}shouldReuseRoute(p,y){return p.routeConfig===y.routeConfig}}{}const Db=new pn("ROUTES");class kT{constructor(p,y,v,_){this.injector=p,this.compiler=y,this.onLoadStartListener=v,this.onLoadEndListener=_}load(p,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const _=this.loadModuleFactory(y.loadChildren).pipe(Te(E=>{this.onLoadEndListener&&this.onLoadEndListener(y);const w=E.create(p);return new bb(rT(w.injector.get(Db,void 0,hr.Self|hr.Optional)).map(wb),w)}),pc(E=>{throw y._loader$=void 0,E}));return y._loader$=new $I(_,()=>new xe).pipe(ZI()),y._loader$}loadModuleFactory(p){return Ql(p()).pipe(Wr(y=>y instanceof rO?Zn(y):Nn(this.compiler.compileModuleAsync(y))))}}class qk{shouldProcessUrl(p){return!0}extract(p){return p}merge(p,y){return p}}function eW(g){throw g}function tW(g,p,y){return p.parse("/")}function WT(g,p){return Zn(null)}const rW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ta=(()=>{class g{constructor(y,v,_,E,w,D,O){this.rootComponentType=y,this.urlSerializer=v,this.rootContexts=_,this.location=E,this.config=O,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xe,this.errorHandler=eW,this.malformedUriErrorHandler=tW,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:WT,afterPreactivation:WT},this.urlHandlingStrategy=new qk,this.routeReuseStrategy=new Xk,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=w.get(Iu),this.console=w.get(BO);const q=w.get(cs);this.isNgZoneEnabled=q instanceof cs&&cs.isInAngularZone(),this.resetConfig(O),this.currentUrlTree=function IV(){return new gd(new di([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new kT(w,D,_e=>this.triggerEvent(new XI(_e)),_e=>this.triggerEvent(new QI(_e))),this.routerState=gT(this.currentUrlTree,this.rootComponentType),this.transitions=new Ha({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const v=this.events;return y.pipe(Ya(_=>0!==_.id),Te(_=>Object.assign(Object.assign({},_),{extractedUrl:this.urlHandlingStrategy.extract(_.rawUrl)})),Ml(_=>{let E=!1,w=!1;return Zn(_).pipe(sa(D=>{this.currentNavigation={id:D.id,initialUrl:D.currentRawUrl,extractedUrl:D.extractedUrl,trigger:D.source,extras:D.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ml(D=>{const O=this.browserUrlTree.toString(),A=!this.navigated||D.extractedUrl.toString()!==O||O!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||A)&&this.urlHandlingStrategy.shouldProcessUrl(D.rawUrl))return ZT(D.source)&&(this.browserUrlTree=D.extractedUrl),Zn(D).pipe(Ml(q=>{const _e=this.transitions.getValue();return v.next(new cb(q.id,this.serializeUrl(q.extractedUrl),q.source,q.restoredState)),_e!==this.transitions.getValue()?Kn:Promise.resolve(q)}),function Mk(g,p,y,v){return Ml(_=>function bk(g,p,y,v,_){return new Ck(g,p,y,v,_).apply()}(g,p,y,_.extractedUrl,v).pipe(Te(E=>Object.assign(Object.assign({},_),{urlAfterRedirects:E}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),sa(q=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:q.urlAfterRedirects})}),function $k(g,p,y,v,_){return Wr(E=>function Uk(g,p,y,v,_="emptyOnly",E="legacy"){try{const w=new Vk(g,p,y,v,_,E).recognize();return null===w?LT(new Bk):Zn(w)}catch(w){return LT(w)}}(g,p,E.urlAfterRedirects,y(E.urlAfterRedirects),v,_).pipe(Te(w=>Object.assign(Object.assign({},E),{targetSnapshot:w}))))}(this.rootComponentType,this.config,q=>this.serializeUrl(q),this.paramsInheritanceStrategy,this.relativeLinkResolution),sa(q=>{if("eager"===this.urlUpdateStrategy){if(!q.extras.skipLocationChange){const be=this.urlHandlingStrategy.merge(q.urlAfterRedirects,q.rawUrl);this.setBrowserUrl(be,q)}this.browserUrlTree=q.urlAfterRedirects}const _e=new gV(q.id,this.serializeUrl(q.extractedUrl),this.serializeUrl(q.urlAfterRedirects),q.targetSnapshot);v.next(_e)}));if(A&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_e,extractedUrl:be,source:We,restoredState:qe,extras:dt}=D,gt=new cb(_e,this.serializeUrl(be),We,qe);v.next(gt);const lt=gT(be,this.rootComponentType).snapshot;return Zn(Object.assign(Object.assign({},D),{targetSnapshot:lt,urlAfterRedirects:be,extras:Object.assign(Object.assign({},dt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=D.rawUrl,D.resolve(null),Kn}),xb(D=>{const{targetSnapshot:O,id:A,extractedUrl:W,rawUrl:q,extras:{skipLocationChange:_e,replaceUrl:be}}=D;return this.hooks.beforePreactivation(O,{navigationId:A,appliedUrlTree:W,rawUrlTree:q,skipLocationChange:!!_e,replaceUrl:!!be})}),sa(D=>{const O=new yV(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(O)}),Te(D=>Object.assign(Object.assign({},D),{guards:xk(D.targetSnapshot,D.currentSnapshot,this.rootContexts)})),function Tk(g,p){return Wr(y=>{const{targetSnapshot:v,currentSnapshot:_,guards:{canActivateChecks:E,canDeactivateChecks:w}}=y;return 0===w.length&&0===E.length?Zn(Object.assign(Object.assign({},y),{guardsResult:!0})):function Ak(g,p,y,v){return Nn(g).pipe(Wr(_=>function jk(g,p,y,v,_){const E=p&&p.routeConfig?p.routeConfig.canDeactivate:null;return E&&0!==E.length?Zn(E.map(D=>{const O=ey(D,p,_);let A;if(function ck(g){return g&&mc(g.canDeactivate)}(O))A=Ql(O.canDeactivate(g,p,y,v));else{if(!mc(O))throw new Error("Invalid CanDeactivate guard");A=Ql(O(g,p,y,v))}return A.pipe(Bh())})).pipe(Yp()):Zn(!0)}(_.component,_.route,y,p,v)),Bh(_=>!0!==_,!0))}(w,v,_,g).pipe(Wr(D=>D&&function sk(g){return"boolean"==typeof g}(D)?function Pk(g,p,y,v){return Nn(p).pipe(Wp(_=>kp(function Lk(g,p){return null!==g&&p&&p(new bV(g)),Zn(!0)}(_.route.parent,v),function Rk(g,p){return null!==g&&p&&p(new wV(g)),Zn(!0)}(_.route,v),function Fk(g,p,y){const v=p[p.length-1],E=p.slice(0,p.length-1).reverse().map(w=>function Dk(g){const p=g.routeConfig?g.routeConfig.canActivateChild:null;return p&&0!==p.length?{node:g,guards:p}:null}(w)).filter(w=>null!==w).map(w=>Vg(()=>Zn(w.guards.map(O=>{const A=ey(O,w.node,y);let W;if(function uk(g){return g&&mc(g.canActivateChild)}(A))W=Ql(A.canActivateChild(v,g));else{if(!mc(A))throw new Error("Invalid CanActivateChild guard");W=Ql(A(v,g))}return W.pipe(Bh())})).pipe(Yp())));return Zn(E).pipe(Yp())}(g,_.path,y),function Nk(g,p,y){const v=p.routeConfig?p.routeConfig.canActivate:null;if(!v||0===v.length)return Zn(!0);const _=v.map(E=>Vg(()=>{const w=ey(E,p,y);let D;if(function lk(g){return g&&mc(g.canActivate)}(w))D=Ql(w.canActivate(p,g));else{if(!mc(w))throw new Error("Invalid CanActivate guard");D=Ql(w(p,g))}return D.pipe(Bh())}));return Zn(_).pipe(Yp())}(g,_.route,y))),Bh(_=>!0!==_,!0))}(v,E,g,p):Zn(D)),Te(D=>Object.assign(Object.assign({},y),{guardsResult:D})))})}(this.ngModule.injector,D=>this.triggerEvent(D)),sa(D=>{if(vd(D.guardsResult)){const A=db(`Redirecting to "${this.serializeUrl(D.guardsResult)}"`);throw A.url=D.guardsResult,A}const O=new vV(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot,!!D.guardsResult);this.triggerEvent(O)}),Ya(D=>!!D.guardsResult||(this.restoreHistory(D),this.cancelNavigationTransition(D,""),!1)),xb(D=>{if(D.guards.canActivateChecks.length)return Zn(D).pipe(sa(O=>{const A=new _V(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);this.triggerEvent(A)}),Ml(O=>{let A=!1;return Zn(O).pipe(function Kk(g,p){return Wr(y=>{const{targetSnapshot:v,guards:{canActivateChecks:_}}=y;if(!_.length)return Zn(y);let E=0;return Nn(_).pipe(Wp(w=>function zk(g,p,y,v){return function Gk(g,p,y,v){const _=VT(g);if(0===_.length)return Zn({});const E={};return Nn(_).pipe(Wr(w=>function Hk(g,p,y,v){const _=ey(g,p,v);return Ql(_.resolve?_.resolve(p,y):_(p,y))}(g[w],p,y,v).pipe(sa(D=>{E[w]=D}))),ub(1),Wr(()=>VT(E).length===_.length?Zn(E):Kn))}(g._resolve,g,p,v).pipe(Te(E=>(g._resolvedData=E,g.data=Object.assign(Object.assign({},g.data),yT(g,y).resolve),null)))}(w.route,v,g,p)),sa(()=>E++),ub(1),Wr(w=>E===_.length?Zn(y):Kn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),sa({next:()=>A=!0,complete:()=>{A||(this.restoreHistory(O),this.cancelNavigationTransition(O,"At least one route resolver didn't emit any value."))}}))}),sa(O=>{const A=new EV(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);this.triggerEvent(A)}))}),xb(D=>{const{targetSnapshot:O,id:A,extractedUrl:W,rawUrl:q,extras:{skipLocationChange:_e,replaceUrl:be}}=D;return this.hooks.afterPreactivation(O,{navigationId:A,appliedUrlTree:W,rawUrlTree:q,skipLocationChange:!!_e,replaceUrl:!!be})}),Te(D=>{const O=function GV(g,p,y){const v=zp(g,p._root,y?y._root:void 0);return new mT(v,p)}(this.routeReuseStrategy,D.targetSnapshot,D.currentRouterState);return Object.assign(Object.assign({},D),{targetRouterState:O})}),sa(D=>{this.currentUrlTree=D.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl),this.routerState=D.targetRouterState,"deferred"===this.urlUpdateStrategy&&(D.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,D),this.browserUrlTree=D.urlAfterRedirects)}),((g,p,y)=>Te(v=>(new ik(p,v.targetRouterState,v.currentRouterState,y).activate(g),v)))(this.rootContexts,this.routeReuseStrategy,D=>this.triggerEvent(D)),sa({next(){E=!0},complete(){E=!0}}),YI(()=>{var D;E||w||this.cancelNavigationTransition(_,`Navigation ID ${_.id} is not equal to the current navigation id ${this.navigationId}`),(null===(D=this.currentNavigation)||void 0===D?void 0:D.id)===_.id&&(this.currentNavigation=null)}),pc(D=>{if(w=!0,function DV(g){return g&&g[eT]}(D)){const O=vd(D.url);O||(this.navigated=!0,this.restoreHistory(_,!0));const A=new JI(_.id,this.serializeUrl(_.extractedUrl),D.message);v.next(A),O?setTimeout(()=>{const W=this.urlHandlingStrategy.merge(D.url,this.rawUrlTree),q={skipLocationChange:_.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ZT(_.source)};this.scheduleNavigation(W,"imperative",null,q,{resolve:_.resolve,reject:_.reject,promise:_.promise})},0):_.resolve(!1)}else{this.restoreHistory(_,!0);const O=new mV(_.id,this.serializeUrl(_.extractedUrl),D);v.next(O);try{_.resolve(this.errorHandler(D))}catch(A){_.reject(A)}}return Kn}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const v="popstate"===y.type?"popstate":"hashchange";"popstate"===v&&setTimeout(()=>{var _;const E={replaceUrl:!0},w=(null===(_=y.state)||void 0===_?void 0:_.navigationId)?y.state:null;if(w){const O=Object.assign({},w);delete O.navigationId,delete O.\u0275routerPageId,0!==Object.keys(O).length&&(E.state=O)}const D=this.parseUrl(y.url);this.scheduleNavigation(D,v,w,E)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){DT(y),this.config=y.map(wb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,v={}){const{relativeTo:_,queryParams:E,fragment:w,queryParamsHandling:D,preserveFragment:O}=v,A=_||this.routerState.root,W=O?this.currentUrlTree.fragment:w;let q=null;switch(D){case"merge":q=Object.assign(Object.assign({},this.currentUrlTree.queryParams),E);break;case"preserve":q=this.currentUrlTree.queryParams;break;default:q=E||null}return null!==q&&(q=this.removeEmptyProps(q)),function JV(g,p,y,v,_){if(0===y.length)return vb(p.root,p.root,p.root,v,_);const E=function XV(g){if("string"==typeof g[0]&&1===g.length&&"/"===g[0])return new bT(!0,0,g);let p=0,y=!1;const v=g.reduce((_,E,w)=>{if("object"==typeof E&&null!=E){if(E.outlets){const D={};return _s(E.outlets,(O,A)=>{D[A]="string"==typeof O?O.split("/"):O}),[..._,{outlets:D}]}if(E.segmentPath)return[..._,E.segmentPath]}return"string"!=typeof E?[..._,E]:0===w?(E.split("/").forEach((D,O)=>{0==O&&"."===D||(0==O&&""===D?y=!0:".."===D?p++:""!=D&&_.push(D))}),_):[..._,E]},[]);return new bT(y,p,v)}(y);if(E.toRoot())return vb(p.root,p.root,new di([],{}),v,_);const w=function QV(g,p,y){if(g.isAbsolute)return new _b(p.root,!0,0);if(-1===y.snapshot._lastPathIndex){const E=y.snapshot._urlSegment;return new _b(E,E===p.root,0)}const v=Gg(g.commands[0])?0:1;return function qV(g,p,y){let v=g,_=p,E=y;for(;E>_;){if(E-=_,v=v.parent,!v)throw new Error("Invalid number of '../'");_=v.segments.length}return new _b(v,!1,_-E)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+v,g.numberOfDoubleDots)}(E,p,g),D=w.processChildren?Hg(w.segmentGroup,w.index,E.commands):CT(w.segmentGroup,w.index,E.commands);return vb(p.root,w.segmentGroup,D,v,_)}(A,this.currentUrlTree,y,q,null!=W?W:null)}navigateByUrl(y,v={skipLocationChange:!1}){const _=vd(y)?y:this.parseUrl(y),E=this.urlHandlingStrategy.merge(_,this.rawUrlTree);return this.scheduleNavigation(E,"imperative",null,v)}navigate(y,v={skipLocationChange:!1}){return function iW(g){for(let p=0;p<g.length;p++){const y=g[p];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${p}`)}}(y),this.navigateByUrl(this.createUrlTree(y,v),v)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let v;try{v=this.urlSerializer.parse(y)}catch(_){v=this.malformedUriErrorHandler(_,this.urlSerializer,y)}return v}isActive(y,v){let _;if(_=!0===v?Object.assign({},rW):!1===v?Object.assign({},nW):v,vd(y))return oT(this.currentUrlTree,y,_);const E=this.parseUrl(y);return oT(this.currentUrlTree,E,_)}removeEmptyProps(y){return Object.keys(y).reduce((v,_)=>{const E=y[_];return null!=E&&(v[_]=E),v},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new Zp(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,v,_,E,w){var D,O;if(this.disposed)return Promise.resolve(!1);let A,W,q;w?(A=w.resolve,W=w.reject,q=w.promise):q=new Promise((We,qe)=>{A=We,W=qe});const _e=++this.navigationId;let be;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(_=this.location.getState()),be=_&&_.\u0275routerPageId?_.\u0275routerPageId:E.replaceUrl||E.skipLocationChange?null!==(D=this.browserPageId)&&void 0!==D?D:0:(null!==(O=this.browserPageId)&&void 0!==O?O:0)+1):be=0,this.setTransition({id:_e,targetPageId:be,source:v,restoredState:_,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:E,resolve:A,reject:W,promise:q,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),q.catch(We=>Promise.reject(We))}setBrowserUrl(y,v){const _=this.urlSerializer.serialize(y),E=Object.assign(Object.assign({},v.extras.state),this.generateNgRouterState(v.id,v.targetPageId));this.location.isCurrentPathEqualTo(_)||v.extras.replaceUrl?this.location.replaceState(_,"",E):this.location.go(_,"",E)}restoreHistory(y,v=!1){var _,E;if("computed"===this.canceledNavigationResolution){const w=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(_=this.currentNavigation)||void 0===_?void 0:_.finalUrl)||0===w?this.currentUrlTree===(null===(E=this.currentNavigation)||void 0===E?void 0:E.finalUrl)&&0===w&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(w)}else"replace"===this.canceledNavigationResolution&&(v&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,v){const _=new JI(y.id,this.serializeUrl(y.extractedUrl),v);this.triggerEvent(_),y.resolve(!1)}generateNgRouterState(y,v){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:v}:{navigationId:y}}}return g.\u0275fac=function(y){H1()},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();function ZT(g){return"imperative"!==g}let ty=(()=>{class g{constructor(y,v,_){this.router=y,this.route=v,this.locationStrategy=_,this.commands=null,this.href=null,this.onChanges=new xe,this.subscription=y.events.subscribe(E=>{E instanceof Zp&&this.updateTargetUrlAndHref()})}set routerLink(y){this.commands=null!=y?Array.isArray(y)?y:[y]:null}ngOnChanges(y){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(y,v,_,E,w){if(0!==y||v||_||E||w||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const D={skipLocationChange:Wh(this.skipLocationChange),replaceUrl:Wh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,D),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Wh(this.preserveFragment)})}}return g.\u0275fac=function(y){return new(y||g)(Lr(Ta),Lr(kh),Lr(jh))},g.\u0275dir=dn({type:g,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(y,v){1&y&&zs("click",function(E){return v.onClick(E.button,E.ctrlKey,E.shiftKey,E.altKey,E.metaKey)}),2&y&&Gl("target",v.target)("href",v.href,Q_)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Ws]}),g})();function Wh(g){return""===g||!!g}class $T{}class KT{preload(p,y){return Zn(null)}}let zT=(()=>{class g{constructor(y,v,_,E){this.router=y,this.injector=_,this.preloadingStrategy=E,this.loader=new kT(_,v,O=>y.triggerEvent(new XI(O)),O=>y.triggerEvent(new QI(O)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ya(y=>y instanceof Zp),Wp(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(Iu);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,v){const _=[];for(const E of v)if(E.loadChildren&&!E.canLoad&&E._loadedConfig){const w=E._loadedConfig;_.push(this.processRoutes(w.module,w.routes))}else E.loadChildren&&!E.canLoad?_.push(this.preloadConfig(y,E)):E.children&&_.push(this.processRoutes(y,E.children));return Nn(_).pipe(cn(),Te(E=>{}))}preloadConfig(y,v){return this.preloadingStrategy.preload(v,()=>(v._loadedConfig?Zn(v._loadedConfig):this.loader.load(y.injector,v)).pipe(Wr(E=>(v._loadedConfig=E,this.processRoutes(E.module,E.routes)))))}}return g.\u0275fac=function(y){return new(y||g)(_n(Ta),_n(UO),_n(Is),_n($T))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})(),Ob=(()=>{class g{constructor(y,v,_={}){this.router=y,this.viewportScroller=v,this.options=_,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},_.scrollPositionRestoration=_.scrollPositionRestoration||"disabled",_.anchorScrolling=_.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof cb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof Zp&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof qI&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,v){this.router.triggerEvent(new qI(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,v))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return g.\u0275fac=function(y){H1()},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();const _d=new pn("ROUTER_CONFIGURATION"),GT=new pn("ROUTER_FORROOT_GUARD"),lW=[kE,{provide:uT,useClass:cT},{provide:Ta,useFactory:function fW(g,p,y,v,_,E,w={},D,O){const A=new Ta(null,g,p,y,v,_,rT(E));return D&&(A.urlHandlingStrategy=D),O&&(A.routeReuseStrategy=O),function pW(g,p){g.errorHandler&&(p.errorHandler=g.errorHandler),g.malformedUriErrorHandler&&(p.malformedUriErrorHandler=g.malformedUriErrorHandler),g.onSameUrlNavigation&&(p.onSameUrlNavigation=g.onSameUrlNavigation),g.paramsInheritanceStrategy&&(p.paramsInheritanceStrategy=g.paramsInheritanceStrategy),g.relativeLinkResolution&&(p.relativeLinkResolution=g.relativeLinkResolution),g.urlUpdateStrategy&&(p.urlUpdateStrategy=g.urlUpdateStrategy),g.canceledNavigationResolution&&(p.canceledNavigationResolution=g.canceledNavigationResolution)}(w,A),w.enableTracing&&A.events.subscribe(W=>{var q,_e;null===(q=console.group)||void 0===q||q.call(console,`Router Event: ${W.constructor.name}`),console.log(W.toString()),console.log(W),null===(_e=console.groupEnd)||void 0===_e||_e.call(console)}),A},deps:[uT,Jp,kE,Is,UO,Db,_d,[class Qk{},new lc],[class Yk{},new lc]]},Jp,{provide:kh,useFactory:function mW(g){return g.routerState.root},deps:[Ta]},zT,KT,class aW{preload(p,y){return y().pipe(pc(()=>Zn(null)))}},{provide:_d,useValue:{enableTracing:!1}}];function uW(){return new $O("Router",Ta)}let HT=(()=>{class g{constructor(y,v){}static forRoot(y,v){return{ngModule:g,providers:[lW,YT(y),{provide:GT,useFactory:hW,deps:[[Ta,new lc,new op]]},{provide:_d,useValue:v||{}},{provide:jh,useFactory:dW,deps:[md,[new Wm(VE),new lc],_d]},{provide:Ob,useFactory:cW,deps:[Ta,yU,_d]},{provide:$T,useExisting:v&&v.preloadingStrategy?v.preloadingStrategy:KT},{provide:$O,multi:!0,useFactory:uW},[Ib,{provide:_g,multi:!0,useFactory:gW,deps:[Ib]},{provide:JT,useFactory:yW,deps:[Ib]},{provide:jO,multi:!0,useExisting:JT}]]}}static forChild(y){return{ngModule:g,providers:[YT(y)]}}}return g.\u0275fac=function(y){return new(y||g)(_n(GT,8),_n(Ta,8))},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({}),g})();function cW(g,p,y){return y.scrollOffset&&p.setOffset(y.scrollOffset),new Ob(g,p,y)}function dW(g,p,y={}){return y.useHash?new Jj(g,p):new cI(g,p)}function hW(g){return"guarded"}function YT(g){return[{provide:I4,multi:!0,useValue:g},{provide:Db,multi:!0,useValue:g}]}let Ib=(()=>{class g{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new xe}appInitializer(){return this.injector.get(Gj,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let v=null;const _=new Promise(D=>v=D),E=this.injector.get(Ta),w=this.injector.get(_d);return"disabled"===w.initialNavigation?(E.setUpLocationChangeListener(),v(!0)):"enabled"===w.initialNavigation||"enabledBlocking"===w.initialNavigation?(E.hooks.afterPreactivation=()=>this.initNavigation?Zn(null):(this.initNavigation=!0,v(!0),this.resultOfPreactivationDone),E.initialNavigation()):v(!0),_})}bootstrapListener(y){const v=this.injector.get(_d),_=this.injector.get(zT),E=this.injector.get(Ob),w=this.injector.get(Ta),D=this.injector.get(Eg);y===D.components[0]&&(("enabledNonBlocking"===v.initialNavigation||void 0===v.initialNavigation)&&w.initialNavigation(),_.setUpPreloading(),E.init(),w.resetRootComponentType(D.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return g.\u0275fac=function(y){return new(y||g)(_n(Is))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();function gW(g){return g.appInitializer.bind(g)}function yW(g){return g.bootstrapListener.bind(g)}const JT=new pn("Router Initializer");let UA=(()=>{class g{}return g.\u0275fac=function(y){return new(y||g)},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({}),g})(),vZ=(()=>{class g{}return g.\u0275fac=function(y){return new(y||g)},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({imports:[[UA]]}),g})(),_Z=(()=>{class g{}return g.\u0275fac=function(y){return new(y||g)},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({imports:[vZ]}),g})();var g,bZ=(g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)},function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}),CZ=function(g){function p(y){var v=this.constructor,_=g.call(this,y)||this;return Object.defineProperty(_,"name",{value:v.name,enumerable:!1,configurable:!0}),function EZ(g,p){var y=Object.setPrototypeOf;y?y(g,p):g.__proto__=p}(_,v.prototype),function nP(g,p){void 0===p&&(p=g.constructor);var y=Error.captureStackTrace;y&&y(g,p)}(_),_}return bZ(p,g),p}(Error),MZ=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),xZ=function(g){function p(y){void 0===y&&(y=void 0);var v=g.call(this,y)||this;return v.message=y,v}return MZ(p,g),p.prototype.getKind=function(){return this.constructor.kind},p.kind="Exception",p}(CZ);const aa=xZ;var DZ=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),SZ=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return DZ(p,g),p.kind="ArgumentException",p}(aa);const Ao=SZ;var OZ=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),IZ=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return OZ(p,g),p.kind="IllegalArgumentException",p}(aa);const un=IZ;var TZ=function(){function g(p){if(this.binarizer=p,null===p)throw new un("Binarizer must be non-null.")}return g.prototype.getWidth=function(){return this.binarizer.getWidth()},g.prototype.getHeight=function(){return this.binarizer.getHeight()},g.prototype.getBlackRow=function(p,y){return this.binarizer.getBlackRow(p,y)},g.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},g.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},g.prototype.crop=function(p,y,v,_){var E=this.binarizer.getLuminanceSource().crop(p,y,v,_);return new g(this.binarizer.createBinarizer(E))},g.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},g.prototype.rotateCounterClockwise=function(){var p=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new g(this.binarizer.createBinarizer(p))},g.prototype.rotateCounterClockwise45=function(){var p=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new g(this.binarizer.createBinarizer(p))},g.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(p){return""}},g}();const iP=TZ;var AZ=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),PZ=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return AZ(p,g),p.getChecksumInstance=function(){return new p},p.kind="ChecksumException",p}(aa);const $o=PZ;var RZ=function(){function g(p){this.source=p}return g.prototype.getLuminanceSource=function(){return this.source},g.prototype.getWidth=function(){return this.source.getWidth()},g.prototype.getHeight=function(){return this.source.getHeight()},g}();const LZ=RZ;var NZ=function(){function g(){}return g.arraycopy=function(p,y,v,_,E){for(;E--;)v[_++]=p[y++]},g.currentTimeMillis=function(){return Date.now()},g}();const Vi=NZ;var FZ=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),jZ=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return FZ(p,g),p.kind="IndexOutOfBoundsException",p}(aa);const qb=jZ;var BZ=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),UZ=function(g){function p(y,v){void 0===y&&(y=void 0),void 0===v&&(v=void 0);var _=g.call(this,v)||this;return _.index=y,_.message=v,_}return BZ(p,g),p.kind="ArrayIndexOutOfBoundsException",p}(qb);const oP=UZ;var kZ=function(){function g(){}return g.fill=function(p,y){for(var v=0,_=p.length;v<_;v++)p[v]=y},g.fillWithin=function(p,y,v,_){g.rangeCheck(p.length,y,v);for(var E=y;E<v;E++)p[E]=_},g.rangeCheck=function(p,y,v){if(y>v)throw new un("fromIndex("+y+") > toIndex("+v+")");if(y<0)throw new oP(y);if(v>p)throw new oP(v)},g.asList=function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];return p},g.create=function(p,y,v){return Array.from({length:p}).map(function(E){return Array.from({length:y}).fill(v)})},g.createInt32Array=function(p,y,v){return Array.from({length:p}).map(function(E){return Int32Array.from({length:y}).fill(v)})},g.equals=function(p,y){if(!(p&&y&&p.length&&y.length&&p.length===y.length))return!1;for(var v=0,_=p.length;v<_;v++)if(p[v]!==y[v])return!1;return!0},g.hashCode=function(p){var y,v;if(null===p)return 0;var _=1;try{for(var E=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),w=E.next();!w.done;w=E.next())_=31*_+w.value}catch(O){y={error:O}}finally{try{w&&!w.done&&(v=E.return)&&v.call(E)}finally{if(y)throw y.error}}return _},g.fillUint8Array=function(p,y){for(var v=0;v!==p.length;v++)p[v]=y},g.copyOf=function(p,y){return p.slice(0,y)},g.copyOfUint8Array=function(p,y){if(p.length<=y){var v=new Uint8Array(y);return v.set(p),v}return p.slice(0,y)},g.copyOfRange=function(p,y,v){var _=v-y,E=new Int32Array(_);return Vi.arraycopy(p,y,E,0,_),E},g.binarySearch=function(p,y,v){void 0===v&&(v=g.numberComparator);for(var _=0,E=p.length-1;_<=E;){var w=E+_>>1,D=v(y,p[w]);if(D>0)_=w+1;else{if(!(D<0))return w;E=w-1}}return-_-1},g.numberComparator=function(p,y){return p-y},g}();const la=kZ;var WZ=function(){function g(){}return g.numberOfTrailingZeros=function(p){var y;if(0===p)return 32;var v=31;return 0!=(y=p<<16)&&(v-=16,p=y),0!=(y=p<<8)&&(v-=8,p=y),0!=(y=p<<4)&&(v-=4,p=y),0!=(y=p<<2)&&(v-=2,p=y),v-(p<<1>>>31)},g.numberOfLeadingZeros=function(p){if(0===p)return 32;var y=1;return p>>>16==0&&(y+=16,p<<=16),p>>>24==0&&(y+=8,p<<=8),p>>>28==0&&(y+=4,p<<=4),p>>>30==0&&(y+=2,p<<=2),y-(p>>>31)},g.toHexString=function(p){return p.toString(16)},g.toBinaryString=function(p){return String(parseInt(String(p),2))},g.bitCount=function(p){return p=(p=(858993459&(p-=p>>>1&1431655765))+(p>>>2&858993459))+(p>>>4)&252645135,63&(p+=p>>>8)+(p>>>16)},g.truncDivision=function(p,y){return Math.trunc(p/y)},g.parseInt=function(p,y){return void 0===y&&(y=void 0),parseInt(p,y)},g.MIN_VALUE_32_BITS=-2147483648,g.MAX_VALUE=Number.MAX_SAFE_INTEGER,g}();const hi=WZ;var ZZ=function(){function g(p,y){void 0===p?(this.size=0,this.bits=new Int32Array(1)):(this.size=p,this.bits=null==y?g.makeArray(p):y)}return g.prototype.getSize=function(){return this.size},g.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},g.prototype.ensureCapacity=function(p){if(p>32*this.bits.length){var y=g.makeArray(p);Vi.arraycopy(this.bits,0,y,0,this.bits.length),this.bits=y}},g.prototype.get=function(p){return 0!=(this.bits[Math.floor(p/32)]&1<<(31&p))},g.prototype.set=function(p){this.bits[Math.floor(p/32)]|=1<<(31&p)},g.prototype.flip=function(p){this.bits[Math.floor(p/32)]^=1<<(31&p)},g.prototype.getNextSet=function(p){var y=this.size;if(p>=y)return y;var v=this.bits,_=Math.floor(p/32),E=v[_];E&=~((1<<(31&p))-1);for(var w=v.length;0===E;){if(++_===w)return y;E=v[_]}var D=32*_+hi.numberOfTrailingZeros(E);return D>y?y:D},g.prototype.getNextUnset=function(p){var y=this.size;if(p>=y)return y;var v=this.bits,_=Math.floor(p/32),E=~v[_];E&=~((1<<(31&p))-1);for(var w=v.length;0===E;){if(++_===w)return y;E=~v[_]}var D=32*_+hi.numberOfTrailingZeros(E);return D>y?y:D},g.prototype.setBulk=function(p,y){this.bits[Math.floor(p/32)]=y},g.prototype.setRange=function(p,y){if(y<p||p<0||y>this.size)throw new un;if(y!==p){y--;for(var v=Math.floor(p/32),_=Math.floor(y/32),E=this.bits,w=v;w<=_;w++)E[w]|=(2<<(w<_?31:31&y))-(1<<(w>v?0:31&p))}},g.prototype.clear=function(){for(var p=this.bits.length,y=this.bits,v=0;v<p;v++)y[v]=0},g.prototype.isRange=function(p,y,v){if(y<p||p<0||y>this.size)throw new un;if(y===p)return!0;y--;for(var _=Math.floor(p/32),E=Math.floor(y/32),w=this.bits,D=_;D<=E;D++){var W=(2<<(D<E?31:31&y))-(1<<(D>_?0:31&p))&4294967295;if((w[D]&W)!==(v?W:0))return!1}return!0},g.prototype.appendBit=function(p){this.ensureCapacity(this.size+1),p&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},g.prototype.appendBits=function(p,y){if(y<0||y>32)throw new un("Num bits must be between 0 and 32");this.ensureCapacity(this.size+y);for(var v=y;v>0;v--)this.appendBit(1==(p>>v-1&1))},g.prototype.appendBitArray=function(p){var y=p.size;this.ensureCapacity(this.size+y);for(var v=0;v<y;v++)this.appendBit(p.get(v))},g.prototype.xor=function(p){if(this.size!==p.size)throw new un("Sizes don't match");for(var y=this.bits,v=0,_=y.length;v<_;v++)y[v]^=p.bits[v]},g.prototype.toBytes=function(p,y,v,_){for(var E=0;E<_;E++){for(var w=0,D=0;D<8;D++)this.get(p)&&(w|=1<<7-D),p++;y[v+E]=w}},g.prototype.getBitArray=function(){return this.bits},g.prototype.reverse=function(){for(var p=new Int32Array(this.bits.length),y=Math.floor((this.size-1)/32),v=y+1,_=this.bits,E=0;E<v;E++){var w=_[E];p[y-E]=w=(w=(w=(w=(w=w>>1&1431655765|(1431655765&w)<<1)>>2&858993459|(858993459&w)<<2)>>4&252645135|(252645135&w)<<4)>>8&16711935|(16711935&w)<<8)>>16&65535|(65535&w)<<16}if(this.size!==32*v){var D=32*v-this.size,O=p[0]>>>D;for(E=1;E<v;E++){var A=p[E];p[E-1]=O|=A<<32-D,O=A>>>D}p[v-1]=O}this.bits=p},g.makeArray=function(p){return new Int32Array(Math.floor((p+31)/32))},g.prototype.equals=function(p){return p instanceof g&&(this.size===p.size&&la.equals(this.bits,p.bits))},g.prototype.hashCode=function(){return 31*this.size+la.hashCode(this.bits)},g.prototype.toString=function(){for(var p="",y=0,v=this.size;y<v;y++)0==(7&y)&&(p+=" "),p+=this.get(y)?"X":".";return p},g.prototype.clone=function(){return new g(this.size,this.bits.slice())},g}();const ds=ZZ;var dy=(()=>(function(g){g[g.OTHER=0]="OTHER",g[g.PURE_BARCODE=1]="PURE_BARCODE",g[g.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",g[g.TRY_HARDER=3]="TRY_HARDER",g[g.CHARACTER_SET=4]="CHARACTER_SET",g[g.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",g[g.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",g[g.ASSUME_GS1=7]="ASSUME_GS1",g[g.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",g[g.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",g[g.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(dy||(dy={})),dy))();const Ci=dy;var $Z=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),KZ=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return $Z(p,g),p.getFormatInstance=function(){return new p},p.kind="FormatException",p}(aa);const Hr=KZ;var zZ=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},wi=(()=>(function(g){g[g.Cp437=0]="Cp437",g[g.ISO8859_1=1]="ISO8859_1",g[g.ISO8859_2=2]="ISO8859_2",g[g.ISO8859_3=3]="ISO8859_3",g[g.ISO8859_4=4]="ISO8859_4",g[g.ISO8859_5=5]="ISO8859_5",g[g.ISO8859_6=6]="ISO8859_6",g[g.ISO8859_7=7]="ISO8859_7",g[g.ISO8859_8=8]="ISO8859_8",g[g.ISO8859_9=9]="ISO8859_9",g[g.ISO8859_10=10]="ISO8859_10",g[g.ISO8859_11=11]="ISO8859_11",g[g.ISO8859_13=12]="ISO8859_13",g[g.ISO8859_14=13]="ISO8859_14",g[g.ISO8859_15=14]="ISO8859_15",g[g.ISO8859_16=15]="ISO8859_16",g[g.SJIS=16]="SJIS",g[g.Cp1250=17]="Cp1250",g[g.Cp1251=18]="Cp1251",g[g.Cp1252=19]="Cp1252",g[g.Cp1256=20]="Cp1256",g[g.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",g[g.UTF8=22]="UTF8",g[g.ASCII=23]="ASCII",g[g.Big5=24]="Big5",g[g.GB18030=25]="GB18030",g[g.EUC_KR=26]="EUC_KR"}(wi||(wi={})),wi))(),GZ=function(){function g(p,y,v){for(var _,E,w=[],D=3;D<arguments.length;D++)w[D-3]=arguments[D];this.valueIdentifier=p,this.name=v,this.values="number"==typeof y?Int32Array.from([y]):y,this.otherEncodingNames=w,g.VALUE_IDENTIFIER_TO_ECI.set(p,this),g.NAME_TO_ECI.set(v,this);for(var O=this.values,A=0,W=O.length;A!==W;A++){var q=O[A];g.VALUES_TO_ECI.set(q,this)}try{for(var _e=zZ(w),be=_e.next();!be.done;be=_e.next()){var We=be.value;g.NAME_TO_ECI.set(We,this)}}catch(qe){_={error:qe}}finally{try{be&&!be.done&&(E=_e.return)&&E.call(_e)}finally{if(_)throw _.error}}}return g.prototype.getValueIdentifier=function(){return this.valueIdentifier},g.prototype.getName=function(){return this.name},g.prototype.getValue=function(){return this.values[0]},g.getCharacterSetECIByValue=function(p){if(p<0||p>=900)throw new Hr("incorect value");var y=g.VALUES_TO_ECI.get(p);if(void 0===y)throw new Hr("incorect value");return y},g.getCharacterSetECIByName=function(p){var y=g.NAME_TO_ECI.get(p);if(void 0===y)throw new Hr("incorect value");return y},g.prototype.equals=function(p){if(!(p instanceof g))return!1;var y=p;return this.getName()===y.getName()},g.VALUE_IDENTIFIER_TO_ECI=new Map,g.VALUES_TO_ECI=new Map,g.NAME_TO_ECI=new Map,g.Cp437=new g(wi.Cp437,Int32Array.from([0,2]),"Cp437"),g.ISO8859_1=new g(wi.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),g.ISO8859_2=new g(wi.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),g.ISO8859_3=new g(wi.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),g.ISO8859_4=new g(wi.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),g.ISO8859_5=new g(wi.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),g.ISO8859_6=new g(wi.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),g.ISO8859_7=new g(wi.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),g.ISO8859_8=new g(wi.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),g.ISO8859_9=new g(wi.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),g.ISO8859_10=new g(wi.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),g.ISO8859_11=new g(wi.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),g.ISO8859_13=new g(wi.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),g.ISO8859_14=new g(wi.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),g.ISO8859_15=new g(wi.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),g.ISO8859_16=new g(wi.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),g.SJIS=new g(wi.SJIS,20,"SJIS","Shift_JIS"),g.Cp1250=new g(wi.Cp1250,21,"Cp1250","windows-1250"),g.Cp1251=new g(wi.Cp1251,22,"Cp1251","windows-1251"),g.Cp1252=new g(wi.Cp1252,23,"Cp1252","windows-1252"),g.Cp1256=new g(wi.Cp1256,24,"Cp1256","windows-1256"),g.UnicodeBigUnmarked=new g(wi.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),g.UTF8=new g(wi.UTF8,26,"UTF8","UTF-8"),g.ASCII=new g(wi.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),g.Big5=new g(wi.Big5,28,"Big5"),g.GB18030=new g(wi.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),g.EUC_KR=new g(wi.EUC_KR,30,"EUC_KR","EUC-KR"),g}();const qo=GZ;var HZ=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),YZ=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return HZ(p,g),p.kind="UnsupportedOperationException",p}(aa);const hy=YZ;var JZ=function(){function g(){}return g.decode=function(p,y){var v=this.encodingName(y);return this.customDecoder?this.customDecoder(p,v):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(v)?this.decodeFallback(p,v):new TextDecoder(v).decode(p)},g.shouldDecodeOnFallback=function(p){return!g.isBrowser()&&"ISO-8859-1"===p},g.encode=function(p,y){var v=this.encodingName(y);return this.customEncoder?this.customEncoder(p,v):"undefined"==typeof TextEncoder?this.encodeFallback(p):(new TextEncoder).encode(p)},g.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},g.encodingName=function(p){return"string"==typeof p?p:p.getName()},g.encodingCharacterSet=function(p){return p instanceof qo?p:qo.getCharacterSetECIByName(p)},g.decodeFallback=function(p,y){var v=this.encodingCharacterSet(y);if(g.isDecodeFallbackSupported(v)){for(var _="",E=0,w=p.length;E<w;E++){var D=p[E].toString(16);D.length<2&&(D="0"+D),_+="%"+D}return decodeURIComponent(_)}if(v.equals(qo.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(p.buffer));throw new hy("Encoding "+this.encodingName(y)+" not supported by fallback.")},g.isDecodeFallbackSupported=function(p){return p.equals(qo.UTF8)||p.equals(qo.ISO8859_1)||p.equals(qo.ASCII)},g.encodeFallback=function(p){for(var v=btoa(unescape(encodeURIComponent(p))).split(""),_=[],E=0;E<v.length;E++)_.push(v[E].charCodeAt(0));return new Uint8Array(_)},g}();const eu=JZ;var XZ=function(){function g(){}return g.castAsNonUtf8Char=function(p,y){void 0===y&&(y=null);var v=y?y.getName():this.ISO88591;return eu.decode(new Uint8Array([p]),v)},g.guessEncoding=function(p,y){if(null!=y&&void 0!==y.get(Ci.CHARACTER_SET))return y.get(Ci.CHARACTER_SET).toString();for(var v=p.length,_=!0,E=!0,w=!0,D=0,O=0,A=0,W=0,q=0,_e=0,be=0,We=0,qe=0,dt=0,gt=0,lt=p.length>3&&239===p[0]&&187===p[1]&&191===p[2],Tt=0;Tt<v&&(_||E||w);Tt++){var Rt=255&p[Tt];w&&(D>0?0==(128&Rt)?w=!1:D--:0!=(128&Rt)&&(0==(64&Rt)?w=!1:(D++,0==(32&Rt)?O++:(D++,0==(16&Rt)?A++:(D++,0==(8&Rt)?W++:w=!1))))),_&&(Rt>127&&Rt<160?_=!1:Rt>159&&(Rt<192||215===Rt||247===Rt)&&gt++),E&&(q>0?Rt<64||127===Rt||Rt>252?E=!1:q--:128===Rt||160===Rt||Rt>239?E=!1:Rt>160&&Rt<224?(_e++,We=0,++be>qe&&(qe=be)):Rt>127?(q++,be=0,++We>dt&&(dt=We)):(be=0,We=0))}return w&&D>0&&(w=!1),E&&q>0&&(E=!1),w&&(lt||O+A+W>0)?g.UTF8:E&&(g.ASSUME_SHIFT_JIS||qe>=3||dt>=3)?g.SHIFT_JIS:_&&E?2===qe&&2===_e||10*gt>=v?g.SHIFT_JIS:g.ISO88591:_?g.ISO88591:E?g.SHIFT_JIS:w?g.UTF8:g.PLATFORM_DEFAULT_ENCODING},g.format=function(p){for(var y=[],v=1;v<arguments.length;v++)y[v-1]=arguments[v];var _=-1;function E(D,O,A,W,q,_e){if("%%"===D)return"%";if(void 0!==y[++_]){D=W?parseInt(W.substr(1)):void 0;var We,be=q?parseInt(q.substr(1)):void 0;switch(_e){case"s":We=y[_];break;case"c":We=y[_][0];break;case"f":We=parseFloat(y[_]).toFixed(D);break;case"p":We=parseFloat(y[_]).toPrecision(D);break;case"e":We=parseFloat(y[_]).toExponential(D);break;case"x":We=parseInt(y[_]).toString(be||16);break;case"d":We=parseFloat(parseInt(y[_],be||10).toPrecision(D)).toFixed(0)}We="object"==typeof We?JSON.stringify(We):(+We).toString(be);for(var qe=parseInt(A),dt=A&&A[0]+""=="0"?"0":" ";We.length<qe;)We=void 0!==O?We+dt:dt+We;return We}}var w=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return p.replace(w,E)},g.getBytes=function(p,y){return eu.encode(p,y)},g.getCharCode=function(p,y){return void 0===y&&(y=0),p.charCodeAt(y)},g.getCharAt=function(p){return String.fromCharCode(p)},g.SHIFT_JIS=qo.SJIS.getName(),g.GB2312="GB2312",g.ISO88591=qo.ISO8859_1.getName(),g.EUC_JP="EUC_JP",g.UTF8=qo.UTF8.getName(),g.PLATFORM_DEFAULT_ENCODING=g.UTF8,g.ASSUME_SHIFT_JIS=!1,g}();const Fi=XZ;var QZ=function(){function g(p){void 0===p&&(p=""),this.value=p}return g.prototype.enableDecoding=function(p){return this.encoding=p,this},g.prototype.append=function(p){return this.value+="string"==typeof p?p.toString():this.encoding?Fi.castAsNonUtf8Char(p,this.encoding):String.fromCharCode(p),this},g.prototype.appendChars=function(p,y,v){for(var _=y;y<y+v;_++)this.append(p[_]);return this},g.prototype.length=function(){return this.value.length},g.prototype.charAt=function(p){return this.value.charAt(p)},g.prototype.deleteCharAt=function(p){this.value=this.value.substr(0,p)+this.value.substring(p+1)},g.prototype.setCharAt=function(p,y){this.value=this.value.substr(0,p)+y+this.value.substr(p+1)},g.prototype.substring=function(p,y){return this.value.substring(p,y)},g.prototype.setLengthToZero=function(){this.value=""},g.prototype.toString=function(){return this.value},g.prototype.insert=function(p,y){this.value=this.value.substr(0,p)+y+this.value.substr(p+y.length)},g}();const Ai=QZ;var qZ=function(){function g(p,y,v,_){if(this.width=p,this.height=y,this.rowSize=v,this.bits=_,null==y&&(y=p),this.height=y,p<1||y<1)throw new un("Both dimensions must be greater than 0");null==v&&(v=Math.floor((p+31)/32)),this.rowSize=v,null==_&&(this.bits=new Int32Array(this.rowSize*this.height))}return g.parseFromBooleanArray=function(p){for(var y=p.length,v=p[0].length,_=new g(v,y),E=0;E<y;E++)for(var w=p[E],D=0;D<v;D++)w[D]&&_.set(D,E);return _},g.parseFromString=function(p,y,v){if(null===p)throw new un("stringRepresentation cannot be null");for(var _=new Array(p.length),E=0,w=0,D=-1,O=0,A=0;A<p.length;)if("\n"===p.charAt(A)||"\r"===p.charAt(A)){if(E>w){if(-1===D)D=E-w;else if(E-w!==D)throw new un("row lengths do not match");w=E,O++}A++}else if(p.substring(A,A+y.length)===y)A+=y.length,_[E]=!0,E++;else{if(p.substring(A,A+v.length)!==v)throw new un("illegal character encountered: "+p.substring(A));A+=v.length,_[E]=!1,E++}if(E>w){if(-1===D)D=E-w;else if(E-w!==D)throw new un("row lengths do not match");O++}for(var W=new g(D,O),q=0;q<E;q++)_[q]&&W.set(Math.floor(q%D),Math.floor(q/D));return W},g.prototype.get=function(p,y){var v=y*this.rowSize+Math.floor(p/32);return 0!=(this.bits[v]>>>(31&p)&1)},g.prototype.set=function(p,y){var v=y*this.rowSize+Math.floor(p/32);this.bits[v]|=1<<(31&p)&4294967295},g.prototype.unset=function(p,y){var v=y*this.rowSize+Math.floor(p/32);this.bits[v]&=~(1<<(31&p)&4294967295)},g.prototype.flip=function(p,y){var v=y*this.rowSize+Math.floor(p/32);this.bits[v]^=1<<(31&p)&4294967295},g.prototype.xor=function(p){if(this.width!==p.getWidth()||this.height!==p.getHeight()||this.rowSize!==p.getRowSize())throw new un("input matrix dimensions do not match");for(var y=new ds(Math.floor(this.width/32)+1),v=this.rowSize,_=this.bits,E=0,w=this.height;E<w;E++)for(var D=E*v,O=p.getRow(E,y).getBitArray(),A=0;A<v;A++)_[D+A]^=O[A]},g.prototype.clear=function(){for(var p=this.bits,y=p.length,v=0;v<y;v++)p[v]=0},g.prototype.setRegion=function(p,y,v,_){if(y<0||p<0)throw new un("Left and top must be nonnegative");if(_<1||v<1)throw new un("Height and width must be at least 1");var E=p+v,w=y+_;if(w>this.height||E>this.width)throw new un("The region must fit inside the matrix");for(var D=this.rowSize,O=this.bits,A=y;A<w;A++)for(var W=A*D,q=p;q<E;q++)O[W+Math.floor(q/32)]|=1<<(31&q)&4294967295},g.prototype.getRow=function(p,y){null==y||y.getSize()<this.width?y=new ds(this.width):y.clear();for(var v=this.rowSize,_=this.bits,E=p*v,w=0;w<v;w++)y.setBulk(32*w,_[E+w]);return y},g.prototype.setRow=function(p,y){Vi.arraycopy(y.getBitArray(),0,this.bits,p*this.rowSize,this.rowSize)},g.prototype.rotate180=function(){for(var p=this.getWidth(),y=this.getHeight(),v=new ds(p),_=new ds(p),E=0,w=Math.floor((y+1)/2);E<w;E++)v=this.getRow(E,v),_=this.getRow(y-1-E,_),v.reverse(),_.reverse(),this.setRow(E,_),this.setRow(y-1-E,v)},g.prototype.getEnclosingRectangle=function(){for(var y=this.height,v=this.rowSize,_=this.bits,E=this.width,w=y,D=-1,O=-1,A=0;A<y;A++)for(var W=0;W<v;W++){var q=_[A*v+W];if(0!==q){if(A<w&&(w=A),A>O&&(O=A),32*W<E){for(var _e=0;0==(q<<31-_e&4294967295);)_e++;32*W+_e<E&&(E=32*W+_e)}if(32*W+31>D){for(_e=31;q>>>_e==0;)_e--;32*W+_e>D&&(D=32*W+_e)}}}return D<E||O<w?null:Int32Array.from([E,w,D-E+1,O-w+1])},g.prototype.getTopLeftOnBit=function(){for(var p=this.rowSize,y=this.bits,v=0;v<y.length&&0===y[v];)v++;if(v===y.length)return null;for(var _=v/p,E=v%p*32,w=y[v],D=0;0==(w<<31-D&4294967295);)D++;return Int32Array.from([E+=D,_])},g.prototype.getBottomRightOnBit=function(){for(var p=this.rowSize,y=this.bits,v=y.length-1;v>=0&&0===y[v];)v--;if(v<0)return null;for(var _=Math.floor(v/p),E=32*Math.floor(v%p),w=y[v],D=31;w>>>D==0;)D--;return Int32Array.from([E+=D,_])},g.prototype.getWidth=function(){return this.width},g.prototype.getHeight=function(){return this.height},g.prototype.getRowSize=function(){return this.rowSize},g.prototype.equals=function(p){return p instanceof g&&(this.width===p.width&&this.height===p.height&&this.rowSize===p.rowSize&&la.equals(this.bits,p.bits))},g.prototype.hashCode=function(){var p=this.width;return 31*(p=31*(p=31*(p=31*p+this.width)+this.height)+this.rowSize)+la.hashCode(this.bits)},g.prototype.toString=function(p,y,v){return void 0===p&&(p="X "),void 0===y&&(y="  "),void 0===v&&(v="\n"),this.buildToString(p,y,v)},g.prototype.buildToString=function(p,y,v){for(var _=new Ai,E=0,w=this.height;E<w;E++){for(var D=0,O=this.width;D<O;D++)_.append(this.get(D,E)?p:y);_.append(v)}return _.toString()},g.prototype.clone=function(){return new g(this.width,this.height,this.rowSize,this.bits.slice())},g}();const Xa=qZ;var e$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),t$=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return e$(p,g),p.getNotFoundInstance=function(){return new p},p.kind="NotFoundException",p}(aa);const Cr=t$;var r$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),n$=function(g){function p(y){var v=g.call(this,y)||this;return v.luminances=p.EMPTY,v.buckets=new Int32Array(p.LUMINANCE_BUCKETS),v}return r$(p,g),p.prototype.getBlackRow=function(y,v){var _=this.getLuminanceSource(),E=_.getWidth();null==v||v.getSize()<E?v=new ds(E):v.clear(),this.initArrays(E);for(var w=_.getRow(y,this.luminances),D=this.buckets,O=0;O<E;O++)D[(255&w[O])>>p.LUMINANCE_SHIFT]++;var A=p.estimateBlackPoint(D);if(E<3)for(O=0;O<E;O++)(255&w[O])<A&&v.set(O);else{var W=255&w[0],q=255&w[1];for(O=1;O<E-1;O++){var _e=255&w[O+1];(4*q-W-_e)/2<A&&v.set(O),W=q,q=_e}}return v},p.prototype.getBlackMatrix=function(){var y=this.getLuminanceSource(),v=y.getWidth(),_=y.getHeight(),E=new Xa(v,_);this.initArrays(v);for(var w=this.buckets,D=1;D<5;D++)for(var O=Math.floor(_*D/5),A=y.getRow(O,this.luminances),W=Math.floor(4*v/5),q=Math.floor(v/5);q<W;q++)w[(255&A[q])>>p.LUMINANCE_SHIFT]++;var be=p.estimateBlackPoint(w),We=y.getMatrix();for(D=0;D<_;D++){var qe=D*v;for(q=0;q<v;q++)(255&We[qe+q])<be&&E.set(q,D)}return E},p.prototype.createBinarizer=function(y){return new p(y)},p.prototype.initArrays=function(y){this.luminances.length<y&&(this.luminances=new Uint8ClampedArray(y));for(var v=this.buckets,_=0;_<p.LUMINANCE_BUCKETS;_++)v[_]=0},p.estimateBlackPoint=function(y){for(var v=y.length,_=0,E=0,w=0,D=0;D<v;D++)y[D]>w&&(E=D,w=y[D]),y[D]>_&&(_=y[D]);var O=0,A=0;for(D=0;D<v;D++){var W=D-E;(q=y[D]*W*W)>A&&(O=D,A=q)}if(E>O){var _e=E;E=O,O=_e}if(O-E<=v/16)throw new Cr;var be=O-1,We=-1;for(D=O-1;D>E;D--){var q,qe=D-E;(q=qe*qe*(O-D)*(_-y[D]))>We&&(be=D,We=q)}return be<<p.LUMINANCE_SHIFT},p.LUMINANCE_SHIFT=8-(p.LUMINANCE_BITS=5),p.LUMINANCE_BUCKETS=1<<p.LUMINANCE_BITS,p.EMPTY=Uint8ClampedArray.from([0]),p}(LZ);const i$=n$;var o$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),s$=function(g){function p(y){var v=g.call(this,y)||this;return v.matrix=null,v}return o$(p,g),p.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var y=this.getLuminanceSource(),v=y.getWidth(),_=y.getHeight();if(v>=p.MINIMUM_DIMENSION&&_>=p.MINIMUM_DIMENSION){var E=y.getMatrix(),w=v>>p.BLOCK_SIZE_POWER;0!=(v&p.BLOCK_SIZE_MASK)&&w++;var D=_>>p.BLOCK_SIZE_POWER;0!=(_&p.BLOCK_SIZE_MASK)&&D++;var O=p.calculateBlackPoints(E,w,D,v,_),A=new Xa(v,_);p.calculateThresholdForBlock(E,w,D,v,_,O,A),this.matrix=A}else this.matrix=g.prototype.getBlackMatrix.call(this);return this.matrix},p.prototype.createBinarizer=function(y){return new p(y)},p.calculateThresholdForBlock=function(y,v,_,E,w,D,O){for(var A=w-p.BLOCK_SIZE,W=E-p.BLOCK_SIZE,q=0;q<_;q++){var _e=q<<p.BLOCK_SIZE_POWER;_e>A&&(_e=A);for(var be=p.cap(q,2,_-3),We=0;We<v;We++){var qe=We<<p.BLOCK_SIZE_POWER;qe>W&&(qe=W);for(var dt=p.cap(We,2,v-3),gt=0,lt=-2;lt<=2;lt++){var Tt=D[be+lt];gt+=Tt[dt-2]+Tt[dt-1]+Tt[dt]+Tt[dt+1]+Tt[dt+2]}p.thresholdBlock(y,qe,_e,gt/25,E,O)}}},p.cap=function(y,v,_){return y<v?v:y>_?_:y},p.thresholdBlock=function(y,v,_,E,w,D){for(var O=0,A=_*w+v;O<p.BLOCK_SIZE;O++,A+=w)for(var W=0;W<p.BLOCK_SIZE;W++)(255&y[A+W])<=E&&D.set(v+W,_+O)},p.calculateBlackPoints=function(y,v,_,E,w){for(var D=w-p.BLOCK_SIZE,O=E-p.BLOCK_SIZE,A=new Array(_),W=0;W<_;W++){A[W]=new Int32Array(v);var q=W<<p.BLOCK_SIZE_POWER;q>D&&(q=D);for(var _e=0;_e<v;_e++){var be=_e<<p.BLOCK_SIZE_POWER;be>O&&(be=O);for(var We=0,qe=255,dt=0,gt=0,lt=q*E+be;gt<p.BLOCK_SIZE;gt++,lt+=E){for(var Tt=0;Tt<p.BLOCK_SIZE;Tt++){var Rt=255&y[lt+Tt];We+=Rt,Rt<qe&&(qe=Rt),Rt>dt&&(dt=Rt)}if(dt-qe>p.MIN_DYNAMIC_RANGE)for(gt++,lt+=E;gt<p.BLOCK_SIZE;gt++,lt+=E)for(Tt=0;Tt<p.BLOCK_SIZE;Tt++)We+=255&y[lt+Tt]}var Xt=We>>2*p.BLOCK_SIZE_POWER;if(dt-qe<=p.MIN_DYNAMIC_RANGE&&(Xt=qe/2,W>0&&_e>0)){var ur=(A[W-1][_e]+2*A[W][_e-1]+A[W-1][_e-1])/4;qe<ur&&(Xt=ur)}A[W][_e]=Xt}}return A},p.BLOCK_SIZE_MASK=(p.BLOCK_SIZE=1<<(p.BLOCK_SIZE_POWER=3))-1,p.MINIMUM_DIMENSION=5*p.BLOCK_SIZE,p.MIN_DYNAMIC_RANGE=24,p}(i$);const sP=s$;var a$=function(){function g(p,y){this.width=p,this.height=y}return g.prototype.getWidth=function(){return this.width},g.prototype.getHeight=function(){return this.height},g.prototype.isCropSupported=function(){return!1},g.prototype.crop=function(p,y,v,_){throw new hy("This luminance source does not support cropping.")},g.prototype.isRotateSupported=function(){return!1},g.prototype.rotateCounterClockwise=function(){throw new hy("This luminance source does not support rotation by 90 degrees.")},g.prototype.rotateCounterClockwise45=function(){throw new hy("This luminance source does not support rotation by 45 degrees.")},g.prototype.toString=function(){for(var p=new Uint8ClampedArray(this.width),y=new Ai,v=0;v<this.height;v++){for(var _=this.getRow(v,p),E=0;E<this.width;E++){var w=255&_[E];y.append(w<64?"#":w<128?"+":w<192?".":" ")}y.append("\n")}return y.toString()},g}();const o0=a$;var l$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),u$=function(g){function p(y){var v=g.call(this,y.getWidth(),y.getHeight())||this;return v.delegate=y,v}return l$(p,g),p.prototype.getRow=function(y,v){for(var _=this.delegate.getRow(y,v),E=this.getWidth(),w=0;w<E;w++)_[w]=255-(255&_[w]);return _},p.prototype.getMatrix=function(){for(var y=this.delegate.getMatrix(),v=this.getWidth()*this.getHeight(),_=new Uint8ClampedArray(v),E=0;E<v;E++)_[E]=255-(255&y[E]);return _},p.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},p.prototype.crop=function(y,v,_,E){return new p(this.delegate.crop(y,v,_,E))},p.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},p.prototype.invert=function(){return this.delegate},p.prototype.rotateCounterClockwise=function(){return new p(this.delegate.rotateCounterClockwise())},p.prototype.rotateCounterClockwise45=function(){return new p(this.delegate.rotateCounterClockwise45())},p}(o0);const fy=u$;var c$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),d$=function(g){function p(y){var v=g.call(this,y.width,y.height)||this;return v.canvas=y,v.tempCanvasElement=null,v.buffer=p.makeBufferFromCanvasImageData(y),v}return c$(p,g),p.makeBufferFromCanvasImageData=function(y){var v=y.getContext("2d").getImageData(0,0,y.width,y.height);return p.toGrayscaleBuffer(v.data,y.width,y.height)},p.toGrayscaleBuffer=function(y,v,_){for(var E=new Uint8ClampedArray(v*_),w=0,D=0,O=y.length;w<O;w+=4,D++){E[D]=0===y[w+3]?255:306*y[w]+601*y[w+1]+117*y[w+2]+512>>10}return E},p.prototype.getRow=function(y,v){if(y<0||y>=this.getHeight())throw new un("Requested row is outside the image: "+y);var _=this.getWidth(),E=y*_;return null===v?v=this.buffer.slice(E,E+_):(v.length<_&&(v=new Uint8ClampedArray(_)),v.set(this.buffer.slice(E,E+_))),v},p.prototype.getMatrix=function(){return this.buffer},p.prototype.isCropSupported=function(){return!0},p.prototype.crop=function(y,v,_,E){return g.prototype.crop.call(this,y,v,_,E),this},p.prototype.isRotateSupported=function(){return!0},p.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},p.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},p.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var y=this.canvas.ownerDocument.createElement("canvas");y.width=this.canvas.width,y.height=this.canvas.height,this.tempCanvasElement=y}return this.tempCanvasElement},p.prototype.rotate=function(y){var v=this.getTempCanvasElement(),_=v.getContext("2d"),E=y*p.DEGREE_TO_RADIANS,w=this.canvas.width,D=this.canvas.height,O=Math.ceil(Math.abs(Math.cos(E))*w+Math.abs(Math.sin(E))*D),A=Math.ceil(Math.abs(Math.sin(E))*w+Math.abs(Math.cos(E))*D);return v.width=O,v.height=A,_.translate(O/2,A/2),_.rotate(E),_.drawImage(this.canvas,w/-2,D/-2),this.buffer=p.makeBufferFromCanvasImageData(v),this},p.prototype.invert=function(){return new fy(this)},p.DEGREE_TO_RADIANS=Math.PI/180,p}(o0),h$=function(){function g(p,y,v){this.deviceId=p,this.label=y,this.kind="videoinput",this.groupId=v||void 0}return g.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},g}(),Js=function(g,p,y,v){return new(y||(y=Promise))(function(E,w){function D(W){try{A(v.next(W))}catch(q){w(q)}}function O(W){try{A(v.throw(W))}catch(q){w(q)}}function A(W){W.done?E(W.value):function _(E){return E instanceof y?E:new y(function(w){w(E)})}(W.value).then(D,O)}A((v=v.apply(g,p||[])).next())})},Xs=function(g,p){var v,_,E,w,y={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return w={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function D(A){return function(W){return function O(A){if(v)throw new TypeError("Generator is already executing.");for(;y;)try{if(v=1,_&&(E=2&A[0]?_.return:A[0]?_.throw||((E=_.return)&&E.call(_),0):_.next)&&!(E=E.call(_,A[1])).done)return E;switch(_=0,E&&(A=[2&A[0],E.value]),A[0]){case 0:case 1:E=A;break;case 4:return y.label++,{value:A[1],done:!1};case 5:y.label++,_=A[1],A=[0];continue;case 7:A=y.ops.pop(),y.trys.pop();continue;default:if(!(E=(E=y.trys).length>0&&E[E.length-1])&&(6===A[0]||2===A[0])){y=0;continue}if(3===A[0]&&(!E||A[1]>E[0]&&A[1]<E[3])){y.label=A[1];break}if(6===A[0]&&y.label<E[1]){y.label=E[1],E=A;break}if(E&&y.label<E[2]){y.label=E[2],y.ops.push(A);break}E[2]&&y.ops.pop(),y.trys.pop();continue}A=p.call(g,y)}catch(W){A=[6,W],_=0}finally{v=E=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,W])}}},$h=function(){function g(p,y,v){void 0===y&&(y=500),this.reader=p,this.timeBetweenScansMillis=y,this._hints=v,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(g.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(p){this._timeBetweenDecodingAttempts=p<0?0:p},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"hints",{get:function(){return this._hints},set:function(p){this._hints=p||null},enumerable:!1,configurable:!0}),g.prototype.listVideoInputDevices=function(){return Js(this,void 0,void 0,function(){var p,y,v,_,E,w,q,_e;return Xs(this,function(be){switch(be.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:p=be.sent(),y=[];try{for(v=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),_=v.next();!_.done;_=v.next())"videoinput"===(w="video"===(E=_.value).kind?"videoinput":E.kind)&&y.push({deviceId:E.deviceId||E.id,label:E.label||"Video device "+(y.length+1),kind:w,groupId:E.groupId})}catch(We){q={error:We}}finally{try{_&&!_.done&&(_e=v.return)&&_e.call(v)}finally{if(q)throw q.error}}return[2,y]}})})},g.prototype.getVideoInputDevices=function(){return Js(this,void 0,void 0,function(){return Xs(this,function(y){switch(y.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,y.sent().map(function(v){return new h$(v.deviceId,v.label)})]}})})},g.prototype.findDeviceById=function(p){return Js(this,void 0,void 0,function(){var y;return Xs(this,function(v){switch(v.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(y=v.sent())?[2,y.find(function(_){return _.deviceId===p})]:[2,null]}})})},g.prototype.decodeFromInputVideoDevice=function(p,y){return Js(this,void 0,void 0,function(){return Xs(this,function(v){switch(v.label){case 0:return[4,this.decodeOnceFromVideoDevice(p,y)];case 1:return[2,v.sent()]}})})},g.prototype.decodeOnceFromVideoDevice=function(p,y){return Js(this,void 0,void 0,function(){return Xs(this,function(E){switch(E.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:p?{deviceId:{exact:p}}:{facingMode:"environment"}},y)];case 1:return[2,E.sent()]}})})},g.prototype.decodeOnceFromConstraints=function(p,y){return Js(this,void 0,void 0,function(){var v;return Xs(this,function(_){switch(_.label){case 0:return[4,navigator.mediaDevices.getUserMedia(p)];case 1:return v=_.sent(),[4,this.decodeOnceFromStream(v,y)];case 2:return[2,_.sent()]}})})},g.prototype.decodeOnceFromStream=function(p,y){return Js(this,void 0,void 0,function(){var v;return Xs(this,function(E){switch(E.label){case 0:return this.reset(),[4,this.attachStreamToVideo(p,y)];case 1:return v=E.sent(),[4,this.decodeOnce(v)];case 2:return[2,E.sent()]}})})},g.prototype.decodeFromInputVideoDeviceContinuously=function(p,y,v){return Js(this,void 0,void 0,function(){return Xs(this,function(_){switch(_.label){case 0:return[4,this.decodeFromVideoDevice(p,y,v)];case 1:return[2,_.sent()]}})})},g.prototype.decodeFromVideoDevice=function(p,y,v){return Js(this,void 0,void 0,function(){return Xs(this,function(w){switch(w.label){case 0:return[4,this.decodeFromConstraints({video:p?{deviceId:{exact:p}}:{facingMode:"environment"}},y,v)];case 1:return[2,w.sent()]}})})},g.prototype.decodeFromConstraints=function(p,y,v){return Js(this,void 0,void 0,function(){var _;return Xs(this,function(E){switch(E.label){case 0:return[4,navigator.mediaDevices.getUserMedia(p)];case 1:return _=E.sent(),[4,this.decodeFromStream(_,y,v)];case 2:return[2,E.sent()]}})})},g.prototype.decodeFromStream=function(p,y,v){return Js(this,void 0,void 0,function(){var _;return Xs(this,function(E){switch(E.label){case 0:return this.reset(),[4,this.attachStreamToVideo(p,y)];case 1:return _=E.sent(),[4,this.decodeContinuously(_,v)];case 2:return[2,E.sent()]}})})},g.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},g.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},g.prototype.attachStreamToVideo=function(p,y){return Js(this,void 0,void 0,function(){var v;return Xs(this,function(_){switch(_.label){case 0:return v=this.prepareVideoElement(y),this.addVideoSource(v,p),this.videoElement=v,this.stream=p,[4,this.playVideoOnLoadAsync(v)];case 1:return _.sent(),[2,v]}})})},g.prototype.playVideoOnLoadAsync=function(p){var y=this;return new Promise(function(v,_){return y.playVideoOnLoad(p,function(){return v()})})},g.prototype.playVideoOnLoad=function(p,y){var v=this;this.videoEndedListener=function(){return v.stopStreams()},this.videoCanPlayListener=function(){return v.tryPlayVideo(p)},p.addEventListener("ended",this.videoEndedListener),p.addEventListener("canplay",this.videoCanPlayListener),p.addEventListener("playing",y),this.tryPlayVideo(p)},g.prototype.isVideoPlaying=function(p){return p.currentTime>0&&!p.paused&&!p.ended&&p.readyState>2},g.prototype.tryPlayVideo=function(p){return Js(this,void 0,void 0,function(){return Xs(this,function(v){switch(v.label){case 0:if(this.isVideoPlaying(p))return console.warn("Trying to play video that is already playing."),[2];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,p.play()];case 2:return v.sent(),[3,4];case 3:return v.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},g.prototype.getMediaElement=function(p,y){var v=document.getElementById(p);if(!v)throw new Ao("element with id '"+p+"' not found");if(v.nodeName.toLowerCase()!==y.toLowerCase())throw new Ao("element with id '"+p+"' must be an "+y+" element");return v},g.prototype.decodeFromImage=function(p,y){if(!p&&!y)throw new Ao("either imageElement with a src set or an url must be provided");return y&&!p?this.decodeFromImageUrl(y):this.decodeFromImageElement(p)},g.prototype.decodeFromVideo=function(p,y){if(!p&&!y)throw new Ao("Either an element with a src set or an URL must be provided");return y&&!p?this.decodeFromVideoUrl(y):this.decodeFromVideoElement(p)},g.prototype.decodeFromVideoContinuously=function(p,y,v){if(void 0===p&&void 0===y)throw new Ao("Either an element with a src set or an URL must be provided");return y&&!p?this.decodeFromVideoUrlContinuously(y,v):this.decodeFromVideoElementContinuously(p,v)},g.prototype.decodeFromImageElement=function(p){if(!p)throw new Ao("An image element must be provided.");this.reset();var y=this.prepareImageElement(p);return this.imageElement=y,this.isImageLoaded(y)?this.decodeOnce(y,!1,!0):this._decodeOnLoadImage(y)},g.prototype.decodeFromVideoElement=function(p){var y=this._decodeFromVideoElementSetup(p);return this._decodeOnLoadVideo(y)},g.prototype.decodeFromVideoElementContinuously=function(p,y){var v=this._decodeFromVideoElementSetup(p);return this._decodeOnLoadVideoContinuously(v,y)},g.prototype._decodeFromVideoElementSetup=function(p){if(!p)throw new Ao("A video element must be provided.");this.reset();var y=this.prepareVideoElement(p);return this.videoElement=y,y},g.prototype.decodeFromImageUrl=function(p){if(!p)throw new Ao("An URL must be provided.");this.reset();var y=this.prepareImageElement();this.imageElement=y;var v=this._decodeOnLoadImage(y);return y.src=p,v},g.prototype.decodeFromVideoUrl=function(p){if(!p)throw new Ao("An URL must be provided.");this.reset();var y=this.prepareVideoElement(),v=this.decodeFromVideoElement(y);return y.src=p,v},g.prototype.decodeFromVideoUrlContinuously=function(p,y){if(!p)throw new Ao("An URL must be provided.");this.reset();var v=this.prepareVideoElement(),_=this.decodeFromVideoElementContinuously(v,y);return v.src=p,_},g.prototype._decodeOnLoadImage=function(p){var y=this;return new Promise(function(v,_){y.imageLoadedListener=function(){return y.decodeOnce(p,!1,!0).then(v,_)},p.addEventListener("load",y.imageLoadedListener)})},g.prototype._decodeOnLoadVideo=function(p){return Js(this,void 0,void 0,function(){return Xs(this,function(y){switch(y.label){case 0:return[4,this.playVideoOnLoadAsync(p)];case 1:return y.sent(),[4,this.decodeOnce(p)];case 2:return[2,y.sent()]}})})},g.prototype._decodeOnLoadVideoContinuously=function(p,y){return Js(this,void 0,void 0,function(){return Xs(this,function(v){switch(v.label){case 0:return[4,this.playVideoOnLoadAsync(p)];case 1:return v.sent(),this.decodeContinuously(p,y),[2]}})})},g.prototype.isImageLoaded=function(p){return!(!p.complete||0===p.naturalWidth)},g.prototype.prepareImageElement=function(p){var y;return void 0===p&&((y=document.createElement("img")).width=200,y.height=200),"string"==typeof p&&(y=this.getMediaElement(p,"img")),p instanceof HTMLImageElement&&(y=p),y},g.prototype.prepareVideoElement=function(p){var y;return!p&&"undefined"!=typeof document&&((y=document.createElement("video")).width=200,y.height=200),"string"==typeof p&&(y=this.getMediaElement(p,"video")),p instanceof HTMLVideoElement&&(y=p),y.setAttribute("autoplay","true"),y.setAttribute("muted","true"),y.setAttribute("playsinline","true"),y},g.prototype.decodeOnce=function(p,y,v){var _=this;void 0===y&&(y=!0),void 0===v&&(v=!0),this._stopAsyncDecode=!1;var E=function(w,D){if(_._stopAsyncDecode)return D(new Cr("Video stream has ended before any code could be detected.")),void(_._stopAsyncDecode=void 0);try{w(_.decode(p))}catch(_e){if(y&&_e instanceof Cr||(_e instanceof $o||_e instanceof Hr)&&v)return setTimeout(E,_._timeBetweenDecodingAttempts,w,D);D(_e)}};return new Promise(function(w,D){return E(w,D)})},g.prototype.decodeContinuously=function(p,y){var v=this;this._stopContinuousDecode=!1;var _=function(){if(v._stopContinuousDecode)v._stopContinuousDecode=void 0;else try{var E=v.decode(p);y(E,null),setTimeout(_,v.timeBetweenScansMillis)}catch(O){y(null,O),(O instanceof $o||O instanceof Hr||O instanceof Cr)&&setTimeout(_,v._timeBetweenDecodingAttempts)}};_()},g.prototype.decode=function(p){var y=this.createBinaryBitmap(p);return this.decodeBitmap(y)},g.prototype._isHTMLVideoElement=function(p){return 0!==p.videoWidth},g.prototype.createBinaryBitmap=function(p){this.getCaptureCanvasContext(p),this._isHTMLVideoElement(p)?this.drawFrameOnCanvas(p):this.drawImageOnCanvas(p);var v=this.getCaptureCanvas(p),_=new d$(v),E=new sP(_);return new iP(E)},g.prototype.getCaptureCanvasContext=function(p){if(!this.captureCanvasContext){var v=this.getCaptureCanvas(p).getContext("2d");this.captureCanvasContext=v}return this.captureCanvasContext},g.prototype.getCaptureCanvas=function(p){if(!this.captureCanvas){var y=this.createCaptureCanvas(p);this.captureCanvas=y}return this.captureCanvas},g.prototype.drawFrameOnCanvas=function(p,y,v){void 0===y&&(y={sx:0,sy:0,sWidth:p.videoWidth,sHeight:p.videoHeight,dx:0,dy:0,dWidth:p.videoWidth,dHeight:p.videoHeight}),void 0===v&&(v=this.captureCanvasContext),v.drawImage(p,y.sx,y.sy,y.sWidth,y.sHeight,y.dx,y.dy,y.dWidth,y.dHeight)},g.prototype.drawImageOnCanvas=function(p,y,v){void 0===y&&(y={sx:0,sy:0,sWidth:p.naturalWidth,sHeight:p.naturalHeight,dx:0,dy:0,dWidth:p.naturalWidth,dHeight:p.naturalHeight}),void 0===v&&(v=this.captureCanvasContext),v.drawImage(p,y.sx,y.sy,y.sWidth,y.sHeight,y.dx,y.dy,y.dWidth,y.dHeight)},g.prototype.decodeBitmap=function(p){return this.reader.decode(p,this._hints)},g.prototype.createCaptureCanvas=function(p){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var v,_,y=document.createElement("canvas");return void 0!==p&&(p instanceof HTMLVideoElement?(v=p.videoWidth,_=p.videoHeight):p instanceof HTMLImageElement&&(v=p.naturalWidth||p.width,_=p.naturalHeight||p.height)),y.style.width=v+"px",y.style.height=_+"px",y.width=v,y.height=_,y},g.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(p){return p.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},g.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},g.prototype._destroyVideoElement=function(){!this.videoElement||(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},g.prototype._destroyImageElement=function(){!this.imageElement||(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},g.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},g.prototype.addVideoSource=function(p,y){try{p.srcObject=y}catch(v){p.src=URL.createObjectURL(y)}},g.prototype.cleanVideoSource=function(p){try{p.srcObject=null}catch(y){p.src=""}this.videoElement.removeAttribute("src")},g}(),p$=function(){function g(p,y,v,_,E,w){void 0===v&&(v=null==y?0:8*y.length),void 0===w&&(w=Vi.currentTimeMillis()),this.text=p,this.rawBytes=y,this.numBits=v,this.resultPoints=_,this.format=E,this.timestamp=w,this.text=p,this.rawBytes=y,this.numBits=null==v?null==y?0:8*y.length:v,this.resultPoints=_,this.format=E,this.resultMetadata=null,this.timestamp=null==w?Vi.currentTimeMillis():w}return g.prototype.getText=function(){return this.text},g.prototype.getRawBytes=function(){return this.rawBytes},g.prototype.getNumBits=function(){return this.numBits},g.prototype.getResultPoints=function(){return this.resultPoints},g.prototype.getBarcodeFormat=function(){return this.format},g.prototype.getResultMetadata=function(){return this.resultMetadata},g.prototype.putMetadata=function(p,y){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(p,y)},g.prototype.putAllMetadata=function(p){null!==p&&(this.resultMetadata=null===this.resultMetadata?p:new Map(p))},g.prototype.addResultPoints=function(p){var y=this.resultPoints;if(null===y)this.resultPoints=p;else if(null!==p&&p.length>0){var v=new Array(y.length+p.length);Vi.arraycopy(y,0,v,0,y.length),Vi.arraycopy(p,0,v,y.length,p.length),this.resultPoints=v}},g.prototype.getTimestamp=function(){return this.timestamp},g.prototype.toString=function(){return this.text},g}();const ua=p$;var py=(()=>(function(g){g[g.AZTEC=0]="AZTEC",g[g.CODABAR=1]="CODABAR",g[g.CODE_39=2]="CODE_39",g[g.CODE_93=3]="CODE_93",g[g.CODE_128=4]="CODE_128",g[g.DATA_MATRIX=5]="DATA_MATRIX",g[g.EAN_8=6]="EAN_8",g[g.EAN_13=7]="EAN_13",g[g.ITF=8]="ITF",g[g.MAXICODE=9]="MAXICODE",g[g.PDF_417=10]="PDF_417",g[g.QR_CODE=11]="QR_CODE",g[g.RSS_14=12]="RSS_14",g[g.RSS_EXPANDED=13]="RSS_EXPANDED",g[g.UPC_A=14]="UPC_A",g[g.UPC_E=15]="UPC_E",g[g.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(py||(py={})),py))();const En=py;var my=(()=>(function(g){g[g.OTHER=0]="OTHER",g[g.ORIENTATION=1]="ORIENTATION",g[g.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",g[g.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",g[g.ISSUE_NUMBER=4]="ISSUE_NUMBER",g[g.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",g[g.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",g[g.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",g[g.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",g[g.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",g[g.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(my||(my={})),my))();const Es=my;var m$=function(){function g(p,y,v,_,E,w){void 0===E&&(E=-1),void 0===w&&(w=-1),this.rawBytes=p,this.text=y,this.byteSegments=v,this.ecLevel=_,this.structuredAppendSequenceNumber=E,this.structuredAppendParity=w,this.numBits=null==p?0:8*p.length}return g.prototype.getRawBytes=function(){return this.rawBytes},g.prototype.getNumBits=function(){return this.numBits},g.prototype.setNumBits=function(p){this.numBits=p},g.prototype.getText=function(){return this.text},g.prototype.getByteSegments=function(){return this.byteSegments},g.prototype.getECLevel=function(){return this.ecLevel},g.prototype.getErrorsCorrected=function(){return this.errorsCorrected},g.prototype.setErrorsCorrected=function(p){this.errorsCorrected=p},g.prototype.getErasures=function(){return this.erasures},g.prototype.setErasures=function(p){this.erasures=p},g.prototype.getOther=function(){return this.other},g.prototype.setOther=function(p){this.other=p},g.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},g.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},g.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},g}();const gy=m$;var g$=function(){function g(){}return g.prototype.exp=function(p){return this.expTable[p]},g.prototype.log=function(p){if(0===p)throw new un;return this.logTable[p]},g.addOrSubtract=function(p,y){return p^y},g}();const s0=g$;var y$=function(){function g(p,y){if(0===y.length)throw new un;this.field=p;var v=y.length;if(v>1&&0===y[0]){for(var _=1;_<v&&0===y[_];)_++;_===v?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(v-_),Vi.arraycopy(y,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=y}return g.prototype.getCoefficients=function(){return this.coefficients},g.prototype.getDegree=function(){return this.coefficients.length-1},g.prototype.isZero=function(){return 0===this.coefficients[0]},g.prototype.getCoefficient=function(p){return this.coefficients[this.coefficients.length-1-p]},g.prototype.evaluateAt=function(p){if(0===p)return this.getCoefficient(0);var v,y=this.coefficients;if(1===p){v=0;for(var _=0,E=y.length;_!==E;_++)v=s0.addOrSubtract(v,y[_]);return v}v=y[0];var D=y.length,O=this.field;for(_=1;_<D;_++)v=s0.addOrSubtract(O.multiply(p,v),y[_]);return v},g.prototype.addOrSubtract=function(p){if(!this.field.equals(p.field))throw new un("GenericGFPolys do not have same GenericGF field");if(this.isZero())return p;if(p.isZero())return this;var y=this.coefficients,v=p.coefficients;if(y.length>v.length){var _=y;y=v,v=_}var E=new Int32Array(v.length),w=v.length-y.length;Vi.arraycopy(v,0,E,0,w);for(var D=w;D<v.length;D++)E[D]=s0.addOrSubtract(y[D-w],v[D]);return new g(this.field,E)},g.prototype.multiply=function(p){if(!this.field.equals(p.field))throw new un("GenericGFPolys do not have same GenericGF field");if(this.isZero()||p.isZero())return this.field.getZero();for(var y=this.coefficients,v=y.length,_=p.coefficients,E=_.length,w=new Int32Array(v+E-1),D=this.field,O=0;O<v;O++)for(var A=y[O],W=0;W<E;W++)w[O+W]=s0.addOrSubtract(w[O+W],D.multiply(A,_[W]));return new g(D,w)},g.prototype.multiplyScalar=function(p){if(0===p)return this.field.getZero();if(1===p)return this;for(var y=this.coefficients.length,v=this.field,_=new Int32Array(y),E=this.coefficients,w=0;w<y;w++)_[w]=v.multiply(E[w],p);return new g(v,_)},g.prototype.multiplyByMonomial=function(p,y){if(p<0)throw new un;if(0===y)return this.field.getZero();for(var v=this.coefficients,_=v.length,E=new Int32Array(_+p),w=this.field,D=0;D<_;D++)E[D]=w.multiply(v[D],y);return new g(w,E)},g.prototype.divide=function(p){if(!this.field.equals(p.field))throw new un("GenericGFPolys do not have same GenericGF field");if(p.isZero())throw new un("Divide by 0");for(var y=this.field,v=y.getZero(),_=this,E=p.getCoefficient(p.getDegree()),w=y.inverse(E);_.getDegree()>=p.getDegree()&&!_.isZero();){var D=_.getDegree()-p.getDegree(),O=y.multiply(_.getCoefficient(_.getDegree()),w),A=p.multiplyByMonomial(D,O),W=y.buildMonomial(D,O);v=v.addOrSubtract(W),_=_.addOrSubtract(A)}return[v,_]},g.prototype.toString=function(){for(var p="",y=this.getDegree();y>=0;y--){var v=this.getCoefficient(y);if(0!==v){if(v<0?(p+=" - ",v=-v):p.length>0&&(p+=" + "),0===y||1!==v){var _=this.field.log(v);0===_?p+="1":1===_?p+="a":(p+="a^",p+=_)}0!==y&&(1===y?p+="x":(p+="x^",p+=y))}}return p},g}();const _c=y$;var v$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),_$=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return v$(p,g),p.kind="ArithmeticException",p}(aa);const aP=_$;var E$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),b$=function(g){function p(y,v,_){var E=g.call(this)||this;E.primitive=y,E.size=v,E.generatorBase=_;for(var w=new Int32Array(v),D=1,O=0;O<v;O++)w[O]=D,(D*=2)>=v&&(D^=y,D&=v-1);E.expTable=w;var A=new Int32Array(v);for(O=0;O<v-1;O++)A[w[O]]=O;return E.logTable=A,E.zero=new _c(E,Int32Array.from([0])),E.one=new _c(E,Int32Array.from([1])),E}return E$(p,g),p.prototype.getZero=function(){return this.zero},p.prototype.getOne=function(){return this.one},p.prototype.buildMonomial=function(y,v){if(y<0)throw new un;if(0===v)return this.zero;var _=new Int32Array(y+1);return _[0]=v,new _c(this,_)},p.prototype.inverse=function(y){if(0===y)throw new aP;return this.expTable[this.size-this.logTable[y]-1]},p.prototype.multiply=function(y,v){return 0===y||0===v?0:this.expTable[(this.logTable[y]+this.logTable[v])%(this.size-1)]},p.prototype.getSize=function(){return this.size},p.prototype.getGeneratorBase=function(){return this.generatorBase},p.prototype.toString=function(){return"GF(0x"+hi.toHexString(this.primitive)+","+this.size+")"},p.prototype.equals=function(y){return y===this},p.AZTEC_DATA_12=new p(4201,4096,1),p.AZTEC_DATA_10=new p(1033,1024,1),p.AZTEC_DATA_6=new p(67,64,1),p.AZTEC_PARAM=new p(19,16,1),p.QR_CODE_FIELD_256=new p(285,256,0),p.DATA_MATRIX_FIELD_256=new p(301,256,1),p.AZTEC_DATA_8=p.DATA_MATRIX_FIELD_256,p.MAXICODE_FIELD_64=p.AZTEC_DATA_6,p}(s0);const ca=b$;var C$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),w$=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return C$(p,g),p.kind="ReedSolomonException",p}(aa);const yy=w$;var M$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),x$=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return M$(p,g),p.kind="IllegalStateException",p}(aa);const tu=x$;var D$=function(){function g(p){this.field=p}return g.prototype.decode=function(p,y){for(var v=this.field,_=new _c(v,p),E=new Int32Array(y),w=!0,D=0;D<y;D++){var O=_.evaluateAt(v.exp(D+v.getGeneratorBase()));E[E.length-1-D]=O,0!==O&&(w=!1)}if(!w){var A=new _c(v,E),W=this.runEuclideanAlgorithm(v.buildMonomial(y,1),A,y),_e=W[1],be=this.findErrorLocations(W[0]),We=this.findErrorMagnitudes(_e,be);for(D=0;D<be.length;D++){var qe=p.length-1-v.log(be[D]);if(qe<0)throw new yy("Bad error location");p[qe]=ca.addOrSubtract(p[qe],We[D])}}},g.prototype.runEuclideanAlgorithm=function(p,y,v){if(p.getDegree()<y.getDegree()){var _=p;p=y,y=_}for(var E=this.field,w=p,D=y,O=E.getZero(),A=E.getOne();D.getDegree()>=(v/2|0);){var W=w,q=O;if(O=A,(w=D).isZero())throw new yy("r_{i-1} was zero");D=W;for(var _e=E.getZero(),be=w.getCoefficient(w.getDegree()),We=E.inverse(be);D.getDegree()>=w.getDegree()&&!D.isZero();){var qe=D.getDegree()-w.getDegree(),dt=E.multiply(D.getCoefficient(D.getDegree()),We);_e=_e.addOrSubtract(E.buildMonomial(qe,dt)),D=D.addOrSubtract(w.multiplyByMonomial(qe,dt))}if(A=_e.multiply(O).addOrSubtract(q),D.getDegree()>=w.getDegree())throw new tu("Division algorithm failed to reduce polynomial?")}var gt=A.getCoefficient(0);if(0===gt)throw new yy("sigmaTilde(0) was zero");var lt=E.inverse(gt);return[A.multiplyScalar(lt),D.multiplyScalar(lt)]},g.prototype.findErrorLocations=function(p){var y=p.getDegree();if(1===y)return Int32Array.from([p.getCoefficient(1)]);for(var v=new Int32Array(y),_=0,E=this.field,w=1;w<E.getSize()&&_<y;w++)0===p.evaluateAt(w)&&(v[_]=E.inverse(w),_++);if(_!==y)throw new yy("Error locator degree does not match number of roots");return v},g.prototype.findErrorMagnitudes=function(p,y){for(var v=y.length,_=new Int32Array(v),E=this.field,w=0;w<v;w++){for(var D=E.inverse(y[w]),O=1,A=0;A<v;A++)if(w!==A){var W=E.multiply(y[A],D);O=E.multiply(O,0==(1&W)?1|W:-2&W)}_[w]=E.multiply(p.evaluateAt(D),E.inverse(O)),0!==E.getGeneratorBase()&&(_[w]=E.multiply(_[w],D))}return _},g}();const vy=D$;var hs=(()=>(function(g){g[g.UPPER=0]="UPPER",g[g.LOWER=1]="LOWER",g[g.MIXED=2]="MIXED",g[g.DIGIT=3]="DIGIT",g[g.PUNCT=4]="PUNCT",g[g.BINARY=5]="BINARY"}(hs||(hs={})),hs))(),S$=function(){function g(){}return g.prototype.decode=function(p){this.ddata=p;var y=p.getBits(),v=this.extractBits(y),_=this.correctBits(v),E=g.convertBoolArrayToByteArray(_),w=g.getEncodedData(_),D=new gy(E,w,null,null);return D.setNumBits(_.length),D},g.highLevelDecode=function(p){return this.getEncodedData(p)},g.getEncodedData=function(p){for(var y=p.length,v=hs.UPPER,_=hs.UPPER,E="",w=0;w<y;)if(_===hs.BINARY){if(y-w<5)break;var D=g.readCode(p,w,5);if(w+=5,0===D){if(y-w<11)break;D=g.readCode(p,w,11)+31,w+=11}for(var O=0;O<D;O++){if(y-w<8){w=y;break}var A=g.readCode(p,w,8);E+=Fi.castAsNonUtf8Char(A),w+=8}_=v}else{var W=_===hs.DIGIT?4:5;if(y-w<W)break;A=g.readCode(p,w,W),w+=W;var q=g.getCharacter(_,A);q.startsWith("CTRL_")?(v=_,_=g.getTable(q.charAt(5)),"L"===q.charAt(6)&&(v=_)):(E+=q,_=v)}return E},g.getTable=function(p){switch(p){case"L":return hs.LOWER;case"P":return hs.PUNCT;case"M":return hs.MIXED;case"D":return hs.DIGIT;case"B":return hs.BINARY;default:return hs.UPPER}},g.getCharacter=function(p,y){switch(p){case hs.UPPER:return g.UPPER_TABLE[y];case hs.LOWER:return g.LOWER_TABLE[y];case hs.MIXED:return g.MIXED_TABLE[y];case hs.PUNCT:return g.PUNCT_TABLE[y];case hs.DIGIT:return g.DIGIT_TABLE[y];default:throw new tu("Bad table")}},g.prototype.correctBits=function(p){var y,v;this.ddata.getNbLayers()<=2?(v=6,y=ca.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(v=8,y=ca.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(v=10,y=ca.AZTEC_DATA_10):(v=12,y=ca.AZTEC_DATA_12);var _=this.ddata.getNbDatablocks(),E=p.length/v;if(E<_)throw new Hr;for(var w=p.length%v,D=new Int32Array(E),O=0;O<E;O++,w+=v)D[O]=g.readCode(p,w,v);try{new vy(y).decode(D,E-_)}catch(dt){throw new Hr(dt)}var W=(1<<v)-1,q=0;for(O=0;O<_;O++){if(0===(_e=D[O])||_e===W)throw new Hr;(1===_e||_e===W-1)&&q++}var be=new Array(_*v-q),We=0;for(O=0;O<_;O++){var _e;if(1===(_e=D[O])||_e===W-1)be.fill(_e>1,We,We+v-1),We+=v-1;else for(var qe=v-1;qe>=0;--qe)be[We++]=0!=(_e&1<<qe)}return be},g.prototype.extractBits=function(p){var y=this.ddata.isCompact(),v=this.ddata.getNbLayers(),_=(y?11:14)+4*v,E=new Int32Array(_),w=new Array(this.totalBitsInLayer(v,y));if(y)for(var D=0;D<E.length;D++)E[D]=D;else{var O=_+1+2*hi.truncDivision(hi.truncDivision(_,2)-1,15),A=_/2,W=hi.truncDivision(O,2);for(D=0;D<A;D++){var q=D+hi.truncDivision(D,15);E[A-D-1]=W-q-1,E[A+D]=W+q+1}}D=0;for(var _e=0;D<v;D++){for(var be=4*(v-D)+(y?9:12),We=2*D,qe=_-1-We,dt=0;dt<be;dt++)for(var gt=2*dt,lt=0;lt<2;lt++)w[_e+gt+lt]=p.get(E[We+lt],E[We+dt]),w[_e+2*be+gt+lt]=p.get(E[We+dt],E[qe-lt]),w[_e+4*be+gt+lt]=p.get(E[qe-lt],E[qe-dt]),w[_e+6*be+gt+lt]=p.get(E[qe-dt],E[We+lt]);_e+=8*be}return w},g.readCode=function(p,y,v){for(var _=0,E=y;E<y+v;E++)_<<=1,p[E]&&(_|=1);return _},g.readByte=function(p,y){var v=p.length-y;return v>=8?g.readCode(p,y,8):g.readCode(p,y,v)<<8-v},g.convertBoolArrayToByteArray=function(p){for(var y=new Uint8Array((p.length+7)/8),v=0;v<y.length;v++)y[v]=g.readByte(p,8*v);return y},g.prototype.totalBitsInLayer=function(p,y){return((y?88:112)+16*p)*p},g.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],g.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],g.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],g.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],g.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],g}();const lP=S$;var O$=function(){function g(){}return g.round=function(p){return NaN===p?0:p<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:p>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:p+(p<0?-.5:.5)|0},g.distance=function(p,y,v,_){var E=p-v,w=y-_;return Math.sqrt(E*E+w*w)},g.sum=function(p){for(var y=0,v=0,_=p.length;v!==_;v++)y+=p[v];return y},g}();const Ei=O$;var I$=function(){function g(){}return g.floatToIntBits=function(p){return p},g.MAX_VALUE=Number.MAX_SAFE_INTEGER,g}();const eC=I$;var T$=function(){function g(p,y){this.x=p,this.y=y}return g.prototype.getX=function(){return this.x},g.prototype.getY=function(){return this.y},g.prototype.equals=function(p){return p instanceof g&&(this.x===p.x&&this.y===p.y)},g.prototype.hashCode=function(){return 31*eC.floatToIntBits(this.x)+eC.floatToIntBits(this.y)},g.prototype.toString=function(){return"("+this.x+","+this.y+")"},g.orderBestPatterns=function(p){var E,w,D,y=this.distance(p[0],p[1]),v=this.distance(p[1],p[2]),_=this.distance(p[0],p[2]);if(v>=y&&v>=_?(w=p[0],E=p[1],D=p[2]):_>=v&&_>=y?(w=p[1],E=p[0],D=p[2]):(w=p[2],E=p[0],D=p[1]),this.crossProductZ(E,w,D)<0){var O=E;E=D,D=O}p[0]=E,p[1]=w,p[2]=D},g.distance=function(p,y){return Ei.distance(p.x,p.y,y.x,y.y)},g.crossProductZ=function(p,y,v){var _=y.x,E=y.y;return(v.x-_)*(p.y-E)-(v.y-E)*(p.x-_)},g}();const mn=T$;var A$=function(){function g(p,y){this.bits=p,this.points=y}return g.prototype.getBits=function(){return this.bits},g.prototype.getPoints=function(){return this.points},g}();const tC=A$;var P$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),R$=function(g){function p(y,v,_,E,w){var D=g.call(this,y,v)||this;return D.compact=_,D.nbDatablocks=E,D.nbLayers=w,D}return P$(p,g),p.prototype.getNbLayers=function(){return this.nbLayers},p.prototype.getNbDatablocks=function(){return this.nbDatablocks},p.prototype.isCompact=function(){return this.compact},p}(tC);const L$=R$;var N$=function(){function g(p,y,v,_){this.image=p,this.height=p.getHeight(),this.width=p.getWidth(),null==y&&(y=g.INIT_SIZE),null==v&&(v=p.getWidth()/2|0),null==_&&(_=p.getHeight()/2|0);var E=y/2|0;if(this.leftInit=v-E,this.rightInit=v+E,this.upInit=_-E,this.downInit=_+E,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Cr}return g.prototype.detect=function(){for(var p=this.leftInit,y=this.rightInit,v=this.upInit,_=this.downInit,E=!1,w=!0,D=!1,O=!1,A=!1,W=!1,q=!1,_e=this.width,be=this.height;w;){w=!1;for(var We=!0;(We||!O)&&y<_e;)(We=this.containsBlackPoint(v,_,y,!1))?(y++,w=!0,O=!0):O||y++;if(y>=_e){E=!0;break}for(var qe=!0;(qe||!A)&&_<be;)(qe=this.containsBlackPoint(p,y,_,!0))?(_++,w=!0,A=!0):A||_++;if(_>=be){E=!0;break}for(var dt=!0;(dt||!W)&&p>=0;)(dt=this.containsBlackPoint(v,_,p,!1))?(p--,w=!0,W=!0):W||p--;if(p<0){E=!0;break}for(var gt=!0;(gt||!q)&&v>=0;)(gt=this.containsBlackPoint(p,y,v,!0))?(v--,w=!0,q=!0):q||v--;if(v<0){E=!0;break}w&&(D=!0)}if(!E&&D){for(var lt=y-p,Tt=null,Rt=1;null===Tt&&Rt<lt;Rt++)Tt=this.getBlackPointOnSegment(p,_-Rt,p+Rt,_);if(null==Tt)throw new Cr;var Xt=null;for(Rt=1;null===Xt&&Rt<lt;Rt++)Xt=this.getBlackPointOnSegment(p,v+Rt,p+Rt,v);if(null==Xt)throw new Cr;var ur=null;for(Rt=1;null===ur&&Rt<lt;Rt++)ur=this.getBlackPointOnSegment(y,v+Rt,y-Rt,v);if(null==ur)throw new Cr;var _r=null;for(Rt=1;null===_r&&Rt<lt;Rt++)_r=this.getBlackPointOnSegment(y,_-Rt,y-Rt,_);if(null==_r)throw new Cr;return this.centerEdges(_r,Tt,ur,Xt)}throw new Cr},g.prototype.getBlackPointOnSegment=function(p,y,v,_){for(var E=Ei.round(Ei.distance(p,y,v,_)),w=(v-p)/E,D=(_-y)/E,O=this.image,A=0;A<E;A++){var W=Ei.round(p+A*w),q=Ei.round(y+A*D);if(O.get(W,q))return new mn(W,q)}return null},g.prototype.centerEdges=function(p,y,v,_){var E=p.getX(),w=p.getY(),D=y.getX(),O=y.getY(),A=v.getX(),W=v.getY(),q=_.getX(),_e=_.getY(),be=g.CORR;return E<this.width/2?[new mn(q-be,_e+be),new mn(D+be,O+be),new mn(A-be,W-be),new mn(E+be,w-be)]:[new mn(q+be,_e+be),new mn(D+be,O-be),new mn(A-be,W+be),new mn(E-be,w-be)]},g.prototype.containsBlackPoint=function(p,y,v,_){var E=this.image;if(_){for(var w=p;w<=y;w++)if(E.get(w,v))return!0}else for(var D=p;D<=y;D++)if(E.get(v,D))return!0;return!1},g.INIT_SIZE=10,g.CORR=1,g}();const rC=N$;var F$=function(){function g(){}return g.checkAndNudgePoints=function(p,y){for(var v=p.getWidth(),_=p.getHeight(),E=!0,w=0;w<y.length&&E;w+=2){var D=Math.floor(y[w]),O=Math.floor(y[w+1]);if(D<-1||D>v||O<-1||O>_)throw new Cr;E=!1,-1===D?(y[w]=0,E=!0):D===v&&(y[w]=v-1,E=!0),-1===O?(y[w+1]=0,E=!0):O===_&&(y[w+1]=_-1,E=!0)}for(E=!0,w=y.length-2;w>=0&&E;w-=2){if(D=Math.floor(y[w]),O=Math.floor(y[w+1]),D<-1||D>v||O<-1||O>_)throw new Cr;E=!1,-1===D?(y[w]=0,E=!0):D===v&&(y[w]=v-1,E=!0),-1===O?(y[w+1]=0,E=!0):O===_&&(y[w+1]=_-1,E=!0)}},g}();const uP=F$;var j$=function(){function g(p,y,v,_,E,w,D,O,A){this.a11=p,this.a21=y,this.a31=v,this.a12=_,this.a22=E,this.a32=w,this.a13=D,this.a23=O,this.a33=A}return g.quadrilateralToQuadrilateral=function(p,y,v,_,E,w,D,O,A,W,q,_e,be,We,qe,dt){var gt=g.quadrilateralToSquare(p,y,v,_,E,w,D,O);return g.squareToQuadrilateral(A,W,q,_e,be,We,qe,dt).times(gt)},g.prototype.transformPoints=function(p){for(var y=p.length,v=this.a11,_=this.a12,E=this.a13,w=this.a21,D=this.a22,O=this.a23,A=this.a31,W=this.a32,q=this.a33,_e=0;_e<y;_e+=2){var be=p[_e],We=p[_e+1],qe=E*be+O*We+q;p[_e]=(v*be+w*We+A)/qe,p[_e+1]=(_*be+D*We+W)/qe}},g.prototype.transformPointsWithValues=function(p,y){for(var v=this.a11,_=this.a12,E=this.a13,w=this.a21,D=this.a22,O=this.a23,A=this.a31,W=this.a32,q=this.a33,_e=p.length,be=0;be<_e;be++){var We=p[be],qe=y[be],dt=E*We+O*qe+q;p[be]=(v*We+w*qe+A)/dt,y[be]=(_*We+D*qe+W)/dt}},g.squareToQuadrilateral=function(p,y,v,_,E,w,D,O){var A=p-v+E-D,W=y-_+w-O;if(0===A&&0===W)return new g(v-p,E-v,p,_-y,w-_,y,0,0,1);var q=v-E,_e=D-E,be=_-w,We=O-w,qe=q*We-_e*be,dt=(A*We-_e*W)/qe,gt=(q*W-A*be)/qe;return new g(v-p+dt*v,D-p+gt*D,p,_-y+dt*_,O-y+gt*O,y,dt,gt,1)},g.quadrilateralToSquare=function(p,y,v,_,E,w,D,O){return g.squareToQuadrilateral(p,y,v,_,E,w,D,O).buildAdjoint()},g.prototype.buildAdjoint=function(){return new g(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},g.prototype.times=function(p){return new g(this.a11*p.a11+this.a21*p.a12+this.a31*p.a13,this.a11*p.a21+this.a21*p.a22+this.a31*p.a23,this.a11*p.a31+this.a21*p.a32+this.a31*p.a33,this.a12*p.a11+this.a22*p.a12+this.a32*p.a13,this.a12*p.a21+this.a22*p.a22+this.a32*p.a23,this.a12*p.a31+this.a22*p.a32+this.a32*p.a33,this.a13*p.a11+this.a23*p.a12+this.a33*p.a13,this.a13*p.a21+this.a23*p.a22+this.a33*p.a23,this.a13*p.a31+this.a23*p.a32+this.a33*p.a33)},g}();const cP=j$;var B$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),U$=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return B$(p,g),p.prototype.sampleGrid=function(y,v,_,E,w,D,O,A,W,q,_e,be,We,qe,dt,gt,lt,Tt,Rt){var Xt=cP.quadrilateralToQuadrilateral(E,w,D,O,A,W,q,_e,be,We,qe,dt,gt,lt,Tt,Rt);return this.sampleGridWithTransform(y,v,_,Xt)},p.prototype.sampleGridWithTransform=function(y,v,_,E){if(v<=0||_<=0)throw new Cr;for(var w=new Xa(v,_),D=new Float32Array(2*v),O=0;O<_;O++){for(var A=D.length,W=O+.5,q=0;q<A;q+=2)D[q]=q/2+.5,D[q+1]=W;E.transformPoints(D),uP.checkAndNudgePoints(y,D);try{for(q=0;q<A;q+=2)y.get(Math.floor(D[q]),Math.floor(D[q+1]))&&w.set(q/2,O)}catch(_e){throw new Cr}}return w},p}(uP);const V$=U$;var k$=function(){function g(){}return g.setGridSampler=function(p){g.gridSampler=p},g.getInstance=function(){return g.gridSampler},g.gridSampler=new V$,g}();const nC=k$;var da=function(){function g(p,y){this.x=p,this.y=y}return g.prototype.toResultPoint=function(){return new mn(this.getX(),this.getY())},g.prototype.getX=function(){return this.x},g.prototype.getY=function(){return this.y},g}(),W$=function(){function g(p){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=p}return g.prototype.detect=function(){return this.detectMirror(!1)},g.prototype.detectMirror=function(p){var y=this.getMatrixCenter(),v=this.getBullsEyeCorners(y);if(p){var _=v[0];v[0]=v[2],v[2]=_}this.extractParameters(v);var E=this.sampleGrid(this.image,v[this.shift%4],v[(this.shift+1)%4],v[(this.shift+2)%4],v[(this.shift+3)%4]),w=this.getMatrixCornerPoints(v);return new L$(E,w,this.compact,this.nbDataBlocks,this.nbLayers)},g.prototype.extractParameters=function(p){if(!(this.isValidPoint(p[0])&&this.isValidPoint(p[1])&&this.isValidPoint(p[2])&&this.isValidPoint(p[3])))throw new Cr;var y=2*this.nbCenterLayers,v=new Int32Array([this.sampleLine(p[0],p[1],y),this.sampleLine(p[1],p[2],y),this.sampleLine(p[2],p[3],y),this.sampleLine(p[3],p[0],y)]);this.shift=this.getRotation(v,y);for(var _=0,E=0;E<4;E++){var w=v[(this.shift+E)%4];this.compact?(_<<=7,_+=w>>1&127):(_<<=10,_+=(w>>2&992)+(w>>1&31))}var D=this.getCorrectedParameterData(_,this.compact);this.compact?(this.nbLayers=1+(D>>6),this.nbDataBlocks=1+(63&D)):(this.nbLayers=1+(D>>11),this.nbDataBlocks=1+(2047&D))},g.prototype.getRotation=function(p,y){var v=0;p.forEach(function(E,w,D){v=(E>>y-2<<1)+(1&E)+(v<<3)}),v=((1&v)<<11)+(v>>1);for(var _=0;_<4;_++)if(hi.bitCount(v^this.EXPECTED_CORNER_BITS[_])<=2)return _;throw new Cr},g.prototype.getCorrectedParameterData=function(p,y){var v,_;y?(v=7,_=2):(v=10,_=4);for(var E=v-_,w=new Int32Array(v),D=v-1;D>=0;--D)w[D]=15&p,p>>=4;try{new vy(ca.AZTEC_PARAM).decode(w,E)}catch(W){throw new Cr}var A=0;for(D=0;D<_;D++)A=(A<<4)+w[D];return A},g.prototype.getBullsEyeCorners=function(p){var y=p,v=p,_=p,E=p,w=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var D=this.getFirstDifferent(y,w,1,-1),O=this.getFirstDifferent(v,w,1,1),A=this.getFirstDifferent(_,w,-1,1),W=this.getFirstDifferent(E,w,-1,-1);if(this.nbCenterLayers>2){var q=this.distancePoint(W,D)*this.nbCenterLayers/(this.distancePoint(E,y)*(this.nbCenterLayers+2));if(q<.75||q>1.25||!this.isWhiteOrBlackRectangle(D,O,A,W))break}y=D,v=O,_=A,E=W,w=!w}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new Cr;this.compact=5===this.nbCenterLayers;var _e=new mn(y.getX()+.5,y.getY()-.5),be=new mn(v.getX()+.5,v.getY()+.5),We=new mn(_.getX()-.5,_.getY()+.5),qe=new mn(E.getX()-.5,E.getY()-.5);return this.expandSquare([_e,be,We,qe],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},g.prototype.getMatrixCenter=function(){var p,y,v,_;try{p=(E=new rC(this.image).detect())[0],y=E[1],v=E[2],_=E[3]}catch(W){var w=this.image.getWidth()/2,D=this.image.getHeight()/2;p=this.getFirstDifferent(new da(w+7,D-7),!1,1,-1).toResultPoint(),y=this.getFirstDifferent(new da(w+7,D+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new da(w-7,D+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new da(w-7,D-7),!1,-1,-1).toResultPoint()}var O=Ei.round((p.getX()+_.getX()+y.getX()+v.getX())/4),A=Ei.round((p.getY()+_.getY()+y.getY()+v.getY())/4);try{var E;p=(E=new rC(this.image,15,O,A).detect())[0],y=E[1],v=E[2],_=E[3]}catch(W){p=this.getFirstDifferent(new da(O+7,A-7),!1,1,-1).toResultPoint(),y=this.getFirstDifferent(new da(O+7,A+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new da(O-7,A+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new da(O-7,A-7),!1,-1,-1).toResultPoint()}return O=Ei.round((p.getX()+_.getX()+y.getX()+v.getX())/4),A=Ei.round((p.getY()+_.getY()+y.getY()+v.getY())/4),new da(O,A)},g.prototype.getMatrixCornerPoints=function(p){return this.expandSquare(p,2*this.nbCenterLayers,this.getDimension())},g.prototype.sampleGrid=function(p,y,v,_,E){var w=nC.getInstance(),D=this.getDimension(),O=D/2-this.nbCenterLayers,A=D/2+this.nbCenterLayers;return w.sampleGrid(p,D,D,O,O,A,O,A,A,O,A,y.getX(),y.getY(),v.getX(),v.getY(),_.getX(),_.getY(),E.getX(),E.getY())},g.prototype.sampleLine=function(p,y,v){for(var _=0,E=this.distanceResultPoint(p,y),w=E/v,D=p.getX(),O=p.getY(),A=w*(y.getX()-p.getX())/E,W=w*(y.getY()-p.getY())/E,q=0;q<v;q++)this.image.get(Ei.round(D+q*A),Ei.round(O+q*W))&&(_|=1<<v-q-1);return _},g.prototype.isWhiteOrBlackRectangle=function(p,y,v,_){p=new da(p.getX()-3,p.getY()+3),y=new da(y.getX()-3,y.getY()-3),v=new da(v.getX()+3,v.getY()-3),_=new da(_.getX()+3,_.getY()+3);var w=this.getColor(_,p);if(0===w)return!1;var D=this.getColor(p,y);return D===w&&(D=this.getColor(y,v))===w&&(D=this.getColor(v,_))===w},g.prototype.getColor=function(p,y){for(var v=this.distancePoint(p,y),_=(y.getX()-p.getX())/v,E=(y.getY()-p.getY())/v,w=0,D=p.getX(),O=p.getY(),A=this.image.get(p.getX(),p.getY()),W=Math.ceil(v),q=0;q<W;q++)O+=E,this.image.get(Ei.round(D+=_),Ei.round(O))!==A&&w++;var _e=w/v;return _e>.1&&_e<.9?0:_e<=.1===A?1:-1},g.prototype.getFirstDifferent=function(p,y,v,_){for(var E=p.getX()+v,w=p.getY()+_;this.isValid(E,w)&&this.image.get(E,w)===y;)E+=v,w+=_;for(E-=v,w-=_;this.isValid(E,w)&&this.image.get(E,w)===y;)E+=v;for(E-=v;this.isValid(E,w)&&this.image.get(E,w)===y;)w+=_;return new da(E,w-=_)},g.prototype.expandSquare=function(p,y,v){var _=v/(2*y),E=p[0].getX()-p[2].getX(),w=p[0].getY()-p[2].getY(),D=(p[0].getX()+p[2].getX())/2,O=(p[0].getY()+p[2].getY())/2,A=new mn(D+_*E,O+_*w),W=new mn(D-_*E,O-_*w);return E=p[1].getX()-p[3].getX(),w=p[1].getY()-p[3].getY(),D=(p[1].getX()+p[3].getX())/2,O=(p[1].getY()+p[3].getY())/2,[A,new mn(D+_*E,O+_*w),W,new mn(D-_*E,O-_*w)]},g.prototype.isValid=function(p,y){return p>=0&&p<this.image.getWidth()&&y>0&&y<this.image.getHeight()},g.prototype.isValidPoint=function(p){var y=Ei.round(p.getX()),v=Ei.round(p.getY());return this.isValid(y,v)},g.prototype.distancePoint=function(p,y){return Ei.distance(p.getX(),p.getY(),y.getX(),y.getY())},g.prototype.distanceResultPoint=function(p,y){return Ei.distance(p.getX(),p.getY(),y.getX(),y.getY())},g.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(hi.truncDivision(this.nbLayers-4,8)+1)+15},g}();const Z$=W$;var $$=function(){function g(){}return g.prototype.decode=function(p,y){void 0===y&&(y=null);var v=null,_=new Z$(p.getBlackMatrix()),E=null,w=null;try{E=(D=_.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(y,E),w=(new lP).decode(D)}catch(q){v=q}if(null==w)try{var D;E=(D=_.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(y,E),w=(new lP).decode(D)}catch(q){throw null!=v?v:q}var O=new ua(w.getText(),w.getRawBytes(),w.getNumBits(),E,En.AZTEC,Vi.currentTimeMillis()),A=w.getByteSegments();null!=A&&O.putMetadata(Es.BYTE_SEGMENTS,A);var W=w.getECLevel();return null!=W&&O.putMetadata(Es.ERROR_CORRECTION_LEVEL,W),O},g.prototype.reportFoundResultPoints=function(p,y){if(null!=p){var v=p.get(Ci.NEED_RESULT_POINT_CALLBACK);null!=v&&y.forEach(function(_,E,w){v.foundPossibleResultPoint(_)})}},g.prototype.reset=function(){},g}();const _y=$$;var K$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),z$=(function(g){K$(function p(y){return void 0===y&&(y=500),g.call(this,new _y,y)||this},g)}($h),function(){function g(){}return g.prototype.decode=function(p,y){try{return this.doDecode(p,y)}catch(q){if(y&&!0===y.get(Ci.TRY_HARDER)&&p.isRotateSupported()){var _=p.rotateCounterClockwise(),E=this.doDecode(_,y),w=E.getResultMetadata(),D=270;null!==w&&!0===w.get(Es.ORIENTATION)&&(D+=w.get(Es.ORIENTATION)%360),E.putMetadata(Es.ORIENTATION,D);var O=E.getResultPoints();if(null!==O)for(var A=_.getHeight(),W=0;W<O.length;W++)O[W]=new mn(A-O[W].getY()-1,O[W].getX());return E}throw new Cr}},g.prototype.reset=function(){},g.prototype.doDecode=function(p,y){var O,v=p.getWidth(),_=p.getHeight(),E=new ds(v),w=y&&!0===y.get(Ci.TRY_HARDER),D=Math.max(1,_>>(w?8:5));O=w?_:15;for(var A=Math.trunc(_/2),W=0;W<O;W++){var q=Math.trunc((W+1)/2),be=A+D*(0==(1&W)?q:-q);if(be<0||be>=_)break;try{E=p.getBlackRow(be,E)}catch(lt){continue}for(var We=function(lt){if(1===lt&&(E.reverse(),y&&!0===y.get(Ci.NEED_RESULT_POINT_CALLBACK))){var Tt=new Map;y.forEach(function(ur,_r){return Tt.set(_r,ur)}),Tt.delete(Ci.NEED_RESULT_POINT_CALLBACK),y=Tt}try{var Rt=qe.decodeRow(be,E,y);if(1===lt){Rt.putMetadata(Es.ORIENTATION,180);var Xt=Rt.getResultPoints();null!==Xt&&(Xt[0]=new mn(v-Xt[0].getX()-1,Xt[0].getY()),Xt[1]=new mn(v-Xt[1].getX()-1,Xt[1].getY()))}return{value:Rt}}catch(ur){}},qe=this,dt=0;dt<2;dt++){var gt=We(dt);if("object"==typeof gt)return gt.value}}throw new Cr},g.recordPattern=function(p,y,v){for(var _=v.length,E=0;E<_;E++)v[E]=0;var w=p.getSize();if(y>=w)throw new Cr;for(var D=!p.get(y),O=0,A=y;A<w;){if(p.get(A)!==D)v[O]++;else{if(++O===_)break;v[O]=1,D=!D}A++}if(O!==_&&(O!==_-1||A!==w))throw new Cr},g.recordPatternInReverse=function(p,y,v){for(var _=v.length,E=p.get(y);y>0&&_>=0;)p.get(--y)!==E&&(_--,E=!E);if(_>=0)throw new Cr;g.recordPattern(p,y+1,v)},g.patternMatchVariance=function(p,y,v){for(var _=p.length,E=0,w=0,D=0;D<_;D++)E+=p[D],w+=y[D];if(E<w)return Number.POSITIVE_INFINITY;var O=E/w;v*=O;for(var A=0,W=0;W<_;W++){var q=p[W],_e=y[W]*O,be=q>_e?q-_e:_e-q;if(be>v)return Number.POSITIVE_INFINITY;A+=be}return A/E},g}());const bs=z$;var G$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),H$=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return G$(p,g),p.findStartPattern=function(y){for(var v=y.getSize(),_=y.getNextSet(0),E=0,w=Int32Array.from([0,0,0,0,0,0]),D=_,O=!1,W=_;W<v;W++)if(y.get(W)!==O)w[E]++;else{if(5===E){for(var q=p.MAX_AVG_VARIANCE,_e=-1,be=p.CODE_START_A;be<=p.CODE_START_C;be++){var We=bs.patternMatchVariance(w,p.CODE_PATTERNS[be],p.MAX_INDIVIDUAL_VARIANCE);We<q&&(q=We,_e=be)}if(_e>=0&&y.isRange(Math.max(0,D-(W-D)/2),D,!1))return Int32Array.from([D,W,_e]);D+=w[0]+w[1],(w=w.slice(2,w.length-1))[E-1]=0,w[E]=0,E--}else E++;w[E]=1,O=!O}throw new Cr},p.decodeCode=function(y,v,_){bs.recordPattern(y,_,v);for(var E=p.MAX_AVG_VARIANCE,w=-1,D=0;D<p.CODE_PATTERNS.length;D++){var A=this.patternMatchVariance(v,p.CODE_PATTERNS[D],p.MAX_INDIVIDUAL_VARIANCE);A<E&&(E=A,w=D)}if(w>=0)return w;throw new Cr},p.prototype.decodeRow=function(y,v,_){var W,E=_&&!0===_.get(Ci.ASSUME_GS1),w=p.findStartPattern(v),D=w[2],O=0,A=new Uint8Array(20);switch(A[O++]=D,D){case p.CODE_START_A:W=p.CODE_CODE_A;break;case p.CODE_START_B:W=p.CODE_CODE_B;break;case p.CODE_START_C:W=p.CODE_CODE_C;break;default:throw new Hr}for(var q=!1,_e=!1,be="",We=w[0],qe=w[1],dt=Int32Array.from([0,0,0,0,0,0]),gt=0,lt=0,Tt=D,Rt=0,Xt=!0,ur=!1,_r=!1;!q;){var Ur=_e;switch(_e=!1,gt=lt,lt=p.decodeCode(v,dt,qe),A[O++]=lt,lt!==p.CODE_STOP&&(Xt=!0),lt!==p.CODE_STOP&&(Tt+=++Rt*lt),We=qe,qe+=dt.reduce(function(Fs,ka){return Fs+ka},0),lt){case p.CODE_START_A:case p.CODE_START_B:case p.CODE_START_C:throw new Hr}switch(W){case p.CODE_CODE_A:if(lt<64)be+=String.fromCharCode(_r===ur?" ".charCodeAt(0)+lt:" ".charCodeAt(0)+lt+128),_r=!1;else if(lt<96)be+=String.fromCharCode(_r===ur?lt-64:lt+64),_r=!1;else switch(lt!==p.CODE_STOP&&(Xt=!1),lt){case p.CODE_FNC_1:E&&(be+=0===be.length?"]C1":String.fromCharCode(29));break;case p.CODE_FNC_2:case p.CODE_FNC_3:break;case p.CODE_FNC_4_A:!ur&&_r?(ur=!0,_r=!1):ur&&_r?(ur=!1,_r=!1):_r=!0;break;case p.CODE_SHIFT:_e=!0,W=p.CODE_CODE_B;break;case p.CODE_CODE_B:W=p.CODE_CODE_B;break;case p.CODE_CODE_C:W=p.CODE_CODE_C;break;case p.CODE_STOP:q=!0}break;case p.CODE_CODE_B:if(lt<96)be+=String.fromCharCode(_r===ur?" ".charCodeAt(0)+lt:" ".charCodeAt(0)+lt+128),_r=!1;else switch(lt!==p.CODE_STOP&&(Xt=!1),lt){case p.CODE_FNC_1:E&&(be+=0===be.length?"]C1":String.fromCharCode(29));break;case p.CODE_FNC_2:case p.CODE_FNC_3:break;case p.CODE_FNC_4_B:!ur&&_r?(ur=!0,_r=!1):ur&&_r?(ur=!1,_r=!1):_r=!0;break;case p.CODE_SHIFT:_e=!0,W=p.CODE_CODE_A;break;case p.CODE_CODE_A:W=p.CODE_CODE_A;break;case p.CODE_CODE_C:W=p.CODE_CODE_C;break;case p.CODE_STOP:q=!0}break;case p.CODE_CODE_C:if(lt<100)lt<10&&(be+="0"),be+=lt;else switch(lt!==p.CODE_STOP&&(Xt=!1),lt){case p.CODE_FNC_1:E&&(be+=0===be.length?"]C1":String.fromCharCode(29));break;case p.CODE_CODE_A:W=p.CODE_CODE_A;break;case p.CODE_CODE_B:W=p.CODE_CODE_B;break;case p.CODE_STOP:q=!0}}Ur&&(W=W===p.CODE_CODE_A?p.CODE_CODE_B:p.CODE_CODE_A)}var $r=qe-We;if(qe=v.getNextUnset(qe),!v.isRange(qe,Math.min(v.getSize(),qe+(qe-We)/2),!1))throw new Cr;if((Tt-=Rt*gt)%103!==gt)throw new $o;var rn=be.length;if(0===rn)throw new Cr;rn>0&&Xt&&(be=be.substring(0,W===p.CODE_CODE_C?rn-2:rn-1));for(var Mn=(w[1]+w[0])/2,On=We+$r/2,xn=A.length,xi=new Uint8Array(xn),io=0;io<xn;io++)xi[io]=A[io];var uo=[new mn(Mn,y),new mn(On,y)];return new ua(be,xi,0,uo,En.CODE_128,(new Date).getTime())},p.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],p.MAX_AVG_VARIANCE=.25,p.MAX_INDIVIDUAL_VARIANCE=.7,p.CODE_SHIFT=98,p.CODE_CODE_C=99,p.CODE_CODE_B=100,p.CODE_CODE_A=101,p.CODE_FNC_1=102,p.CODE_FNC_2=97,p.CODE_FNC_3=96,p.CODE_FNC_4_A=101,p.CODE_FNC_4_B=100,p.CODE_START_A=103,p.CODE_START_B=104,p.CODE_START_C=105,p.CODE_STOP=106,p}(bs);const dP=H$;var Y$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),iC=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},J$=function(g){function p(y,v){void 0===y&&(y=!1),void 0===v&&(v=!1);var _=g.call(this)||this;return _.usingCheckDigit=y,_.extendedMode=v,_.decodeRowResult="",_.counters=new Int32Array(9),_}return Y$(p,g),p.prototype.decodeRow=function(y,v,_){var E,w,D,O,A=this.counters;A.fill(0),this.decodeRowResult="";var be,We,W=p.findAsteriskPattern(v,A),q=v.getNextSet(W[1]),_e=v.getSize();do{p.recordPattern(v,q,A);var qe=p.toNarrowWidePattern(A);if(qe<0)throw new Cr;be=p.patternToChar(qe),this.decodeRowResult+=be,We=q;try{for(var dt=(E=void 0,iC(A)),gt=dt.next();!gt.done;gt=dt.next())q+=gt.value}catch(xn){E={error:xn}}finally{try{gt&&!gt.done&&(w=dt.return)&&w.call(dt)}finally{if(E)throw E.error}}q=v.getNextSet(q)}while("*"!==be);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var rn,Tt=0;try{for(var Rt=iC(A),Xt=Rt.next();!Xt.done;Xt=Rt.next())Tt+=Xt.value}catch(xn){D={error:xn}}finally{try{Xt&&!Xt.done&&(O=Rt.return)&&O.call(Rt)}finally{if(D)throw D.error}}if(q!==_e&&2*(q-We-Tt)<Tt)throw new Cr;if(this.usingCheckDigit){for(var _r=this.decodeRowResult.length-1,Ur=0,$r=0;$r<_r;$r++)Ur+=p.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt($r));if(this.decodeRowResult.charAt(_r)!==p.ALPHABET_STRING.charAt(Ur%43))throw new $o;this.decodeRowResult=this.decodeRowResult.substring(0,_r)}if(0===this.decodeRowResult.length)throw new Cr;rn=this.extendedMode?p.decodeExtended(this.decodeRowResult):this.decodeRowResult;var On=We+Tt/2;return new ua(rn,null,0,[new mn((W[1]+W[0])/2,y),new mn(On,y)],En.CODE_39,(new Date).getTime())},p.findAsteriskPattern=function(y,v){for(var _=y.getSize(),E=y.getNextSet(0),w=0,D=E,O=!1,A=v.length,W=E;W<_;W++)if(y.get(W)!==O)v[w]++;else{if(w===A-1){if(this.toNarrowWidePattern(v)===p.ASTERISK_ENCODING&&y.isRange(Math.max(0,D-Math.floor((W-D)/2)),D,!1))return[D,W];D+=v[0]+v[1],v.copyWithin(0,2,2+w-1),v[w-1]=0,v[w]=0,w--}else w++;v[w]=1,O=!O}throw new Cr},p.toNarrowWidePattern=function(y){var v,_,D,E=y.length,w=0;do{var O=2147483647;try{for(var A=(v=void 0,iC(y)),W=A.next();!W.done;W=A.next())(q=W.value)<O&&q>w&&(O=q)}catch(qe){v={error:qe}}finally{try{W&&!W.done&&(_=A.return)&&_.call(A)}finally{if(v)throw v.error}}w=O,D=0;for(var _e=0,be=0,We=0;We<E;We++)(q=y[We])>w&&(be|=1<<E-1-We,D++,_e+=q);if(3===D){for(We=0;We<E&&D>0;We++){var q;if((q=y[We])>w&&(D--,2*q>=_e))return-1}return be}}while(D>3);return-1},p.patternToChar=function(y){for(var v=0;v<p.CHARACTER_ENCODINGS.length;v++)if(p.CHARACTER_ENCODINGS[v]===y)return p.ALPHABET_STRING.charAt(v);if(y===p.ASTERISK_ENCODING)return"*";throw new Cr},p.decodeExtended=function(y){for(var v=y.length,_="",E=0;E<v;E++){var w=y.charAt(E);if("+"===w||"$"===w||"%"===w||"/"===w){var D=y.charAt(E+1),O="\0";switch(w){case"+":if(!(D>="A"&&D<="Z"))throw new Hr;O=String.fromCharCode(D.charCodeAt(0)+32);break;case"$":if(!(D>="A"&&D<="Z"))throw new Hr;O=String.fromCharCode(D.charCodeAt(0)-64);break;case"%":if(D>="A"&&D<="E")O=String.fromCharCode(D.charCodeAt(0)-38);else if(D>="F"&&D<="J")O=String.fromCharCode(D.charCodeAt(0)-11);else if(D>="K"&&D<="O")O=String.fromCharCode(D.charCodeAt(0)+16);else if(D>="P"&&D<="T")O=String.fromCharCode(D.charCodeAt(0)+43);else if("U"===D)O="\0";else if("V"===D)O="@";else if("W"===D)O="`";else{if("X"!==D&&"Y"!==D&&"Z"!==D)throw new Hr;O="\x7f"}break;case"/":if(D>="A"&&D<="O")O=String.fromCharCode(D.charCodeAt(0)-32);else{if("Z"!==D)throw new Hr;O=":"}}_+=O,E++}else _+=w}return _},p.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",p.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],p.ASTERISK_ENCODING=148,p}(bs);const hP=J$;var X$=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),q$=function(g){function p(){var y=null!==g&&g.apply(this,arguments)||this;return y.narrowLineWidth=-1,y}return X$(p,g),p.prototype.decodeRow=function(y,v,_){var E,w,D=this.decodeStart(v),O=this.decodeEnd(v),A=new Ai;p.decodeMiddle(v,D[1],O[0],A);var W=A.toString(),q=null;null!=_&&(q=_.get(Ci.ALLOWED_LENGTHS)),null==q&&(q=p.DEFAULT_ALLOWED_LENGTHS);var _e=W.length,be=!1,We=0;try{for(var qe=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),dt=qe.next();!dt.done;dt=qe.next()){var gt=dt.value;if(_e===gt){be=!0;break}gt>We&&(We=gt)}}catch(Rt){E={error:Rt}}finally{try{dt&&!dt.done&&(w=qe.return)&&w.call(qe)}finally{if(E)throw E.error}}if(!be&&_e>We&&(be=!0),!be)throw new Hr;var lt=[new mn(D[1],y),new mn(O[0],y)];return new ua(W,null,0,lt,En.ITF,(new Date).getTime())},p.decodeMiddle=function(y,v,_,E){var w=new Int32Array(10),D=new Int32Array(5),O=new Int32Array(5);for(w.fill(0),D.fill(0),O.fill(0);v<_;){bs.recordPattern(y,v,w);for(var A=0;A<5;A++){var W=2*A;D[A]=w[W],O[A]=w[W+1]}var q=p.decodeDigit(D);E.append(q.toString()),q=this.decodeDigit(O),E.append(q.toString()),w.forEach(function(_e){v+=_e})}},p.prototype.decodeStart=function(y){var v=p.skipWhiteSpace(y),_=p.findGuardPattern(y,v,p.START_PATTERN);return this.narrowLineWidth=(_[1]-_[0])/4,this.validateQuietZone(y,_[0]),_},p.prototype.validateQuietZone=function(y,v){var _=10*this.narrowLineWidth;_=_<v?_:v;for(var E=v-1;_>0&&E>=0&&!y.get(E);E--)_--;if(0!==_)throw new Cr},p.skipWhiteSpace=function(y){var v=y.getSize(),_=y.getNextSet(0);if(_===v)throw new Cr;return _},p.prototype.decodeEnd=function(y){y.reverse();try{var v=p.skipWhiteSpace(y),_=void 0;try{_=p.findGuardPattern(y,v,p.END_PATTERN_REVERSED[0])}catch(w){w instanceof Cr&&(_=p.findGuardPattern(y,v,p.END_PATTERN_REVERSED[1]))}this.validateQuietZone(y,_[0]);var E=_[0];return _[0]=y.getSize()-_[1],_[1]=y.getSize()-E,_}finally{y.reverse()}},p.findGuardPattern=function(y,v,_){var E=_.length,w=new Int32Array(E),D=y.getSize(),O=!1,A=0,W=v;w.fill(0);for(var q=v;q<D;q++)if(y.get(q)!==O)w[A]++;else{if(A===E-1){if(bs.patternMatchVariance(w,_,p.MAX_INDIVIDUAL_VARIANCE)<p.MAX_AVG_VARIANCE)return[W,q];W+=w[0]+w[1],Vi.arraycopy(w,2,w,0,A-1),w[A-1]=0,w[A]=0,A--}else A++;w[A]=1,O=!O}throw new Cr},p.decodeDigit=function(y){for(var v=p.MAX_AVG_VARIANCE,_=-1,E=p.PATTERNS.length,w=0;w<E;w++){var O=bs.patternMatchVariance(y,p.PATTERNS[w],p.MAX_INDIVIDUAL_VARIANCE);O<v?(v=O,_=w):O===v&&(_=-1)}if(_>=0)return _%10;throw new Cr},p.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],p.MAX_AVG_VARIANCE=.38,p.MAX_INDIVIDUAL_VARIANCE=.5,p.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],p.START_PATTERN=Int32Array.from([1,1,1,1]),p.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],p}(bs);const fP=q$;var eK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),tK=function(g){function p(){var y=null!==g&&g.apply(this,arguments)||this;return y.decodeRowStringBuffer="",y}return eK(p,g),p.findStartGuardPattern=function(y){for(var _,v=!1,E=0,w=Int32Array.from([0,0,0]);!v;){w=Int32Array.from([0,0,0]);var D=(_=p.findGuardPattern(y,E,!1,this.START_END_PATTERN,w))[0],O=D-((E=_[1])-D);O>=0&&(v=y.isRange(O,D,!1))}return _},p.checkChecksum=function(y){return p.checkStandardUPCEANChecksum(y)},p.checkStandardUPCEANChecksum=function(y){var v=y.length;if(0===v)return!1;var _=parseInt(y.charAt(v-1),10);return p.getStandardUPCEANChecksum(y.substring(0,v-1))===_},p.getStandardUPCEANChecksum=function(y){for(var v=y.length,_=0,E=v-1;E>=0;E-=2){if((w=y.charAt(E).charCodeAt(0)-"0".charCodeAt(0))<0||w>9)throw new Hr;_+=w}for(_*=3,E=v-2;E>=0;E-=2){var w;if((w=y.charAt(E).charCodeAt(0)-"0".charCodeAt(0))<0||w>9)throw new Hr;_+=w}return(1e3-_)%10},p.decodeEnd=function(y,v){return p.findGuardPattern(y,v,!1,p.START_END_PATTERN,new Int32Array(p.START_END_PATTERN.length).fill(0))},p.findGuardPatternWithoutCounters=function(y,v,_,E){return this.findGuardPattern(y,v,_,E,new Int32Array(E.length))},p.findGuardPattern=function(y,v,_,E,w){for(var D=y.getSize(),O=0,A=v=_?y.getNextUnset(v):y.getNextSet(v),W=E.length,q=_,_e=v;_e<D;_e++)if(y.get(_e)!==q)w[O]++;else{if(O===W-1){if(bs.patternMatchVariance(w,E,p.MAX_INDIVIDUAL_VARIANCE)<p.MAX_AVG_VARIANCE)return Int32Array.from([A,_e]);A+=w[0]+w[1];for(var be=w.slice(2,w.length-1),We=0;We<O-1;We++)w[We]=be[We];w[O-1]=0,w[O]=0,O--}else O++;w[O]=1,q=!q}throw new Cr},p.decodeDigit=function(y,v,_,E){this.recordPattern(y,_,v);for(var w=this.MAX_AVG_VARIANCE,D=-1,O=E.length,A=0;A<O;A++){var q=bs.patternMatchVariance(v,E[A],p.MAX_INDIVIDUAL_VARIANCE);q<w&&(w=q,D=A)}if(D>=0)return D;throw new Cr},p.MAX_AVG_VARIANCE=.48,p.MAX_INDIVIDUAL_VARIANCE=.7,p.START_END_PATTERN=Int32Array.from([1,1,1]),p.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),p.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),p.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],p}(bs);const Kh=tK;var rK=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},nK=function(){function g(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return g.prototype.decodeRow=function(p,y,v){var _=this.decodeRowStringBuffer,E=this.decodeMiddle(y,v,_),w=_.toString(),D=g.parseExtensionString(w),O=[new mn((v[0]+v[1])/2,p),new mn(E,p)],A=new ua(w,null,0,O,En.UPC_EAN_EXTENSION,(new Date).getTime());return null!=D&&A.putAllMetadata(D),A},g.prototype.decodeMiddle=function(p,y,v){var _,E,w=this.decodeMiddleCounters;w[0]=0,w[1]=0,w[2]=0,w[3]=0;for(var D=p.getSize(),O=y[1],A=0,W=0;W<5&&O<D;W++){var q=Kh.decodeDigit(p,w,O,Kh.L_AND_G_PATTERNS);v+=String.fromCharCode("0".charCodeAt(0)+q%10);try{for(var _e=(_=void 0,rK(w)),be=_e.next();!be.done;be=_e.next())O+=be.value}catch(dt){_={error:dt}}finally{try{be&&!be.done&&(E=_e.return)&&E.call(_e)}finally{if(_)throw _.error}}q>=10&&(A|=1<<4-W),4!==W&&(O=p.getNextSet(O),O=p.getNextUnset(O))}if(5!==v.length)throw new Cr;var qe=this.determineCheckDigit(A);if(g.extensionChecksum(v.toString())!==qe)throw new Cr;return O},g.extensionChecksum=function(p){for(var y=p.length,v=0,_=y-2;_>=0;_-=2)v+=p.charAt(_).charCodeAt(0)-"0".charCodeAt(0);for(v*=3,_=y-1;_>=0;_-=2)v+=p.charAt(_).charCodeAt(0)-"0".charCodeAt(0);return(v*=3)%10},g.prototype.determineCheckDigit=function(p){for(var y=0;y<10;y++)if(p===this.CHECK_DIGIT_ENCODINGS[y])return y;throw new Cr},g.parseExtensionString=function(p){if(5!==p.length)return null;var y=g.parseExtension5String(p);return null==y?null:new Map([[Es.SUGGESTED_PRICE,y]])},g.parseExtension5String=function(p){var y;switch(p.charAt(0)){case"0":y="\xa3";break;case"5":y="$";break;case"9":switch(p){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}y="";break;default:y=""}var v=parseInt(p.substring(1)),E=v%100;return y+(v/100).toString()+"."+(E<10?"0"+E:E.toString())},g}();const iK=nK;var oK=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},sK=function(){function g(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return g.prototype.decodeRow=function(p,y,v){var _=this.decodeRowStringBuffer,E=this.decodeMiddle(y,v,_),w=_.toString(),D=g.parseExtensionString(w),O=[new mn((v[0]+v[1])/2,p),new mn(E,p)],A=new ua(w,null,0,O,En.UPC_EAN_EXTENSION,(new Date).getTime());return null!=D&&A.putAllMetadata(D),A},g.prototype.decodeMiddle=function(p,y,v){var _,E,w=this.decodeMiddleCounters;w[0]=0,w[1]=0,w[2]=0,w[3]=0;for(var D=p.getSize(),O=y[1],A=0,W=0;W<2&&O<D;W++){var q=Kh.decodeDigit(p,w,O,Kh.L_AND_G_PATTERNS);v+=String.fromCharCode("0".charCodeAt(0)+q%10);try{for(var _e=(_=void 0,oK(w)),be=_e.next();!be.done;be=_e.next())O+=be.value}catch(qe){_={error:qe}}finally{try{be&&!be.done&&(E=_e.return)&&E.call(_e)}finally{if(_)throw _.error}}q>=10&&(A|=1<<1-W),1!==W&&(O=p.getNextSet(O),O=p.getNextUnset(O))}if(2!==v.length)throw new Cr;if(parseInt(v.toString())%4!==A)throw new Cr;return O},g.parseExtensionString=function(p){return 2!==p.length?null:new Map([[Es.ISSUE_NUMBER,parseInt(p)]])},g}();const aK=sK;var lK=function(){function g(){}return g.decodeRow=function(p,y,v){var _=Kh.findGuardPattern(y,v,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new iK).decodeRow(p,y,_)}catch(D){return(new aK).decodeRow(p,y,_)}},g.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),g}();const uK=lK;var cK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),dK=function(g){function p(){var y=g.call(this)||this;y.decodeRowStringBuffer="",p.L_AND_G_PATTERNS=p.L_PATTERNS.map(function(D){return Int32Array.from(D)});for(var v=10;v<20;v++){for(var _=p.L_PATTERNS[v-10],E=new Int32Array(_.length),w=0;w<_.length;w++)E[w]=_[_.length-w-1];p.L_AND_G_PATTERNS[v]=E}return y}return cK(p,g),p.prototype.decodeRow=function(y,v,_){var E=p.findStartGuardPattern(v),w=null==_?null:_.get(Ci.NEED_RESULT_POINT_CALLBACK);if(null!=w){var D=new mn((E[0]+E[1])/2,y);w.foundPossibleResultPoint(D)}var O=this.decodeMiddle(v,E,this.decodeRowStringBuffer),A=O.rowOffset,W=O.resultString;if(null!=w){var q=new mn(A,y);w.foundPossibleResultPoint(q)}var _e=p.decodeEnd(v,A);if(null!=w){var be=new mn((_e[0]+_e[1])/2,y);w.foundPossibleResultPoint(be)}var We=_e[1],qe=We+(We-_e[0]);if(qe>=v.getSize()||!v.isRange(We,qe,!1))throw new Cr;var dt=W.toString();if(dt.length<8)throw new Hr;if(!p.checkChecksum(dt))throw new $o;var gt=(E[1]+E[0])/2,lt=(_e[1]+_e[0])/2,Tt=this.getBarcodeFormat(),Rt=[new mn(gt,y),new mn(lt,y)],Xt=new ua(dt,null,0,Rt,Tt,(new Date).getTime()),ur=0;try{var _r=uK.decodeRow(y,v,_e[1]);Xt.putMetadata(Es.UPC_EAN_EXTENSION,_r.getText()),Xt.putAllMetadata(_r.getResultMetadata()),Xt.addResultPoints(_r.getResultPoints()),ur=_r.getText().length}catch(Mn){}var Ur=null==_?null:_.get(Ci.ALLOWED_EAN_EXTENSIONS);if(null!=Ur){var $r=!1;for(var rn in Ur)if(ur.toString()===rn){$r=!0;break}if(!$r)throw new Cr}return Xt},p.checkChecksum=function(y){return p.checkStandardUPCEANChecksum(y)},p.checkStandardUPCEANChecksum=function(y){var v=y.length;if(0===v)return!1;var _=parseInt(y.charAt(v-1),10);return p.getStandardUPCEANChecksum(y.substring(0,v-1))===_},p.getStandardUPCEANChecksum=function(y){for(var v=y.length,_=0,E=v-1;E>=0;E-=2){if((w=y.charAt(E).charCodeAt(0)-"0".charCodeAt(0))<0||w>9)throw new Hr;_+=w}for(_*=3,E=v-2;E>=0;E-=2){var w;if((w=y.charAt(E).charCodeAt(0)-"0".charCodeAt(0))<0||w>9)throw new Hr;_+=w}return(1e3-_)%10},p.decodeEnd=function(y,v){return p.findGuardPattern(y,v,!1,p.START_END_PATTERN,new Int32Array(p.START_END_PATTERN.length).fill(0))},p}(Kh);const es=dK;var hK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),pP=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},fK=function(g){function p(){var y=g.call(this)||this;return y.decodeMiddleCounters=Int32Array.from([0,0,0,0]),y}return hK(p,g),p.prototype.decodeMiddle=function(y,v,_){var E,w,D,O,A=this.decodeMiddleCounters;A[0]=0,A[1]=0,A[2]=0,A[3]=0;for(var W=y.getSize(),q=v[1],_e=0,be=0;be<6&&q<W;be++){var We=es.decodeDigit(y,A,q,es.L_AND_G_PATTERNS);_+=String.fromCharCode("0".charCodeAt(0)+We%10);try{for(var qe=(E=void 0,pP(A)),dt=qe.next();!dt.done;dt=qe.next())q+=dt.value}catch(Xt){E={error:Xt}}finally{try{dt&&!dt.done&&(w=qe.return)&&w.call(qe)}finally{if(E)throw E.error}}We>=10&&(_e|=1<<5-be)}for(_=p.determineFirstDigit(_,_e),q=es.findGuardPattern(y,q,!0,es.MIDDLE_PATTERN,new Int32Array(es.MIDDLE_PATTERN.length).fill(0))[1],be=0;be<6&&q<W;be++){We=es.decodeDigit(y,A,q,es.L_PATTERNS),_+=String.fromCharCode("0".charCodeAt(0)+We);try{for(var Tt=(D=void 0,pP(A)),Rt=Tt.next();!Rt.done;Rt=Tt.next())q+=Rt.value}catch(_r){D={error:_r}}finally{try{Rt&&!Rt.done&&(O=Tt.return)&&O.call(Tt)}finally{if(D)throw D.error}}}return{rowOffset:q,resultString:_}},p.prototype.getBarcodeFormat=function(){return En.EAN_13},p.determineFirstDigit=function(y,v){for(var _=0;_<10;_++)if(v===this.FIRST_DIGIT_ENCODINGS[_])return String.fromCharCode("0".charCodeAt(0)+_)+y;throw new Cr},p.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],p}(es);const oC=fK;var pK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),mP=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},mK=function(g){function p(){var y=g.call(this)||this;return y.decodeMiddleCounters=Int32Array.from([0,0,0,0]),y}return pK(p,g),p.prototype.decodeMiddle=function(y,v,_){var E,w,D,O,A=this.decodeMiddleCounters;A[0]=0,A[1]=0,A[2]=0,A[3]=0;for(var W=y.getSize(),q=v[1],_e=0;_e<4&&q<W;_e++){var be=es.decodeDigit(y,A,q,es.L_PATTERNS);_+=String.fromCharCode("0".charCodeAt(0)+be);try{for(var We=(E=void 0,mP(A)),qe=We.next();!qe.done;qe=We.next())q+=qe.value}catch(Rt){E={error:Rt}}finally{try{qe&&!qe.done&&(w=We.return)&&w.call(We)}finally{if(E)throw E.error}}}for(q=es.findGuardPattern(y,q,!0,es.MIDDLE_PATTERN,new Int32Array(es.MIDDLE_PATTERN.length).fill(0))[1],_e=0;_e<4&&q<W;_e++){be=es.decodeDigit(y,A,q,es.L_PATTERNS),_+=String.fromCharCode("0".charCodeAt(0)+be);try{for(var lt=(D=void 0,mP(A)),Tt=lt.next();!Tt.done;Tt=lt.next())q+=Tt.value}catch(ur){D={error:ur}}finally{try{Tt&&!Tt.done&&(O=lt.return)&&O.call(lt)}finally{if(D)throw D.error}}}return{rowOffset:q,resultString:_}},p.prototype.getBarcodeFormat=function(){return En.EAN_8},p}(es);const gP=mK;var gK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),yK=function(g){function p(){var y=null!==g&&g.apply(this,arguments)||this;return y.ean13Reader=new oC,y}return gK(p,g),p.prototype.getBarcodeFormat=function(){return En.UPC_A},p.prototype.decode=function(y,v){return this.maybeReturnResult(this.ean13Reader.decode(y))},p.prototype.decodeRow=function(y,v,_){return this.maybeReturnResult(this.ean13Reader.decodeRow(y,v,_))},p.prototype.decodeMiddle=function(y,v,_){return this.ean13Reader.decodeMiddle(y,v,_)},p.prototype.maybeReturnResult=function(y){var v=y.getText();if("0"===v.charAt(0)){var _=new ua(v.substring(1),null,null,y.getResultPoints(),En.UPC_A);return null!=y.getResultMetadata()&&_.putAllMetadata(y.getResultMetadata()),_}throw new Cr},p.prototype.reset=function(){this.ean13Reader.reset()},p}(es);const yP=yK;var vK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),_K=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},EK=function(g){function p(){var y=g.call(this)||this;return y.decodeMiddleCounters=new Int32Array(4),y}return vK(p,g),p.prototype.decodeMiddle=function(y,v,_){var E,w,D=this.decodeMiddleCounters.map(function(dt){return dt});D[0]=0,D[1]=0,D[2]=0,D[3]=0;for(var O=y.getSize(),A=v[1],W=0,q=0;q<6&&A<O;q++){var _e=p.decodeDigit(y,D,A,p.L_AND_G_PATTERNS);_+=String.fromCharCode("0".charCodeAt(0)+_e%10);try{for(var be=(E=void 0,_K(D)),We=be.next();!We.done;We=be.next())A+=We.value}catch(dt){E={error:dt}}finally{try{We&&!We.done&&(w=be.return)&&w.call(be)}finally{if(E)throw E.error}}_e>=10&&(W|=1<<5-q)}return p.determineNumSysAndCheckDigit(new Ai(_),W),A},p.prototype.decodeEnd=function(y,v){return p.findGuardPatternWithoutCounters(y,v,!0,p.MIDDLE_END_PATTERN)},p.prototype.checkChecksum=function(y){return es.checkChecksum(p.convertUPCEtoUPCA(y))},p.determineNumSysAndCheckDigit=function(y,v){for(var _=0;_<=1;_++)for(var E=0;E<10;E++)if(v===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[_][E])return y.insert(0,"0"+_),void y.append("0"+E);throw Cr.getNotFoundInstance()},p.prototype.getBarcodeFormat=function(){return En.UPC_E},p.convertUPCEtoUPCA=function(y){var v=y.slice(1,7).split("").map(function(w){return w.charCodeAt(0)}),_=new Ai;_.append(y.charAt(0));var E=v[5];switch(E){case 0:case 1:case 2:_.appendChars(v,0,2),_.append(E),_.append("0000"),_.appendChars(v,2,3);break;case 3:_.appendChars(v,0,3),_.append("00000"),_.appendChars(v,3,2);break;case 4:_.appendChars(v,0,4),_.append("00000"),_.append(v[4]);break;default:_.appendChars(v,0,5),_.append("0000"),_.append(E)}return y.length>=8&&_.append(y.charAt(7)),_.toString()},p.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),p.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],p}(es);const vP=EK;var bK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),_P=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},CK=function(g){function p(y){var v=g.call(this)||this,_=null==y?null:y.get(Ci.POSSIBLE_FORMATS),E=[];return null!=_&&(_.indexOf(En.EAN_13)>-1&&E.push(new oC),_.indexOf(En.UPC_A)>-1&&E.push(new yP),_.indexOf(En.EAN_8)>-1&&E.push(new gP),_.indexOf(En.UPC_E)>-1&&E.push(new vP)),0===E.length&&(E.push(new oC),E.push(new yP),E.push(new gP),E.push(new vP)),v.readers=E,v}return bK(p,g),p.prototype.decodeRow=function(y,v,_){var E,w;try{for(var D=_P(this.readers),O=D.next();!O.done;O=D.next()){var A=O.value;try{var W=A.decodeRow(y,v,_),q=W.getBarcodeFormat()===En.EAN_13&&"0"===W.getText().charAt(0),_e=null==_?null:_.get(Ci.POSSIBLE_FORMATS),be=null==_e||_e.includes(En.UPC_A);if(q&&be){var We=W.getRawBytes(),qe=new ua(W.getText().substring(1),We,We?We.length:null,W.getResultPoints(),En.UPC_A);return qe.putAllMetadata(W.getResultMetadata()),qe}return W}catch(dt){}}}catch(dt){E={error:dt}}finally{try{O&&!O.done&&(w=D.return)&&w.call(D)}finally{if(E)throw E.error}}throw new Cr},p.prototype.reset=function(){var y,v;try{for(var _=_P(this.readers),E=_.next();!E.done;E=_.next())E.value.reset()}catch(D){y={error:D}}finally{try{E&&!E.done&&(v=_.return)&&v.call(_)}finally{if(y)throw y.error}}},p}(bs);const sC=CK;var wK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),xK=function(g){function p(){var y=g.call(this)||this;return y.decodeFinderCounters=new Int32Array(4),y.dataCharacterCounters=new Int32Array(8),y.oddRoundingErrors=new Array(4),y.evenRoundingErrors=new Array(4),y.oddCounts=new Array(y.dataCharacterCounters.length/2),y.evenCounts=new Array(y.dataCharacterCounters.length/2),y}return wK(p,g),p.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},p.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},p.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},p.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},p.prototype.getOddCounts=function(){return this.oddCounts},p.prototype.getEvenCounts=function(){return this.evenCounts},p.prototype.parseFinderValue=function(y,v){for(var _=0;_<v.length;_++)if(bs.patternMatchVariance(y,v[_],p.MAX_INDIVIDUAL_VARIANCE)<p.MAX_AVG_VARIANCE)return _;throw new Cr},p.count=function(y){return Ei.sum(new Int32Array(y))},p.increment=function(y,v){for(var _=0,E=v[0],w=1;w<y.length;w++)v[w]>E&&(E=v[w],_=w);y[_]++},p.decrement=function(y,v){for(var _=0,E=v[0],w=1;w<y.length;w++)v[w]<E&&(E=v[w],_=w);y[_]--},p.isFinderPattern=function(y){var v,_,E=y[0]+y[1],D=E/(E+y[2]+y[3]);if(D>=p.MIN_FINDER_PATTERN_RATIO&&D<=p.MAX_FINDER_PATTERN_RATIO){var O=Number.MAX_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER;try{for(var W=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(y),q=W.next();!q.done;q=W.next()){var _e=q.value;_e>A&&(A=_e),_e<O&&(O=_e)}}catch(be){v={error:be}}finally{try{q&&!q.done&&(_=W.return)&&_.call(W)}finally{if(v)throw v.error}}return A<10*O}return!1},p.MAX_AVG_VARIANCE=.2,p.MAX_INDIVIDUAL_VARIANCE=.45,p.MIN_FINDER_PATTERN_RATIO=9.5/12,p.MAX_FINDER_PATTERN_RATIO=12.5/14,p}(bs);const Cd=xK;var DK=function(){function g(p,y){this.value=p,this.checksumPortion=y}return g.prototype.getValue=function(){return this.value},g.prototype.getChecksumPortion=function(){return this.checksumPortion},g.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},g.prototype.equals=function(p){return p instanceof g&&(this.value===p.value&&this.checksumPortion===p.checksumPortion)},g.prototype.hashCode=function(){return this.value^this.checksumPortion},g}();const Ey=DK;var SK=function(){function g(p,y,v,_,E){this.value=p,this.startEnd=y,this.value=p,this.startEnd=y,this.resultPoints=new Array,this.resultPoints.push(new mn(v,E)),this.resultPoints.push(new mn(_,E))}return g.prototype.getValue=function(){return this.value},g.prototype.getStartEnd=function(){return this.startEnd},g.prototype.getResultPoints=function(){return this.resultPoints},g.prototype.equals=function(p){return p instanceof g&&this.value===p.value},g.prototype.hashCode=function(){return this.value},g}();const EP=SK;var IK=function(){function g(){}return g.getRSSvalue=function(p,y,v){var _,E,w=0;try{for(var D=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),O=D.next();!O.done;O=D.next())w+=O.value}catch(lt){_={error:lt}}finally{try{O&&!O.done&&(E=D.return)&&E.call(D)}finally{if(_)throw _.error}}for(var W=0,q=0,_e=p.length,be=0;be<_e-1;be++){var We=void 0;for(We=1,q|=1<<be;We<p[be];We++,q&=~(1<<be)){var qe=g.combins(w-We-1,_e-be-2);if(v&&0===q&&w-We-(_e-be-1)>=_e-be-1&&(qe-=g.combins(w-We-(_e-be),_e-be-2)),_e-be-1>1){for(var dt=0,gt=w-We-(_e-be-2);gt>y;gt--)dt+=g.combins(w-We-gt-1,_e-be-3);qe-=dt*(_e-1-be)}else w-We>y&&qe--;W+=qe}w-=We}return W},g.combins=function(p,y){var v,_;p-y>y?(_=y,v=p-y):(_=p-y,v=y);for(var E=1,w=1,D=p;D>v;D--)E*=D,w<=_&&(E/=w,w++);for(;w<=_;)E/=w,w++;return E},g}();const zh=IK;var TK=function(){function g(){}return g.buildBitArray=function(p){var y=2*p.length-1;null==p[p.length-1].getRightChar()&&(y-=1);for(var _=new ds(12*y),E=0,D=p[0].getRightChar().getValue(),O=11;O>=0;--O)0!=(D&1<<O)&&_.set(E),E++;for(O=1;O<p.length;++O){for(var A=p[O],W=A.getLeftChar().getValue(),q=11;q>=0;--q)0!=(W&1<<q)&&_.set(E),E++;if(null!=A.getRightChar()){var _e=A.getRightChar().getValue();for(q=11;q>=0;--q)0!=(_e&1<<q)&&_.set(E),E++}}return _},g}();const AK=TK;var PK=function(){function g(p,y){y?this.decodedInformation=null:(this.finished=p,this.decodedInformation=y)}return g.prototype.getDecodedInformation=function(){return this.decodedInformation},g.prototype.isFinished=function(){return this.finished},g}();const wd=PK;var RK=function(){function g(p){this.newPosition=p}return g.prototype.getNewPosition=function(){return this.newPosition},g}();const aC=RK;var LK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),NK=function(g){function p(y,v){var _=g.call(this,y)||this;return _.value=v,_}return LK(p,g),p.prototype.getValue=function(){return this.value},p.prototype.isFNC1=function(){return this.value===p.FNC1},p.FNC1="$",p}(aC);const xl=NK;var FK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),jK=function(g){function p(y,v,_){var E=g.call(this,y)||this;return _?(E.remaining=!0,E.remainingValue=E.remainingValue):(E.remaining=!1,E.remainingValue=0),E.newString=v,E}return FK(p,g),p.prototype.getNewString=function(){return this.newString},p.prototype.isRemaining=function(){return this.remaining},p.prototype.getRemainingValue=function(){return this.remainingValue},p}(aC);const Md=jK;var BK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),UK=function(g){function p(y,v,_){var E=g.call(this,y)||this;if(v<0||v>10||_<0||_>10)throw new Hr;return E.firstDigit=v,E.secondDigit=_,E}return BK(p,g),p.prototype.getFirstDigit=function(){return this.firstDigit},p.prototype.getSecondDigit=function(){return this.secondDigit},p.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},p.prototype.isFirstDigitFNC1=function(){return this.firstDigit===p.FNC1},p.prototype.isSecondDigitFNC1=function(){return this.secondDigit===p.FNC1},p.prototype.isAnyFNC1=function(){return this.firstDigit===p.FNC1||this.secondDigit===p.FNC1},p.FNC1=10,p}(aC);const Gh=UK;var by=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},VK=function(){function g(){}return g.parseFieldsInGeneralPurpose=function(p){var y,v,_,E,w,D,O,A;if(!p)return null;if(p.length<2)throw new Cr;var W=p.substring(0,2);try{for(var q=by(g.TWO_DIGIT_DATA_LENGTH),_e=q.next();!_e.done;_e=q.next())if((be=_e.value)[0]===W)return be[1]===g.VARIABLE_LENGTH?g.processVariableAI(2,be[2],p):g.processFixedAI(2,be[1],p)}catch(ur){y={error:ur}}finally{try{_e&&!_e.done&&(v=q.return)&&v.call(q)}finally{if(y)throw y.error}}if(p.length<3)throw new Cr;var We=p.substring(0,3);try{for(var qe=by(g.THREE_DIGIT_DATA_LENGTH),dt=qe.next();!dt.done;dt=qe.next())if((be=dt.value)[0]===We)return be[1]===g.VARIABLE_LENGTH?g.processVariableAI(3,be[2],p):g.processFixedAI(3,be[1],p)}catch(ur){_={error:ur}}finally{try{dt&&!dt.done&&(E=qe.return)&&E.call(qe)}finally{if(_)throw _.error}}try{for(var gt=by(g.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),lt=gt.next();!lt.done;lt=gt.next())if((be=lt.value)[0]===We)return be[1]===g.VARIABLE_LENGTH?g.processVariableAI(4,be[2],p):g.processFixedAI(4,be[1],p)}catch(ur){w={error:ur}}finally{try{lt&&!lt.done&&(D=gt.return)&&D.call(gt)}finally{if(w)throw w.error}}if(p.length<4)throw new Cr;var Tt=p.substring(0,4);try{for(var Rt=by(g.FOUR_DIGIT_DATA_LENGTH),Xt=Rt.next();!Xt.done;Xt=Rt.next()){var be;if((be=Xt.value)[0]===Tt)return be[1]===g.VARIABLE_LENGTH?g.processVariableAI(4,be[2],p):g.processFixedAI(4,be[1],p)}}catch(ur){O={error:ur}}finally{try{Xt&&!Xt.done&&(A=Rt.return)&&A.call(Rt)}finally{if(O)throw O.error}}throw new Cr},g.processFixedAI=function(p,y,v){if(v.length<p)throw new Cr;var _=v.substring(0,p);if(v.length<p+y)throw new Cr;var E=v.substring(p,p+y),w=v.substring(p+y),D="("+_+")"+E,O=g.parseFieldsInGeneralPurpose(w);return null==O?D:D+O},g.processVariableAI=function(p,y,v){var E,_=v.substring(0,p),w=v.substring(p,E=v.length<p+y?v.length:p+y),D=v.substring(E),O="("+_+")"+w,A=g.parseFieldsInGeneralPurpose(D);return null==A?O:O+A},g.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",g.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",g.VARIABLE_LENGTH,20],["22",g.VARIABLE_LENGTH,29],["30",g.VARIABLE_LENGTH,8],["37",g.VARIABLE_LENGTH,8],["90",g.VARIABLE_LENGTH,30],["91",g.VARIABLE_LENGTH,30],["92",g.VARIABLE_LENGTH,30],["93",g.VARIABLE_LENGTH,30],["94",g.VARIABLE_LENGTH,30],["95",g.VARIABLE_LENGTH,30],["96",g.VARIABLE_LENGTH,30],["97",g.VARIABLE_LENGTH,3],["98",g.VARIABLE_LENGTH,30],["99",g.VARIABLE_LENGTH,30]],g.THREE_DIGIT_DATA_LENGTH=[["240",g.VARIABLE_LENGTH,30],["241",g.VARIABLE_LENGTH,30],["242",g.VARIABLE_LENGTH,6],["250",g.VARIABLE_LENGTH,30],["251",g.VARIABLE_LENGTH,30],["253",g.VARIABLE_LENGTH,17],["254",g.VARIABLE_LENGTH,20],["400",g.VARIABLE_LENGTH,30],["401",g.VARIABLE_LENGTH,30],["402",17],["403",g.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",g.VARIABLE_LENGTH,20],["421",g.VARIABLE_LENGTH,15],["422",3],["423",g.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],g.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",g.VARIABLE_LENGTH,15],["391",g.VARIABLE_LENGTH,18],["392",g.VARIABLE_LENGTH,15],["393",g.VARIABLE_LENGTH,18],["703",g.VARIABLE_LENGTH,30]],g.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",g.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",g.VARIABLE_LENGTH,20],["8003",g.VARIABLE_LENGTH,30],["8004",g.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",g.VARIABLE_LENGTH,30],["8008",g.VARIABLE_LENGTH,12],["8018",18],["8020",g.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",g.VARIABLE_LENGTH,70],["8200",g.VARIABLE_LENGTH,70]],g}();const kK=VK;var WK=function(){function g(p){this.buffer=new Ai,this.information=p}return g.prototype.decodeAllCodes=function(p,y){for(var v=y,_=null;;){var E=this.decodeGeneralPurposeField(v,_),w=kK.parseFieldsInGeneralPurpose(E.getNewString());if(null!=w&&p.append(w),_=E.isRemaining()?""+E.getRemainingValue():null,v===E.getNewPosition())break;v=E.getNewPosition()}return p.toString()},g.prototype.isStillNumeric=function(p){if(p+7>this.information.getSize())return p+4<=this.information.getSize();for(var y=p;y<p+3;++y)if(this.information.get(y))return!0;return this.information.get(p+3)},g.prototype.decodeNumeric=function(p){if(p+7>this.information.getSize()){var y=this.extractNumericValueFromBitArray(p,4);return new Gh(this.information.getSize(),0===y?Gh.FNC1:y-1,Gh.FNC1)}var v=this.extractNumericValueFromBitArray(p,7);return new Gh(p+7,(v-8)/11,(v-8)%11)},g.prototype.extractNumericValueFromBitArray=function(p,y){return g.extractNumericValueFromBitArray(this.information,p,y)},g.extractNumericValueFromBitArray=function(p,y,v){for(var _=0,E=0;E<v;++E)p.get(y+E)&&(_|=1<<v-E-1);return _},g.prototype.decodeGeneralPurposeField=function(p,y){this.buffer.setLengthToZero(),null!=y&&this.buffer.append(y),this.current.setPosition(p);var v=this.parseBlocks();return null!=v&&v.isRemaining()?new Md(this.current.getPosition(),this.buffer.toString(),v.getRemainingValue()):new Md(this.current.getPosition(),this.buffer.toString())},g.prototype.parseBlocks=function(){var p,y;do{var v=this.current.getPosition();if(p=this.current.isAlpha()?(y=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(y=this.parseIsoIec646Block()).isFinished():(y=this.parseNumericBlock()).isFinished(),v===this.current.getPosition()&&!p)break}while(!p);return y.getDecodedInformation()},g.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var p=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFirstDigitFNC1()){var y=void 0;return y=p.isSecondDigitFNC1()?new Md(this.current.getPosition(),this.buffer.toString()):new Md(this.current.getPosition(),this.buffer.toString(),p.getSecondDigit()),new wd(!0,y)}if(this.buffer.append(p.getFirstDigit()),p.isSecondDigitFNC1())return y=new Md(this.current.getPosition(),this.buffer.toString()),new wd(!0,y);this.buffer.append(p.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wd(!1)},g.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var p=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFNC1()){var y=new Md(this.current.getPosition(),this.buffer.toString());return new wd(!0,y)}this.buffer.append(p.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wd(!1)},g.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var p=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(p.getNewPosition()),p.isFNC1()){var y=new Md(this.current.getPosition(),this.buffer.toString());return new wd(!0,y)}this.buffer.append(p.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wd(!1)},g.prototype.isStillIsoIec646=function(p){if(p+5>this.information.getSize())return!1;var y=this.extractNumericValueFromBitArray(p,5);if(y>=5&&y<16)return!0;if(p+7>this.information.getSize())return!1;var v=this.extractNumericValueFromBitArray(p,7);if(v>=64&&v<116)return!0;if(p+8>this.information.getSize())return!1;var _=this.extractNumericValueFromBitArray(p,8);return _>=232&&_<253},g.prototype.decodeIsoIec646=function(p){var y=this.extractNumericValueFromBitArray(p,5);if(15===y)return new xl(p+5,xl.FNC1);if(y>=5&&y<15)return new xl(p+5,"0"+(y-5));var E,v=this.extractNumericValueFromBitArray(p,7);if(v>=64&&v<90)return new xl(p+7,""+(v+1));if(v>=90&&v<116)return new xl(p+7,""+(v+7));switch(this.extractNumericValueFromBitArray(p,8)){case 232:E="!";break;case 233:E='"';break;case 234:E="%";break;case 235:E="&";break;case 236:E="'";break;case 237:E="(";break;case 238:E=")";break;case 239:E="*";break;case 240:E="+";break;case 241:E=",";break;case 242:E="-";break;case 243:E=".";break;case 244:E="/";break;case 245:E=":";break;case 246:E=";";break;case 247:E="<";break;case 248:E="=";break;case 249:E=">";break;case 250:E="?";break;case 251:E="_";break;case 252:E=" ";break;default:throw new Hr}return new xl(p+8,E)},g.prototype.isStillAlpha=function(p){if(p+5>this.information.getSize())return!1;var y=this.extractNumericValueFromBitArray(p,5);if(y>=5&&y<16)return!0;if(p+6>this.information.getSize())return!1;var v=this.extractNumericValueFromBitArray(p,6);return v>=16&&v<63},g.prototype.decodeAlphanumeric=function(p){var y=this.extractNumericValueFromBitArray(p,5);if(15===y)return new xl(p+5,xl.FNC1);if(y>=5&&y<15)return new xl(p+5,"0"+(y-5));var _,v=this.extractNumericValueFromBitArray(p,6);if(v>=32&&v<58)return new xl(p+6,""+(v+33));switch(v){case 58:_="*";break;case 59:_=",";break;case 60:_="-";break;case 61:_=".";break;case 62:_="/";break;default:throw new tu("Decoding invalid alphanumeric value: "+v)}return new xl(p+6,_)},g.prototype.isAlphaTo646ToAlphaLatch=function(p){if(p+1>this.information.getSize())return!1;for(var y=0;y<5&&y+p<this.information.getSize();++y)if(2===y){if(!this.information.get(p+2))return!1}else if(this.information.get(p+y))return!1;return!0},g.prototype.isAlphaOr646ToNumericLatch=function(p){if(p+3>this.information.getSize())return!1;for(var y=p;y<p+3;++y)if(this.information.get(y))return!1;return!0},g.prototype.isNumericToAlphaNumericLatch=function(p){if(p+1>this.information.getSize())return!1;for(var y=0;y<4&&y+p<this.information.getSize();++y)if(this.information.get(p+y))return!1;return!0},g}();const Cy=WK;var ZK=function(){function g(p){this.information=p,this.generalDecoder=new Cy(p)}return g.prototype.getInformation=function(){return this.information},g.prototype.getGeneralDecoder=function(){return this.generalDecoder},g}();const bP=ZK;var $K=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),KK=function(g){function p(y){return g.call(this,y)||this}return $K(p,g),p.prototype.encodeCompressedGtin=function(y,v){y.append("(01)");var _=y.length();y.append("9"),this.encodeCompressedGtinWithoutAI(y,v,_)},p.prototype.encodeCompressedGtinWithoutAI=function(y,v,_){for(var E=0;E<4;++E){var w=this.getGeneralDecoder().extractNumericValueFromBitArray(v+10*E,10);w/100==0&&y.append("0"),w/10==0&&y.append("0"),y.append(w)}p.appendCheckDigit(y,_)},p.appendCheckDigit=function(y,v){for(var _=0,E=0;E<13;E++){var w=y.charAt(E+v).charCodeAt(0)-"0".charCodeAt(0);_+=0==(1&E)?3*w:w}10==(_=10-_%10)&&(_=0),y.append(_)},p.GTIN_SIZE=40,p}(bP);const Dl=KK;var zK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),GK=function(g){function p(y){return g.call(this,y)||this}return zK(p,g),p.prototype.parseInformation=function(){var y=new Ai;y.append("(01)");var v=y.length(),_=this.getGeneralDecoder().extractNumericValueFromBitArray(p.HEADER_SIZE,4);return y.append(_),this.encodeCompressedGtinWithoutAI(y,p.HEADER_SIZE+4,v),this.getGeneralDecoder().decodeAllCodes(y,p.HEADER_SIZE+44)},p.HEADER_SIZE=4,p}(Dl);const HK=GK;var YK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),JK=function(g){function p(y){return g.call(this,y)||this}return YK(p,g),p.prototype.parseInformation=function(){var y=new Ai;return this.getGeneralDecoder().decodeAllCodes(y,p.HEADER_SIZE)},p.HEADER_SIZE=5,p}(bP);const XK=JK;var QK=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),qK=function(g){function p(y){return g.call(this,y)||this}return QK(p,g),p.prototype.encodeCompressedWeight=function(y,v,_){var E=this.getGeneralDecoder().extractNumericValueFromBitArray(v,_);this.addWeightCode(y,E);for(var w=this.checkWeight(E),D=1e5,O=0;O<5;++O)w/D==0&&y.append("0"),D/=10;y.append(w)},p}(Dl);const wy=qK;var ez=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),tz=function(g){function p(y){return g.call(this,y)||this}return ez(p,g),p.prototype.parseInformation=function(){if(this.getInformation().getSize()!=p.HEADER_SIZE+wy.GTIN_SIZE+p.WEIGHT_SIZE)throw new Cr;var y=new Ai;return this.encodeCompressedGtin(y,p.HEADER_SIZE),this.encodeCompressedWeight(y,p.HEADER_SIZE+wy.GTIN_SIZE,p.WEIGHT_SIZE),y.toString()},p.HEADER_SIZE=5,p.WEIGHT_SIZE=15,p}(wy);const CP=tz;var rz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),nz=function(g){function p(y){return g.call(this,y)||this}return rz(p,g),p.prototype.addWeightCode=function(y,v){y.append("(3103)")},p.prototype.checkWeight=function(y){return y},p}(CP);const iz=nz;var oz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),sz=function(g){function p(y){return g.call(this,y)||this}return oz(p,g),p.prototype.addWeightCode=function(y,v){y.append(v<1e4?"(3202)":"(3203)")},p.prototype.checkWeight=function(y){return y<1e4?y:y-1e4},p}(CP);const az=sz;var lz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),uz=function(g){function p(y){return g.call(this,y)||this}return lz(p,g),p.prototype.parseInformation=function(){if(this.getInformation().getSize()<p.HEADER_SIZE+Dl.GTIN_SIZE)throw new Cr;var y=new Ai;this.encodeCompressedGtin(y,p.HEADER_SIZE);var v=this.getGeneralDecoder().extractNumericValueFromBitArray(p.HEADER_SIZE+Dl.GTIN_SIZE,p.LAST_DIGIT_SIZE);y.append("(392"),y.append(v),y.append(")");var _=this.getGeneralDecoder().decodeGeneralPurposeField(p.HEADER_SIZE+Dl.GTIN_SIZE+p.LAST_DIGIT_SIZE,null);return y.append(_.getNewString()),y.toString()},p.HEADER_SIZE=8,p.LAST_DIGIT_SIZE=2,p}(Dl);const cz=uz;var dz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),hz=function(g){function p(y){return g.call(this,y)||this}return dz(p,g),p.prototype.parseInformation=function(){if(this.getInformation().getSize()<p.HEADER_SIZE+Dl.GTIN_SIZE)throw new Cr;var y=new Ai;this.encodeCompressedGtin(y,p.HEADER_SIZE);var v=this.getGeneralDecoder().extractNumericValueFromBitArray(p.HEADER_SIZE+Dl.GTIN_SIZE,p.LAST_DIGIT_SIZE);y.append("(393"),y.append(v),y.append(")");var _=this.getGeneralDecoder().extractNumericValueFromBitArray(p.HEADER_SIZE+Dl.GTIN_SIZE+p.LAST_DIGIT_SIZE,p.FIRST_THREE_DIGITS_SIZE);_/100==0&&y.append("0"),_/10==0&&y.append("0"),y.append(_);var E=this.getGeneralDecoder().decodeGeneralPurposeField(p.HEADER_SIZE+Dl.GTIN_SIZE+p.LAST_DIGIT_SIZE+p.FIRST_THREE_DIGITS_SIZE,null);return y.append(E.getNewString()),y.toString()},p.HEADER_SIZE=8,p.LAST_DIGIT_SIZE=2,p.FIRST_THREE_DIGITS_SIZE=10,p}(Dl);const fz=hz;var pz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),mz=function(g){function p(y,v,_){var E=g.call(this,y)||this;return E.dateCode=_,E.firstAIdigits=v,E}return pz(p,g),p.prototype.parseInformation=function(){if(this.getInformation().getSize()!=p.HEADER_SIZE+p.GTIN_SIZE+p.WEIGHT_SIZE+p.DATE_SIZE)throw new Cr;var y=new Ai;return this.encodeCompressedGtin(y,p.HEADER_SIZE),this.encodeCompressedWeight(y,p.HEADER_SIZE+p.GTIN_SIZE,p.WEIGHT_SIZE),this.encodeCompressedDate(y,p.HEADER_SIZE+p.GTIN_SIZE+p.WEIGHT_SIZE),y.toString()},p.prototype.encodeCompressedDate=function(y,v){var _=this.getGeneralDecoder().extractNumericValueFromBitArray(v,p.DATE_SIZE);if(38400!=_){y.append("("),y.append(this.dateCode),y.append(")");var E=_%32,w=(_/=32)%12+1,D=_/=12;D/10==0&&y.append("0"),y.append(D),w/10==0&&y.append("0"),y.append(w),E/10==0&&y.append("0"),y.append(E)}},p.prototype.addWeightCode=function(y,v){y.append("("),y.append(this.firstAIdigits),y.append(v/1e5),y.append(")")},p.prototype.checkWeight=function(y){return y%1e5},p.HEADER_SIZE=8,p.WEIGHT_SIZE=20,p.DATE_SIZE=16,p}(wy);const Ec=mz;var yz=function(){function g(p,y,v,_){this.leftchar=p,this.rightchar=y,this.finderpattern=v,this.maybeLast=_}return g.prototype.mayBeLast=function(){return this.maybeLast},g.prototype.getLeftChar=function(){return this.leftchar},g.prototype.getRightChar=function(){return this.rightchar},g.prototype.getFinderPattern=function(){return this.finderpattern},g.prototype.mustBeLast=function(){return null==this.rightchar},g.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},g.equals=function(p,y){return p instanceof g&&g.equalsOrNull(p.leftchar,y.leftchar)&&g.equalsOrNull(p.rightchar,y.rightchar)&&g.equalsOrNull(p.finderpattern,y.finderpattern)},g.equalsOrNull=function(p,y){return null===p?null===y:g.equals(p,y)},g.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},g}();const wP=yz;var vz=function(){function g(p,y,v){this.pairs=p,this.rowNumber=y,this.wasReversed=v}return g.prototype.getPairs=function(){return this.pairs},g.prototype.getRowNumber=function(){return this.rowNumber},g.prototype.isReversed=function(){return this.wasReversed},g.prototype.isEquivalent=function(p){return this.checkEqualitity(this,p)},g.prototype.toString=function(){return"{ "+this.pairs+" }"},g.prototype.equals=function(p,y){return p instanceof g&&this.checkEqualitity(p,y)&&p.wasReversed===y.wasReversed},g.prototype.checkEqualitity=function(p,y){var v;if(p&&y)return p.forEach(function(_,E){y.forEach(function(w){_.getLeftChar().getValue()===w.getLeftChar().getValue()&&_.getRightChar().getValue()===w.getRightChar().getValue()&&_.getFinderPatter().getValue()===w.getFinderPatter().getValue()&&(v=!0)})}),v},g}();const _z=vz;var Ez=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),bc=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},bz=function(g){function p(){var y=null!==g&&g.apply(this,arguments)||this;return y.pairs=new Array(p.MAX_PAIRS),y.rows=new Array,y.startEnd=[2],y}return Ez(p,g),p.prototype.decodeRow=function(y,v,_){this.pairs.length=0,this.startFromEven=!1;try{return p.constructResult(this.decodeRow2pairs(y,v))}catch(E){}return this.pairs.length=0,this.startFromEven=!0,p.constructResult(this.decodeRow2pairs(y,v))},p.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},p.prototype.decodeRow2pairs=function(y,v){for(var _=!1;!_;)try{this.pairs.push(this.retrieveNextPair(v,this.pairs,y))}catch(D){if(D instanceof Cr){if(!this.pairs.length)throw new Cr;_=!0}}if(this.checkChecksum())return this.pairs;var E;if(E=!!this.rows.length,this.storeRow(y,!1),E){var w=this.checkRowsBoolean(!1);if(null!=w||null!=(w=this.checkRowsBoolean(!0)))return w}throw new Cr},p.prototype.checkRowsBoolean=function(y){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,y&&(this.rows=this.rows.reverse());var v=null;try{v=this.checkRows(new Array,0)}catch(_){console.log(_)}return y&&(this.rows=this.rows.reverse()),v},p.prototype.checkRows=function(y,v){for(var _,E,w=v;w<this.rows.length;w++){var D=this.rows[w];this.pairs.length=0;try{for(var O=(_=void 0,bc(y)),A=O.next();!A.done;A=O.next())this.pairs.push(A.value.getPairs())}catch(_e){_={error:_e}}finally{try{A&&!A.done&&(E=O.return)&&E.call(O)}finally{if(_)throw _.error}}if(this.pairs.push(D.getPairs()),p.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var q=new Array(y);q.push(D);try{return this.checkRows(q,w+1)}catch(_e){console.log(_e)}}}throw new Cr},p.isValidSequence=function(y){var v,_;try{for(var E=bc(p.FINDER_PATTERN_SEQUENCES),w=E.next();!w.done;w=E.next()){var D=w.value;if(!(y.length>D.length)){for(var O=!0,A=0;A<y.length;A++)if(y[A].getFinderPattern().getValue()!=D[A]){O=!1;break}if(O)return!0}}}catch(W){v={error:W}}finally{try{w&&!w.done&&(_=E.return)&&_.call(E)}finally{if(v)throw v.error}}return!1},p.prototype.storeRow=function(y,v){for(var _=0,E=!1,w=!1;_<this.rows.length;){var D=this.rows[_];if(D.getRowNumber()>y){w=D.isEquivalent(this.pairs);break}E=D.isEquivalent(this.pairs),_++}w||E||p.isPartialRow(this.pairs,this.rows)||(this.rows.push(_,new _z(this.pairs,y,v)),this.removePartialRows(this.pairs,this.rows))},p.prototype.removePartialRows=function(y,v){var _,E,w,D,O,A;try{for(var W=bc(v),q=W.next();!q.done;q=W.next()){var _e=q.value;if(_e.getPairs().length!==y.length)try{for(var We=(w=void 0,bc(_e.getPairs())),qe=We.next();!qe.done;qe=We.next()){var dt=qe.value;try{for(var lt=(O=void 0,bc(y)),Tt=lt.next();!Tt.done;Tt=lt.next())if(wP.equals(dt,Tt.value)){!0;break}}catch(Xt){O={error:Xt}}finally{try{Tt&&!Tt.done&&(A=lt.return)&&A.call(lt)}finally{if(O)throw O.error}}}}catch(Xt){w={error:Xt}}finally{try{qe&&!qe.done&&(D=We.return)&&D.call(We)}finally{if(w)throw w.error}}}}catch(Xt){_={error:Xt}}finally{try{q&&!q.done&&(E=W.return)&&E.call(W)}finally{if(_)throw _.error}}},p.isPartialRow=function(y,v){var _,E,w,D,O,A;try{for(var W=bc(v),q=W.next();!q.done;q=W.next()){var _e=q.value,be=!0;try{for(var We=(w=void 0,bc(y)),qe=We.next();!qe.done;qe=We.next()){var dt=qe.value,gt=!1;try{for(var lt=(O=void 0,bc(_e.getPairs())),Tt=lt.next();!Tt.done;Tt=lt.next())if(dt.equals(Tt.value)){gt=!0;break}}catch(Xt){O={error:Xt}}finally{try{Tt&&!Tt.done&&(A=lt.return)&&A.call(lt)}finally{if(O)throw O.error}}if(!gt){be=!1;break}}}catch(Xt){w={error:Xt}}finally{try{qe&&!qe.done&&(D=We.return)&&D.call(We)}finally{if(w)throw w.error}}if(be)return!0}}catch(Xt){_={error:Xt}}finally{try{q&&!q.done&&(E=W.return)&&E.call(W)}finally{if(_)throw _.error}}return!1},p.prototype.getRows=function(){return this.rows},p.constructResult=function(y){var _=function gz(g){try{if(g.get(1))return new HK(g);if(!g.get(2))return new XK(g);switch(Cy.extractNumericValueFromBitArray(g,1,4)){case 4:return new iz(g);case 5:return new az(g)}switch(Cy.extractNumericValueFromBitArray(g,1,5)){case 12:return new cz(g);case 13:return new fz(g)}switch(Cy.extractNumericValueFromBitArray(g,1,7)){case 56:return new Ec(g,"310","11");case 57:return new Ec(g,"320","11");case 58:return new Ec(g,"310","13");case 59:return new Ec(g,"320","13");case 60:return new Ec(g,"310","15");case 61:return new Ec(g,"320","15");case 62:return new Ec(g,"310","17");case 63:return new Ec(g,"320","17")}}catch(_){throw console.log(_),new tu("unknown decoder: "+g)}}(AK.buildBitArray(y)),E=_.parseInformation(),w=y[0].getFinderPattern().getResultPoints(),D=y[y.length-1].getFinderPattern().getResultPoints();return new ua(E,null,null,[w[0],w[1],D[0],D[1]],En.RSS_EXPANDED,null)},p.prototype.checkChecksum=function(){var y=this.pairs.get(0),v=y.getLeftChar(),_=y.getRightChar();if(null==_)return!1;for(var E=_.getChecksumPortion(),w=2,D=1;D<this.pairs.size();++D){var O=this.pairs.get(D);E+=O.getLeftChar().getChecksumPortion(),w++;var A=O.getRightChar();null!=A&&(E+=A.getChecksumPortion(),w++)}return 211*(w-4)+(E%=211)==v.getValue()},p.getNextSecondBar=function(y,v){var _;return y.get(v)?(_=y.getNextUnset(v),_=y.getNextSet(_)):(_=y.getNextSet(v),_=y.getNextUnset(_)),_},p.prototype.retrieveNextPair=function(y,v,_){var E=v.length%2==0;this.startFromEven&&(E=!E);var w,D=!0,O=-1;do{this.findNextPair(y,v,O),null==(w=this.parseFoundFinderPattern(y,_,E))?O=p.getNextSecondBar(y,this.startEnd[0]):D=!1}while(D);var W,A=this.decodeDataCharacter(y,w,E,!0);if(!this.isEmptyPair(v)&&v[v.length-1].mustBeLast())throw new Cr;try{W=this.decodeDataCharacter(y,w,E,!1)}catch(q){W=null,console.log(q)}return new wP(A,W,w,!0)},p.prototype.isEmptyPair=function(y){return 0===y.length},p.prototype.findNextPair=function(y,v,_){var E=this.getDecodeFinderCounters();E[0]=0,E[1]=0,E[2]=0,E[3]=0;var D,w=y.getSize();D=_>=0?_:this.isEmptyPair(v)?0:v[v.length-1].getFinderPattern().getStartEnd()[1];var A=v.length%2!=0;this.startFromEven&&(A=!A);for(var W=!1;D<w&&(W=!y.get(D));)D++;for(var q=0,_e=D,be=D;be<w;be++)if(y.get(be)!=W)E[q]++;else{if(3==q){if(A&&p.reverseCounters(E),p.isFinderPattern(E))return this.startEnd[0]=_e,void(this.startEnd[1]=be);A&&p.reverseCounters(E),_e+=E[0]+E[1],E[0]=E[2],E[1]=E[3],E[2]=0,E[3]=0,q--}else q++;E[q]=1,W=!W}throw new Cr},p.reverseCounters=function(y){for(var v=y.length,_=0;_<v/2;++_){var E=y[_];y[_]=y[v-_-1],y[v-_-1]=E}},p.prototype.parseFoundFinderPattern=function(y,v,_){var E,w,D;if(_){for(var O=this.startEnd[0]-1;O>=0&&!y.get(O);)O--;O++,E=this.startEnd[0]-O,w=O,D=this.startEnd[1]}else w=this.startEnd[0],E=(D=y.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var W,A=this.getDecodeFinderCounters();Vi.arraycopy(A,0,A,1,A.length-1),A[0]=E;try{W=this.parseFinderValue(A,p.FINDER_PATTERNS)}catch(q){return null}return new EP(W,[w,D],w,D,v)},p.prototype.decodeDataCharacter=function(y,v,_,E){for(var w=this.getDataCharacterCounters(),D=0;D<w.length;D++)w[D]=0;if(E)p.recordPatternInReverse(y,v.getStartEnd()[0],w);else{p.recordPattern(y,v.getStartEnd()[1],w);for(var O=0,A=w.length-1;O<A;O++,A--){var W=w[O];w[O]=w[A],w[A]=W}}var _e=Ei.sum(new Int32Array(w))/17,be=(v.getStartEnd()[1]-v.getStartEnd()[0])/15;if(Math.abs(_e-be)/be>.3)throw new Cr;var We=this.getOddCounts(),qe=this.getEvenCounts(),dt=this.getOddRoundingErrors(),gt=this.getEvenRoundingErrors();for(O=0;O<w.length;O++){var lt=1*w[O]/_e,Tt=lt+.5;if(Tt<1){if(lt<.3)throw new Cr;Tt=1}else if(Tt>8){if(lt>8.7)throw new Cr;Tt=8}var Rt=O/2;0==(1&O)?(We[Rt]=Tt,dt[Rt]=lt-Tt):(qe[Rt]=Tt,gt[Rt]=lt-Tt)}this.adjustOddEvenCounts(17);var Xt=4*v.getValue()+(_?0:2)+(E?0:1)-1,ur=0,_r=0;for(O=We.length-1;O>=0;O--)p.isNotA1left(v,_,E)&&(_r+=We[O]*p.WEIGHTS[Xt][2*O]),ur+=We[O];var $r=0;for(O=qe.length-1;O>=0;O--)p.isNotA1left(v,_,E)&&($r+=qe[O]*p.WEIGHTS[Xt][2*O+1]);var rn=_r+$r;if(0!=(1&ur)||ur>13||ur<4)throw new Cr;var Mn=(13-ur)/2,On=p.SYMBOL_WIDEST[Mn],xn=9-On,xi=zh.getRSSvalue(We,On,!0),io=zh.getRSSvalue(qe,xn,!1);return new Ey(xi*p.EVEN_TOTAL_SUBSET[Mn]+io+p.GSUM[Mn],rn)},p.isNotA1left=function(y,v,_){return!(0==y.getValue()&&v&&_)},p.prototype.adjustOddEvenCounts=function(y){var v=Ei.sum(new Int32Array(this.getOddCounts())),_=Ei.sum(new Int32Array(this.getEvenCounts())),E=!1,w=!1;v>13?w=!0:v<4&&(E=!0);var D=!1,O=!1;_>13?O=!0:_<4&&(D=!0);var A=v+_-y,W=1==(1&v),q=0==(1&_);if(1==A)if(W){if(q)throw new Cr;w=!0}else{if(!q)throw new Cr;O=!0}else if(-1==A)if(W){if(q)throw new Cr;E=!0}else{if(!q)throw new Cr;D=!0}else{if(0!=A)throw new Cr;if(W){if(!q)throw new Cr;v<_?(E=!0,O=!0):(w=!0,D=!0)}else if(q)throw new Cr}if(E){if(w)throw new Cr;p.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(w&&p.decrement(this.getOddCounts(),this.getOddRoundingErrors()),D){if(O)throw new Cr;p.increment(this.getEvenCounts(),this.getOddRoundingErrors())}O&&p.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},p.SYMBOL_WIDEST=[7,5,4,3,1],p.EVEN_TOTAL_SUBSET=[4,20,52,104,204],p.GSUM=[0,348,1388,2948,3988],p.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],p.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],p.FINDER_PATTERN_SEQUENCES=[[p.FINDER_PAT_A=0,p.FINDER_PAT_A],[p.FINDER_PAT_A,p.FINDER_PAT_B=1,p.FINDER_PAT_B],[p.FINDER_PAT_A,p.FINDER_PAT_C=2,p.FINDER_PAT_B,p.FINDER_PAT_D=3],[p.FINDER_PAT_A,p.FINDER_PAT_E=4,p.FINDER_PAT_B,p.FINDER_PAT_D,p.FINDER_PAT_C],[p.FINDER_PAT_A,p.FINDER_PAT_E,p.FINDER_PAT_B,p.FINDER_PAT_D,p.FINDER_PAT_D,p.FINDER_PAT_F=5],[p.FINDER_PAT_A,p.FINDER_PAT_E,p.FINDER_PAT_B,p.FINDER_PAT_D,p.FINDER_PAT_E,p.FINDER_PAT_F,p.FINDER_PAT_F],[p.FINDER_PAT_A,p.FINDER_PAT_A,p.FINDER_PAT_B,p.FINDER_PAT_B,p.FINDER_PAT_C,p.FINDER_PAT_C,p.FINDER_PAT_D,p.FINDER_PAT_D],[p.FINDER_PAT_A,p.FINDER_PAT_A,p.FINDER_PAT_B,p.FINDER_PAT_B,p.FINDER_PAT_C,p.FINDER_PAT_C,p.FINDER_PAT_D,p.FINDER_PAT_E,p.FINDER_PAT_E],[p.FINDER_PAT_A,p.FINDER_PAT_A,p.FINDER_PAT_B,p.FINDER_PAT_B,p.FINDER_PAT_C,p.FINDER_PAT_C,p.FINDER_PAT_D,p.FINDER_PAT_E,p.FINDER_PAT_F,p.FINDER_PAT_F],[p.FINDER_PAT_A,p.FINDER_PAT_A,p.FINDER_PAT_B,p.FINDER_PAT_B,p.FINDER_PAT_C,p.FINDER_PAT_D,p.FINDER_PAT_D,p.FINDER_PAT_E,p.FINDER_PAT_E,p.FINDER_PAT_F,p.FINDER_PAT_F]],p.MAX_PAIRS=11,p}(Cd);const Cz=bz;var wz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),Mz=function(g){function p(y,v,_){var E=g.call(this,y,v)||this;return E.count=0,E.finderPattern=_,E}return wz(p,g),p.prototype.getFinderPattern=function(){return this.finderPattern},p.prototype.getCount=function(){return this.count},p.prototype.incrementCount=function(){this.count++},p}(Ey);const xz=Mz;var Dz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),lC=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},Sz=function(g){function p(){var y=null!==g&&g.apply(this,arguments)||this;return y.possibleLeftPairs=[],y.possibleRightPairs=[],y}return Dz(p,g),p.prototype.decodeRow=function(y,v,_){var E,w,D,O,A=this.decodePair(v,!1,y,_);p.addOrTally(this.possibleLeftPairs,A),v.reverse();var W=this.decodePair(v,!0,y,_);p.addOrTally(this.possibleRightPairs,W),v.reverse();try{for(var q=lC(this.possibleLeftPairs),_e=q.next();!_e.done;_e=q.next()){var be=_e.value;if(be.getCount()>1)try{for(var We=(D=void 0,lC(this.possibleRightPairs)),qe=We.next();!qe.done;qe=We.next()){var dt=qe.value;if(dt.getCount()>1&&p.checkChecksum(be,dt))return p.constructResult(be,dt)}}catch(gt){D={error:gt}}finally{try{qe&&!qe.done&&(O=We.return)&&O.call(We)}finally{if(D)throw D.error}}}}catch(gt){E={error:gt}}finally{try{_e&&!_e.done&&(w=q.return)&&w.call(q)}finally{if(E)throw E.error}}throw new Cr},p.addOrTally=function(y,v){var _,E;if(null!=v){var w=!1;try{for(var D=lC(y),O=D.next();!O.done;O=D.next()){var A=O.value;if(A.getValue()===v.getValue()){A.incrementCount(),w=!0;break}}}catch(W){_={error:W}}finally{try{O&&!O.done&&(E=D.return)&&E.call(D)}finally{if(_)throw _.error}}w||y.push(v)}},p.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},p.constructResult=function(y,v){for(var _=4537077*y.getValue()+v.getValue(),E=new String(_).toString(),w=new Ai,D=13-E.length;D>0;D--)w.append("0");w.append(E);var O=0;for(D=0;D<13;D++){var A=w.charAt(D).charCodeAt(0)-"0".charCodeAt(0);O+=0==(1&D)?3*A:A}10==(O=10-O%10)&&(O=0),w.append(O.toString());var W=y.getFinderPattern().getResultPoints(),q=v.getFinderPattern().getResultPoints();return new ua(w.toString(),null,0,[W[0],W[1],q[0],q[1]],En.RSS_14,(new Date).getTime())},p.checkChecksum=function(y,v){var _=(y.getChecksumPortion()+16*v.getChecksumPortion())%79,E=9*y.getFinderPattern().getValue()+v.getFinderPattern().getValue();return E>72&&E--,E>8&&E--,_===E},p.prototype.decodePair=function(y,v,_,E){try{var w=this.findFinderPattern(y,v),D=this.parseFoundFinderPattern(y,_,v,w),O=null==E?null:E.get(Ci.NEED_RESULT_POINT_CALLBACK);if(null!=O){var A=(w[0]+w[1])/2;v&&(A=y.getSize()-1-A),O.foundPossibleResultPoint(new mn(A,_))}var W=this.decodeDataCharacter(y,D,!0),q=this.decodeDataCharacter(y,D,!1);return new xz(1597*W.getValue()+q.getValue(),W.getChecksumPortion()+4*q.getChecksumPortion(),D)}catch(_e){return null}},p.prototype.decodeDataCharacter=function(y,v,_){for(var E=this.getDataCharacterCounters(),w=0;w<E.length;w++)E[w]=0;if(_)bs.recordPatternInReverse(y,v.getStartEnd()[0],E);else{bs.recordPattern(y,v.getStartEnd()[1]+1,E);for(var D=0,O=E.length-1;D<O;D++,O--){var A=E[D];E[D]=E[O],E[O]=A}}var W=_?16:15,q=Ei.sum(new Int32Array(E))/W,_e=this.getOddCounts(),be=this.getEvenCounts(),We=this.getOddRoundingErrors(),qe=this.getEvenRoundingErrors();for(D=0;D<E.length;D++){var dt=E[D]/q,gt=Math.floor(dt+.5);gt<1?gt=1:gt>8&&(gt=8);var lt=Math.floor(D/2);0==(1&D)?(_e[lt]=gt,We[lt]=dt-gt):(be[lt]=gt,qe[lt]=dt-gt)}this.adjustOddEvenCounts(_,W);var Tt=0,Rt=0;for(D=_e.length-1;D>=0;D--)Rt*=9,Rt+=_e[D],Tt+=_e[D];var Xt=0,ur=0;for(D=be.length-1;D>=0;D--)Xt*=9,Xt+=be[D],ur+=be[D];var Ur,$r,_r=Rt+3*Xt;if(_){if(0!=(1&Tt)||Tt>12||Tt<4)throw new Cr;var rn=9-($r=p.OUTSIDE_ODD_WIDEST[Ur=(12-Tt)/2]),Mn=zh.getRSSvalue(_e,$r,!1),On=zh.getRSSvalue(be,rn,!0);return new Ey(Mn*p.OUTSIDE_EVEN_TOTAL_SUBSET[Ur]+On+p.OUTSIDE_GSUM[Ur],_r)}if(0!=(1&ur)||ur>10||ur<4)throw new Cr;return rn=9-($r=p.INSIDE_ODD_WIDEST[Ur=(10-ur)/2]),Mn=zh.getRSSvalue(_e,$r,!0),On=zh.getRSSvalue(be,rn,!1),new Ey(On*p.INSIDE_ODD_TOTAL_SUBSET[Ur]+Mn+p.INSIDE_GSUM[Ur],_r)},p.prototype.findFinderPattern=function(y,v){var _=this.getDecodeFinderCounters();_[0]=0,_[1]=0,_[2]=0,_[3]=0;for(var E=y.getSize(),w=!1,D=0;D<E&&v!==(w=!y.get(D));)D++;for(var O=0,A=D,W=D;W<E;W++)if(y.get(W)!==w)_[O]++;else{if(3===O){if(Cd.isFinderPattern(_))return[A,W];A+=_[0]+_[1],_[0]=_[2],_[1]=_[3],_[2]=0,_[3]=0,O--}else O++;_[O]=1,w=!w}throw new Cr},p.prototype.parseFoundFinderPattern=function(y,v,_,E){for(var w=y.get(E[0]),D=E[0]-1;D>=0&&w!==y.get(D);)D--;D++;var O=E[0]-D,A=this.getDecodeFinderCounters(),W=new Int32Array(A.length);Vi.arraycopy(A,0,W,1,A.length-1),W[0]=O;var q=this.parseFinderValue(W,p.FINDER_PATTERNS),_e=D,be=E[1];return _&&(_e=y.getSize()-1-_e,be=y.getSize()-1-be),new EP(q,[D,E[1]],_e,be,v)},p.prototype.adjustOddEvenCounts=function(y,v){var _=Ei.sum(new Int32Array(this.getOddCounts())),E=Ei.sum(new Int32Array(this.getEvenCounts())),w=!1,D=!1,O=!1,A=!1;y?(_>12?D=!0:_<4&&(w=!0),E>12?A=!0:E<4&&(O=!0)):(_>11?D=!0:_<5&&(w=!0),E>10?A=!0:E<4&&(O=!0));var W=_+E-v,q=(1&_)==(y?1:0),_e=1==(1&E);if(1===W)if(q){if(_e)throw new Cr;D=!0}else{if(!_e)throw new Cr;A=!0}else if(-1===W)if(q){if(_e)throw new Cr;w=!0}else{if(!_e)throw new Cr;O=!0}else{if(0!==W)throw new Cr;if(q){if(!_e)throw new Cr;_<E?(w=!0,A=!0):(D=!0,O=!0)}else if(_e)throw new Cr}if(w){if(D)throw new Cr;Cd.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(D&&Cd.decrement(this.getOddCounts(),this.getOddRoundingErrors()),O){if(A)throw new Cr;Cd.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&Cd.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},p.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],p.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],p.OUTSIDE_GSUM=[0,161,961,2015,2715],p.INSIDE_GSUM=[0,336,1036,1516],p.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],p.INSIDE_ODD_WIDEST=[2,4,6,8],p.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],p}(Cd);const MP=Sz;var Oz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),Iz=function(g){function p(y){var v=g.call(this)||this;v.readers=[];var _=y?y.get(Ci.POSSIBLE_FORMATS):null,E=y&&void 0!==y.get(Ci.ASSUME_CODE_39_CHECK_DIGIT);return _&&((_.includes(En.EAN_13)||_.includes(En.UPC_A)||_.includes(En.EAN_8)||_.includes(En.UPC_E))&&v.readers.push(new sC(y)),_.includes(En.CODE_39)&&v.readers.push(new hP(E)),_.includes(En.CODE_128)&&v.readers.push(new dP),_.includes(En.ITF)&&v.readers.push(new fP),_.includes(En.RSS_14)&&v.readers.push(new MP),_.includes(En.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),v.readers.push(new Cz))),0===v.readers.length&&(v.readers.push(new sC(y)),v.readers.push(new hP),v.readers.push(new sC(y)),v.readers.push(new dP),v.readers.push(new fP),v.readers.push(new MP)),v}return Oz(p,g),p.prototype.decodeRow=function(y,v,_){for(var E=0;E<this.readers.length;E++)try{return this.readers[E].decodeRow(y,v,_)}catch(w){}throw new Cr},p.prototype.reset=function(){this.readers.forEach(function(y){return y.reset()})},p}(bs);const Hh=Iz;var Tz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),xP=(function(g){Tz(function p(y,v){return void 0===y&&(y=500),g.call(this,new Hh(v),y,v)||this},g)}($h),function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}),Mi=function(){function g(p,y,v){this.ecCodewords=p,this.ecBlocks=[y],v&&this.ecBlocks.push(v)}return g.prototype.getECCodewords=function(){return this.ecCodewords},g.prototype.getECBlocks=function(){return this.ecBlocks},g}(),bi=function(){function g(p,y){this.count=p,this.dataCodewords=y}return g.prototype.getCount=function(){return this.count},g.prototype.getDataCodewords=function(){return this.dataCodewords},g}(),Az=function(){function g(p,y,v,_,E,w){var D,O;this.versionNumber=p,this.symbolSizeRows=y,this.symbolSizeColumns=v,this.dataRegionSizeRows=_,this.dataRegionSizeColumns=E,this.ecBlocks=w;var A=0,W=w.getECCodewords(),q=w.getECBlocks();try{for(var _e=xP(q),be=_e.next();!be.done;be=_e.next()){var We=be.value;A+=We.getCount()*(We.getDataCodewords()+W)}}catch(qe){D={error:qe}}finally{try{be&&!be.done&&(O=_e.return)&&O.call(_e)}finally{if(D)throw D.error}}this.totalCodewords=A}return g.prototype.getVersionNumber=function(){return this.versionNumber},g.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},g.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},g.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},g.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},g.prototype.getTotalCodewords=function(){return this.totalCodewords},g.prototype.getECBlocks=function(){return this.ecBlocks},g.getVersionForDimensions=function(p,y){var v,_;if(0!=(1&p)||0!=(1&y))throw new Hr;try{for(var E=xP(g.VERSIONS),w=E.next();!w.done;w=E.next()){var D=w.value;if(D.symbolSizeRows===p&&D.symbolSizeColumns===y)return D}}catch(O){v={error:O}}finally{try{w&&!w.done&&(_=E.return)&&_.call(E)}finally{if(v)throw v.error}}throw new Hr},g.prototype.toString=function(){return""+this.versionNumber},g.buildVersions=function(){return[new g(1,10,10,8,8,new Mi(5,new bi(1,3))),new g(2,12,12,10,10,new Mi(7,new bi(1,5))),new g(3,14,14,12,12,new Mi(10,new bi(1,8))),new g(4,16,16,14,14,new Mi(12,new bi(1,12))),new g(5,18,18,16,16,new Mi(14,new bi(1,18))),new g(6,20,20,18,18,new Mi(18,new bi(1,22))),new g(7,22,22,20,20,new Mi(20,new bi(1,30))),new g(8,24,24,22,22,new Mi(24,new bi(1,36))),new g(9,26,26,24,24,new Mi(28,new bi(1,44))),new g(10,32,32,14,14,new Mi(36,new bi(1,62))),new g(11,36,36,16,16,new Mi(42,new bi(1,86))),new g(12,40,40,18,18,new Mi(48,new bi(1,114))),new g(13,44,44,20,20,new Mi(56,new bi(1,144))),new g(14,48,48,22,22,new Mi(68,new bi(1,174))),new g(15,52,52,24,24,new Mi(42,new bi(2,102))),new g(16,64,64,14,14,new Mi(56,new bi(2,140))),new g(17,72,72,16,16,new Mi(36,new bi(4,92))),new g(18,80,80,18,18,new Mi(48,new bi(4,114))),new g(19,88,88,20,20,new Mi(56,new bi(4,144))),new g(20,96,96,22,22,new Mi(68,new bi(4,174))),new g(21,104,104,24,24,new Mi(56,new bi(6,136))),new g(22,120,120,18,18,new Mi(68,new bi(6,175))),new g(23,132,132,20,20,new Mi(62,new bi(8,163))),new g(24,144,144,22,22,new Mi(62,new bi(8,156),new bi(2,155))),new g(25,8,18,6,16,new Mi(7,new bi(1,5))),new g(26,8,32,6,14,new Mi(11,new bi(1,10))),new g(27,12,26,10,24,new Mi(14,new bi(1,16))),new g(28,12,36,10,16,new Mi(18,new bi(1,22))),new g(29,16,36,14,16,new Mi(24,new bi(1,32))),new g(30,16,48,14,22,new Mi(28,new bi(1,49)))]},g.VERSIONS=g.buildVersions(),g}();const Pz=Az;var Rz=function(){function g(p){var y=p.getHeight();if(y<8||y>144||0!=(1&y))throw new Hr;this.version=g.readVersion(p),this.mappingBitMatrix=this.extractDataRegion(p),this.readMappingMatrix=new Xa(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return g.prototype.getVersion=function(){return this.version},g.readVersion=function(p){var y=p.getHeight(),v=p.getWidth();return Pz.getVersionForDimensions(y,v)},g.prototype.readCodewords=function(){var p=new Int8Array(this.version.getTotalCodewords()),y=0,v=4,_=0,E=this.mappingBitMatrix.getHeight(),w=this.mappingBitMatrix.getWidth(),D=!1,O=!1,A=!1,W=!1;do{if(v!==E||0!==_||D)if(v!==E-2||0!==_||0==(3&w)||O)if(v!==E+4||2!==_||0!=(7&w)||A)if(v!==E-2||0!==_||4!=(7&w)||W){do{v<E&&_>=0&&!this.readMappingMatrix.get(_,v)&&(p[y++]=255&this.readUtah(v,_,E,w)),v-=2,_+=2}while(v>=0&&_<w);v+=1,_+=3;do{v>=0&&_<w&&!this.readMappingMatrix.get(_,v)&&(p[y++]=255&this.readUtah(v,_,E,w)),v+=2,_-=2}while(v<E&&_>=0);v+=3,_+=1}else p[y++]=255&this.readCorner4(E,w),v-=2,_+=2,W=!0;else p[y++]=255&this.readCorner3(E,w),v-=2,_+=2,A=!0;else p[y++]=255&this.readCorner2(E,w),v-=2,_+=2,O=!0;else p[y++]=255&this.readCorner1(E,w),v-=2,_+=2,D=!0}while(v<E||_<w);if(y!==this.version.getTotalCodewords())throw new Hr;return p},g.prototype.readModule=function(p,y,v,_){return p<0&&(p+=v,y+=4-(v+4&7)),y<0&&(y+=_,p+=4-(_+4&7)),this.readMappingMatrix.set(y,p),this.mappingBitMatrix.get(y,p)},g.prototype.readUtah=function(p,y,v,_){var E=0;return this.readModule(p-2,y-2,v,_)&&(E|=1),E<<=1,this.readModule(p-2,y-1,v,_)&&(E|=1),E<<=1,this.readModule(p-1,y-2,v,_)&&(E|=1),E<<=1,this.readModule(p-1,y-1,v,_)&&(E|=1),E<<=1,this.readModule(p-1,y,v,_)&&(E|=1),E<<=1,this.readModule(p,y-2,v,_)&&(E|=1),E<<=1,this.readModule(p,y-1,v,_)&&(E|=1),E<<=1,this.readModule(p,y,v,_)&&(E|=1),E},g.prototype.readCorner1=function(p,y){var v=0;return this.readModule(p-1,0,p,y)&&(v|=1),v<<=1,this.readModule(p-1,1,p,y)&&(v|=1),v<<=1,this.readModule(p-1,2,p,y)&&(v|=1),v<<=1,this.readModule(0,y-2,p,y)&&(v|=1),v<<=1,this.readModule(0,y-1,p,y)&&(v|=1),v<<=1,this.readModule(1,y-1,p,y)&&(v|=1),v<<=1,this.readModule(2,y-1,p,y)&&(v|=1),v<<=1,this.readModule(3,y-1,p,y)&&(v|=1),v},g.prototype.readCorner2=function(p,y){var v=0;return this.readModule(p-3,0,p,y)&&(v|=1),v<<=1,this.readModule(p-2,0,p,y)&&(v|=1),v<<=1,this.readModule(p-1,0,p,y)&&(v|=1),v<<=1,this.readModule(0,y-4,p,y)&&(v|=1),v<<=1,this.readModule(0,y-3,p,y)&&(v|=1),v<<=1,this.readModule(0,y-2,p,y)&&(v|=1),v<<=1,this.readModule(0,y-1,p,y)&&(v|=1),v<<=1,this.readModule(1,y-1,p,y)&&(v|=1),v},g.prototype.readCorner3=function(p,y){var v=0;return this.readModule(p-1,0,p,y)&&(v|=1),v<<=1,this.readModule(p-1,y-1,p,y)&&(v|=1),v<<=1,this.readModule(0,y-3,p,y)&&(v|=1),v<<=1,this.readModule(0,y-2,p,y)&&(v|=1),v<<=1,this.readModule(0,y-1,p,y)&&(v|=1),v<<=1,this.readModule(1,y-3,p,y)&&(v|=1),v<<=1,this.readModule(1,y-2,p,y)&&(v|=1),v<<=1,this.readModule(1,y-1,p,y)&&(v|=1),v},g.prototype.readCorner4=function(p,y){var v=0;return this.readModule(p-3,0,p,y)&&(v|=1),v<<=1,this.readModule(p-2,0,p,y)&&(v|=1),v<<=1,this.readModule(p-1,0,p,y)&&(v|=1),v<<=1,this.readModule(0,y-2,p,y)&&(v|=1),v<<=1,this.readModule(0,y-1,p,y)&&(v|=1),v<<=1,this.readModule(1,y-1,p,y)&&(v|=1),v<<=1,this.readModule(2,y-1,p,y)&&(v|=1),v<<=1,this.readModule(3,y-1,p,y)&&(v|=1),v},g.prototype.extractDataRegion=function(p){var y=this.version.getSymbolSizeRows(),v=this.version.getSymbolSizeColumns();if(p.getHeight()!==y)throw new un("Dimension of bitMatrix must match the version size");for(var _=this.version.getDataRegionSizeRows(),E=this.version.getDataRegionSizeColumns(),w=y/_|0,D=v/E|0,W=new Xa(D*E,w*_),q=0;q<w;++q)for(var _e=q*_,be=0;be<D;++be)for(var We=be*E,qe=0;qe<_;++qe)for(var dt=q*(_+2)+1+qe,gt=_e+qe,lt=0;lt<E;++lt)p.get(be*(E+2)+1+lt,dt)&&W.set(We+lt,gt);return W},g}();const Lz=Rz;var DP=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},Nz=function(){function g(p,y){this.numDataCodewords=p,this.codewords=y}return g.getDataBlocks=function(p,y){var v,_,E,w,D=y.getECBlocks(),O=0,A=D.getECBlocks();try{for(var W=DP(A),q=W.next();!q.done;q=W.next())O+=(_e=q.value).getCount()}catch(xi){v={error:xi}}finally{try{q&&!q.done&&(_=W.return)&&_.call(W)}finally{if(v)throw v.error}}var be=new Array(O),We=0;try{for(var qe=DP(A),dt=qe.next();!dt.done;dt=qe.next())for(var _e=dt.value,gt=0;gt<_e.getCount();gt++){var lt=_e.getDataCodewords(),Tt=D.getECCodewords()+lt;be[We++]=new g(lt,new Uint8Array(Tt))}}catch(xi){E={error:xi}}finally{try{dt&&!dt.done&&(w=qe.return)&&w.call(qe)}finally{if(E)throw E.error}}var Xt=be[0].codewords.length-D.getECCodewords(),ur=Xt-1,_r=0;for(gt=0;gt<ur;gt++)for(var Ur=0;Ur<We;Ur++)be[Ur].codewords[gt]=p[_r++];var $r=24===y.getVersionNumber(),rn=$r?8:We;for(Ur=0;Ur<rn;Ur++)be[Ur].codewords[Xt-1]=p[_r++];var Mn=be[0].codewords.length;for(gt=Xt;gt<Mn;gt++)for(Ur=0;Ur<We;Ur++){var On=$r?(Ur+8)%We:Ur;be[On].codewords[$r&&On>7?gt-1:gt]=p[_r++]}if(_r!==p.length)throw new un;return be},g.prototype.getNumDataCodewords=function(){return this.numDataCodewords},g.prototype.getCodewords=function(){return this.codewords},g}();const Fz=Nz;var jz=function(){function g(p){this.bytes=p,this.byteOffset=0,this.bitOffset=0}return g.prototype.getBitOffset=function(){return this.bitOffset},g.prototype.getByteOffset=function(){return this.byteOffset},g.prototype.readBits=function(p){if(p<1||p>32||p>this.available())throw new un(""+p);var y=0,v=this.bitOffset,_=this.byteOffset,E=this.bytes;if(v>0){var w=8-v,D=p<w?p:w;y=(E[_]&255>>8-D<<(O=w-D))>>O,p-=D,8===(v+=D)&&(v=0,_++)}if(p>0){for(;p>=8;)y=y<<8|255&E[_],_++,p-=8;var O;p>0&&(y=y<<p|(E[_]&255>>(O=8-p)<<O)>>O,v+=p)}return this.bitOffset=v,this.byteOffset=_,y},g.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},g}();const SP=jz;var Ko=(()=>(function(g){g[g.PAD_ENCODE=0]="PAD_ENCODE",g[g.ASCII_ENCODE=1]="ASCII_ENCODE",g[g.C40_ENCODE=2]="C40_ENCODE",g[g.TEXT_ENCODE=3]="TEXT_ENCODE",g[g.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",g[g.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",g[g.BASE256_ENCODE=6]="BASE256_ENCODE"}(Ko||(Ko={})),Ko))(),Bz=function(){function g(){}return g.decode=function(p){var y=new SP(p),v=new Ai,_=new Ai,E=new Array,w=Ko.ASCII_ENCODE;do{if(w===Ko.ASCII_ENCODE)w=this.decodeAsciiSegment(y,v,_);else{switch(w){case Ko.C40_ENCODE:this.decodeC40Segment(y,v);break;case Ko.TEXT_ENCODE:this.decodeTextSegment(y,v);break;case Ko.ANSIX12_ENCODE:this.decodeAnsiX12Segment(y,v);break;case Ko.EDIFACT_ENCODE:this.decodeEdifactSegment(y,v);break;case Ko.BASE256_ENCODE:this.decodeBase256Segment(y,v,E);break;default:throw new Hr}w=Ko.ASCII_ENCODE}}while(w!==Ko.PAD_ENCODE&&y.available()>0);return _.length()>0&&v.append(_.toString()),new gy(p,v.toString(),0===E.length?null:E,null)},g.decodeAsciiSegment=function(p,y,v){var _=!1;do{var E=p.readBits(8);if(0===E)throw new Hr;if(E<=128)return _&&(E+=128),y.append(String.fromCharCode(E-1)),Ko.ASCII_ENCODE;if(129===E)return Ko.PAD_ENCODE;if(E<=229){var w=E-130;w<10&&y.append("0"),y.append(""+w)}else switch(E){case 230:return Ko.C40_ENCODE;case 231:return Ko.BASE256_ENCODE;case 232:y.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:_=!0;break;case 236:y.append("[)>\x1e05\x1d"),v.insert(0,"\x1e\x04");break;case 237:y.append("[)>\x1e06\x1d"),v.insert(0,"\x1e\x04");break;case 238:return Ko.ANSIX12_ENCODE;case 239:return Ko.TEXT_ENCODE;case 240:return Ko.EDIFACT_ENCODE;default:if(254!==E||0!==p.available())throw new Hr}}while(p.available()>0);return Ko.ASCII_ENCODE},g.decodeC40Segment=function(p,y){var v=!1,_=[],E=0;do{if(8===p.available())return;var w=p.readBits(8);if(254===w)return;this.parseTwoBytes(w,p.readBits(8),_);for(var D=0;D<3;D++){var O=_[D];switch(E){case 0:if(O<3)E=O+1;else{if(!(O<this.C40_BASIC_SET_CHARS.length))throw new Hr;var A=this.C40_BASIC_SET_CHARS[O];v?(y.append(String.fromCharCode(A.charCodeAt(0)+128)),v=!1):y.append(A)}break;case 1:v?(y.append(String.fromCharCode(O+128)),v=!1):y.append(String.fromCharCode(O)),E=0;break;case 2:if(O<this.C40_SHIFT2_SET_CHARS.length)A=this.C40_SHIFT2_SET_CHARS[O],v?(y.append(String.fromCharCode(A.charCodeAt(0)+128)),v=!1):y.append(A);else switch(O){case 27:y.append(String.fromCharCode(29));break;case 30:v=!0;break;default:throw new Hr}E=0;break;case 3:v?(y.append(String.fromCharCode(O+224)),v=!1):y.append(String.fromCharCode(O+96)),E=0;break;default:throw new Hr}}}while(p.available()>0)},g.decodeTextSegment=function(p,y){var v=!1,_=[],E=0;do{if(8===p.available())return;var w=p.readBits(8);if(254===w)return;this.parseTwoBytes(w,p.readBits(8),_);for(var D=0;D<3;D++){var O=_[D];switch(E){case 0:if(O<3)E=O+1;else{if(!(O<this.TEXT_BASIC_SET_CHARS.length))throw new Hr;var A=this.TEXT_BASIC_SET_CHARS[O];v?(y.append(String.fromCharCode(A.charCodeAt(0)+128)),v=!1):y.append(A)}break;case 1:v?(y.append(String.fromCharCode(O+128)),v=!1):y.append(String.fromCharCode(O)),E=0;break;case 2:if(O<this.TEXT_SHIFT2_SET_CHARS.length)A=this.TEXT_SHIFT2_SET_CHARS[O],v?(y.append(String.fromCharCode(A.charCodeAt(0)+128)),v=!1):y.append(A);else switch(O){case 27:y.append(String.fromCharCode(29));break;case 30:v=!0;break;default:throw new Hr}E=0;break;case 3:if(!(O<this.TEXT_SHIFT3_SET_CHARS.length))throw new Hr;A=this.TEXT_SHIFT3_SET_CHARS[O],v?(y.append(String.fromCharCode(A.charCodeAt(0)+128)),v=!1):y.append(A),E=0;break;default:throw new Hr}}}while(p.available()>0)},g.decodeAnsiX12Segment=function(p,y){var v=[];do{if(8===p.available())return;var _=p.readBits(8);if(254===_)return;this.parseTwoBytes(_,p.readBits(8),v);for(var E=0;E<3;E++){var w=v[E];switch(w){case 0:y.append("\r");break;case 1:y.append("*");break;case 2:y.append(">");break;case 3:y.append(" ");break;default:if(w<14)y.append(String.fromCharCode(w+44));else{if(!(w<40))throw new Hr;y.append(String.fromCharCode(w+51))}}}}while(p.available()>0)},g.parseTwoBytes=function(p,y,v){var _=(p<<8)+y-1,E=Math.floor(_/1600);v[0]=E,_-=1600*E,E=Math.floor(_/40),v[1]=E,v[2]=_-40*E},g.decodeEdifactSegment=function(p,y){do{if(p.available()<=16)return;for(var v=0;v<4;v++){var _=p.readBits(6);if(31===_){var E=8-p.getBitOffset();return void(8!==E&&p.readBits(E))}0==(32&_)&&(_|=64),y.append(String.fromCharCode(_))}}while(p.available()>0)},g.decodeBase256Segment=function(p,y,v){var w,_=1+p.getByteOffset(),E=this.unrandomize255State(p.readBits(8),_++);if((w=0===E?p.available()/8|0:E<250?E:250*(E-249)+this.unrandomize255State(p.readBits(8),_++))<0)throw new Hr;for(var D=new Uint8Array(w),O=0;O<w;O++){if(p.available()<8)throw new Hr;D[O]=this.unrandomize255State(p.readBits(8),_++)}v.push(D);try{y.append(eu.decode(D,Fi.ISO88591))}catch(A){throw new tu("Platform does not support required encoding: "+A.message)}},g.unrandomize255State=function(p,y){var _=p-(149*y%255+1);return _>=0?_:_+256},g.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],g.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],g.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],g.TEXT_SHIFT2_SET_CHARS=g.C40_SHIFT2_SET_CHARS,g.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],g}();const Uz=Bz;var kz=function(){function g(){this.rsDecoder=new vy(ca.DATA_MATRIX_FIELD_256)}return g.prototype.decode=function(p){var y,v,_=new Lz(p),E=_.getVersion(),w=_.readCodewords(),D=Fz.getDataBlocks(w,E),O=0;try{for(var A=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(D),W=A.next();!W.done;W=A.next())O+=W.value.getNumDataCodewords()}catch(Tt){y={error:Tt}}finally{try{W&&!W.done&&(v=A.return)&&v.call(A)}finally{if(y)throw y.error}}for(var _e=new Uint8Array(O),be=D.length,We=0;We<be;We++){var qe=D[We],dt=qe.getCodewords(),gt=qe.getNumDataCodewords();this.correctErrors(dt,gt);for(var lt=0;lt<gt;lt++)_e[lt*be+We]=dt[lt]}return Uz.decode(_e)},g.prototype.correctErrors=function(p,y){var v=new Int32Array(p);try{this.rsDecoder.decode(v,p.length-y)}catch(E){throw new $o}for(var _=0;_<y;_++)p[_]=v[_]},g}();const Wz=kz;var Zz=function(){function g(p){this.image=p,this.rectangleDetector=new rC(this.image)}return g.prototype.detect=function(){var p=this.rectangleDetector.detect(),y=this.detectSolid1(p);if((y=this.detectSolid2(y))[3]=this.correctTopRight(y),!y[3])throw new Cr;var v=(y=this.shiftToModuleCenter(y))[0],_=y[1],E=y[2],w=y[3],D=this.transitionsBetween(v,w)+1,O=this.transitionsBetween(E,w)+1;1==(1&D)&&(D+=1),1==(1&O)&&(O+=1),4*D<7*O&&4*O<7*D&&(D=O=Math.max(D,O));var A=g.sampleGrid(this.image,v,_,E,w,D,O);return new tC(A,[v,_,E,w])},g.shiftPoint=function(p,y,v){var _=(y.getX()-p.getX())/(v+1),E=(y.getY()-p.getY())/(v+1);return new mn(p.getX()+_,p.getY()+E)},g.moveAway=function(p,y,v){var _=p.getX(),E=p.getY();return _<y?_-=1:_+=1,E<v?E-=1:E+=1,new mn(_,E)},g.prototype.detectSolid1=function(p){var y=p[0],v=p[1],_=p[3],E=p[2],w=this.transitionsBetween(y,v),D=this.transitionsBetween(v,_),O=this.transitionsBetween(_,E),A=this.transitionsBetween(E,y),W=w,q=[E,y,v,_];return W>D&&(W=D,q[0]=y,q[1]=v,q[2]=_,q[3]=E),W>O&&(W=O,q[0]=v,q[1]=_,q[2]=E,q[3]=y),W>A&&(q[0]=_,q[1]=E,q[2]=y,q[3]=v),q},g.prototype.detectSolid2=function(p){var y=p[0],v=p[1],_=p[2],E=p[3],w=this.transitionsBetween(y,E),D=g.shiftPoint(v,_,4*(w+1)),O=g.shiftPoint(_,v,4*(w+1));return this.transitionsBetween(D,y)<this.transitionsBetween(O,E)?(p[0]=y,p[1]=v,p[2]=_,p[3]=E):(p[0]=v,p[1]=_,p[2]=E,p[3]=y),p},g.prototype.correctTopRight=function(p){var y=p[0],v=p[1],_=p[2],E=p[3],w=this.transitionsBetween(y,E),D=this.transitionsBetween(v,E),O=g.shiftPoint(y,v,4*(D+1)),A=g.shiftPoint(_,v,4*(w+1));w=this.transitionsBetween(O,E),D=this.transitionsBetween(A,E);var W=new mn(E.getX()+(_.getX()-v.getX())/(w+1),E.getY()+(_.getY()-v.getY())/(w+1)),q=new mn(E.getX()+(y.getX()-v.getX())/(D+1),E.getY()+(y.getY()-v.getY())/(D+1));return this.isValid(W)?this.isValid(q)?this.transitionsBetween(O,W)+this.transitionsBetween(A,W)>this.transitionsBetween(O,q)+this.transitionsBetween(A,q)?W:q:W:this.isValid(q)?q:null},g.prototype.shiftToModuleCenter=function(p){var y=p[0],v=p[1],_=p[2],E=p[3],w=this.transitionsBetween(y,E)+1,D=this.transitionsBetween(_,E)+1,O=g.shiftPoint(y,v,4*D),A=g.shiftPoint(_,v,4*w);1==(1&(w=this.transitionsBetween(O,E)+1))&&(w+=1),1==(1&(D=this.transitionsBetween(A,E)+1))&&(D+=1);var _e,be,W=(y.getX()+v.getX()+_.getX()+E.getX())/4,q=(y.getY()+v.getY()+_.getY()+E.getY())/4;return y=g.moveAway(y,W,q),v=g.moveAway(v,W,q),_=g.moveAway(_,W,q),E=g.moveAway(E,W,q),O=g.shiftPoint(y,v,4*D),O=g.shiftPoint(O,E,4*w),_e=g.shiftPoint(v,y,4*D),_e=g.shiftPoint(_e,_,4*w),A=g.shiftPoint(_,E,4*D),A=g.shiftPoint(A,v,4*w),be=g.shiftPoint(E,_,4*D),[O,_e,A,be=g.shiftPoint(be,y,4*w)]},g.prototype.isValid=function(p){return p.getX()>=0&&p.getX()<this.image.getWidth()&&p.getY()>0&&p.getY()<this.image.getHeight()},g.sampleGrid=function(p,y,v,_,E,w,D){return nC.getInstance().sampleGrid(p,w,D,.5,.5,w-.5,.5,w-.5,D-.5,.5,D-.5,y.getX(),y.getY(),E.getX(),E.getY(),_.getX(),_.getY(),v.getX(),v.getY())},g.prototype.transitionsBetween=function(p,y){var v=Math.trunc(p.getX()),_=Math.trunc(p.getY()),E=Math.trunc(y.getX()),w=Math.trunc(y.getY()),D=Math.abs(w-_)>Math.abs(E-v);if(D){var O=v;v=_,_=O,O=E,E=w,w=O}for(var A=Math.abs(E-v),W=Math.abs(w-_),q=-A/2,_e=_<w?1:-1,be=v<E?1:-1,We=0,qe=this.image.get(D?_:v,D?v:_),dt=v,gt=_;dt!==E;dt+=be){var lt=this.image.get(D?gt:dt,D?dt:gt);if(lt!==qe&&(We++,qe=lt),(q+=W)>0){if(gt===w)break;gt+=_e,q-=A}}return We},g}();const $z=Zz;var Kz=function(){function g(){this.decoder=new Wz}return g.prototype.decode=function(p,y){var v,_;if(void 0===y&&(y=null),null!=y&&y.has(Ci.PURE_BARCODE)){var E=g.extractPureBits(p.getBlackMatrix());v=this.decoder.decode(E),_=g.NO_POINTS}else{var w=new $z(p.getBlackMatrix()).detect();v=this.decoder.decode(w.getBits()),_=w.getPoints()}var D=v.getRawBytes(),O=new ua(v.getText(),D,8*D.length,_,En.DATA_MATRIX,Vi.currentTimeMillis()),A=v.getByteSegments();null!=A&&O.putMetadata(Es.BYTE_SEGMENTS,A);var W=v.getECLevel();return null!=W&&O.putMetadata(Es.ERROR_CORRECTION_LEVEL,W),O},g.prototype.reset=function(){},g.extractPureBits=function(p){var y=p.getTopLeftOnBit(),v=p.getBottomRightOnBit();if(null==y||null==v)throw new Cr;var _=this.moduleSize(y,p),E=y[1],D=y[0],A=(v[0]-D+1)/_,W=(v[1]-E+1)/_;if(A<=0||W<=0)throw new Cr;var q=_/2;E+=q,D+=q;for(var _e=new Xa(A,W),be=0;be<W;be++)for(var We=E+be*_,qe=0;qe<A;qe++)p.get(D+qe*_,We)&&_e.set(qe,be);return _e},g.moduleSize=function(p,y){for(var v=y.getWidth(),_=p[0],E=p[1];_<v&&y.get(_,E);)_++;if(_===v)throw new Cr;var w=_-p[0];if(0===w)throw new Cr;return w},g.NO_POINTS=[],g}();const My=Kz;var zz=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),xd=(function(g){zz(function p(y){return void 0===y&&(y=500),g.call(this,new My,y)||this},g)}($h),(()=>(function(g){g[g.L=0]="L",g[g.M=1]="M",g[g.Q=2]="Q",g[g.H=3]="H"}(xd||(xd={})),xd))()),Gz=function(){function g(p,y,v){this.value=p,this.stringValue=y,this.bits=v,g.FOR_BITS.set(v,this),g.FOR_VALUE.set(p,this)}return g.prototype.getValue=function(){return this.value},g.prototype.getBits=function(){return this.bits},g.fromString=function(p){switch(p){case"L":return g.L;case"M":return g.M;case"Q":return g.Q;case"H":return g.H;default:throw new Ao(p+"not available")}},g.prototype.toString=function(){return this.stringValue},g.prototype.equals=function(p){return p instanceof g&&this.value===p.value},g.forBits=function(p){if(p<0||p>=g.FOR_BITS.size)throw new un;return g.FOR_BITS.get(p)},g.FOR_BITS=new Map,g.FOR_VALUE=new Map,g.L=new g(xd.L,"L",1),g.M=new g(xd.M,"M",0),g.Q=new g(xd.Q,"Q",3),g.H=new g(xd.H,"H",2),g}();const Nu=Gz;var Yz=function(){function g(p){this.errorCorrectionLevel=Nu.forBits(p>>3&3),this.dataMask=7&p}return g.numBitsDiffering=function(p,y){return hi.bitCount(p^y)},g.decodeFormatInformation=function(p,y){var v=g.doDecodeFormatInformation(p,y);return null!==v?v:g.doDecodeFormatInformation(p^g.FORMAT_INFO_MASK_QR,y^g.FORMAT_INFO_MASK_QR)},g.doDecodeFormatInformation=function(p,y){var v,_,E=Number.MAX_SAFE_INTEGER,w=0;try{for(var D=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(g.FORMAT_INFO_DECODE_LOOKUP),O=D.next();!O.done;O=D.next()){var A=O.value,W=A[0];if(W===p||W===y)return new g(A[1]);var q=g.numBitsDiffering(p,W);q<E&&(w=A[1],E=q),p!==y&&(q=g.numBitsDiffering(y,W))<E&&(w=A[1],E=q)}}catch(_e){v={error:_e}}finally{try{O&&!O.done&&(_=D.return)&&_.call(D)}finally{if(v)throw v.error}}return E<=3?new g(w):null},g.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},g.prototype.getDataMask=function(){return this.dataMask},g.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},g.prototype.equals=function(p){return p instanceof g&&(this.errorCorrectionLevel===p.errorCorrectionLevel&&this.dataMask===p.dataMask)},g.FORMAT_INFO_MASK_QR=21522,g.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],g}();const OP=Yz;var Xz=function(){function g(p){for(var y=[],v=1;v<arguments.length;v++)y[v-1]=arguments[v];this.ecCodewordsPerBlock=p,this.ecBlocks=y}return g.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},g.prototype.getNumBlocks=function(){var p,y,v=0,_=this.ecBlocks;try{for(var E=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(_),w=E.next();!w.done;w=E.next())v+=w.value.getCount()}catch(O){p={error:O}}finally{try{w&&!w.done&&(y=E.return)&&y.call(E)}finally{if(p)throw p.error}}return v},g.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},g.prototype.getECBlocks=function(){return this.ecBlocks},g}();const sr=Xz;var Qz=function(){function g(p,y){this.count=p,this.dataCodewords=y}return g.prototype.getCount=function(){return this.count},g.prototype.getDataCodewords=function(){return this.dataCodewords},g}();const At=Qz;var qz=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},eG=function(){function g(p,y){for(var v,_,E=[],w=2;w<arguments.length;w++)E[w-2]=arguments[w];this.versionNumber=p,this.alignmentPatternCenters=y,this.ecBlocks=E;var D=0,O=E[0].getECCodewordsPerBlock(),A=E[0].getECBlocks();try{for(var W=qz(A),q=W.next();!q.done;q=W.next()){var _e=q.value;D+=_e.getCount()*(_e.getDataCodewords()+O)}}catch(be){v={error:be}}finally{try{q&&!q.done&&(_=W.return)&&_.call(W)}finally{if(v)throw v.error}}this.totalCodewords=D}return g.prototype.getVersionNumber=function(){return this.versionNumber},g.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},g.prototype.getTotalCodewords=function(){return this.totalCodewords},g.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},g.prototype.getECBlocksForLevel=function(p){return this.ecBlocks[p.getValue()]},g.getProvisionalVersionForDimension=function(p){if(p%4!=1)throw new Hr;try{return this.getVersionForNumber((p-17)/4)}catch(y){throw new Hr}},g.getVersionForNumber=function(p){if(p<1||p>40)throw new un;return g.VERSIONS[p-1]},g.decodeVersionInformation=function(p){for(var y=Number.MAX_SAFE_INTEGER,v=0,_=0;_<g.VERSION_DECODE_INFO.length;_++){var E=g.VERSION_DECODE_INFO[_];if(E===p)return g.getVersionForNumber(_+7);var w=OP.numBitsDiffering(p,E);w<y&&(v=_+7,y=w)}return y<=3?g.getVersionForNumber(v):null},g.prototype.buildFunctionPattern=function(){var p=this.getDimensionForVersion(),y=new Xa(p);y.setRegion(0,0,9,9),y.setRegion(p-8,0,8,9),y.setRegion(0,p-8,9,8);for(var v=this.alignmentPatternCenters.length,_=0;_<v;_++)for(var E=this.alignmentPatternCenters[_]-2,w=0;w<v;w++)0===_&&(0===w||w===v-1)||_===v-1&&0===w||y.setRegion(this.alignmentPatternCenters[w]-2,E,5,5);return y.setRegion(6,9,1,p-17),y.setRegion(9,6,p-17,1),this.versionNumber>6&&(y.setRegion(p-11,0,3,6),y.setRegion(0,p-11,6,3)),y},g.prototype.toString=function(){return""+this.versionNumber},g.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),g.VERSIONS=[new g(1,new Int32Array(0),new sr(7,new At(1,19)),new sr(10,new At(1,16)),new sr(13,new At(1,13)),new sr(17,new At(1,9))),new g(2,Int32Array.from([6,18]),new sr(10,new At(1,34)),new sr(16,new At(1,28)),new sr(22,new At(1,22)),new sr(28,new At(1,16))),new g(3,Int32Array.from([6,22]),new sr(15,new At(1,55)),new sr(26,new At(1,44)),new sr(18,new At(2,17)),new sr(22,new At(2,13))),new g(4,Int32Array.from([6,26]),new sr(20,new At(1,80)),new sr(18,new At(2,32)),new sr(26,new At(2,24)),new sr(16,new At(4,9))),new g(5,Int32Array.from([6,30]),new sr(26,new At(1,108)),new sr(24,new At(2,43)),new sr(18,new At(2,15),new At(2,16)),new sr(22,new At(2,11),new At(2,12))),new g(6,Int32Array.from([6,34]),new sr(18,new At(2,68)),new sr(16,new At(4,27)),new sr(24,new At(4,19)),new sr(28,new At(4,15))),new g(7,Int32Array.from([6,22,38]),new sr(20,new At(2,78)),new sr(18,new At(4,31)),new sr(18,new At(2,14),new At(4,15)),new sr(26,new At(4,13),new At(1,14))),new g(8,Int32Array.from([6,24,42]),new sr(24,new At(2,97)),new sr(22,new At(2,38),new At(2,39)),new sr(22,new At(4,18),new At(2,19)),new sr(26,new At(4,14),new At(2,15))),new g(9,Int32Array.from([6,26,46]),new sr(30,new At(2,116)),new sr(22,new At(3,36),new At(2,37)),new sr(20,new At(4,16),new At(4,17)),new sr(24,new At(4,12),new At(4,13))),new g(10,Int32Array.from([6,28,50]),new sr(18,new At(2,68),new At(2,69)),new sr(26,new At(4,43),new At(1,44)),new sr(24,new At(6,19),new At(2,20)),new sr(28,new At(6,15),new At(2,16))),new g(11,Int32Array.from([6,30,54]),new sr(20,new At(4,81)),new sr(30,new At(1,50),new At(4,51)),new sr(28,new At(4,22),new At(4,23)),new sr(24,new At(3,12),new At(8,13))),new g(12,Int32Array.from([6,32,58]),new sr(24,new At(2,92),new At(2,93)),new sr(22,new At(6,36),new At(2,37)),new sr(26,new At(4,20),new At(6,21)),new sr(28,new At(7,14),new At(4,15))),new g(13,Int32Array.from([6,34,62]),new sr(26,new At(4,107)),new sr(22,new At(8,37),new At(1,38)),new sr(24,new At(8,20),new At(4,21)),new sr(22,new At(12,11),new At(4,12))),new g(14,Int32Array.from([6,26,46,66]),new sr(30,new At(3,115),new At(1,116)),new sr(24,new At(4,40),new At(5,41)),new sr(20,new At(11,16),new At(5,17)),new sr(24,new At(11,12),new At(5,13))),new g(15,Int32Array.from([6,26,48,70]),new sr(22,new At(5,87),new At(1,88)),new sr(24,new At(5,41),new At(5,42)),new sr(30,new At(5,24),new At(7,25)),new sr(24,new At(11,12),new At(7,13))),new g(16,Int32Array.from([6,26,50,74]),new sr(24,new At(5,98),new At(1,99)),new sr(28,new At(7,45),new At(3,46)),new sr(24,new At(15,19),new At(2,20)),new sr(30,new At(3,15),new At(13,16))),new g(17,Int32Array.from([6,30,54,78]),new sr(28,new At(1,107),new At(5,108)),new sr(28,new At(10,46),new At(1,47)),new sr(28,new At(1,22),new At(15,23)),new sr(28,new At(2,14),new At(17,15))),new g(18,Int32Array.from([6,30,56,82]),new sr(30,new At(5,120),new At(1,121)),new sr(26,new At(9,43),new At(4,44)),new sr(28,new At(17,22),new At(1,23)),new sr(28,new At(2,14),new At(19,15))),new g(19,Int32Array.from([6,30,58,86]),new sr(28,new At(3,113),new At(4,114)),new sr(26,new At(3,44),new At(11,45)),new sr(26,new At(17,21),new At(4,22)),new sr(26,new At(9,13),new At(16,14))),new g(20,Int32Array.from([6,34,62,90]),new sr(28,new At(3,107),new At(5,108)),new sr(26,new At(3,41),new At(13,42)),new sr(30,new At(15,24),new At(5,25)),new sr(28,new At(15,15),new At(10,16))),new g(21,Int32Array.from([6,28,50,72,94]),new sr(28,new At(4,116),new At(4,117)),new sr(26,new At(17,42)),new sr(28,new At(17,22),new At(6,23)),new sr(30,new At(19,16),new At(6,17))),new g(22,Int32Array.from([6,26,50,74,98]),new sr(28,new At(2,111),new At(7,112)),new sr(28,new At(17,46)),new sr(30,new At(7,24),new At(16,25)),new sr(24,new At(34,13))),new g(23,Int32Array.from([6,30,54,78,102]),new sr(30,new At(4,121),new At(5,122)),new sr(28,new At(4,47),new At(14,48)),new sr(30,new At(11,24),new At(14,25)),new sr(30,new At(16,15),new At(14,16))),new g(24,Int32Array.from([6,28,54,80,106]),new sr(30,new At(6,117),new At(4,118)),new sr(28,new At(6,45),new At(14,46)),new sr(30,new At(11,24),new At(16,25)),new sr(30,new At(30,16),new At(2,17))),new g(25,Int32Array.from([6,32,58,84,110]),new sr(26,new At(8,106),new At(4,107)),new sr(28,new At(8,47),new At(13,48)),new sr(30,new At(7,24),new At(22,25)),new sr(30,new At(22,15),new At(13,16))),new g(26,Int32Array.from([6,30,58,86,114]),new sr(28,new At(10,114),new At(2,115)),new sr(28,new At(19,46),new At(4,47)),new sr(28,new At(28,22),new At(6,23)),new sr(30,new At(33,16),new At(4,17))),new g(27,Int32Array.from([6,34,62,90,118]),new sr(30,new At(8,122),new At(4,123)),new sr(28,new At(22,45),new At(3,46)),new sr(30,new At(8,23),new At(26,24)),new sr(30,new At(12,15),new At(28,16))),new g(28,Int32Array.from([6,26,50,74,98,122]),new sr(30,new At(3,117),new At(10,118)),new sr(28,new At(3,45),new At(23,46)),new sr(30,new At(4,24),new At(31,25)),new sr(30,new At(11,15),new At(31,16))),new g(29,Int32Array.from([6,30,54,78,102,126]),new sr(30,new At(7,116),new At(7,117)),new sr(28,new At(21,45),new At(7,46)),new sr(30,new At(1,23),new At(37,24)),new sr(30,new At(19,15),new At(26,16))),new g(30,Int32Array.from([6,26,52,78,104,130]),new sr(30,new At(5,115),new At(10,116)),new sr(28,new At(19,47),new At(10,48)),new sr(30,new At(15,24),new At(25,25)),new sr(30,new At(23,15),new At(25,16))),new g(31,Int32Array.from([6,30,56,82,108,134]),new sr(30,new At(13,115),new At(3,116)),new sr(28,new At(2,46),new At(29,47)),new sr(30,new At(42,24),new At(1,25)),new sr(30,new At(23,15),new At(28,16))),new g(32,Int32Array.from([6,34,60,86,112,138]),new sr(30,new At(17,115)),new sr(28,new At(10,46),new At(23,47)),new sr(30,new At(10,24),new At(35,25)),new sr(30,new At(19,15),new At(35,16))),new g(33,Int32Array.from([6,30,58,86,114,142]),new sr(30,new At(17,115),new At(1,116)),new sr(28,new At(14,46),new At(21,47)),new sr(30,new At(29,24),new At(19,25)),new sr(30,new At(11,15),new At(46,16))),new g(34,Int32Array.from([6,34,62,90,118,146]),new sr(30,new At(13,115),new At(6,116)),new sr(28,new At(14,46),new At(23,47)),new sr(30,new At(44,24),new At(7,25)),new sr(30,new At(59,16),new At(1,17))),new g(35,Int32Array.from([6,30,54,78,102,126,150]),new sr(30,new At(12,121),new At(7,122)),new sr(28,new At(12,47),new At(26,48)),new sr(30,new At(39,24),new At(14,25)),new sr(30,new At(22,15),new At(41,16))),new g(36,Int32Array.from([6,24,50,76,102,128,154]),new sr(30,new At(6,121),new At(14,122)),new sr(28,new At(6,47),new At(34,48)),new sr(30,new At(46,24),new At(10,25)),new sr(30,new At(2,15),new At(64,16))),new g(37,Int32Array.from([6,28,54,80,106,132,158]),new sr(30,new At(17,122),new At(4,123)),new sr(28,new At(29,46),new At(14,47)),new sr(30,new At(49,24),new At(10,25)),new sr(30,new At(24,15),new At(46,16))),new g(38,Int32Array.from([6,32,58,84,110,136,162]),new sr(30,new At(4,122),new At(18,123)),new sr(28,new At(13,46),new At(32,47)),new sr(30,new At(48,24),new At(14,25)),new sr(30,new At(42,15),new At(32,16))),new g(39,Int32Array.from([6,26,54,82,110,138,166]),new sr(30,new At(20,117),new At(4,118)),new sr(28,new At(40,47),new At(7,48)),new sr(30,new At(43,24),new At(22,25)),new sr(30,new At(10,15),new At(67,16))),new g(40,Int32Array.from([6,30,58,86,114,142,170]),new sr(30,new At(19,118),new At(6,119)),new sr(28,new At(18,47),new At(31,48)),new sr(30,new At(34,24),new At(34,25)),new sr(30,new At(20,15),new At(61,16)))],g}();const Dd=eG;var ts=(()=>(function(g){g[g.DATA_MASK_000=0]="DATA_MASK_000",g[g.DATA_MASK_001=1]="DATA_MASK_001",g[g.DATA_MASK_010=2]="DATA_MASK_010",g[g.DATA_MASK_011=3]="DATA_MASK_011",g[g.DATA_MASK_100=4]="DATA_MASK_100",g[g.DATA_MASK_101=5]="DATA_MASK_101",g[g.DATA_MASK_110=6]="DATA_MASK_110",g[g.DATA_MASK_111=7]="DATA_MASK_111"}(ts||(ts={})),ts))(),tG=function(){function g(p,y){this.value=p,this.isMasked=y}return g.prototype.unmaskBitMatrix=function(p,y){for(var v=0;v<y;v++)for(var _=0;_<y;_++)this.isMasked(v,_)&&p.flip(_,v)},g.values=new Map([[ts.DATA_MASK_000,new g(ts.DATA_MASK_000,function(p,y){return 0==(p+y&1)})],[ts.DATA_MASK_001,new g(ts.DATA_MASK_001,function(p,y){return 0==(1&p)})],[ts.DATA_MASK_010,new g(ts.DATA_MASK_010,function(p,y){return y%3==0})],[ts.DATA_MASK_011,new g(ts.DATA_MASK_011,function(p,y){return(p+y)%3==0})],[ts.DATA_MASK_100,new g(ts.DATA_MASK_100,function(p,y){return 0==(Math.floor(p/2)+Math.floor(y/3)&1)})],[ts.DATA_MASK_101,new g(ts.DATA_MASK_101,function(p,y){return p*y%6==0})],[ts.DATA_MASK_110,new g(ts.DATA_MASK_110,function(p,y){return p*y%6<3})],[ts.DATA_MASK_111,new g(ts.DATA_MASK_111,function(p,y){return 0==(p+y+p*y%3&1)})]]),g}();const IP=tG;var rG=function(){function g(p){var y=p.getHeight();if(y<21||1!=(3&y))throw new Hr;this.bitMatrix=p}return g.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var p=0,y=0;y<6;y++)p=this.copyBit(y,8,p);p=this.copyBit(7,8,p),p=this.copyBit(8,8,p),p=this.copyBit(8,7,p);for(var v=5;v>=0;v--)p=this.copyBit(8,v,p);var _=this.bitMatrix.getHeight(),E=0,w=_-7;for(v=_-1;v>=w;v--)E=this.copyBit(8,v,E);for(y=_-8;y<_;y++)E=this.copyBit(y,8,E);if(this.parsedFormatInfo=OP.decodeFormatInformation(p,E),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new Hr},g.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var p=this.bitMatrix.getHeight(),y=Math.floor((p-17)/4);if(y<=6)return Dd.getVersionForNumber(y);for(var v=0,_=p-11,E=5;E>=0;E--)for(var w=p-9;w>=_;w--)v=this.copyBit(w,E,v);var D=Dd.decodeVersionInformation(v);if(null!==D&&D.getDimensionForVersion()===p)return this.parsedVersion=D,D;for(v=0,w=5;w>=0;w--)for(E=p-9;E>=_;E--)v=this.copyBit(w,E,v);if(null!==(D=Dd.decodeVersionInformation(v))&&D.getDimensionForVersion()===p)return this.parsedVersion=D,D;throw new Hr},g.prototype.copyBit=function(p,y,v){return(this.isMirror?this.bitMatrix.get(y,p):this.bitMatrix.get(p,y))?v<<1|1:v<<1},g.prototype.readCodewords=function(){var p=this.readFormatInformation(),y=this.readVersion(),v=IP.values.get(p.getDataMask()),_=this.bitMatrix.getHeight();v.unmaskBitMatrix(this.bitMatrix,_);for(var E=y.buildFunctionPattern(),w=!0,D=new Uint8Array(y.getTotalCodewords()),O=0,A=0,W=0,q=_-1;q>0;q-=2){6===q&&q--;for(var _e=0;_e<_;_e++)for(var be=w?_-1-_e:_e,We=0;We<2;We++)E.get(q-We,be)||(W++,A<<=1,this.bitMatrix.get(q-We,be)&&(A|=1),8===W&&(D[O++]=A,W=0,A=0));w=!w}if(O!==y.getTotalCodewords())throw new Hr;return D},g.prototype.remask=function(){if(null!==this.parsedFormatInfo){var p=IP.values[this.parsedFormatInfo.getDataMask()],y=this.bitMatrix.getHeight();p.unmaskBitMatrix(this.bitMatrix,y)}},g.prototype.setMirror=function(p){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=p},g.prototype.mirror=function(){for(var p=this.bitMatrix,y=0,v=p.getWidth();y<v;y++)for(var _=y+1,E=p.getHeight();_<E;_++)p.get(y,_)!==p.get(_,y)&&(p.flip(_,y),p.flip(y,_))},g}();const nG=rG;var TP=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},iG=function(){function g(p,y){this.numDataCodewords=p,this.codewords=y}return g.getDataBlocks=function(p,y,v){var _,E,w,D;if(p.length!==y.getTotalCodewords())throw new un;var O=y.getECBlocksForLevel(v),A=0,W=O.getECBlocks();try{for(var q=TP(W),_e=q.next();!_e.done;_e=q.next())A+=(be=_e.value).getCount()}catch(xn){_={error:xn}}finally{try{_e&&!_e.done&&(E=q.return)&&E.call(q)}finally{if(_)throw _.error}}var We=new Array(A),qe=0;try{for(var dt=TP(W),gt=dt.next();!gt.done;gt=dt.next())for(var be=gt.value,lt=0;lt<be.getCount();lt++){var Tt=be.getDataCodewords(),Rt=O.getECCodewordsPerBlock()+Tt;We[qe++]=new g(Tt,new Uint8Array(Rt))}}catch(xn){w={error:xn}}finally{try{gt&&!gt.done&&(D=dt.return)&&D.call(dt)}finally{if(w)throw w.error}}for(var Xt=We[0].codewords.length,ur=We.length-1;ur>=0&&We[ur].codewords.length!==Xt;)ur--;ur++;var Ur=Xt-O.getECCodewordsPerBlock(),$r=0;for(lt=0;lt<Ur;lt++)for(var rn=0;rn<qe;rn++)We[rn].codewords[lt]=p[$r++];for(rn=ur;rn<qe;rn++)We[rn].codewords[Ur]=p[$r++];var Mn=We[0].codewords.length;for(lt=Ur;lt<Mn;lt++)for(rn=0;rn<qe;rn++)We[rn].codewords[rn<ur?lt:lt+1]=p[$r++];return We},g.prototype.getNumDataCodewords=function(){return this.numDataCodewords},g.prototype.getCodewords=function(){return this.codewords},g}();const oG=iG;var Aa=(()=>(function(g){g[g.TERMINATOR=0]="TERMINATOR",g[g.NUMERIC=1]="NUMERIC",g[g.ALPHANUMERIC=2]="ALPHANUMERIC",g[g.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",g[g.BYTE=4]="BYTE",g[g.ECI=5]="ECI",g[g.KANJI=6]="KANJI",g[g.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",g[g.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",g[g.HANZI=9]="HANZI"}(Aa||(Aa={})),Aa))(),sG=function(){function g(p,y,v,_){this.value=p,this.stringValue=y,this.characterCountBitsForVersions=v,this.bits=_,g.FOR_BITS.set(_,this),g.FOR_VALUE.set(p,this)}return g.forBits=function(p){var y=g.FOR_BITS.get(p);if(void 0===y)throw new un;return y},g.prototype.getCharacterCountBits=function(p){var y=p.getVersionNumber();return this.characterCountBitsForVersions[y<=9?0:y<=26?1:2]},g.prototype.getValue=function(){return this.value},g.prototype.getBits=function(){return this.bits},g.prototype.equals=function(p){return p instanceof g&&this.value===p.value},g.prototype.toString=function(){return this.stringValue},g.FOR_BITS=new Map,g.FOR_VALUE=new Map,g.TERMINATOR=new g(Aa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),g.NUMERIC=new g(Aa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),g.ALPHANUMERIC=new g(Aa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),g.STRUCTURED_APPEND=new g(Aa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),g.BYTE=new g(Aa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),g.ECI=new g(Aa.ECI,"ECI",Int32Array.from([0,0,0]),7),g.KANJI=new g(Aa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),g.FNC1_FIRST_POSITION=new g(Aa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),g.FNC1_SECOND_POSITION=new g(Aa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),g.HANZI=new g(Aa.HANZI,"HANZI",Int32Array.from([8,10,12]),13),g}();const zi=sG;var aG=function(){function g(){}return g.decode=function(p,y,v,_){var E=new SP(p),w=new Ai,D=new Array,O=-1,A=-1;try{var W=null,q=!1,_e=void 0;do{if(E.available()<4)_e=zi.TERMINATOR;else{var be=E.readBits(4);_e=zi.forBits(be)}switch(_e){case zi.TERMINATOR:break;case zi.FNC1_FIRST_POSITION:case zi.FNC1_SECOND_POSITION:q=!0;break;case zi.STRUCTURED_APPEND:if(E.available()<16)throw new Hr;O=E.readBits(8),A=E.readBits(8);break;case zi.ECI:var We=g.parseECIValue(E);if(null===(W=qo.getCharacterSetECIByValue(We)))throw new Hr;break;case zi.HANZI:var qe=E.readBits(4),dt=E.readBits(_e.getCharacterCountBits(y));qe===g.GB2312_SUBSET&&g.decodeHanziSegment(E,w,dt);break;default:var gt=E.readBits(_e.getCharacterCountBits(y));switch(_e){case zi.NUMERIC:g.decodeNumericSegment(E,w,gt);break;case zi.ALPHANUMERIC:g.decodeAlphanumericSegment(E,w,gt,q);break;case zi.BYTE:g.decodeByteSegment(E,w,gt,W,D,_);break;case zi.KANJI:g.decodeKanjiSegment(E,w,gt);break;default:throw new Hr}}}while(_e!==zi.TERMINATOR)}catch(lt){throw new Hr}return new gy(p,w.toString(),0===D.length?null:D,null===v?null:v.toString(),O,A)},g.decodeHanziSegment=function(p,y,v){if(13*v>p.available())throw new Hr;for(var _=new Uint8Array(2*v),E=0;v>0;){var w=p.readBits(13),D=w/96<<8&4294967295|w%96;_[E]=(D+=D<959?41377:42657)>>8&255,_[E+1]=255&D,E+=2,v--}try{y.append(eu.decode(_,Fi.GB2312))}catch(O){throw new Hr(O)}},g.decodeKanjiSegment=function(p,y,v){if(13*v>p.available())throw new Hr;for(var _=new Uint8Array(2*v),E=0;v>0;){var w=p.readBits(13),D=w/192<<8&4294967295|w%192;_[E]=(D+=D<7936?33088:49472)>>8,_[E+1]=D,E+=2,v--}try{y.append(eu.decode(_,Fi.SHIFT_JIS))}catch(O){throw new Hr(O)}},g.decodeByteSegment=function(p,y,v,_,E,w){if(8*v>p.available())throw new Hr;for(var D=new Uint8Array(v),O=0;O<v;O++)D[O]=p.readBits(8);var A;A=null===_?Fi.guessEncoding(D,w):_.getName();try{y.append(eu.decode(D,A))}catch(W){throw new Hr(W)}E.push(D)},g.toAlphaNumericChar=function(p){if(p>=g.ALPHANUMERIC_CHARS.length)throw new Hr;return g.ALPHANUMERIC_CHARS[p]},g.decodeAlphanumericSegment=function(p,y,v,_){for(var E=y.length();v>1;){if(p.available()<11)throw new Hr;var w=p.readBits(11);y.append(g.toAlphaNumericChar(Math.floor(w/45))),y.append(g.toAlphaNumericChar(w%45)),v-=2}if(1===v){if(p.available()<6)throw new Hr;y.append(g.toAlphaNumericChar(p.readBits(6)))}if(_)for(var D=E;D<y.length();D++)"%"===y.charAt(D)&&(D<y.length()-1&&"%"===y.charAt(D+1)?y.deleteCharAt(D+1):y.setCharAt(D,String.fromCharCode(29)))},g.decodeNumericSegment=function(p,y,v){for(;v>=3;){if(p.available()<10)throw new Hr;var _=p.readBits(10);if(_>=1e3)throw new Hr;y.append(g.toAlphaNumericChar(Math.floor(_/100))),y.append(g.toAlphaNumericChar(Math.floor(_/10)%10)),y.append(g.toAlphaNumericChar(_%10)),v-=3}if(2===v){if(p.available()<7)throw new Hr;var E=p.readBits(7);if(E>=100)throw new Hr;y.append(g.toAlphaNumericChar(Math.floor(E/10))),y.append(g.toAlphaNumericChar(E%10))}else if(1===v){if(p.available()<4)throw new Hr;var w=p.readBits(4);if(w>=10)throw new Hr;y.append(g.toAlphaNumericChar(w))}},g.parseECIValue=function(p){var y=p.readBits(8);if(0==(128&y))return 127&y;if(128==(192&y))return(63&y)<<8&4294967295|p.readBits(8);if(192==(224&y))return(31&y)<<16&4294967295|p.readBits(16);throw new Hr},g.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",g.GB2312_SUBSET=1,g}();const lG=aG;var uG=function(){function g(p){this.mirrored=p}return g.prototype.isMirrored=function(){return this.mirrored},g.prototype.applyMirroredCorrection=function(p){if(this.mirrored&&null!==p&&!(p.length<3)){var y=p[0];p[0]=p[2],p[2]=y}},g}();const AP=uG;var PP=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},cG=function(){function g(){this.rsDecoder=new vy(ca.QR_CODE_FIELD_256)}return g.prototype.decodeBooleanArray=function(p,y){return this.decodeBitMatrix(Xa.parseFromBooleanArray(p),y)},g.prototype.decodeBitMatrix=function(p,y){var v=new nG(p),_=null;try{return this.decodeBitMatrixParser(v,y)}catch(w){_=w}try{v.remask(),v.setMirror(!0),v.readVersion(),v.readFormatInformation(),v.mirror();var E=this.decodeBitMatrixParser(v,y);return E.setOther(new AP(!0)),E}catch(w){throw null!==_?_:w}},g.prototype.decodeBitMatrixParser=function(p,y){var v,_,E,w,D=p.readVersion(),O=p.readFormatInformation().getErrorCorrectionLevel(),A=p.readCodewords(),W=oG.getDataBlocks(A,D,O),q=0;try{for(var _e=PP(W),be=_e.next();!be.done;be=_e.next())q+=(We=be.value).getNumDataCodewords()}catch(ur){v={error:ur}}finally{try{be&&!be.done&&(_=_e.return)&&_.call(_e)}finally{if(v)throw v.error}}var qe=new Uint8Array(q),dt=0;try{for(var gt=PP(W),lt=gt.next();!lt.done;lt=gt.next()){var We,Tt=(We=lt.value).getCodewords(),Rt=We.getNumDataCodewords();this.correctErrors(Tt,Rt);for(var Xt=0;Xt<Rt;Xt++)qe[dt++]=Tt[Xt]}}catch(ur){E={error:ur}}finally{try{lt&&!lt.done&&(w=gt.return)&&w.call(gt)}finally{if(E)throw E.error}}return lG.decode(qe,D,O,y)},g.prototype.correctErrors=function(p,y){var v=new Int32Array(p);try{this.rsDecoder.decode(v,p.length-y)}catch(E){throw new $o}for(var _=0;_<y;_++)p[_]=v[_]},g}();const dG=cG;var hG=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),fG=function(g){function p(y,v,_){var E=g.call(this,y,v)||this;return E.estimatedModuleSize=_,E}return hG(p,g),p.prototype.aboutEquals=function(y,v,_){if(Math.abs(v-this.getY())<=y&&Math.abs(_-this.getX())<=y){var E=Math.abs(y-this.estimatedModuleSize);return E<=1||E<=this.estimatedModuleSize}return!1},p.prototype.combineEstimate=function(y,v,_){return new p((this.getX()+v)/2,(this.getY()+y)/2,(this.estimatedModuleSize+_)/2)},p}(mn);const pG=fG;var gG=function(){function g(p,y,v,_,E,w,D){this.image=p,this.startX=y,this.startY=v,this.width=_,this.height=E,this.moduleSize=w,this.resultPointCallback=D,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return g.prototype.find=function(){for(var p=this.startX,y=this.height,_=p+this.width,E=this.startY+y/2,w=new Int32Array(3),D=this.image,O=0;O<y;O++){var A=E+(0==(1&O)?Math.floor((O+1)/2):-Math.floor((O+1)/2));w[0]=0,w[1]=0,w[2]=0;for(var W=p;W<_&&!D.get(W,A);)W++;for(var q=0;W<_;){if(D.get(W,A))if(1===q)w[1]++;else if(2===q){var _e;if(this.foundPatternCross(w)&&null!==(_e=this.handlePossibleCenter(w,A,W)))return _e;w[0]=w[2],w[1]=1,w[2]=0,q=1}else w[++q]++;else 1===q&&q++,w[q]++;W++}if(this.foundPatternCross(w)&&null!==(_e=this.handlePossibleCenter(w,A,_)))return _e}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new Cr},g.centerFromEnd=function(p,y){return y-p[2]-p[1]/2},g.prototype.foundPatternCross=function(p){for(var y=this.moduleSize,v=y/2,_=0;_<3;_++)if(Math.abs(y-p[_])>=v)return!1;return!0},g.prototype.crossCheckVertical=function(p,y,v,_){var E=this.image,w=E.getHeight(),D=this.crossCheckStateCount;D[0]=0,D[1]=0,D[2]=0;for(var O=p;O>=0&&E.get(y,O)&&D[1]<=v;)D[1]++,O--;if(O<0||D[1]>v)return NaN;for(;O>=0&&!E.get(y,O)&&D[0]<=v;)D[0]++,O--;if(D[0]>v)return NaN;for(O=p+1;O<w&&E.get(y,O)&&D[1]<=v;)D[1]++,O++;if(O===w||D[1]>v)return NaN;for(;O<w&&!E.get(y,O)&&D[2]<=v;)D[2]++,O++;return D[2]>v||5*Math.abs(D[0]+D[1]+D[2]-_)>=2*_?NaN:this.foundPatternCross(D)?g.centerFromEnd(D,O):NaN},g.prototype.handlePossibleCenter=function(p,y,v){var _,E,w=p[0]+p[1]+p[2],D=g.centerFromEnd(p,v),O=this.crossCheckVertical(y,D,2*p[1],w);if(!isNaN(O)){var A=(p[0]+p[1]+p[2])/3;try{for(var W=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),q=W.next();!q.done;q=W.next()){var _e=q.value;if(_e.aboutEquals(A,O,D))return _e.combineEstimate(O,D,A)}}catch(We){_={error:We}}finally{try{q&&!q.done&&(E=W.return)&&E.call(W)}finally{if(_)throw _.error}}var be=new pG(D,O,A);this.possibleCenters.push(be),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(be)}return null},g}();const yG=gG;var vG=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),_G=function(g){function p(y,v,_,E){var w=g.call(this,y,v)||this;return w.estimatedModuleSize=_,w.count=E,void 0===E&&(w.count=1),w}return vG(p,g),p.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},p.prototype.getCount=function(){return this.count},p.prototype.aboutEquals=function(y,v,_){if(Math.abs(v-this.getY())<=y&&Math.abs(_-this.getX())<=y){var E=Math.abs(y-this.estimatedModuleSize);return E<=1||E<=this.estimatedModuleSize}return!1},p.prototype.combineEstimate=function(y,v,_){var E=this.count+1;return new p((this.count*this.getX()+v)/E,(this.count*this.getY()+y)/E,(this.count*this.estimatedModuleSize+_)/E,E)},p}(mn);const EG=_G;var bG=function(){function g(p){this.bottomLeft=p[0],this.topLeft=p[1],this.topRight=p[2]}return g.prototype.getBottomLeft=function(){return this.bottomLeft},g.prototype.getTopLeft=function(){return this.topLeft},g.prototype.getTopRight=function(){return this.topRight},g}();const CG=bG;var a0=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},wG=function(){function g(p,y){this.image=p,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=y}return g.prototype.getImage=function(){return this.image},g.prototype.getPossibleCenters=function(){return this.possibleCenters},g.prototype.find=function(p){var y=null!=p&&void 0!==p.get(Ci.TRY_HARDER),v=null!=p&&void 0!==p.get(Ci.PURE_BARCODE),_=this.image,E=_.getHeight(),w=_.getWidth(),D=Math.floor(3*E/(4*g.MAX_MODULES));(D<g.MIN_SKIP||y)&&(D=g.MIN_SKIP);for(var O=!1,A=new Int32Array(5),W=D-1;W<E&&!O;W+=D){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;for(var q=0,_e=0;_e<w;_e++)if(_.get(_e,W))1==(1&q)&&q++,A[q]++;else if(0==(1&q))if(4===q)if(g.foundPatternCross(A)){if(!0!==this.handlePossibleCenter(A,W,_e,v)){A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,q=3;continue}if(D=2,!0===this.hasSkipped)O=this.haveMultiplyConfirmedCenters();else{var We=this.findRowSkip();We>A[2]&&(W+=We-A[2]-D,_e=w-1)}q=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,q=3;else A[++q]++;else A[q]++;g.foundPatternCross(A)&&!0===this.handlePossibleCenter(A,W,w,v)&&(D=A[0],this.hasSkipped&&(O=this.haveMultiplyConfirmedCenters()))}var qe=this.selectBestPatterns();return mn.orderBestPatterns(qe),new CG(qe)},g.centerFromEnd=function(p,y){return y-p[4]-p[3]-p[2]/2},g.foundPatternCross=function(p){for(var y=0,v=0;v<5;v++){var _=p[v];if(0===_)return!1;y+=_}if(y<7)return!1;var E=y/7,w=E/2;return Math.abs(E-p[0])<w&&Math.abs(E-p[1])<w&&Math.abs(3*E-p[2])<3*w&&Math.abs(E-p[3])<w&&Math.abs(E-p[4])<w},g.prototype.getCrossCheckStateCount=function(){var p=this.crossCheckStateCount;return p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p},g.prototype.crossCheckDiagonal=function(p,y,v,_){for(var E=this.getCrossCheckStateCount(),w=0,D=this.image;p>=w&&y>=w&&D.get(y-w,p-w);)E[2]++,w++;if(p<w||y<w)return!1;for(;p>=w&&y>=w&&!D.get(y-w,p-w)&&E[1]<=v;)E[1]++,w++;if(p<w||y<w||E[1]>v)return!1;for(;p>=w&&y>=w&&D.get(y-w,p-w)&&E[0]<=v;)E[0]++,w++;if(E[0]>v)return!1;var O=D.getHeight(),A=D.getWidth();for(w=1;p+w<O&&y+w<A&&D.get(y+w,p+w);)E[2]++,w++;if(p+w>=O||y+w>=A)return!1;for(;p+w<O&&y+w<A&&!D.get(y+w,p+w)&&E[3]<v;)E[3]++,w++;if(p+w>=O||y+w>=A||E[3]>=v)return!1;for(;p+w<O&&y+w<A&&D.get(y+w,p+w)&&E[4]<v;)E[4]++,w++;return!(E[4]>=v)&&Math.abs(E[0]+E[1]+E[2]+E[3]+E[4]-_)<2*_&&g.foundPatternCross(E)},g.prototype.crossCheckVertical=function(p,y,v,_){for(var E=this.image,w=E.getHeight(),D=this.getCrossCheckStateCount(),O=p;O>=0&&E.get(y,O);)D[2]++,O--;if(O<0)return NaN;for(;O>=0&&!E.get(y,O)&&D[1]<=v;)D[1]++,O--;if(O<0||D[1]>v)return NaN;for(;O>=0&&E.get(y,O)&&D[0]<=v;)D[0]++,O--;if(D[0]>v)return NaN;for(O=p+1;O<w&&E.get(y,O);)D[2]++,O++;if(O===w)return NaN;for(;O<w&&!E.get(y,O)&&D[3]<v;)D[3]++,O++;if(O===w||D[3]>=v)return NaN;for(;O<w&&E.get(y,O)&&D[4]<v;)D[4]++,O++;return D[4]>=v||5*Math.abs(D[0]+D[1]+D[2]+D[3]+D[4]-_)>=2*_?NaN:g.foundPatternCross(D)?g.centerFromEnd(D,O):NaN},g.prototype.crossCheckHorizontal=function(p,y,v,_){for(var E=this.image,w=E.getWidth(),D=this.getCrossCheckStateCount(),O=p;O>=0&&E.get(O,y);)D[2]++,O--;if(O<0)return NaN;for(;O>=0&&!E.get(O,y)&&D[1]<=v;)D[1]++,O--;if(O<0||D[1]>v)return NaN;for(;O>=0&&E.get(O,y)&&D[0]<=v;)D[0]++,O--;if(D[0]>v)return NaN;for(O=p+1;O<w&&E.get(O,y);)D[2]++,O++;if(O===w)return NaN;for(;O<w&&!E.get(O,y)&&D[3]<v;)D[3]++,O++;if(O===w||D[3]>=v)return NaN;for(;O<w&&E.get(O,y)&&D[4]<v;)D[4]++,O++;return D[4]>=v||5*Math.abs(D[0]+D[1]+D[2]+D[3]+D[4]-_)>=_?NaN:g.foundPatternCross(D)?g.centerFromEnd(D,O):NaN},g.prototype.handlePossibleCenter=function(p,y,v,_){var E=p[0]+p[1]+p[2]+p[3]+p[4],w=g.centerFromEnd(p,v),D=this.crossCheckVertical(y,Math.floor(w),p[2],E);if(!isNaN(D)&&(w=this.crossCheckHorizontal(Math.floor(w),Math.floor(D),p[2],E),!isNaN(w)&&(!_||this.crossCheckDiagonal(Math.floor(D),Math.floor(w),p[2],E)))){for(var O=E/7,A=!1,W=this.possibleCenters,q=0,_e=W.length;q<_e;q++){var be=W[q];if(be.aboutEquals(O,D,w)){W[q]=be.combineEstimate(D,w,O),A=!0;break}}if(!A){var We=new EG(w,D,O);W.push(We),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(We)}return!0}return!1},g.prototype.findRowSkip=function(){var p,y;if(this.possibleCenters.length<=1)return 0;var _=null;try{for(var E=a0(this.possibleCenters),w=E.next();!w.done;w=E.next()){var D=w.value;if(D.getCount()>=g.CENTER_QUORUM){if(null!=_)return this.hasSkipped=!0,Math.floor((Math.abs(_.getX()-D.getX())-Math.abs(_.getY()-D.getY()))/2);_=D}}}catch(O){p={error:O}}finally{try{w&&!w.done&&(y=E.return)&&y.call(E)}finally{if(p)throw p.error}}return 0},g.prototype.haveMultiplyConfirmedCenters=function(){var p,y,v,_,E=0,w=0,D=this.possibleCenters.length;try{for(var O=a0(this.possibleCenters),A=O.next();!A.done;A=O.next())(W=A.value).getCount()>=g.CENTER_QUORUM&&(E++,w+=W.getEstimatedModuleSize())}catch(qe){p={error:qe}}finally{try{A&&!A.done&&(y=O.return)&&y.call(O)}finally{if(p)throw p.error}}if(E<3)return!1;var q=w/D,_e=0;try{for(var be=a0(this.possibleCenters),We=be.next();!We.done;We=be.next()){var W=We.value;_e+=Math.abs(W.getEstimatedModuleSize()-q)}}catch(qe){v={error:qe}}finally{try{We&&!We.done&&(_=be.return)&&_.call(be)}finally{if(v)throw v.error}}return _e<=.05*w},g.prototype.selectBestPatterns=function(){var p,y,v,_,E=this.possibleCenters.length;if(E<3)throw new Cr;var D,w=this.possibleCenters;if(E>3){var O=0,A=0;try{for(var W=a0(this.possibleCenters),q=W.next();!q.done;q=W.next()){var be=q.value.getEstimatedModuleSize();O+=be,A+=be*be}}catch(Xt){p={error:Xt}}finally{try{q&&!q.done&&(y=W.return)&&y.call(W)}finally{if(p)throw p.error}}D=O/E;var We=Math.sqrt(A/E-D*D);w.sort(function(Xt,ur){var _r=Math.abs(ur.getEstimatedModuleSize()-D),Ur=Math.abs(Xt.getEstimatedModuleSize()-D);return _r<Ur?-1:_r>Ur?1:0});for(var qe=Math.max(.2*D,We),dt=0;dt<w.length&&w.length>3;dt++)Math.abs(w[dt].getEstimatedModuleSize()-D)>qe&&(w.splice(dt,1),dt--)}if(w.length>3){O=0;try{for(var lt=a0(w),Tt=lt.next();!Tt.done;Tt=lt.next())O+=Tt.value.getEstimatedModuleSize()}catch(ur){v={error:ur}}finally{try{Tt&&!Tt.done&&(_=lt.return)&&_.call(lt)}finally{if(v)throw v.error}}D=O/w.length,w.sort(function(ur,_r){if(_r.getCount()===ur.getCount()){var Ur=Math.abs(_r.getEstimatedModuleSize()-D),$r=Math.abs(ur.getEstimatedModuleSize()-D);return Ur<$r?1:Ur>$r?-1:0}return _r.getCount()-ur.getCount()}),w.splice(3)}return[w[0],w[1],w[2]]},g.CENTER_QUORUM=2,g.MIN_SKIP=3,g.MAX_MODULES=57,g}();const MG=wG;var xG=function(){function g(p){this.image=p}return g.prototype.getImage=function(){return this.image},g.prototype.getResultPointCallback=function(){return this.resultPointCallback},g.prototype.detect=function(p){this.resultPointCallback=null==p?null:p.get(Ci.NEED_RESULT_POINT_CALLBACK);var v=new MG(this.image,this.resultPointCallback).find(p);return this.processFinderPatternInfo(v)},g.prototype.processFinderPatternInfo=function(p){var y=p.getTopLeft(),v=p.getTopRight(),_=p.getBottomLeft(),E=this.calculateModuleSize(y,v,_);if(E<1)throw new Cr("No pattern found in proccess finder.");var w=g.computeDimension(y,v,_,E),D=Dd.getProvisionalVersionForDimension(w),O=D.getDimensionForVersion()-7,A=null;if(D.getAlignmentPatternCenters().length>0)for(var W=v.getX()-y.getX()+_.getX(),q=v.getY()-y.getY()+_.getY(),_e=1-3/O,be=Math.floor(y.getX()+_e*(W-y.getX())),We=Math.floor(y.getY()+_e*(q-y.getY())),qe=4;qe<=16;qe<<=1)try{A=this.findAlignmentInRegion(E,be,We,qe);break}catch(Tt){if(!(Tt instanceof Cr))throw Tt}var dt=g.createTransform(y,v,_,A,w),gt=g.sampleGrid(this.image,dt,w);return new tC(gt,null===A?[_,y,v]:[_,y,v,A])},g.createTransform=function(p,y,v,_,E){var D,O,A,W,w=E-3.5;return null!==_?(D=_.getX(),O=_.getY(),W=A=w-3):(D=y.getX()-p.getX()+v.getX(),O=y.getY()-p.getY()+v.getY(),A=w,W=w),cP.quadrilateralToQuadrilateral(3.5,3.5,w,3.5,A,W,3.5,w,p.getX(),p.getY(),y.getX(),y.getY(),D,O,v.getX(),v.getY())},g.sampleGrid=function(p,y,v){return nC.getInstance().sampleGridWithTransform(p,v,v,y)},g.computeDimension=function(p,y,v,_){var E=Ei.round(mn.distance(p,y)/_),w=Ei.round(mn.distance(p,v)/_),D=Math.floor((E+w)/2)+7;switch(3&D){case 0:D++;break;case 2:D--;break;case 3:throw new Cr("Dimensions could be not found.")}return D},g.prototype.calculateModuleSize=function(p,y,v){return(this.calculateModuleSizeOneWay(p,y)+this.calculateModuleSizeOneWay(p,v))/2},g.prototype.calculateModuleSizeOneWay=function(p,y){var v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(p.getX()),Math.floor(p.getY()),Math.floor(y.getX()),Math.floor(y.getY())),_=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(y.getX()),Math.floor(y.getY()),Math.floor(p.getX()),Math.floor(p.getY()));return isNaN(v)?_/7:isNaN(_)?v/7:(v+_)/14},g.prototype.sizeOfBlackWhiteBlackRunBothWays=function(p,y,v,_){var E=this.sizeOfBlackWhiteBlackRun(p,y,v,_),w=1,D=p-(v-p);D<0?(w=p/(p-D),D=0):D>=this.image.getWidth()&&(w=(this.image.getWidth()-1-p)/(D-p),D=this.image.getWidth()-1);var O=Math.floor(y-(_-y)*w);return w=1,O<0?(w=y/(y-O),O=0):O>=this.image.getHeight()&&(w=(this.image.getHeight()-1-y)/(O-y),O=this.image.getHeight()-1),D=Math.floor(p+(D-p)*w),(E+=this.sizeOfBlackWhiteBlackRun(p,y,D,O))-1},g.prototype.sizeOfBlackWhiteBlackRun=function(p,y,v,_){var E=Math.abs(_-y)>Math.abs(v-p);if(E){var w=p;p=y,y=w,w=v,v=_,_=w}for(var D=Math.abs(v-p),O=Math.abs(_-y),A=-D/2,W=p<v?1:-1,q=y<_?1:-1,_e=0,be=v+W,We=p,qe=y;We!==be;We+=W){if(1===_e===this.image.get(E?qe:We,E?We:qe)){if(2===_e)return Ei.distance(We,qe,p,y);_e++}if((A+=O)>0){if(qe===_)break;qe+=q,A-=D}}return 2===_e?Ei.distance(v+W,_,p,y):NaN},g.prototype.findAlignmentInRegion=function(p,y,v,_){var E=Math.floor(_*p),w=Math.max(0,y-E),D=Math.min(this.image.getWidth()-1,y+E);if(D-w<3*p)throw new Cr("Alignment top exceeds estimated module size.");var O=Math.max(0,v-E),A=Math.min(this.image.getHeight()-1,v+E);if(A-O<3*p)throw new Cr("Alignment bottom exceeds estimated module size.");return new yG(this.image,w,O,D-w,A-O,p,this.resultPointCallback).find()},g}();const DG=xG;var SG=function(){function g(){this.decoder=new dG}return g.prototype.getDecoder=function(){return this.decoder},g.prototype.decode=function(p,y){var v,_;if(null!=y&&void 0!==y.get(Ci.PURE_BARCODE)){var E=g.extractPureBits(p.getBlackMatrix());v=this.decoder.decodeBitMatrix(E,y),_=g.NO_POINTS}else{var w=new DG(p.getBlackMatrix()).detect(y);v=this.decoder.decodeBitMatrix(w.getBits(),y),_=w.getPoints()}v.getOther()instanceof AP&&v.getOther().applyMirroredCorrection(_);var D=new ua(v.getText(),v.getRawBytes(),void 0,_,En.QR_CODE,void 0),O=v.getByteSegments();null!==O&&D.putMetadata(Es.BYTE_SEGMENTS,O);var A=v.getECLevel();return null!==A&&D.putMetadata(Es.ERROR_CORRECTION_LEVEL,A),v.hasStructuredAppend()&&(D.putMetadata(Es.STRUCTURED_APPEND_SEQUENCE,v.getStructuredAppendSequenceNumber()),D.putMetadata(Es.STRUCTURED_APPEND_PARITY,v.getStructuredAppendParity())),D},g.prototype.reset=function(){},g.extractPureBits=function(p){var y=p.getTopLeftOnBit(),v=p.getBottomRightOnBit();if(null===y||null===v)throw new Cr;var _=this.moduleSize(y,p),E=y[1],w=v[1],D=y[0],O=v[0];if(D>=O||E>=w)throw new Cr;if(w-E!=O-D&&(O=D+(w-E))>=p.getWidth())throw new Cr;var A=Math.round((O-D+1)/_),W=Math.round((w-E+1)/_);if(A<=0||W<=0)throw new Cr;if(W!==A)throw new Cr;var q=Math.floor(_/2);E+=q;var _e=(D+=q)+Math.floor((A-1)*_)-O;if(_e>0){if(_e>q)throw new Cr;D-=_e}var be=E+Math.floor((W-1)*_)-w;if(be>0){if(be>q)throw new Cr;E-=be}for(var We=new Xa(A,W),qe=0;qe<W;qe++)for(var dt=E+Math.floor(qe*_),gt=0;gt<A;gt++)p.get(D+Math.floor(gt*_),dt)&&We.set(gt,qe);return We},g.moduleSize=function(p,y){for(var v=y.getHeight(),_=y.getWidth(),E=p[0],w=p[1],D=!0,O=0;E<_&&w<v;){if(D!==y.get(E,w)){if(5==++O)break;D=!D}E++,w++}if(E===_||w===v)throw new Cr;return(E-p[0])/7},g.NO_POINTS=new Array,g}();const xy=SG;var IG=function(){function g(){}return g.prototype.PDF417Common=function(){},g.getBitCountSum=function(p){return Ei.sum(p)},g.toIntArray=function(p){var y,v;if(null==p||!p.length)return g.EMPTY_INT_ARRAY;var _=new Int32Array(p.length),E=0;try{for(var w=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),D=w.next();!D.done;D=w.next())_[E++]=D.value}catch(A){y={error:A}}finally{try{D&&!D.done&&(v=w.return)&&v.call(w)}finally{if(y)throw y.error}}return _},g.getCodeword=function(p){var y=la.binarySearch(g.SYMBOL_TABLE,262143&p);return y<0?-1:(g.CODEWORD_TABLE[y]-1)%g.NUMBER_OF_CODEWORDS},g.MAX_CODEWORDS_IN_BARCODE=(g.NUMBER_OF_CODEWORDS=929)-1,g.MIN_ROWS_IN_BARCODE=3,g.MAX_ROWS_IN_BARCODE=90,g.MODULES_IN_CODEWORD=17,g.MODULES_IN_STOP_PATTERN=18,g.BARS_IN_MODULE=8,g.EMPTY_INT_ARRAY=new Int32Array([]),g.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),g.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),g}();const vi=IG;var TG=function(){function g(p,y){this.bits=p,this.points=y}return g.prototype.getBits=function(){return this.bits},g.prototype.getPoints=function(){return this.points},g}();const AG=TG;var PG=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},RG=function(){function g(){}return g.detectMultiple=function(p,y,v){var _=p.getBlackMatrix(),E=g.detect(v,_);return E.length||((_=_.clone()).rotate180(),E=g.detect(v,_)),new AG(_,E)},g.detect=function(p,y){for(var v,_,E=new Array,w=0,D=0,O=!1;w<y.getHeight();){var A=g.findVertices(y,w,D);if(null!=A[0]||null!=A[3]){if(O=!0,E.push(A),!p)break;null!=A[2]?(D=Math.trunc(A[2].getX()),w=Math.trunc(A[2].getY())):(D=Math.trunc(A[4].getX()),w=Math.trunc(A[4].getY()))}else{if(!O)break;O=!1,D=0;try{for(var W=(v=void 0,PG(E)),q=W.next();!q.done;q=W.next()){var _e=q.value;null!=_e[1]&&(w=Math.trunc(Math.max(w,_e[1].getY()))),null!=_e[3]&&(w=Math.max(w,Math.trunc(_e[3].getY())))}}catch(be){v={error:be}}finally{try{q&&!q.done&&(_=W.return)&&_.call(W)}finally{if(v)throw v.error}}w+=g.ROW_STEP}}return E},g.findVertices=function(p,y,v){var _=p.getHeight(),E=p.getWidth(),w=new Array(8);return g.copyToResult(w,g.findRowsWithPattern(p,_,E,y,v,g.START_PATTERN),g.INDEXES_START_PATTERN),null!=w[4]&&(v=Math.trunc(w[4].getX()),y=Math.trunc(w[4].getY())),g.copyToResult(w,g.findRowsWithPattern(p,_,E,y,v,g.STOP_PATTERN),g.INDEXES_STOP_PATTERN),w},g.copyToResult=function(p,y,v){for(var _=0;_<v.length;_++)p[v[_]]=y[_]},g.findRowsWithPattern=function(p,y,v,_,E,w){for(var D=new Array(4),O=!1,A=new Int32Array(w.length);_<y;_+=g.ROW_STEP)if(null!=(W=g.findGuardPattern(p,E,_,v,!1,w,A))){for(;_>0;){if(null==(q=g.findGuardPattern(p,E,--_,v,!1,w,A))){_++;break}W=q}D[0]=new mn(W[0],_),D[1]=new mn(W[1],_),O=!0;break}var _e=_+1;if(O){for(var be=0,q=Int32Array.from([Math.trunc(D[0].getX()),Math.trunc(D[1].getX())]);_e<y;_e++){var W;if(null!=(W=g.findGuardPattern(p,q[0],_e,v,!1,w,A))&&Math.abs(q[0]-W[0])<g.MAX_PATTERN_DRIFT&&Math.abs(q[1]-W[1])<g.MAX_PATTERN_DRIFT)q=W,be=0;else{if(be>g.SKIPPED_ROW_COUNT_MAX)break;be++}}D[2]=new mn(q[0],_e-=be+1),D[3]=new mn(q[1],_e)}return _e-_<g.BARCODE_MIN_HEIGHT&&la.fill(D,null),D},g.findGuardPattern=function(p,y,v,_,E,w,D){la.fillWithin(D,0,D.length,0);for(var O=y,A=0;p.get(O,v)&&O>0&&A++<g.MAX_PIXEL_DRIFT;)O--;for(var W=O,q=0,_e=w.length,be=E;W<_;W++)if(p.get(W,v)!==be)D[q]++;else{if(q===_e-1){if(g.patternMatchVariance(D,w,g.MAX_INDIVIDUAL_VARIANCE)<g.MAX_AVG_VARIANCE)return new Int32Array([O,W]);O+=D[0]+D[1],Vi.arraycopy(D,2,D,0,q-1),D[q-1]=0,D[q]=0,q--}else q++;D[q]=1,be=!be}return q===_e-1&&g.patternMatchVariance(D,w,g.MAX_INDIVIDUAL_VARIANCE)<g.MAX_AVG_VARIANCE?new Int32Array([O,W-1]):null},g.patternMatchVariance=function(p,y,v){for(var _=p.length,E=0,w=0,D=0;D<_;D++)E+=p[D],w+=y[D];if(E<w)return 1/0;var O=E/w;v*=O;for(var A=0,W=0;W<_;W++){var q=p[W],_e=y[W]*O,be=q>_e?q-_e:_e-q;if(be>v)return 1/0;A+=be}return A/E},g.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),g.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),g.MAX_AVG_VARIANCE=.42,g.MAX_INDIVIDUAL_VARIANCE=.8,g.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),g.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),g.MAX_PIXEL_DRIFT=3,g.MAX_PATTERN_DRIFT=5,g.SKIPPED_ROW_COUNT_MAX=25,g.ROW_STEP=5,g.BARCODE_MIN_HEIGHT=10,g}();const LG=RG;var FG=function(){function g(p,y){if(0===y.length)throw new un;this.field=p;var v=y.length;if(v>1&&0===y[0]){for(var _=1;_<v&&0===y[_];)_++;_===v?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(v-_),Vi.arraycopy(y,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=y}return g.prototype.getCoefficients=function(){return this.coefficients},g.prototype.getDegree=function(){return this.coefficients.length-1},g.prototype.isZero=function(){return 0===this.coefficients[0]},g.prototype.getCoefficient=function(p){return this.coefficients[this.coefficients.length-1-p]},g.prototype.evaluateAt=function(p){var y,v;if(0===p)return this.getCoefficient(0);if(1===p){var _=0;try{for(var E=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),w=E.next();!w.done;w=E.next())_=this.field.add(_,w.value)}catch(q){y={error:q}}finally{try{w&&!w.done&&(v=E.return)&&v.call(E)}finally{if(y)throw y.error}}return _}for(var O=this.coefficients[0],A=this.coefficients.length,W=1;W<A;W++)O=this.field.add(this.field.multiply(p,O),this.coefficients[W]);return O},g.prototype.add=function(p){if(!this.field.equals(p.field))throw new un("ModulusPolys do not have same ModulusGF field");if(this.isZero())return p;if(p.isZero())return this;var y=this.coefficients,v=p.coefficients;if(y.length>v.length){var _=y;y=v,v=_}var E=new Int32Array(v.length),w=v.length-y.length;Vi.arraycopy(v,0,E,0,w);for(var D=w;D<v.length;D++)E[D]=this.field.add(y[D-w],v[D]);return new g(this.field,E)},g.prototype.subtract=function(p){if(!this.field.equals(p.field))throw new un("ModulusPolys do not have same ModulusGF field");return p.isZero()?this:this.add(p.negative())},g.prototype.multiply=function(p){return p instanceof g?this.multiplyOther(p):this.multiplyScalar(p)},g.prototype.multiplyOther=function(p){if(!this.field.equals(p.field))throw new un("ModulusPolys do not have same ModulusGF field");if(this.isZero()||p.isZero())return new g(this.field,new Int32Array([0]));for(var y=this.coefficients,v=y.length,_=p.coefficients,E=_.length,w=new Int32Array(v+E-1),D=0;D<v;D++)for(var O=y[D],A=0;A<E;A++)w[D+A]=this.field.add(w[D+A],this.field.multiply(O,_[A]));return new g(this.field,w)},g.prototype.negative=function(){for(var p=this.coefficients.length,y=new Int32Array(p),v=0;v<p;v++)y[v]=this.field.subtract(0,this.coefficients[v]);return new g(this.field,y)},g.prototype.multiplyScalar=function(p){if(0===p)return new g(this.field,new Int32Array([0]));if(1===p)return this;for(var y=this.coefficients.length,v=new Int32Array(y),_=0;_<y;_++)v[_]=this.field.multiply(this.coefficients[_],p);return new g(this.field,v)},g.prototype.multiplyByMonomial=function(p,y){if(p<0)throw new un;if(0===y)return new g(this.field,new Int32Array([0]));for(var v=this.coefficients.length,_=new Int32Array(v+p),E=0;E<v;E++)_[E]=this.field.multiply(this.coefficients[E],y);return new g(this.field,_)},g.prototype.toString=function(){for(var p=new Ai,y=this.getDegree();y>=0;y--){var v=this.getCoefficient(y);0!==v&&(v<0?(p.append(" - "),v=-v):p.length()>0&&p.append(" + "),(0===y||1!==v)&&p.append(v),0!==y&&(1===y?p.append("x"):(p.append("x^"),p.append(y))))}return p.toString()},g}();const Sd=FG;var jG=function(){function g(){}return g.prototype.add=function(p,y){return(p+y)%this.modulus},g.prototype.subtract=function(p,y){return(this.modulus+p-y)%this.modulus},g.prototype.exp=function(p){return this.expTable[p]},g.prototype.log=function(p){if(0===p)throw new un;return this.logTable[p]},g.prototype.inverse=function(p){if(0===p)throw new aP;return this.expTable[this.modulus-this.logTable[p]-1]},g.prototype.multiply=function(p,y){return 0===p||0===y?0:this.expTable[(this.logTable[p]+this.logTable[y])%(this.modulus-1)]},g.prototype.getSize=function(){return this.modulus},g.prototype.equals=function(p){return p===this},g}();const BG=jG;var UG=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),VG=function(g){function p(y,v){var _=g.call(this)||this;_.modulus=y,_.expTable=new Int32Array(y),_.logTable=new Int32Array(y);for(var E=1,w=0;w<y;w++)_.expTable[w]=E,E=E*v%y;for(w=0;w<y-1;w++)_.logTable[_.expTable[w]]=w;return _.zero=new Sd(_,new Int32Array([0])),_.one=new Sd(_,new Int32Array([1])),_}return UG(p,g),p.prototype.getZero=function(){return this.zero},p.prototype.getOne=function(){return this.one},p.prototype.buildMonomial=function(y,v){if(y<0)throw new un;if(0===v)return this.zero;var _=new Int32Array(y+1);return _[0]=v,new Sd(this,_)},p.PDF417_GF=new p(vi.NUMBER_OF_CODEWORDS,3),p}(BG);const kG=VG;var ZG=function(){function g(){this.field=kG.PDF417_GF}return g.prototype.decode=function(p,y,v){for(var _,E,w=new Sd(this.field,p),D=new Int32Array(y),O=!1,A=y;A>0;A--){var W=w.evaluateAt(this.field.exp(A));D[y-A]=W,0!==W&&(O=!0)}if(!O)return 0;var q=this.field.getOne();if(null!=v)try{for(var _e=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(v),be=_e.next();!be.done;be=_e.next()){var qe=this.field.exp(p.length-1-be.value),dt=new Sd(this.field,new Int32Array([this.field.subtract(0,qe),1]));q=q.multiply(dt)}}catch(Ur){_={error:Ur}}finally{try{be&&!be.done&&(E=_e.return)&&E.call(_e)}finally{if(_)throw _.error}}var gt=new Sd(this.field,D),lt=this.runEuclideanAlgorithm(this.field.buildMonomial(y,1),gt,y),Tt=lt[0],Rt=lt[1],Xt=this.findErrorLocations(Tt),ur=this.findErrorMagnitudes(Rt,Tt,Xt);for(A=0;A<Xt.length;A++){var _r=p.length-1-this.field.log(Xt[A]);if(_r<0)throw $o.getChecksumInstance();p[_r]=this.field.subtract(p[_r],ur[A])}return Xt.length},g.prototype.runEuclideanAlgorithm=function(p,y,v){if(p.getDegree()<y.getDegree()){var _=p;p=y,y=_}for(var E=p,w=y,D=this.field.getZero(),O=this.field.getOne();w.getDegree()>=Math.round(v/2);){var A=E,W=D;if(D=O,(E=w).isZero())throw $o.getChecksumInstance();w=A;for(var q=this.field.getZero(),_e=E.getCoefficient(E.getDegree()),be=this.field.inverse(_e);w.getDegree()>=E.getDegree()&&!w.isZero();){var We=w.getDegree()-E.getDegree(),qe=this.field.multiply(w.getCoefficient(w.getDegree()),be);q=q.add(this.field.buildMonomial(We,qe)),w=w.subtract(E.multiplyByMonomial(We,qe))}O=q.multiply(D).subtract(W).negative()}var dt=O.getCoefficient(0);if(0===dt)throw $o.getChecksumInstance();var gt=this.field.inverse(dt);return[O.multiply(gt),w.multiply(gt)]},g.prototype.findErrorLocations=function(p){for(var y=p.getDegree(),v=new Int32Array(y),_=0,E=1;E<this.field.getSize()&&_<y;E++)0===p.evaluateAt(E)&&(v[_]=this.field.inverse(E),_++);if(_!==y)throw $o.getChecksumInstance();return v},g.prototype.findErrorMagnitudes=function(p,y,v){for(var _=y.getDegree(),E=new Int32Array(_),w=1;w<=_;w++)E[_-w]=this.field.multiply(w,y.getCoefficient(w));var D=new Sd(this.field,E),O=v.length,A=new Int32Array(O);for(w=0;w<O;w++){var W=this.field.inverse(v[w]),q=this.field.subtract(0,p.evaluateAt(W)),_e=this.field.inverse(D.evaluateAt(W));A[w]=this.field.multiply(q,_e)}return A},g}();const $G=ZG;var KG=function(){function g(p,y,v,_,E){p instanceof g?this.constructor_2(p):this.constructor_1(p,y,v,_,E)}return g.prototype.constructor_1=function(p,y,v,_,E){var w=null==y||null==v,D=null==_||null==E;if(w&&D)throw new Cr;w?(y=new mn(0,_.getY()),v=new mn(0,E.getY())):D&&(_=new mn(p.getWidth()-1,y.getY()),E=new mn(p.getWidth()-1,v.getY())),this.image=p,this.topLeft=y,this.bottomLeft=v,this.topRight=_,this.bottomRight=E,this.minX=Math.trunc(Math.min(y.getX(),v.getX())),this.maxX=Math.trunc(Math.max(_.getX(),E.getX())),this.minY=Math.trunc(Math.min(y.getY(),_.getY())),this.maxY=Math.trunc(Math.max(v.getY(),E.getY()))},g.prototype.constructor_2=function(p){this.image=p.image,this.topLeft=p.getTopLeft(),this.bottomLeft=p.getBottomLeft(),this.topRight=p.getTopRight(),this.bottomRight=p.getBottomRight(),this.minX=p.getMinX(),this.maxX=p.getMaxX(),this.minY=p.getMinY(),this.maxY=p.getMaxY()},g.merge=function(p,y){return null==p?y:null==y?p:new g(p.image,p.topLeft,p.bottomLeft,y.topRight,y.bottomRight)},g.prototype.addMissingRows=function(p,y,v){var _=this.topLeft,E=this.bottomLeft,w=this.topRight,D=this.bottomRight;if(p>0){var O=v?this.topLeft:this.topRight,A=Math.trunc(O.getY()-p);A<0&&(A=0);var W=new mn(O.getX(),A);v?_=W:w=W}if(y>0){var q=v?this.bottomLeft:this.bottomRight,_e=Math.trunc(q.getY()+y);_e>=this.image.getHeight()&&(_e=this.image.getHeight()-1);var be=new mn(q.getX(),_e);v?E=be:D=be}return new g(this.image,_,E,w,D)},g.prototype.getMinX=function(){return this.minX},g.prototype.getMaxX=function(){return this.maxX},g.prototype.getMinY=function(){return this.minY},g.prototype.getMaxY=function(){return this.maxY},g.prototype.getTopLeft=function(){return this.topLeft},g.prototype.getTopRight=function(){return this.topRight},g.prototype.getBottomLeft=function(){return this.bottomLeft},g.prototype.getBottomRight=function(){return this.bottomRight},g}();const uC=KG;var zG=function(){function g(p,y,v,_){this.columnCount=p,this.errorCorrectionLevel=_,this.rowCountUpperPart=y,this.rowCountLowerPart=v,this.rowCount=y+v}return g.prototype.getColumnCount=function(){return this.columnCount},g.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},g.prototype.getRowCount=function(){return this.rowCount},g.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},g.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},g}();const GG=zG;var HG=function(){function g(){this.buffer=""}return g.form=function(p,y){var v=-1;return p.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function _(w,D,O,A,W,q){if("%%"===w)return"%";if(void 0!==y[++v]){w=A?parseInt(A.substr(1)):void 0;var be,_e=W?parseInt(W.substr(1)):void 0;switch(q){case"s":be=y[v];break;case"c":be=y[v][0];break;case"f":be=parseFloat(y[v]).toFixed(w);break;case"p":be=parseFloat(y[v]).toPrecision(w);break;case"e":be=parseFloat(y[v]).toExponential(w);break;case"x":be=parseInt(y[v]).toString(_e||16);break;case"d":be=parseFloat(parseInt(y[v],_e||10).toPrecision(w)).toFixed(0)}be="object"==typeof be?JSON.stringify(be):(+be).toString(_e);for(var We=parseInt(O),qe=O&&O[0]+""=="0"?"0":" ";be.length<We;)be=void 0!==D?be+qe:qe+be;return be}})},g.prototype.format=function(p){for(var y=[],v=1;v<arguments.length;v++)y[v-1]=arguments[v];this.buffer+=g.form(p,y)},g.prototype.toString=function(){return this.buffer},g}();const cC=HG;var JG=function(){function g(p){this.boundingBox=new uC(p),this.codewords=new Array(p.getMaxY()-p.getMinY()+1)}return g.prototype.getCodewordNearby=function(p){var y=this.getCodeword(p);if(null!=y)return y;for(var v=1;v<g.MAX_NEARBY_DISTANCE;v++){var _=this.imageRowToCodewordIndex(p)-v;if(_>=0&&null!=(y=this.codewords[_])||(_=this.imageRowToCodewordIndex(p)+v)<this.codewords.length&&null!=(y=this.codewords[_]))return y}return null},g.prototype.imageRowToCodewordIndex=function(p){return p-this.boundingBox.getMinY()},g.prototype.setCodeword=function(p,y){this.codewords[this.imageRowToCodewordIndex(p)]=y},g.prototype.getCodeword=function(p){return this.codewords[this.imageRowToCodewordIndex(p)]},g.prototype.getBoundingBox=function(){return this.boundingBox},g.prototype.getCodewords=function(){return this.codewords},g.prototype.toString=function(){var p,y,v=new cC,_=0;try{for(var E=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),w=E.next();!w.done;w=E.next()){var D=w.value;null!=D?v.format("%3d: %3d|%3d%n",_++,D.getRowNumber(),D.getValue()):v.format("%3d:    |   %n",_++)}}catch(O){p={error:O}}finally{try{w&&!w.done&&(y=E.return)&&y.call(E)}finally{if(p)throw p.error}}return v.toString()},g.MAX_NEARBY_DISTANCE=5,g}();const RP=JG;var QG=function(g,p){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var _,w,v=y.call(g),E=[];try{for(;(void 0===p||p-- >0)&&!(_=v.next()).done;)E.push(_.value)}catch(D){w={error:D}}finally{try{_&&!_.done&&(y=v.return)&&y.call(v)}finally{if(w)throw w.error}}return E},qG=function(){function g(){this.values=new Map}return g.prototype.setValue=function(p){p=Math.trunc(p);var y=this.values.get(p);null==y&&(y=0),y++,this.values.set(p,y)},g.prototype.getValue=function(){var p,y,v=-1,_=new Array,E=function(q,_e){var be_getKey=function(){return q},be_getValue=function(){return _e};be_getValue()>v?(v=be_getValue(),(_=[]).push(be_getKey())):be_getValue()===v&&_.push(be_getKey())};try{for(var w=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),D=w.next();!D.done;D=w.next()){var O=QG(D.value,2);E(O[0],O[1])}}catch(q){p={error:q}}finally{try{D&&!D.done&&(y=w.return)&&y.call(w)}finally{if(p)throw p.error}}return vi.toIntArray(_)},g.prototype.getConfidence=function(p){return this.values.get(p)},g}();const l0=qG;var eH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),dC=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},tH=function(g){function p(y,v){var _=g.call(this,y)||this;return _._isLeft=v,_}return eH(p,g),p.prototype.setRowNumbers=function(){var y,v;try{for(var _=dC(this.getCodewords()),E=_.next();!E.done;E=_.next()){var w=E.value;null!=w&&w.setRowNumberAsRowIndicatorColumn()}}catch(D){y={error:D}}finally{try{E&&!E.done&&(v=_.return)&&v.call(_)}finally{if(y)throw y.error}}},p.prototype.adjustCompleteIndicatorColumnRowNumbers=function(y){var v=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(v,y);for(var _=this.getBoundingBox(),E=this._isLeft?_.getTopLeft():_.getTopRight(),w=this._isLeft?_.getBottomLeft():_.getBottomRight(),D=this.imageRowToCodewordIndex(Math.trunc(E.getY())),O=this.imageRowToCodewordIndex(Math.trunc(w.getY())),A=-1,W=1,q=0,_e=D;_e<O;_e++)if(null!=v[_e]){var be=v[_e],We=be.getRowNumber()-A;if(0===We)q++;else if(1===We)W=Math.max(W,q),q=1,A=be.getRowNumber();else if(We<0||be.getRowNumber()>=y.getRowCount()||We>_e)v[_e]=null;else{for(var qe,dt=(qe=W>2?(W-2)*We:We)>=_e,gt=1;gt<=qe&&!dt;gt++)dt=null!=v[_e-gt];dt?v[_e]=null:(A=be.getRowNumber(),q=1)}}},p.prototype.getRowHeights=function(){var y,v,_=this.getBarcodeMetadata();if(null==_)return null;this.adjustIncompleteIndicatorColumnRowNumbers(_);var E=new Int32Array(_.getRowCount());try{for(var w=dC(this.getCodewords()),D=w.next();!D.done;D=w.next()){var O=D.value;if(null!=O){var A=O.getRowNumber();if(A>=E.length)continue;E[A]++}}}catch(W){y={error:W}}finally{try{D&&!D.done&&(v=w.return)&&v.call(w)}finally{if(y)throw y.error}}return E},p.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(y){for(var v=this.getBoundingBox(),_=this._isLeft?v.getTopLeft():v.getTopRight(),E=this._isLeft?v.getBottomLeft():v.getBottomRight(),w=this.imageRowToCodewordIndex(Math.trunc(_.getY())),D=this.imageRowToCodewordIndex(Math.trunc(E.getY())),O=this.getCodewords(),A=-1,W=1,q=0,_e=w;_e<D;_e++)if(null!=O[_e]){var be=O[_e];be.setRowNumberAsRowIndicatorColumn();var We=be.getRowNumber()-A;0===We?q++:1===We?(W=Math.max(W,q),q=1,A=be.getRowNumber()):be.getRowNumber()>=y.getRowCount()?O[_e]=null:(A=be.getRowNumber(),q=1)}},p.prototype.getBarcodeMetadata=function(){var y,v,_=this.getCodewords(),E=new l0,w=new l0,D=new l0,O=new l0;try{for(var A=dC(_),W=A.next();!W.done;W=A.next()){var q=W.value;if(null!=q){q.setRowNumberAsRowIndicatorColumn();var _e=q.getValue()%30,be=q.getRowNumber();switch(this._isLeft||(be+=2),be%3){case 0:w.setValue(3*_e+1);break;case 1:O.setValue(_e/3),D.setValue(_e%3);break;case 2:E.setValue(_e+1)}}}}catch(qe){y={error:qe}}finally{try{W&&!W.done&&(v=A.return)&&v.call(A)}finally{if(y)throw y.error}}if(0===E.getValue().length||0===w.getValue().length||0===D.getValue().length||0===O.getValue().length||E.getValue()[0]<1||w.getValue()[0]+D.getValue()[0]<vi.MIN_ROWS_IN_BARCODE||w.getValue()[0]+D.getValue()[0]>vi.MAX_ROWS_IN_BARCODE)return null;var We=new GG(E.getValue()[0],w.getValue()[0],D.getValue()[0],O.getValue()[0]);return this.removeIncorrectCodewords(_,We),We},p.prototype.removeIncorrectCodewords=function(y,v){for(var _=0;_<y.length;_++){var E=y[_];if(null!=y[_]){var w=E.getValue()%30,D=E.getRowNumber();if(D>v.getRowCount()){y[_]=null;continue}switch(this._isLeft||(D+=2),D%3){case 0:3*w+1!==v.getRowCountUpperPart()&&(y[_]=null);break;case 1:(Math.trunc(w/3)!==v.getErrorCorrectionLevel()||w%3!==v.getRowCountLowerPart())&&(y[_]=null);break;case 2:w+1!==v.getColumnCount()&&(y[_]=null)}}}},p.prototype.isLeft=function(){return this._isLeft},p.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+g.prototype.toString.call(this)},p}(RP);const LP=tH;var nH=function(){function g(p,y){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=p,this.barcodeColumnCount=p.getColumnCount(),this.boundingBox=y,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return g.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var y,p=vi.MAX_CODEWORDS_IN_BARCODE;do{y=p,p=this.adjustRowNumbersAndGetCount()}while(p>0&&p<y);return this.detectionResultColumns},g.prototype.adjustIndicatorColumnRowNumbers=function(p){null!=p&&p.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},g.prototype.adjustRowNumbersAndGetCount=function(){var p=this.adjustRowNumbersByRow();if(0===p)return 0;for(var y=1;y<this.barcodeColumnCount+1;y++)for(var v=this.detectionResultColumns[y].getCodewords(),_=0;_<v.length;_++)null!=v[_]&&(v[_].hasValidRowNumber()||this.adjustRowNumbers(y,_,v));return p},g.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},g.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var p=this.detectionResultColumns[0].getCodewords(),y=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),v=0;v<p.length;v++)if(null!=p[v]&&null!=y[v]&&p[v].getRowNumber()===y[v].getRowNumber())for(var _=1;_<=this.barcodeColumnCount;_++){var E=this.detectionResultColumns[_].getCodewords()[v];null!=E&&(E.setRowNumber(p[v].getRowNumber()),E.hasValidRowNumber()||(this.detectionResultColumns[_].getCodewords()[v]=null))}},g.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var p=0,y=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),v=0;v<y.length;v++)if(null!=y[v])for(var _=y[v].getRowNumber(),E=0,w=this.barcodeColumnCount+1;w>0&&E<this.ADJUST_ROW_NUMBER_SKIP;w--){var D=this.detectionResultColumns[w].getCodewords()[v];null!=D&&(E=g.adjustRowNumberIfValid(_,E,D),D.hasValidRowNumber()||p++)}return p},g.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var p=0,y=this.detectionResultColumns[0].getCodewords(),v=0;v<y.length;v++)if(null!=y[v])for(var _=y[v].getRowNumber(),E=0,w=1;w<this.barcodeColumnCount+1&&E<this.ADJUST_ROW_NUMBER_SKIP;w++){var D=this.detectionResultColumns[w].getCodewords()[v];null!=D&&(E=g.adjustRowNumberIfValid(_,E,D),D.hasValidRowNumber()||p++)}return p},g.adjustRowNumberIfValid=function(p,y,v){return null==v||v.hasValidRowNumber()||(v.isValidRowNumber(p)?(v.setRowNumber(p),y=0):++y),y},g.prototype.adjustRowNumbers=function(p,y,v){var _,E;if(null!=this.detectionResultColumns[p-1]){var w=v[y],D=this.detectionResultColumns[p-1].getCodewords(),O=D;null!=this.detectionResultColumns[p+1]&&(O=this.detectionResultColumns[p+1].getCodewords());var A=new Array(14);A[2]=D[y],A[3]=O[y],y>0&&(A[0]=v[y-1],A[4]=D[y-1],A[5]=O[y-1]),y>1&&(A[8]=v[y-2],A[10]=D[y-2],A[11]=O[y-2]),y<v.length-1&&(A[1]=v[y+1],A[6]=D[y+1],A[7]=O[y+1]),y<v.length-2&&(A[9]=v[y+2],A[12]=D[y+2],A[13]=O[y+2]);try{for(var W=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(A),q=W.next();!q.done;q=W.next())if(g.adjustRowNumber(w,q.value))return}catch(be){_={error:be}}finally{try{q&&!q.done&&(E=W.return)&&E.call(W)}finally{if(_)throw _.error}}}},g.adjustRowNumber=function(p,y){return!(null==y||!y.hasValidRowNumber()||y.getBucket()!==p.getBucket()||(p.setRowNumber(y.getRowNumber()),0))},g.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},g.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},g.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},g.prototype.setBoundingBox=function(p){this.boundingBox=p},g.prototype.getBoundingBox=function(){return this.boundingBox},g.prototype.setDetectionResultColumn=function(p,y){this.detectionResultColumns[p]=y},g.prototype.getDetectionResultColumn=function(p){return this.detectionResultColumns[p]},g.prototype.toString=function(){var p=this.detectionResultColumns[0];null==p&&(p=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var y=new cC,v=0;v<p.getCodewords().length;v++){y.format("CW %3d:",v);for(var _=0;_<this.barcodeColumnCount+2;_++)if(null!=this.detectionResultColumns[_]){var E=this.detectionResultColumns[_].getCodewords()[v];null!=E?y.format(" %3d|%3d",E.getRowNumber(),E.getValue()):y.format("    |   ")}else y.format("    |   ");y.format("%n")}return y.toString()},g}();const iH=nH;var oH=function(){function g(p,y,v,_){this.rowNumber=g.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(p),this.endX=Math.trunc(y),this.bucket=Math.trunc(v),this.value=Math.trunc(_)}return g.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},g.prototype.isValidRowNumber=function(p){return p!==g.BARCODE_ROW_UNKNOWN&&this.bucket===p%3*3},g.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},g.prototype.getWidth=function(){return this.endX-this.startX},g.prototype.getStartX=function(){return this.startX},g.prototype.getEndX=function(){return this.endX},g.prototype.getBucket=function(){return this.bucket},g.prototype.getValue=function(){return this.value},g.prototype.getRowNumber=function(){return this.rowNumber},g.prototype.setRowNumber=function(p){this.rowNumber=p},g.prototype.toString=function(){return this.rowNumber+"|"+this.value},g.BARCODE_ROW_UNKNOWN=-1,g}();const sH=oH;var aH=function(){function g(){}return g.initialize=function(){for(var p=0;p<vi.SYMBOL_TABLE.length;p++)for(var y=vi.SYMBOL_TABLE[p],v=1&y,_=0;_<vi.BARS_IN_MODULE;_++){for(var E=0;(1&y)===v;)E+=1,y>>=1;v=1&y,g.RATIOS_TABLE[p]||(g.RATIOS_TABLE[p]=new Array(vi.BARS_IN_MODULE)),g.RATIOS_TABLE[p][vi.BARS_IN_MODULE-_-1]=Math.fround(E/vi.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},g.getDecodedValue=function(p){var y=g.getDecodedCodewordValue(g.sampleBitCounts(p));return-1!==y?y:g.getClosestDecodedValue(p)},g.sampleBitCounts=function(p){for(var y=Ei.sum(p),v=new Int32Array(vi.BARS_IN_MODULE),_=0,E=0,w=0;w<vi.MODULES_IN_CODEWORD;w++)E+p[_]<=y/(2*vi.MODULES_IN_CODEWORD)+w*y/vi.MODULES_IN_CODEWORD&&(E+=p[_],_++),v[_]++;return v},g.getDecodedCodewordValue=function(p){var y=g.getBitValue(p);return-1===vi.getCodeword(y)?-1:y},g.getBitValue=function(p){for(var y=0,v=0;v<p.length;v++)for(var _=0;_<p[v];_++)y=y<<1|(v%2==0?1:0);return Math.trunc(y)},g.getClosestDecodedValue=function(p){var y=Ei.sum(p),v=new Array(vi.BARS_IN_MODULE);if(y>1)for(var _=0;_<v.length;_++)v[_]=Math.fround(p[_]/y);var E=eC.MAX_VALUE,w=-1;this.bSymbolTableReady||g.initialize();for(var D=0;D<g.RATIOS_TABLE.length;D++){for(var O=0,A=g.RATIOS_TABLE[D],W=0;W<vi.BARS_IN_MODULE;W++){var q=Math.fround(A[W]-v[W]);if((O+=Math.fround(q*q))>=E)break}O<E&&(E=O,w=vi.SYMBOL_TABLE[D])}return w},g.bSymbolTableReady=!1,g.RATIOS_TABLE=new Array(vi.SYMBOL_TABLE.length).map(function(p){return new Array(vi.BARS_IN_MODULE)}),g}();const lH=aH;var uH=function(){function g(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return g.prototype.getSegmentIndex=function(){return this.segmentIndex},g.prototype.setSegmentIndex=function(p){this.segmentIndex=p},g.prototype.getFileId=function(){return this.fileId},g.prototype.setFileId=function(p){this.fileId=p},g.prototype.getOptionalData=function(){return this.optionalData},g.prototype.setOptionalData=function(p){this.optionalData=p},g.prototype.isLastSegment=function(){return this.lastSegment},g.prototype.setLastSegment=function(p){this.lastSegment=p},g.prototype.getSegmentCount=function(){return this.segmentCount},g.prototype.setSegmentCount=function(p){this.segmentCount=p},g.prototype.getSender=function(){return this.sender||null},g.prototype.setSender=function(p){this.sender=p},g.prototype.getAddressee=function(){return this.addressee||null},g.prototype.setAddressee=function(p){this.addressee=p},g.prototype.getFileName=function(){return this.fileName},g.prototype.setFileName=function(p){this.fileName=p},g.prototype.getFileSize=function(){return this.fileSize},g.prototype.setFileSize=function(p){this.fileSize=p},g.prototype.getChecksum=function(){return this.checksum},g.prototype.setChecksum=function(p){this.checksum=p},g.prototype.getTimestamp=function(){return this.timestamp},g.prototype.setTimestamp=function(p){this.timestamp=p},g}();const cH=uH;var dH=function(){function g(){}return g.parseLong=function(p,y){return void 0===y&&(y=void 0),parseInt(p,y)},g}();const NP=dH;var hH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),fH=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return hH(p,g),p.kind="NullPointerException",p}(aa);const pH=fH;var mH=function(){function g(){}return g.prototype.writeBytes=function(p){this.writeBytesOffset(p,0,p.length)},g.prototype.writeBytesOffset=function(p,y,v){if(null==p)throw new pH;if(y<0||y>p.length||v<0||y+v>p.length||y+v<0)throw new qb;if(0!==v)for(var _=0;_<v;_++)this.write(p[y+_])},g.prototype.flush=function(){},g.prototype.close=function(){},g}();const gH=mH;var yH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),vH=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return yH(p,g),p}(aa);const _H=vH;var EH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),bH=function(g){function p(y){void 0===y&&(y=32);var v=g.call(this)||this;if(v.count=0,y<0)throw new un("Negative initial size: "+y);return v.buf=new Uint8Array(y),v}return EH(p,g),p.prototype.ensureCapacity=function(y){y-this.buf.length>0&&this.grow(y)},p.prototype.grow=function(y){var _=this.buf.length<<1;if(_-y<0&&(_=y),_<0){if(y<0)throw new _H;_=hi.MAX_VALUE}this.buf=la.copyOfUint8Array(this.buf,_)},p.prototype.write=function(y){this.ensureCapacity(this.count+1),this.buf[this.count]=y,this.count+=1},p.prototype.writeBytesOffset=function(y,v,_){if(v<0||v>y.length||_<0||v+_-y.length>0)throw new qb;this.ensureCapacity(this.count+_),Vi.arraycopy(y,v,this.buf,this.count,_),this.count+=_},p.prototype.writeTo=function(y){y.writeBytesOffset(this.buf,0,this.count)},p.prototype.reset=function(){this.count=0},p.prototype.toByteArray=function(){return la.copyOfUint8Array(this.buf,this.count)},p.prototype.size=function(){return this.count},p.prototype.toString=function(y){return y?"string"==typeof y?this.toString_string(y):this.toString_number(y):this.toString_void()},p.prototype.toString_void=function(){return new String(this.buf).toString()},p.prototype.toString_string=function(y){return new String(this.buf).toString()},p.prototype.toString_number=function(y){return new String(this.buf).toString()},p.prototype.close=function(){},p}(gH);const CH=bH;var Dy,Oi=(()=>(function(g){g[g.ALPHA=0]="ALPHA",g[g.LOWER=1]="LOWER",g[g.MIXED=2]="MIXED",g[g.PUNCT=3]="PUNCT",g[g.ALPHA_SHIFT=4]="ALPHA_SHIFT",g[g.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Oi||(Oi={})),Oi))();function FP(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function Cc(g){if(void 0===Dy&&(Dy=FP()),null===Dy)throw new Error("BigInt is not supported!");return Dy(g)}var MH=function(){function g(){}return g.decode=function(p,y){var v=new Ai(""),_=qo.ISO8859_1;v.enableDecoding(_);for(var E=1,w=p[E++],D=new cH;E<p[0];){switch(w){case g.TEXT_COMPACTION_MODE_LATCH:E=g.textCompaction(p,E,v);break;case g.BYTE_COMPACTION_MODE_LATCH:case g.BYTE_COMPACTION_MODE_LATCH_6:E=g.byteCompaction(w,p,_,E,v);break;case g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(p[E++]);break;case g.NUMERIC_COMPACTION_MODE_LATCH:E=g.numericCompaction(p,E,v);break;case g.ECI_CHARSET:qo.getCharacterSetECIByValue(p[E++]);break;case g.ECI_GENERAL_PURPOSE:E+=2;break;case g.ECI_USER_DEFINED:E++;break;case g.BEGIN_MACRO_PDF417_CONTROL_BLOCK:E=g.decodeMacroBlock(p,E,D);break;case g.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case g.MACRO_PDF417_TERMINATOR:throw new Hr;default:E--,E=g.textCompaction(p,E,v)}if(!(E<p.length))throw Hr.getFormatInstance();w=p[E++]}if(0===v.length())throw Hr.getFormatInstance();var A=new gy(null,v.toString(),null,y);return A.setOther(D),A},g.decodeMacroBlock=function(p,y,v){if(y+g.NUMBER_OF_SEQUENCE_CODEWORDS>p[0])throw Hr.getFormatInstance();for(var _=new Int32Array(g.NUMBER_OF_SEQUENCE_CODEWORDS),E=0;E<g.NUMBER_OF_SEQUENCE_CODEWORDS;E++,y++)_[E]=p[y];v.setSegmentIndex(hi.parseInt(g.decodeBase900toBase10(_,g.NUMBER_OF_SEQUENCE_CODEWORDS)));var w=new Ai;y=g.textCompaction(p,y,w),v.setFileId(w.toString());var D=-1;for(p[y]===g.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(D=y+1);y<p[0];)switch(p[y]){case g.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(p[++y]){case g.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var O=new Ai;y=g.textCompaction(p,y+1,O),v.setFileName(O.toString());break;case g.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var A=new Ai;y=g.textCompaction(p,y+1,A),v.setSender(A.toString());break;case g.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var W=new Ai;y=g.textCompaction(p,y+1,W),v.setAddressee(W.toString());break;case g.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var q=new Ai;y=g.numericCompaction(p,y+1,q),v.setSegmentCount(hi.parseInt(q.toString()));break;case g.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _e=new Ai;y=g.numericCompaction(p,y+1,_e),v.setTimestamp(NP.parseLong(_e.toString()));break;case g.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var be=new Ai;y=g.numericCompaction(p,y+1,be),v.setChecksum(hi.parseInt(be.toString()));break;case g.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var We=new Ai;y=g.numericCompaction(p,y+1,We),v.setFileSize(NP.parseLong(We.toString()));break;default:throw Hr.getFormatInstance()}break;case g.MACRO_PDF417_TERMINATOR:y++,v.setLastSegment(!0);break;default:throw Hr.getFormatInstance()}if(-1!==D){var qe=y-D;v.isLastSegment()&&qe--,v.setOptionalData(la.copyOfRange(p,D,D+qe))}return y},g.textCompaction=function(p,y,v){for(var _=new Int32Array(2*(p[0]-y)),E=new Int32Array(2*(p[0]-y)),w=0,D=!1;y<p[0]&&!D;){var O=p[y++];if(O<g.TEXT_COMPACTION_MODE_LATCH)_[w]=O/30,_[w+1]=O%30,w+=2;else switch(O){case g.TEXT_COMPACTION_MODE_LATCH:_[w++]=g.TEXT_COMPACTION_MODE_LATCH;break;case g.BYTE_COMPACTION_MODE_LATCH:case g.BYTE_COMPACTION_MODE_LATCH_6:case g.NUMERIC_COMPACTION_MODE_LATCH:case g.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case g.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case g.MACRO_PDF417_TERMINATOR:y--,D=!0;break;case g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_[w]=g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,O=p[y++],E[w]=O,w++}}return g.decodeTextCompaction(_,E,w,v),y},g.decodeTextCompaction=function(p,y,v,_){for(var E=Oi.ALPHA,w=Oi.ALPHA,D=0;D<v;){var O=p[D],A="";switch(E){case Oi.ALPHA:if(O<26)A=String.fromCharCode(65+O);else switch(O){case 26:A=" ";break;case g.LL:E=Oi.LOWER;break;case g.ML:E=Oi.MIXED;break;case g.PS:w=E,E=Oi.PUNCT_SHIFT;break;case g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(y[D]);break;case g.TEXT_COMPACTION_MODE_LATCH:E=Oi.ALPHA}break;case Oi.LOWER:if(O<26)A=String.fromCharCode(97+O);else switch(O){case 26:A=" ";break;case g.AS:w=E,E=Oi.ALPHA_SHIFT;break;case g.ML:E=Oi.MIXED;break;case g.PS:w=E,E=Oi.PUNCT_SHIFT;break;case g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(y[D]);break;case g.TEXT_COMPACTION_MODE_LATCH:E=Oi.ALPHA}break;case Oi.MIXED:if(O<g.PL)A=g.MIXED_CHARS[O];else switch(O){case g.PL:E=Oi.PUNCT;break;case 26:A=" ";break;case g.LL:E=Oi.LOWER;break;case g.AL:E=Oi.ALPHA;break;case g.PS:w=E,E=Oi.PUNCT_SHIFT;break;case g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(y[D]);break;case g.TEXT_COMPACTION_MODE_LATCH:E=Oi.ALPHA}break;case Oi.PUNCT:if(O<g.PAL)A=g.PUNCT_CHARS[O];else switch(O){case g.PAL:E=Oi.ALPHA;break;case g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(y[D]);break;case g.TEXT_COMPACTION_MODE_LATCH:E=Oi.ALPHA}break;case Oi.ALPHA_SHIFT:if(E=w,O<26)A=String.fromCharCode(65+O);else switch(O){case 26:A=" ";break;case g.TEXT_COMPACTION_MODE_LATCH:E=Oi.ALPHA}break;case Oi.PUNCT_SHIFT:if(E=w,O<g.PAL)A=g.PUNCT_CHARS[O];else switch(O){case g.PAL:E=Oi.ALPHA;break;case g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(y[D]);break;case g.TEXT_COMPACTION_MODE_LATCH:E=Oi.ALPHA}}""!==A&&_.append(A),D++}},g.byteCompaction=function(p,y,v,_,E){var w=new CH,D=0,O=0,A=!1;switch(p){case g.BYTE_COMPACTION_MODE_LATCH:for(var W=new Int32Array(6),q=y[_++];_<y[0]&&!A;)switch(W[D++]=q,O=900*O+q,q=y[_++],q){case g.TEXT_COMPACTION_MODE_LATCH:case g.BYTE_COMPACTION_MODE_LATCH:case g.NUMERIC_COMPACTION_MODE_LATCH:case g.BYTE_COMPACTION_MODE_LATCH_6:case g.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case g.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case g.MACRO_PDF417_TERMINATOR:_--,A=!0;break;default:if(D%5==0&&D>0){for(var _e=0;_e<6;++_e)w.write(Number(Cc(O)>>Cc(8*(5-_e))));O=0,D=0}}_===y[0]&&q<g.TEXT_COMPACTION_MODE_LATCH&&(W[D++]=q);for(var be=0;be<D;be++)w.write(W[be]);break;case g.BYTE_COMPACTION_MODE_LATCH_6:for(;_<y[0]&&!A;){var We=y[_++];if(We<g.TEXT_COMPACTION_MODE_LATCH)D++,O=900*O+We;else switch(We){case g.TEXT_COMPACTION_MODE_LATCH:case g.BYTE_COMPACTION_MODE_LATCH:case g.NUMERIC_COMPACTION_MODE_LATCH:case g.BYTE_COMPACTION_MODE_LATCH_6:case g.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case g.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case g.MACRO_PDF417_TERMINATOR:_--,A=!0}if(D%5==0&&D>0){for(_e=0;_e<6;++_e)w.write(Number(Cc(O)>>Cc(8*(5-_e))));O=0,D=0}}}return E.append(eu.decode(w.toByteArray(),v)),_},g.numericCompaction=function(p,y,v){for(var _=0,E=!1,w=new Int32Array(g.MAX_NUMERIC_CODEWORDS);y<p[0]&&!E;){var D=p[y++];if(y===p[0]&&(E=!0),D<g.TEXT_COMPACTION_MODE_LATCH)w[_]=D,_++;else switch(D){case g.TEXT_COMPACTION_MODE_LATCH:case g.BYTE_COMPACTION_MODE_LATCH:case g.BYTE_COMPACTION_MODE_LATCH_6:case g.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case g.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case g.MACRO_PDF417_TERMINATOR:y--,E=!0}(_%g.MAX_NUMERIC_CODEWORDS==0||D===g.NUMERIC_COMPACTION_MODE_LATCH||E)&&_>0&&(v.append(g.decodeBase900toBase10(w,_)),_=0)}return y},g.decodeBase900toBase10=function(p,y){for(var v=Cc(0),_=0;_<y;_++)v+=g.EXP900[y-_-1]*Cc(p[_]);var E=v.toString();if("1"!==E.charAt(0))throw new Hr;return E.substring(1)},g.TEXT_COMPACTION_MODE_LATCH=900,g.BYTE_COMPACTION_MODE_LATCH=901,g.NUMERIC_COMPACTION_MODE_LATCH=902,g.BYTE_COMPACTION_MODE_LATCH_6=924,g.ECI_USER_DEFINED=925,g.ECI_GENERAL_PURPOSE=926,g.ECI_CHARSET=927,g.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,g.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,g.MACRO_PDF417_TERMINATOR=922,g.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,g.MAX_NUMERIC_CODEWORDS=15,g.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,g.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,g.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,g.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,g.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,g.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,g.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,g.PL=25,g.LL=27,g.AS=27,g.ML=28,g.AL=28,g.PS=29,g.PAL=29,g.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",g.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",g.EXP900=FP()?function wH(){var g=[];g[0]=Cc(1);var p=Cc(900);g[1]=p;for(var y=2;y<16;y++)g[y]=g[y-1]*p;return g}():[],g.NUMBER_OF_SEQUENCE_CODEWORDS=2,g}();const xH=MH;var u0=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},DH=function(){function g(){}return g.decode=function(p,y,v,_,E,w,D){for(var q,O=new uC(p,y,v,_,E),A=null,W=null,_e=!0;;_e=!1){if(null!=y&&(A=g.getRowIndicatorColumn(p,O,y,!0,w,D)),null!=_&&(W=g.getRowIndicatorColumn(p,O,_,!1,w,D)),null==(q=g.merge(A,W)))throw Cr.getNotFoundInstance();var be=q.getBoundingBox();if(!_e||null==be||!(be.getMinY()<O.getMinY()||be.getMaxY()>O.getMaxY()))break;O=be}q.setBoundingBox(O);var We=q.getBarcodeColumnCount()+1;q.setDetectionResultColumn(0,A),q.setDetectionResultColumn(We,W);for(var qe=null!=A,dt=1;dt<=We;dt++){var gt=qe?dt:We-dt;if(void 0===q.getDetectionResultColumn(gt)){var lt=void 0;lt=0===gt||gt===We?new LP(O,0===gt):new RP(O),q.setDetectionResultColumn(gt,lt);for(var Tt=-1,Rt=Tt,Xt=O.getMinY();Xt<=O.getMaxY();Xt++){if((Tt=g.getStartColumn(q,gt,Xt,qe))<0||Tt>O.getMaxX()){if(-1===Rt)continue;Tt=Rt}var ur=g.detectCodeword(p,O.getMinX(),O.getMaxX(),qe,Tt,Xt,w,D);null!=ur&&(lt.setCodeword(Xt,ur),Rt=Tt,w=Math.min(w,ur.getWidth()),D=Math.max(D,ur.getWidth()))}}}return g.createDecoderResult(q)},g.merge=function(p,y){if(null==p&&null==y)return null;var v=g.getBarcodeMetadata(p,y);if(null==v)return null;var _=uC.merge(g.adjustBoundingBox(p),g.adjustBoundingBox(y));return new iH(v,_)},g.adjustBoundingBox=function(p){var y,v;if(null==p)return null;var _=p.getRowHeights();if(null==_)return null;var E=g.getMax(_),w=0;try{for(var D=u0(_),O=D.next();!O.done;O=D.next()){var A=O.value;if(w+=E-A,A>0)break}}catch(be){y={error:be}}finally{try{O&&!O.done&&(v=D.return)&&v.call(D)}finally{if(y)throw y.error}}for(var W=p.getCodewords(),q=0;w>0&&null==W[q];q++)w--;var _e=0;for(q=_.length-1;q>=0&&(_e+=E-_[q],!(_[q]>0));q--);for(q=W.length-1;_e>0&&null==W[q];q--)_e--;return p.getBoundingBox().addMissingRows(w,_e,p.isLeft())},g.getMax=function(p){var y,v,_=-1;try{for(var E=u0(p),w=E.next();!w.done;w=E.next())_=Math.max(_,w.value)}catch(O){y={error:O}}finally{try{w&&!w.done&&(v=E.return)&&v.call(E)}finally{if(y)throw y.error}}return _},g.getBarcodeMetadata=function(p,y){var v,_;return null==p||null==(v=p.getBarcodeMetadata())?null==y?null:y.getBarcodeMetadata():null==y||null==(_=y.getBarcodeMetadata())?v:v.getColumnCount()!==_.getColumnCount()&&v.getErrorCorrectionLevel()!==_.getErrorCorrectionLevel()&&v.getRowCount()!==_.getRowCount()?null:v},g.getRowIndicatorColumn=function(p,y,v,_,E,w){for(var D=new LP(y,_),O=0;O<2;O++)for(var A=0===O?1:-1,W=Math.trunc(Math.trunc(v.getX())),q=Math.trunc(Math.trunc(v.getY()));q<=y.getMaxY()&&q>=y.getMinY();q+=A){var _e=g.detectCodeword(p,0,p.getWidth(),_,W,q,E,w);null!=_e&&(D.setCodeword(q,_e),W=_?_e.getStartX():_e.getEndX())}return D},g.adjustCodewordCount=function(p,y){var v=y[0][1],_=v.getValue(),E=p.getBarcodeColumnCount()*p.getBarcodeRowCount()-g.getNumberOfECCodeWords(p.getBarcodeECLevel());if(0===_.length){if(E<1||E>vi.MAX_CODEWORDS_IN_BARCODE)throw Cr.getNotFoundInstance();v.setValue(E)}else _[0]!==E&&v.setValue(E)},g.createDecoderResult=function(p){var y=g.createBarcodeMatrix(p);g.adjustCodewordCount(p,y);for(var v=new Array,_=new Int32Array(p.getBarcodeRowCount()*p.getBarcodeColumnCount()),E=[],w=new Array,D=0;D<p.getBarcodeRowCount();D++)for(var O=0;O<p.getBarcodeColumnCount();O++){var A=y[D][O+1].getValue(),W=D*p.getBarcodeColumnCount()+O;0===A.length?v.push(W):1===A.length?_[W]=A[0]:(w.push(W),E.push(A))}for(var q=new Array(E.length),_e=0;_e<q.length;_e++)q[_e]=E[_e];return g.createDecoderResultFromAmbiguousValues(p.getBarcodeECLevel(),_,vi.toIntArray(v),vi.toIntArray(w),q)},g.createDecoderResultFromAmbiguousValues=function(p,y,v,_,E){for(var w=new Int32Array(_.length),D=100;D-- >0;){for(var O=0;O<w.length;O++)y[_[O]]=E[O][w[O]];try{return g.decodeCodewords(y,p,v)}catch(W){if(!(W instanceof $o))throw W}if(0===w.length)throw $o.getChecksumInstance();for(O=0;O<w.length;O++){if(w[O]<E[O].length-1){w[O]++;break}if(w[O]=0,O===w.length-1)throw $o.getChecksumInstance()}}throw $o.getChecksumInstance()},g.createBarcodeMatrix=function(p){for(var y,v,_,E,w=Array.from({length:p.getBarcodeRowCount()},function(){return new Array(p.getBarcodeColumnCount()+2)}),D=0;D<w.length;D++)for(var O=0;O<w[D].length;O++)w[D][O]=new l0;var A=0;try{for(var W=u0(p.getDetectionResultColumns()),q=W.next();!q.done;q=W.next()){var _e=q.value;if(null!=_e)try{for(var be=(_=void 0,u0(_e.getCodewords())),We=be.next();!We.done;We=be.next()){var qe=We.value;if(null!=qe){var dt=qe.getRowNumber();if(dt>=0){if(dt>=w.length)continue;w[dt][A].setValue(qe.getValue())}}}}catch(gt){_={error:gt}}finally{try{We&&!We.done&&(E=be.return)&&E.call(be)}finally{if(_)throw _.error}}A++}}catch(gt){y={error:gt}}finally{try{q&&!q.done&&(v=W.return)&&v.call(W)}finally{if(y)throw y.error}}return w},g.isValidBarcodeColumn=function(p,y){return y>=0&&y<=p.getBarcodeColumnCount()+1},g.getStartColumn=function(p,y,v,_){var E,w,D=_?1:-1,O=null;if(g.isValidBarcodeColumn(p,y-D)&&(O=p.getDetectionResultColumn(y-D).getCodeword(v)),null!=O)return _?O.getEndX():O.getStartX();if(null!=(O=p.getDetectionResultColumn(y).getCodewordNearby(v)))return _?O.getStartX():O.getEndX();if(g.isValidBarcodeColumn(p,y-D)&&(O=p.getDetectionResultColumn(y-D).getCodewordNearby(v)),null!=O)return _?O.getEndX():O.getStartX();for(var A=0;g.isValidBarcodeColumn(p,y-D);){y-=D;try{for(var W=(E=void 0,u0(p.getDetectionResultColumn(y).getCodewords())),q=W.next();!q.done;q=W.next()){var _e=q.value;if(null!=_e)return(_?_e.getEndX():_e.getStartX())+D*A*(_e.getEndX()-_e.getStartX())}}catch(be){E={error:be}}finally{try{q&&!q.done&&(w=W.return)&&w.call(W)}finally{if(E)throw E.error}}A++}return _?p.getBoundingBox().getMinX():p.getBoundingBox().getMaxX()},g.detectCodeword=function(p,y,v,_,E,w,D,O){E=g.adjustCodewordStartColumn(p,y,v,_,E,w);var A=g.getModuleBitCount(p,y,v,_,E,w);if(null==A)return null;var W,q=Ei.sum(A);if(_)W=E+q;else{for(var _e=0;_e<A.length/2;_e++){var be=A[_e];A[_e]=A[A.length-1-_e],A[A.length-1-_e]=be}E=(W=E)-q}if(!g.checkCodewordSkew(q,D,O))return null;var We=lH.getDecodedValue(A),qe=vi.getCodeword(We);return-1===qe?null:new sH(E,W,g.getCodewordBucketNumber(We),qe)},g.getModuleBitCount=function(p,y,v,_,E,w){for(var D=E,O=new Int32Array(8),A=0,W=_?1:-1,q=_;(_?D<v:D>=y)&&A<O.length;)p.get(D,w)===q?(O[A]++,D+=W):(A++,q=!q);return A===O.length||D===(_?v:y)&&A===O.length-1?O:null},g.getNumberOfECCodeWords=function(p){return 2<<p},g.adjustCodewordStartColumn=function(p,y,v,_,E,w){for(var D=E,O=_?-1:1,A=0;A<2;A++){for(;(_?D>=y:D<v)&&_===p.get(D,w);){if(Math.abs(E-D)>g.CODEWORD_SKEW_SIZE)return E;D+=O}O=-O,_=!_}return D},g.checkCodewordSkew=function(p,y,v){return y-g.CODEWORD_SKEW_SIZE<=p&&p<=v+g.CODEWORD_SKEW_SIZE},g.decodeCodewords=function(p,y,v){if(0===p.length)throw Hr.getFormatInstance();var _=1<<y+1,E=g.correctErrors(p,v,_);g.verifyCodewordCount(p,_);var w=xH.decode(p,""+y);return w.setErrorsCorrected(E),w.setErasures(v.length),w},g.correctErrors=function(p,y,v){if(null!=y&&y.length>v/2+g.MAX_ERRORS||v<0||v>g.MAX_EC_CODEWORDS)throw $o.getChecksumInstance();return g.errorCorrection.decode(p,v,y)},g.verifyCodewordCount=function(p,y){if(p.length<4)throw Hr.getFormatInstance();var v=p[0];if(v>p.length)throw Hr.getFormatInstance();if(0===v){if(!(y<p.length))throw Hr.getFormatInstance();p[0]=p.length-y}},g.getBitCountForCodeword=function(p){for(var y=new Int32Array(8),v=0,_=y.length-1;!((1&p)!==v&&(v=1&p,_--,_<0));)y[_]++,p>>=1;return y},g.getCodewordBucketNumber=function(p){return p instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(p):this.getCodewordBucketNumber_number(p)},g.getCodewordBucketNumber_number=function(p){return g.getCodewordBucketNumber(g.getBitCountForCodeword(p))},g.getCodewordBucketNumber_Int32Array=function(p){return(p[0]-p[2]+p[4]-p[6]+9)%9},g.toString=function(p){for(var y=new cC,v=0;v<p.length;v++){y.format("Row %2d: ",v);for(var _=0;_<p[v].length;_++){var E=p[v][_];0===E.getValue().length?y.format("        ",null):y.format("%4d(%2d)",E.getValue()[0],E.getConfidence(E.getValue()[0]))}y.format("%n")}return y.toString()},g.CODEWORD_SKEW_SIZE=2,g.MAX_ERRORS=3,g.MAX_EC_CODEWORDS=512,g.errorCorrection=new $G,g}();const SH=DH;var IH=function(){function g(){}return g.prototype.decode=function(p,y){void 0===y&&(y=null);var v=g.decode(p,y,!1);if(null==v||0===v.length||null==v[0])throw Cr.getNotFoundInstance();return v[0]},g.prototype.decodeMultiple=function(p,y){void 0===y&&(y=null);try{return g.decode(p,y,!0)}catch(v){throw v instanceof Hr||v instanceof $o?Cr.getNotFoundInstance():v}},g.decode=function(p,y,v){var _,E,w=new Array,D=LG.detectMultiple(p,y,v);try{for(var O=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(D.getPoints()),A=O.next();!A.done;A=O.next()){var W=A.value,q=SH.decode(D.getBits(),W[4],W[5],W[6],W[7],g.getMinCodewordWidth(W),g.getMaxCodewordWidth(W)),_e=new ua(q.getText(),q.getRawBytes(),void 0,W,En.PDF_417);_e.putMetadata(Es.ERROR_CORRECTION_LEVEL,q.getECLevel());var be=q.getOther();null!=be&&_e.putMetadata(Es.PDF417_EXTRA_METADATA,be),w.push(_e)}}catch(We){_={error:We}}finally{try{A&&!A.done&&(E=O.return)&&E.call(O)}finally{if(_)throw _.error}}return w.map(function(We){return We})},g.getMaxWidth=function(p,y){return null==p||null==y?0:Math.trunc(Math.abs(p.getX()-y.getX()))},g.getMinWidth=function(p,y){return null==p||null==y?hi.MAX_VALUE:Math.trunc(Math.abs(p.getX()-y.getX()))},g.getMaxCodewordWidth=function(p){return Math.floor(Math.max(Math.max(g.getMaxWidth(p[0],p[4]),g.getMaxWidth(p[6],p[2])*vi.MODULES_IN_CODEWORD/vi.MODULES_IN_STOP_PATTERN),Math.max(g.getMaxWidth(p[1],p[5]),g.getMaxWidth(p[7],p[3])*vi.MODULES_IN_CODEWORD/vi.MODULES_IN_STOP_PATTERN)))},g.getMinCodewordWidth=function(p){return Math.floor(Math.min(Math.min(g.getMinWidth(p[0],p[4]),g.getMinWidth(p[6],p[2])*vi.MODULES_IN_CODEWORD/vi.MODULES_IN_STOP_PATTERN),Math.min(g.getMinWidth(p[1],p[5]),g.getMinWidth(p[7],p[3])*vi.MODULES_IN_CODEWORD/vi.MODULES_IN_STOP_PATTERN)))},g.prototype.reset=function(){},g}();const Sy=IH;var TH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),AH=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return TH(p,g),p.kind="ReaderException",p}(aa);const jP=AH;var BP=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},PH=function(){function g(){}return g.prototype.decode=function(p,y){return this.setHints(y),this.decodeInternal(p)},g.prototype.decodeWithState=function(p){return null==this.readers&&this.setHints(null),this.decodeInternal(p)},g.prototype.setHints=function(p){this.hints=p;var y=null!=p&&void 0!==p.get(Ci.TRY_HARDER),v=null==p?null:p.get(Ci.POSSIBLE_FORMATS),_=new Array;if(null!=v){var E=v.some(function(w){return w===En.UPC_A||w===En.UPC_E||w===En.EAN_13||w===En.EAN_8||w===En.CODABAR||w===En.CODE_39||w===En.CODE_93||w===En.CODE_128||w===En.ITF||w===En.RSS_14||w===En.RSS_EXPANDED});E&&!y&&_.push(new Hh(p)),v.includes(En.QR_CODE)&&_.push(new xy),v.includes(En.DATA_MATRIX)&&_.push(new My),v.includes(En.AZTEC)&&_.push(new _y),v.includes(En.PDF_417)&&_.push(new Sy),E&&y&&_.push(new Hh(p))}0===_.length&&(y||_.push(new Hh(p)),_.push(new xy),_.push(new My),_.push(new _y),_.push(new Sy),y&&_.push(new Hh(p))),this.readers=_},g.prototype.reset=function(){var p,y;if(null!==this.readers)try{for(var v=BP(this.readers),_=v.next();!_.done;_=v.next())_.value.reset()}catch(w){p={error:w}}finally{try{_&&!_.done&&(y=v.return)&&y.call(v)}finally{if(p)throw p.error}}},g.prototype.decodeInternal=function(p){var y,v;if(null===this.readers)throw new jP("No readers where selected, nothing can be read.");try{for(var _=BP(this.readers),E=_.next();!E.done;E=_.next()){var w=E.value;try{return w.decode(p,this.hints)}catch(D){if(D instanceof jP)continue}}}catch(D){y={error:D}}finally{try{E&&!E.done&&(v=_.return)&&v.call(_)}finally{if(y)throw y.error}}throw new Cr("No MultiFormat Readers were able to detect the code.")},g}();const UP=PH;var RH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),LH=(function(g){function p(y,v){void 0===y&&(y=null),void 0===v&&(v=500);var E=new UP;return E.setHints(y),g.call(this,E,v)||this}RH(p,g),p.prototype.decodeBitmap=function(y){return this.reader.decodeWithState(y)}}($h),function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}()),NH=(function(g){LH(function p(y){return void 0===y&&(y=500),g.call(this,new Sy,y)||this},g)}($h),function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}()),Oy=(function(g){NH(function p(y){return void 0===y&&(y=500),g.call(this,new xy,y)||this},g)}($h),(()=>(function(g){g[g.ERROR_CORRECTION=0]="ERROR_CORRECTION",g[g.CHARACTER_SET=1]="CHARACTER_SET",g[g.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",g[g.MIN_SIZE=3]="MIN_SIZE",g[g.MAX_SIZE=4]="MAX_SIZE",g[g.MARGIN=5]="MARGIN",g[g.PDF417_COMPACT=6]="PDF417_COMPACT",g[g.PDF417_COMPACTION=7]="PDF417_COMPACTION",g[g.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",g[g.AZTEC_LAYERS=9]="AZTEC_LAYERS",g[g.QR_VERSION=10]="QR_VERSION"}(Oy||(Oy={})),Oy))());const ki=Oy;var FH=function(){function g(p){this.field=p,this.cachedGenerators=[],this.cachedGenerators.push(new _c(p,Int32Array.from([1])))}return g.prototype.buildGenerator=function(p){var y=this.cachedGenerators;if(p>=y.length)for(var v=y[y.length-1],_=this.field,E=y.length;E<=p;E++){var w=v.multiply(new _c(_,Int32Array.from([1,_.exp(E-1+_.getGeneratorBase())])));y.push(w),v=w}return y[p]},g.prototype.encode=function(p,y){if(0===y)throw new un("No error correction bytes");var v=p.length-y;if(v<=0)throw new un("No data bytes provided");var _=this.buildGenerator(y),E=new Int32Array(v);Vi.arraycopy(p,0,E,0,v);for(var w=new _c(this.field,E),O=(w=w.multiplyByMonomial(y,1)).divide(_)[1].getCoefficients(),A=y-O.length,W=0;W<A;W++)p[v+W]=0;Vi.arraycopy(O,0,p,v+A,O.length)},g}();const VP=FH;var jH=function(){function g(){}return g.applyMaskPenaltyRule1=function(p){return g.applyMaskPenaltyRule1Internal(p,!0)+g.applyMaskPenaltyRule1Internal(p,!1)},g.applyMaskPenaltyRule2=function(p){for(var y=0,v=p.getArray(),_=p.getWidth(),E=p.getHeight(),w=0;w<E-1;w++)for(var D=v[w],O=0;O<_-1;O++){var A=D[O];A===D[O+1]&&A===v[w+1][O]&&A===v[w+1][O+1]&&y++}return g.N2*y},g.applyMaskPenaltyRule3=function(p){for(var y=0,v=p.getArray(),_=p.getWidth(),E=p.getHeight(),w=0;w<E;w++)for(var D=0;D<_;D++){var O=v[w];D+6<_&&1===O[D]&&0===O[D+1]&&1===O[D+2]&&1===O[D+3]&&1===O[D+4]&&0===O[D+5]&&1===O[D+6]&&(g.isWhiteHorizontal(O,D-4,D)||g.isWhiteHorizontal(O,D+7,D+11))&&y++,w+6<E&&1===v[w][D]&&0===v[w+1][D]&&1===v[w+2][D]&&1===v[w+3][D]&&1===v[w+4][D]&&0===v[w+5][D]&&1===v[w+6][D]&&(g.isWhiteVertical(v,D,w-4,w)||g.isWhiteVertical(v,D,w+7,w+11))&&y++}return y*g.N3},g.isWhiteHorizontal=function(p,y,v){y=Math.max(y,0),v=Math.min(v,p.length);for(var _=y;_<v;_++)if(1===p[_])return!1;return!0},g.isWhiteVertical=function(p,y,v,_){v=Math.max(v,0),_=Math.min(_,p.length);for(var E=v;E<_;E++)if(1===p[E][y])return!1;return!0},g.applyMaskPenaltyRule4=function(p){for(var y=0,v=p.getArray(),_=p.getWidth(),E=p.getHeight(),w=0;w<E;w++)for(var D=v[w],O=0;O<_;O++)1===D[O]&&y++;var A=p.getHeight()*p.getWidth();return Math.floor(10*Math.abs(2*y-A)/A)*g.N4},g.getDataMaskBit=function(p,y,v){var _,E;switch(p){case 0:_=v+y&1;break;case 1:_=1&v;break;case 2:_=y%3;break;case 3:_=(v+y)%3;break;case 4:_=Math.floor(v/2)+Math.floor(y/3)&1;break;case 5:_=(1&(E=v*y))+E%3;break;case 6:_=(1&(E=v*y))+E%3&1;break;case 7:_=(E=v*y)%3+(v+y&1)&1;break;default:throw new un("Invalid mask pattern: "+p)}return 0===_},g.applyMaskPenaltyRule1Internal=function(p,y){for(var v=0,_=y?p.getHeight():p.getWidth(),E=y?p.getWidth():p.getHeight(),w=p.getArray(),D=0;D<_;D++){for(var O=0,A=-1,W=0;W<E;W++){var q=y?w[D][W]:w[W][D];q===A?O++:(O>=5&&(v+=g.N1+(O-5)),O=1,A=q)}O>=5&&(v+=g.N1+(O-5))}return v},g.N1=3,g.N2=3,g.N3=40,g.N4=10,g}();const c0=jH;var UH=function(){function g(p,y){this.width=p,this.height=y;for(var v=new Array(y),_=0;_!==y;_++)v[_]=new Uint8Array(p);this.bytes=v}return g.prototype.getHeight=function(){return this.height},g.prototype.getWidth=function(){return this.width},g.prototype.get=function(p,y){return this.bytes[y][p]},g.prototype.getArray=function(){return this.bytes},g.prototype.setNumber=function(p,y,v){this.bytes[y][p]=v},g.prototype.setBoolean=function(p,y,v){this.bytes[y][p]=v?1:0},g.prototype.clear=function(p){var y,v;try{for(var _=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),E=_.next();!E.done;E=_.next())la.fill(E.value,p)}catch(D){y={error:D}}finally{try{E&&!E.done&&(v=_.return)&&v.call(_)}finally{if(y)throw y.error}}},g.prototype.equals=function(p){if(!(p instanceof g))return!1;var y=p;if(this.width!==y.width||this.height!==y.height)return!1;for(var v=0,_=this.height;v<_;++v)for(var E=this.bytes[v],w=y.bytes[v],D=0,O=this.width;D<O;++D)if(E[D]!==w[D])return!1;return!0},g.prototype.toString=function(){for(var p=new Ai,y=0,v=this.height;y<v;++y){for(var _=this.bytes[y],E=0,w=this.width;E<w;++E)switch(_[E]){case 0:p.append(" 0");break;case 1:p.append(" 1");break;default:p.append("  ")}p.append("\n")}return p.toString()},g}();const VH=UH;var kH=function(){function g(){this.maskPattern=-1}return g.prototype.getMode=function(){return this.mode},g.prototype.getECLevel=function(){return this.ecLevel},g.prototype.getVersion=function(){return this.version},g.prototype.getMaskPattern=function(){return this.maskPattern},g.prototype.getMatrix=function(){return this.matrix},g.prototype.toString=function(){var p=new Ai;return p.append("<<\n"),p.append(" mode: "),p.append(this.mode?this.mode.toString():"null"),p.append("\n ecLevel: "),p.append(this.ecLevel?this.ecLevel.toString():"null"),p.append("\n version: "),p.append(this.version?this.version.toString():"null"),p.append("\n maskPattern: "),p.append(this.maskPattern.toString()),this.matrix?(p.append("\n matrix:\n"),p.append(this.matrix.toString())):p.append("\n matrix: null\n"),p.append(">>\n"),p.toString()},g.prototype.setMode=function(p){this.mode=p},g.prototype.setECLevel=function(p){this.ecLevel=p},g.prototype.setVersion=function(p){this.version=p},g.prototype.setMaskPattern=function(p){this.maskPattern=p},g.prototype.setMatrix=function(p){this.matrix=p},g.isValidMaskPattern=function(p){return p>=0&&p<g.NUM_MASK_PATTERNS},g.NUM_MASK_PATTERNS=8,g}();const hC=kH;var WH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),ZH=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return WH(p,g),p.kind="WriterException",p}(aa);const Gi=ZH;var $H=function(){function g(){}return g.clearMatrix=function(p){p.clear(255)},g.buildMatrix=function(p,y,v,_,E){g.clearMatrix(E),g.embedBasicPatterns(v,E),g.embedTypeInfo(y,_,E),g.maybeEmbedVersionInfo(v,E),g.embedDataBits(p,_,E)},g.embedBasicPatterns=function(p,y){g.embedPositionDetectionPatternsAndSeparators(y),g.embedDarkDotAtLeftBottomCorner(y),g.maybeEmbedPositionAdjustmentPatterns(p,y),g.embedTimingPatterns(y)},g.embedTypeInfo=function(p,y,v){var _=new ds;g.makeTypeInfoBits(p,y,_);for(var E=0,w=_.getSize();E<w;++E){var D=_.get(_.getSize()-1-E),O=g.TYPE_INFO_COORDINATES[E];if(v.setBoolean(O[0],O[1],D),E<8){var q=v.getWidth()-E-1;v.setBoolean(q,_e=8,D)}else{q=8;var _e=v.getHeight()-7+(E-8);v.setBoolean(q,_e,D)}}},g.maybeEmbedVersionInfo=function(p,y){if(!(p.getVersionNumber()<7)){var v=new ds;g.makeVersionInfoBits(p,v);for(var _=17,E=0;E<6;++E)for(var w=0;w<3;++w){var D=v.get(_);_--,y.setBoolean(E,y.getHeight()-11+w,D),y.setBoolean(y.getHeight()-11+w,E,D)}}},g.embedDataBits=function(p,y,v){for(var _=0,E=-1,w=v.getWidth()-1,D=v.getHeight()-1;w>0;){for(6===w&&(w-=1);D>=0&&D<v.getHeight();){for(var O=0;O<2;++O){var A=w-O;if(g.isEmpty(v.get(A,D))){var W=void 0;_<p.getSize()?(W=p.get(_),++_):W=!1,255!==y&&c0.getDataMaskBit(y,A,D)&&(W=!W),v.setBoolean(A,D,W)}}D+=E}D+=E=-E,w-=2}if(_!==p.getSize())throw new Gi("Not all bits consumed: "+_+"/"+p.getSize())},g.findMSBSet=function(p){return 32-hi.numberOfLeadingZeros(p)},g.calculateBCHCode=function(p,y){if(0===y)throw new un("0 polynomial");var v=g.findMSBSet(y);for(p<<=v-1;g.findMSBSet(p)>=v;)p^=y<<g.findMSBSet(p)-v;return p},g.makeTypeInfoBits=function(p,y,v){if(!hC.isValidMaskPattern(y))throw new Gi("Invalid mask pattern");var _=p.getBits()<<3|y;v.appendBits(_,5);var E=g.calculateBCHCode(_,g.TYPE_INFO_POLY);v.appendBits(E,10);var w=new ds;if(w.appendBits(g.TYPE_INFO_MASK_PATTERN,15),v.xor(w),15!==v.getSize())throw new Gi("should not happen but we got: "+v.getSize())},g.makeVersionInfoBits=function(p,y){y.appendBits(p.getVersionNumber(),6);var v=g.calculateBCHCode(p.getVersionNumber(),g.VERSION_INFO_POLY);if(y.appendBits(v,12),18!==y.getSize())throw new Gi("should not happen but we got: "+y.getSize())},g.isEmpty=function(p){return 255===p},g.embedTimingPatterns=function(p){for(var y=8;y<p.getWidth()-8;++y){var v=(y+1)%2;g.isEmpty(p.get(y,6))&&p.setNumber(y,6,v),g.isEmpty(p.get(6,y))&&p.setNumber(6,y,v)}},g.embedDarkDotAtLeftBottomCorner=function(p){if(0===p.get(8,p.getHeight()-8))throw new Gi;p.setNumber(8,p.getHeight()-8,1)},g.embedHorizontalSeparationPattern=function(p,y,v){for(var _=0;_<8;++_){if(!g.isEmpty(v.get(p+_,y)))throw new Gi;v.setNumber(p+_,y,0)}},g.embedVerticalSeparationPattern=function(p,y,v){for(var _=0;_<7;++_){if(!g.isEmpty(v.get(p,y+_)))throw new Gi;v.setNumber(p,y+_,0)}},g.embedPositionAdjustmentPattern=function(p,y,v){for(var _=0;_<5;++_)for(var E=g.POSITION_ADJUSTMENT_PATTERN[_],w=0;w<5;++w)v.setNumber(p+w,y+_,E[w])},g.embedPositionDetectionPattern=function(p,y,v){for(var _=0;_<7;++_)for(var E=g.POSITION_DETECTION_PATTERN[_],w=0;w<7;++w)v.setNumber(p+w,y+_,E[w])},g.embedPositionDetectionPatternsAndSeparators=function(p){var y=g.POSITION_DETECTION_PATTERN[0].length;g.embedPositionDetectionPattern(0,0,p),g.embedPositionDetectionPattern(p.getWidth()-y,0,p),g.embedPositionDetectionPattern(0,p.getWidth()-y,p),g.embedHorizontalSeparationPattern(0,7,p),g.embedHorizontalSeparationPattern(p.getWidth()-8,7,p),g.embedHorizontalSeparationPattern(0,p.getWidth()-8,p),g.embedVerticalSeparationPattern(7,0,p),g.embedVerticalSeparationPattern(p.getHeight()-7-1,0,p),g.embedVerticalSeparationPattern(7,p.getHeight()-7,p)},g.maybeEmbedPositionAdjustmentPatterns=function(p,y){if(!(p.getVersionNumber()<2))for(var v=p.getVersionNumber()-1,_=g.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[v],E=0,w=_.length;E!==w;E++){var D=_[E];if(D>=0)for(var O=0;O!==w;O++){var A=_[O];A>=0&&g.isEmpty(y.get(A,D))&&g.embedPositionAdjustmentPattern(A-2,D-2,y)}}},g.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),g.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),g.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),g.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),g.VERSION_INFO_POLY=7973,g.TYPE_INFO_POLY=1335,g.TYPE_INFO_MASK_PATTERN=21522,g}();const kP=$H;var KH=function(){function g(p,y){this.dataBytes=p,this.errorCorrectionBytes=y}return g.prototype.getDataBytes=function(){return this.dataBytes},g.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},g}();const zH=KH;var WP=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},GH=function(){function g(){}return g.calculateMaskPenalty=function(p){return c0.applyMaskPenaltyRule1(p)+c0.applyMaskPenaltyRule2(p)+c0.applyMaskPenaltyRule3(p)+c0.applyMaskPenaltyRule4(p)},g.encode=function(p,y,v){void 0===v&&(v=null);var _=g.DEFAULT_BYTE_MODE_ENCODING,E=null!==v&&void 0!==v.get(ki.CHARACTER_SET);E&&(_=v.get(ki.CHARACTER_SET).toString());var w=this.chooseMode(p,_),D=new ds;if(w===zi.BYTE&&(E||g.DEFAULT_BYTE_MODE_ENCODING!==_)){var O=qo.getCharacterSetECIByName(_);void 0!==O&&this.appendECI(O,D)}this.appendModeInfo(w,D);var W,A=new ds;if(this.appendBytes(p,w,A,_),null!==v&&void 0!==v.get(ki.QR_VERSION)){var q=Number.parseInt(v.get(ki.QR_VERSION).toString(),10);W=Dd.getVersionForNumber(q);var _e=this.calculateBitsNeeded(w,D,A,W);if(!this.willFit(_e,W,y))throw new Gi("Data too big for requested version")}else W=this.recommendVersion(y,w,D,A);var be=new ds;be.appendBitArray(D);var We=w===zi.BYTE?A.getSizeInBytes():p.length;this.appendLengthInfo(We,W,w,be),be.appendBitArray(A);var qe=W.getECBlocksForLevel(y),dt=W.getTotalCodewords()-qe.getTotalECCodewords();this.terminateBits(dt,be);var gt=this.interleaveWithECBytes(be,W.getTotalCodewords(),dt,qe.getNumBlocks()),lt=new hC;lt.setECLevel(y),lt.setMode(w),lt.setVersion(W);var Tt=W.getDimensionForVersion(),Rt=new VH(Tt,Tt),Xt=this.chooseMaskPattern(gt,y,W,Rt);return lt.setMaskPattern(Xt),kP.buildMatrix(gt,y,W,Xt,Rt),lt.setMatrix(Rt),lt},g.recommendVersion=function(p,y,v,_){var E=this.calculateBitsNeeded(y,v,_,Dd.getVersionForNumber(1)),w=this.chooseVersion(E,p),D=this.calculateBitsNeeded(y,v,_,w);return this.chooseVersion(D,p)},g.calculateBitsNeeded=function(p,y,v,_){return y.getSize()+p.getCharacterCountBits(_)+v.getSize()},g.getAlphanumericCode=function(p){return p<g.ALPHANUMERIC_TABLE.length?g.ALPHANUMERIC_TABLE[p]:-1},g.chooseMode=function(p,y){if(void 0===y&&(y=null),qo.SJIS.getName()===y&&this.isOnlyDoubleByteKanji(p))return zi.KANJI;for(var v=!1,_=!1,E=0,w=p.length;E<w;++E){var D=p.charAt(E);if(g.isDigit(D))v=!0;else{if(-1===this.getAlphanumericCode(D.charCodeAt(0)))return zi.BYTE;_=!0}}return _?zi.ALPHANUMERIC:v?zi.NUMERIC:zi.BYTE},g.isOnlyDoubleByteKanji=function(p){var y;try{y=eu.encode(p,qo.SJIS)}catch(w){return!1}var v=y.length;if(v%2!=0)return!1;for(var _=0;_<v;_+=2){var E=255&y[_];if((E<129||E>159)&&(E<224||E>235))return!1}return!0},g.chooseMaskPattern=function(p,y,v,_){for(var E=Number.MAX_SAFE_INTEGER,w=-1,D=0;D<hC.NUM_MASK_PATTERNS;D++){kP.buildMatrix(p,y,v,D,_);var O=this.calculateMaskPenalty(_);O<E&&(E=O,w=D)}return w},g.chooseVersion=function(p,y){for(var v=1;v<=40;v++){var _=Dd.getVersionForNumber(v);if(g.willFit(p,_,y))return _}throw new Gi("Data too big")},g.willFit=function(p,y,v){return y.getTotalCodewords()-y.getECBlocksForLevel(v).getTotalECCodewords()>=(p+7)/8},g.terminateBits=function(p,y){var v=8*p;if(y.getSize()>v)throw new Gi("data bits cannot fit in the QR Code"+y.getSize()+" > "+v);for(var _=0;_<4&&y.getSize()<v;++_)y.appendBit(!1);var E=7&y.getSize();if(E>0)for(_=E;_<8;_++)y.appendBit(!1);var w=p-y.getSizeInBytes();for(_=0;_<w;++_)y.appendBits(0==(1&_)?236:17,8);if(y.getSize()!==v)throw new Gi("Bits size does not equal capacity")},g.getNumDataBytesAndNumECBytesForBlockID=function(p,y,v,_,E,w){if(_>=v)throw new Gi("Block ID too large");var D=p%v,O=v-D,A=Math.floor(p/v),W=A+1,q=Math.floor(y/v),_e=q+1,be=A-q,We=W-_e;if(be!==We)throw new Gi("EC bytes mismatch");if(v!==O+D)throw new Gi("RS blocks mismatch");if(p!==(q+be)*O+(_e+We)*D)throw new Gi("Total bytes mismatch");_<O?(E[0]=q,w[0]=be):(E[0]=_e,w[0]=We)},g.interleaveWithECBytes=function(p,y,v,_){var E,w,D,O;if(p.getSizeInBytes()!==v)throw new Gi("Number of bits and data bytes does not match");for(var A=0,W=0,q=0,_e=new Array,be=0;be<_;++be){var We=new Int32Array(1),qe=new Int32Array(1);g.getNumDataBytesAndNumECBytesForBlockID(y,v,_,be,We,qe);var dt=We[0],gt=new Uint8Array(dt);p.toBytes(8*A,gt,0,dt);var lt=g.generateECBytes(gt,qe[0]);_e.push(new zH(gt,lt)),W=Math.max(W,dt),q=Math.max(q,lt.length),A+=We[0]}if(v!==A)throw new Gi("Data bytes does not match offset");var Tt=new ds;for(be=0;be<W;++be)try{for(var Rt=(E=void 0,WP(_e)),Xt=Rt.next();!Xt.done;Xt=Rt.next())be<(gt=Xt.value.getDataBytes()).length&&Tt.appendBits(gt[be],8)}catch(rn){E={error:rn}}finally{try{Xt&&!Xt.done&&(w=Rt.return)&&w.call(Rt)}finally{if(E)throw E.error}}for(be=0;be<q;++be)try{for(var _r=(D=void 0,WP(_e)),Ur=_r.next();!Ur.done;Ur=_r.next())be<(lt=Ur.value.getErrorCorrectionBytes()).length&&Tt.appendBits(lt[be],8)}catch(rn){D={error:rn}}finally{try{Ur&&!Ur.done&&(O=_r.return)&&O.call(_r)}finally{if(D)throw D.error}}if(y!==Tt.getSizeInBytes())throw new Gi("Interleaving error: "+y+" and "+Tt.getSizeInBytes()+" differ.");return Tt},g.generateECBytes=function(p,y){for(var v=p.length,_=new Int32Array(v+y),E=0;E<v;E++)_[E]=255&p[E];new VP(ca.QR_CODE_FIELD_256).encode(_,y);var w=new Uint8Array(y);for(E=0;E<y;E++)w[E]=_[v+E];return w},g.appendModeInfo=function(p,y){y.appendBits(p.getBits(),4)},g.appendLengthInfo=function(p,y,v,_){var E=v.getCharacterCountBits(y);if(p>=1<<E)throw new Gi(p+" is bigger than "+((1<<E)-1));_.appendBits(p,E)},g.appendBytes=function(p,y,v,_){switch(y){case zi.NUMERIC:g.appendNumericBytes(p,v);break;case zi.ALPHANUMERIC:g.appendAlphanumericBytes(p,v);break;case zi.BYTE:g.append8BitBytes(p,v,_);break;case zi.KANJI:g.appendKanjiBytes(p,v);break;default:throw new Gi("Invalid mode: "+y)}},g.getDigit=function(p){return p.charCodeAt(0)-48},g.isDigit=function(p){var y=g.getDigit(p);return y>=0&&y<=9},g.appendNumericBytes=function(p,y){for(var v=p.length,_=0;_<v;){var E=g.getDigit(p.charAt(_));if(_+2<v){var w=g.getDigit(p.charAt(_+1)),D=g.getDigit(p.charAt(_+2));y.appendBits(100*E+10*w+D,10),_+=3}else _+1<v?(w=g.getDigit(p.charAt(_+1)),y.appendBits(10*E+w,7),_+=2):(y.appendBits(E,4),_++)}},g.appendAlphanumericBytes=function(p,y){for(var v=p.length,_=0;_<v;){var E=g.getAlphanumericCode(p.charCodeAt(_));if(-1===E)throw new Gi;if(_+1<v){var w=g.getAlphanumericCode(p.charCodeAt(_+1));if(-1===w)throw new Gi;y.appendBits(45*E+w,11),_+=2}else y.appendBits(E,6),_++}},g.append8BitBytes=function(p,y,v){var _;try{_=eu.encode(p,v)}catch(O){throw new Gi(O)}for(var E=0,w=_.length;E!==w;E++)y.appendBits(_[E],8)},g.appendKanjiBytes=function(p,y){var v;try{v=eu.encode(p,qo.SJIS)}catch(q){throw new Gi(q)}for(var _=v.length,E=0;E<_;E+=2){var O=(255&v[E])<<8&4294967295|255&v[E+1],A=-1;if(O>=33088&&O<=40956?A=O-33088:O>=57408&&O<=60351&&(A=O-49472),-1===A)throw new Gi("Invalid byte sequence");y.appendBits(192*(A>>8)+(255&A),13)}},g.appendECI=function(p,y){y.appendBits(zi.ECI.getBits(),4),y.appendBits(p.getValue(),8)},g.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),g.DEFAULT_BYTE_MODE_ENCODING=qo.UTF8.getName(),g}();const Iy=GH;!function(){function g(){}g.prototype.write=function(p,y,v,_){if(void 0===_&&(_=null),0===p.length)throw new un("Found empty contents");if(y<0||v<0)throw new un("Requested dimensions are too small: "+y+"x"+v);var E=Nu.L,w=g.QUIET_ZONE_SIZE;null!==_&&(void 0!==_.get(ki.ERROR_CORRECTION)&&(E=Nu.fromString(_.get(ki.ERROR_CORRECTION).toString())),void 0!==_.get(ki.MARGIN)&&(w=Number.parseInt(_.get(ki.MARGIN).toString(),10)));var D=Iy.encode(p,E,_);return this.renderResult(D,y,v,w)},g.prototype.writeToDom=function(p,y,v,_,E){void 0===E&&(E=null),"string"==typeof p&&(p=document.querySelector(p));var w=this.write(y,v,_,E);p&&p.appendChild(w)},g.prototype.renderResult=function(p,y,v,_){var E=p.getMatrix();if(null===E)throw new tu;for(var w=E.getWidth(),D=E.getHeight(),O=w+2*_,A=D+2*_,W=Math.max(y,O),q=Math.max(v,A),_e=Math.min(Math.floor(W/O),Math.floor(q/A)),be=Math.floor((W-w*_e)/2),We=Math.floor((q-D*_e)/2),qe=this.createSVGElement(W,q),dt=0,gt=We;dt<D;dt++,gt+=_e)for(var lt=0,Tt=be;lt<w;lt++,Tt+=_e)if(1===E.get(lt,dt)){var Rt=this.createSvgRectElement(Tt,gt,_e,_e);qe.appendChild(Rt)}return qe},g.prototype.createSVGElement=function(p,y){var v=document.createElementNS(g.SVG_NS,"svg");return v.setAttributeNS(null,"height",p.toString()),v.setAttributeNS(null,"width",y.toString()),v},g.prototype.createSvgRectElement=function(p,y,v,_){var E=document.createElementNS(g.SVG_NS,"rect");return E.setAttributeNS(null,"x",p.toString()),E.setAttributeNS(null,"y",y.toString()),E.setAttributeNS(null,"height",v.toString()),E.setAttributeNS(null,"width",_.toString()),E.setAttributeNS(null,"fill","#000000"),E},g.QUIET_ZONE_SIZE=4,g.SVG_NS="http://www.w3.org/2000/svg"}();!function(){function g(){}g.prototype.encode=function(p,y,v,_,E){if(0===p.length)throw new un("Found empty contents");if(y!==En.QR_CODE)throw new un("Can only encode QR_CODE, but got "+y);if(v<0||_<0)throw new un("Requested dimensions are too small: "+v+"x"+_);var w=Nu.L,D=g.QUIET_ZONE_SIZE;null!==E&&(void 0!==E.get(ki.ERROR_CORRECTION)&&(w=Nu.fromString(E.get(ki.ERROR_CORRECTION).toString())),void 0!==E.get(ki.MARGIN)&&(D=Number.parseInt(E.get(ki.MARGIN).toString(),10)));var O=Iy.encode(p,w,E);return g.renderResult(O,v,_,D)},g.renderResult=function(p,y,v,_){var E=p.getMatrix();if(null===E)throw new tu;for(var w=E.getWidth(),D=E.getHeight(),O=w+2*_,A=D+2*_,W=Math.max(y,O),q=Math.max(v,A),_e=Math.min(Math.floor(W/O),Math.floor(q/A)),be=Math.floor((W-w*_e)/2),We=Math.floor((q-D*_e)/2),qe=new Xa(W,q),dt=0,gt=We;dt<D;dt++,gt+=_e)for(var lt=0,Tt=be;lt<w;lt++,Tt+=_e)1===E.get(lt,dt)&&qe.setRegion(Tt,gt,_e,_e);return qe},g.QUIET_ZONE_SIZE=4}();var JH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}();!function(g){function p(y,v,_,E,w,D,O,A){var W=g.call(this,D,O)||this;if(W.yuvData=y,W.dataWidth=v,W.dataHeight=_,W.left=E,W.top=w,E+D>v||w+O>_)throw new un("Crop rectangle does not fit within image data.");return A&&W.reverseHorizontal(D,O),W}JH(p,g),p.prototype.getRow=function(y,v){if(y<0||y>=this.getHeight())throw new un("Requested row is outside the image: "+y);var _=this.getWidth();return(null==v||v.length<_)&&(v=new Uint8ClampedArray(_)),Vi.arraycopy(this.yuvData,(y+this.top)*this.dataWidth+this.left,v,0,_),v},p.prototype.getMatrix=function(){var y=this.getWidth(),v=this.getHeight();if(y===this.dataWidth&&v===this.dataHeight)return this.yuvData;var _=y*v,E=new Uint8ClampedArray(_),w=this.top*this.dataWidth+this.left;if(y===this.dataWidth)return Vi.arraycopy(this.yuvData,w,E,0,_),E;for(var D=0;D<v;D++)Vi.arraycopy(this.yuvData,w,E,D*y,y),w+=this.dataWidth;return E},p.prototype.isCropSupported=function(){return!0},p.prototype.crop=function(y,v,_,E){return new p(this.yuvData,this.dataWidth,this.dataHeight,this.left+y,this.top+v,_,E,!1)},p.prototype.renderThumbnail=function(){for(var y=this.getWidth()/p.THUMBNAIL_SCALE_FACTOR,v=this.getHeight()/p.THUMBNAIL_SCALE_FACTOR,_=new Int32Array(y*v),E=this.yuvData,w=this.top*this.dataWidth+this.left,D=0;D<v;D++){for(var O=D*y,A=0;A<y;A++)_[O+A]=4278190080|65793*(255&E[w+A*p.THUMBNAIL_SCALE_FACTOR]);w+=this.dataWidth*p.THUMBNAIL_SCALE_FACTOR}return _},p.prototype.getThumbnailWidth=function(){return this.getWidth()/p.THUMBNAIL_SCALE_FACTOR},p.prototype.getThumbnailHeight=function(){return this.getHeight()/p.THUMBNAIL_SCALE_FACTOR},p.prototype.reverseHorizontal=function(y,v){for(var _=this.yuvData,E=0,w=this.top*this.dataWidth+this.left;E<v;E++,w+=this.dataWidth)for(var D=w+y/2,O=w,A=w+y-1;O<D;O++,A--){var W=_[O];_[O]=_[A],_[A]=W}},p.prototype.invert=function(){return new fy(this)},p.THUMBNAIL_SCALE_FACTOR=2}(o0);var XH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}();!function(g){function p(y,v,_,E,w,D,O){var A=g.call(this,v,_)||this;if(A.dataWidth=E,A.dataHeight=w,A.left=D,A.top=O,4===y.BYTES_PER_ELEMENT){for(var W=v*_,q=new Uint8ClampedArray(W),_e=0;_e<W;_e++){var be=y[_e];q[_e]=((be>>16&255)+(be>>7&510)+(255&be))/4&255}A.luminances=q}else A.luminances=y;if(void 0===E&&(A.dataWidth=v),void 0===w&&(A.dataHeight=_),void 0===D&&(A.left=0),void 0===O&&(A.top=0),A.left+v>A.dataWidth||A.top+_>A.dataHeight)throw new un("Crop rectangle does not fit within image data.");return A}XH(p,g),p.prototype.getRow=function(y,v){if(y<0||y>=this.getHeight())throw new un("Requested row is outside the image: "+y);var _=this.getWidth();return(null==v||v.length<_)&&(v=new Uint8ClampedArray(_)),Vi.arraycopy(this.luminances,(y+this.top)*this.dataWidth+this.left,v,0,_),v},p.prototype.getMatrix=function(){var y=this.getWidth(),v=this.getHeight();if(y===this.dataWidth&&v===this.dataHeight)return this.luminances;var _=y*v,E=new Uint8ClampedArray(_),w=this.top*this.dataWidth+this.left;if(y===this.dataWidth)return Vi.arraycopy(this.luminances,w,E,0,_),E;for(var D=0;D<v;D++)Vi.arraycopy(this.luminances,w,E,D*y,y),w+=this.dataWidth;return E},p.prototype.isCropSupported=function(){return!0},p.prototype.crop=function(y,v,_,E){return new p(this.luminances,_,E,this.dataWidth,this.dataHeight,this.left+y,this.top+v)},p.prototype.invert=function(){return new fy(this)}}(o0);var QH=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),qH=function(g){function p(){return null!==g&&g.apply(this,arguments)||this}return QH(p,g),p.forName=function(y){return this.getCharacterSetECIByName(y)},p}(qo);const eY=qH;var tY=function(){function g(){}return g.ISO_8859_1=qo.ISO8859_1,g}();const rY=tY;var nY=function(){function g(){}return g.prototype.isCompact=function(){return this.compact},g.prototype.setCompact=function(p){this.compact=p},g.prototype.getSize=function(){return this.size},g.prototype.setSize=function(p){this.size=p},g.prototype.getLayers=function(){return this.layers},g.prototype.setLayers=function(p){this.layers=p},g.prototype.getCodeWords=function(){return this.codeWords},g.prototype.setCodeWords=function(p){this.codeWords=p},g.prototype.getMatrix=function(){return this.matrix},g.prototype.setMatrix=function(p){this.matrix=p},g}();const iY=nY;var oY=function(){function g(){}return g.singletonList=function(p){return[p]},g.min=function(p,y){return p.sort(y)[0]},g}();const ZP=oY;var sY=function(){function g(p){this.previous=p}return g.prototype.getPrevious=function(){return this.previous},g}();const aY=sY;var lY=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),uY=function(g){function p(y,v,_){var E=g.call(this,y)||this;return E.value=v,E.bitCount=_,E}return lY(p,g),p.prototype.appendTo=function(y,v){y.appendBits(this.value,this.bitCount)},p.prototype.add=function(y,v){return new p(this,y,v)},p.prototype.addBinaryShift=function(y,v){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new p(this,y,v)},p.prototype.toString=function(){var y=this.value&(1<<this.bitCount)-1;return"<"+hi.toBinaryString((y|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},p}(aY);const fC=uY;var cY=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)_.hasOwnProperty(E)&&(v[E]=_[E])})(p,y)};return function(p,y){function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),dY=function(g){function p(y,v,_){var E=g.call(this,y,0,0)||this;return E.binaryShiftStart=v,E.binaryShiftByteCount=_,E}return cY(p,g),p.prototype.appendTo=function(y,v){for(var _=0;_<this.binaryShiftByteCount;_++)(0===_||31===_&&this.binaryShiftByteCount<=62)&&(y.appendBits(31,5),this.binaryShiftByteCount>62?y.appendBits(this.binaryShiftByteCount-31,16):y.appendBits(0===_?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),y.appendBits(v[this.binaryShiftStart+_],8)},p.prototype.addBinaryShift=function(y,v){return new p(this,y,v)},p.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},p}(fC);const hY=dY;function d0(g,p,y){return new fC(g,p,y)}var pY=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],mY=new fC(null,0,0),pC=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],KP=function yY(g){var p,y;try{for(var v=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(g),_=v.next();!_.done;_=v.next())la.fill(_.value,-1)}catch(w){p={error:w}}finally{try{_&&!_.done&&(y=v.return)&&y.call(v)}finally{if(p)throw p.error}}return g[0][4]=0,g[1][4]=0,g[1][0]=28,g[3][4]=0,g[2][4]=0,g[2][0]=15,g}(la.createInt32Array(6,6)),_Y=function(){function g(p,y,v,_){this.token=p,this.mode=y,this.binaryShiftByteCount=v,this.bitCount=_}return g.prototype.getMode=function(){return this.mode},g.prototype.getToken=function(){return this.token},g.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},g.prototype.getBitCount=function(){return this.bitCount},g.prototype.latchAndAppend=function(p,y){var v=this.bitCount,_=this.token;if(p!==this.mode){var E=pC[this.mode][p];_=d0(_,65535&E,E>>16),v+=E>>16}var w=2===p?4:5;return new g(_=d0(_,y,w),p,0,v+w)},g.prototype.shiftAndAppend=function(p,y){var v=this.token,_=2===this.mode?4:5;return v=d0(v,KP[this.mode][p],_),new g(v=d0(v,y,5),this.mode,0,this.bitCount+_+5)},g.prototype.addBinaryShiftChar=function(p){var y=this.token,v=this.mode,_=this.bitCount;if(4===this.mode||2===this.mode){var E=pC[v][0];y=d0(y,65535&E,E>>16),_+=E>>16,v=0}var D=new g(y,v,this.binaryShiftByteCount+1,_+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===D.binaryShiftByteCount&&(D=D.endBinaryShift(p+1)),D},g.prototype.endBinaryShift=function(p){if(0===this.binaryShiftByteCount)return this;var y=this.token;return y=function fY(g,p,y){return new hY(g,p,y)}(y,p-this.binaryShiftByteCount,this.binaryShiftByteCount),new g(y,this.mode,0,this.bitCount)},g.prototype.isBetterThanOrEqualTo=function(p){var y=this.bitCount+(pC[this.mode][p.mode]>>16);return this.binaryShiftByteCount<p.binaryShiftByteCount?y+=g.calculateBinaryShiftCost(p)-g.calculateBinaryShiftCost(this):this.binaryShiftByteCount>p.binaryShiftByteCount&&p.binaryShiftByteCount>0&&(y+=10),y<=p.bitCount},g.prototype.toBitArray=function(p){for(var y,v,_=[],E=this.endBinaryShift(p.length).token;null!==E;E=E.getPrevious())_.unshift(E);var w=new ds;try{for(var D=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(_),O=D.next();!O.done;O=D.next())O.value.appendTo(w,p)}catch(W){y={error:W}}finally{try{O&&!O.done&&(v=D.return)&&v.call(D)}finally{if(y)throw y.error}}return w},g.prototype.toString=function(){return Fi.format("%s bits=%d bytes=%d",pY[this.mode],this.bitCount,this.binaryShiftByteCount)},g.calculateBinaryShiftCost=function(p){return p.binaryShiftByteCount>62?21:p.binaryShiftByteCount>31?20:p.binaryShiftByteCount>0?10:0},g.INITIAL_STATE=new g(mY,0,0,0),g}();const EY=_Y;var mC=function bY(g){var p=Fi.getCharCode(" "),y=Fi.getCharCode("."),v=Fi.getCharCode(",");g[0][p]=1;for(var _=Fi.getCharCode("Z"),E=Fi.getCharCode("A"),w=E;w<=_;w++)g[0][w]=w-E+2;g[1][p]=1;var D=Fi.getCharCode("z"),O=Fi.getCharCode("a");for(w=O;w<=D;w++)g[1][w]=w-O+2;g[2][p]=1;var A=Fi.getCharCode("9"),W=Fi.getCharCode("0");for(w=W;w<=A;w++)g[2][w]=w-W+2;g[2][v]=12,g[2][y]=13;for(var q=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],_e=0;_e<q.length;_e++)g[3][Fi.getCharCode(q[_e])]=_e;var be=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(_e=0;_e<be.length;_e++)Fi.getCharCode(be[_e])>0&&(g[4][Fi.getCharCode(be[_e])]=_e);return g}(la.createInt32Array(5,256)),Ay=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},CY=function(){function g(p){this.text=p}return g.prototype.encode=function(){for(var p=Fi.getCharCode(" "),y=Fi.getCharCode("\n"),v=ZP.singletonList(EY.INITIAL_STATE),_=0;_<this.text.length;_++){var E=void 0,w=_+1<this.text.length?this.text[_+1]:0;switch(this.text[_]){case Fi.getCharCode("\r"):E=w===y?2:0;break;case Fi.getCharCode("."):E=w===p?3:0;break;case Fi.getCharCode(","):E=w===p?4:0;break;case Fi.getCharCode(":"):E=w===p?5:0;break;default:E=0}E>0?(v=g.updateStateListForPair(v,_,E),_++):v=this.updateStateListForChar(v,_)}return ZP.min(v,function(O,A){return O.getBitCount()-A.getBitCount()}).toBitArray(this.text)},g.prototype.updateStateListForChar=function(p,y){var v,_,E=[];try{for(var w=Ay(p),D=w.next();!D.done;D=w.next())this.updateStateForChar(D.value,y,E)}catch(A){v={error:A}}finally{try{D&&!D.done&&(_=w.return)&&_.call(w)}finally{if(v)throw v.error}}return g.simplifyStates(E)},g.prototype.updateStateForChar=function(p,y,v){for(var _=255&this.text[y],E=mC[p.getMode()][_]>0,w=null,D=0;D<=4;D++){var O=mC[D][_];if(O>0){if(null==w&&(w=p.endBinaryShift(y)),!E||D===p.getMode()||2===D){var A=w.latchAndAppend(D,O);v.push(A)}if(!E&&KP[p.getMode()][D]>=0){var W=w.shiftAndAppend(D,O);v.push(W)}}}if(p.getBinaryShiftByteCount()>0||0===mC[p.getMode()][_]){var q=p.addBinaryShiftChar(y);v.push(q)}},g.updateStateListForPair=function(p,y,v){var _,E,w=[];try{for(var D=Ay(p),O=D.next();!O.done;O=D.next())this.updateStateForPair(O.value,y,v,w)}catch(W){_={error:W}}finally{try{O&&!O.done&&(E=D.return)&&E.call(D)}finally{if(_)throw _.error}}return this.simplifyStates(w)},g.updateStateForPair=function(p,y,v,_){var E=p.endBinaryShift(y);if(_.push(E.latchAndAppend(4,v)),4!==p.getMode()&&_.push(E.shiftAndAppend(4,v)),3===v||4===v){var w=E.latchAndAppend(2,16-v).latchAndAppend(2,1);_.push(w)}if(p.getBinaryShiftByteCount()>0){var D=p.addBinaryShiftChar(y).addBinaryShiftChar(y+1);_.push(D)}},g.simplifyStates=function(p){var y,v,_,E,w=[];try{for(var D=Ay(p),O=D.next();!O.done;O=D.next()){var A=O.value,W=!0,q=function(dt){if(dt.isBetterThanOrEqualTo(A))return W=!1,"break";A.isBetterThanOrEqualTo(dt)&&(w=w.filter(function(gt){return gt!==dt}))};try{for(var _e=(_=void 0,Ay(w)),be=_e.next();!be.done&&"break"!==q(be.value);be=_e.next());}catch(dt){_={error:dt}}finally{try{be&&!be.done&&(E=_e.return)&&E.call(_e)}finally{if(_)throw _.error}}W&&w.push(A)}}catch(dt){y={error:dt}}finally{try{O&&!O.done&&(v=D.return)&&v.call(D)}finally{if(y)throw y.error}}return w},g}();const wY=CY;var xY=function(){function g(){}return g.encodeBytes=function(p){return g.encode(p,g.DEFAULT_EC_PERCENT,g.DEFAULT_AZTEC_LAYERS)},g.encode=function(p,y,v){var D,O,A,W,q,_=new wY(p).encode(),E=hi.truncDivision(_.getSize()*y,100)+11,w=_.getSize()+E;if(v!==g.DEFAULT_AZTEC_LAYERS){if(D=v<0,(O=Math.abs(v))>(D?g.MAX_NB_BITS_COMPACT:g.MAX_NB_BITS))throw new un(Fi.format("Illegal value %s for layers",v));var _e=(A=g.totalBitsInLayer(O,D))-A%(W=g.WORD_SIZE[O]);if((q=g.stuffBits(_,W)).getSize()+E>_e)throw new un("Data to large for user specified layer");if(D&&q.getSize()>64*W)throw new un("Data to large for user specified layer")}else{W=0,q=null;for(var be=0;;be++){if(be>g.MAX_NB_BITS)throw new un("Data too large for an Aztec code");if(!(w>(A=g.totalBitsInLayer(O=(D=be<=3)?be+1:be,D)))&&((null==q||W!==g.WORD_SIZE[O])&&(q=g.stuffBits(_,W=g.WORD_SIZE[O])),_e=A-A%W,!(D&&q.getSize()>64*W)&&q.getSize()+E<=_e))break}}var Tt,We=g.generateCheckWords(q,A,W),qe=q.getSize()/W,dt=g.generateModeMessage(D,O,qe),gt=(D?11:14)+4*O,lt=new Int32Array(gt);if(D)for(Tt=gt,be=0;be<lt.length;be++)lt[be]=be;else{Tt=gt+1+2*hi.truncDivision(hi.truncDivision(gt,2)-1,15);var Rt=hi.truncDivision(gt,2),Xt=hi.truncDivision(Tt,2);for(be=0;be<Rt;be++){var ur=be+hi.truncDivision(be,15);lt[Rt-be-1]=Xt-ur-1,lt[Rt+be]=Xt+ur+1}}for(var _r=new Xa(Tt),Ur=(be=0,0);be<O;be++){for(var $r=4*(O-be)+(D?9:12),rn=0;rn<$r;rn++)for(var Mn=2*rn,On=0;On<2;On++)We.get(Ur+Mn+On)&&_r.set(lt[2*be+On],lt[2*be+rn]),We.get(Ur+2*$r+Mn+On)&&_r.set(lt[2*be+rn],lt[gt-1-2*be-On]),We.get(Ur+4*$r+Mn+On)&&_r.set(lt[gt-1-2*be-On],lt[gt-1-2*be-rn]),We.get(Ur+6*$r+Mn+On)&&_r.set(lt[gt-1-2*be-rn],lt[2*be+On]);Ur+=8*$r}if(g.drawModeMessage(_r,D,Tt,dt),D)g.drawBullsEye(_r,hi.truncDivision(Tt,2),5);else for(g.drawBullsEye(_r,hi.truncDivision(Tt,2),7),be=0,rn=0;be<hi.truncDivision(gt,2)-1;be+=15,rn+=16)for(On=1&hi.truncDivision(Tt,2);On<Tt;On+=2)_r.set(hi.truncDivision(Tt,2)-rn,On),_r.set(hi.truncDivision(Tt,2)+rn,On),_r.set(On,hi.truncDivision(Tt,2)-rn),_r.set(On,hi.truncDivision(Tt,2)+rn);var xn=new iY;return xn.setCompact(D),xn.setSize(Tt),xn.setLayers(O),xn.setCodeWords(qe),xn.setMatrix(_r),xn},g.drawBullsEye=function(p,y,v){for(var _=0;_<v;_+=2)for(var E=y-_;E<=y+_;E++)p.set(E,y-_),p.set(E,y+_),p.set(y-_,E),p.set(y+_,E);p.set(y-v,y-v),p.set(y-v+1,y-v),p.set(y-v,y-v+1),p.set(y+v,y-v),p.set(y+v,y-v+1),p.set(y+v,y+v-1)},g.generateModeMessage=function(p,y,v){var _=new ds;return p?(_.appendBits(y-1,2),_.appendBits(v-1,6),_=g.generateCheckWords(_,28,4)):(_.appendBits(y-1,5),_.appendBits(v-1,11),_=g.generateCheckWords(_,40,4)),_},g.drawModeMessage=function(p,y,v,_){var E=hi.truncDivision(v,2);if(y)for(var w=0;w<7;w++){var D=E-3+w;_.get(w)&&p.set(D,E-5),_.get(w+7)&&p.set(E+5,D),_.get(20-w)&&p.set(D,E+5),_.get(27-w)&&p.set(E-5,D)}else for(w=0;w<10;w++)D=E-5+w+hi.truncDivision(w,5),_.get(w)&&p.set(D,E-7),_.get(w+10)&&p.set(E+7,D),_.get(29-w)&&p.set(D,E+7),_.get(39-w)&&p.set(E-7,D)},g.generateCheckWords=function(p,y,v){var _,E,w=p.getSize()/v,D=new VP(g.getGF(v)),O=hi.truncDivision(y,v),A=g.bitsToWords(p,v,O);D.encode(A,O-w);var W=y%v,q=new ds;q.appendBits(0,W);try{for(var _e=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(A)),be=_e.next();!be.done;be=_e.next())q.appendBits(be.value,v)}catch(qe){_={error:qe}}finally{try{be&&!be.done&&(E=_e.return)&&E.call(_e)}finally{if(_)throw _.error}}return q},g.bitsToWords=function(p,y,v){var E,w,_=new Int32Array(v);for(E=0,w=p.getSize()/y;E<w;E++){for(var D=0,O=0;O<y;O++)D|=p.get(E*y+O)?1<<y-O-1:0;_[E]=D}return _},g.getGF=function(p){switch(p){case 4:return ca.AZTEC_PARAM;case 6:return ca.AZTEC_DATA_6;case 8:return ca.AZTEC_DATA_8;case 10:return ca.AZTEC_DATA_10;case 12:return ca.AZTEC_DATA_12;default:throw new un("Unsupported word size "+p)}},g.stuffBits=function(p,y){for(var v=new ds,_=p.getSize(),E=(1<<y)-2,w=0;w<_;w+=y){for(var D=0,O=0;O<y;O++)(w+O>=_||p.get(w+O))&&(D|=1<<y-1-O);(D&E)===E?(v.appendBits(D&E,y),w--):0==(D&E)?(v.appendBits(1|D,y),w--):v.appendBits(D,y)}return v},g.totalBitsInLayer=function(p,y){return((y?88:112)+16*p)*p},g.DEFAULT_EC_PERCENT=33,g.DEFAULT_AZTEC_LAYERS=0,g.MAX_NB_BITS=32,g.MAX_NB_BITS_COMPACT=4,g.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),g}();const gC=xY;!function(){function g(){}g.prototype.encode=function(p,y,v,_){return this.encodeWithHints(p,y,v,_,null)},g.prototype.encodeWithHints=function(p,y,v,_,E){var w=rY.ISO_8859_1,D=gC.DEFAULT_EC_PERCENT,O=gC.DEFAULT_AZTEC_LAYERS;return null!=E&&(E.has(ki.CHARACTER_SET)&&(w=eY.forName(E.get(ki.CHARACTER_SET).toString())),E.has(ki.ERROR_CORRECTION)&&(D=hi.parseInt(E.get(ki.ERROR_CORRECTION).toString())),E.has(ki.AZTEC_LAYERS)&&(O=hi.parseInt(E.get(ki.AZTEC_LAYERS).toString()))),g.encodeLayers(p,y,v,_,w,D,O)},g.encodeLayers=function(p,y,v,_,E,w,D){if(y!==En.AZTEC)throw new un("Can only encode AZTEC, but got "+y);var O=gC.encode(Fi.getBytes(p,E),w,D);return g.renderResult(O,v,_)},g.renderResult=function(p,y,v){var _=p.getMatrix();if(null==_)throw new tu;for(var E=_.getWidth(),w=_.getHeight(),D=Math.max(y,E),O=Math.max(v,w),A=Math.min(D/E,O/w),W=(D-E*A)/2,q=(O-w*A)/2,_e=new Xa(D,O),be=0,We=q;be<w;be++,We+=A)for(var qe=0,dt=W;qe<E;qe++,dt+=A)_.get(qe,be)&&_e.setRegion(dt,We,A,A);return _e}}();var DY=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(v[E]=_[E])})(p,y)};return function(p,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),SY=function(g){function p(y){var v=g.call(this,y.width,y.height)||this;return v.canvas=y,v.tempCanvasElement=null,v.buffer=p.makeBufferFromCanvasImageData(y),v}return DY(p,g),p.makeBufferFromCanvasImageData=function(y){var v=y.getContext("2d");if(!v)throw new Error("Couldn't get canvas context.");var _=v.getImageData(0,0,y.width,y.height);return p.toGrayscaleBuffer(_.data,y.width,y.height)},p.toGrayscaleBuffer=function(y,v,_){for(var E=new Uint8ClampedArray(v*_),w=0,D=0,O=y.length;w<O;w+=4,D++){E[D]=0===y[w+3]?255:306*y[w]+601*y[w+1]+117*y[w+2]+512>>10}return E},p.prototype.getRow=function(y,v){if(y<0||y>=this.getHeight())throw new un("Requested row is outside the image: "+y);var _=this.getWidth(),E=y*_;return null===v?v=this.buffer.slice(E,E+_):(v.length<_&&(v=new Uint8ClampedArray(_)),v.set(this.buffer.slice(E,E+_))),v},p.prototype.getMatrix=function(){return this.buffer},p.prototype.isCropSupported=function(){return!0},p.prototype.crop=function(y,v,_,E){return g.prototype.crop.call(this,y,v,_,E),this},p.prototype.isRotateSupported=function(){return!0},p.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},p.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},p.prototype.invert=function(){return new fy(this)},p.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var y=this.canvas.ownerDocument.createElement("canvas");y.width=this.canvas.width,y.height=this.canvas.height,this.tempCanvasElement=y}return this.tempCanvasElement},p.prototype.rotate=function(y){var v=this.getTempCanvasElement();if(!v)throw new Error("Could not create a Canvas element.");var _=y*p.DEGREE_TO_RADIANS,E=this.canvas.width,w=this.canvas.height,D=Math.ceil(Math.abs(Math.cos(_))*E+Math.abs(Math.sin(_))*w),O=Math.ceil(Math.abs(Math.sin(_))*E+Math.abs(Math.cos(_))*w);v.width=D,v.height=O;var A=v.getContext("2d");if(!A)throw new Error("Could not create a Canvas Context element.");return A.translate(D/2,O/2),A.rotate(_),A.drawImage(this.canvas,E/-2,w/-2),this.buffer=p.makeBufferFromCanvasImageData(v),this},p.DEGREE_TO_RADIANS=Math.PI/180,p}(o0);function zP(){return"undefined"!=typeof navigator}var Yh=function(){return Yh=Object.assign||function(g){for(var p,y=1,v=arguments.length;y<v;y++)for(var _ in p=arguments[y])Object.prototype.hasOwnProperty.call(p,_)&&(g[_]=p[_]);return g},Yh.apply(this,arguments)},vo=function(g,p,y,v){return new(y||(y=Promise))(function(E,w){function D(W){try{A(v.next(W))}catch(q){w(q)}}function O(W){try{A(v.throw(W))}catch(q){w(q)}}function A(W){W.done?E(W.value):function _(E){return E instanceof y?E:new y(function(w){w(E)})}(W.value).then(D,O)}A((v=v.apply(g,p||[])).next())})},_o=function(g,p){var v,_,E,w,y={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return w={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function D(A){return function(W){return function O(A){if(v)throw new TypeError("Generator is already executing.");for(;y;)try{if(v=1,_&&(E=2&A[0]?_.return:A[0]?_.throw||((E=_.return)&&E.call(_),0):_.next)&&!(E=E.call(_,A[1])).done)return E;switch(_=0,E&&(A=[2&A[0],E.value]),A[0]){case 0:case 1:E=A;break;case 4:return y.label++,{value:A[1],done:!1};case 5:y.label++,_=A[1],A=[0];continue;case 7:A=y.ops.pop(),y.trys.pop();continue;default:if(!(E=(E=y.trys).length>0&&E[E.length-1])&&(6===A[0]||2===A[0])){y=0;continue}if(3===A[0]&&(!E||A[1]>E[0]&&A[1]<E[3])){y.label=A[1];break}if(6===A[0]&&y.label<E[1]){y.label=E[1],E=A;break}if(E&&y.label<E[2]){y.label=E[2],y.ops.push(A);break}E[2]&&y.ops.pop(),y.trys.pop();continue}A=p.call(g,y)}catch(W){A=[6,W],_=0}finally{v=E=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,W])}}},yC=function(g){var p="function"==typeof Symbol&&Symbol.iterator,y=p&&g[p],v=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&v>=g.length&&(g=void 0),{value:g&&g[v++],done:!g}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},TY={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Mc=function(){function g(p,y,v){void 0===y&&(y=new Map),void 0===v&&(v={}),this.reader=p,this.hints=y,this.options=Yh(Yh({},TY),v)}return Object.defineProperty(g.prototype,"possibleFormats",{set:function(p){this.hints.set(Ci.POSSIBLE_FORMATS,p)},enumerable:!1,configurable:!0}),g.addVideoSource=function(p,y){try{p.srcObject=y}catch(v){console.error("got interrupted by new loading request")}},g.mediaStreamSetTorch=function(p,y){return vo(this,void 0,void 0,function(){return _o(this,function(v){switch(v.label){case 0:return[4,p.applyConstraints({advanced:[{fillLightMode:y?"flash":"off",torch:!!y}]})];case 1:return v.sent(),[2]}})})},g.mediaStreamIsTorchCompatible=function(p){var y,v,_=p.getVideoTracks();try{for(var E=yC(_),w=E.next();!w.done;w=E.next())if(g.mediaStreamIsTorchCompatibleTrack(w.value))return!0}catch(O){y={error:O}}finally{try{w&&!w.done&&(v=E.return)&&v.call(E)}finally{if(y)throw y.error}}return!1},g.mediaStreamIsTorchCompatibleTrack=function(p){try{return"torch"in p.getCapabilities()}catch(v){return console.error(v),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},g.isVideoPlaying=function(p){return p.currentTime>0&&!p.paused&&p.readyState>2},g.getMediaElement=function(p,y){var v=document.getElementById(p);if(!v)throw new Ao("element with id '".concat(p,"' not found"));if(v.nodeName.toLowerCase()!==y.toLowerCase())throw new Ao("element with id '".concat(p,"' must be an ").concat(y," element"));return v},g.createVideoElement=function(p){if(p instanceof HTMLVideoElement)return p;if("string"==typeof p)return g.getMediaElement(p,"video");if(!p&&"undefined"!=typeof document){var y=document.createElement("video");return y.width=200,y.height=200,y}throw new Error("Couldn't get videoElement from videoSource!")},g.prepareImageElement=function(p){if(p instanceof HTMLImageElement)return p;if("string"==typeof p)return g.getMediaElement(p,"img");if(void 0===p){var y=document.createElement("img");return y.width=200,y.height=200,y}throw new Error("Couldn't get imageElement from imageSource!")},g.prepareVideoElement=function(p){var y=g.createVideoElement(p);return y.setAttribute("autoplay","true"),y.setAttribute("muted","true"),y.setAttribute("playsinline","true"),y},g.isImageLoaded=function(p){return!(!p.complete||0===p.naturalWidth)},g.createBinaryBitmapFromCanvas=function(p){var y=new SY(p),v=new sP(y);return new iP(v)},g.drawImageOnCanvas=function(p,y){p.drawImage(y,0,0)},g.getMediaElementDimensions=function(p){if(p instanceof HTMLVideoElement)return{height:p.videoHeight,width:p.videoWidth};if(p instanceof HTMLImageElement)return{height:p.naturalHeight||p.height,width:p.naturalWidth||p.width};throw new Error("Couldn't find the Source's dimensions!")},g.createCaptureCanvas=function(p){if(!p)throw new Ao("Cannot create a capture canvas without a media element.");if("undefined"==typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var y=document.createElement("canvas"),v=g.getMediaElementDimensions(p),_=v.width,E=v.height;return y.style.width=_+"px",y.style.height=E+"px",y.width=_,y.height=E,y},g.tryPlayVideo=function(p){return vo(this,void 0,void 0,function(){var y;return _o(this,function(v){switch(v.label){case 0:if(null==p?void 0:p.ended)return console.error("Trying to play video that has ended."),[2,!1];if(g.isVideoPlaying(p))return console.warn("Trying to play video that is already playing."),[2,!0];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,p.play()];case 2:return v.sent(),[2,!0];case 3:return y=v.sent(),console.warn("It was not possible to play the video.",y),[2,!1];case 4:return[2]}})})},g.createCanvasFromMediaElement=function(p){var y=g.createCaptureCanvas(p),v=y.getContext("2d");if(!v)throw new Error("Couldn't find Canvas 2D Context.");return g.drawImageOnCanvas(v,p),y},g.createBinaryBitmapFromMediaElem=function(p){var y=g.createCanvasFromMediaElement(p);return g.createBinaryBitmapFromCanvas(y)},g.destroyImageElement=function(p){p.src="",p.removeAttribute("src"),p=void 0},g.listVideoInputDevices=function(){return vo(this,void 0,void 0,function(){var p,y,v,_,E,w,D,O,q,_e;return _o(this,function(be){switch(be.label){case 0:if(!zP())throw new Error("Can't enumerate devices, navigator is not present.");if(!function IY(){return!(!function OY(){return zP()&&!!navigator.mediaDevices}()||!navigator.mediaDevices.enumerateDevices)}())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:p=be.sent(),y=[];try{for(v=yC(p),_=v.next();!_.done;_=v.next())"videoinput"===(w="video"===(E=_.value).kind?"videoinput":E.kind)&&(D=E.deviceId||E.id,O=E.label||"Video device ".concat(y.length+1),y.push({deviceId:D,label:O,kind:w,groupId:E.groupId}))}catch(We){q={error:We}}finally{try{_&&!_.done&&(_e=v.return)&&_e.call(v)}finally{if(q)throw q.error}}return[2,y]}})})},g.findDeviceById=function(p){return vo(this,void 0,void 0,function(){var y;return _o(this,function(v){switch(v.label){case 0:return[4,g.listVideoInputDevices()];case 1:return(y=v.sent())?[2,y.find(function(_){return _.deviceId===p})]:[2]}})})},g.cleanVideoSource=function(p){if(p){try{p.srcObject=null}catch(y){p.src=""}p&&p.removeAttribute("src")}},g.releaseAllStreams=function(){0!==g.streamTracker.length&&g.streamTracker.forEach(function(p){p.getTracks().forEach(function(y){return y.stop()})}),g.streamTracker=[]},g.playVideoOnLoadAsync=function(p,y){return vo(this,void 0,void 0,function(){return _o(this,function(_){switch(_.label){case 0:return[4,g.tryPlayVideo(p)];case 1:return _.sent()?[2,!0]:[2,new Promise(function(E,w){var D=setTimeout(function(){g.isVideoPlaying(p)||(w(!1),p.removeEventListener("canplay",O))},y),O=function(){g.tryPlayVideo(p).then(function(A){clearTimeout(D),p.removeEventListener("canplay",O),E(A)})};p.addEventListener("canplay",O)})]}})})},g.attachStreamToVideo=function(p,y,v){return void 0===v&&(v=5e3),vo(this,void 0,void 0,function(){var _;return _o(this,function(E){switch(E.label){case 0:return _=g.prepareVideoElement(y),g.addVideoSource(_,p),[4,g.playVideoOnLoadAsync(_,v)];case 1:return E.sent(),[2,_]}})})},g._waitImageLoad=function(p){return new Promise(function(y,v){var E=setTimeout(function(){g.isImageLoaded(p)||(p.removeEventListener("load",w),v())},1e4),w=function(){clearTimeout(E),p.removeEventListener("load",w),y()};p.addEventListener("load",w)})},g.checkCallbackFnOrThrow=function(p){if(!p)throw new Ao("`callbackFn` is a required parameter, you cannot capture results without it.")},g.disposeMediaStream=function(p){p.getVideoTracks().forEach(function(y){return y.stop()}),p=void 0},g.prototype.decode=function(p){var y=g.createCanvasFromMediaElement(p);return this.decodeFromCanvas(y)},g.prototype.decodeBitmap=function(p){return this.reader.decode(p,this.hints)},g.prototype.decodeFromCanvas=function(p){var y=g.createBinaryBitmapFromCanvas(p);return this.decodeBitmap(y)},g.prototype.decodeFromImageElement=function(p){return vo(this,void 0,void 0,function(){var y;return _o(this,function(v){switch(v.label){case 0:if(!p)throw new Ao("An image element must be provided.");return y=g.prepareImageElement(p),[4,this._decodeOnLoadImage(y)];case 1:return[2,v.sent()]}})})},g.prototype.decodeFromImageUrl=function(p){return vo(this,void 0,void 0,function(){var y;return _o(this,function(v){switch(v.label){case 0:if(!p)throw new Ao("An URL must be provided.");(y=g.prepareImageElement()).src=p,v.label=1;case 1:return v.trys.push([1,,3,4]),[4,this.decodeFromImageElement(y)];case 2:return[2,v.sent()];case 3:return g.destroyImageElement(y),[7];case 4:return[2]}})})},g.prototype.decodeFromConstraints=function(p,y,v){return vo(this,void 0,void 0,function(){var _,E;return _o(this,function(w){switch(w.label){case 0:return g.checkCallbackFnOrThrow(v),[4,this.getUserMedia(p)];case 1:_=w.sent(),w.label=2;case 2:return w.trys.push([2,4,,5]),[4,this.decodeFromStream(_,y,v)];case 3:return[2,w.sent()];case 4:throw E=w.sent(),g.disposeMediaStream(_),E;case 5:return[2]}})})},g.prototype.decodeFromStream=function(p,y,v){return vo(this,void 0,void 0,function(){var E,D,O,A,q,_e,We=this;return _o(this,function(qe){switch(qe.label){case 0:return g.checkCallbackFnOrThrow(v),[4,g.attachStreamToVideo(p,y,this.options.tryPlayVideoTimeout)];case 1:return E=qe.sent(),D=this.scan(E,v,function(){g.disposeMediaStream(p),g.cleanVideoSource(E)}),O=p.getVideoTracks(),A=Yh(Yh({},D),{stop:function(){D.stop()},streamVideoConstraintsApply:function(dt,gt){return vo(this,void 0,void 0,function(){var lt,Tt,Rt,ur,_r,Ur;return _o(this,function($r){switch($r.label){case 0:lt=gt?O.filter(gt):O,$r.label=1;case 1:$r.trys.push([1,6,7,8]),Tt=yC(lt),Rt=Tt.next(),$r.label=2;case 2:return Rt.done?[3,5]:[4,Rt.value.applyConstraints(dt)];case 3:$r.sent(),$r.label=4;case 4:return Rt=Tt.next(),[3,2];case 5:return[3,8];case 6:return ur=$r.sent(),_r={error:ur},[3,8];case 7:try{Rt&&!Rt.done&&(Ur=Tt.return)&&Ur.call(Tt)}finally{if(_r)throw _r.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(dt){return O.find(dt).getConstraints()},streamVideoSettingsGet:function(dt){return O.find(dt).getSettings()},streamVideoCapabilitiesGet:function(dt){return O.find(dt).getCapabilities()}}),g.mediaStreamIsTorchCompatible(p)&&(q=null==O?void 0:O.find(function(dt){return g.mediaStreamIsTorchCompatibleTrack(dt)}),A.switchTorch=_e=function(dt){return vo(We,void 0,void 0,function(){return _o(this,function(gt){switch(gt.label){case 0:return[4,g.mediaStreamSetTorch(q,dt)];case 1:return gt.sent(),[2]}})})},A.stop=function(){D.stop(),_e(!1)}),[2,A]}})})},g.prototype.decodeFromVideoDevice=function(p,y,v){return vo(this,void 0,void 0,function(){return _o(this,function(w){switch(w.label){case 0:return g.checkCallbackFnOrThrow(v),[4,this.decodeFromConstraints({video:p?{deviceId:{exact:p}}:{facingMode:"environment"}},y,v)];case 1:return[2,w.sent()]}})})},g.prototype.decodeFromVideoElement=function(p,y){return vo(this,void 0,void 0,function(){var v;return _o(this,function(E){switch(E.label){case 0:if(g.checkCallbackFnOrThrow(y),!p)throw new Ao("A video element must be provided.");return v=g.prepareVideoElement(p),[4,g.playVideoOnLoadAsync(v,this.options.tryPlayVideoTimeout)];case 1:return E.sent(),[2,this.scan(v,y)]}})})},g.prototype.decodeFromVideoUrl=function(p,y){return vo(this,void 0,void 0,function(){var v,_;return _o(this,function(D){switch(D.label){case 0:if(g.checkCallbackFnOrThrow(y),!p)throw new Ao("An URL must be provided.");return(v=g.prepareVideoElement()).src=p,_=function(){g.cleanVideoSource(v)},[4,g.playVideoOnLoadAsync(v,this.options.tryPlayVideoTimeout)];case 1:return D.sent(),[2,this.scan(v,y,_)]}})})},g.prototype.decodeOnceFromConstraints=function(p,y){return vo(this,void 0,void 0,function(){var v;return _o(this,function(_){switch(_.label){case 0:return[4,this.getUserMedia(p)];case 1:return v=_.sent(),[4,this.decodeOnceFromStream(v,y)];case 2:return[2,_.sent()]}})})},g.prototype.decodeOnceFromStream=function(p,y){return vo(this,void 0,void 0,function(){var v,_;return _o(this,function(w){switch(w.label){case 0:return v=Boolean(y),[4,g.attachStreamToVideo(p,y)];case 1:_=w.sent(),w.label=2;case 2:return w.trys.push([2,,4,5]),[4,this.scanOneResult(_)];case 3:return[2,w.sent()];case 4:return v||g.cleanVideoSource(_),[7];case 5:return[2]}})})},g.prototype.decodeOnceFromVideoDevice=function(p,y){return vo(this,void 0,void 0,function(){return _o(this,function(E){switch(E.label){case 0:return[4,this.decodeOnceFromConstraints({video:p?{deviceId:{exact:p}}:{facingMode:"environment"}},y)];case 1:return[2,E.sent()]}})})},g.prototype.decodeOnceFromVideoElement=function(p){return vo(this,void 0,void 0,function(){var y;return _o(this,function(_){switch(_.label){case 0:if(!p)throw new Ao("A video element must be provided.");return y=g.prepareVideoElement(p),[4,g.playVideoOnLoadAsync(y,this.options.tryPlayVideoTimeout)];case 1:return _.sent(),[4,this.scanOneResult(y)];case 2:return[2,_.sent()]}})})},g.prototype.decodeOnceFromVideoUrl=function(p){return vo(this,void 0,void 0,function(){var y,v;return _o(this,function(_){switch(_.label){case 0:if(!p)throw new Ao("An URL must be provided.");(y=g.prepareVideoElement()).src=p,v=this.decodeOnceFromVideoElement(y),_.label=1;case 1:return _.trys.push([1,,3,4]),[4,v];case 2:return[2,_.sent()];case 3:return g.cleanVideoSource(y),[7];case 4:return[2]}})})},g.prototype.scanOneResult=function(p,y,v,_){var E=this;return void 0===y&&(y=!0),void 0===v&&(v=!0),void 0===_&&(_=!0),new Promise(function(w,D){E.scan(p,function(O,A,W){if(O)return w(O),void W.stop();if(A){if(A instanceof Cr&&y||A instanceof $o&&v||A instanceof Hr&&_)return;W.stop(),D(A)}})})},g.prototype.scan=function(p,y,v){var _=this;g.checkCallbackFnOrThrow(y);var E=g.createCaptureCanvas(p),w=E.getContext("2d");if(!w)throw new Error("Couldn't create canvas for visual element scan.");var A,D=function(){w=void 0,E=void 0},O=!1,q={stop:function(){O=!0,clearTimeout(A),D(),v&&v()}},_e=function(){if(!O)try{g.drawImageOnCanvas(w,p);var be=_.decodeFromCanvas(E);y(be,void 0,q),A=setTimeout(_e,_.options.delayBetweenScanSuccess)}catch(gt){if(y(void 0,gt,q),gt instanceof $o||gt instanceof Hr||gt instanceof Cr)return void(A=setTimeout(_e,_.options.delayBetweenScanAttempts));D(),v&&v(gt)}};return _e(),q},g.prototype._decodeOnLoadImage=function(p){return vo(this,void 0,void 0,function(){return _o(this,function(v){switch(v.label){case 0:return g.isImageLoaded(p)?[3,2]:[4,g._waitImageLoad(p)];case 1:v.sent(),v.label=2;case 2:return[2,this.decode(p)]}})})},g.prototype.getUserMedia=function(p){return vo(this,void 0,void 0,function(){var y;return _o(this,function(v){switch(v.label){case 0:return[4,navigator.mediaDevices.getUserMedia(p)];case 1:return y=v.sent(),g.streamTracker.push(y),[2,y]}})})},g.streamTracker=[],g}(),AY=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(v[E]=_[E])})(p,y)};return function(p,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),PY=(function(g){AY(function p(y,v){return g.call(this,new _y,y,v)||this},g)}(Mc),function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(v[E]=_[E])})(p,y)};return function(p,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}()),RY=(function(g){PY(function p(y,v){return g.call(this,new Hh(y),y,v)||this},g)}(Mc),function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(v[E]=_[E])})(p,y)};return function(p,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}()),LY=(function(g){RY(function p(y,v){return g.call(this,new My,y,v)||this},g)}(Mc),function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(v[E]=_[E])})(p,y)};return function(p,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}()),NY=function(g){function p(y,v){var _=this,E=new UP;return E.setHints(y),(_=g.call(this,E,y,v)||this).reader=E,_}return LY(p,g),Object.defineProperty(p.prototype,"possibleFormats",{set:function(y){this.hints.set(Ci.POSSIBLE_FORMATS,y),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),p.prototype.decodeBitmap=function(y){return this.reader.decodeWithState(y)},p.prototype.setHints=function(y){this.hints=y,this.reader.setHints(this.hints)},p}(Mc),FY=function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(v[E]=_[E])})(p,y)};return function(p,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}(),jY=(function(g){FY(function p(y,v){return g.call(this,new Sy,y,v)||this},g)}(Mc),function(){var g=function(p,y){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(v[E]=_[E])})(p,y)};return function(p,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function v(){this.constructor=p}g(p,y),p.prototype=null===y?Object.create(y):(v.prototype=y.prototype,new v)}}()),Fu=(function(g){jY(function p(y,v){return g.call(this,new xy,y,v)||this},g)}(Mc),"http://www.w3.org/2000/svg"),GP=(function(){function g(p){if("string"==typeof p){var y=document.getElementById(p);if(!y)throw new Error("Could not find a Container element with '".concat(p,"'."));this.containerElement=y}else this.containerElement=p}g.prototype.write=function(p,y,v,_){if(0===p.length)throw new un("Found empty contents");if(y<0||v<0)throw new un("Requested dimensions are too small: "+y+"x"+v);var E=_&&void 0!==_.get(ki.MARGIN)?Number.parseInt(_.get(ki.MARGIN).toString(),10):g.QUIET_ZONE_SIZE,w=this.encode(_,p);return this.renderResult(w,y,v,E)},g.prototype.createSVGElement=function(p,y){var v=document.createElementNS(g.SVG_NS,"svg");return v.setAttributeNS(Fu,"width",y.toString()),v.setAttributeNS(Fu,"height",p.toString()),v},g.prototype.createSvgPathPlaceholderElement=function(p,y){var v=document.createElementNS(g.SVG_NS,"path");return v.setAttributeNS(Fu,"d","M0 0h".concat(p,"v").concat(y,"H0z")),v.setAttributeNS(Fu,"fill","none"),v},g.prototype.createSvgRectElement=function(p,y,v,_){var E=document.createElementNS(g.SVG_NS,"rect");return E.setAttributeNS(Fu,"x",p.toString()),E.setAttributeNS(Fu,"y",y.toString()),E.setAttributeNS(Fu,"height",v.toString()),E.setAttributeNS(Fu,"width",_.toString()),E.setAttributeNS(Fu,"fill","#000000"),E},g.prototype.encode=function(p,y){var v=Nu.L;if(p&&void 0!==p.get(ki.ERROR_CORRECTION)){var _=p.get(ki.ERROR_CORRECTION).toString();v=Nu.fromString(_)}return Iy.encode(y,v,p)},g.prototype.renderResult=function(p,y,v,_){var E=p.getMatrix();if(null===E)throw new tu;var w=E.getWidth(),D=E.getHeight(),O=w+2*_,A=D+2*_,W=Math.max(y,O),q=Math.max(v,A),_e=Math.min(Math.floor(W/O),Math.floor(q/A)),be=Math.floor((W-w*_e)/2),We=Math.floor((q-D*_e)/2),qe=this.createSVGElement(W,q),dt=this.createSvgPathPlaceholderElement(y,v);qe.appendChild(dt),this.containerElement.appendChild(qe);for(var gt=0,lt=We;gt<D;gt++,lt+=_e)for(var Tt=0,Rt=be;Tt<w;Tt++,Rt+=_e)if(1===E.get(Tt,gt)){var Xt=this.createSvgRectElement(Rt,lt,_e,_e);qe.appendChild(Xt)}return qe},g.QUIET_ZONE_SIZE=4,g.SVG_NS="http://www.w3.org/2000/svg"}(),"http://www.w3.org/2000/svg");!function(){function g(){}g.prototype.write=function(p,y,v,_){if(0===p.length)throw new un("Found empty contents");if(y<0||v<0)throw new un("Requested dimensions are too small: "+y+"x"+v);var E=Nu.L,w=g.QUIET_ZONE_SIZE;if(_){if(void 0!==_.get(ki.ERROR_CORRECTION)){var D=_.get(ki.ERROR_CORRECTION).toString();E=Nu.fromString(D)}void 0!==_.get(ki.MARGIN)&&(w=Number.parseInt(_.get(ki.MARGIN).toString(),10))}var O=Iy.encode(p,E,_);return this.renderResult(O,y,v,w)},g.prototype.writeToDom=function(p,y,v,_,E){if("string"==typeof p){var w=document.querySelector(p);if(!w)throw new Error("Could no find the target HTML element.");p=w}var D=this.write(y,v,_,E);p instanceof HTMLElement&&p.appendChild(D)},g.prototype.renderResult=function(p,y,v,_){var E=p.getMatrix();if(null===E)throw new tu;for(var w=E.getWidth(),D=E.getHeight(),O=w+2*_,A=D+2*_,W=Math.max(y,O),q=Math.max(v,A),_e=Math.min(Math.floor(W/O),Math.floor(q/A)),be=Math.floor((W-w*_e)/2),We=Math.floor((q-D*_e)/2),qe=this.createSVGElement(W,q),dt=0,gt=We;dt<D;dt++,gt+=_e)for(var lt=0,Tt=be;lt<w;lt++,Tt+=_e)if(1===E.get(lt,dt)){var Rt=this.createSvgRectElement(Tt,gt,_e,_e);qe.appendChild(Rt)}return qe},g.prototype.createSVGElement=function(p,y){var v=document.createElementNS(GP,"svg"),_=p.toString(),E=y.toString();return v.setAttribute("height",E),v.setAttribute("width",_),v.setAttribute("viewBox","0 0 "+_+" "+E),v},g.prototype.createSvgRectElement=function(p,y,v,_){var E=document.createElementNS(GP,"rect");return E.setAttribute("x",p.toString()),E.setAttribute("y",y.toString()),E.setAttribute("height",v.toString()),E.setAttribute("width",_.toString()),E.setAttribute("fill","#000000"),E},g.QUIET_ZONE_SIZE=4}();const BY=["preview"];class vC extends NY{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(p,y){var v;return $e(this,void 0,void 0,function*(){const _=new Ha({});let E;try{E=yield this.decodeFromVideoDevice(p,y,(w,D)=>{if(!D)return void _.next({result:w});const O=D.name;O===Cr.name||O===$o.name||O===Hr.name||D.message.includes("No MultiFormat Readers were able to detect the code.")?_.next({error:D}):(_.error(D),this.scannerControls.stop(),this.scannerControls=void 0)}),this.scannerControls=Object.assign(Object.assign({},E),{stop(){E.stop(),_.complete()}})}catch(w){_.error(w),null===(v=this.scannerControls)||void 0===v||v.stop(),this.scannerControls=void 0}return _.asObservable()})}}let UY=(()=>{class g{constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this._ready=!1,this.autostarted=new gi,this.autostarting=new gi,this.torchCompatible=new gi(!1),this.scanSuccess=new gi,this.scanFailure=new gi,this.scanError=new gi,this.scanComplete=new gi,this.camerasFound=new gi,this.camerasNotFound=new gi,this.permissionResponse=new gi(!0),this.hasDevices=new gi,this.deviceChange=new gi,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[En.QR_CODE],this.hasNavigator="undefined"!=typeof navigator,this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}get codeReader(){return this._codeReader}set device(y){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(y)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(y):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=y}get device(){return this._device}get formats(){return this.hints.get(Ci.POSSIBLE_FORMATS)}set formats(y){if("string"==typeof y)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const v=y.map(E=>this.getBarcodeFormatOrFail(E)),_=this.hints;_.set(Ci.POSSIBLE_FORMATS,v),this.hints=_}get hints(){return this._hints}set hints(y){var v;this._hints=y,null===(v=this.codeReader)||void 0===v||v.setHints(this._hints)}set videoConstraints(y){var v;const _=null===(v=this.codeReader)||void 0===v?void 0:v.getScannerControls();!_||null==_||_.streamVideoConstraintsApply(y)}set isAutostarting(y){this._isAutostarting=y,this.autostarting.next(y)}get isAutostarting(){return this._isAutostarting}set torch(y){try{this.getCodeReader().getScannerControls().switchTorch(y)}catch(v){}}set enable(y){this._enabled=Boolean(y),this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),vC.releaseAllStreams())}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(Ci.TRY_HARDER)}set tryHarder(y){const v=this.hints;y?v.set(Ci.TRY_HARDER,!0):v.delete(Ci.TRY_HARDER),this.hints=v}askForPermission(){return $e(this,void 0,void 0,function*(){if(!this.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),this.setPermission(null),this.hasPermission;if(!this.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),this.setPermission(null),this.hasPermission;let y,v;try{y=yield this.getAnyVideoDevice(),v=!!y}catch(_){return this.handlePermissionException(_)}finally{this.terminateStream(y)}return this.setPermission(v),v})}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(y){y&&y.getTracks().forEach(v=>v.stop()),y=void 0}init(){return $e(this,void 0,void 0,function*(){if(!this.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),this.initAutostartOff(),void(this._ready=!0);yield this.initAutostartOn(),this._ready=!0})}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){return $e(this,void 0,void 0,function*(){let y;this.isAutostarting=!0;try{y=yield this.askForPermission()}catch(v){return void console.error("Exception occurred while asking for permission:",v)}if(y){const v=yield this.updateVideoInputDevices();yield this.autostartScanner([...v])}this.isAutostarting=!1,this.autostarted.next()})}isCurrentDevice(y){var v;return(null==y?void 0:y.deviceId)===(null===(v=this._device)||void 0===v?void 0:v.deviceId)}ngOnDestroy(){this.reset(),vC.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){var y,v;this._scanSubscription&&(null===(y=this.codeReader)||void 0===y||y.getScannerControls().stop(),null===(v=this._scanSubscription)||void 0===v||v.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const y=this._reset();!y||(this.device=y)}updateVideoInputDevices(){return $e(this,void 0,void 0,function*(){const y=(yield Mc.listVideoInputDevices())||[],v=y&&y.length>0;return this.hasDevices.next(v),this.camerasFound.next([...y]),v||this.camerasNotFound.next(null),y})}autostartScanner(y){return $e(this,void 0,void 0,function*(){const _=y.find(({label:E})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(E))||y.pop();if(!_)throw new Error("Impossible to autostart, no input devices available.");yield this.setDevice(_),this.deviceChange.next(_)})}dispatchScanSuccess(y){this.scanSuccess.next(y.getText())}dispatchScanFailure(y){this.scanFailure.next(y)}dispatchScanError(y){this.scanError.observed||(console.error(`zxing scanner component: ${y.name}`,y),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(y)}dispatchScanComplete(y){this.scanComplete.next(y)}handlePermissionException(y){let v;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",y),y.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",y.message),v=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",y.message),v=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",y.message),v=null,this.hasDevices.next(!1),this.camerasNotFound.next(y);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),v=null,this.hasDevices.next(!1),this.camerasNotFound.next(y);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",y),v=null}return this.setPermission(v),this.permissionResponse.error(y),v}getBarcodeFormatOrFail(y){return"string"==typeof y?En[y.trim().toUpperCase()]:y}getCodeReader(){return this._codeReader||(this._codeReader=new vC(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(y){return $e(this,void 0,void 0,function*(){const v=this.previewElemRef.nativeElement,_=this.getCodeReader(),E=yield _.scanFromDeviceObservable(y,v);if(!E)throw new Error("Undefined decoding stream, aborting.");if(this._scanSubscription=E.subscribe(q=>this._onDecodeResult(q.result,q.error),q=>this._onDecodeError(q),()=>{}),this._scanSubscription.closed)return;const W=void 0!==_.getScannerControls().switchTorch;this.torchCompatible.next(W)})}_onDecodeError(y){this.dispatchScanError(y)}_onDecodeResult(y,v){y?this.dispatchScanSuccess(y):this.dispatchScanFailure(v),this.dispatchScanComplete(y)}_reset(){if(!this._codeReader)return;const y=this._device;return this.device=void 0,this._codeReader=void 0,y}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(y){return $e(this,void 0,void 0,function*(){this.scanStop(),this._device=y||void 0,this._device||Mc.cleanVideoSource(this.previewElemRef.nativeElement),this._enabled&&y&&(yield this.scanFromDevice(y.deviceId))})}setPermission(y){this.hasPermission=y,this.permissionResponse.next(y)}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275cmp=jl({type:g,selectors:[["zxing-scanner"]],viewQuery:function(y,v){if(1&y&&EE(BY,7),2&y){let _;Tp(_=Ap())&&(v.previewElemRef=_.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:2,consts:[["preview",""]],template:function(y,v){1&y&&(Vo(0,"video",null,0)(2,"p"),Ka(3," Your browser does not support this feature, please try to upgrade it. "),ko(),Vo(4,"p"),Ka(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),ko()()),2&y&&tE("object-fit",v.previewFitMode)},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0}),g})(),VY=(()=>{class g{}return g.\u0275fac=function(y){return new(y||g)},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({imports:[[MI,_Z]]}),g})(),kY=(()=>{class g{scanSuccess(y){alert(y)}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275cmp=jl({type:g,selectors:[["ng-component"]],decls:1,vars:0,consts:[[3,"scanSuccess"]],template:function(y,v){1&y&&(Vo(0,"zxing-scanner",0),zs("scanSuccess",function(E){return v.scanSuccess(E)}),ko())},directives:[UY],encapsulation:2}),g})();const WY=["addListener","removeListener"],ZY=["addEventListener","removeEventListener"],$Y=["on","off"];function h0(g,p,y,v){if(x(y)&&(v=y,y=void 0),v)return h0(g,p,y).pipe(lb(v));const[_,E]=function GY(g){return x(g.addEventListener)&&x(g.removeEventListener)}(g)?ZY.map(w=>D=>g[w](p,D,y)):function KY(g){return x(g.addListener)&&x(g.removeListener)}(g)?WY.map(HP(g,p)):function zY(g){return x(g.on)&&x(g.off)}(g)?$Y.map(HP(g,p)):[];if(!_&&lr(g))return Wr(w=>h0(w,p,y))(Ge(g));if(!_)throw new TypeError("Invalid event target");return new fe(w=>{const D=(...O)=>w.next(1<O.length?O:O[0]);return _(D),()=>E(D)})}function HP(g,p){return y=>v=>g[y](p,v)}const xc=new fe(Z),YY={connector:()=>new xe};function YP(g,p=YY){const{connector:y}=p;return rt((v,_)=>{const E=y();Nn(g(function HY(g){return new fe(p=>g.subscribe(p))}(E))).subscribe(_),_.add(v.subscribe(E))})}class QY extends te{constructor(p,y){super()}schedule(p,y=0){return this}}const Py={setInterval(g,p,...y){const{delegate:v}=Py;return(null==v?void 0:v.setInterval)?v.setInterval(g,p,...y):setInterval(g,p,...y)},clearInterval(g){const{delegate:p}=Py;return((null==p?void 0:p.clearInterval)||clearInterval)(g)},delegate:void 0},_C={now:()=>(_C.delegate||Date).now(),delegate:void 0};class f0{constructor(p,y=f0.now){this.schedulerActionCtor=p,this.now=y}schedule(p,y=0,v){return new this.schedulerActionCtor(this,p).schedule(v,y)}}f0.now=_C.now;const JP=new class eJ extends f0{constructor(p,y=f0.now){super(p,y),this.actions=[],this._active=!1,this._scheduled=void 0}flush(p){const{actions:y}=this;if(this._active)return void y.push(p);let v;this._active=!0;do{if(v=p.execute(p.state,p.delay))break}while(p=y.shift());if(this._active=!1,v){for(;p=y.shift();)p.unsubscribe();throw v}}}(class qY extends QY{constructor(p,y){super(p,y),this.scheduler=p,this.work=y,this.pending=!1}schedule(p,y=0){if(this.closed)return this;this.state=p;const v=this.id,_=this.scheduler;return null!=v&&(this.id=this.recycleAsyncId(_,v,y)),this.pending=!0,this.delay=y,this.id=this.id||this.requestAsyncId(_,this.id,y),this}requestAsyncId(p,y,v=0){return Py.setInterval(p.flush.bind(p,this),v)}recycleAsyncId(p,y,v=0){if(null!=v&&this.delay===v&&!1===this.pending)return y;Py.clearInterval(y)}execute(p,y){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const v=this._execute(p,y);if(v)return v;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(p,y){let _,v=!1;try{this.work(p)}catch(E){v=!0,_=E||new Error("Scheduled action threw falsy error")}if(v)return this.unsubscribe(),_}unsubscribe(){if(!this.closed){const{id:p,scheduler:y}=this,{actions:v}=y;this.work=this.state=this.scheduler=null,this.pending=!1,ie(v,this),null!=p&&(this.id=this.recycleAsyncId(y,p,null)),this.delay=null,super.unsubscribe()}}}),tJ=JP;function XP(g,p){return p?y=>kp(p.pipe(ei(1),function rJ(){return rt((g,p)=>{g.subscribe(Le(p,Z))})}()),y.pipe(XP(g))):Wr((y,v)=>g(y,v).pipe(ei(1),function nJ(g){return Te(()=>g)}(y)))}const p0="Service workers are disabled or not supported by this browser";class Ry{constructor(p){if(this.serviceWorker=p,p){const v=h0(p,"controllerchange").pipe(Te(()=>p.controller)),E=kp(Vg(()=>Zn(p.controller)),v);this.worker=E.pipe(Ya(W=>!!W)),this.registration=this.worker.pipe(Ml(()=>p.getRegistration()));const A=h0(p,"message").pipe(Te(W=>W.data)).pipe(Ya(W=>W&&W.type)).pipe(function XY(g){return g?p=>YP(g)(p):p=>function JY(g,p){const y=x(g)?g:()=>g;return x(p)?YP(p,{connector:y}):v=>new $I(v,y)}(new xe)(p)}());A.connect(),this.events=A}else this.worker=this.events=this.registration=function aJ(g){return Vg(()=>Vp(new Error(g)))}(p0)}postMessage(p,y){return this.worker.pipe(ei(1),sa(v=>{v.postMessage(Object.assign({action:p},y))})).toPromise().then(()=>{})}postMessageWithOperation(p,y,v){const _=this.waitForOperationCompleted(v),E=this.postMessage(p,y);return Promise.all([E,_]).then(([,w])=>w)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(p){let y;return y="string"==typeof p?v=>v.type===p:v=>p.includes(v.type),this.events.pipe(Ya(y))}nextEventOfType(p){return this.eventsOfType(p).pipe(ei(1))}waitForOperationCompleted(p){return this.eventsOfType("OPERATION_COMPLETED").pipe(Ya(y=>y.nonce===p),ei(1),Te(y=>{if(void 0!==y.result)return y.result;throw new Error(y.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let QP=(()=>{class g{constructor(y){if(this.sw=y,this.subscriptionChanges=new xe,!y.isEnabled)return this.messages=xc,this.notificationClicks=xc,void(this.subscription=xc);this.messages=this.sw.eventsOfType("PUSH").pipe(Te(_=>_.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Te(_=>_.data)),this.pushManager=this.sw.registration.pipe(Te(_=>_.pushManager));const v=this.pushManager.pipe(Ml(_=>_.getSubscription()));this.subscription=So(v,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(y){if(!this.sw.isEnabled)return Promise.reject(new Error(p0));const v={userVisibleOnly:!0};let _=this.decodeBase64(y.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),E=new Uint8Array(new ArrayBuffer(_.length));for(let w=0;w<_.length;w++)E[w]=_.charCodeAt(w);return v.applicationServerKey=E,this.pushManager.pipe(Ml(w=>w.subscribe(v)),ei(1)).toPromise().then(w=>(this.subscriptionChanges.next(w),w))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(ei(1),Ml(v=>{if(null===v)throw new Error("Not subscribed to push notifications.");return v.unsubscribe().then(_=>{if(!_)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(p0))}decodeBase64(y){return atob(y)}}return g.\u0275fac=function(y){return new(y||g)(_n(Ry))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})(),lJ=(()=>{class g{constructor(y){if(this.sw=y,!y.isEnabled)return this.versionUpdates=xc,this.available=xc,this.activated=xc,void(this.unrecoverable=xc);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(Ya(v=>"VERSION_READY"===v.type),Te(v=>({type:"UPDATE_AVAILABLE",current:v.currentVersion,available:v.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(p0));const y=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:y},y)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(p0));const y=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:y},y)}}return g.\u0275fac=function(y){return new(y||g)(_n(Ry))},g.\u0275prov=xt({token:g,factory:g.\u0275fac}),g})();class EC{}const qP=new pn("NGSW_REGISTER_SCRIPT");function uJ(g,p,y,v){return()=>{if(!DI(v)||!("serviceWorker"in navigator)||!1===y.enabled)return;let E;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof y.registrationStrategy)E=y.registrationStrategy();else{const[D,...O]=(y.registrationStrategy||"registerWhenStable:30000").split(":");switch(D){case"registerImmediately":E=Zn(null);break;case"registerWithDelay":E=e3(+O[0]||0);break;case"registerWhenStable":E=O[0]?So(t3(g),e3(+O[0])):t3(g);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${y.registrationStrategy}`)}}g.get(cs).runOutsideAngular(()=>E.pipe(ei(1)).subscribe(()=>navigator.serviceWorker.register(p,{scope:y.scope}).catch(D=>console.error("Service worker registration failed with:",D))))}}function e3(g){return Zn(null).pipe(function sJ(g,p=JP){const y=function oJ(g=0,p,y=tJ){let v=-1;return null!=p&&(co(p)?y=p:v=p),new fe(_=>{let E=function iJ(g){return g instanceof Date&&!isNaN(g)}(g)?+g-y.now():g;E<0&&(E=0);let w=0;return y.schedule(function(){_.closed||(_.next(w++),0<=v?this.schedule(void 0,v):_.complete())},E)})}(g,p);return XP(()=>y)}(g))}function t3(g){return g.get(Eg).isStable.pipe(Ya(y=>y))}function cJ(g,p){return new Ry(DI(p)&&!1!==g.enabled?navigator.serviceWorker:void 0)}let dJ=(()=>{class g{static register(y,v={}){return{ngModule:g,providers:[{provide:qP,useValue:y},{provide:EC,useValue:v},{provide:Ry,useFactory:cJ,deps:[EC,Lp]},{provide:_g,useFactory:uJ,deps:[Is,qP,EC,Lp],multi:!0}]}}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({providers:[QP,lJ]}),g})();class hJ extends xe{constructor(p=1/0,y=1/0,v=_C){super(),this._bufferSize=p,this._windowTime=y,this._timestampProvider=v,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=y===1/0,this._bufferSize=Math.max(1,p),this._windowTime=Math.max(1,y)}next(p){const{isStopped:y,_buffer:v,_infiniteTimeWindow:_,_timestampProvider:E,_windowTime:w}=this;y||(v.push(p),!_&&v.push(E.now()+w)),this._trimBuffer(),super.next(p)}_subscribe(p){this._throwIfClosed(),this._trimBuffer();const y=this._innerSubscribe(p),{_infiniteTimeWindow:v,_buffer:_}=this,E=_.slice();for(let w=0;w<E.length&&!p.closed;w+=v?1:2)p.next(E[w]);return this._checkFinalizedStatuses(p),y}_trimBuffer(){const{_bufferSize:p,_timestampProvider:y,_buffer:v,_infiniteTimeWindow:_}=this,E=(_?1:2)*p;if(p<1/0&&E<v.length&&v.splice(0,v.length-E),!_){const w=y.now();let D=0;for(let O=1;O<v.length&&v[O]<=w;O+=2)D=O;D&&v.splice(0,D+1)}}}function mJ(g,p){return g===p}const qa=new pn("An abstraction over global window object",{factory:()=>{const{defaultView:g}=oo(ia);if(!g)throw new Error("Window is not available");return g}}),Ly=(new pn("Shared Observable based on `window.requestAnimationFrame`",{factory:()=>{const{requestAnimationFrame:g,cancelAnimationFrame:p}=oo(qa);return new fe(v=>{let _=NaN;const E=w=>{v.next(w),_=g(E)};return _=g(E),()=>{p(_)}}).pipe(Ve())}}),new pn("An abstraction over window.caches object",{factory:()=>oo(qa).caches}),new pn("An abstraction over window.crypto object",{factory:()=>oo(qa).crypto}),new pn("An abstraction over window.CSS object",{factory:()=>oo(qa).CSS||{escape:g=>g,supports:()=>!1}}),new pn("An abstraction over window.history object",{factory:()=>oo(qa).history}),new pn("An abstraction over window.localStorage object",{factory:()=>oo(qa).localStorage}),new pn("An abstraction over window.location object",{factory:()=>oo(qa).location}),new pn("An abstraction over window.navigator object",{factory:()=>oo(qa).navigator})),bC=(new pn("An abstraction over window.navigator.mediaDevices object",{factory:()=>oo(Ly).mediaDevices}),new pn("An abstraction over window.navigator.connection object",{factory:()=>oo(Ly).connection||null}),new pn("Shared Observable based on `document visibility changed`",{factory:()=>{const g=oo(ia);return h0(g,"visibilitychange").pipe(KI(0),Te(()=>"hidden"!==g.visibilityState),function pJ(g,p=ue){return g=null!=g?g:mJ,rt((y,v)=>{let _,E=!0;y.subscribe(Le(v,w=>{const D=p(w);(E||!g(_,D))&&(E=!1,_=D,v.next(w))}))})}(),Ve())}}),new pn("An abstraction over window.performance object",{factory:()=>oo(qa).performance}),new pn("An abstraction over window.sessionStorage object",{factory:()=>oo(qa).sessionStorage}),new pn("An abstraction over SpeechRecognition class",{factory:()=>{const g=oo(qa);return g.speechRecognition||g.webkitSpeechRecognition||null}}),new pn("An abstraction over window.speechSynthesis object",{factory:()=>oo(qa).speechSynthesis}),new pn("An abstraction over window.navigator.userAgent object",{factory:()=>oo(Ly).userAgent}),new pn("An abstraction over window.navigator.geolocation object",{factory:()=>oo(Ly).geolocation})),r3=new pn("Token for an additional position options",{factory:()=>({})}),n3=new pn("Is Geolocation API supported?",{factory:()=>!!oo(bC)});class ju extends fe{constructor(p,y,v){let _=0;return super(E=>{y||E.error("Geolocation is not supported in your browser"),_=p.watchPosition(w=>E.next(w),w=>E.error(w),v)}),this.pipe(YI(()=>p.clearWatch(_)),function fJ(g,p,y){let v,_=!1;return g&&"object"==typeof g?({bufferSize:v=1/0,windowTime:p=1/0,refCount:_=!1,scheduler:y}=g):v=null!=g?g:1/0,Ve({connector:()=>new hJ(v,p,y),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:_})}({bufferSize:1,refCount:!0}))}}ju.\u0275fac=function(p){return new(p||ju)(_n(bC),_n(n3),_n(r3))},ju.\u0275prov=xt({token:ju,factory:ju.\u0275fac,providedIn:"root"}),ju.ngInjectableDef=vt({factory:function(){return new ju(oo(bC),oo(n3),oo(r3))},token:ju,providedIn:"root"});let gJ=(()=>{class g{constructor(y,v){this.swPush=y,this.geolocation$=v}performGeolocation(){this.geolocation$.pipe(ei(1)).subscribe(y=>alert(this.objToString(y)))}objToString(y){return"Latitude: "+y.coords.latitude+"\nLongitude: "+y.coords.longitude+"\nAccuracy: "+y.coords.accuracy+"\nAltitude: "+y.coords.altitude+"\nAltitude accuracy: "+y.coords.altitudeAccuracy}}return g.\u0275fac=function(y){return new(y||g)(Lr(QP),Lr(ju))},g.\u0275cmp=jl({type:g,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"card",3,"click"]],template:function(y,v){1&y&&(Vo(0,"a",0),zs("click",function(){return v.performGeolocation()}),Vo(1,"span"),Ka(2,"TEST"),ko()())},encapsulation:2}),g})();var MC,qr=C(15861),we=C(17626),yJ=C(24263),CC=C(73386),Jh=C(91558),eo=C(7093),vJ=C(89726),_J=C(94573),sn=C(26584),Hi=C(86162),ha=C(58817),m0=C(47996),i3=C(47877),Eo=C(63290),ni=C(10699),Re=C(77712),Xh=C(90912),Tr=C(76898),Pa=C(99433),o3=C(85931),Dc=C(8314),wC=(C(82255),C(55342));let Ny=MC=class extends Hi.wq{constructor(g){super(g),this.type="none"}clone(){return new MC({type:this.type})}};(0,we._)([(0,wC.J)({none:"none",stayAbove:"stay-above"})],Ny.prototype,"type",void 0),Ny=MC=(0,we._)([(0,Tr.j)("esri.ground.NavigationConstraint")],Ny);var xC,s3=C(92236);const a3=Eo.Z.getLogger("esri.Ground");let Bu=xC=class extends((0,Hi.eC)(m0.Z)){constructor(g){super(g),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new eo.Z;const p=v=>{v.parent&&v.parent!==this&&"remove"in v.parent&&v.parent.remove(v),v.parent=this,"elevation"!==v.type&&"base-elevation"!==v.type&&a3.error(`Layer '${v.title}, id:${v.id}' of type '${v.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",v=>p(v.item)),this.layers.on("after-remove",v=>(v=>{v.parent=null})(v.item))}initialize(){this.when().catch(g=>{a3.error("#load()","Failed to load ground",g)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const g=this.layers.removeAll();for(const p of g)p.destroy();this.layers.destroy()}normalizeCtorArgs(g){return g&&"resourceInfo"in g&&(this._set("resourceInfo",g.resourceInfo),delete(g=Ot({},g)).resourceInfo),g}set layers(g){this._set("layers",(0,vJ.Z)(g,this._get("layers")))}writeLayers(g,p,y,v){const _=[];g&&(v=nn(Ot({},v),{layerContainerType:"ground"}),g.forEach(E=>{if("write"in E){const w={};(0,_J.sM)(E)().write(w,v)&&_.push(w)}else v&&v.messages&&v.messages.push(new sn.Z("layer:unsupported",`Layers (${E.title}, ${E.id}) of type '${E.declaredClass}' cannot be persisted in the ground`,{layer:E}))})),p.layers=_}load(g){return this.addResolvingPromise(this._loadFromSource(g)),Promise.resolve(this)}loadAll(){return(0,i3.GZ)(this,g=>{g(this.layers)})}queryElevation(g,p){var y=this;return(0,qr.Z)(function*(){yield y.load({signal:null==p?void 0:p.signal});const{ElevationQuery:v}=yield C.e(1991).then(C.bind(C,1991));(0,ni.k_)(p);const _=new v,E=y.layers.filter(l3).toArray();return _.queryAll(E,g,p)})()}createElevationSampler(g,p){var y=this;return(0,qr.Z)(function*(){yield y.load({signal:null==p?void 0:p.signal});const{ElevationQuery:v}=yield C.e(1991).then(C.bind(C,1991));(0,ni.k_)(p);const _=new v,E=y.layers.filter(l3).toArray();return _.createSamplerAll(E,g,p)})()}clone(){const g={opacity:this.opacity,surfaceColor:(0,ha.d9)(this.surfaceColor),navigationConstraint:(0,ha.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(g.loadStatus="loaded"),new xC({resourceInfo:this.resourceInfo}).set(g)}read(g,p){this.resourceInfo||this._set("resourceInfo",{data:g,context:p}),super.read(g,p)}_loadFromSource(g){const p=this.resourceInfo;return p?this._loadLayersFromJSON(p.data,p.context,g):Promise.resolve(null)}_loadLayersFromJSON(g,p,y){const v=p&&p.origin||"web-scene",_=p&&p.portal||null,E=p&&p.url||null;return Promise.all([C.e(7534),C.e(1074)]).then(C.bind(C,71074)).then(({populateOperationalLayers:w})=>{(0,ni.k_)(y);const D=[];return g.layers&&Array.isArray(g.layers)&&D.push(w(this.layers,g.layers,{context:{origin:v,url:E,portal:_,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"})),(0,ni.as)(D)}).then(()=>{})}};function l3(g){return"elevation"===g.type||function EJ(g){return g&&"createElevationSampler"in g}(g)}(0,we._)([(0,Re.Cb)({json:{read:!1}})],Bu.prototype,"layers",null),(0,we._)([(0,Pa.c)("layers")],Bu.prototype,"writeLayers",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Bu.prototype,"resourceInfo",void 0),(0,we._)([(0,Re.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Xh.z8,read:{reader:s3.b,source:"transparency"},write:{writer:(g,p)=>{p.transparency=(0,s3.a)(g)},target:"transparency"}}})],Bu.prototype,"opacity",void 0),(0,we._)([(0,Re.Cb)({type:Jh.Z,json:{type:[Xh.z8],write:(g,p)=>{p.surfaceColor=g.toJSON().slice(0,3)}}})],Bu.prototype,"surfaceColor",void 0),(0,we._)([(0,Re.Cb)({type:Ny,json:{write:!0}})],Bu.prototype,"navigationConstraint",void 0),Bu=xC=(0,we._)([(0,Tr.j)("esri.Ground")],Bu);const Fy=Bu;var pi=C(14517),Qh=C(46882),qh=C(61885),dr=C(62208),fa=C(66656);function bJ(g){var p;return!(!(g&&g.loaded&&"capabilities"in g&&null!=g&&null!=(p=g.capabilities)&&p.operations&&"supportsEditing"in g.capabilities.operations&&!0===g.capabilities.operations.supportsEditing)||"editingEnabled"in g&&!g.editingEnabled)}var u3=C(59318),Sc=C(21726),c3=C(33954);const d3=Eo.Z.getLogger("esri.support.basemapUtils");function p3(g){if(m3(g.url))return!0;if("vector-tile"===g.type)for(const p in g.sourceNameToSource){const y=g.sourceNameToSource[p];if(m3(null==y?void 0:y.sourceUrl))return!0}return!1}const xJ=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function m3(g){if(!g)return!1;const p=new Sc.R9((0,Sc.hF)(g));return xJ.test(p.authority)}const SJ=Eo.Z.getLogger("esri.support.groundUtils"),w3={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var IJ=C(6432),TJ=C(6119);let nu=class extends((0,TJ.Q)((0,IJ.K)(qh.Z.EventedMixin(pi.Z)))){constructor(g){super(g),this.allLayers=new Qh.Z({getCollections:()=>{var p,y,v;return[null==(p=this.basemap)?void 0:p.baseLayers,null==(y=this.ground)?void 0:y.layers,this.layers,null==(v=this.basemap)?void 0:v.referenceLayers]},getChildrenFunction:p=>"layers"in p?p.layers:null}),this.allTables=new Qh.Z({getCollections:()=>[this.tables,this.layers],getChildrenFunction:p=>{const y=[];return"tables"in p&&y.push(p.tables),"layers"in p&&y.push(p.layers),y},itemFilterFunction:p=>{const y=p.parent;return y&&"tables"in y&&y.tables.includes(p)}}),this.basemap=null,this.editableLayers=new Qh.Z({getCollections:()=>[this.allLayers],itemFilterFunction:bJ}),this.ground=new Fy,this._basemapCache={}}destroy(){var g,p;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(g=this.ground)||g.destroy(),null==(p=this.basemap)||p.destroy(),function wJ(g){for(const p in g){const y=g[p];!1===(null==y?void 0:y.destroyed)&&y.destroy(),delete g[p]}}(this._basemapCache),this._basemapCache=null}castBasemap(g){return function h3(g,p){var y;let v;if("string"==typeof g){if(!(g in c3.s)){const _=Object.entries(c3.s).filter(([E,w])=>u3.Z.apiKey&&!w.classic||!u3.Z.apiKey&&w.classic&&!w.deprecated).map(([E])=>`"${E}"`).join(", ");return d3.warn(`Unable to find basemap definition for: ${g}. Try one of these: ${_}`),null}p&&(v=p[g]),v||(v=CC.default.fromId(g),p&&(p[g]=v))}else v=(0,Xh.se)(CC.default,g);return null!=(y=v)&&y.destroyed&&(d3.warn("The provided basemap is already destroyed",{basemap:v}),v=null),v}(g,this._basemapCache)}castGround(g){const p=function OJ(g){let p=null;return"string"==typeof g?g in w3?p=new Fy({resourceInfo:{data:{layers:[w3[g]]}}}):SJ.warn(`Unable to find ground definition for: ${g}. Try "world-elevation"`):p=(0,Xh.se)(Fy,g),p}(g);return(0,dr.Wi)(p)?this._get("ground"):p}findLayerById(g){return this.allLayers.find(p=>p.id===g)}findTableById(g){return this.allTables.find(p=>p.id===g)}};(0,we._)([(0,Re.Cb)({readOnly:!0,dependsOn:[]})],nu.prototype,"allLayers",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],nu.prototype,"allTables",void 0),(0,we._)([(0,Re.Cb)({type:CC.default})],nu.prototype,"basemap",void 0),(0,we._)([(0,fa.p)("basemap")],nu.prototype,"castBasemap",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],nu.prototype,"editableLayers",void 0),(0,we._)([(0,Re.Cb)({type:Fy,nonNullable:!0})],nu.prototype,"ground",void 0),(0,we._)([(0,fa.p)("ground")],nu.prototype,"castGround",null),nu=(0,we._)([(0,Tr.j)("esri.Map")],nu);const M3=nu;var Qs=C(76687),jy=C(99959),OC=C(60330),Br=C(27e3),Uu=C(68653),AJ=C(52489),PJ=C(29338),Oc=C(65234),iu=C(46367),By=C(38305),Uy=C(84792),Ic=C(2004);const RJ=Eo.Z.getLogger("esri.networks.Network");let fs=class extends((0,jy.R)(m0.Z)){constructor(g){super(g),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null}initialize(){this.when().catch(g=>{var p,y;(0,ni.D_)(g)||RJ.error("#load()",`Failed to load layer (title: '${null!=(p=this.title)?p:"no title"}', id: '${null!=(y=this.id)?y:"no id"}')`,{error:g})})}get datasetName(){var g;return null==(g=this.dataElement)?void 0:g.name}get owner(){var g;return null==(g=this.dataElement)?void 0:g.userIdentity}get schemaGeneration(){var g;return null==(g=this.dataElement)?void 0:g.schemaGeneration}get parsedUrl(){const g=this.layerUrl;return g?(0,Sc.mN)(g):null}get featureServiceUrl(){const g=this.parsedUrl&&(0,By.Qc)(this.parsedUrl.path);return(0,dr.pC)(g)?g.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const g=this.parsedUrl&&(0,By.Qc)(this.parsedUrl.path);return(0,dr.pC)(g)?g.sublayer:null}load(g){var p=this;return(0,qr.Z)(function*(){return p.addResolvingPromise(p._fetchDataElement(p.featureServiceUrl,p.layerId.toString(),g)),p.addResolvingPromise(p._fetchLayerMetaData(p.layerUrl,g)),p})()}getLayerIdBySourceId(g){if(this.dataElement){const p=this.dataElement.domainNetworks;for(const y of p){for(const v of y.edgeSources?y.edgeSources:[])if(v.sourceId===g)return v.layerId;for(const v of y.junctionSources?y.junctionSources:[])if(v.sourceId===g)return v.layerId}return null}return null}_fetchLayerMetaData(g,p){var y=this;return(0,qr.Z)(function*(){const v=yield(0,Uy.default)(g,Ot({responseType:"json",query:{f:"json"}},p));y.sourceJSON=v.data,y.read(v.data,{origin:"service"})})()}_fetchDataElement(g,p,y){var v=this;return(0,qr.Z)(function*(){if(v.dataElement)return;const _=yield(0,Uy.default)(`${g}/queryDataElements`,Ot({responseType:"json",query:{layers:JSON.stringify([p]),f:"json"}},y)).then(E=>{var w;return null==(w=E.data.layerDataElements)?void 0:w[0]});_&&v.read(_,{origin:"service"})})()}};(0,we._)([(0,Re.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],fs.prototype,"id",void 0),(0,we._)([(0,Re.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],fs.prototype,"title",void 0),(0,we._)([(0,Re.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],fs.prototype,"layerUrl",void 0),(0,we._)([(0,Re.Cb)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],fs.prototype,"dataElement",void 0),(0,we._)([(0,Re.Cb)({type:Ic.Z,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],fs.prototype,"fullExtent",void 0),(0,we._)([(0,Re.Cb)({type:Oc.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],fs.prototype,"spatialReference",void 0),(0,we._)([(0,Re.Cb)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],fs.prototype,"type",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],fs.prototype,"datasetName",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],fs.prototype,"owner",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],fs.prototype,"schemaGeneration",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],fs.prototype,"parsedUrl",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],fs.prototype,"featureServiceUrl",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],fs.prototype,"networkServiceUrl",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],fs.prototype,"layerId",null),(0,we._)([(0,Re.Cb)()],fs.prototype,"sourceJSON",void 0),fs=(0,we._)([(0,Tr.j)("esri.networks.Network")],fs);const LJ=fs;let el=class extends Hi.wq{constructor(g){super(g),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],el.prototype,"conditionBarriers",void 0),(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],el.prototype,"outputConditions",void 0),(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],el.prototype,"functions",void 0),(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],el.prototype,"functionBarriers",void 0),(0,we._)([(0,Re.Cb)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],el.prototype,"traversabilityScope",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],el.prototype,"shortestPathNetworkAttributeName",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],el.prototype,"includeBarriers",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],el.prototype,"validateConsistency",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],el.prototype,"ignoreBarriersAtStartingPoints",void 0),el=(0,we._)([(0,Tr.j)("esri.networks.support.TraceConfiguration")],el);const IC=el;var TC=C(2076);const AC=new TC.Xn({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});let Po=class extends IC{constructor(g){super(g),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],Po.prototype,"filterBarriers",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Po.prototype,"domainNetworkName",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Po.prototype,"filterBitsetNetworkAttributeName",void 0),(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],Po.prototype,"filterFunctionBarriers",void 0),(0,we._)([(0,Re.Cb)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Po.prototype,"filterScope",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],Po.prototype,"includeContainers",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],Po.prototype,"includeContent",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],Po.prototype,"includeIsolated",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],Po.prototype,"includeStructures",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],Po.prototype,"includeUpToFirstSpatialContainer",void 0),(0,we._)([(0,Re.Cb)({type:Object,json:{write:!0}})],Po.prototype,"nearestNeighbor",void 0),(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],Po.prototype,"outputFilterCategories",void 0),(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],Po.prototype,"outputFilters",void 0),(0,we._)([(0,Re.Cb)({type:[Object],json:{write:!0}})],Po.prototype,"propagators",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Po.prototype,"subnetworkName",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Po.prototype,"targetTierName",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Po.prototype,"tierName",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],Po.prototype,"validateLocatability",void 0),Po=(0,we._)([(0,Tr.j)("esri.networks.support.UNTraceConfiguration")],Po);const NJ=Po;let pa=class extends jy.w{constructor(g){super(g),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(g,p){return void 0!==g.tierName?NJ.fromJSON(g):IC.fromJSON(g)}};(0,we._)([(0,Re.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],pa.prototype,"globalId",void 0),(0,we._)([(0,Re.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],pa.prototype,"title",void 0),(0,we._)([(0,Re.Cb)({type:IC,json:{origins:{service:{read:!0}},read:!1}})],pa.prototype,"traceConfiguration",void 0),(0,we._)([(0,Uu.r)("service","traceConfiguration")],pa.prototype,"readTraceConfiguration",null),(0,we._)([(0,Re.Cb)({type:Date,json:{origins:{service:{read:!0}},read:!1}})],pa.prototype,"creationDate",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{origins:{service:{read:!0}},read:!1}})],pa.prototype,"creator",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{origins:{service:{read:!0}},read:!1}})],pa.prototype,"description",void 0),(0,we._)([(0,Re.Cb)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],pa.prototype,"minStartingPoints",void 0),(0,we._)([(0,Re.Cb)({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],pa.prototype,"resultTypes",void 0),(0,we._)([(0,Re.Cb)({type:[String],json:{origins:{service:{read:!0}},read:!1}})],pa.prototype,"tags",void 0),(0,we._)([(0,Re.Cb)({type:AC.apiValues,json:{type:AC.jsonValues,origins:{service:{read:AC.read}},read:!1}})],pa.prototype,"traceType",void 0),pa=(0,we._)([(0,Tr.j)("esri.networks.support.NamedTraceConfiguration")],pa);const FJ=pa;let ef=class extends Hi.wq{constructor(g){super(g),this.id=null,this.name=null}};(0,we._)([(0,Re.Cb)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],ef.prototype,"id",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],ef.prototype,"name",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],ef.prototype,"isUpstreamTerminal",void 0),ef=(0,we._)([(0,Tr.j)("esri.networks.support.Terminal")],ef);const jJ=ef,Vy=new TC.Xn({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Tc=class extends Hi.wq{constructor(g){super(g),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Tc.prototype,"defaultConfiguration",void 0),(0,we._)([(0,Re.Cb)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Tc.prototype,"id",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Tc.prototype,"name",void 0),(0,we._)([(0,Re.Cb)({type:[jJ],json:{write:!0}})],Tc.prototype,"terminals",void 0),(0,we._)([(0,Re.Cb)({type:Vy.apiValues,json:{type:Vy.jsonValues,read:Vy.read,write:Vy.write}})],Tc.prototype,"traversabilityModel",void 0),Tc=(0,we._)([(0,Tr.j)("esri.networks.support.TerminalConfiguration")],Tc);const x3=Tc;let ou=class extends LJ{constructor(g){super(g),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var g;return null==(g=this.dataElement)?void 0:g.serviceTerritoryFeatureLayerId}get rulesTableId(){var g;return null==(g=this.sourceJSON)?void 0:g.systemLayers.rulesTableId}get rulesTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null}get terminalConfigurations(){var g;return(null==(g=this.dataElement)?void 0:g.terminalConfigurations.map(p=>x3.fromJSON(p)))||[]}get domainNetworkNames(){var g;return(null==(g=this.dataElement)?void 0:g.domainNetworks.map(p=>p.domainNetworkName))||[]}load(g){var p=()=>super.load,y=this;return(0,qr.Z)(function*(){return y.addResolvingPromise(p().call(y,g)),y.addResolvingPromise(y._loadNamedTraceConfigurationsFromNetwork(g)),y})()}getTerminalConfiguration(g){let p=null,y=null;const v=g.layer;let _=null;if("feature"!==(null==v?void 0:v.type)||(_=v.layerId,null===_))return null;const E=g.attributes;if(null==E)return null;for(const q of Object.keys(E))"ASSETGROUP"===q.toUpperCase()&&(p=g.getAttribute(q)),"ASSETTYPE"===q.toUpperCase()&&(y=g.getAttribute(q));if(!this.dataElement)return null;let w=null;const D=this.dataElement.domainNetworks;for(const q of D){var O;const _e=null==(O=q.junctionSources)?void 0:O.find(be=>be.layerId===_);if(_e){var A;const be=null==(A=_e.assetGroups)?void 0:A.find(We=>We.assetGroupCode===p);if(be){var W;const We=null==(W=be.assetTypes)?void 0:W.find(qe=>qe.assetTypeCode===y);if(We){w=We.terminalConfigurationId;break}}}}if(null!=w){const q=this.dataElement.terminalConfigurations,_e=null==q?void 0:q.find(be=>be.terminalConfigurationId===w);return _e?x3.fromJSON(_e):null}return null}getTierNames(g){var p;const y=null==(p=this.dataElement)?void 0:p.domainNetworks.find(v=>v.domainNetworkName===g);return(null==y?void 0:y.tiers.map(v=>v.name))||[]}_loadNamedTraceConfigurationsFromNetwork(g){var p=this;return(0,qr.Z)(function*(){var y;if(0===(null==(y=p.sharedNamedTraceConfigurations)?void 0:y.length))return;const v=p.sharedNamedTraceConfigurations.map(E=>E.globalId),_=yield p._fetchTraceConfigData(p.networkServiceUrl,v,g);for(const E of p.sharedNamedTraceConfigurations){const w=null==_?void 0:_.find(D=>D.globalId===E.globalId);w&&E.read(w,{origin:"service"})}})()}_fetchTraceConfigData(g,p,y){return(0,Uy.default)(`${g}/traceConfigurations/query`,Ot({responseType:"json",query:{globalIds:JSON.stringify(p),f:"json"}},y)).then(v=>v.data.traceConfigurations)}};(0,we._)([(0,Re.Cb)({type:[FJ],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],ou.prototype,"sharedNamedTraceConfigurations",void 0),(0,we._)([(0,Re.Cb)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],ou.prototype,"type",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ou.prototype,"serviceTerritoryFeatureLayerId",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ou.prototype,"rulesTableId",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ou.prototype,"rulesTableUrl",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ou.prototype,"terminalConfigurations",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ou.prototype,"domainNetworkNames",null),ou=(0,we._)([(0,Tr.j)("esri.networks.UtilityNetwork")],ou);const BJ=ou;var ky=C(84687),D3=C(55463),Ro=C(37281),S3=C(39636),O3=C(77294);let Ac=class extends Hi.wq{constructor(g){super(g),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Ac.prototype,"facilityIdField",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Ac.prototype,"layerId",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Ac.prototype,"nameField",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Ac.prototype,"siteIdField",void 0),(0,we._)([(0,Re.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Ac.prototype,"sublayerId",void 0),Ac=(0,we._)([(0,Tr.j)("esri.layers.support.FacilityLayerInfo")],Ac);const UJ=Ac;let Sl=class extends Hi.wq{constructor(g){super(g),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Sl.prototype,"facilityIdField",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Sl.prototype,"layerId",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Sl.prototype,"levelIdField",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Sl.prototype,"levelNumberField",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Sl.prototype,"longNameField",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Sl.prototype,"shortNameField",void 0),(0,we._)([(0,Re.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Sl.prototype,"sublayerId",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Sl.prototype,"verticalOrderField",void 0),Sl=(0,we._)([(0,Tr.j)("esri.layers.support.LevelLayerInfo")],Sl);const VJ=Sl;let Od=class extends Hi.wq{constructor(g){super(g),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Od.prototype,"layerId",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Od.prototype,"nameField",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],Od.prototype,"siteIdField",void 0),(0,we._)([(0,Re.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Od.prototype,"sublayerId",void 0),Od=(0,we._)([(0,Tr.j)("esri.layers.support.SiteLayerInfo")],Od);const kJ=Od;let tf=class extends Hi.wq{constructor(g){super(g),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};(0,we._)([(0,Re.Cb)({type:VJ,json:{write:!0}})],tf.prototype,"levelLayer",void 0),(0,we._)([(0,Re.Cb)({type:UJ,json:{write:!0}})],tf.prototype,"facilityLayer",void 0),(0,we._)([(0,Re.Cb)({type:kJ,json:{write:!0}})],tf.prototype,"siteLayer",void 0),tf=(0,we._)([(0,Tr.j)("esri.support.MapFloorInfo")],tf);const WJ=tf;var PC;let rf=PC=class extends Hi.wq{constructor(g){super(g),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new PC((0,ha.d9)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};(0,we._)([(0,Re.Cb)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],rf.prototype,"activeRange",void 0),(0,we._)([(0,Re.Cb)({type:[Number],json:{write:!0}})],rf.prototype,"currentRangeExtent",void 0),(0,we._)([(0,Re.Cb)({type:[Number],json:{write:!0}})],rf.prototype,"fullRangeExtent",void 0),rf=PC=(0,we._)([(0,Tr.j)("esri.webdoc.RangeInfo")],rf);const RC=rf;var LC;let su=LC=class extends Hi.wq{constructor(g){super(g),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new LC((0,ha.d9)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};(0,we._)([(0,Re.Cb)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],su.prototype,"enabled",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],su.prototype,"longNames",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],su.prototype,"minimized",void 0),(0,we._)([(0,Re.Cb)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],su.prototype,"pinnedLevels",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],su.prototype,"site",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],su.prototype,"facility",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],su.prototype,"level",void 0),su=LC=(0,we._)([(0,Tr.j)("esri.webdoc.widgets.FloorFilter")],su);const ZJ=su;var NC;const Wy=new TC.Xn({slider:"slider",picker:"picker"});let nf=NC=class extends Hi.wq{constructor(g){super(g),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new NC({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};(0,we._)([(0,Re.Cb)({type:Wy.apiValues,nonNullable:!0,json:{type:Wy.jsonValues,default:null,read:{reader:Wy.read},write:{isRequired:!0,writer:Wy.write}}})],nf.prototype,"interactionMode",void 0),(0,we._)([(0,Re.Cb)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const g=null!=this.stopInterval;return{enabled:!g,isRequired:!g}}}}})],nf.prototype,"numStops",void 0),(0,we._)([(0,Re.Cb)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],nf.prototype,"stopInterval",void 0),nf=NC=(0,we._)([(0,Tr.j)("esri.webdoc.widgets.Range")],nf);const $J=nf;var jC,of=C(97478),I3=C(20849),FC=C(94113);let rs=jC=class extends Hi.wq{constructor(g){super(g),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(g){if(!g)return;const p=null!=g[0]?new Date(g[0]):null,y=null!=g[1]?new Date(g[1]):null;return new of.Z({start:p,end:y})}writeCurrentTimeExtent(g,p,y){g&&(0,FC.RB)(y,[(0,dr.pC)(g.start)?g.start.getTime():null,(0,dr.pC)(g.end)?g.end.getTime():null],p)}readFullTimeExtent(g,p){const y=p.properties;if(!y)return;const v=null!=y.endTime?new Date(y.endTime):null,_=null!=y.startTime?new Date(y.startTime):null;return new of.Z({start:_,end:v})}writeFullTimeExtent(g,p){if(!g)return;const y=p.properties=p.properties||{},v=g.end,_=g.start;v&&(y.endTime=(0,dr.pC)(v)?v.getTime():null),_&&(y.startTime=(0,dr.pC)(_)?_.getTime():null)}readStopInterval(g,p,y){return g?I3.Z.fromJSON({value:g.interval,unit:g.units},y):null}writeStopInterval(g,p,y,v){if(!g)return;const _=g.toJSON(v);(0,FC.RB)(y,{interval:_.value,units:_.unit},p)}readStops(g){return g&&g.length?g.map(p=>new Date(p)):null}writeStops(g,p,y){g&&g.length&&(0,FC.RB)(y,g.map(v=>v.getTime()),p)}clone(){return new jC((0,ha.d9)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};(0,we._)([(0,Re.Cb)({type:of.Z,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],rs.prototype,"currentTimeExtent",void 0),(0,we._)([(0,Uu.r)("currentTimeExtent")],rs.prototype,"readCurrentTimeExtent",null),(0,we._)([(0,Pa.c)("currentTimeExtent")],rs.prototype,"writeCurrentTimeExtent",null),(0,we._)([(0,Re.Cb)({type:of.Z,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],rs.prototype,"fullTimeExtent",void 0),(0,we._)([(0,Uu.r)("fullTimeExtent")],rs.prototype,"readFullTimeExtent",null),(0,we._)([(0,Pa.c)("fullTimeExtent")],rs.prototype,"writeFullTimeExtent",null),(0,we._)([(0,Re.Cb)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],rs.prototype,"loop",void 0),(0,we._)([(0,Re.Cb)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var g;const y=!(null==(g=this.stops)||!g.length),v=!(this.stopInterval||y);return{enabled:v,isRequired:v}}}}})],rs.prototype,"numStops",void 0),(0,we._)([(0,Re.Cb)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],rs.prototype,"numThumbs",void 0),(0,we._)([(0,Re.Cb)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],rs.prototype,"stopDelay",void 0),(0,we._)([(0,Re.Cb)({type:I3.Z,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var g;const y=!(null==(g=this.stops)||!g.length);return{enabled:!y,isRequired:!(null!=this.numStops||y)}}}}})],rs.prototype,"stopInterval",void 0),(0,we._)([(0,Uu.r)("stopInterval")],rs.prototype,"readStopInterval",null),(0,we._)([(0,Pa.c)("stopInterval")],rs.prototype,"writeStopInterval",null),(0,we._)([(0,Re.Cb)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],rs.prototype,"stops",void 0),(0,we._)([(0,Uu.r)("stops")],rs.prototype,"readStops",null),(0,we._)([(0,Pa.c)("stops")],rs.prototype,"writeStops",null),rs=jC=(0,we._)([(0,Tr.j)("esri.webdoc.widgets.TimeSlider")],rs);const KJ=rs;var BC;let sf=BC=class extends Hi.wq{constructor(g){super(g),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new BC((0,ha.d9)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};(0,we._)([(0,Re.Cb)({type:$J,json:{write:!0}})],sf.prototype,"range",void 0),(0,we._)([(0,Re.Cb)({type:KJ,json:{write:!0}})],sf.prototype,"timeSlider",void 0),(0,we._)([(0,Re.Cb)({type:ZJ,json:{write:!0}})],sf.prototype,"floorFilter",void 0),sf=BC=(0,we._)([(0,Tr.j)("esri.webdoc.Widgets")],sf);const zJ=sf,GJ={width:600,height:400};var YJ=C(32584);function T3(g){return{enabled:!(null==g||!g.length)}}var UC,A3=C(85);let af=UC=class extends Hi.wq{constructor(g){super(g),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new UC({exactMatch:this.exactMatch,type:this.type,name:this.name})}};(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],af.prototype,"exactMatch",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],af.prototype,"name",void 0),(0,we._)([(0,wC.J)(A3.v)],af.prototype,"type",void 0),af=UC=(0,we._)([(0,Tr.j)("esri.webdoc.applicationProperties.SearchLayerField")],af);const JJ=af;var VC;let lf=VC=class extends Hi.wq{constructor(g){super(g),this.field=null,this.id=null,this.subLayer=null}clone(){return new VC((0,ha.d9)({field:this.field,id:this.id,subLayer:this.subLayer}))}};(0,we._)([(0,Re.Cb)({type:JJ,json:{write:{isRequired:!0}}})],lf.prototype,"field",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:{isRequired:!0}}})],lf.prototype,"id",void 0),(0,we._)([(0,Re.Cb)({type:Xh.z8,json:{write:!0}})],lf.prototype,"subLayer",void 0),lf=VC=(0,we._)([(0,Tr.j)("esri.webdoc.applicationProperties.SearchLayer")],lf);const XJ=lf;var kC;let uf=kC=class extends Hi.wq{constructor(g){super(g),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new kC({exactMatch:this.exactMatch,type:this.type,name:this.name})}};(0,we._)([(0,Re.Cb)({type:Boolean,json:{write:!0}})],uf.prototype,"exactMatch",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],uf.prototype,"name",void 0),(0,we._)([(0,wC.J)(A3.v)],uf.prototype,"type",void 0),uf=kC=(0,we._)([(0,Tr.j)("esri.webdoc.applicationProperties.SearchTableField")],uf);const QJ=uf;var WC;let g0=WC=class extends Hi.wq{constructor(g){super(g),this.field=null,this.id=null}clone(){return new WC((0,ha.d9)({field:this.field,id:this.id}))}};(0,we._)([(0,Re.Cb)({type:QJ,json:{write:{isRequired:!0}}})],g0.prototype,"field",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:{isRequired:!0}}})],g0.prototype,"id",void 0),g0=WC=(0,we._)([(0,Tr.j)("esri.webdoc.applicationProperties.SearchTable")],g0);const qJ=g0;var ZC;const P3=eo.Z.ofType(XJ),R3=eo.Z.ofType(qJ);let au=ZC=class extends Hi.wq{constructor(g){super(g),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new P3,this.tables=new R3}readAddressSearchEnabled(g){return!g}writeAddressSearchEnabled(g,p,y){p[y]=!g}clone(){return new ZC((0,ha.d9)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};(0,we._)([(0,Re.Cb)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],au.prototype,"addressSearchEnabled",void 0),(0,we._)([(0,Uu.r)("addressSearchEnabled")],au.prototype,"readAddressSearchEnabled",null),(0,we._)([(0,Pa.c)("addressSearchEnabled")],au.prototype,"writeAddressSearchEnabled",null),(0,we._)([(0,Re.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],au.prototype,"enabled",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:!0}})],au.prototype,"hintText",void 0),(0,we._)([(0,Re.Cb)({type:P3,json:{write:{overridePolicy:T3},origins:{"web-scene":{write:{isRequired:!0}}}}})],au.prototype,"layers",void 0),(0,we._)([(0,Re.Cb)({type:R3,json:{read:!0,write:{overridePolicy:T3}}})],au.prototype,"tables",void 0),au=ZC=(0,we._)([(0,Tr.j)("esri.webdoc.applicationProperties.Search")],au);const eX=au;var $C;let $y=$C=class extends Hi.wq{constructor(g){super(g),this.search=null}clone(){return new $C((0,ha.d9)({search:this.search}))}};(0,we._)([(0,Re.Cb)({type:eX,json:{write:!0}})],$y.prototype,"search",void 0),$y=$C=(0,we._)([(0,Tr.j)("esri.webdoc.applicationProperties.Viewing")],$y);const tX=$y;var KC;let cf=KC=class extends Hi.wq{constructor(g){super(g),this.editing=null,this.offline=null,this.viewing=null}clone(){return new KC((0,ha.d9)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};(0,we._)([(0,Re.Cb)({json:{write:!0}})],cf.prototype,"editing",void 0),(0,we._)([(0,Re.Cb)({json:{write:!0}})],cf.prototype,"offline",void 0),(0,we._)([(0,Re.Cb)({type:tX,json:{write:!0}})],cf.prototype,"viewing",void 0),cf=KC=(0,we._)([(0,Tr.j)("esri.webmap.ApplicationProperties")],cf);const rX=cf;var zC,nX=C(55538),iX=C(61996);let Ky=zC=class extends Hi.wq{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new zC({url:this.url})}};(0,we._)([(0,Re.Cb)({type:String,json:{write:{isRequired:!0}}})],Ky.prototype,"url",void 0),Ky=zC=(0,we._)([(0,Tr.j)("esri.webdoc.support.Thumbnail")],Ky);const df=Ky;var GC;const L3="esri.webmap.Bookmark",HC=Eo.Z.getLogger(L3);let Ol=GC=class extends((0,iX.I)(Hi.wq)){constructor(g){super(g),this.name=null,this.thumbnail=new df,this.timeExtent=null}set extent(g){(0,nX.Mr)(HC,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new Qs.Z({targetGeometry:g.clone()})),this._set("extent",g)}castThumbnail(g){return"string"==typeof g?new df({url:g}):(0,Xh.se)(df,g)}set viewpoint(g){const{targetGeometry:p,scale:y}=g;(0,dr.pC)(p)&&("extent"===p.type?this._set("extent",p.clone()):"point"===p.type&&(0,dr.Wi)(y)&&HC.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",g)),this._set("viewpoint",g)}readViewpoint(g,p){const{extent:y,viewpoint:v}=p;return Qs.Z.fromJSON(v||{targetGeometry:y})}writeViewpoint(g,p,y,v){if(!g)return;const{targetGeometry:_}=g;if((0,dr.pC)(_)&&"extent"!==_.type){const E="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=v&&v.messages?v.messages.push(new sn.Z("property:unsupported",E)):HC.error(E)}else p[y]=g.toJSON()}clone(){return new GC((0,ha.d9)({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};(0,we._)([(0,Re.Cb)({type:Ic.Z,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],Ol.prototype,"extent",null),(0,we._)([(0,Re.Cb)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],Ol.prototype,"name",void 0),(0,we._)([(0,Re.Cb)({type:df,json:{write:{overridePolicy:g=>({enabled:!(!g||!g.url)})}}})],Ol.prototype,"thumbnail",void 0),(0,we._)([(0,fa.p)("thumbnail")],Ol.prototype,"castThumbnail",null),(0,we._)([(0,Re.Cb)({type:of.Z,json:{write:!0}})],Ol.prototype,"timeExtent",void 0),(0,we._)([(0,Re.Cb)({type:Qs.Z,nonNullable:!0,json:{write:!0}})],Ol.prototype,"viewpoint",null),(0,we._)([(0,Uu.r)("viewpoint",["extent","viewpoint"])],Ol.prototype,"readViewpoint",null),(0,we._)([(0,Pa.c)("viewpoint")],Ol.prototype,"writeViewpoint",null),Ol=GC=(0,we._)([(0,Tr.j)(L3)],Ol);const YC=Ol;var JC;let zy=JC=class extends Hi.wq{constructor(g){super(g),this.color=new Jh.Z([0,0,0,1])}clone(){return new JC((0,ha.d9)({color:this.color}))}};(0,we._)([(0,Re.Cb)({type:Jh.Z,json:{write:!0}})],zy.prototype,"color",void 0),zy=JC=(0,we._)([(0,Tr.j)("esri.webmap.background.ColorBackground")],zy);const Gy=zy;var XC;let Id=XC=class extends pi.Z{constructor(g){super(g),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new XC((0,ha.d9)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};(0,we._)([(0,Re.Cb)({type:Gy})],Id.prototype,"background",void 0),(0,we._)([(0,Re.Cb)({type:RC})],Id.prototype,"rangeInfo",void 0),(0,we._)([(0,Re.Cb)({type:Oc.Z})],Id.prototype,"spatialReference",void 0),(0,we._)([(0,Re.Cb)({type:Qs.Z})],Id.prototype,"viewpoint",void 0),Id=XC=(0,we._)([(0,Tr.j)("esri.webmap.InitialViewProperties")],Id);const Hy=Id;var oX=C(10349);class y0 extends oX.G{constructor(p,y){super(p,y,"webmap")}}const Yy=new y0(2,23),QC="Web Map",N3=eo.Z.ofType(YC),sX=eo.Z.ofType(BJ),Jy=Eo.Z.getLogger("esri.WebMap"),v0=new Map;v0.set("image/jpeg","jpeg"),v0.set("image/jpg","jpg"),v0.set("image/png","png"),v0.set("image/gif","gif");const F3="ArcGIS API for JavaScript",j3="CollectorDisabled",B3="Collector",U3="Data Editing",V3="OfflineDisabled",k3="Offline",W3="Workforce Project",Z3="Workforce Worker",$3="Workforce Dispatcher",K3="DeveloperBasemap",cX=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map(g=>g.toLowerCase());let Pi=class extends((0,jy.R)(m0.Z.LoadableMixin((0,OC.v)(M3)))){constructor(g){super(g),this.applicationProperties=null,this.bookmarks=new N3,this.floorInfo=null,this.initialViewProperties=new Hy,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const g=this.portalItem;this.portalItem=null,null==g||g.destroy()}initialize(){if(this.when().catch(g=>{Jy.error("#load()","Failed to load web map",g)}),this.resourceInfo){let g;try{g=this._validateJSON(this.resourceInfo)}catch(p){return void this.addResolvingPromise(Promise.reject(p))}this.read(g)}}set authoringApp(g){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",g)}writeAuthoringApp(g,p){p.authoringApp=g&&this._isAuthoringAppSetByUser?g:F3}set authoringAppVersion(g){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",g)}writeAuthoringAppVersion(g,p){p.authoringAppVersion=g&&this._isAuthoringAppVersionSetByUser?g:yJ.i8}readInitialViewProperties(g,p){var y;const v=new Hy;p.background&&(v.background=Gy.fromJSON(p.background));const _=null==(y=p.initialState)?void 0:y.viewpoint;return _&&(_.rotation&&y0.parse(p.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===p.authoringApp&&(_.rotation*=-1),v.viewpoint=Qs.Z.fromJSON(_)),p.mapRangeInfo&&(v.rangeInfo=RC.fromJSON(p.mapRangeInfo)),p.spatialReference&&(v.spatialReference=Oc.Z.fromJSON(p.spatialReference)),v}writeInitialViewProperties(g,p,y,v){if(!g)return;const _=g.background;_&&_.color&&(p.background=_.write({},v)),g.viewpoint&&(p.initialState={viewpoint:g.viewpoint.write({},v)}),g.rangeInfo&&(p.mapRangeInfo=g.rangeInfo.toJSON(v)),g.spatialReference&&(p.spatialReference=g.spatialReference.write({},v))}writeLayers(g,p,y,v){p[y]=this._writeLayers(g,v,"operational-layers")}readSourceVersion(g,p){const[y,v]=p.version.split(".");return new y0(parseInt(y,10),parseInt(v,10))}writeSourceVersion(g,p,y){p[y]=`${Yy.major}.${Yy.minor}`}writeTables(g,p,y,v){const _=this._writeLayers(g,v,"tables");_.length&&(p[y]=_)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(g){g?(this._override("thumbnailUrl",g),this._thumbnailFilename=this._generateCustomThumbnailFilename(g)):this._clearThumbnailOverride()}load(g){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return(0,i3.GZ)(this,g=>{g(this.ground,this.basemap,this.layers,this.tables)})}read(g,p){p=nn(Ot({},p),{origin:"web-map"});const y=this._getAuthoringPropsState();(0,PJ.$Z)(this,g,v=>super.read(g,v),p),this._restoreAuthoringPropsFromState(y)}write(g,p){if("loaded"!==this.loadStatus){const y=new sn.Z("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Jy.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),y}return this._removeDanglingLayerRefs(),p=nn(Ot({},p),{origin:"web-map",restrictedWebMapWriting:!0,webmap:this}),super.write(g,p)}save(g){var p=this;return(0,qr.Z)(function*(){g=g||{},p._validateItem(),yield p._updateFromPromise,yield p.load(),yield p._loadLayerContainers(),yield p._beforeSave(),p._validateMap();const y=p.portalItem,v={origin:"web-map",messages:[],writtenProperties:[],url:y.itemUrl&&(0,Sc.mN)(y.itemUrl),portal:y.portal||ky.Z.getDefault()},_=p.write({},v);return p._validateJSONForWriting(v,g),yield p._updateItemProperties(y),yield p._updateItem(y,_,v),yield p._updateItemThumbnail(),y})()}saveAs(g,p){var y=this;return(0,qr.Z)(function*(){p=p||{};const v=y._getPortalItem(g);yield y._updateFromPromise,yield y.load(),yield y._loadLayerContainers(),yield y._beforeSave(),y._validateMap();const _={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:v.portal},E=y.write({},_);y._validateJSONForWriting(_,p),yield y._updateItemPropertiesForSaveAs(v);const w=y._getThumbnailState();return yield y._createItem(v,E,_,p),y._restoreThumbnailFromState(w),yield y._updateItemThumbnail(),v})()}updateFrom(g,p){var y=this;return(0,qr.Z)(function*(){const v=y._updateFromInternal(g,p);y._updateFromPromise=v,yield v,v===y._updateFromPromise&&(y._updateFromPromise=null)})()}getLayerJSONFromResourceInfo(g){var p,y,v,_;const E=this.resourceInfo;return this._collectAllLayersJSON((0,o3.xH)([null==E||null==(p=E.baseMap)?void 0:p.baseMapLayers,null==E?void 0:E.operationalLayers,null==(y=this.basemap)||null==(v=y.resourceInfo)||null==(_=v.data)?void 0:_.baseMapLayers])).find(w=>w.id===g.id)}_collectAllLayersJSON(g){return g.reduce((p,y)=>(p.push(y),"GroupLayer"===y.layerType&&(p=p.concat(this._collectAllLayersJSON(y.layers||[]))),p),[])}_writeLayers(g,p,y){return p=nn(Ot({},p),{layerContainerType:y}),g.map(v=>(0,dr.Wg)((0,YJ.Nw)(v,"tables"===y?null:this.getLayerJSONFromResourceInfo(v),p))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(g){return g.load().catch(p=>{throw new sn.Z("webmap:load-portal-item","Failed to load portal item",{error:p})}).then(()=>{if("Web Map"!==g.type)throw new sn.Z("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:g.type})}).then(()=>g.fetchData()).then(p=>(this.resourceInfo=p,this._readAndLoadFromJSON(p,{origin:"web-map",portal:g.portal||ky.Z.getDefault()}))).then(()=>this._computeInitialViewpoint())}_readAndLoadFromJSON(g,p){const y=this._validateJSON(g);return this.read(y,p),this._loadFromJSON(y,p)}_validateJSON(g){const p=y0.parse(g.version||"","webmap");return Yy.validate(p),g.version=`${p.major}.${p.minor}`,g}_loadFromJSON(g,p){const y={context:nn(Ot({},p),{layerContainerType:"operational-layers"})};return this.portalItem&&(y.context.portal=this.portalItem.portal||ky.Z.getDefault()),Promise.all([C.e(7534),C.e(1074)]).then(C.bind(C,71074)).then(({populateOperationalLayers:v})=>{const _=[],E=g.operationalLayers;E&&E.length&&_.push(v(this.layers,E,y));const w=nn(Ot({},y),{context:nn(Ot({},y.context),{layerContainerType:"tables"}),defaultLayerType:"ArcGISFeatureLayer"}),D=g.tables;return D&&D.length&&_.push(v(this.tables,D,w)),(0,ni.as)(_).then(()=>{})})}_computeInitialViewpoint(){var g=this;return(0,qr.Z)(function*(){var p,y;let v=g.initialViewProperties;if(null==(p=v)||null==(y=p.viewpoint)?void 0:y.targetGeometry)return;const _=yield g._getExtentFromItem();_&&(v=v?v.clone():new Hy,v.viewpoint=new Qs.Z,v.viewpoint.targetGeometry=_,g.initialViewProperties=v)})()}_getExtentFromItem(){var g=this;return(0,qr.Z)(function*(){var p,y;const v=null==(p=g.initialViewProperties)?void 0:p.spatialReference,_=null==(y=g.portalItem)?void 0:y.extent;return v&&_?v.isWGS84?_.clone():v.isWebMercator?(0,iu.$)(_):(yield C.e(5082).then(C.bind(C,35082))).getGeometryServiceURL(g.portalItem).then(E=>{const w=new O3.Z;return w.geometries=[_],w.outSpatialReference=v,(0,S3.i)(E,w)}).then(E=>E[0]).catch(E=>(Jy.error("Error projecting item's extent:",E),null)):null})()}_removeDanglingLayerRefs(){const g=this.applicationProperties,p=g&&g.viewing&&g.viewing.search,y=E=>!!this.allLayers.find(w=>w.id===E);p&&p.layers&&(p.layers=p.layers.filter(E=>y(E.id))),p&&p.tables&&(p.tables=p.tables.filter(E=>!!this.tables.find(w=>w.id===E.id)));const v=g&&g.editing&&g.editing.locationTracking;v&&v.info&&!y(v.info.layerId)&&(g.editing=null);const _=this.presentation&&this.presentation.slides;_&&_.forEach(E=>{E.visibleLayers&&(E.visibleLayers=E.visibleLayers.filter(w=>y(w.id)))})}_validateMap(){if(!this.basemap||!this.basemap.baseLayers.length)throw new sn.Z("webmap:save","Map does not have a valid basemap with a base layer.")}_validateItem(){if(!this.portalItem)throw Jy.error("save: requires the portalItem property to be set"),new sn.Z("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(g){if(g.type!==QC)throw new sn.Z("webmap:portal-item-wrong-type",`Portal item needs to have type "${QC}"`)}_loadLayerContainers(){const g=[];return this.basemap&&g.push(this.basemap.load()),this.ground&&g.push(this.ground.load()),(0,ni.as)(g).then(()=>{})}_beforeSave(){var g=this;return(0,qr.Z)(function*(){const p=[];for(const y of g.allLayers)if("beforeSave"in y&&"function"==typeof y.beforeSave){const v=y.beforeSave();v&&p.push(v)}yield(0,ni.as)(p)})()}_loadAllLayers(){const g=this._getAllLayersAndTables().map(p=>p.load());return(0,ni.as)(g).then(()=>{})}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(g,p){let y=g.messages.filter(v=>"error"===v.type).map(v=>new sn.Z(v.name,v.message,v.details));if(p.ignoreUnsupported&&(y=y.filter(v=>"layer:unsupported"!==v.name&&"symbol:unsupported"!==v.name&&"symbol-layer:unsupported"!==v.name&&"property:unsupported"!==v.name&&"url:unsupported"!==v.name)),y.length>0)throw new sn.Z("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:y})}_updateItemProperties(g){var p=this;return(0,qr.Z)(function*(){g.extent=yield p._getWGS84Extent(p.initialViewProperties.viewpoint.targetGeometry),yield p._updateTypeKeywords(g)})()}_updateItemPropertiesForSaveAs(g){var p=this;return(0,qr.Z)(function*(){(0,Ro.ck)(g,j3),(0,Ro.ck)(g,V3),(0,Ro.ck)(g,W3),(0,Ro.ck)(g,Z3),(0,Ro.ck)(g,$3),(0,Ro.ck)(g,"Offline Map Areas"),(0,Ro.ck)(g,"FieldMapsDisabled"),yield p._updateItemProperties(g)})()}_getWGS84Extent(g){var p=this;return(0,qr.Z)(function*(){const y=g.clone().normalize();let v;if(y.length>1)for(const _ of y)v?_.width>v.width&&(v=_):v=_;else v=y[0];return p._projectToWGS84(v)})()}_projectToWGS84(g){var p=this;return(0,qr.Z)(function*(){const y=g.spatialReference;if(y.isWGS84)return g.clone();if(y.isWebMercator)return(0,iu.Sx)(g);const v=yield C.e(5082).then(C.bind(C,35082)),_=yield v.getGeometryServiceURL(p.portalItem),E=new O3.Z;return E.geometries=[g],E.outSpatialReference=Oc.Z.WGS84,(yield(0,S3.i)(_,E))[0]})()}_updateTypeKeywords(g){var p=this;return(0,qr.Z)(function*(){(0,Ro.qj)(g,F3),yield p._loadAllLayers(),p._evalCollectorKeyword(g),p._evalDataEditingKeyword(g),p._evalOfflineKeyword(g),p._evalDeveloperBasemapKeyword(g),g.typeKeywords&&(g.typeKeywords=g.typeKeywords.filter((y,v,_)=>_.indexOf(y)===v))})()}_evalCollectorKeyword(g){(0,Ro._$)(g,j3)||(0,Ro._$)(g,W3)||(0,Ro._$)(g,Z3)||(0,Ro._$)(g,$3)||!this._hasEditableFeatureLayer()?(0,Ro.ck)(g,B3):(0,Ro.qj)(g,B3)}_evalDataEditingKeyword(g){this._hasEditableFeatureLayer()?(0,Ro.qj)(g,U3):(0,Ro.ck)(g,U3)}_evalOfflineKeyword(g){!(0,Ro._$)(g,V3)&&this._isOfflineCapableMap()?(0,Ro.qj)(g,k3):(0,Ro.ck)(g,k3)}_evalDeveloperBasemapKeyword(g){!function MJ(g){return!(null==g||!g.baseLayers.concat(g.referenceLayers).some(p3))}(this.basemap)?(0,Ro.ck)(g,K3):(0,Ro.qj)(g,K3)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some(g=>g.loaded&&this._isFeatureServiceLayer(g)&&g.capabilities.operations.supportsEditing&&g.editingEnabled)}_isFeatureServiceLayer(g){return!("feature"!==g.type||!g.source||"feature-layer"!==g.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter(g=>"group"!==g.type).every(g=>g.loaded&&this._isOfflineCapableLayer(g))}_isOfflineCapableLayer(g){return this._isFeatureServiceLayer(g)&&g.capabilities.operations.supportsSync||("tile"===g.type||"vector-tile"===g.type)&&(g.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(g)||p3(g))&&g.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(g){return"tile"===g.type&&(0,By.h3)(g.url)&&cX.some(p=>g.url.toLowerCase().indexOf("/"+p+"/")>-1)}_updateItem(g,p,y){var v=this;return(0,qr.Z)(function*(){yield g.update({data:p}),v._syncUpInstanceWithItem(g,p,y)})()}_createItem(g,p,y,v){var _=this;return(0,qr.Z)(function*(){const E=_.portalItem,w=!!(E&&E.id&&E.portal.user),D=g.portal;if(yield D._signIn(),!(yield _._canCopyItem(E,w,D)))throw new sn.Z("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");yield D.user.addItem({item:g,folder:v.folder,data:p}),_.portalItem=g,_._syncUpInstanceWithItem(g,p,y)})()}_canCopyItem(g,p,y){return(0,qr.Z)(function*(){return!((0,dr.pC)(g)&&g.id&&g.typeKeywords&&g.typeKeywords.indexOf("useOnly")>-1)||g.portal.portalHostname===y.portalHostname&&(p||(yield g.reload()),"admin"===g.itemControl||"update"===g.itemControl)})()}_syncUpInstanceWithItem(g,p,y){jy.w.prototype.read.call(this,{version:p.version,authoringApp:p.authoringApp,authoringAppVersion:p.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:g.itemUrl&&(0,Sc.mN)(g.itemUrl)}),(0,AJ.D)(y),this.resourceInfo=p}_updateItemThumbnail(){var g=this;return(0,qr.Z)(function*(){g.thumbnailUrl&&g._isOverridden("thumbnailUrl")&&(yield g.portalItem.updateThumbnail({thumbnail:g.thumbnailUrl,filename:g._thumbnailFilename}),g._clearThumbnailOverride())})()}_getPortalItem(g){let p=D3.default.from(g);return p.id&&(p=p.clone(),p.id=null),p.type||(p.type=QC),p.portal||(p.portal=ky.Z.getDefault()),this._validateItemType(p),p}_updateFromInternal(g,p){var y=this;return(0,qr.Z)(function*(){if(p=p||{},yield(0,Br.LR)(g,"ready"),y._updateInitialViewProperties(g,p),g.map===y)for(const v of g.allLayerViews)for(const _ of["visible","featureEffect"])_ in v&&_ in v.layer&&v._isOverridden(_)&&(v.layer[_]=v[_]);yield y._updateThumbnailUrl(g,p)})()}_updateInitialViewProperties(g,p){var y;if(p.backgroundExcluded||(this.initialViewProperties.background=null==(y=g.background)?void 0:y.clone()),this.initialViewProperties.spatialReference=g.spatialReference.clone(),p.viewpointExcluded||(this.initialViewProperties.viewpoint=new Qs.Z({rotation:g.rotation,scale:p.scalePreserved?g.scale:null,targetGeometry:this._getViewExtent(g)})),!p.widgetsExcluded)for(const v of g.persistableViewModels)v.updateWebDocument(this)}_getViewExtent(g){const p=g.center.clone().normalize(),y=g.extent.clone(),v=y.width/2;return y.xmin=p.x-v,y.xmax=p.x+v,y}_updateThumbnailUrl(g,p){var y=this;return(0,qr.Z)(function*(){if(p.thumbnailExcluded)return;const v=function HJ(g,p){p=p||GJ;let{width:y,height:v}=p;const _=y/v;return _<1.5?v=y/1.5:_>1.5&&(y=1.5*v),y>g.width&&(v*=g.width/y,y=g.width),v>g.height&&(y*=g.height/v,v=g.height),{width:Math.round(y),height:Math.round(v)}}(g,p.thumbnailSize),_=yield g.takeScreenshot({format:"png",width:v.width,height:v.height});y._setAutoGeneratedThumbnail(_.dataUrl)})()}_setAutoGeneratedThumbnail(g){this.thumbnailUrl=g,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(g){if((0,Sc.HK)(g)){const p=(0,Sc.sJ)(g),y=p&&p.mediaType,v=y&&v0.get(y.toLowerCase())||null,_=`thumbnail${Date.now()}`;return v?`${_}.${v}`:_}return null}_getThumbnailState(){let g=this.thumbnailUrl;return g&&(g=this._isOverridden("thumbnailUrl")?g:(0,Sc.ZN)(g,"w","8192")),{thumbnailUrl:g,filename:this._thumbnailFilename}}_restoreThumbnailFromState(g){this.thumbnailUrl=g.thumbnailUrl,this._thumbnailFilename=g.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(g){g.isAuthoringAppSetByUser?this.authoringApp=g.authoringApp:this._isAuthoringAppSetByUser=!1,g.isAuthoringAppVersionSetByUser?this.authoringAppVersion=g.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(g){const p=g;if(!p)throw new sn.Z("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:p})}};Pi.VERSION=Yy,(0,we._)([(0,Re.Cb)({type:rX,json:{write:!0}})],Pi.prototype,"applicationProperties",void 0),(0,we._)([(0,Re.Cb)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Pi.prototype,"authoringApp",null),(0,we._)([(0,Pa.c)("authoringApp")],Pi.prototype,"writeAuthoringApp",null),(0,we._)([(0,Re.Cb)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Pi.prototype,"authoringAppVersion",null),(0,we._)([(0,Pa.c)("authoringAppVersion")],Pi.prototype,"writeAuthoringAppVersion",null),(0,we._)([(0,Re.Cb)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Pi.prototype,"basemap",void 0),(0,we._)([(0,Re.Cb)({type:N3,json:{write:{overridePolicy:g=>({enabled:!!(g&&g.length>0),ignoreOrigin:!0})}}})],Pi.prototype,"bookmarks",void 0),(0,we._)([(0,Re.Cb)({type:WJ,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],Pi.prototype,"floorInfo",void 0),(0,we._)([(0,Re.Cb)({type:Hy,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:Gy},"initialState.viewpoint":{type:Qs.Z},mapRangeInfo:{type:RC},spatialReference:{type:Oc.Z}}}}})],Pi.prototype,"initialViewProperties",void 0),(0,we._)([(0,Uu.r)("initialViewProperties")],Pi.prototype,"readInitialViewProperties",null),(0,we._)([(0,Pa.c)("initialViewProperties")],Pi.prototype,"writeInitialViewProperties",null),(0,we._)([(0,Re.Cb)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Pi.prototype,"layers",void 0),(0,we._)([(0,Pa.c)("layers")],Pi.prototype,"writeLayers",null),(0,we._)([(0,Re.Cb)({type:D3.default})],Pi.prototype,"portalItem",void 0),(0,we._)([(0,Re.Cb)({json:{write:!0}})],Pi.prototype,"presentation",void 0),(0,we._)([(0,Re.Cb)()],Pi.prototype,"resourceInfo",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,type:y0,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Pi.prototype,"sourceVersion",void 0),(0,we._)([(0,Uu.r)("sourceVersion")],Pi.prototype,"readSourceVersion",null),(0,we._)([(0,Pa.c)("sourceVersion")],Pi.prototype,"writeSourceVersion",null),(0,we._)([(0,Re.Cb)({json:{read:!1,write:{ignoreOrigin:!0}}})],Pi.prototype,"tables",void 0),(0,we._)([(0,Pa.c)("tables")],Pi.prototype,"writeTables",null),(0,we._)([(0,Re.Cb)()],Pi.prototype,"thumbnailUrl",null),(0,we._)([(0,Re.Cb)({type:zJ,json:{write:!0}})],Pi.prototype,"widgets",void 0),(0,we._)([(0,Re.Cb)({type:sX,json:{read:!0,write:!0}})],Pi.prototype,"utilityNetworks",void 0),Pi=(0,we._)([(0,Tr.j)("esri.WebMap")],Pi);const z3=Pi;var hf=C(88879),G3=C(56354),dX=C(59289),Xy=C(35575),Ra=C(72392);const Qy={widthBreakpoint:{getValue(g){const p=g.viewSize[0],y=g.breakpoints,v=this.values;return p<=y.xsmall?v.xsmall:p<=y.small?v.small:p<=y.medium?v.medium:p<=y.large?v.large:v.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(g){const p=g.viewSize[1],y=g.breakpoints,v=this.values;return p<=y.xsmall?v.xsmall:p<=y.small?v.small:p<=y.medium?v.medium:p<=y.large?v.large:v.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(g){const p=g.viewSize,_=this.values;return p[1]>=p[0]?_.portrait:_.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},qC={xsmall:544,small:768,medium:992,large:1200};function e2(g,p){return p?Qy[g].valueToClassName[p].split(" "):[]}const fX=g=>{let p=class extends g{constructor(...y){super(...y),this._breakpointsHandles=new Ra.Z,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=qC}initialize(){this._breakpointsHandles.add((0,Br.S1)(this,["breakpoints","size"],this._updateClassNames))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)}set breakpoints(y){if(y===this._get("breakpoints"))return;const v=function hX(g){return g&&g.xsmall<g.small&&g.small<g.medium&&g.medium<g.large}(y);if(!v){const _=JSON.stringify(qC,null,2);console.warn("provided breakpoints are not valid, using defaults:"+_)}this._set("breakpoints",Ot({},y=v?y:qC))}_updateClassNames(){if(!this.container)return;const y=Xy.Z.acquire(),v=Xy.Z.acquire();let _,E=!1;for(_ in Qy){const w=this[_],D=Qy[_].getValue({viewSize:this.size,breakpoints:this.breakpoints});w!==D&&(E=!0,this[_]=D,e2(_,w).forEach(O=>v.push(O)),e2(_,D).forEach(O=>y.push(O)))}E&&(this._applyClassNameChanges(y,v),Xy.Z.release(y),Xy.Z.release(v))}_applyClassNameChanges(y,v){const _=this.container;_&&(v.forEach(E=>_.classList.remove(E)),y.forEach(E=>_.classList.add(E)))}_removeActiveClassNames(){const y=this.container;if(!y)return;let v;for(v in Qy)e2(v,this[v]).forEach(_=>y.classList.remove(_))}};return(0,we._)([(0,Re.Cb)()],p.prototype,"breakpoints",null),(0,we._)([(0,Re.Cb)()],p.prototype,"orientation",void 0),(0,we._)([(0,Re.Cb)()],p.prototype,"widthBreakpoint",void 0),(0,we._)([(0,Re.Cb)()],p.prototype,"heightBreakpoint",void 0),p=(0,we._)([(0,Tr.j)("esri.views.BreakpointsOwner")],p),p};var lu=C(40764),Td=C(50618),H3=(C(50645),C(62996)),Y3=C(70257);let Pc=class extends pi.Z{constructor(){super(...arguments),this.items=new eo.Z,this._watchUpdatingTracking=new Y3.t,this._callbacks=new Map,this._projector=(0,H3.E)(),this._hiddenProjector=(0,H3.E)()}get needsRender(){return this.items.length>0}initialize(){const g=document.createElement("div");g.className="esri-overlay-surface",this._set("surface",g),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),g.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,p=>{for(const y of p.added){const v=()=>y.render();this._callbacks.set(y,v),this._projector.append(this.surface,v)}for(const y of p.removed){const v=this._projector.detach(this._callbacks.get(y));this.surface.removeChild(v.domNode),this._callbacks.delete(y)}})}addItem(g){this.items.add(g)}removeItem(g){this.items.remove(g)}destroy(){this.items.removeAll(),this._callbacks.forEach(g=>this._projector.detach(g)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(g){const p=this._hiddenSurface,y=this._hiddenProjector;let v=null;const _=()=>(v=g.render(),v);y.append(p,_),y.renderNow();const E={left:0,top:0,right:0,bottom:0};if(v&&v.domNode){const w=v.domNode.getBoundingClientRect();E.left=w.left,E.top=w.top,E.right=w.right,E.bottom=w.bottom}for(y.detach(_);p.firstChild;)p.removeChild(p.firstChild);return E}overlaps(g,p){const y=this.computeBoundingRect(g),v=this.computeBoundingRect(p);return Math.max(y.left,v.left)<=Math.min(y.right,v.right)&&Math.max(y.top,v.top)<=Math.min(y.bottom,v.bottom)}get hasVisibleItems(){return this.items.some(g=>g.visible)}renderCanvas(g){if(!this.items.some(y=>y.visible))return;const p=g.getContext("2d");p.save(),p.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(y=>{p.save(),y.renderCanvas(p),p.restore()}),p.restore()}};(0,we._)([(0,Re.Cb)({readOnly:!0})],Pc.prototype,"surface",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Pc.prototype,"items",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Pc.prototype,"needsRender",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Pc.prototype,"_watchUpdatingTracking",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],Pc.prototype,"updating",void 0),Pc=(0,we._)([(0,Tr.j)("esri.views.overlay.ViewOverlay")],Pc);const J3=Pc;C(52515);var Rc=C(17770),t2=C(7074),an=C(83960),ns=C(6785),_0=C(21286),ff=C(77275),r2=(C(16730),C(15348));const X3=["B","kB","MB","GB","TB"];var Lc=C(80542),gX=C(87183),Q3=C(67736),Nc=C(88411),q3=C(36630),yX=C(66845),eR=C(46679);const tR=Eo.Z.getLogger("esri.widgets.Feature.support.featureUtils"),_X=/href=(""|'')/gi,EX=/(\{([^\{\r\n]+)\})/g,bX=/\'/g,rR=/^\s*expression\//i,CX=/(\n)/gi,wX=/[\u00A0-\u9999<>\&]/gim,MX=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,xX=/^(?:mailto:|tel:)/,nR="relationships/",n2=(0,Nc.Ze)("short-date-short-time");function iR(g){if(!(0,dr.Wi)(g))return g.get("sourceLayer")||g.get("layer")}function qy(g,p){return i2.apply(this,arguments)}function i2(){return i2=(0,qr.Z)(function*(g,p){return"function"==typeof g?g.call(null,p):g}),i2.apply(this,arguments)}function oR(g=""){if(g)return!xX.test(g.trim().toLowerCase())}function sR(g){return!!g&&rR.test(g)}function aR(g,p){const y=function DX(g,p){if(!sR(p)||!g)return null;const y=p.replace(rR,"").toLowerCase();let v;return g.some(_=>_.name.toLowerCase()===y&&(v=_,!0)),v}(p,null==g?void 0:g.fieldName);return y?y.title||null:g?g.label||g.fieldName:null}function ev(g,p){const y=o2(p,g);return y?y.name:g}function o2(g,p){return g&&"function"==typeof g.getField?g.getField(p):null}function lR(g){return`${g}`.trim()}function Ad({attributes:g,globalAttributes:p,layer:y,text:v,expressionAttributes:_,fieldInfoMap:E}){return v?s2({formattedAttributes:p,template:RX(v,Ot(Ot(Ot({},p),_),g),y),fieldInfoMap:E}):""}function s2({formattedAttributes:g,template:p,fieldInfoMap:y}){return lR(function OX(g){return g.replace(_X,"")}((0,ff.gx)((0,ff.gx)(p,v=>function SX(g,p){const y=p.get(g.toLowerCase());return`{${y&&y.fieldName||g}}`}(v,y)),g)))}function a2(g,p){return g.replace(EX,(y,v,_)=>{const E=o2(p,_);return E?`{${E.name}}`:v})}function RX(g,p,y){const v=a2(g,y);return v&&v.replace(MX,(_,E,w)=>function PX(g,p,y){const v=(p=lR(p))&&"{"!==p[0];return(0,ff.gx)(g,function AX(g,p=!1){const y=Ot({},g);return Object.keys(y).forEach(v=>function TX(g,p,y=!1){const v=p[g];if("string"==typeof v){const _="%27",E=(y?encodeURIComponent(v):v).replace(bX,_);p[g]=E}}(v,y,p)),y}(y,v))}(_,E||w,p))}function uR(g,p){const v=p.fieldName,_=cR(p.fieldInfos,v),E=null==_?void 0:_.clone(),w=p.preventPlacesFormatting,D=p.layer,O=o2(D,v);if(E&&"date"===(null==O?void 0:O.type)){const W=E.format||new yX.Z;W.dateFormat=W.dateFormat||"short-date-short-time",W.dateTimeFormatOptions=function NX(g){return"feature"===(null==g?void 0:g.type)}(D)&&D.datesInUnknownTimezone||function jX(g){return!(null==g||!g.layer)}(D)&&function FX(g){return"map-image"===(null==g?void 0:g.type)}(D.layer)&&D.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,E.format=W}const A=E&&E.format;return"string"==typeof(g=function LX(g,p){if("string"==typeof g&&p&&null==p.dateFormat&&(null!=p.places||null!=p.digitSeparator)){const y=Number(g);if(!isNaN(y))return y}return g}(g,A))||null==g||null==A?E0(g):w?(0,r2.uf)(g,nn(Ot({},(0,r2.sh)(A)),{minimumFractionDigits:0,maximumFractionDigits:20})):A.format(g)}function cR(g,p){if(!g||!g.length||!p)return;const y=p.toLowerCase();let v;return g.some(_=>!(!_.fieldName||_.fieldName.toLowerCase()!==y||(v=_,0))),v}function dR(g){const p=[];if(!g)return p;const{fieldInfos:y,content:v}=g;return y&&p.push(...y),v&&Array.isArray(v)&&v.forEach(_=>{if("fields"===_.type){const E=_&&_.fieldInfos;E&&p.push(...E)}}),p}function l2(g){return g.replace(wX,p=>`&#${p.charCodeAt(0)};`)}function E0(g){return"string"==typeof g?g.replace(CX,'<br class="esri-text-new-line" />'):g}function u2({fieldInfos:g,attributes:p,layer:y,graphic:v,fieldInfoMap:_,relatedInfos:E}){const w={};return null==E||E.forEach(D=>function GX(g,p){g&&p&&(p.relatedFeatures&&p.relatedFeatures&&p.relatedFeatures.forEach(y=>hR({attributes:g,graphic:y,relatedInfo:p})),p.relatedStatsFeatures&&p.relatedStatsFeatures&&p.relatedStatsFeatures.forEach(y=>hR({attributes:g,graphic:y,relatedInfo:p})))}(w,D)),Object.keys(p).forEach(D=>{w[D]=function WX(g){const{value:p,fieldName:y,fieldInfos:v,fieldInfoMap:_,layer:E,graphic:w}=g;if(null==p)return"";const D=function UX({fieldName:g,value:p,graphic:y,layer:v}){if(Vu(g)||!v||"function"!=typeof v.getFieldDomain)return null;const _=v.getFieldDomain(g,{feature:y});return _&&"coded-value"===_.type?_.getName(p):null}({fieldName:y,value:p,graphic:w,layer:E});if(D)return D;const O=function BX({fieldName:g,graphic:p,layer:y}){if(Vu(g)||!y||"function"!=typeof y.getFeatureType)return null;const{typeIdField:v}=y;if(!v||g!==v)return null;const _=y.getFeatureType(p);return _?_.name:null}({fieldName:y,graphic:w,layer:E});if(O)return O;if(_.get(y.toLowerCase()))return uR(p,{fieldInfos:v,fieldName:y,layer:E});const A=E&&E.fieldsIndex;return A&&A.isDateField(y)?(0,Nc.p6)(p,n2):E0(p)}({fieldName:D,fieldInfos:g,fieldInfoMap:_,layer:y,value:p[D],graphic:v})}),w}function ZX(g,p){return c2.apply(this,arguments)}function c2(){return c2=(0,qr.Z)(function*(g,p){var y,v;const{layer:_,graphic:E,outFields:w,objectIds:D,returnGeometry:O,spatialReference:A}=g,W=D[0];if("number"!=typeof W&&"string"!=typeof W)return tR.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:_,graphic:E,objectId:W,requiredFields:w}),null;if(null==(y=_.capabilities)||null==(v=y.operations)||!v.supportsQuery)return tR.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:_,graphic:E,requiredFields:w,returnGeometry:O}),null;const q=_.createQuery();return q.objectIds=D,q.outFields=null!=w&&w.length?w:[_.objectIdField],q.returnGeometry=!!O,q.returnZ=!!O,q.returnM=!!O,q.outSpatialReference=A,(yield _.queryFeatures(q,p)).features[0]}),c2.apply(this,arguments)}function $X(g){return d2.apply(this,arguments)}function d2(){return d2=(0,qr.Z)(function*(g){var p;if(null==(p=g.expressionInfos)||!p.length)return!1;const y=yield(0,eR.LC)(),{arcadeUtils:{hasGeometryFunctions:v}}=y;return v(g)}),d2.apply(this,arguments)}function h2(){return h2=(0,qr.Z)(function*({graphic:g,popupTemplate:p,layer:y,spatialReference:v},_){if(!y||!p||("function"==typeof y.load&&(yield y.load(_)),!g.attributes))return;const E=g.attributes[y.objectIdField];if(null==E)return;const w=[E],D=yield p.getRequiredFields(y.fieldsIndex),O=(0,q3.R9)(D,g),A=O?[]:D,W=p.returnGeometry||(yield $X(p));if(O&&!W)return;const q=yield ZX({layer:y,graphic:g,outFields:A,objectIds:w,returnGeometry:W,spatialReference:v},_);q&&(q.geometry&&(g.geometry=q.geometry),q.attributes&&(g.attributes=Ot(Ot({},g.attributes),q.attributes)))}),h2.apply(this,arguments)}function Vu(g=""){return!!g&&-1!==g.indexOf(nR)}function hR({attributes:g,graphic:p,relatedInfo:y}){g&&p&&y&&Object.keys(p.attributes).forEach(v=>{const _=function zX(g){return g?`${nR}${g.layerId}/${g.fieldName}`:""}({layerId:y.relation.id.toString(),fieldName:v});g[_]=p.attributes[v]})}const fR=g=>{if(!g)return!1;const p=g.toUpperCase();return p.indexOf("CURRENT_TIMESTAMP")>-1||p.indexOf("CURRENT_DATE")>-1||p.indexOf("CURRENT_TIME")>-1},pR=({layer:g,method:p,query:y,definitionExpression:v})=>{var _,E;if(null==(_=g.capabilities)||null==(E=_.query)||!E.supportsCacheHint||"attachments"===p)return;const w=(0,dr.pC)(y.where)&&y.where,D=(0,dr.pC)(y.geometry)&&y.geometry;fR(v)||fR(w)||"extent"===(null==D?void 0:D.type)||"tile"===y.resultType||(y.cacheHint=!0)},mR={editing:!1,operations:{add:!0,update:!0,delete:!0}},gR=eo.Z.ofType(gX.Z);let Il=class extends Lc.r{constructor(g){super(g),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities=Ot({},mR),this.activeAttachmentInfo=null,this.attachmentInfos=new gR,this.graphic=null,this.mode="view",this.handles.add([(0,Br.S1)(this,"graphic",()=>this._graphicChanged())])}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(g){return Ot(Ot({},mR),g)}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}getAttachments(){var g=this;return(0,qr.Z)(function*(){const{_attachmentLayer:p,attachmentInfos:y}=g;if(!p||"function"!=typeof p.queryAttachments)throw new sn.Z("invalid-layer","getAttachments(): A valid layer is required.");const v=g._getFeatureId(),_=new Q3.Z({objectIds:[v],returnMetadata:!0}),E=[],w=p.queryAttachments(_).then(O=>O[v]||E).catch(()=>E);g._getAttachmentsPromise=w,g.notifyChange("state");const D=yield w;return y.removeAll(),D.length&&y.addMany(D),g._getAttachmentsPromise=null,g.notifyChange("state"),D})()}addAttachment(g){var p=this;return(0,qr.Z)(function*(){const{_attachmentLayer:y,attachmentInfos:v,graphic:_,abilities:E}=p;if(!g)throw new sn.Z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:g});if(!E.operations.add)throw new sn.Z("invalid-abilities","addAttachment(): add abilities are required.");if(!y||"function"!=typeof y.addAttachment)throw new sn.Z("invalid-layer","addAttachment(): A valid layer is required.");const w=y.addAttachment(_,g).then(O=>p._queryAttachment(O.objectId)),D=yield w;return v.add(D),D})()}deleteAttachment(g){var p=this;return(0,qr.Z)(function*(){const{_attachmentLayer:y,attachmentInfos:v,graphic:_,abilities:E}=p;if(!g)throw new sn.Z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:g});if(!E.operations.delete)throw new sn.Z("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!y||"function"!=typeof y.deleteAttachments)throw new sn.Z("invalid-layer","deleteAttachment(): A valid layer is required.");const w=y.deleteAttachments(_,[g.id]).then(()=>g),D=yield w;return v.remove(D),D})()}updateAttachment(g,p=this.activeAttachmentInfo){var y=this;return(0,qr.Z)(function*(){const{_attachmentLayer:v,attachmentInfos:_,graphic:E,abilities:w}=y;if(!g)throw new sn.Z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:g});if(!p)throw new sn.Z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:p});if(!w.operations.update)throw new sn.Z("invalid-abilities","updateAttachment(): Update abilities are required.");const D=_.findIndex(W=>W===p);if(!v||"function"!=typeof v.updateAttachment)throw new sn.Z("invalid-layer","updateAttachment(): A valid layer is required.");const O=v.updateAttachment(E,p.id,g).then(W=>y._queryAttachment(W.objectId)),A=yield O;return _.splice(D,1,A),A})()}_queryAttachment(g){var p=this;return(0,qr.Z)(function*(){if(!g)throw new sn.Z("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:y}=p,v=p._getFeatureId(),_=new Q3.Z({objectIds:[v],attachmentsWhere:`AttachmentId=${g}`,returnMetadata:!0});return y.queryAttachments(_).then(E=>E[v][0])})()}_getFeatureId(){const{_attachmentLayer:g,graphic:p}=this;if(!g||!p)return null;const{objectIdField:y}=g,{attributes:v}=p;return v&&v[y]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:g}=this,p=iR(g);this._attachmentLayer=p?"scene"===p.type&&(0,dr.pC)(p.associatedLayer)?p.associatedLayer:p:null}};(0,we._)([(0,Re.Cb)()],Il.prototype,"abilities",void 0),(0,we._)([(0,fa.p)("abilities")],Il.prototype,"castAbilities",null),(0,we._)([(0,Re.Cb)()],Il.prototype,"activeAttachmentInfo",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,type:gR})],Il.prototype,"attachmentInfos",void 0),(0,we._)([(0,Re.Cb)({type:hf.Z})],Il.prototype,"graphic",void 0),(0,we._)([(0,Re.Cb)()],Il.prototype,"mode",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Il.prototype,"state",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Il.prototype,"supportsResizeAttachments",null),Il=(0,we._)([(0,Tr.j)("esri.widgets.Attachments.AttachmentsViewModel")],Il);const f2=Il;var XX=C(54346),Lo=C(38570),is=C(25552),Bt=C(94450);const yR={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},p2=window.CSS;let Ps=class extends ns.Z{constructor(g,p){super(g,p),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new f2,this.visibleElements=Ot({},yR),this._supportsImageOrientation=p2&&p2.supports&&p2.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own((0,Br.on)(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),(0,Br.S1)(this,"viewModel.mode",()=>this._modeChanged()))}get effectiveDisplayType(){return"auto"===this.displayType?this.viewModel.supportsResizeAttachments?"preview":"list":this.displayType}castVisibleElements(g){return Ot(Ot({},yR),g)}addAttachment(){const{_addAttachmentForm:g,viewModel:p}=this;return this._set("submitting",!0),this._set("error",null),p.addAttachment(g).then(y=>(this._set("submitting",!1),this._set("error",null),p.mode="view",y)).catch(y=>{throw this._set("submitting",!1),this._set("error",new sn.Z("attachments:add-attachment",this.messages.addErrorMessage,y)),y})}deleteAttachment(g){const{viewModel:p}=this;return this._set("submitting",!0),this._set("error",null),p.deleteAttachment(g).then(y=>(this._set("submitting",!1),this._set("error",null),p.mode="view",y)).catch(y=>{throw this._set("submitting",!1),this._set("error",new sn.Z("attachments:delete-attachment",this.messages.deleteErrorMessage,y)),y})}updateAttachment(){const{viewModel:g}=this,{_updateAttachmentForm:p}=this;return this._set("submitting",!0),this._set("error",null),g.updateAttachment(p).then(y=>(this._set("submitting",!1),this._set("error",null),g.mode="view",y)).catch(y=>{throw this._set("submitting",!1),this._set("error",new sn.Z("attachments:update-attachment",this.messages.updateErrorMessage,y)),y})}render(){const{submitting:g,viewModel:p}=this,{state:y}=p;return(0,Bt.u)("div",{class:this.classes("esri-attachments","esri-widget")},g?this.renderProgressBar():null,"loading"===y?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:g,visibleElements:p}=this;return g&&p.errorMessage?(0,Bt.u)("div",{key:"error-message",class:"esri-attachments__error-message"},g.message):null}renderAttachments(){const{mode:g,activeAttachmentInfo:p}=this.viewModel;return"add"===g?this.renderAddForm():"edit"===g?this.renderDetailsForm(p):this.renderAttachmentContainer()}renderLoading(){return(0,Bt.u)("div",{class:"esri-attachments__loader-container",key:"loader"},(0,Bt.u)("div",{class:"esri-attachments__loader"}))}renderProgressBar(){return this.visibleElements.progressBar?(0,Bt.u)("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null}renderAddForm(){const{submitting:g,selectedFile:p}=this,y=g||!p,v=this.visibleElements.cancelAddButton?(0,Bt.u)("button",{type:"button",bind:this,disabled:g,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",g&&"esri-button--disabled")},this.messages.cancel):null,_=this.visibleElements.addSubmitButton?(0,Bt.u)("button",{type:"submit",disabled:y,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{"esri-button--disabled":y})},this.messages.add):null,E=p?(0,Bt.u)("span",{key:"file-name",class:"esri-attachments__file-name"},p.name):null,w=(0,Bt.u)("form",{bind:this,afterCreate:Lo.Se,afterRemoved:Lo.pV,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,Bt.u)("fieldset",{class:"esri-attachments__file-fieldset"},E,(0,Bt.u)("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},p?this.messages.changeFile:this.messages.selectFile,(0,Bt.u)("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),_,v);return(0,Bt.u)("div",{key:"add-form-container",class:"esri-attachments__form-node"},w)}renderDetailsForm(g){const{visibleElements:p,viewModel:y,selectedFile:v,submitting:_}=this,{contentType:E,size:w,url:D}=g,{abilities:O}=y,A=_||!v,W=O.editing&&O.operations.delete&&p.deleteButton?(0,Bt.u)("button",{key:"delete-button",type:"button",disabled:_,bind:this,onclick:lt=>this._submitDeleteAttachment(lt,g),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{"esri-button--disabled":_})},this.messages.delete):null,q=O.editing&&O.operations.update&&p.updateButton?(0,Bt.u)("button",{disabled:A,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{"esri-button--disabled":A})},this.messages.update):null,_e=this.visibleElements.cancelUpdateButton?(0,Bt.u)("button",{disabled:_,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{"esri-button--disabled":_})},this.messages.cancel):null,be=v?(0,Bt.u)("span",{key:"file-name",class:"esri-attachments__file-name"},v.name):null,We=O.editing&&O.operations.update?(0,Bt.u)("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},be,(0,Bt.u)("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,(0,Bt.u)("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,qe=(0,Bt.u)("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},(0,Bt.u)("label",null,function mX(g,p){let y=0===p?0:Math.floor(Math.log(p)/Math.log(1024));y=(0,_0.uZ)(y,0,X3.length-1);const v=(0,r2.uf)(p/1024**y,{maximumFractionDigits:2});return(0,ff.gx)(g.units.bytes[X3[y]],{fileSize:v})}(this.messagesUnits,w))),dt=(0,Bt.u)("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},(0,Bt.u)("label",null,E)),gt=(0,Bt.u)("form",{bind:this,afterCreate:Lo.Se,afterRemoved:Lo.pV,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},(0,Bt.u)("div",{class:"esri-attachments__metadata"},qe,dt),We,(0,Bt.u)("div",{class:"esri-attachments__actions"},W,_e,q));return(0,Bt.u)("div",{key:"edit-form-container",class:"esri-attachments__form-node"},(0,Bt.u)("a",{class:"esri-attachments__item-link",href:D,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:g,size:400}),(0,Bt.u)("div",{class:"esri-attachments__item-link-overlay"},(0,Bt.u)("span",{class:"esri-attachments__item-link-overlay-icon"},(0,Bt.u)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},(0,Bt.u)("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),(0,Bt.u)("path",{fill:"none",d:"M0 0h32v32H0z"}))))),gt)}renderImageMask({attachmentInfo:g,size:p}){const{supportsResizeAttachments:y}=this.viewModel,{contentType:v,name:_,url:E}=g,w=y&&function QX(g){const p=g.toLowerCase();return"image/bmp"===p||"image/emf"===p||"image/exif"===p||"image/gif"===p||"image/x-icon"===p||"image/jpeg"===p||"image/png"===p||"image/tiff"===p||"image/x-wmf"===p}(v),D=this._getCSSTransform(g,w),O=D?{transform:D,"image-orientation":"none"}:{},A=-1===E.indexOf("?")?"?":"&",W=w?`${E}${A}w=${p}`:function qX(g){const p=(0,XX.V)("esri/themes/base/images/files/");return g?"text/plain"===g?`${p}text-32.svg`:"application/pdf"===g?`${p}pdf-32.svg`:"text/csv"===g?`${p}csv-32.svg`:"application/gpx+xml"===g?`${p}gpx-32.svg`:"application/x-dwf"===g?`${p}cad-32.svg`:"application/postscript"===g||"application/json"===g||"text/xml"===g||"model/vrml"===g?`${p}code-32.svg`:"application/x-zip-compressed"===g||"application/x-7z-compressed"===g||"application/x-gzip"===g||"application/x-tar"===g||"application/x-gtar"===g||"application/x-bzip2"===g||"application/gzip"===g||"application/x-compress"===g||"application/x-apple-diskimage"===g||"application/x-rar-compressed"===g||"application/zip"===g?`${p}zip-32.svg`:-1!==g.indexOf("image/")?`${p}image-32.svg`:-1!==g.indexOf("audio/")?`${p}sound-32.svg`:-1!==g.indexOf("video/")?`${p}video-32.svg`:-1!==g.indexOf("msexcel")||-1!==g.indexOf("ms-excel")||-1!==g.indexOf("spreadsheetml")?`${p}excel-32.svg`:-1!==g.indexOf("msword")||-1!==g.indexOf("ms-word")||-1!==g.indexOf("wordprocessingml")?`${p}word-32.svg`:-1!==g.indexOf("powerpoint")||-1!==g.indexOf("presentationml")?`${p}report-32.svg`:`${p}generic-32.svg`:`${p}generic-32.svg`}(v),_e={"esri-attachments__image--resizable":y};return(0,Bt.u)("div",{class:this.classes({"esri-attachments__item-mask--icon":!w},"esri-attachments__item-mask")},(0,Bt.u)("img",{styles:O,alt:_,src:W,class:this.classes(_e,"esri-attachments__image")}))}renderAttachmentInfo({attachmentInfo:g,displayType:p}){const{viewModel:y}=this,{abilities:v}=y,{name:_,url:E}=g,w=this.renderImageMask({attachmentInfo:g,size:"list"===p?48:400}),D=v.editing?(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",(0,Lo.dZ)(this.container)?"esri-icon-left":"esri-icon-right")}):null,O=[w,(0,Bt.u)("label",{class:"esri-attachments__label"},(0,Bt.u)("span",{class:"esri-attachments__filename"},_||this.messages.noTitle),D)],A=v.editing?(0,Bt.u)("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":g.id,onclick:()=>this._startEditAttachment(g),type:"button"},O):(0,Bt.u)("a",{key:"details-link",class:"esri-attachments__item-button",href:E,target:"_blank"},O);return(0,Bt.u)("li",{class:"esri-attachments__item",key:g},A)}renderAttachmentContainer(){const{effectiveDisplayType:g,viewModel:p,visibleElements:y}=this,{attachmentInfos:v,abilities:_}=p,E=v&&v.length,w={"esri-attachments__container--list":"preview"!==g,"esri-attachments__container--preview":"preview"===g},D=_.editing&&_.operations.add&&y.addButton?(0,Bt.u)("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null,O=E?(0,Bt.u)("ul",{class:"esri-attachments__items"},v.toArray().map(A=>this.renderAttachmentInfo({attachmentInfo:A,displayType:g}))):(0,Bt.u)("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return(0,Bt.u)("div",{key:"attachments-container",class:this.classes("esri-attachments__container",w)},O,D)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(g){const p=g.target,y=p&&p.files&&p.files.item(0);this._set("selectedFile",y)}_submitDeleteAttachment(g,p){g.preventDefault(),this.deleteAttachment(p)}_submitAddAttachment(g){g.preventDefault(),this.addAttachment()}_submitUpdateAttachment(g){g.preventDefault(),this.updateAttachment()}_startEditAttachment(g){const{viewModel:p}=this;p.activeAttachmentInfo=g,p.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(g){g.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(g,p){const{orientationInfo:y}=g;return!this._supportsImageOrientation&&p&&y?[y.rotation?`rotate(${y.rotation}deg)`:"",y.mirrored?"scaleX(-1)":""].join(" "):""}};(0,we._)([(0,an.B)("viewModel.abilities")],Ps.prototype,"abilities",void 0),(0,we._)([(0,Re.Cb)()],Ps.prototype,"displayType",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ps.prototype,"effectiveDisplayType",null),(0,we._)([(0,an.B)("viewModel.graphic")],Ps.prototype,"graphic",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ps.prototype,"label",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Attachments/t9n/Attachments")],Ps.prototype,"messages",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/core/t9n/Units")],Ps.prototype,"messagesUnits",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ps.prototype,"selectedFile",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ps.prototype,"submitting",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ps.prototype,"error",void 0),(0,we._)([(0,Re.Cb)({type:f2})],Ps.prototype,"viewModel",void 0),(0,we._)([(0,Re.Cb)()],Ps.prototype,"visibleElements",void 0),(0,we._)([(0,fa.p)("visibleElements")],Ps.prototype,"castVisibleElements",null),Ps=(0,we._)([(0,Tr.j)("esri.widgets.Attachments")],Ps);const eQ=Ps;let b0=class extends f2{constructor(g){super(g),this.description=null,this.title=null}};(0,we._)([(0,Re.Cb)()],b0.prototype,"description",void 0),(0,we._)([(0,Re.Cb)()],b0.prototype,"title",void 0),b0=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],b0);const m2=b0;function tv(g,p){const y=`h${(0,_0.uZ)(Math.ceil(g.level),1,6)}`;return delete g.level,(0,Bt.u)(y,nn(Ot({},g),{class:(0,Lo.Sh)("esri-widget__heading",g.class)}),p)}let mf=class extends ns.Z{constructor(g,p){super(g,p),this.description=null,this.headingLevel=2,this.title=null}render(){return(0,Bt.u)("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:g}=this;return g?(0,Bt.u)(tv,{level:this.headingLevel,class:"esri-feature-element-info__title"},g):null}renderDescription(){const{description:g}=this;return g?(0,Bt.u)("div",{key:"description",class:"esri-feature-element-info__description"},g):null}};(0,we._)([(0,Re.Cb)()],mf.prototype,"description",void 0),(0,we._)([(0,Re.Cb)()],mf.prototype,"headingLevel",void 0),(0,we._)([(0,Re.Cb)()],mf.prototype,"title",void 0),mf=(0,we._)([(0,Tr.j)("esri.widgets.Feature.support.FeatureElementInfo")],mf);const y2=mf;let uu=class extends ns.Z{constructor(g,p){super(g,p),this._featureElementInfo=null,this.attachmentsWidget=new eQ,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new m2}initialize(){this._featureElementInfo=new y2,(0,Br.S1)(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo()),(0,Br.S1)(this,"viewModel.graphic",g=>this.attachmentsWidget.graphic=g)}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var g;const{attachmentsWidget:p}=this;return(0,Bt.u)("div",{class:"esri-feature-attachments"},null==(g=this._featureElementInfo)?void 0:g.render(),null==p?void 0:p.render())}_setupFeatureElementInfo(){const{description:g,title:p,headingLevel:y}=this;this._featureElementInfo.set({description:g,title:p,headingLevel:y})}};(0,we._)([(0,Re.Cb)({readOnly:!0})],uu.prototype,"attachmentsWidget",void 0),(0,we._)([(0,an.B)("viewModel.description")],uu.prototype,"description",void 0),(0,we._)([(0,an.B)("attachmentsWidget.displayType")],uu.prototype,"displayType",void 0),(0,we._)([(0,an.B)("viewModel.graphic")],uu.prototype,"graphic",void 0),(0,we._)([(0,Re.Cb)()],uu.prototype,"headingLevel",void 0),(0,we._)([(0,an.B)("viewModel.title")],uu.prototype,"title",void 0),(0,we._)([(0,Re.Cb)({type:m2})],uu.prototype,"viewModel",void 0),uu=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureAttachments")],uu);const nQ=uu;let Fc=class extends((0,Lc.p)(pi.Z)){constructor(g){super(g),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add((0,Br.S1)(this,"creator",p=>{this._destroyContent(),this._createContent(p)}))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:g,graphic:p,destroyer:y}=this;g&&(qy(y,{graphic:p}).catch(()=>null),this._set("created",null))}_createContent(g){var p=this;return(0,qr.Z)(function*(){const{graphic:y}=p,v=qy(g,{graphic:y}).catch(()=>null);p._loadingPromise=v,p.notifyChange("state");const _=yield v;v===p._loadingPromise&&(p._loadingPromise=null,p.notifyChange("state"),p._set("created",_))})()}};(0,we._)([(0,Re.Cb)({readOnly:!0})],Fc.prototype,"created",void 0),(0,we._)([(0,Re.Cb)()],Fc.prototype,"creator",void 0),(0,we._)([(0,Re.Cb)()],Fc.prototype,"destroyer",void 0),(0,we._)([(0,Re.Cb)({type:hf.Z})],Fc.prototype,"graphic",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Fc.prototype,"state",null),Fc=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Fc);const rv=Fc;var gf=C(40669);let yf=class extends ns.Z{constructor(g,p){super(g,p),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=y=>{Array.from(y.querySelectorAll("a")).forEach(v=>{oR(v.href)&&!v.hasAttribute("target")&&v.setAttribute("target","_blank")})}}renderLoading(){return(0,Bt.u)("div",{class:"esri-feature-content__loader-container",key:"loader"},(0,Bt.u)("div",{class:"esri-feature-content__loader"}))}renderCreated(){var g;const p=null==(g=this.viewModel)?void 0:g.created;return p?p instanceof HTMLElement?(0,Bt.u)("div",{key:p,bind:p,afterCreate:this._attachToNode}):(0,gf.Qd)(p)?(0,Bt.u)("div",{key:p},!p.destroyed&&p.render()):(0,Bt.u)("div",{key:p,innerHTML:p,afterCreate:this._addTargetToAnchors}):null}render(){var g;const p=null==(g=this.viewModel)?void 0:g.state;return(0,Bt.u)("div",{class:"esri-feature-content"},"loading"===p?this.renderLoading():this.renderCreated())}_attachToNode(g){g.appendChild(this)}};(0,we._)([(0,an.B)("viewModel.creator")],yf.prototype,"creator",void 0),(0,we._)([(0,an.B)("viewModel.graphic")],yf.prototype,"graphic",void 0),(0,we._)([(0,Re.Cb)({type:rv})],yf.prototype,"viewModel",void 0),yf=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureContent")],yf);const nv=yf;var iQ=C(38439),vR=C(25621);let ku=class extends pi.Z{constructor(g){super(g),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:g,fieldInfos:p}=this,y=[];return null==p||p.forEach(v=>{if(v.hasOwnProperty("visible")&&!v.visible)return;const _=v.clone();_.label=aR(_,g),y.push(_)}),y}};(0,we._)([(0,Re.Cb)()],ku.prototype,"attributes",void 0),(0,we._)([(0,Re.Cb)({type:[iQ.Z]})],ku.prototype,"expressionInfos",void 0),(0,we._)([(0,Re.Cb)()],ku.prototype,"description",void 0),(0,we._)([(0,Re.Cb)({type:[vR.Z]})],ku.prototype,"fieldInfos",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ku.prototype,"formattedFieldInfos",null),(0,we._)([(0,Re.Cb)()],ku.prototype,"title",void 0),ku=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],ku);const iv=ku,oQ=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];let Tl=class extends ns.Z{constructor(g,p){super(g,p),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new iv,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new y2,(0,Br.S1)(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(g,p){const{attributes:y}=this.viewModel,v=g.fieldName,_=g.label||v,E=y?null==y[v]?"":y[v]:"",w=!(!g.format||!g.format.dateFormat),D="number"!=typeof E||w?function aQ(g,p){if("string"!=typeof p||!p)return p;const y=function sQ(g){let p=null;return oQ.some(y=>(y.pattern.test(g)&&(p=y),!!p)),p}(p);if(!y)return p;const v=p.match(y.pattern),E=(0,ff.gx)((0,ff.gx)(y.label,{messages:g,hierPart:v&&v[2]}),{appName:y.appName});return p.replace(y.pattern,`<a${y.target?` target="${y.target}"`:""} href="$1"${"_blank"===y.target?' rel="noreferrer"':""}>${E}</a>`)}(this.messagesURIUtils,E):this._forceLTR(E),O={"esri-feature-fields__field-data--date":w};return(0,Bt.u)("tr",{key:`fields-element-info-row-${v}-${p}`},(0,Bt.u)("th",{key:`fields-element-info-row-header-${v}-${p}`,class:"esri-feature-fields__field-header",innerHTML:_}),(0,Bt.u)("td",{key:`fields-element-info-row-data-${v}-${p}`,class:this.classes("esri-feature-fields__field-data",O),innerHTML:D}))}renderFields(){const{formattedFieldInfos:g}=this.viewModel;return null!=g&&g.length?(0,Bt.u)("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},(0,Bt.u)("tbody",null,g.map((p,y)=>this.renderFieldInfo(p,y)))):null}render(){var g;return(0,Bt.u)("div",{class:"esri-feature-fields"},null==(g=this._featureElementInfo)?void 0:g.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:g,title:p}=this;this._featureElementInfo.set({description:g,title:p})}_forceLTR(g){return`&lrm;${g}`}};(0,we._)([(0,an.B)("viewModel.attributes")],Tl.prototype,"attributes",void 0),(0,we._)([(0,an.B)("viewModel.description")],Tl.prototype,"description",void 0),(0,we._)([(0,an.B)("viewModel.expressionInfos")],Tl.prototype,"expressionInfos",void 0),(0,we._)([(0,an.B)("viewModel.fieldInfos")],Tl.prototype,"fieldInfos",void 0),(0,we._)([(0,an.B)("viewModel.title")],Tl.prototype,"title",void 0),(0,we._)([(0,Re.Cb)({type:iv})],Tl.prototype,"viewModel",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Feature/t9n/Feature")],Tl.prototype,"messages",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/support/t9n/uriUtils")],Tl.prototype,"messagesURIUtils",void 0),Tl=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureFields")],Tl);const _R=Tl;var lQ=C(77891),_2=C(84952),uQ=C(67010),cQ=C(60776),dQ=C(4728);const ER=Eo.Z.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),bR=new Map;function w0(g){if(!Vu(g))return null;const[p,y]=g.split("/").slice(1);return{layerId:p,fieldName:y}}function pQ({originRelationship:g,relationships:p,layerId:y}){let v;return p&&p.some(_=>(`${_.relatedTableId}`===y&&_.id===g.id&&(v=_),!!v)),v}function mQ(g,p){const y=p.toLowerCase();for(const v in g)if(v.toLowerCase()===y)return g[v];return null}function vQ(g,p,y,v){const _=new uQ.Z;return _.outFields=["*"],_.relationshipId="number"==typeof p.id?p.id:parseInt(p.id,10),_.objectIds=[g.attributes[y.objectIdField]],y.queryRelatedFeatures(_,v)}function _Q(g,p,y){let v=0;const _=[];for(;v<p.length;)_.push(`${g} IN (${p.slice(v,y+v)})`),v+=y;return _.join(" OR ")}function E2(){return E2=(0,qr.Z)(function*(g,p,y,v){const _=y.layerId.toString(),{layerInfo:E,queryTask:w,relation:D,relatedFields:O,outStatistics:A}=p,W=pQ({originRelationship:D,relationships:E.relationships,layerId:_});if(W.relationshipTableId&&W.keyFieldInRelationshipTable){const _e=(yield vQ(g,W,y,v))[g.attributes[y.objectIdField]];if(!_e)return null;const be=_e.features.map(We=>We.attributes[E.objectIdField]);if((null==A?void 0:A.length)>0&&E.supportsStatistics){const We=new _2.Z;We.where=_Q(E.objectIdField,be,1e3),We.outFields=O,We.outStatistics=A;const qe={features:Promise.resolve(_e),statsFeatures:w.execute(We)};return(0,ni.as)(qe)}}const q=null==W?void 0:W.keyField;if(q){const _e=(0,q3.H7)(xQ(E.fields,q)),be=mQ(g.attributes,D.keyField),We=_e?`${q}=${be}`:`${q}='${be}'`,qe=w.execute(new _2.Z({where:We,outFields:p.relatedFields}),v),dt=p.outStatistics&&p.outStatistics.length>0&&E.supportsStatistics?w.execute(new _2.Z({where:We,outFields:p.relatedFields,outStatistics:p.outStatistics}),v):null,gt={features:qe};return dt&&(gt.statsFeatures=dt),(0,ni.as)(gt)}return null}),E2.apply(this,arguments)}function xQ(g,p){if(null!=g){p=p.toLowerCase();for(const y of g)if(y&&y.name.toLowerCase()===p)return y}return null}let Cs=class extends pi.Z{constructor(g){super(g),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(g){this._setContentElementMedia(g)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(g){const{formattedMediaInfoCount:p}=this;this.activeMediaInfoIndex=(g+p)%p}_pageContentElementMedia(g){const{activeMediaInfoIndex:p}=this;this._setContentElementMedia(p+g)}_formatMediaInfos(){const{attributes:g,mediaInfos:p,formattedAttributes:y,expressionAttributes:v,fieldInfoMap:_,layer:E}=this;return null==p?void 0:p.map(w=>{const D=null==w?void 0:w.clone();if(!D)return null;if(D.title=Ad({attributes:g,fieldInfoMap:_,globalAttributes:y,expressionAttributes:v,layer:E,text:D.title}),D.caption=Ad({attributes:g,fieldInfoMap:_,globalAttributes:y,expressionAttributes:v,layer:E,text:D.caption}),D.altText=Ad({attributes:g,fieldInfoMap:_,globalAttributes:y,expressionAttributes:v,layer:E,text:D.altText}),"image"===D.type){const{value:O}=D;return this._setImageValue({value:O,formattedAttributes:y,layer:E}),D.value.sourceURL?D:void 0}if("pie-chart"===D.type||"line-chart"===D.type||"column-chart"===D.type||"bar-chart"===D.type){const{value:O}=D;return this._setChartValue({value:O,chartType:D.type,attributes:g,formattedAttributes:y,layer:E}),D}return null}).filter(Boolean)}_setImageValue(g){const{fieldInfoMap:p}=this,{value:y,formattedAttributes:v,layer:_}=g,{linkURL:E,sourceURL:w}=y;if(w){const D=a2(w,_);y.sourceURL=s2({formattedAttributes:v,template:D,fieldInfoMap:p})}if(E){const D=a2(E,_);y.linkURL=s2({formattedAttributes:v,template:D,fieldInfoMap:p})}}_setChartValue(g){const{value:p,attributes:y,formattedAttributes:v,chartType:_,layer:E}=g,{popupTemplate:w,relatedInfos:D}=this,{fields:O,normalizeField:A}=p;if(p.fields=function IX(g,p){return g&&g.map(y=>ev(y,p))}(O,E),A&&(p.normalizeField=ev(A,E)),!O.some(q=>!!(null!=v[q]||Vu(q)&&D.size)))return;const W=null==w?void 0:w.fieldInfos;O.forEach(q=>{if(Vu(q))return void(p.series=[...p.series,...this._getRelatedChartInfos({fieldInfos:W,fieldName:q,formattedAttributes:v,chartType:_,value:p})]);const _e=this._getChartOption({value:p,attributes:y,chartType:_,formattedAttributes:v,fieldName:q,fieldInfos:W});p.series.push(_e)})}_getRelatedChartInfos(g){var p;const{fieldInfos:y,fieldName:v,formattedAttributes:_,chartType:E,value:w}=g,D=[],O=w0(v),{layerId:A,fieldName:W}=O,q=null==(p=this.relatedInfos)?void 0:p.get(A.toString());if(!q)return D;const{relatedFeatures:_e,relation:be}=q;if(!be||!_e)return D;const{cardinality:We}=be;return _e.forEach(qe=>{const{attributes:dt}=qe;dt&&Object.keys(dt).forEach(gt=>{gt===W&&D.push(this._getChartOption({value:w,attributes:dt,formattedAttributes:_,fieldName:v,chartType:E,relatedFieldName:gt,fieldInfos:y}))})}),"one-to-many"===We||"many-to-many"===We?D:[D[0]]}_getTooltip({label:g,value:p,chartType:y}){return"pie-chart"===y?g:`${g}: ${p}`}_getChartOption(g){var p;const{value:y,attributes:v,formattedAttributes:_,fieldName:E,relatedFieldName:w,fieldInfos:D,chartType:O}=g,{layer:A}=this,{normalizeField:W,tooltipField:q}=y,_e=W?Vu(W)?v[w0(W).fieldName]:v[W]:null,be=w&&void 0!==v[w]?v[w]:void 0!==v[E]?v[E]:_[E],We=void 0===be?null:be&&_e?be/_e:be,qe=new lQ.Z({value:We});if(Vu(E)){const Rt=w0(E),Xt=w0(q),ur=Xt?Xt.fieldName:null,_r=uR(We,{fieldInfos:D,fieldName:w,layer:A,preventPlacesFormatting:!!_e}),Ur=Rt?Rt.label||Rt.fieldName:w;return qe.tooltip=this._getTooltip({label:ur&&void 0!==v[ur]?v[ur]:Ur,value:_r,chartType:O}),qe}const dt=cR(D,E),gt=ev(E,A),lt=q&&void 0!==_[q]?_[q]:aR(dt||new vR.Z({fieldName:gt}),null==(p=this.popupTemplate)?void 0:p.expressionInfos);return qe.tooltip=this._getTooltip({label:lt,value:_[gt],chartType:O}),qe}};(0,we._)([(0,Re.Cb)()],Cs.prototype,"activeMediaInfoIndex",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Cs.prototype,"activeMediaInfo",null),(0,we._)([(0,Re.Cb)()],Cs.prototype,"attributes",void 0),(0,we._)([(0,Re.Cb)()],Cs.prototype,"description",void 0),(0,we._)([(0,Re.Cb)()],Cs.prototype,"fieldInfoMap",void 0),(0,we._)([(0,Re.Cb)()],Cs.prototype,"formattedAttributes",void 0),(0,we._)([(0,Re.Cb)()],Cs.prototype,"expressionAttributes",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Cs.prototype,"formattedMediaInfos",null),(0,we._)([(0,Re.Cb)()],Cs.prototype,"layer",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Cs.prototype,"formattedMediaInfoCount",null),(0,we._)([(0,Re.Cb)()],Cs.prototype,"mediaInfos",void 0),(0,we._)([(0,Re.Cb)()],Cs.prototype,"popupTemplate",void 0),(0,we._)([(0,Re.Cb)()],Cs.prototype,"relatedInfos",void 0),(0,we._)([(0,Re.Cb)()],Cs.prototype,"title",void 0),Cs=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Cs);const Pd=Cs;var CR=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],SQ=[{name:"default",colors:[].concat(CR.slice(30,39),CR.slice(28,30).reverse())},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],OQ=C(56683);const b2=new Map([["ar",()=>C.e(3309).then(C.bind(C,93309)).then(g=>g.a)],["bg-bg",()=>C.e(2504).then(C.bind(C,82504)).then(g=>g.b)],["bs-ba",()=>C.e(88).then(C.bind(C,88)).then(g=>g.b)],["ca-es",()=>C.e(2371).then(C.bind(C,32371)).then(g=>g.c)],["cs-cz",()=>C.e(3690).then(C.bind(C,93690)).then(g=>g.c)],["da-dk",()=>C.e(2125).then(C.bind(C,42125)).then(g=>g.d)],["de-de",()=>C.e(7396).then(C.bind(C,7396)).then(g=>g.d)],["de-ch",()=>C.e(2479).then(C.bind(C,62479)).then(g=>g.d)],["el-gr",()=>C.e(9548).then(C.bind(C,39548)).then(g=>g.e)],["en-us",()=>C.e(700).then(C.bind(C,20700)).then(g=>g.e)],["en-ca",()=>C.e(7028).then(C.bind(C,37028)).then(g=>g.e)],["es-es",()=>C.e(4824).then(C.bind(C,54824)).then(g=>g.e)],["et-ee",()=>C.e(3914).then(C.bind(C,23914)).then(g=>g.e)],["fi-fi",()=>C.e(1299).then(C.bind(C,1299)).then(g=>g.f)],["fr-fr",()=>C.e(9856).then(C.bind(C,39856)).then(g=>g.f)],["he-il",()=>C.e(4609).then(C.bind(C,24609)).then(g=>g.h)],["hr-hr",()=>C.e(7731).then(C.bind(C,87731)).then(g=>g.h)],["hu-hu",()=>C.e(7127).then(C.bind(C,57127)).then(g=>g.h)],["id-id",()=>C.e(6560).then(C.bind(C,36560)).then(g=>g.i)],["it-it",()=>C.e(7708).then(C.bind(C,67708)).then(g=>g.i)],["ja-jp",()=>C.e(6651).then(C.bind(C,36651)).then(g=>g.j)],["ko-kr",()=>C.e(7016).then(C.bind(C,7016)).then(g=>g.k)],["lt-lt",()=>C.e(5010).then(C.bind(C,5010)).then(g=>g.l)],["lv-lv",()=>C.e(2620).then(C.bind(C,92620)).then(g=>g.l)],["nb-no",()=>C.e(5237).then(C.bind(C,55237)).then(g=>g.n)],["nl-nl",()=>C.e(948).then(C.bind(C,948)).then(g=>g.n)],["pl-pl",()=>C.e(8351).then(C.bind(C,58351)).then(g=>g.p)],["pt-br",()=>C.e(6681).then(C.bind(C,86681)).then(g=>g.p)],["pt-pt",()=>C.e(8110).then(C.bind(C,48110)).then(g=>g.p)],["ro-ro",()=>C.e(8372).then(C.bind(C,78372)).then(g=>g.r)],["ru-ru",()=>C.e(8073).then(C.bind(C,88073)).then(g=>g.r)],["sk-sk",()=>C.e(7419).then(C.bind(C,7419)).then(g=>g.s)],["sl-sl",()=>C.e(1218).then(C.bind(C,11218)).then(g=>g.s)],["sr-rs",()=>C.e(5302).then(C.bind(C,85302)).then(g=>g.s)],["sv-se",()=>C.e(6079).then(C.bind(C,86079)).then(g=>g.s)],["th-th",()=>C.e(5508).then(C.bind(C,55508)).then(g=>g.t)],["tr-tr",()=>C.e(6844).then(C.bind(C,56844)).then(g=>g.t)],["uk-ua",()=>C.e(4978).then(C.bind(C,4978)).then(g=>g.u)],["vi-vn",()=>C.e(9202).then(C.bind(C,29202)).then(g=>g.v)],["zh-cn",()=>C.e(865).then(C.bind(C,70865)).then(g=>g.z)],["zh-hk",()=>C.e(3207).then(C.bind(C,3207)).then(g=>g.z)],["zh-tw",()=>C.e(3207).then(C.bind(C,3207)).then(g=>g.z)]]);function TQ(g){return g?b2.has(g.toLowerCase())?g.toLowerCase():function IQ(g){const p=g.split("-")[0].toLowerCase();let y=null;for(const v of b2.keys())if(v.startsWith(p)){y=v;break}return y}(g)||"en-us":"en-us"}let vf,M0;function C2(){return C2=(0,qr.Z)(function*(g=(0,OQ.Kd)()){if(g=TQ(g),vf&&g===M0)return vf;vf=C.e(4430).then(C.bind(C,4430)).then(p=>p.i),M0=g;try{const[p,y]=yield Promise.all([vf,b2.get(M0)()]);M0===g&&(p.am4core.options.defaultLocale=y.default),p.am4core.options.suppressWarnings=!0,p.am4core.options.autoDispose=!0}catch(p){return vf=null,M0=null,null}return vf}),C2.apply(this,arguments)}const ao_mediaIcon="esri-feature-media__icon";let ma=class extends ns.Z{constructor(g,p){var y;super(g,p),y=this,this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new Pd,this.messages=null,this._getChartDependencies=function(){var v=(0,qr.Z)(function*(_){const E=yield function AQ(){return C2.apply(this,arguments)}(),{viewModel:w}=y;if(!w)return;const{activeMediaInfo:D}=w;y._renderChart({chartDiv:_,mediaInfo:D,chartsModule:E})});return function(_){return v.apply(this,arguments)}}()}initialize(){this._featureElementInfo=new y2,this.own((0,Br.S1)(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),(0,Br.S1)(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var g;return(0,Bt.u)("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(g=this._featureElementInfo)?void 0:g.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:g}=this.viewModel;return g?(0,Bt.u)("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(g){const{_refreshIntervalInfo:p}=this,{activeMediaInfoIndex:y,formattedMediaInfoCount:v}=this.viewModel,{value:_,refreshInterval:E,altText:w,title:D,type:O}=g,{sourceURL:A,linkURL:W}=_,q=oR(W)?"_blank":"_self",_e="_blank"===q?"noreferrer":"",be=E?p:null,dt=(0,Bt.u)("img",{alt:w||D,key:`media-${O}-${y}-${v}-${be?be.timestamp:0}`,src:be?be.sourceURL:A});return(W?(0,Bt.u)("a",{title:D,href:W,rel:_e,target:q},dt):null)||dt}renderChartMediaInfo(g){const{activeMediaInfoIndex:p,formattedMediaInfoCount:y}=this.viewModel;return(0,Bt.u)("div",{key:`media-${g.type}-${p}-${y}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:g}=this.viewModel;return g?"image"===g.type?this.renderImageMediaInfo(g):-1!==g.type.indexOf("chart")?this.renderChartMediaInfo(g):null:null}renderMediaInfo(){const{activeMediaInfo:g}=this.viewModel;if(!g)return null;const p=g.title?(0,Bt.u)("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:g.title}):null,y=g.caption?(0,Bt.u)("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:g.caption}):null;return(0,Bt.u)("div",{key:"media-container",class:"esri-feature-media__item-container"},(0,Bt.u)("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),p,y)}renderMediaPageButton(g){if(this.viewModel.formattedMediaInfoCount<2)return null;const p="previous"===g,y=p?this.messages.previous:this.messages.next,v=this.classes("esri-feature-media__button",p?"esri-feature-media__previous":"esri-feature-media__next"),_=p?this.classes(ao_mediaIcon,"esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes(ao_mediaIcon,"esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),E=p?this.classes(ao_mediaIcon,"esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes(ao_mediaIcon,"esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return(0,Bt.u)("button",{type:"button",key:p?"media-previous":"media-next",title:y,"aria-label":y,tabIndex:0,class:v,bind:this,onclick:p?this._previous:this._next},(0,Bt.u)("span",{"aria-hidden":"true",class:_}),(0,Bt.u)("span",{"aria-hidden":"true",class:E}))}_setupFeatureElementInfo(){const{description:g,title:p}=this;this._featureElementInfo.set({description:g,title:p})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_handleMediaKeyup(g){const p=(0,Rc.kK)(g);"ArrowLeft"===p&&(g.stopPropagation(),this.viewModel.previous()),"ArrowRight"===p&&(g.stopPropagation(),this.viewModel.next())}_renderChart(g){const{chartsModule:p,chartDiv:y,mediaInfo:v}=g,{value:_,type:E}=v,{am4core:w}=p,D=function PQ(g,p="default"){const y=SQ.find(v=>v.name===p);return y?y.colors.map(v=>g.color(v)):null}(w);(0,Lo.$o)()&&w.useTheme(p.am4themes_dark),w.useTheme(p.am4themes_animated),w.useTheme(function O(W){W instanceof w.ColorSet&&D&&(W.list=D)});const A="pie-chart"===E?this._createPieChart(g):this._createXYChart(g);y.setAttribute("aria-label",v.altText||v.title),A.data=_.series.map(W=>({tooltip:W.tooltip,value:W.value})).filter(W=>"pie-chart"!==E||W.value>0)}_customizeChartTooltip(g,p){g.label.wrap=!0,g.label.maxWidth=200,g.autoTextColor=!1,g.getFillFromObject=!1,g.label.fill=p.color("#ffffff"),g.background.fill=p.color({r:0,g:0,b:0,a:.7})}_createPieChart(g){const{chartDiv:p,chartsModule:y}=g,{am4core:v,am4charts:_}=y,E=v.create(p,_.PieChart);E.rtl=(0,Lo.dZ)(this.container);const w=E.series.push(new _.PieSeries);return w.labels.template.disabled=!0,w.ticks.template.disabled=!0,w.dataFields.value="value",w.dataFields.category="tooltip",this._customizeChartTooltip(w.tooltip,v),E}_getMinSeriesValue(g){let p=0;return g.forEach(y=>p=Math.min(y.value,p)),p}_createColumnChart(g,p){const{chartsModule:y,mediaInfo:v}=p,{value:_}=v,{am4core:E,am4charts:w}=y,D=g.xAxes.push(new w.CategoryAxis);D.dataFields.category="tooltip",D.renderer.labels.template.disabled=!0,this._customizeChartTooltip(D.tooltip,E),D.tooltip.events.on("sizechanged",()=>{D.tooltip.dy=-D.tooltip.contentHeight});const O=g.yAxes.push(new w.ValueAxis),A=O.renderer.labels.template;O.renderer.minLabelPosition=.05,O.renderer.maxLabelPosition=.95,O.min=this._getMinSeriesValue(_.series),this._customizeChartTooltip(O.tooltip,E),A.wrap=!0;const W=g.series.push(new w.ColumnSeries);W.dataFields.valueY="value",W.dataFields.categoryX="tooltip",g.cursor=new w.XYCursor,_.series.length>15&&(g.scrollbarX=new E.Scrollbar)}_createBarChart(g,p){const{chartsModule:y,mediaInfo:v}=p,{value:_}=v,{am4core:E,am4charts:w}=y,D=g.yAxes.push(new w.CategoryAxis);D.dataFields.category="tooltip",D.renderer.inversed=!0,D.renderer.labels.template.disabled=!0,this._customizeChartTooltip(D.tooltip,E),D.tooltip.events.on("sizechanged",()=>{D.tooltip.dx=D.tooltip.contentWidth});const O=g.xAxes.push(new w.ValueAxis),A=O.renderer.labels.template;O.renderer.minLabelPosition=.05,O.renderer.maxLabelPosition=.95,O.min=this._getMinSeriesValue(_.series),this._customizeChartTooltip(O.tooltip,E),A.wrap=!0;const W=g.series.push(new w.ColumnSeries);W.dataFields.valueX="value",W.dataFields.categoryY="tooltip",g.cursor=new w.XYCursor,_.series.length>15&&(g.scrollbarY=new E.Scrollbar)}_createLineChart(g,p){const{chartsModule:y,mediaInfo:v}=p,{value:_}=v,{am4core:E,am4charts:w}=y,D=g.xAxes.push(new w.CategoryAxis);D.dataFields.category="tooltip",D.renderer.labels.template.disabled=!0,this._customizeChartTooltip(D.tooltip,E),D.tooltip.events.on("sizechanged",()=>{D.tooltip.dy=-D.tooltip.contentHeight});const O=g.yAxes.push(new w.ValueAxis),A=O.renderer.labels.template;O.renderer.minLabelPosition=.05,O.renderer.maxLabelPosition=.95,O.min=this._getMinSeriesValue(_.series),this._customizeChartTooltip(O.tooltip,E),A.wrap=!0;const W=g.series.push(new w.LineSeries);W.dataFields.categoryX="tooltip",W.dataFields.valueY="value",g.cursor=new w.XYCursor,_.series.length>15&&(g.scrollbarX=new E.Scrollbar)}_createXYChart(g){const{chartDiv:p,chartsModule:y,mediaInfo:v}=g,{type:_}=v,{am4core:E,am4charts:w}=y,D=E.create(p,w.XYChart);return D.rtl=(0,Lo.dZ)(this.container),"column-chart"===_&&this._createColumnChart(D,g),"bar-chart"===_&&this._createBarChart(D,g),"line-chart"===_&&this._createLineChart(D,g),D}_clearMediaRefreshTimer(){const{_refreshTimer:g}=this;g&&(clearTimeout(g),this._refreshTimer=null)}_updateMediaInfoTimestamp(g){const p=Date.now();this._refreshIntervalInfo={timestamp:p,sourceURL:this._getImageSource(g,p)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:g}=this.viewModel;g&&"image"===g.type&&g.refreshInterval&&this._setRefreshTimeout(g)}_setRefreshTimeout(g){const{refreshInterval:p,value:y}=g;if(!p)return;const v=6e4*p;this._updateMediaInfoTimestamp(y.sourceURL);const _=setInterval(()=>{this._updateMediaInfoTimestamp(y.sourceURL)},v);this._refreshTimer=_}_getImageSource(g,p){const y=-1!==g.indexOf("?")?"&":"?",[v,_=""]=g.split("#");return`${v}${y}timestamp=${p}${_?"#":""}${_}`}};(0,we._)([(0,an.B)("viewModel.attributes")],ma.prototype,"attributes",void 0),(0,we._)([(0,an.B)("viewModel.activeMediaInfoIndex")],ma.prototype,"activeMediaInfoIndex",void 0),(0,we._)([(0,an.B)("viewModel.description")],ma.prototype,"description",void 0),(0,we._)([(0,an.B)("viewModel.fieldInfoMap")],ma.prototype,"fieldInfoMap",void 0),(0,we._)([(0,an.B)("viewModel.layer")],ma.prototype,"layer",void 0),(0,we._)([(0,an.B)("viewModel.mediaInfos")],ma.prototype,"mediaInfos",void 0),(0,we._)([(0,an.B)("viewModel.popupTemplate")],ma.prototype,"popupTemplate",void 0),(0,we._)([(0,an.B)("viewModel.relatedInfos")],ma.prototype,"relatedInfos",void 0),(0,we._)([(0,an.B)("viewModel.title")],ma.prototype,"title",void 0),(0,we._)([(0,Re.Cb)({type:Pd})],ma.prototype,"viewModel",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Feature/t9n/Feature")],ma.prototype,"messages",void 0),ma=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureMedia")],ma);const MR=ma;var RQ=C(47562),LQ=(C(55664),C(55013),C(16615),C(82561),C(75484)),NQ=C(64531),xR=C(501),FQ=C(38159),jQ=C(15382);const BQ=["$datastore","$map","$layer","$aggregatedfeatures"],VQ=Eo.Z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function kQ(g){return"string"==typeof g?E0(l2(g)):Array.isArray(g)?function WQ(g){return`<ul class="esri-widget__list">${g.map(p=>`<li>${"string"==typeof p?E0(l2(p)):p}</li>`).join("")}</ul>`}(g):"esri.arcade.Dictionary"===(null==g?void 0:g.declaredClass)?function ZQ(g){return`<table class="esri-widget__table">${g.keys().map(p=>{const y=g.field(p);return`<tr><th>${p}</th><td>${"string"==typeof y?E0(l2(y)):y}</td></tr>`}).join("")}</table>`}(g):g}function $Q({aggregatedFeatures:g,arcadeUtils:p,featureSetVars:y,context:v,viewInfo:_,map:E,graphic:w,interceptor:D}){y.forEach(O=>{const A=O.toLowerCase();if("$map"===A&&(v.vars[A]=p.convertMapToFeatureSetCollection({map:E,spatialReference:_.sr,interceptor:D})),"$layer"===A&&(v.vars[A]=p.convertFeatureLayerToFeatureSet({layer:w.sourceLayer,spatialReference:_.sr,interceptor:D})),"$datastore"===A&&(v.vars[A]=p.convertServiceUrlToWorkspace({url:w.sourceLayer.url,spatialReference:_.sr,interceptor:D})),"$aggregatedfeatures"===A){const q=w.layer,{fields:_e,objectIdField:be,geometryType:We,spatialReference:qe,displayField:dt}=q,gt=new jQ.default(nn(Ot({fields:_e,objectIdField:be,geometryType:We,spatialReference:qe,displayField:dt},"feature"===q.type?{templates:q.templates,typeIdField:q.typeIdField,types:q.types}:null),{source:g}));v.vars[A]=p.convertFeatureLayerToFeatureSet({layer:gt,spatialReference:_.sr,interceptor:D})}})}function DR(){return C.e(5068).then(C.bind(C,75068))}function KQ(g){return D2.apply(this,arguments)}function D2(){return D2=(0,qr.Z)(function*({graphic:g,view:p}){const{isAggregate:y,layer:v}=g;if(!y||!v||"2d"!==(null==p?void 0:p.type))return[];const _=yield p.whenLayerView(v);if(!_.createQuery||!_.queryFeatures)return[];const E=_.createQuery();E.aggregateIds=[g.getObjectId()];const{features:w}=yield _.queryFeatures(E);return w}),D2.apply(this,arguments)}function SR(g){return S2.apply(this,arguments)}function S2(){return S2=(0,qr.Z)(function*({expressionInfo:g,arcadeUtils:p,interceptor:y,spatialReference:v,map:_,graphic:E,view:w}){if(!g||!g.expression)return null;const D=p.createSyntaxTree(g.expression),O=BQ.filter(be=>p.hasVariable(D,be)),[A]=yield(0,ni.$6)([KQ({graphic:E,view:w}),p.loadScriptDependencies(D,!0,O)]),W=p.getViewInfo({spatialReference:v}),q=p.createExecContext(E,W);q.interceptor=y,q.useAsync=!0,$Q({aggregatedFeatures:A,arcadeUtils:p,featureSetVars:O,context:q,viewInfo:W,map:_,graphic:E,interceptor:y});const _e=p.createFunction(D,q);return p.executeAsyncFunction(_e,q).catch(be=>VQ.error("arcade-execution-error",{error:be,graphic:E,expressionInfo:g}))}),S2.apply(this,arguments)}function zQ(g){return O2.apply(this,arguments)}function O2(){return O2=(0,qr.Z)(function*({expressionInfos:g,spatialReference:p,graphic:y,interceptor:v,map:_,view:E}){if(!g||!g.length)return{};const w=yield DR(),D={};for(const W of g)D[`expression/${W.name}`]=SR({expressionInfo:W,arcadeUtils:w,interceptor:v,spatialReference:p,map:_,graphic:y,view:E});const O=yield(0,ni.as)(D),A={};for(const W in O)A[W]=kQ(O[W].value);return A}),O2.apply(this,arguments)}let La=class extends((0,Lc.p)(pi.Z)){constructor(g){var p;super(g),p=this,this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:y}=this;y&&y.abort(),this._abortController=null},this._createVM=()=>{var y,v;const _=null==(y=this.contentElement)?void 0:y.type;null==(v=this.contentElementViewModel)||v.destroy();const E="fields"===_?new iv:"media"===_?new Pd:"text"===_?new rv:null;this._set("contentElementViewModel",E)},this._compile=(0,qr.Z)(function*(){p._cancelQuery();const y=new AbortController;p._abortController=y,yield p._compileExpression(),p._abortController===y&&(p._abortController=null)}),this._compileThrottled=(0,t2.P)(this._compile,1,this),this._compileExpression=(0,qr.Z)(function*(){const{expressionInfo:y,graphic:v,interceptor:_,spatialReference:E,map:w,view:D,_abortController:O}=p;if(!(y&&v&&E&&w&&D))return void p._set("contentElement",null);const A=yield DR();if(O!==p._abortController)return;const W=yield SR({arcadeUtils:A,expressionInfo:y,graphic:v,interceptor:_,map:w,spatialReference:E,view:D});if(!W||"esri.arcade.Dictionary"!==W.declaredClass)return void p._set("contentElement",null);const q=yield(0,RQ.w)(W,O.signal),_e=null==q?void 0:q.type,be="media"===_e?NQ.Z.fromJSON(q):"text"===_e?xR.Z.fromJSON(q):"fields"===_e?LQ.Z.fromJSON(q):null;p._set("contentElement",be)}),this.handles.add([(0,Br.S1)(this,["expressionInfo","graphic","map","spatialReference","view"],this._compileThrottled),(0,Br.S1)(this,"contentElement",this._createVM)])}destroy(){var g;this._cancelQuery(),null==(g=this.contentElementViewModel)||g.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var g;return(null==(g=this.view)?void 0:g.spatialReference)||null}set spatialReference(g){void 0!==g?this._override("spatialReference",g):this._clearOverride("spatialReference")}get state(){const{_abortController:g,contentElement:p,contentElementViewModel:y}=this;return g?"loading":p||y?"ready":"disabled"}get map(){var g;return(null==(g=this.view)?void 0:g.map)||null}set map(g){void 0!==g?this._override("map",g):this._clearOverride("map")}};(0,we._)([(0,Re.Cb)()],La.prototype,"_abortController",void 0),(0,we._)([(0,Re.Cb)({type:FQ.Z})],La.prototype,"expressionInfo",void 0),(0,we._)([(0,Re.Cb)({type:hf.Z})],La.prototype,"graphic",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],La.prototype,"contentElement",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],La.prototype,"contentElementViewModel",void 0),(0,we._)([(0,Re.Cb)()],La.prototype,"interceptor",void 0),(0,we._)([(0,Re.Cb)()],La.prototype,"spatialReference",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],La.prototype,"state",null),(0,we._)([(0,Re.Cb)()],La.prototype,"map",null),(0,we._)([(0,Re.Cb)()],La.prototype,"view",void 0),La=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],La);const I2=La;let sv=class extends ns.Z{constructor(g,p){super(g,p),this.viewModel=new I2}initialize(){(0,Br.S1)(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())}destroy(){var g;null==(g=this._contentWidget)||g.destroy(),this._contentWidget=null}renderLoading(){return(0,Bt.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,Bt.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}render(){var g;const{state:p}=this.viewModel;return(0,Bt.u)("div",{class:"esri-feature-expression"},"loading"===p?this.renderLoading():"disabled"===p?null:null==(g=this._contentWidget)?void 0:g.render())}_setupExpressionWidget(){var g;const{contentElementViewModel:p,contentElement:y}=this.viewModel,v=null==y?void 0:y.type;null==(g=this._contentWidget)||g.destroy(),this._contentWidget=null;const _=p?"fields"===v?new _R({viewModel:p}):"media"===v?new MR({viewModel:p}):"text"===v?new nv({viewModel:p}):null:null;this._contentWidget=_,this.scheduleRender()}};(0,we._)([(0,Re.Cb)({type:I2})],sv.prototype,"viewModel",void 0),sv=(0,we._)([(0,Tr.j)("esri.widgets.Feature.FeatureExpression")],sv);const HQ=sv;var av;const OR="content-view-models",IR="esri.widgets.FeatureViewModel",XQ=Eo.Z.getLogger(IR),TR={attachmentsContent:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let to=av=class extends pi.Z{constructor(g){super(g),this._handles=new Ra.Z,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=(0,t2.P)(this.graphicChanged,1,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities=Ot({},TR),this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=p=>{const{abilities:y}=this;return"attachments"===p.type&&y.attachmentsContent||"custom"===p.type&&y.customContent||"fields"===p.type&&y.fieldsContent||"media"===p.type&&y.mediaContent||"text"===p.type&&y.textContent||"expression"===p.type&&y.expressionContent},this._handles.add((0,Br.S1)(this,["graphic","_effectivePopupTemplate","abilities"],()=>this.graphicChangedThrottled()))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return(0,dr.pC)(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return function kX(g,p){const y=new Map;return g&&g.forEach(v=>{const _=ev(v.fieldName,p);v.fieldName=_,y.set(_.toLowerCase(),v)}),y}(dR(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return iR(this.graphic)}castAbilities(g){return Ot(Ot({},TR),g)}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(g){this._set("graphic",g?g.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(g){void 0!==g?this._override("spatialReference",g):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(g){void 0!==g?this._override("map",g):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(g,p){const y=this.contentViewModels[g];y instanceof Pd&&y.setActiveMedia(p)}nextMedia(g){const p=this.contentViewModels[g];p instanceof Pd&&p.next()}previousMedia(g){const p=this.contentViewModels[g];p instanceof Pd&&p.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}graphicChanged(){var g=this;return(0,qr.Z)(function*(){g._cancelFeatureQuery(),g._error=null,g._clear();const{graphic:p}=g;if(!p)return;const y=new AbortController;g._featureAbortController=y;try{yield g._queryFeature({signal:y.signal})}catch(v){(0,ni.D_)(v)||(g._error=v,XQ.error("error","The popupTemplate could not be displayed for this feature.",{error:v,graphic:p,popupTemplate:g._effectivePopupTemplate}))}g._featureAbortController===y&&(g._featureAbortController=null)})()}_cancelFeatureQuery(){const{_featureAbortController:g}=this;g&&g.abort(),this._featureAbortController=null}_compileContentElement(g,p){return"attachments"===g.type?this._compileAttachments(g,p):"custom"===g.type?this._compileCustom(g,p):"fields"===g.type?this._compileFields(g,p):"media"===g.type?this._compileMedia(g,p):"text"===g.type?this._compileText(g,p):"expression"===g.type?this._compileExpression(g,p):void 0}_compileContent(g){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(g)?g.filter(this._isAllowedContentType).map((p,y)=>this._compileContentElement(p,y)):"string"==typeof g?this._compileText(new xR.Z({text:g}),0).text:g}_destroyContentViewModels(){var g;null==(g=this._handles)||g.remove(OR),this.contentViewModels.forEach(p=>p&&!p.destroyed&&p.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(g,p){const{formattedAttributes:y}=this,{contentElement:v,contentElementViewModel:_}=g,E=null==v?void 0:v.type;_&&E&&("fields"===E&&(this._createFieldsFormattedAttributes({contentElement:v,contentElementIndex:p,formattedAttributes:y}),_.set(this._createFieldsVMParams(v,p))),"media"===E&&(this._createMediaFormattedAttributes({contentElement:v,contentElementIndex:p,formattedAttributes:y}),_.set(this._createMediaVMParams(v,p))),"text"===E&&_.set(this._createTextVMParams(v)))}_compileExpression(g,p){const{expressionInfo:y}=g,{graphic:v,map:_,spatialReference:E,view:w}=this,D=new I2({expressionInfo:y,graphic:v,interceptor:av.interceptor,map:_,spatialReference:E,view:w});return this.contentViewModels[p]=D,this._handles.add((0,Br.S1)(D,"contentElementViewModel",()=>this._setExpressionContentVM(D,p)),OR),g}_compileAttachments(g,p){const{graphic:y}=this,{description:v,title:_}=g;return this.contentViewModels[p]=new m2(Ot({graphic:y},this._compileTitleAndDesc({title:_,description:v}))),g}_compileCustom(g,p){const{graphic:y}=this,{creator:v,destroyer:_}=g;return this.contentViewModels[p]=new rv({graphic:y,creator:v,destroyer:_}),g}_compileTitleAndDesc({title:g,description:p}){const{_fieldInfoMap:y,_sourceLayer:v,graphic:_,formattedAttributes:E,_expressionAttributes:w}=this,{attributes:D}=_,O=E.global;return{title:Ad({attributes:D,fieldInfoMap:y,globalAttributes:O,expressionAttributes:w,layer:v,text:g}),description:Ad({attributes:D,fieldInfoMap:y,globalAttributes:O,expressionAttributes:w,layer:v,text:p})}}_createFieldsVMParams(g,p){const{_effectivePopupTemplate:y,formattedAttributes:v}=this,_=Ot(Ot({},v.global),v.content[p]),E=(null==g?void 0:g.fieldInfos)||(null==y?void 0:y.fieldInfos),w=null==E?void 0:E.filter(({fieldName:W})=>sR(W)||Vu(W)||_.hasOwnProperty(W)),D=null==y?void 0:y.expressionInfos,{description:O,title:A}=g;return Ot({attributes:_,expressionInfos:D,fieldInfos:w},this._compileTitleAndDesc({title:A,description:O}))}_compileFields(g,p){const y=g.clone(),v=new iv(this._createFieldsVMParams(g,p));return this.contentViewModels[p]=v,y.fieldInfos=v.formattedFieldInfos.slice(0),y}_createMediaVMParams(g,p){const{graphic:y,_fieldInfoMap:v,formattedAttributes:_,_effectivePopupTemplate:E,relatedInfos:w,_sourceLayer:D,_expressionAttributes:O}=this,{attributes:A}=y,{description:W,mediaInfos:q,title:_e}=g;return Ot({activeMediaInfoIndex:g.activeMediaInfoIndex||0,attributes:A,layer:D,fieldInfoMap:v,formattedAttributes:Ot(Ot({},_.global),_.content[p]),expressionAttributes:O,mediaInfos:q,popupTemplate:E,relatedInfos:w},this._compileTitleAndDesc({title:_e,description:W}))}_compileMedia(g,p){const y=g.clone(),v=new Pd(this._createMediaVMParams(g,p));return y.mediaInfos=v.formattedMediaInfos.slice(0),this.contentViewModels[p]=v,y}_createTextVMParams(g){const{graphic:p,_fieldInfoMap:y,_sourceLayer:v,_expressionAttributes:_}=this;if(g&&g.text){const{attributes:E}=p;g.text=Ad({attributes:E,fieldInfoMap:y,globalAttributes:this.formattedAttributes.global,expressionAttributes:_,layer:v,text:g.text})}return{graphic:p,creator:g.text}}_compileText(g,p){const y=g.clone();return this.contentViewModels[p]=new rv(this._createTextVMParams(y)),y}_compileLastEditInfo(){const{_effectivePopupTemplate:g,_sourceLayer:p,graphic:y}=this;if(!g)return;const{lastEditInfoEnabled:v}=g,_=null==p?void 0:p.editFieldsInfo;return v&&_?function VX(g,p){const{creatorField:y,creationDateField:v,editorField:_,editDateField:E}=g;if(!p)return;const w=p[E];if("number"==typeof w){const O=p[_];return{type:"edit",date:(0,Nc.p6)(w,n2),user:O}}const D=p[v];if("number"==typeof D){const O=p[y];return{type:"create",date:(0,Nc.p6)(D,n2),user:O}}return null}(_,y.attributes):void 0}_compileTitle(g){const{_fieldInfoMap:p,_sourceLayer:y,graphic:v,_expressionAttributes:_}=this,{attributes:E}=v;return Ad({attributes:E,fieldInfoMap:p,globalAttributes:this.formattedAttributes.global,expressionAttributes:_,layer:y,text:g})}_getTitle(){var g=this;return(0,qr.Z)(function*(){const{_effectivePopupTemplate:p,graphic:y}=g;return qy(null==p?void 0:p.title,{graphic:y})})()}_getContent(){var g=this;return(0,qr.Z)(function*(){const{_effectivePopupTemplate:p,graphic:y}=g;return qy(null==p?void 0:p.content,{graphic:y})})()}_queryFeature(g){var p=this;return(0,qr.Z)(function*(){const{_featureAbortController:y,_sourceLayer:v,graphic:_,_effectivePopupTemplate:E,spatialReference:w,map:D,view:O}=p,{content:{value:A},title:{value:W}}=yield(0,ni.as)({content:p._getContent(),title:p._getTitle()});if(y!==p._featureAbortController||!_)return;yield function KX(g,p){return h2.apply(this,arguments)}({graphic:_,popupTemplate:E,layer:v,spatialReference:w},g);const{expressionAttributes:{value:q}}=yield(0,ni.as)({checkForRelatedFeatures:p._checkForRelatedFeatures(g),expressionAttributes:zQ({expressionInfos:null==E?void 0:E.expressionInfos,spatialReference:w,graphic:_,map:D,interceptor:av.interceptor,view:O})});y===p._featureAbortController&&_&&(p._expressionAttributes=q,p._graphicExpressionAttributes=Ot(Ot({},_.attributes),q),p._set("formattedAttributes",p._createFormattedAttributes(A)),p._set("title",p._compileTitle(W)),p._set("lastEditInfo",p._compileLastEditInfo()||null),p._set("content",p._compileContent(A)||null))})()}_createMediaFormattedAttributes({contentElement:g,contentElementIndex:p,formattedAttributes:y}){const{_effectivePopupTemplate:v,graphic:_,relatedInfos:E,_sourceLayer:w,_fieldInfoMap:D,_graphicExpressionAttributes:O}=this;y.content[p]=u2({fieldInfos:null==v?void 0:v.fieldInfos,graphic:_,attributes:Ot(Ot({},O),g.attributes),layer:w,fieldInfoMap:D,relatedInfos:E})}_createFieldsFormattedAttributes({contentElement:g,contentElementIndex:p,formattedAttributes:y}){if(g.fieldInfos){const{graphic:v,relatedInfos:_,_sourceLayer:E,_fieldInfoMap:w,_graphicExpressionAttributes:D}=this;y.content[p]=u2({fieldInfos:g.fieldInfos,graphic:v,attributes:Ot(Ot({},D),g.attributes),layer:E,fieldInfoMap:w,relatedInfos:_})}}_createFormattedAttributes(g){const{_effectivePopupTemplate:p,graphic:y,relatedInfos:v,_sourceLayer:_,_fieldInfoMap:E,_graphicExpressionAttributes:w}=this,O={global:u2({fieldInfos:null==p?void 0:p.fieldInfos,graphic:y,attributes:w,layer:_,fieldInfoMap:E,relatedInfos:v}),content:[]};return Array.isArray(g)&&g.forEach((A,W)=>{"fields"===A.type&&this._createFieldsFormattedAttributes({contentElement:A,contentElementIndex:W,formattedAttributes:O}),"media"===A.type&&this._createMediaFormattedAttributes({contentElement:A,contentElementIndex:W,formattedAttributes:O})}),O}_checkForRelatedFeatures(g){const{graphic:p,_effectivePopupTemplate:y}=this;return this._queryRelatedInfos(p,dR(y),g)}_queryRelatedInfos(g,p,y){var v=this;return(0,qr.Z)(function*(){const{relatedInfos:_,_sourceLayer:E}=v;_.clear();const w=(0,dr.pC)(E.associatedLayer)?yield E.associatedLayer.load(y):E;if(!w)return;const D=p.filter(W=>W&&Vu(W.fieldName));if(!D||!D.length)return;p.forEach(W=>v._configureRelatedInfo(W,w));const O=yield function CQ({relatedInfos:g,layer:p},y){const v={};return g.forEach((_,E)=>{const{relation:w}=_;if(!w){const q=new sn.Z("relation-required","A relation is required on a layer to retrieve related records.");throw ER.error(q),q}const{relatedTableId:D}=w;if("number"!=typeof D){const q=new sn.Z("A related table ID is required on a layer to retrieve related records.");throw ER.error(q),q}const O=`${p.url}/${D}`,A=bR.get(O),W=A||function bQ(g,p){return(0,Uy.default)(g,{query:{f:"json"},signal:p&&p.signal})}(O,y);A||bR.set(O,W),v[E]=W}),(0,ni.as)(v)}({relatedInfos:_,layer:w},y);Object.keys(O).forEach(W=>{var q;const _e=_.get(W.toString()),be=null==(q=O[W])?void 0:q.value;_e&&be&&(_e.layerInfo=be.data)});const A=yield function wQ({graphic:g,relatedInfos:p,layer:y},v){const _={};return p.forEach((E,w)=>{E.layerInfo&&(_[w]=function EQ(g,p,y,v){return E2.apply(this,arguments)}(g,E,y,v))}),(0,ni.as)(_)}({graphic:g,relatedInfos:_,layer:w},y);Object.keys(A).forEach(W=>{var q;!function yQ(g,p){if(!p||!g)return;const{features:y,statsFeatures:v}=g,_=y&&y.value;p.relatedFeatures=_?_.features:[];const E=v&&v.value;p.relatedStatsFeatures=E?E.features:[]}(null==(q=A[W])?void 0:q.value,_.get(W.toString()))})})()}_configureRelatedInfo(g,p){const{relatedInfos:y}=this,v=w0(g.fieldName);if(!v)return;const{layerId:_,fieldName:E}=v;if(!_)return;const w=y.get(_.toString())||function gQ(g,p){const y=function fQ(g,p){if(!p.relationships)return null;let y=null;const{relationships:v}=p;return v.some(_=>_.id===parseInt(g,10)&&(y=_,!0)),y}(g,p);if(!y)return;const v=`${p.url}/${y.relatedTableId}`;return{url:v,queryTask:new dQ.Z({url:v,sourceSpatialReference:p.spatialReference}),relation:y,relatedFields:[],outStatistics:[]}}(_,p);w&&(function MQ({relatedInfo:g,fieldName:p,fieldInfo:y}){if(g.relatedFields.push(p),y.statisticType){const v=new cQ.Z({statisticType:y.statisticType,onStatisticField:p,outStatisticFieldName:p});g.outStatistics.push(v)}}({relatedInfo:w,fieldName:E,fieldInfo:g}),this.relatedInfos.set(_,w))}};to.interceptor=new class YQ{constructor(p,y){this.preLayerQueryCallback=p,this.preRequestCallback=y,this.preLayerQueryCallback||(this.preLayerQueryCallback=v=>{}),this.preRequestCallback||(this.preLayerQueryCallback=v=>{})}}(({query:g,layer:p,method:y})=>{pR({layer:p,method:y,query:g,definitionExpression:`${p.definitionExpression} ${p.serviceDefinitionExpression}`})},({queryPayload:g,layer:p,method:y})=>{pR({layer:p,method:y,query:g,definitionExpression:`${p.definitionExpression} ${p.serviceDefinitionExpression}`})}),(0,we._)([(0,Re.Cb)()],to.prototype,"_error",void 0),(0,we._)([(0,Re.Cb)()],to.prototype,"_featureAbortController",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"_effectivePopupTemplate",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"_fieldInfoMap",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"_sourceLayer",null),(0,we._)([(0,Re.Cb)()],to.prototype,"abilities",void 0),(0,we._)([(0,fa.p)("abilities")],to.prototype,"castAbilities",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"content",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"contentViewModels",void 0),(0,we._)([(0,Re.Cb)({type:Boolean})],to.prototype,"defaultPopupTemplateEnabled",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"state",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"formattedAttributes",void 0),(0,we._)([(0,Re.Cb)({type:hf.Z,value:null})],to.prototype,"graphic",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"lastEditInfo",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"relatedInfos",void 0),(0,we._)([(0,Re.Cb)()],to.prototype,"spatialReference",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"title",void 0),(0,we._)([(0,Re.Cb)()],to.prototype,"map",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],to.prototype,"waitingForContent",null),(0,we._)([(0,Re.Cb)()],to.prototype,"view",void 0),to=av=(0,we._)([(0,Tr.j)(IR)],to);const T2=to,AR=g=>{let p=class extends g{constructor(){super(...arguments),this.renderNodeContent=y=>(0,gf.Qd)(y)&&!y.destroyed?(0,Bt.u)("div",{key:y},y.render()):y instanceof HTMLElement?(0,Bt.u)("div",{key:y,bind:y,afterCreate:this._attachToNode}):(0,gf.o)(y)?(0,Bt.u)("div",{key:y,bind:y.domNode,afterCreate:this._attachToNode}):null}_attachToNode(y){y.appendChild(this)}};return p=(0,we._)([(0,Tr.j)("esri.widgets.Feature.ContentMixin")],p),p};var Wu=C(97059);const ws_contentElement="esri-feature__content-element",PR={title:!0,content:!0,lastEditedInfo:!0};let Ms=class extends(AR(ns.Z)){constructor(g,p){super(g,p),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements=Ot({},PR),this.map=null,this.view=null,this.viewModel=new T2}initialize(){this.own((0,Br.S1)(this,"viewModel.contentViewModels",()=>this._setupContentWidgets()))}loadDependencies(){return Promise.all([C.e(8592),C.e(5818)]).then(C.bind(C,25818))}destroy(){this._destroyContentWidgets()}castVisibleElements(g){return Ot(Ot({},PR),g)}render(){const{state:g}=this.viewModel,p=(0,Bt.u)("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===g?this.renderError():"loading"===g?this.renderLoading():this.renderContentContainer());return(0,Bt.u)("div",{class:this.classes("esri-feature","esri-widget")},p)}setActiveMedia(g,p){this.viewModel.setActiveMedia(g,p)}nextMedia(g){this.viewModel.nextMedia(g)}previousMedia(g){this.viewModel.previousMedia(g)}renderError(){const{messagesCommon:g,messages:p,visibleElements:y}=this;return(0,Bt.u)("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},y.title?(0,Bt.u)("div",{key:"error-title",slot:"title"},g.errorMessage):null,(0,Bt.u)("div",{key:"error-message",slot:"message"},p.loadingError))}renderLoading(){return(0,Bt.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,Bt.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}renderContentContainer(){const{visibleElements:g}=this;return g.content?(0,Bt.u)("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:g,title:p}=this;return g.title?(0,Bt.u)(tv,{level:this.headingLevel,class:"esri-feature__title",innerHTML:p}):null}renderContent(){const g=this.viewModel.content,p="content";if(!g)return null;if(Array.isArray(g))return g.length?(0,Bt.u)("div",{key:`${p}-content-elements`},g.map(this.renderContentElement,this)):null;if("string"==typeof g){const y=this._contentWidgets[0];return!y||y.destroyed?null:(0,Bt.u)("div",{key:`${p}-content`},y.render())}return this.renderNodeContent(g)}renderContentElement(g,p){const{visibleElements:y}=this;if("boolean"!=typeof y.content&&!y.content[g.type])return null;switch(g.type){case"attachments":return this.renderAttachments(p);case"custom":return this.renderCustom(g,p);case"fields":return this.renderFields(p);case"media":return this.renderMedia(p);case"text":return this.renderText(g,p);case"expression":return this.renderExpression(p);default:return null}}renderAttachments(g){const p=this._contentWidgets[g];if(!p||p.destroyed)return null;const{state:y,attachmentInfos:v}=p.viewModel;return"loading"===y||v.length>0?(0,Bt.u)("div",{key:this._buildKey("attachments-element",g),class:this.classes(ws_contentElement)},p.render()):null}renderExpression(g){const p=this._contentWidgets[g];return!p||p.destroyed?null:(0,Bt.u)("div",{key:this._buildKey("expression-element",g),class:ws_contentElement},p.render())}renderCustom(g,p){const{creator:y}=g,v=this._contentWidgets[p];return!v||v.destroyed?null:y?(0,Bt.u)("div",{key:this._buildKey("custom-element",p),class:ws_contentElement},v.render()):null}renderFields(g){const p=this._contentWidgets[g];return!p||p.destroyed?null:(0,Bt.u)("div",{key:this._buildKey("fields-element",g),class:ws_contentElement},p.render())}renderMedia(g){const p=this._contentWidgets[g];return!p||p.destroyed?null:(0,Bt.u)("div",{key:this._buildKey("media-element",g),class:ws_contentElement},p.render())}renderLastEditInfo(){const{visibleElements:g,messages:p}=this,{lastEditInfo:y}=this.viewModel;if(!y||!g.lastEditedInfo)return null;const{date:v,user:_}=y,w=(0,Wu.n)("edit"===y.type?_?p.lastEditedByUser:p.lastEdited:_?p.lastCreatedByUser:p.lastCreated,{date:v,user:_});return(0,Bt.u)("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info",ws_contentElement)},w)}renderText(g,p){const v=this._contentWidgets[p];return!v||v.destroyed?null:g.text?(0,Bt.u)("div",{key:this._buildKey("text-element",p),class:this.classes(ws_contentElement,"esri-feature__text")},v.render()):null}_buildKey(g,...p){return`${g}__${this.get("viewModel.graphic.uid")||"0"}-${p.join("-")}`}_destroyContentWidget(g){g&&(g.viewModel=null,!g.destroyed&&g.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(g=>this._destroyContentWidget(g)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:g,visibleElements:p}=this,y=this.get("viewModel.content"),{contentViewModels:v}=this.viewModel;if(Array.isArray(y))y.forEach((_,E)=>{"attachments"===_.type&&(this._contentWidgets[E]=new nQ({displayType:_.displayType,headingLevel:p.title?g+1:g,viewModel:v[E]})),"fields"===_.type&&(this._contentWidgets[E]=new _R({viewModel:v[E]})),"media"===_.type&&(this._contentWidgets[E]=new MR({viewModel:v[E]})),"text"===_.type&&(this._contentWidgets[E]=new nv({viewModel:v[E]})),"custom"===_.type&&(this._contentWidgets[E]=new nv({viewModel:v[E]})),"expression"===_.type&&(this._contentWidgets[E]=new HQ({viewModel:v[E]}))},this);else{const _=v[0];_&&!_.destroyed&&(this._contentWidgets[0]=new nv({viewModel:_}))}this.scheduleRender()}};(0,we._)([(0,an.B)("viewModel.graphic")],Ms.prototype,"graphic",void 0),(0,we._)([(0,an.B)("viewModel.defaultPopupTemplateEnabled")],Ms.prototype,"defaultPopupTemplateEnabled",void 0),(0,we._)([(0,Re.Cb)()],Ms.prototype,"headingLevel",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ms.prototype,"label",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Feature/t9n/Feature")],Ms.prototype,"messages",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/t9n/common")],Ms.prototype,"messagesCommon",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/support/t9n/uriUtils")],Ms.prototype,"messagesURIUtils",void 0),(0,we._)([(0,an.B)("viewModel.spatialReference")],Ms.prototype,"spatialReference",void 0),(0,we._)([(0,an.B)("viewModel.title")],Ms.prototype,"title",void 0),(0,we._)([(0,Re.Cb)()],Ms.prototype,"visibleElements",void 0),(0,we._)([(0,fa.p)("visibleElements")],Ms.prototype,"castVisibleElements",null),(0,we._)([(0,an.B)("viewModel.map")],Ms.prototype,"map",void 0),(0,we._)([(0,an.B)("viewModel.view")],Ms.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:T2})],Ms.prototype,"viewModel",void 0),Ms=(0,we._)([(0,Tr.j)("esri.widgets.Feature")],Ms);const QQ=Ms;let Rd=class extends qh.Z.EventedAccessor{constructor(g){super(g),this._anchorHandles=new Ra.Z,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([(0,Br.YP)(this,["screenLocationEnabled","location","view.size","view.stationary"],()=>this._updateScreenPointAndHandle()),(0,Br.YP)(this,["view","view.ready"],()=>this._wireUpView())])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){const g="view";if(this._anchorHandles.remove(g),this._viewpointHandle=null,!this.get("view.ready"))return;this._setScreenLocation();const{view:p}=this,v=(0,Br.Wy)(p,"3d"===p.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(v,g),this._viewpointHandle=v,this._toggleWatchingViewpoint()}_viewpointChange(){this._setScreenLocation(),this.emit("view-change")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){const{_viewpointHandle:g,location:p,screenLocationEnabled:y}=this;!g||(p&&y?g.resume():g.pause())}_setScreenLocation(){const{location:g,view:p,screenLocationEnabled:y}=this,v=this.get("view.ready"),_=y&&v&&(0,dr.pC)(g)?p.toScreen(g):null;this._set("screenLocation",_)}};(0,we._)([(0,Re.Cb)()],Rd.prototype,"location",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Rd.prototype,"screenLocation",void 0),(0,we._)([(0,Re.Cb)()],Rd.prototype,"screenLocationEnabled",void 0),(0,we._)([(0,Re.Cb)()],Rd.prototype,"view",void 0),Rd=(0,we._)([(0,Tr.j)("esri.widgets.support.AnchorElementViewModel")],Rd);const RR=Rd;let lv=class extends RR{constructor(g){super(g),this.visible=!1}};(0,we._)([(0,Re.Cb)()],lv.prototype,"visible",void 0),lv=(0,we._)([(0,Tr.j)("esri.widgets.CompassViewModel")],lv);const LR=lv;let Ld=class extends ns.Z{constructor(g,p){super(g,p),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new LR,this.visible=!1}initialize(){this.own([(0,Br.YP)(this,"visible",g=>this._visibleChange(g))])}destroy(){this._animationPromise=null}show(g){const{location:p,promise:y}=g;p&&(this.viewModel.location=p),this.visible=!0,y&&y.catch(()=>{}).then(()=>this.hide())}hide(){this.visible=!1}render(){const{visible:g}=this,{screenLocation:p}=this.viewModel,y=!!p,E={"esri-spinner--start":g&&y,"esri-spinner--finish":!g&&y},w=this._getPositionStyles();return(0,Bt.u)("div",{class:this.classes("esri-spinner",E),styles:w})}_visibleChange(g){if(g)return void(this.viewModel.screenLocationEnabled=!0);const p=(0,ni.e4)(this._animationDelay);this._animationPromise=p,p.catch(()=>{}).then(()=>{this._animationPromise===p&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:g,view:p}=this.viewModel;if(!p||(0,dr.Wi)(g))return{};const{padding:y}=p;return{left:g.x-y.left+"px",top:g.y-y.top+"px"}}};(0,we._)([(0,an.B)("viewModel.location")],Ld.prototype,"location",void 0),(0,we._)([(0,an.B)("viewModel.view")],Ld.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:LR})],Ld.prototype,"viewModel",void 0),(0,we._)([(0,an.B)("viewModel.visible")],Ld.prototype,"visible",void 0),Ld=(0,we._)([(0,Tr.j)("esri.widgets.Spinner")],Ld);const eq=Ld;C(29132),C(65787);var tq=C(63602),rq=C(59397),x0=C(48753),nq=C(10671),D0=C(86606);function R2(g){return g&&"opacity"in g?g.opacity*R2(g.parent):1}function L2(){return L2=(0,qr.Z)(function*(g,p){var y,v;if(!g)return;const _=g.sourceLayer,E=null!=(y=(0,dr.pC)(p)&&null!=(v=p.useSourceLayer)&&v?_:g.layer)?y:_,w=R2(E);if((0,dr.pC)(g.symbol)&&(!(0,dr.pC)(p)||!0!==p.ignoreGraphicSymbol)){const lt="web-style"===g.symbol.type?yield g.symbol.fetchSymbol((0,dr.pC)(p)?p.abortOptions:null):g.symbol.clone();return(0,D0.tb)(lt,null,w),lt}const D=(0,dr.pC)(p)&&p.renderer||E&&"renderer"in E&&E.renderer;let O=D&&"getSymbolAsync"in D?yield D.getSymbolAsync(g,p):null;if(!O)return;if(O="web-style"===O.type?yield O.fetchSymbol((0,dr.pC)(p)?p.abortOptions:null):O.clone(),!("visualVariables"in D)||!D.visualVariables||!D.visualVariables.length)return(0,D0.tb)(O,null,w),O;if("arcadeRequiredForVisualVariables"in D&&D.arcadeRequiredForVisualVariables&&((0,dr.Wi)(p)||(0,dr.Wi)(p.arcade))){const lt=Ot({},(0,dr.Wg)(p));lt.arcade=yield(0,eR.LC)(),p=lt}const A=yield Promise.resolve().then(C.bind(C,81808)),W=[],q=[],_e=[],be=[];for(const lt of D.visualVariables)switch(lt.type){case"color":W.push(lt);break;case"opacity":q.push(lt);break;case"rotation":be.push(lt);break;case"size":lt.target||_e.push(lt)}const We=!!W.length&&W[W.length-1],qe=We?A.getColor(We,g,p):null,dt=!!q.length&&q[q.length-1];let gt=dt?A.getOpacity(dt,g,p):null;if(null!=w&&(gt=null!=gt?gt*w:w),(0,D0.tb)(O,qe,gt),_e.length){const lt=A.getAllSizes(_e,g,p);yield(0,D0.e3)(O,lt)}for(const lt of be)(0,D0.BR)(O,A.getRotationAngle(lt,g,p),lt.axis);return O}),L2.apply(this,arguments)}var Ef=C(58677);const uv_iconZoom="esri-icon-zoom-in-magnifying-glass",jc=new x0.Z({id:"zoom-to-feature",title:"{messages.zoom}",className:uv_iconZoom}),F2=new x0.Z({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),Nd=new x0.Z({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:uv_iconZoom}),Fd=new x0.Z({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"}),Bc=Eo.Z.getLogger("esri.widgets.Popup.PopupViewModel");function FR(g){const{selectedFeature:p,location:y,view:v}=g;return v?"3d"===v.type?p||y:g.get("selectedFeature.geometry")||y:null}function uq(g,p){if("3d"!==(null==p?void 0:p.type)||!g||"esri.Graphic"!==g.declaredClass)return!0;const y=p.getViewForGraphic(g);if(y&&"whenGraphicBounds"in y){let v=!1;return y.whenGraphicBounds(g,{useViewElevation:!0}).then(_=>{v=!_||!_.boundingBox||_.boundingBox[0]===_.boundingBox[3]&&_.boundingBox[1]===_.boundingBox[4]&&_.boundingBox[2]===_.boundingBox[5]}).catch(()=>{const _=new sn.Z("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:g});Bc.error(_)}),v}return!0}function j2(){return j2=(0,qr.Z)(function*(g){const{location:p,selectedFeature:y,view:v,zoomFactor:_}=g,E=FR(g);if(!E){const A=new sn.Z("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:E,view:v});return Bc.error(A),Promise.reject(A)}const w=v.scale/_,D=g.get("selectedFeature.geometry")||p,O=D&&"point"===D.type&&uq(y,v);jc.active=!0,jc.disabled=!0;try{yield g.view.goTo({target:E,scale:O?w:void 0})}finally{jc.active=!1,jc.disabled=!1,g.zoomToLocation=null,O&&(g.location=D)}}),j2.apply(this,arguments)}function B2(){return B2=(0,qr.Z)(function*(g){const{selectedFeature:p,view:y}=g;if("2d"!==(null==y?void 0:y.type)){const D=new sn.Z("zoomToCluster:invalid-view","View must be 2d MapView.",{view:y});throw Bc.error(D),D}if(!p.isAggregate){const D=new sn.Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:p});throw Bc.error(D),D}const v=p.sourceLayer,_=yield y.whenLayerView(v),E=_.createQuery();E.aggregateIds=[p.getObjectId()],Nd.active=!0,Nd.disabled=!0;const{extent:w}=yield _.queryExtent(E);yield y.goTo({target:w}),Nd.active=!1,Nd.disabled=!1}),B2.apply(this,arguments)}function U2(){return U2=(0,qr.Z)(function*(g){const{selectedFeature:p,view:y}=g;if("2d"!==(null==y?void 0:y.type)){const D=new sn.Z("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:y});throw Bc.error(D),D}if(!p.isAggregate){const D=new sn.Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:p});throw Bc.error(D),D}const v=p.sourceLayer,_=yield y.whenLayerView(v),E=_.createQuery();E.aggregateIds=[p.getObjectId()];const{extent:w}=yield _.queryExtent(E);g.selectedClusterBoundaryFeature.geometry=w,y.graphics.add(g.selectedClusterBoundaryFeature)}),U2.apply(this,arguments)}function V2(){return V2=(0,qr.Z)(function*(g){const{selectedFeature:p,view:y}=g;if("2d"!==(null==y?void 0:y.type)){const D=new sn.Z("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:y});throw Bc.error(D),D}if(!p.isAggregate){const D=new sn.Z("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:p});throw Bc.error(D),D}const v=p.sourceLayer,_=yield y.whenLayerView(v),E=_.createQuery();E.aggregateIds=[p.getObjectId()],Fd.active=!0,Fd.disabled=!0;const{features:w}=yield _.queryFeatures(E);Fd.active=!1,Fd.disabled=!1,y.popup.open({features:[p].concat(w),featureMenuOpen:!0})}),V2.apply(this,arguments)}const k2=g=>{let p=class extends g{constructor(...y){super(...y),this.goToOverride=null,this.view=null}callGoTo(y){const{view:v}=this;return this.goToOverride?this.goToOverride(v,y):v.goTo(y.target,y.options)}};return(0,we._)([(0,Re.Cb)()],p.prototype,"goToOverride",void 0),(0,we._)([(0,Re.Cb)()],p.prototype,"view",void 0),p=(0,we._)([(0,Tr.j)("esri.widgets.support.GoTo")],p),p};var mq=C(88493),Zu=C(49672);const S0=eo.Z.ofType({key:"type",defaultKeyValue:"button",base:rq.Z,typeMap:{button:x0.Z,toggle:nq.Z}}),jR="esri.widgets.Popup.PopupViewModel",BR=Eo.Z.getLogger(jR);let ii=class extends(k2(RR)){constructor(g){super(g),this._handles=new Ra.Z,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new S0,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new hf.Z({symbol:new mq.Z({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(g=>g.waitingForContent)}initialize(){this._handles.add([(0,Br.S1)(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),(0,Br.YP)(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),(0,Br.YP)(this,"view.animation.state",g=>this._animationStateChange(g)),(0,Br.YP)(this,"location",g=>this._locationChange(g)),(0,Br.YP)(this,"selectedFeature",g=>this._selectedFeatureChange(g)),(0,Br.YP)(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),(0,Br.YP)(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),(0,Br.YP)(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",g=>function(g){const{event:p,view:y}=g,{action:v}=p,_=y&&y.popup;if(!v)return Promise.reject(new sn.Z("trigger-action:missing-arguments","Event has no action"));if(!_)return Promise.reject(new sn.Z("trigger-action:missing-arguments","view.popup is missing"));const{disabled:E,id:w}=v;if(!w)return Promise.reject(new sn.Z("trigger-action:invalid-action","action.id is missing"));if(E)return Promise.reject(new sn.Z("trigger-action:invalid-action","Action is disabled"));if(w===jc.id)return function cq(g){return j2.apply(this,arguments)}(_.viewModel).catch(ni.H9);if(w===Nd.id)return function dq(g){return B2.apply(this,arguments)}(_.viewModel);if(w===Fd.id)return _.featureMenuOpen=!_.featureMenuOpen,_.viewModel.browseClusterEnabled=!_.viewModel.browseClusterEnabled,Promise.resolve();if(_.viewModel.browseClusterEnabled=!1,w===F2.id){_.close();const{selectedFeature:D}=_;if(!D)return Promise.reject(new sn.Z(`trigger-action:${F2.id}`,"selectedFeature is required",{selectedFeature:D}));const{sourceLayer:O}=D;return O?O.remove(D):y.graphics.remove(D),Promise.resolve()}return Promise.resolve()}({event:g,view:this.view})),(0,Br.Nj)(this,"waitingForResult",()=>this._waitingForResultChange(),!0),(0,Br.YP)(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),(0,Br.YP)(this,["view.scale"],this._viewScaleChange),(0,Br.Nj)(this,"visible",()=>this.browseClusterEnabled=!1),(0,Br.YP)(this,"browseClusterEnabled",g=>g?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const g=this._get("allActions")||new S0;g.removeAll();const{actions:p,defaultActions:y,defaultPopupTemplateEnabled:v,includeDefaultActions:_,selectedFeature:E}=this,w=_?y.concat(p):p,D=E&&("function"==typeof E.getEffectivePopupTemplate&&E.getEffectivePopupTemplate(v)||E.popupTemplate),O=D&&D.actions,A=D&&D.overwriteActions?O:O?O.concat(w):w;return A&&A.filter(Boolean).forEach(W=>g.add(W)),g}get defaultActions(){var g;const p=this._get("defaultActions")||new S0;return p.removeAll(),p.addMany(null!=(g=this.selectedFeature)&&g.isAggregate?[Nd.clone(),Fd.clone()]:[jc.clone()]),p}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(g){const p=g||[];this._set("features",p);const{pendingPromisesCount:y,promiseCount:v,selectedFeatureIndex:_}=this,E=v&&p.length;E&&y&&-1===_?this.selectedFeatureIndex=0:E&&-1!==_||(this.selectedFeatureIndex=p.length?0:-1)}get location(){return this._get("location")||null}set location(g){const p=this.get("view.spatialReference.isWebMercator");g&&g.get("spatialReference.isWGS84")&&p&&(g=(0,iu.$)(g)),this._set("location",g)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(g){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(g)||!g.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",g),(g=g.slice(0)).forEach(p=>{this._pendingPromises.add(p),p.then(_=>{this._pendingPromises.has(p)&&this._updateFeatures(_),this._updatePendingPromises(p)},()=>this._updatePendingPromises(p))}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:g,selectedFeatureIndex:p}=this;return-1===p?null:g[p]||null}get selectedFeatureIndex(){const g=this._get("selectedFeatureIndex");return"number"==typeof g?g:-1}set selectedFeatureIndex(g){const{featureCount:p}=this;g=isNaN(g)||g<-1||!p?-1:(g+p)%p,this._set("selectedFeatureIndex",g)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:g}=this,p=FR(this);if(!p){const y=new sn.Z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:p,view:g});return BR.error(y),Promise.reject(y)}return this.callGoTo({target:{target:p,scale:g.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null})}fetchFeatures(g,p){const{view:y}=this;if(!y||!g){const v=new sn.Z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:g,view:y});return BR.error(v),Promise.reject(v)}return y.fetchPopupFeatures(g,{event:p&&p.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:p&&p.signal})}open(g){const p=nn(Ot({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},g),{visible:!0}),{fetchFeatures:y}=p;delete p.fetchFeatures,y&&this._setFetchFeaturesPromises(p.location),this.set(p)}triggerAction(g){const p=this.allActions.getItemAt(g);p&&!p.disabled&&this.emit("trigger-action",{action:p})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){(function pq(g){g.features=g.features.filter(p=>p.isAggregate)})(this),this._clearBrowsedClusterGraphics()}enableClusterBrowsing(){var g=this;return(0,qr.Z)(function*(){yield function hq(g){return U2.apply(this,arguments)}(g),yield function fq(g){return V2.apply(this,arguments)}(g)})()}_animationStateChange(g){this.zoomToLocation||(jc.disabled="waiting-for-target"===g)}_clearBrowsedClusterGraphics(){var g;const p=null==(g=this.view)?void 0:g.graphics;p&&(p.remove(this.selectedClusterBoundaryFeature),p.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){var g;(null!=(g=this.selectedFeature)&&g.isAggregate||this.browseClusterEnabled)&&(this.browseClusterEnabled=!1,this.visible=!1)}_locationChange(g){const{selectedFeature:p,updateLocationEnabled:y}=this;y&&g&&(!p||p.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:g,featureCount:p,featurePage:y,featuresPerPage:v,featureViewModels:_}=this;if(null===y)return;const E=((y-1)*v+p)%p;_.slice(E,E+v).forEach((D,O)=>{D&&!D.graphic&&(D.graphic=g[E+O])})}_selectedFeatureChange(g){var p=this;return(0,qr.Z)(function*(){if(!g)return;const{location:y,updateLocationEnabled:v,view:_}=p;if(p.browseClusterEnabled)return p._selectedClusterFeature&&(_.graphics.remove(p._selectedClusterFeature),p._selectedClusterFeature=null),g.isAggregate?void 0:(g.symbol=yield function oq(g,p){return L2.apply(this,arguments)}(g),p._selectedClusterFeature=g,void _.graphics.add(p._selectedClusterFeature));!v&&y||!g.geometry?v&&!g.geometry&&p.centerAtLocation().then(()=>{p.location=_.center.clone()}):p.location=(0,dr.Wg)(p._getPointFromGeometry(g.geometry))})()}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(g){return this._fetchFeaturesWithController(this._getScreenPoint(g||this.location)).then(p=>{const{clientOnlyGraphics:y,promisesPerLayerView:v}=p,_=Promise.resolve(y),E=v.map(w=>w.promise);this.promises=[_,...E]})}_destroyFeatureVMs(){this.featureViewModels.forEach(g=>g&&!g.destroyed&&g.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:g,features:p,featureViewModels:y}=this;if(null!=g&&g.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!p||!p.length)return;const v=y.slice(0),_=[];p.forEach((E,w)=>{if(!E)return;let D=null;if(v.some((W,q)=>(W&&W.graphic===E&&(D=W,v.splice(q,1)),!!D)),D)_[w]=D;else{var O,A;const W=new T2({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(O=this.view)?void 0:O.spatialReference,graphic:E===g?E:null,map:null==(A=this.view)?void 0:A.map,view:this.view});_[w]=W}}),v.forEach(E=>E&&!E.destroyed&&E.destroy()),this._set("featureViewModels",_)}_getScreenPoint(g){const{view:p}=this;return p&&g&&"function"==typeof p.toScreen?p.toScreen(g):null}_autoOpenEnabledChange(){const g="auto-fetch-features",{_handles:p,autoOpenEnabled:y}=this;if(p.remove(g),y&&this.view){const v=this.view.on("click",_=>{"mouse"===_.pointerType&&0!==_.button||this._fetchFeaturesAndOpen(_)},Ef.f.WIDGET);p.add(v,g)}}_cancelFetchingFeatures(){const g=this._fetchFeaturesController;g&&g.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(g,p){this._cancelFetchingFeatures();const y=new AbortController,{signal:v}=y;this._fetchFeaturesController=y,this.notifyChange("waitingForResult");const _=this.fetchFeatures(g,{signal:v,event:p});return _.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),_}_fetchFeaturesAndOpen(g){const{screenPoint:p,mapPoint:y}=g,{view:v}=this;this._fetchFeaturesWithController(p,g).then(_=>{const{clientOnlyGraphics:E,promisesPerLayerView:w,location:D}=_,O=[Promise.resolve(E),...w.map(A=>A.promise)];return v.popup.open({location:D||y,promises:O}),_})}_updatePendingPromises(g){g&&this._pendingPromises.has(g)&&(this._pendingPromises.delete(g),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(g){return(0,dr.Wi)(g)?null:"point"===g.type?g:"extent"===g.type?g.center:"polygon"===g.type?g.centroid:"multipoint"===g.type||"polyline"===g.type?g.extent.center:null}_getLayerView(g,p){return(0,qr.Z)(function*(){return yield g.when(),g.whenLayerView(p)})()}_highlightFeature(){var g=this;return(0,qr.Z)(function*(){const p="highlight";g._handles.remove(p);const{selectedFeature:y,highlightEnabled:v,view:_,visible:E}=g;if(!(y&&_&&v&&E))return;let{layer:w,sourceLayer:D}=y;if("map-notes"!==(null==D?void 0:D.type)&&"subtype-group"!==(null==D?void 0:D.type)||(w=D),!(w&&w instanceof tq.Z))return;const O=g._getLayerView(_,w);g._highlightPromise=O;const A=yield O;if(!(A&&function sq(g){return g&&"function"==typeof g.highlight}(A)&&g._highlightPromise===O&&g.selectedFeature&&g.highlightEnabled&&g.visible))return;const W="objectIdField"in w&&w.objectIdField,q=y.attributes,be=A.highlight(q&&W&&q[W]||y);g._handles.add(be,p)})()}_updateFeatures(g){const{features:p}=this;if(!g||!g.length)return;if(!p.length)return void(this.features=g);const y=g.filter(v=>-1===p.indexOf(v));this.features=p.concat(y)}};(0,we._)([(0,Re.Cb)()],ii.prototype,"featurePage",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"isLoadingFeature",null),(0,we._)([(0,Re.Cb)({type:S0})],ii.prototype,"actions",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"active",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"allActions",null),(0,we._)([(0,Re.Cb)({type:Boolean})],ii.prototype,"defaultPopupTemplateEnabled",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"autoCloseEnabled",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"autoOpenEnabled",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"browseClusterEnabled",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"content",void 0),(0,we._)([(0,Re.Cb)({type:S0,readOnly:!0})],ii.prototype,"defaultActions",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"featureCount",null),(0,we._)([(0,Re.Cb)()],ii.prototype,"features",null),(0,we._)([(0,Re.Cb)()],ii.prototype,"featuresPerPage",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"featureViewModelAbilities",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"featureViewModels",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"highlightEnabled",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"includeDefaultActions",void 0),(0,we._)([(0,Re.Cb)({type:Zu.Z})],ii.prototype,"location",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"pendingPromisesCount",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"selectedClusterBoundaryFeature",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"waitingForResult",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"promiseCount",null),(0,we._)([(0,Re.Cb)()],ii.prototype,"promises",null),(0,we._)([(0,Re.Cb)({value:null,readOnly:!0})],ii.prototype,"selectedFeature",null),(0,we._)([(0,Re.Cb)({value:-1})],ii.prototype,"selectedFeatureIndex",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"selectedFeatureViewModel",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ii.prototype,"state",null),(0,we._)([(0,Re.Cb)()],ii.prototype,"title",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"updateLocationEnabled",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"view",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"visible",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"zoomFactor",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"zoomToLocation",void 0),(0,we._)([(0,Re.Cb)()],ii.prototype,"centerAtLocation",null),ii=(0,we._)([(0,Tr.j)(jR)],ii);const UR=ii;var Na=C(24940);function VR(g){return p=>{p.hasOwnProperty("_delegatedEventNames")||(p._delegatedEventNames=p._delegatedEventNames?p._delegatedEventNames.slice():[]);const y=p._delegatedEventNames,v=Array.isArray(g)?g:function vq(g){return g.split(",").map(p=>p.trim())}(g);y.push(...v)}}const kR="selected-index",WR="popup-spinner",Nr_shadow="esri-popup--shadow",Nr_button="esri-popup__button",Nr_icon="esri-popup__icon",ZR={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},$R="esri-popup";function $u(g,p){return void 0===p?`${$R}__${g}`:`${$R}__${g}-${p}`}const KR="esri.widgets.Popup",zR=Eo.Z.getLogger(KR),GR={closeButton:!0,featureNavigation:!0};let gn=class extends(AR(ns.Z)){constructor(g,p){super(g,p),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Ra.Z,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([y])=>{null!=y&&y.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=(0,t2.P)(()=>this._displaySpinner(),0),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new UR,this.visible=null,this.visibleElements=Ot({},GR),this._addSelectedFeatureIndexHandle(),this.own([(0,Br.YP)(this,"viewModel.screenLocation",()=>this._positionContainer()),(0,Br.YP)(this,["viewModel.active","dockEnabled"],()=>this._toggleScreenLocationEnabled()),(0,Br.YP)(this,"viewModel.screenLocation",(y,v)=>{!!y!=!!v&&this.reposition()}),(0,Br.YP)(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],()=>this.reposition()),(0,Br.YP)(this,"spinnerEnabled",y=>this._spinnerEnabledChange(y)),(0,Br.YP)(this,"viewModel.view.size",(y,v)=>this._updateDockEnabledForViewSize(y,v)),(0,Br.YP)(this,"viewModel.view",(y,v)=>this._viewChange(y,v)),(0,Br.YP)(this,"viewModel.view.ready",(y,v)=>this._viewReadyChange(y,v)),(0,Br.YP)(this,["viewModel.waitingForResult","viewModel.location"],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),(0,Br.YP)(this,["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>this._setTitleFromFeatureWidget()),(0,Br.YP)(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>this._setContentFromFeatureWidget()),(0,Br.Nj)(this,"collapsed",()=>{var y,v;"xsmall"===(null==(y=this.viewModel)||null==(v=y.view)?void 0:v.widthBreakpoint)&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),(0,Br.on)(this,"viewModel.allActions","change",()=>this._watchActions()),(0,Br.S1)(this,"viewModel.allActions",()=>this._watchActions()),(0,Br.YP)(this,"viewModel.featureViewModels",()=>this._featureMenuViewportScrollTop())])}destroy(){var g,p;this._destroySelectedFeatureWidget(),this._destroySpinner(),null==(g=this._handles)||g.destroy(),this._unobserveFeatureMenuObserver(),null==(p=this._featureMenuIntersectionObserver)||p.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var g,p,y,v,_,E,w;return!!(this.selectedFeatureWidget?(null==(g=this.selectedFeatureWidget)||null==(p=g.viewModel)?void 0:p.waitingForContent)||"error"===(null==(y=this.selectedFeatureWidget)||null==(v=y.viewModel)?void 0:v.state)||(null==(_=this.selectedFeatureWidget)||null==(E=_.viewModel)?void 0:E.content):null==(w=this.viewModel)?void 0:w.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(g){this._set("actionsMenuOpen",!!g)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||ZR}set dockOptions(g){const p=Ot({},ZR),y=this.get("viewModel.view.breakpoints"),v={};y&&(v.width=y.xsmall,v.height=y.xsmall);const _=Ot(Ot({},p),g),E=Ot(Ot({},p.breakpoint),v),{breakpoint:w}=_;!0===w?_.breakpoint=E:"object"==typeof w&&(_.breakpoint=Ot(Ot({},E),w)),this._set("dockOptions",_),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:g,visibleElements:p,headingLevel:y}=this,{selectedFeatureViewModel:v}=this.viewModel,_=nn(Ot({},p),{title:!1});return v?(g?(g.viewModel=v,g.visibleElements=_):this._feature=new QQ({headingLevel:y+1,viewModel:v,visibleElements:_}),this._feature):null}castVisibleElements(g){return Ot(Ot({},GR),g)}blur(){const{active:g}=this.viewModel;g||zR.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(g,p){return this.viewModel.fetchFeatures(g,p)}focus(){const{active:g}=this.viewModel;g||zR.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(g){var p,y;this._handles.remove(kR);const E={collapsed:!!g&&!!g.collapsed,actionsMenuOpen:!!g&&!!g.actionsMenuOpen,featureMenuOpen:!!g&&!!g.featureMenuOpen};"xsmall"===(null==(p=this.viewModel)||null==(y=p.view)?void 0:y.widthBreakpoint)&&(E.collapsed=!0),this.set(E),this.viewModel.open(g),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(g){this.viewModel.triggerAction(g)}render(){var g,p,y,v;const{actionsMenuOpen:_,dockEnabled:E,featureMenuVisible:w,dividedActions:D,currentAlignment:O,currentDockPosition:A}=this,{active:W}=this.viewModel,{menuActions:q}=D,qe=null==(g=this.selectedFeature)||null==(p=g.layer)?void 0:p.title,dt=null==(y=this.selectedFeature)||null==(v=y.layer)?void 0:v.id;return(0,Bt.u)("div",{class:this.classes("esri-popup",{"esri-popup--aligned-top-center":"top-center"===O,"esri-popup--aligned-bottom-center":"bottom-center"===O,"esri-popup--aligned-top-left":"top-left"===O,"esri-popup--aligned-bottom-left":"bottom-left"===O,"esri-popup--aligned-top-right":"top-right"===O,"esri-popup--aligned-bottom-right":"bottom-right"===O,"esri-popup--is-docked":W&&E,[Nr_shadow]:W&&!E,"esri-popup--is-docked-top-left":"top-left"===A,"esri-popup--is-docked-top-center":"top-center"===A,"esri-popup--is-docked-top-right":"top-right"===A,"esri-popup--is-docked-bottom-left":"bottom-left"===A,"esri-popup--is-docked-bottom-center":"bottom-center"===A,"esri-popup--is-docked-bottom-right":"bottom-right"===A,"esri-popup--feature-menu-open":w,"esri-popup--actions-menu-open":W&&q.length>1&&_}),role:"presentation","data-layer-title":qe,"data-layer-id":dt,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},W?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes(Nr_icon,"esri-icon-loading-indicator","esri-rotating")})}renderNavigationLoading(){const{messagesCommon:g}=this;return this.viewModel.pendingPromisesCount?(0,Bt.u)("div",{key:$u("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":g.loading,title:g.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const g=(0,Lo.dZ)(this.container);return(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes(Nr_icon,{"esri-icon-right-triangle-arrow":g,"esri-popup__pagination-previous-icon--rtl":g,"esri-icon-left-triangle-arrow":!g,"esri-popup__pagination-previous-icon":!g})})}renderPreviousButton(){const{messages:g}=this;return(0,Bt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(Nr_button,"esri-popup__pagination-previous"),"aria-label":g.previous,title:g.previous},this.renderPreviousIcon())}renderNextIcon(){const g=(0,Lo.dZ)(this.container);return(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes(Nr_icon,{"esri-icon-left-triangle-arrow":g,"esri-popup__pagination-next-icon--rtl":g,"esri-icon-right-triangle-arrow":!g,"esri-popup__pagination-next-icon":!g})})}renderNextButton(){const{messages:g}=this;return(0,Bt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(Nr_button,"esri-popup__pagination-next"),"aria-label":g.next,title:g.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:g,featureMenuId:p,messagesCommon:y}=this,{featureCount:v,selectedFeatureIndex:_}=this.viewModel;return(0,Bt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(Nr_button,"esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":p,"aria-expanded":g.toString(),"aria-label":y.menu,title:y.menu},this._getPageText(v,_))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:g}=this,p=this._wouldDockTo();return(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes({"esri-icon-minimize":g,"esri-popup__icon--dock-icon":!g,"esri-icon-dock-right":!g&&("top-right"===p||"bottom-right"===p),"esri-icon-dock-left":!g&&("top-left"===p||"bottom-left"===p),"esri-icon-maximize":!g&&"top-center"===p,"esri-icon-dock-bottom":!g&&"bottom-center"===p},Nr_icon)})}renderDockButton(){var g,p,y;const{dockEnabled:v,messages:_}=this,E=null==(g=this.viewModel)||null==(p=g.view)?void 0:p.widthBreakpoint,w=v?_.undock:_.dock;return"xsmall"!==E&&null!=(y=this.dockOptions)&&y.buttonEnabled?(0,Bt.u)("div",{role:"button","aria-label":w,title:w,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(Nr_button,"esri-popup__button--dock")},this.renderDockIcon()):null}renderTitle(){const{title:g}=this.viewModel,{titleId:p,collapsible:y,contentCollapsed:v,messagesCommon:_}=this,E={"esri-popup__header-container--button":y},w=(0,Bt.u)(tv,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:g}),D=y?(0,Bt.u)("button",{key:`${g}--collapsible`,id:p,title:v?_.expand:_.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",E),"aria-expanded":v?"false":"true",onclick:this._toggleCollapsed},w):(0,Bt.u)("div",{key:g,id:p,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",E)},w);return g?D:null}renderCloseIcon(){return(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes(Nr_icon,"esri-icon-close")})}renderCloseButton(){const{visibleElements:g,messagesCommon:p}=this;return g.closeButton?(0,Bt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:Nr_button,"aria-label":p.close,title:p.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return(0,Bt.u)("header",{class:"esri-popup__header"},this.renderTitle(),(0,Bt.u)("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:g,hasContent:p,contentCollapsed:y}=this,{content:v}=this.viewModel;return p&&!y?(0,Bt.u)("article",{key:v,enterAnimation:this._createFeatureUpdatedAnimation(),id:g,class:"esri-popup__content"},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:g,actionsMenuButtonId:p,actionsMenuOpen:y,dividedActions:v,messagesCommon:_}=this,E=y?_.close:_.open,{menuActions:w}=v;return w.length?(0,Bt.u)("div",{key:$u("actions-menu-button"),class:this.classes(Nr_button,"esri-popup__actions-menu-button"),role:"button",id:p,"aria-haspopup":"true","aria-controls":y?g:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":E,title:E},(0,Bt.u)("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null}renderMenuActions(){const{actionsMenuId:g,actionsMenuButtonId:p,actionsMenuOpen:y,dividedActions:v}=this,{menuActions:_}=v;return _.length&&y?(0,Bt.u)("ul",{id:g,role:"menu","aria-labelledby":p,key:$u("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},_.toArray().map(E=>this.renderAction({action:E,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:g}=this.dividedActions;return!!g.length&&g.toArray().map(p=>this.renderAction({action:p,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:g,menuActions:p}=this.dividedActions,y=!!g.length,v=!!p.length;return y||v?(0,Bt.u)("div",{key:"inline-actions-container","data-inline-actions":y.toString(),"data-menu-actions":v.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?(0,Bt.u)("section",{key:$u("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:g,dividedActions:p}=this,{inlineActions:y,menuActions:v}=p,_=!!y.length,w={"esri-popup__footer--has-pagination":g,"esri-popup__footer--has-actions":_,"esri-popup__footer--has-actions-menu":!!v.length};return g||_?(0,Bt.u)("div",{key:$u("feature-buttons"),class:this.classes("esri-popup__footer",w)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:g}=this,{featureViewModels:p,isLoadingFeature:y}=this.viewModel,v=(0,Wu.n)(g.selectedFeatures,{total:p.length});return(0,Bt.u)("section",{key:$u("menu"),class:"esri-popup__feature-menu"},(0,Bt.u)("strong",{class:"esri-popup__feature-menu-header"},v),(0,Bt.u)("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:Lo.Se},this.renderFeatureMenu(),(0,Bt.u)("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),y?(0,Bt.u)("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:(0,Bt.u)("div",{key:$u("pointer"),class:"esri-popup__pointer",role:"presentation"},(0,Bt.u)("div",{class:this.classes("esri-popup__pointer-direction",Nr_shadow)}))}renderMainContainer(){const{dockEnabled:g,currentAlignment:p,currentDockPosition:y,titleId:v,contentId:_,collapsible:E,hasContent:w,contentCollapsed:D,visibleElements:O}=this,{title:A}=this.viewModel,W="bottom-left"===p||"bottom-center"===p||"bottom-right"===p||"top-left"===y||"top-center"===y||"top-right"===y,q="top-left"===p||"top-center"===p||"top-right"===p||"bottom-left"===y||"bottom-center"===y||"bottom-right"===y;return(0,Bt.u)("div",{class:this.classes("esri-popup__main-container","esri-widget",{[Nr_shadow]:g,"esri-popup--is-collapsible":E,"esri-popup--is-collapsed":D}),tabIndex:O.closeButton?null:-1,role:"dialog","aria-labelledby":A?v:"","aria-describedby":w&&!D?_:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},W?this.renderFooter():null,W?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),q?this.renderFooter():null,q?this.renderFeatureMenuContainer():null)}renderContent(){var g;const p=null==(g=this.viewModel)?void 0:g.content;return p?"string"==typeof p?(0,Bt.u)("div",{key:p,innerHTML:p}):this.renderNodeContent(p):null}renderActionText(g){return(0,Bt.u)("span",{key:"text",class:"esri-popup__action-text"},g)}renderActionIcon(g){const p=this._getActionClass(g),y=this._getActionImage(g),v={"esri-icon-loading-indicator":g.active,"esri-rotating":g.active,[Nr_icon]:!!p,"esri-popup__action-image":!g.active&&!!y};return p&&(v[p]=!g.active),(0,Bt.u)("span",{key:"icon","aria-hidden":"true",class:this.classes(Nr_icon,v),styles:this._getIconStyles(y)})}renderAction(g){const{action:p,type:y}=g,v=this._getActionTitle(p),_={"esri-popup__action":"toggle"!==p.type,"esri-popup__action-toggle":"toggle"===p.type,"esri-popup__action-toggle--on":"toggle"===p.type&&p.value,"esri-popup__button--disabled":p.disabled},E=[this.renderActionIcon(p),this.renderActionText(v)],w="menu-item"===y?(0,Bt.u)("li",{key:p.uid,role:"menuitem",tabIndex:0,title:v,"aria-label":v,class:this.classes(Nr_button,_),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":p.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},E):(0,Bt.u)("div",{key:p.uid,role:"button",tabIndex:0,title:v,"aria-label":v,class:this.classes(Nr_button,_),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":p.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},E);return p.visible?w:null}renderFeatureMenuItem(g,p){const{messages:y,messagesCommon:v}=this,{selectedFeatureIndex:_,selectedFeatureViewModel:E}=this.viewModel,w=g===E,D={"esri-popup__feature-menu-item--selected":w},O=w?(0,Bt.u)("span",{key:$u(`feature-menu-selected-feature-${_}`),title:y.selectedFeature,"aria-label":y.selectedFeature,class:"esri-icon-check-mark"}):null,A=(0,Bt.u)("span",{innerHTML:g.title||v.untitled});return(0,Bt.u)("li",{role:"menuitem",tabIndex:-1,key:$u(`feature-menu-feature-${_}`),class:this.classes(D,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":p,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},(0,Bt.u)("span",{class:"esri-popup__feature-menu-title"},A,O))}renderFeatureMenu(){const{featureMenuId:g}=this,{featureViewModels:p}=this.viewModel;return p.length>1?(0,Bt.u)("ol",{class:"esri-popup__feature-menu-list",id:g,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},p.filter(y=>!!y.graphic).map((y,v)=>this.renderFeatureMenuItem(y,v))):null}_getActionTitle(g){const{messages:p,selectedFeature:y,messagesCommon:v}=this,{id:_}=g,E=null==y?void 0:y.attributes,w="zoom-to-feature"===_?(0,Wu.n)(g.title,{messages:p}):"remove-selected-feature"===_?(0,Wu.n)(g.title,{messages:v}):"zoom-to-clustered-features"===_||"browse-clustered-features"===_?(0,Wu.n)(g.title,{messages:p}):g.title;return w&&E?(0,Wu.n)(w,E):w}_getActionClass(g){const{selectedFeature:p}=this,y=null==p?void 0:p.attributes,{className:v,image:_}=g,E=_||v?v:"esri-icon-default-action";return E&&y?(0,Wu.n)(E,y):E}_getActionImage(g){const{selectedFeature:p}=this,y=null==p?void 0:p.attributes,{image:v}=g;return v&&y?(0,Wu.n)(v,y):v}_createFeatureUpdatedAnimation(){return(0,Lo.vU)("enter","esri-popup--feature-updated")}_getInlineActionCount(){const{maxInlineActions:g,featureNavigationVisible:p}=this;if("number"!=typeof g)return null;const y=Math.round(g);return Math.max(p?y-1:y,0)}_watchActions(){const{allActions:g}=this.viewModel;this.notifyChange("dividedActions");const p="actions";this._handles.remove(p),g&&g.forEach(y=>{this._handles.add((0,Br.YP)(y,["uid","active","className","disabled","id","title","image","visible"],()=>this.scheduleRender()),p)})}_divideActions(){const{allActions:g}=this.viewModel,p=g.filter(E=>E.visible),y=this._getInlineActionCount(),v=null===y,_=0===y;return{inlineActions:v?p.slice(0):_?new eo.Z:p.slice(0,y),menuActions:v?new eo.Z:p.slice(_?0:y)}}_featureMenuOpenChanged(g){g?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(g){g?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:g,messagesCommon:p}=this;var y,v;g&&(this.viewModel.title="error"===(null==(y=g.viewModel)?void 0:y.state)?p.errorMessage:(null==(v=g.viewModel)?void 0:v.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:g}=this;g&&(this.viewModel.content=g)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(g){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(g),this._featureMenuIntersectionObserverNode=g}_handleFeatureMenuKeyup(g){"Escape"===(0,Rc.kK)(g)&&(g.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(g){"Escape"===(0,Rc.kK)(g)&&(g.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_handleFeatureMenuItemKeyup(g){const p=(0,Rc.kK)(g),{_featureMenuNode:y}=this,v=g.currentTarget["data-feature-index"];if(!y)return;const _=y.querySelectorAll("li"),E=_.length;"ArrowUp"!==p?"ArrowDown"!==p?"Home"!==p?"End"!==p||(g.stopPropagation(),_[_.length-1].focus()):(g.stopPropagation(),_[0].focus()):(g.stopPropagation(),_[(v+1+E)%E].focus()):(g.stopPropagation(),_[(v-1+E)%E].focus())}_handleActionMenuItemKeyup(g){const p=(0,Rc.kK)(g),{_actionsMenuNode:y}=this,v=g.currentTarget.dataset.actionUid,{menuActions:_}=this.dividedActions,E=_.findIndex(O=>O.uid===v);if(!y)return;const w=y.querySelectorAll("li"),D=w.length;"ArrowUp"!==p?"ArrowDown"!==p?"Home"!==p?"End"!==p||(g.stopPropagation(),w[w.length-1].focus()):(g.stopPropagation(),w[0].focus()):(g.stopPropagation(),w[(E+1+D)%D].focus()):(g.stopPropagation(),w[(E-1+D)%D].focus())}_handleMainKeyup(g){const p=(0,Rc.kK)(g);"ArrowLeft"===p&&(g.stopPropagation(),this.previous()),"ArrowRight"===p&&(g.stopPropagation(),this.next())}_spinnerEnabledChange(g){if(this._destroySpinner(),!g)return;const p=this.get("viewModel.view");this._createSpinner(p)}_hideSpinner(){const{_spinner:g}=this;g&&(g.location=null,g.hide())}_displaySpinner(){const{_spinner:g}=this;if(!g)return;const{location:p,waitingForResult:y}=this.viewModel;y?g.show({location:p}):g.hide()}_getIconStyles(g){return{"background-image":g?`url(${g})`:""}}_addSelectedFeatureIndexHandle(){const g=(0,Br.YP)(this,"viewModel.selectedFeatureIndex",(p,y)=>this._selectedFeatureIndexUpdated(p,y));this._handles.add(g,kR)}_selectedFeatureIndexUpdated(g,p){const{featureCount:y}=this;y&&g!==p&&-1!==g&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:g}=this;g&&(g.viewModel=null,g&&!g.destroyed&&g.destroy()),this._feature=null}_isScreenLocationWithinView(g,p){return g.x>-1&&g.y>-1&&g.x<=p.width&&g.y<=p.height}_isOutsideView(g){const{popupHeight:p,popupWidth:y,screenLocation:v,side:_,view:E}=g;if(isNaN(y)||isNaN(p)||!E||!v)return!1;const w=E.padding;return"right"===_&&v.x+y/2>E.width-w.right||"left"===_&&v.x-y/2<w.left||"top"===_&&v.y-p<w.top||"bottom"===_&&v.y+p>E.height-w.bottom}_calculateAutoAlignment(g){if("auto"!==g)return g;const{_pointerOffsetInPx:p,_containerNode:y,_mainContainerNode:v,viewModel:_}=this,{screenLocation:E,view:w}=_;if((0,dr.Wi)(E)||!w||!y)return"top-center";if(!this._isScreenLocationWithinView(E,w))return this._get("currentAlignment")||"top-center";function D(Tt){return parseInt(Tt.replace(/[^-\d\.]/g,""),10)}const O=v?window.getComputedStyle(v,null):null,A=O?D(O.getPropertyValue("max-height")):0,W=O?D(O.getPropertyValue("height")):0,{height:q,width:_e}=y.getBoundingClientRect(),be=_e+p,We=Math.max(q,A,W)+p,qe=this._isOutsideView({popupHeight:We,popupWidth:be,screenLocation:E,side:"right",view:w}),dt=this._isOutsideView({popupHeight:We,popupWidth:be,screenLocation:E,side:"left",view:w}),gt=this._isOutsideView({popupHeight:We,popupWidth:be,screenLocation:E,side:"top",view:w}),lt=this._isOutsideView({popupHeight:We,popupWidth:be,screenLocation:E,side:"bottom",view:w});return dt?gt?"bottom-right":"top-right":qe?gt?"bottom-left":"top-left":gt?lt?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(g){return"function"==typeof g?g.call(this):g}_getCurrentAlignment(){const{alignment:g,dockEnabled:p}=this;return p||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(g)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(g){const p=["left","right"];return(0,Lo.dZ)(this.container)&&p.reverse(),g.replace(/leading/gi,p[0]).replace(/trailing/gi,p[1])}_callDockPosition(g){return"function"==typeof g?g.call(this):g}_getDockPosition(){var g;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(g=this.dockOptions)?void 0:g.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(g){var p;if("auto"!==g)return g;const y=null==(p=this.viewModel)?void 0:p.view,v=(0,Lo.dZ)(this.container)?"top-left":"top-right";if(!y)return v;const _=y.padding||{left:0,right:0,top:0,bottom:0},E=y.width-_.left-_.right,{breakpoints:w}=y;return w&&E<=w.xsmall?"bottom-center":v}_positionContainer(g=this._containerNode){if(g&&(this._containerNode=g),!g)return;const{screenLocation:p}=this.viewModel,{width:y}=g.getBoundingClientRect(),v=this._calculatePositionStyle(p,y);v&&(g.style.top=v.top,g.style.left=v.left,g.style.bottom=v.bottom,g.style.right=v.right)}_calculateFullWidth(g){const{currentAlignment:p,_pointerOffsetInPx:y}=this;return"top-left"===p||"bottom-left"===p||"top-right"===p||"bottom-right"===p?g+y:g}_calculateAlignmentPosition(g,p,y,v){const{currentAlignment:_,_pointerOffsetInPx:E}=this,w=v/2,D=y.height-p,O=y.width-g,{padding:A}=this.view;return"bottom-center"===_?{top:p+E-A.top,left:g-w-A.left}:"top-left"===_?{bottom:D+E-A.bottom,right:O+E-A.right}:"bottom-left"===_?{top:p+E-A.top,right:O+E-A.right}:"top-right"===_?{bottom:D+E-A.bottom,left:g+E-A.left}:"bottom-right"===_?{top:p+E-A.top,left:g+E-A.left}:"top-center"===_?{bottom:D+E-A.bottom,left:g-w-A.left}:void 0}_calculatePositionStyle(g,p){const{dockEnabled:y,view:v}=this;if(!v)return;if(y)return{left:"",top:"",right:"",bottom:""};if((0,dr.Wi)(g)||!p)return;const _=this._calculateFullWidth(p),E=this._calculateAlignmentPosition(g.x,g.y,v,_);return E?{top:void 0!==E.top?`${E.top}px`:"auto",left:void 0!==E.left?`${E.left}px`:"auto",bottom:void 0!==E.bottom?`${E.bottom}px`:"auto",right:void 0!==E.right?`${E.right}px`:"auto"}:void 0}_viewChange(g,p){g&&p&&(this.close(),this.clear())}_viewReadyChange(g,p){if(g){const y=this.get("viewModel.view");this._wireUpView(y)}else p&&(this.close(),this.clear())}_wireUpView(g){if(this._destroySpinner(),!g)return;const{spinnerEnabled:p}=this;p&&this._createSpinner(g),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(g,p,y){const[v,_]=g,[E,w]=p,{width:D,height:O}=y;return v<=D&&E>D||v>D&&E<=D||_<=O&&w>O||_>O&&w<=O}_updateDockEnabledForViewSize(g,p){if(!g||!p)return;const y=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},v=y.left+y.right,_=y.top+y.bottom,E=[],w=[];E[0]=g[0]-v,E[1]=g[1]-_,w[0]=p[0]-v,w[1]=p[1]-_;const{dockOptions:D}=this;this._dockingThresholdCrossed(E,w,D.breakpoint)&&this._setDockEnabledForViewSize(D),this._setCurrentDockPosition()}_focusDockButtonNode(g){this._focusDockButton&&(this._focusDockButton=!1,g.focus())}_closeButtonNodeUpdated(g){return this._focusClose?(this._focusClose=!1,void g.focus()):this._blurClose?(this._blurClose=!1,void g.blur()):void 0}_mainContainerNodeUpdated(g){return this._mainContainerNode=g,this._focusContainer?(this._focusContainer=!1,void g.focus()):this._blurContainer?(this._blurContainer=!1,void g.blur()):void 0}_featureMenuNodeUpdated(g){if(this._featureMenuNode=g,!g||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const p=g.querySelectorAll("li");p.length&&p[0].focus()}_actionsMenuNodeUpdated(g){if(this._actionsMenuNode=g,!g||!this._focusFirstAction)return;this._focusFirstAction=!1;const p=g.querySelectorAll("li");p.length&&p[0].focus()}_focusFeatureMenuButtonNode(g){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,g.focus())}_focusActionsMenuButtonNode(g){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,g.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:g,viewModel:p}=this;p&&(p.screenLocationEnabled=p.active&&!g)}_shouldDockAtCurrentViewSize(g){var p,y;const v=g.breakpoint,_=null==(p=this.viewModel)||null==(y=p.view)?void 0:y.ui;if(!_)return!1;const{width:E,height:w}=_;if(isNaN(E)||isNaN(w))return!1;const D=v.hasOwnProperty("width")&&E<=v.width,O=v.hasOwnProperty("height")&&w<=v.height;return D||O}_setDockEnabledForViewSize(g){g.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(g))}_getPageText(g,p){return this.featureNavigationVisible?(0,Wu.n)(this.messages.pageText,{index:p+1,total:g}):null}_destroySpinner(){const{_spinner:g,view:p}=this;g&&(p&&p.ui&&p.ui.remove(this._spinner,WR),g.destroy(),this._spinner=null)}_createSpinner(g){g&&(this._spinner=new eq({view:g}),g.ui.add(this._spinner,{key:WR,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const g=!this.featureMenuOpen;this._featureMenuOpenChanged(g),this.actionsMenuOpen=!1,this.featureMenuOpen=g}_toggleActionsMenu(){const g=!this.actionsMenuOpen;this._actionsMenuOpenChanged(g),this.featureMenuOpen=!1,this.actionsMenuOpen=g}_triggerAction(g){const p=g.currentTarget.dataset.actionUid,{allActions:y}=this.viewModel,v=y.findIndex(E=>E.uid===p),_=y.getItemAt(v);_&&"toggle"===_.type&&(_.value=!_.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(v)}_selectFeature(g){const p=g.currentTarget["data-feature-index"];isNaN(p)||(this.viewModel.selectedFeatureIndex=p),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"actionsMenuId",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"actionsMenuButtonId",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"featureMenuId",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"titleId",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"contentId",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"hasContent",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"featureNavigationVisible",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"collapsible",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"featureMenuVisible",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"contentCollapsed",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"dividedActions",null),(0,we._)([(0,an.B)("viewModel.actions")],gn.prototype,"actions",void 0),(0,we._)([(0,Re.Cb)()],gn.prototype,"actionsMenuOpen",null),(0,we._)([(0,Re.Cb)()],gn.prototype,"alignment",void 0),(0,we._)([(0,an.B)("viewModel.autoCloseEnabled")],gn.prototype,"autoCloseEnabled",void 0),(0,we._)([(0,an.B)("viewModel.autoOpenEnabled")],gn.prototype,"autoOpenEnabled",void 0),(0,we._)([(0,an.B)("viewModel.defaultPopupTemplateEnabled")],gn.prototype,"defaultPopupTemplateEnabled",void 0),(0,we._)([(0,an.B)("viewModel.content")],gn.prototype,"content",void 0),(0,we._)([(0,Re.Cb)()],gn.prototype,"collapsed",void 0),(0,we._)([(0,Re.Cb)()],gn.prototype,"collapseEnabled",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"currentAlignment",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"currentDockPosition",null),(0,we._)([(0,Re.Cb)()],gn.prototype,"dockOptions",null),(0,we._)([(0,Re.Cb)()],gn.prototype,"dockEnabled",void 0),(0,we._)([(0,an.B)("viewModel.featureCount")],gn.prototype,"featureCount",void 0),(0,we._)([(0,Re.Cb)()],gn.prototype,"featureMenuOpen",void 0),(0,we._)([(0,an.B)("viewModel.features")],gn.prototype,"features",void 0),(0,we._)([(0,an.B)("viewModel.goToOverride")],gn.prototype,"goToOverride",void 0),(0,we._)([(0,Re.Cb)()],gn.prototype,"headingLevel",void 0),(0,we._)([(0,an.B)("viewModel.highlightEnabled")],gn.prototype,"highlightEnabled",void 0),(0,we._)([(0,an.B)("viewModel.location")],gn.prototype,"location",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],gn.prototype,"label",void 0),(0,we._)([(0,Re.Cb)()],gn.prototype,"maxInlineActions",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Popup/t9n/Popup")],gn.prototype,"messages",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/t9n/common")],gn.prototype,"messagesCommon",void 0),(0,we._)([(0,an.B)("viewModel.promises")],gn.prototype,"promises",void 0),(0,we._)([(0,an.B)("viewModel.selectedFeature")],gn.prototype,"selectedFeature",void 0),(0,we._)([(0,an.B)("viewModel.selectedFeatureIndex")],gn.prototype,"selectedFeatureIndex",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],gn.prototype,"selectedFeatureWidget",null),(0,we._)([(0,Re.Cb)()],gn.prototype,"spinnerEnabled",void 0),(0,we._)([(0,an.B)("viewModel.title")],gn.prototype,"title",void 0),(0,we._)([(0,an.B)("viewModel.updateLocationEnabled")],gn.prototype,"updateLocationEnabled",void 0),(0,we._)([(0,an.B)("viewModel.view")],gn.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:UR}),VR(["triggerAction","trigger-action"])],gn.prototype,"viewModel",void 0),(0,we._)([(0,an.B)("viewModel.visible")],gn.prototype,"visible",void 0),(0,we._)([(0,Re.Cb)()],gn.prototype,"visibleElements",void 0),(0,we._)([(0,fa.p)("visibleElements")],gn.prototype,"castVisibleElements",null),(0,we._)([(0,Na.h)()],gn.prototype,"_close",null),(0,we._)([(0,Na.h)()],gn.prototype,"_toggleDockEnabled",null),(0,we._)([(0,Na.h)()],gn.prototype,"_toggleFeatureMenu",null),(0,we._)([(0,Na.h)()],gn.prototype,"_toggleActionsMenu",null),(0,we._)([(0,Na.h)()],gn.prototype,"_triggerAction",null),(0,we._)([(0,Na.h)()],gn.prototype,"_selectFeature",null),(0,we._)([(0,Na.h)()],gn.prototype,"_next",null),(0,we._)([(0,Na.h)()],gn.prototype,"_previous",null),gn=(0,we._)([(0,Tr.j)(KR)],gn);const HR=gn,W2=[0,0];function YR(g){g&&((0,lu.cS)(g),g.parentNode&&g.parentNode.removeChild(g))}const xq=g=>{let p=class extends g{constructor(...y){super(...y),this._freqInfo={freq:16,time:750},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",v=>{const _=this.surface;_&&_.setAttribute("data-cursor",v)}),this.watch("interacting",v=>{const _=this.surface;_&&_.setAttribute("data-interacting",v.toString())})])}initialize(){this.handles.add(this.watch("ui",(y,v)=>this._handleUIChange(y,v))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(y){const v=this._get("container");if(v===y)return;const _="dom-size";if(this.handles.remove(_),this._stopMeasuring(),v&&(v.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),YR(this.root),this._set("root",null),(0,lu.YD)(this.userContent,v),YR(this.userContent),this._set("userContent",null)),y){y.classList.add("esri-view");const E=document.createElement("div");E.className="esri-view-user-storage",(0,lu.YD)(y,E),y.appendChild(E),this._set("userContent",E);const w=document.createElement("div");w.className="esri-view-root",y.insertBefore(w,y.firstChild),this._set("root",w);const D=document.createElement("div");D.className="esri-view-surface",D.setAttribute("role","application"),D.tabIndex=0,w.appendChild(D),this._set("surface",D);const O=new J3;w.appendChild(O.surface),this._set("overlay",O),O.watch("needsRender",A=>{A&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=(0,Td.A)({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add((0,Br.S1)(this,"size",A=>{const[W,q]=A,_e="esri-view-surface--inset-outline";W>=document.body.clientWidth||q>=document.body.clientHeight?D.classList.add(_e):D.classList.remove(_e)}),_),this._set("container",y),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const y=document.activeElement===this.surface;return document.hasFocus()&&y}get popup(){return this._get("popup")||new HR({view:this})}set popup(y){const v=this._get("popup");v&&v!==y&&v.destroy(),this._set("popup",y)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(y,v,_){const E=this.position;return y-=E[0],v-=E[1],_?(_[0]=y,_[1]=v):_=[y,v],_}containerToPage(y,v,_){const E=this.position;return y+=E[0],v+=E[1],_?(_[0]=y,_[1]=v):_=[y,v],_}_handleUIChange(y,v){v&&(this.handles.remove("ui"),v.destroy()),y&&this._wireUI(y),this._set("ui",y)}_wireUI(y){this.handles.remove("ui"),y&&(y.view=this,this.handles.add([(0,Br.S1)(this,"root",v=>{y.container=v?function Cq(g){const p=document.createElement("div");return g.appendChild(p),p}(v):null}),(0,Br.S1)(this,"popup",(v,_)=>{const E="popup";_&&y.remove(_,E),v&&(v.view=y.view,y.add(v,{key:E,position:"manual"}))})],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const y=this._freqInfo;y.freq=16,y.time=750,this.handles.add([(()=>{const v=()=>{y.freq=16,y.time=750};return window.addEventListener("resize",v),{remove(){window.removeEventListener("resize",v)}}})(),(0,Td.A)({prepare:v=>{const _=this._measure(),E=this._freqInfo;if(E.time+=v.deltaTime,_&&(E.freq=16,this._get("resizing")||this._set("resizing",!0)),E.time<E.freq)return;E.time=0;const w=this._position();E.freq=w||_?16:Math.min(750,2*E.freq),!_&&E.freq>=512&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const y=this.container,v=y?y.clientWidth:0,_=y?y.clientHeight:0;if(0===v||0===_)return this.suspended||this._set("suspended",!0),!1;const E=this.width,w=this.height;return v===E&&_===w?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",v),this._set("height",_),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:E,oldHeight:w,width:v,height:_}),!0)}_position(){const v=this.position,_=function bq(g){const p=(g.ownerDocument||window.document).defaultView,y=g.getBoundingClientRect();return W2[0]=y.left+p.pageXOffset,W2[1]=y.top+p.pageYOffset,W2}(this.container);return!(v&&_[0]===v[0]&&_[1]===v[1]||(this._set("position",[_[0],_[1]]),0))}forceDOMReadyCycle(){}};return(0,we._)([(0,Re.Cb)({value:null,cast:y=>(0,lu.L7)(y)})],p.prototype,"container",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"focused",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"height",void 0),(0,we._)([(0,Re.Cb)({type:HR})],p.prototype,"popup",null),(0,we._)([(0,Re.Cb)({type:J3})],p.prototype,"overlay",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"position",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"resizing",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"root",void 0),(0,we._)([(0,Re.Cb)({value:null,readOnly:!0})],p.prototype,"size",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"surface",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"suspended",void 0),(0,we._)([(0,Re.Cb)()],p.prototype,"ui",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"userContent",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],p.prototype,"width",void 0),(0,we._)([(0,Re.Cb)()],p.prototype,"widthBreakpoint",void 0),p=(0,we._)([(0,Tr.j)("esri.views.DOMContainer")],p),p};var ga=C(23841),Dq=C(2584);const Sq=g=>{let p=class extends g{fetchPopupFeatures(y,v){var _=this;return(0,qr.Z)(function*(){yield _.when();const{location:E,queryArea:w,layerViewsAndGraphics:D,clientOnlyGraphics:O}=yield _._prepareFetchPopupFeatures(y,v),A=Promise.resolve(O),W=_._queryLayerPopupFeatures(w,D,v),q=W.map(_e=>_e.promise);return{location:E,clientOnlyGraphics:O,allGraphicsPromise:(0,ni.WW)([A,...q]).then(o3.xH),promisesPerLayerView:W}})()}_queryLayerPopupFeatures(y,v,_){return v.map(({layerView:E,graphics:w})=>{const D={clientGraphics:w,event:(0,dr.pC)(_)?_.event:null,signal:(0,dr.pC)(_)?_.signal:null,defaultPopupTemplateEnabled:!!(0,dr.pC)(_)&&!!_.defaultPopupTemplateEnabled},O=E.fetchPopupFeatures(y,D);return{layerView:E,promise:O}})}_isValidPopupGraphic(y,v){return y&&!!y.getEffectivePopupTemplate((0,dr.pC)(v)&&v.defaultPopupTemplateEnabled)}_prepareFetchPopupFeatures(y,v){var _=this;return(0,qr.Z)(function*(){const{clientGraphics:E,queryArea:w,location:D}=yield _._popupHitTestGraphics(y,v),O=_._getFetchPopupLayerViews(),{layerViewsAndGraphics:A,clientOnlyGraphics:W}=_._graphicsPerFetchPopupLayerView(E,O);return{clientOnlyGraphics:W,layerViewsAndGraphics:A,queryArea:w,location:D}})()}_popupHitTestGraphics(y,v){var _=this;return(0,qr.Z)(function*(){const{results:E,mapPoint:w}=yield _.popupHitTest(y),D=E.filter(A=>_._isValidPopupGraphic(A.graphic,v)),O=D.length?D[0].mapPoint:null;return{clientGraphics:D.map(A=>A.graphic),queryArea:w,location:w||O}})()}_getFetchPopupLayerViews(){const y=[];return this.allLayerViews.forEach(v=>{this._isValidPopupLayerView(v)&&y.push(v)}),(0,dr.pC)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&y.push(this.graphicsView),y.reverse()}_isValidPopupLayerView(y){return(0,dr.pC)(y)&&(!("layer"in y)||!y.suspended)&&"fetchPopupFeatures"in y}_graphicsPerFetchPopupLayerView(y,v){const _=[],E=new Map,w=v.map(D=>{const O=[];return E.set("layer"in D?D.layer:D.graphics,O),{layerView:D,graphics:O}});for(const D of y){const O=E.get(D.layer)||E.get(D.sourceLayer)||null;O?O.push(D):_.push(D)}return{layerViewsAndGraphics:w,clientOnlyGraphics:_}}};return p=(0,we._)([(0,Tr.j)("esri.views.PopupView")],p),p};var JR=C(54024),dv=C(32917),Z2=C(28705),$2=C(79334);let hv=class extends Z2.a{_own(g){g.parent=this.owner}_release(g){g.parent=null}};hv=(0,we._)([(0,Tr.j)("esri.support.AnalysesCollection")],hv);var XR=C(51815);let Uc=class extends pi.Z{constructor(g){super(g),this.view=null,this.baseLayerViews=new eo.Z,this.referenceLayerViews=new eo.Z,this._loadingHandle=(0,Br.S1)(this,"view.map.basemap",p=>{p&&p.load().catch(()=>{})})}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){return!(this.view&&this.view.suspended||!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)}};(0,we._)([(0,Re.Cb)({constructOnly:!0})],Uc.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Uc.prototype,"baseLayerViews",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Uc.prototype,"referenceLayerViews",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Uc.prototype,"suspended",null),(0,we._)([(0,Re.Cb)({type:Boolean,readOnly:!0})],Uc.prototype,"updating",null),Uc=(0,we._)([(0,Tr.j)("esri.views.BasemapView")],Uc);var fv=C(88159);const Oq=Eo.Z.getLogger("esri.views.LayerViewManager");class Iq{constructor(p,y,v){this.layer=p,this.view=y,this.layerViewImporter=v,this._controller=new AbortController,this._deferred=(0,ni.dD)(),this._started=!1,this.done=!1,(0,ni.fu)(this._controller.signal,()=>{const _=new sn.Z("cancelled:layerview-create","layerview creation cancelled",{layer:p});this._deferred.reject(_)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:p}=this;if(!p)return;const{layer:y,view:v}=this;y.emit("layerview-destroy",{view:v,layerView:p}),v.emit("layerview-destroy",{layer:y,layerView:p}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}start(){var p=this;return(0,qr.Z)(function*(){if(p._started)return;p._started=!0;const{_controller:{signal:y},layer:v,view:_}=p;p._map=_.map;try{var E,w;let D,O;if(yield v.load({signal:y}),"prefetchResources"in v&&(yield v.prefetchResources({signal:y})),v.createLayerView)D=yield v.createLayerView(_,{signal:y});else{if(!p.layerViewImporter.hasLayerViewModule(v))throw new sn.Z("layer:view-not-supported","No layerview implementation was found");const W=yield p.layerViewImporter.importLayerView(v);(0,ni.k_)(y),D="default"in W?new W.default({layer:v,view:_}):new W({layer:v,view:_})}const A=()=>{O=(0,dr.hw)(O),D.destroyed||D.destroy(),D.layer=null,D.parent=null,D.view=null,p.done=!0};O=(0,ni.fu)(y,A),(0,ni.k_)(y);try{yield D.when()}catch(W){throw A(),W}if(!(null==(E=p._map)||null==(w=E.allLayers)?void 0:w.includes(v)))return A(),void p._deferred.reject(new sn.Z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:v}));p.layerView=D,v.emit("layerview-create",{view:_,layerView:D}),_.emit("layerview-create",{layer:v,layerView:D}),p.done=!0,p._deferred.resolve(D)}catch(D){v.emit("layerview-create-error",{view:_,error:D}),_.emit("layerview-create-error",{layer:v,error:D}),p.done=!0,p._deferred.reject(new sn.Z("layerview:create-error","layerview creation failed",{layer:v,error:D}))}})()}}let tl=class extends Lc.r{constructor(g){super(g),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Y3.t,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var p;const y=null==(p=this.view.map)?void 0:p.allLayers;if(y)for(const v of y)this.layerViewImporter.hasLayerViewModule(v)&&this.layerViewImporter.importLayerView(v)},this._reschedule=()=>((0,dr.Wi)(this._workPromise)&&(this._workPromise=(0,ni.dD)()),this.handles.remove("reschedule"),this.handles.add((0,Td.Os)(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var p,y,v;const _=this.view.map;if(this._map!==_&&(this.clear(),this._map=_),(0,dr.Wi)(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const E=new Qh.Z({getCollections:()=>this._rootCollectionNames.map(O=>this.get(O)),getChildrenFunction:O=>O&&"layers"in O?O.layers:null});if(!E)return this._workPromise.resolve(),void(this._workPromise=null);for(const O of E)this._createLayerView(O);this._refreshCollections();for(const[O,A]of this._layerLayerViewInfoMap)E.includes(O)||(this._layerLayerViewInfoMap.delete(A.layer),A.destroy());const w=E.filter(O=>"group"===O.type).map(O=>O.layers),D=[null==_||null==(p=_.ground)?void 0:p.layers,null==_||null==(y=_.basemap)?void 0:y.baseLayers,null==_||null==(v=_.basemap)?void 0:v.referenceLayers,null==_?void 0:_.layers,...w].filter(O=>!!O);this.handles.add(D.map(O=>this._watchUpdatingTracking.addOnCollectionChange(O,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([(0,Br.on)(this,"view.map.allLayers","change",this._preloadLayerViewModules,this._preloadLayerViewModules),(0,Br.S1)(this.view,["map.basemap","map.ground","map.layers","ready"],this._reschedule,!0)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const g=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&g.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(g)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return(0,dr.pC)(this._workPromise)||this._watchUpdatingTracking.updating||(0,fv.oE)(this._layerLayerViewInfoMap,g=>!g.done)}get updatingRemaining(){let g=0;for(const p of this._layerLayerViewInfoMap.values())p.done||++g;return g}clear(){if(!this.destroyed){for(const g of this._layerLayerViewInfoMap.values())g.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}whenLayerView(g){var p=this;return(0,qr.Z)(function*(){if(yield p._reschedule(),!p._layerLayerViewInfoMap.has(g))throw new sn.Z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:g});return p._layerLayerViewInfoMap.get(g).promise})()}_refreshCollections(){for(const[g,p]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(g),this.get(p),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(g,p,y){if(!g||!p)return void(p&&p.removeAll());let v=0;for(const _ of g){const E=this._layerLayerViewInfoMap.get(_);if(!E||!E.layerView)continue;const w=E.layerView;w.layer=_,w.parent=y,p.getItemAt(v)!==w&&p.splice(v,0,w),_.layers&&this._populateLayerViewsOwners(_.layers,w.layerViews,w),v+=1}v<p.length&&p.splice(v,p.length)}_createLayerView(g){if(this._layerLayerViewInfoMap.has(g))return this.view.ready&&this._layerLayerViewInfoMap.get(g).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");g.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(g)&&this.layerViewImporter.importLayerView(g);const p=new Iq(g,this.view,this.layerViewImporter);p.promise.then(()=>this._refreshCollections(),y=>{var v,_;y&&((0,ni.D_)(y)||"cancelled:layerview-create"===y.name)||Oq.error(`Failed to create layerview for layer title:'${null!=(v=g.title)?v:"no title"}', id:'${null!=(_=g.id)?_:"no id"}' of type '${g.type}'.`,{layer:g,error:y}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(g,p),this.view.ready&&p.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};(0,we._)([(0,Re.Cb)()],tl.prototype,"_workPromise",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],tl.prototype,"_watchUpdatingTracking",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],tl.prototype,"_layersToLayerViews",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],tl.prototype,"_rootCollectionNames",null),(0,we._)([(0,Re.Cb)()],tl.prototype,"layerViewImporter",void 0),(0,we._)([(0,Re.Cb)()],tl.prototype,"supportsGround",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],tl.prototype,"updating",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],tl.prototype,"updatingRemaining",null),(0,we._)([(0,Re.Cb)({constructOnly:!0})],tl.prototype,"view",void 0),tl=(0,we._)([(0,Tr.j)("esri.views.LayerViewManager")],tl);const Tq=tl;let Fa=class extends pi.Z{constructor(g){super(g),this.factor=1.5,this.offset=(0,ga.vW)(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};(0,we._)([(0,Re.Cb)({type:Number})],Fa.prototype,"factor",void 0),(0,we._)([(0,Re.Cb)({nonNullable:!0})],Fa.prototype,"offset",void 0),(0,we._)([(0,Re.Cb)()],Fa.prototype,"position",void 0),(0,we._)([(0,Re.Cb)({type:Number,range:{min:0}})],Fa.prototype,"size",void 0),(0,we._)([(0,Re.Cb)()],Fa.prototype,"maskUrl",void 0),(0,we._)([(0,Re.Cb)()],Fa.prototype,"maskEnabled",void 0),(0,we._)([(0,Re.Cb)()],Fa.prototype,"overlayUrl",void 0),(0,we._)([(0,Re.Cb)()],Fa.prototype,"overlayEnabled",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Fa.prototype,"version",null),(0,we._)([(0,Re.Cb)({type:Boolean})],Fa.prototype,"visible",void 0),Fa=(0,we._)([(0,Tr.j)("esri.views.Magnifier")],Fa);const QR=Fa;var qR=C(74447);class Aq{constructor(p,y){this._stage=p,this._textureRequests=new Map,this._frameTask=(0,dr.pC)(y)?y.registerTask(qR.T8.TEXTURE_UNLOAD):qR.sq}destroy(){this._frameTask.remove(),this._textureRequests.forEach(p=>this._releaseTextureRequest(p)),this._textureRequests.clear()}fromData(p,y){const v=this.makeUid(p);let _=this._textureRequests.get(v);return _||(_={referenceCount:0,texture:y(),textureAsync:null,abortController:null},this._stage&&(this._stage.add(_.texture),this._stage.loadSynchronous(_.texture)),this._textureRequests.set(v,_)),_.referenceCount++,{uid:v,texture:_.texture,release:()=>this._release(v)}}_release(p){if(!this._textureRequests)return;const y=this._textureRequests.get(p);y?(y.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+p),y.referenceCount--,y.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(p))):console.warn(`TextureCollection: texture doesn't exist: '${p}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(p){if(!this._textureRequests)return;const y=this._textureRequests.get(p);!y||y.referenceCount>0||(this._releaseTextureRequest(y),this._textureRequests.delete(p))}_releaseTextureRequest(p){var y;p.texture?null==(y=this._stage)||y.remove(p.texture):p.abortController&&(p.abortController.abort(),p.abortController=null)}makeUid(p,y=null){return(0,dr.pC)(y)?`${p}.${y}px`:p}}var xs=C(35216);const e8=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],t8={};function r8(g){return!!t8[g]}e8.forEach(g=>{t8[g]=!0});class Rq{constructor(p){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=p,this.inputManager=null}connect(p){p&&this.disconnect(),this.inputManager=p,this.handlers.forEach(({handler:y,priority:v},_)=>this.inputManager.installHandlers(_,[y],v))}disconnect(){this.inputManager&&this.handlers.forEach((p,y)=>this.inputManager.uninstallHandlers(y)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(p,y,v,_){const E=Array.isArray(p)?p:p.split(",");if(!function Pq(g){for(const p of g)if(!r8(p))return!1;return!0}(E))return E.some(r8)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let w,D;Array.isArray(y)?D=y:(w=y,D=[]),"function"==typeof v?w=v:_=v,_=null!=_?_:Ef.f.DEFAULT;const O=this.createUniqueGroupName(),A=new Lq(this.view,E,D,w);this.handlers.set(O,{handler:A,priority:_});for(const W of E){const q=this.handlerCounts.get(W)||0;this.handlerCounts.set(W,q+1)}return this.inputManager&&this.inputManager.installHandlers(O,[A],_),{remove:()=>this.removeHandler(O,E)}}hasHandler(p){return!!this.handlerCounts.get(p)}removeHandler(p,y){if(this.handlers.has(p)){this.handlers.delete(p);for(const v of y){const _=this.handlerCounts.get(v);void 0===_?console.error("Trying to remove handler for event that has no handlers registered: ",v):1===_?this.handlerCounts.delete(v):this.handlerCounts.set(v,_-1)}}this.inputManager&&this.inputManager.uninstallHandlers(p)}createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class Lq extends xs.a{constructor(p,y,v,_){super(!0),this.view=p;for(const E of y)switch(E){case"click":this.registerIncoming("click",v,w=>_(this.wrapClick(w)));break;case"double-click":this.registerIncoming("double-click",v,w=>_(this.wrapDoubleClick(w)));break;case"immediate-click":this.registerIncoming("immediate-click",v,w=>_(this.wrapImmediateClick(w)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",v,w=>_(this.wrapImmediateDoubleClick(w)));break;case"hold":this.registerIncoming("hold",v,w=>_(this.wrapHold(w)));break;case"drag":this.registerIncoming("drag",v,w=>{const D=this.wrapDrag(w);D&&_(D)});break;case"key-down":this.registerIncoming("key-down",v,w=>_(this.wrapKeyDown(w)));break;case"key-up":this.registerIncoming("key-up",v,w=>_(this.wrapKeyUp(w)));break;case"pointer-down":this.registerIncoming("pointer-down",v,w=>_(this.wrapPointer(w,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",v,w=>_(this.wrapPointer(w,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",v,w=>_(this.wrapPointer(w,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",v,w=>_(this.wrapPointerDrag(w)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",v,w=>_(this.wrapMouseWheel(w)));break;case"pointer-enter":this.registerIncoming("pointer-enter",v,w=>_(this.wrapPointer(w,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",v,w=>_(this.wrapPointer(w,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",v,w=>{_(this.wrapGamepad(w))});break;case"focus":this.registerIncoming("focus",v,w=>{_(this.wrapFocus(w))});break;case"blur":this.registerIncoming("blur",v,w=>{_(this.wrapBlur(w))})}}wrapFocus(p){return{type:"focus",timestamp:p.timestamp,native:p.data.native,cancelable:p.cancelable,stopPropagation:()=>p.stopPropagation(),async:y=>p.async(y),preventDefault:()=>p.preventDefault()}}wrapBlur(p){return{type:"blur",timestamp:p.timestamp,native:p.data.native,cancelable:p.cancelable,stopPropagation:()=>p.stopPropagation(),async:y=>p.async(y),preventDefault:()=>p.preventDefault()}}wrapClick(p){const{pointerType:y,button:v,buttons:_,x:E,y:w,native:D,eventId:O}=p.data,{cancelable:A,timestamp:W}=p;return{type:"click",pointerType:y,button:v,buttons:_,x:E,y:w,native:D,timestamp:W,screenPoint:(0,ga.vW)(E,w),mapPoint:this.getMapPoint(E,w),eventId:O,cancelable:A,stopPropagation:()=>p.stopPropagation(),async:q=>p.async(q),preventDefault:()=>p.preventDefault()}}wrapDoubleClick(p){const{pointerType:y,button:v,buttons:_,x:E,y:w,native:D,eventId:O}=p.data,{cancelable:A,timestamp:W}=p;return{type:"double-click",pointerType:y,button:v,buttons:_,x:E,y:w,native:D,timestamp:W,mapPoint:this.getMapPoint(E,w),eventId:O,cancelable:A,stopPropagation:()=>p.stopPropagation(),async:q=>p.async(q),preventDefault:()=>p.preventDefault()}}wrapImmediateClick(p){const{pointerType:y,button:v,buttons:_,x:E,y:w,native:D,eventId:O}=p.data,A=D.pointerId,{cancelable:W,timestamp:q}=p;return{type:"immediate-click",pointerId:A,pointerType:y,button:v,buttons:_,x:E,y:w,native:D,timestamp:q,mapPoint:this.getMapPoint(E,w),eventId:O,cancelable:W,stopPropagation:()=>p.stopPropagation(),async:_e=>p.async(_e),preventDefault:()=>p.preventDefault()}}wrapImmediateDoubleClick(p){const{pointerType:y,button:v,buttons:_,x:E,y:w,native:D,eventId:O}=p.data,A=D.pointerId,{cancelable:W,timestamp:q}=p;return{type:"immediate-double-click",pointerId:A,pointerType:y,button:v,buttons:_,x:E,y:w,native:D,timestamp:q,mapPoint:this.getMapPoint(E,w),eventId:O,cancelable:W,stopPropagation:()=>p.stopPropagation(),async:_e=>p.async(_e),preventDefault:()=>p.preventDefault()}}wrapHold(p){const{pointerType:y,button:v,buttons:_,x:E,y:w,native:D}=p.data,{cancelable:O,timestamp:A}=p;return{type:"hold",pointerType:y,button:v,buttons:_,x:E,y:w,native:D,timestamp:A,mapPoint:this.getMapPoint(E,w),cancelable:O,stopPropagation:()=>p.stopPropagation(),async:W=>p.async(W),preventDefault:()=>p.preventDefault()}}getMapPoint(p,y){return this.view.toMap((0,ga.vW)(p,y),{exclude:[]})}wrapDrag(p){const y=p.data,{x:v,y:_}=y.center,{action:E,pointerType:w,button:D}=y;if("start"===E&&(this.latestDragStart=y),!this.latestDragStart)return;const O=y.pointer.native,A=y.buttons,{cancelable:W,timestamp:q}=p,_e={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return"end"===E&&(this.latestDragStart=void 0),{type:"drag",action:E,x:v,y:_,origin:_e,pointerType:w,button:D,buttons:A,radius:y.radius,angle:(0,_0.BV)(y.angle),native:O,timestamp:q,cancelable:W,stopPropagation:()=>p.stopPropagation(),async:be=>p.async(be),preventDefault:()=>p.preventDefault()}}wrapKeyDown(p){const{key:y,repeat:v,native:_}=p.data,{cancelable:E,timestamp:w}=p;return{type:"key-down",key:y,repeat:v,native:_,timestamp:w,cancelable:E,stopPropagation:()=>p.stopPropagation(),async:D=>p.async(D),preventDefault:()=>p.preventDefault()}}wrapKeyUp(p){const{key:y,native:v}=p.data,{cancelable:_,timestamp:E}=p;return{type:"key-up",key:y,native:v,timestamp:E,cancelable:_,stopPropagation:()=>p.stopPropagation(),async:w=>p.async(w),preventDefault:()=>p.preventDefault()}}wrapPointer(p,y){const{x:v,y:_,button:E,buttons:w,native:D,eventId:O}=p.data,A=D.pointerId,W=D.pointerType,{cancelable:q,timestamp:_e}=p;return{type:y,x:v,y:_,pointerId:A,pointerType:W,button:E,buttons:w,native:D,timestamp:_e,eventId:O,cancelable:q,stopPropagation:()=>p.stopPropagation(),async:be=>p.async(be),preventDefault:()=>p.preventDefault()}}wrapPointerDrag(p){const{x:y,y:v,buttons:_,native:E,eventId:w}=p.data.currentEvent,{button:D}=p.data.startEvent,O=p.data.startEvent.native.pointerId,A=p.data.startEvent.native.pointerType,W=p.data.action,q={x:p.data.startEvent.x,y:p.data.startEvent.y},{cancelable:_e,timestamp:be}=p;return{type:"pointer-drag",x:y,y:v,pointerId:O,pointerType:A,button:D,buttons:_,action:W,origin:q,native:E,timestamp:be,eventId:w,cancelable:_e,stopPropagation:()=>p.stopPropagation(),async:We=>p.async(We),preventDefault:()=>p.preventDefault()}}wrapMouseWheel(p){const{cancelable:y,data:v,timestamp:_}=p,{x:E,y:w,deltaY:D,native:O}=v;return{type:"mouse-wheel",x:E,y:w,deltaY:D,native:O,timestamp:_,cancelable:y,stopPropagation:()=>p.stopPropagation(),async:A=>p.async(A),preventDefault:()=>p.preventDefault()}}wrapGamepad(p){const{action:y,state:v,device:_}=p.data,{cancelable:E,timestamp:w}=p,{buttons:D,axes:O}=v;return{type:"gamepad",device:_,timestamp:w,action:y,buttons:D,axes:O,cancelable:E,stopPropagation:()=>p.stopPropagation(),async:A=>p.async(A),preventDefault:()=>p.preventDefault()}}}function Nq(g){return[g.on("after-add",p=>{const y=p.item;y.view&&y.view.ready&&!y.attached&&y.attach()}),g.on("after-remove",p=>{const y=p.item;y.active&&(y.view.activeTool=null),y.attached&&y.detach()})]}function pv(g){return g.visible&&g.getEditableFlag(0)&&g.getEditableFlag(1)}function cu(g){return(0,ga.vW)(g.x,g.y)}function n8(g,p){const y=(g instanceof HTMLElement?g:g.surface).getBoundingClientRect();return(0,ga.vW)(p.clientX-y.left,p.clientY-y.top)}function i8(g,p){return p instanceof Event?n8(g,p):cu(p)}function o8(g){if(g instanceof Event)return!0;if("object"==typeof g&&"type"in g)switch(g.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class Fq{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(p,y){const v=()=>p.stopPropagation();switch(p.type){case"pointer-move":s8(p.pointerType)&&this._pointerLocations.set(p.pointerId,{x:p.x,y:p.y,pointerType:p.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(v(),"end"===p.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!a8(p))break;const _=cu(p),E=this._intersect(_,p.pointerType,y.forEachTool);if((0,dr.Wi)(E))break;const w=this._findToolAndManipulatorByKey(E,y.forEachTool,mv),D=(0,dr.yw)(w,A=>A.manipulator),O=(0,dr.yw)(w,A=>A.tool);!((0,dr.pC)(D)&&(0,dr.pC)(O)&&D.interactive)||D.grabbable&&D.grabbableForEvent(p)||!D.grabbing||D.dragging||this._ungrabManipulatorBeforeDragging(D,O,p),(0,dr.pC)(D)&&D.interactive&&D.grabbable&&D.grabbableForEvent(p)&&!D.grabbing&&(this._grabbedManipulators.set(p.pointerId,{key:E,start:_,pointerType:p.pointerType}),1===this._grabbedManipulators.size&&y.activeTool!==E.tool&&(this._currentlyActiveTool=y.activeTool,this._revertToActiveTool=!0,y.setActiveTool(E.tool)),D.grabbing=!0,D.events.emit("grab-changed",{action:"start",pointerType:p.pointerType,screenPoint:_}),v());break}case"pointer-up":this._handlePointerEnd(p,y);break;case"pointer-drag":{if(!a8(p))break;const _=this._grabbedManipulators.get(p.pointerId),E=this._draggedManipulators.get(p.pointerId),w=(0,dr.yw)(_||E,({key:W})=>W),D=this._findManipulatorByKey(w,y.forEachTool);if((0,dr.Wi)(D))break;const O=cu(p);O.x=(0,_0.uZ)(O.x,0,y.view.width),O.y=(0,_0.uZ)(O.y,0,y.view.height);const A=(0,dr.Wg)(_||E).start;switch(p.action){case"start":case"update":"update"!==p.action&&1!==this._grabbedManipulators.size||(D.dragging=!0,D.events.emit("drag",E?{action:"update",start:A,screenPoint:O}:{action:"start",start:A,screenPoint:O,pointerType:p.pointerType}),this._draggedManipulators.set(p.pointerId,{key:(0,dr.Wg)(w),start:A}));break;case"end":D.dragging=!1,E&&D.events.emit("drag",{action:"end",start:A,screenPoint:O}),this._draggedManipulators.delete(p.pointerId),this._handlePointerEnd(p,y)}v();break}case"immediate-click":{const _=cu(p),E=this._intersect(_,p.pointerType,y.forEachTool),w=this._findToolAndManipulatorByKey(E,y.forEachTool,mv);if(function jq(g){return!!g.native.shiftKey}(p)||y.forEachTool(W=>{if((!(0,dr.pC)(w)||w.tool!==W||W.automaticManipulatorSelection)&&W.manipulators){let q=!1;W.manipulators.forEach(({manipulator:_e})=>{_e.selected&&(_e.selected=!1,q=!0)}),q&&W.manipulatorSelectionChanged&&W.manipulatorSelectionChanged()}}),(0,dr.Wi)(w))break;const{manipulator:D,tool:O}=w;if(!D.interactive)break;D.selectable&&O.automaticManipulatorSelection&&(D.selected=!D.selected,O.manipulatorSelectionChanged&&O.manipulatorSelectionChanged()),D.events.emit("immediate-click",{screenPoint:_,button:p.button,pointerType:p.pointerType,shiftKey:p.native.shiftKey,stopPropagation:v});break}case"click":{const _=cu(p),E=this._intersect(_,p.pointerType,y.forEachTool),w=this._findManipulatorByKey(E,y.forEachTool);if((0,dr.Wi)(w)||!w.interactive)break;w.events.emit(p.type,{screenPoint:_,button:p.button,pointerType:p.pointerType,shiftKey:p.native.shiftKey}),v();break}case"double-click":{const _=cu(p),E=this._intersect(_,p.pointerType,y.forEachTool),w=this._findManipulatorByKey(E,y.forEachTool);if((0,dr.Wi)(w)||!w.interactive)break;w.events.emit("double-click",{screenPoint:_,button:p.button,pointerType:p.pointerType,shiftKey:p.native.shiftKey,stopPropagation:v});break}case"immediate-double-click":{const _=cu(p),E=this._intersect(_,p.pointerType,y.forEachTool),w=this._findManipulatorByKey(E,y.forEachTool);if((0,dr.Wi)(w)||!w.interactive)break;w.events.emit("immediate-double-click",{screenPoint:_,button:p.button,pointerType:p.pointerType,shiftKey:p.native.shiftKey,stopPropagation:v});break}}this._updateCursor(y.forEachTool)}_ungrabManipulatorBeforeDragging(p,y,v){p.grabbing=!1,p.events.emit("grab-changed",{action:"end",pointerType:v.pointerType,screenPoint:cu(v)}),this._grabbedManipulators.forEach(({key:_},E)=>{_.tool===y&&y.manipulators.findById(_.manipulatorId)===p&&this._grabbedManipulators.delete(E)})}_handlePointerEnd(p,y){const v=(0,dr.yw)(this._grabbedManipulators.get(p.pointerId),({key:E})=>E),_=this._findManipulatorByKey(v,y.forEachTool);(0,dr.pC)(_)&&!_.dragging&&(1===this._grabbedManipulators.size&&0===this._draggedManipulators.size&&this._revertToActiveTool&&(y.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),_.grabbing&&(_.grabbing=!1,_.events.emit("grab-changed",{action:"end",pointerType:p.pointerType,screenPoint:cu(p)})),this._grabbedManipulators.delete(p.pointerId))}_cursorFromMap(p,y){let v=null;return(0,fv.oE)(p,({key:_})=>{const E=this._findManipulatorByKey(_,y);return!!((0,dr.pC)(E)&&E.interactive&&"cursor"in E&&E.cursor)&&(v=E.cursor,!0)}),v}_updateCursor(p){this._cursor=this._grabbedManipulators.size>0?this._cursorFromMap(this._grabbedManipulators,p)||"grabbing":this._hoveredManipulators.size>0?this._cursorFromMap(this._hoveredManipulators,p)||"pointer":null}clearPointers(p,y,v=!0,_){const E=w=>w.tool===p&&((0,dr.Wi)(_)||w.manipulatorId===_);this._grabbedManipulators.forEach(({key:w,pointerType:D},O)=>{if(E(w)){this._grabbedManipulators.delete(O);const A=this._findManipulatorByKey(w,y);(0,dr.pC)(A)&&(A.grabbing=!1,A.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:D}))}}),this._draggedManipulators.forEach(({key:w},D)=>{if(E(w)){this._draggedManipulators.delete(D);const O=this._findManipulatorByKey(w,y);(0,dr.pC)(O)&&(O.dragging=!1,O.events.emit("drag",{action:"cancel"}))}}),v&&this._hoveredManipulators.forEach(({key:w},D)=>{if(E(w)){this._hoveredManipulators.delete(D);const O=this._findManipulatorByKey(w,y);(0,dr.pC)(O)&&(O.hovering=!1)}}),this._updateCursor(y)}_intersect(p,y,v){let _=null;return v(E=>{if(null==E.manipulators||!pv(E))return!1;const w=E.manipulators.intersect(p,y);return!(0,dr.Wi)(w)&&(_={manipulatorId:w.id,tool:E},!0)}),_}updateHoveredStateFromKnownPointers(p){this._pointerLocations.forEach((y,v)=>{this._updateHoveredStateForPointerAtScreenPosition((0,ga.vW)(y.x,y.y),v,y.pointerType,p)})}handleHoverEvent(p,y){"pointer-up"!==p.type&&"immediate-click"!==p.type&&"pointer-move"!==p.type||!s8(p.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(cu(p),p.pointerId,p.pointerType,y)}_updateHoveredStateForPointerAtScreenPosition(p,y,v,_){const E=this._intersect(p,v,_);let w=this._findManipulatorByKey(E,_);const D=(0,dr.yw)(this._hoveredManipulators.get(y),({key:A})=>A),O=this._findManipulatorByKey(D,_);(0,dr.pC)(w)&&!w.interactive&&(w=null),O!==w&&((0,dr.pC)(O)&&(O.hovering=!1),(0,dr.pC)(w)?(w.hovering=!0,this._hoveredManipulators.set(y,{key:(0,dr.Wg)(E)})):this._hoveredManipulators.delete(y),this._updateCursor(_))}_findManipulatorByKey(p,y){return this._findToolAndManipulatorByKey(p,y,mv)?mv.manipulator:null}_findToolAndManipulatorByKey(p,y,v){return(0,dr.Wi)(p)?null:(v.tool=null,v.manipulator=null,y(_=>{if(_!==p.tool||null==_.manipulators||!pv(_))return!1;const E=_.manipulators.findById(p.manipulatorId);return!!(0,dr.pC)(E)&&(v.manipulator=E,v.tool=_,!0)}),v.manipulator?v:null)}}function s8(g){return"mouse"===g}function a8(g){return"mouse"!==g.pointerType||0===g.button}const mv={manipulator:null,tool:null},K2=Eo.Z.getLogger("esri.views.ToolViewManager"),l8="attached",z2="tools";let Ku=class extends Lc.r{constructor(g){super(g),this._manipulatorState=new Fq,this.tools=new eo.Z,this.cursor=null,this._forEachTool=p=>{for(const y of this.tools.items)if(p(y))return}}initialize(){this.handles.add([this.view.on(e8,g=>{this._handleInputEvent(g)},Ef.f.TOOL),...Nq(this.tools),this.tools.on("before-add",g=>{const p=g.item;if(null==p||this.tools.includes(p))return K2.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void g.preventDefault()}),this.tools.on("before-remove",({item:g})=>{this._manipulatorState.clearPointers(g,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this._forEachTool(g=>g.destroy())}set activeTool(g){if((0,dr.pC)(g)&&!this.view.ready)return void K2.error("Cannot set active tool while view is not ready.");if(g===this.activeTool)return void((0,dr.pC)(g)&&K2.warn("Tool is already active - ignoring activation request."));(0,dr.pC)(this.activeTool)&&this.activeTool.deactivate(),(0,dr.pC)(g)&&g.activate(),this._set("activeTool",g),this._removeIncompleteTools(g);const p=(0,dr.Wi)(this.activeTool);for(const y of this.tools){y.setEditableFlag(1,p||y===this.activeTool);const v=pv(y);!p&&v||this._manipulatorState.clearPointers(y,this._forEachTool,!v)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some(g=>g.updating)}attach(){this._forEachTool(g=>g.attach()),"3d"===this.view.type?(this._set("textures",new Aq(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([this.view.state.watch("camera",()=>{this._forEachManipulator(g=>{null!=g.onViewChange&&g.onViewChange()})}),this.view.elevationProvider.on("elevation-change",g=>{this._forEachManipulator(p=>{null!=p.onElevationChange&&p.onElevationChange(g)})}),(0,JR.kB)(()=>this._set("textures",(0,dr.SC)(this.textures)))],l8)):this.handles.add(this.view.watch("extent",()=>{this._forEachManipulator(g=>{null!=g.onViewChange&&g.onViewChange()})}))}detach(){(0,dr.pC)(this.activeTool)&&(this.activeTool=null),this._forEachTool(g=>{g.detach(),g.destroy()}),this.tools.removeAll(),this.handles.remove(l8)}_forEachManipulator(g){this._forEachTool(p=>{p.manipulators&&p.manipulators.forEach(({manipulator:y})=>g(y,p))})}_handleInputEvent(g){let p=!1;const y=nn(Ot({},g),{stopPropagation:()=>{p=!0,g.stopPropagation()}});(0,dr.pC)(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(y):this._forEachTool(v=>{!p&&v.attached&&v.visible&&v.handleInputEvent(y)}),!p&&"key-down"===g.type&&"Escape"===g.key&&this.activeTool&&(g.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(y,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:v=>{this.activeTool=v},view:this.view}),!p&&(0,dr.pC)(this.activeTool)&&this.activeTool.handleInputEventAfter(y),this._manipulatorState.handleHoverEvent(y,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(z2),this._forEachTool(g=>{if(g instanceof pi.Z){const p=(0,Br.YP)(g,["cursor","visible","editable"],()=>{pv(g)||this._manipulatorState.clearPointers(g,this._forEachTool),this._updateCursor()});this.handles.add(p,z2)}g.manipulators&&this.handles.add(g.manipulators.on("change",p=>{p.removed.forEach(({id:y})=>{this._manipulatorState.clearPointers(g,this._forEachTool,!0,y)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),z2)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){let g=this._manipulatorState.cursor;this._forEachTool(p=>!(!(0,dr.pC)(p.cursor)||!p.visible||(g=p.cursor,0))),this._get("cursor")!==g&&this._set("cursor",g)}_removeIncompleteTools(g){this.tools.filter(p=>((0,dr.Wi)(g)||p!==g)&&!p.completed).forEach(p=>{this.tools.remove(p),p.destroy()})}};(0,we._)([(0,Re.Cb)({constructOnly:!0,nonNullable:!0})],Ku.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,nonNullable:!0})],Ku.prototype,"textures",void 0),(0,we._)([(0,Re.Cb)({value:null})],Ku.prototype,"activeTool",null),(0,we._)([(0,Re.Cb)({readOnly:!0,type:eo.Z})],Ku.prototype,"tools",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ku.prototype,"cursor",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ku.prototype,"updating",null),Ku=(0,we._)([(0,Tr.j)("esri.views.ToolViewManager")],Ku);const Bq=Ku;let bf=class extends pi.Z{constructor(g){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",this._detectedDeviceType="standard"===g.mapping?"standard":Uq.test(g.id)?"spacemouse":"unknown",this.nativeIndex=g.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Vq[this.deviceType]}};(0,we._)([(0,Re.Cb)({nonNullable:!0,readOnly:!0})],bf.prototype,"nativeIndex",void 0),(0,we._)([(0,Re.Cb)({type:String,readOnly:!0})],bf.prototype,"deviceType",null),(0,we._)([(0,Re.Cb)({type:Number,readOnly:!0})],bf.prototype,"axisThreshold",null),bf=(0,we._)([(0,Tr.j)("esri.views.input.gamepad.GamepadInputDevice")],bf);const Uq=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Vq={standard:.15,spacemouse:.025,unknown:0},G2=bf;let I0=class extends pi.Z{constructor(...g){super(...g),this.devices=new eo.Z,this.enabledFocusMode="document"}};(0,we._)([(0,Re.Cb)({type:eo.Z.ofType(G2),readOnly:!0})],I0.prototype,"devices",void 0),(0,we._)([(0,Re.Cb)({type:["document","view","none"]})],I0.prototype,"enabledFocusMode",void 0),I0=(0,we._)([(0,Tr.j)("esri.views.input.gamepad.GamepadSettings")],I0);const kq=I0;let gv=class extends pi.Z{constructor(){super(...arguments),this.gamepad=new kq}};(0,we._)([(0,Re.Cb)({readOnly:!0})],gv.prototype,"gamepad",void 0),gv=(0,we._)([(0,Tr.j)("esri.views.input.Input")],gv);const Wq=gv;let Vc=class extends pi.Z{constructor(g){super(g),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};(0,we._)([(0,Re.Cb)({type:Boolean,nonNullable:!0})],Vc.prototype,"enabled",void 0),(0,we._)([(0,Re.Cb)({type:G2})],Vc.prototype,"device",void 0),(0,we._)([(0,Re.Cb)({type:["pan","zoom"],nonNullable:!0})],Vc.prototype,"mode",void 0),(0,we._)([(0,Re.Cb)({type:["forward-down","forward-up"],nonNullable:!0})],Vc.prototype,"tiltDirection",void 0),(0,we._)([(0,Re.Cb)({type:Number,nonNullable:!0})],Vc.prototype,"velocityFactor",void 0),Vc=(0,we._)([(0,Tr.j)("esri.views.navigation.gamepad.GamepadSettings")],Vc);const u8=Vc;let jd=class extends pi.Z{constructor(g){super(g),this.browserTouchPanEnabled=!0,this.gamepad=new u8,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};(0,we._)([(0,Re.Cb)({type:Boolean})],jd.prototype,"browserTouchPanEnabled",void 0),(0,we._)([(0,Re.Cb)({type:u8,nonNullable:!0})],jd.prototype,"gamepad",void 0),(0,we._)([(0,Re.Cb)({type:Boolean})],jd.prototype,"momentumEnabled",void 0),(0,we._)([(0,Re.Cb)({type:Boolean})],jd.prototype,"mouseWheelZoomEnabled",void 0),jd=(0,we._)([(0,Tr.j)("esri.views.navigation.Navigation")],jd);const c8=jd;var T0=C(56741);function d8(g){const p=g.url&&(0,By.Qc)(g.url);return null==(g.spatialReference&&g.spatialReference.vcsWkid)&&(0,dr.pC)(p)&&"ImageServer"===p.serverType||!h8(g)||!g.heightModelInfo?function p8(g){return f8(g)?!!(g.capabilities&&g.capabilities.data&&g.capabilities.data.supportsZ):m8(g)}(g)?$2.Z.deriveUnitFromSR(zq,g.spatialReference):null:g.heightModelInfo}function h8(g){return"heightModelInfo"in g}function f8(g){if("unknown"===g.type||!("capabilities"in g))return!1;switch(g.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function Kq(g){return null!=g.layers||m8(g)||f8(g)||h8(g)}function m8(g){switch(g.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"analysis":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const zq=new $2.Z({heightModel:"gravity-related-height"});function g8(g){return 1===g?"global":"local"}const v8=Eo.Z.getLogger("esri.views.support.DefaultsFromMap");v8.level="info";let Ri=class extends pi.Z{constructor(g){super(g),this._handles=new Ra.Z,this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.priorityCollection=null,this.logDebugInformation=!1,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._handles=(0,dr.SC)(this._handles),this._projectExtentTask.task&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=(0,dr.IM)(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return(0,dr.pC)(this.userSpatialReference)?this.userSpatialReference:(0,dr.Wg)(this._spatialReferenceTask.spatialReference)}get extent(){return(0,dr.Wg)(this._extentTask.extent)}get heightModelInfo(){return(0,dr.Wg)(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return(0,dr.Wg)(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return(0,dr.Wg)(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return(0,dr.Wi)(this.userSpatialReference)||this.userSpatialReference.equals((0,dr.Wg)(this._spatialReferenceTask.spatialReference))?(0,dr.Wg)(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return(0,dr.Wg)(this._tileInfoTask.tileInfo)}get mapCollections(){var g,p,y,v;const _=null==(g=this.map)?void 0:g.call(this),E=[];return(0,dr.pC)(this.priorityCollection)&&E.push(this.priorityCollection),E.push({parent:null==_?void 0:_.basemap,layers:null==_||null==(p=_.basemap)?void 0:p.baseLayers},{layers:null==_?void 0:_.layers},{parent:null==_?void 0:_.ground,layers:null==_||null==(y=_.ground)?void 0:y.layers},{parent:null==_?void 0:_.basemap,layers:null==_||null==(v=_.basemap)?void 0:v.referenceLayers}),E}get _allLayers(){var g,p;const y=this._collectLayers(this.mapCollections);return this._debug("Collected",null!=(g=null==(p=y.layers)?void 0:p.length)?g:0,"layers, updating",y.updating),y}get _spatialReferenceTask(){var g,p;if(this.suspended)return null!=(p=this._get("_spatialReferenceTask"))?p:{updating:!1};const{layers:y,updating:v}=this._allLayers,_={candidates:null};for(const w of y)if(this._processSpatialReferenceCandidates(w,_),_.candidates&&1===_.candidates.length)break;if(1!==(null==(g=_.candidates)?void 0:g.length)&&v)return{updating:!0};const E=this._pickSpatialReferenceCandidate(_.candidates);return this._debug("Finished spatial reference",(0,dr.pC)(E)?`${E.spatialReference.wkid}:${(0,dr.pC)(E.viewingMode)?g8(E.viewingMode):"global/local"}`:"none available"),{spatialReference:(0,dr.pC)(E)?E.spatialReference:null,viewingMode:(0,dr.pC)(E)?E.viewingMode:null,updating:!1}}get _tileInfoTask(){var g,p,y,v,_,E,w,D;if(!this.required.tileInfo)return null!=(D=this._get("_tileInfoTask"))?D:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:O,updating:A}=this._collectLayers([{parent:null==(g=this.map)||null==(p=g.call(this))?void 0:p.basemap,layers:null==(y=this.map)||null==(v=y.call(this))||null==(_=v.basemap)?void 0:_.baseLayers},{layers:null==(E=this.map)||null==(w=E.call(this))?void 0:w.layers}]);if(O&&O.length>0&&"tileInfo"in O[0]){const W=O[0].tileInfo;return{tileInfo:W&&W.spatialReference.equals(this.spatialReference)?W:null,updating:!1}}return{updating:A}}get _heightModelInfoTask(){var g,p;if(!this.required.heightModelInfo||this.suspended&&null!=(g=this._get("_heightModelInfoTask"))&&g.heightModelInfo)return null!=(p=this._get("_heightModelInfoTask"))?p:{updating:!1};const{layers:y,updating:v}=this._allLayers;for(const O of y){var _,E;if(this._debug("Considering",null!=(_=null!=(E=O.title)?E:O.id)?_:O.declaredClass,"for height model info"),Kq(O)){const A=d8(O);var w,D;if(A)return this._debug("Derived height model info",A),{heightModelInfo:A,vcsWkid:null==(w=O.spatialReference)?void 0:w.vcsWkid,latestVcsWkid:null==(D=O.spatialReference)?void 0:D.latestVcsWkid,updating:!1}}this._debug("Layer does not support height models")}return this._debug("No height model info found,","updating",v),{updating:v}}get _extentCandidatesTask(){var g;if(this.suspended||!this.required.extent)return null!=(g=this._get("_extentCandidatesTask"))?g:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const p=this._allLayers,y=p.updating,v=[];for(const _ of p.layers){const E="fullExtents"in _&&_.fullExtents||((0,dr.pC)(_.fullExtent)?[_.fullExtent]:[]),w=E.find(D=>D.spatialReference.equals(this.spatialReference));if(w)return{candidates:[{extent:w,layer:_}],updating:!1};if(this._getSupportedSpatialReferences(_).length>0)for(const D of E)v.push({extent:D,layer:_})}return{candidates:v,updating:y}}get _extentTask(){var g=this;const{candidates:p,updating:y}=this._extentCandidatesTask;if(y)return{updating:y};if((0,dr.Wi)(p)||0===p.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{candidate:v,requiresGeometryService:_}=this._pickExtentCandidate(p),E=this.spatialReference;if(v.extent.equals(this._projectExtentTask.input)&&E.equals(this._projectExtentTask.spatialReference))return{extent:this._projectExtentTask.output,updating:(0,dr.pC)(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished};if((0,dr.pC)(this._projectExtentTask.task)&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=(0,dr.IM)(this._projectExtentTask.task)),!_){this._projectExtentTask={input:null,output:null,task:null,spatialReference:null};try{return{extent:(0,T0.iV)(v.extent,E),updating:!1}}catch(w){return{updating:!1}}}return this._debug("Starting project extent task for",v.extent),this._projectExtentTask={input:v.extent.clone(),output:null,spatialReference:E.clone(),task:(0,ni.vr)(function(){var w=(0,qr.Z)(function*(D){try{const O=yield(0,ni.Hl)(C.e(5082).then(C.bind(C,35082)),D),A=yield O.projectGeometry(v.extent,E,v.layer.portalItem,D);g._debug("Project extent task finished",A),g._projectExtentTask=nn(Ot({},g._projectExtentTask),{task:null,output:A})}catch(O){if((0,ni.Hc)(D))return;g._projectExtentTask=nn(Ot({},g._projectExtentTask),{task:null})}});return function(D){return w.apply(this,arguments)}}())},{updating:!0}}_processSpatialReferenceCandidates(g,p){var y;const v=this._getSupportedSpatialReferences(g);if(0!==v.length)if(this._debug("Spatial reference candidates from",null!=(y=g.title)?y:g.id,":",v.map(_=>`${_.spatialReference.wkid}:${(0,dr.pC)(_.viewingMode)?g8(_.viewingMode):"global/local"}`).join(", ")),p.candidates){const _=[],E=(w,D)=>(0,dr.Wi)(w.viewingMode)?D.viewingMode:((0,dr.Wi)(D.viewingMode)||w.viewingMode===D.viewingMode)&&w.viewingMode;for(const w of p.candidates)for(const D of v){if(!w.spatialReference.equals(D.spatialReference))continue;const O=E(w,D);if(!1!==O){_.push({spatialReference:w.spatialReference,viewingMode:O});break}}_.length>0&&(p.candidates=_)}else p.candidates=v}_pickSpatialReferenceCandidate(g){const p=this.defaultSpatialReference;return!g||g.length<1?(0,dr.pC)(p)?{spatialReference:p,viewingMode:null}:null:(0,dr.pC)(p)&&g.length>1&&g.some(({spatialReference:y})=>y.equals(p))?{spatialReference:p,viewingMode:null}:g[0]}_getSupportedSpatialReferences(g){const p="supportedSpatialReferences"in g&&g.supportedSpatialReferences||(g.spatialReference?[g.spatialReference]:[]);if(0===p.length)return[];const y=[];for(const v of p){const _=this.getSpatialReferenceSupport({spatialReference:v,layer:g});if((0,dr.pC)(_)){const E=(0,dr.pC)(_.constraints)?_.constraints:[{spatialReference:v}];for(const{spatialReference:w,viewingMode:D}of E)((0,dr.Wi)(this.userSpatialReference)||w.equals(this.userSpatialReference))&&y.push({spatialReference:w,viewingMode:D})}}return y}_pickExtentCandidate(g){const p=this.spatialReference,y=g.find(({extent:v})=>(0,T0.Up)(v.spatialReference,p)||(0,T0.kR)());return(0,dr.pC)(y)?{candidate:y,requiresGeometryService:!1}:{candidate:g[0],requiresGeometryService:!0}}_collectLayers(g){var p;if("loaded"!==this._loadMaybe(null==(p=this.map)?void 0:p.call(this)))return{layers:[],updating:!0};const y={layers:[],preloading:-1,updating:!1};for(const v of g)if(this._collectCollection(v,y),10===y.preloading)break;return{layers:y.layers,updating:y.updating}}_collectCollection(g,p){if(g.layers){switch(this._loadMaybe(g.parent)){case"loading":return p.updating=!0,void++p.preloading;case"failed":return}for(const _ of g.layers){switch(this._loadMaybe(_)){case"failed":continue;case"loading":p.updating=!0,++p.preloading;break;case"loaded":var y,v;p.updating||(this._debug("Considering layer",null!=(y=null!=(v=_.title)?v:_.id)?y:_.declaredClass),p.layers.push(_)),"layers"in _&&this._collectCollection({layers:_.layers},p)}if(10===p.preloading)break}}}_loadMaybe(g){return g&&"loadStatus"in g?"not-loaded"===g.loadStatus?(this._debug("Triggering load",null!=(p=null!=(y=g.title)?y:g.id)?p:g.declaredClass),g.load(),"loading"):g.loadStatus:"loaded";var p,y}_debug(...g){this.logDebugInformation&&v8.info(...g)}};(0,we._)([(0,Re.Cb)()],Ri.prototype,"required",void 0),(0,we._)([(0,Re.Cb)({constructOnly:!0})],Ri.prototype,"map",void 0),(0,we._)([(0,Re.Cb)({constructOnly:!0})],Ri.prototype,"getSpatialReferenceSupport",void 0),(0,we._)([(0,Re.Cb)()],Ri.prototype,"defaultSpatialReference",void 0),(0,we._)([(0,Re.Cb)()],Ri.prototype,"userSpatialReference",void 0),(0,we._)([(0,Re.Cb)()],Ri.prototype,"priorityCollection",void 0),(0,we._)([(0,Re.Cb)()],Ri.prototype,"logDebugInformation",void 0),(0,we._)([(0,Re.Cb)()],Ri.prototype,"suspended",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"ready",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"heightModelInfoReady",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"spatialReference",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"extent",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"heightModelInfo",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"vcsWkid",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"latestVcsWkid",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"viewingMode",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"tileInfo",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"mapCollections",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"_allLayers",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"_spatialReferenceTask",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"_tileInfoTask",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"_heightModelInfoTask",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Ri.prototype,"_extentCandidatesTask",null),(0,we._)([(0,Re.Cb)()],Ri.prototype,"_extentTask",null),(0,we._)([(0,Re.Cb)()],Ri.prototype,"_projectExtentTask",void 0),Ri=(0,we._)([(0,Tr.j)("esri.views.support.DefaultsFromMap")],Ri);const Gq=Ri;var yv;const vv=Eo.Z.getLogger("esri.views.View");let wn=yv=class extends((0,Lc.p)(qh.Z.EventedMixin((0,OC.v)(pi.Z)))){constructor(g){super(g),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Qh.Z({getCollections:()=>{var p,y,v;return[null==(p=this.basemapView)?void 0:p.baseLayerViews,null==(y=this.groundView)?void 0:y.layerViews,this.layerViews,null==(v=this.basemapView)?void 0:v.referenceLayerViews]},getChildrenFunction:p=>p.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new XR.J,this.analyses=new hv,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new eo.Z,this.magnifier=new QR,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Wq,this.navigation=new c8,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Rq(this),this.persistableViewModels=new eo.Z,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",p=>{var y,v;p?(this._currentSpatialReference=this.spatialReference,yv.views.add(this)):(this._currentSpatialReference=null,yv.views.remove(this)),this.notifyChange("spatialReference"),!p&&this.ready?(null==(y=this.layerViewManager)||y.clear(),null==(v=this.toolViewManager)||v.detach(),(0,dr.pC)(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):p&&!this.ready&&((0,dr.pC)(this.analysisViewManager)&&this.analysisViewManager.attach(),this._startup(),this.toolViewManager.attach())},!0))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,(0,Br.N1)(this,"ready")))),this.basemapView=new Uc({view:this}),this.layerViewManager=new Tq({view:this,layerViewImporter:{importLayerView:g=>this.importLayerView(g),hasLayerViewModule:g=>this.hasLayerViewModule(g)},supportsGround:this.supportsGround}),this.toolViewManager=new Bq({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([(0,dv.Ym)(()=>this.initialExtentRequired,g=>this.defaultsFromMap.required=nn(Ot({},this.defaultsFromMap.required),{extent:g}),{sync:!0,initial:!0}),(0,dv.Ym)(()=>this.ready,g=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=g,this.defaultsFromMap.userSpatialReference=g?this.spatialReference:this._userSpatialReference)},{sync:!0}),(0,dv.Ym)(()=>this._userSpatialReference,g=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=g)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){var g=this;let p=null;this.handles.add([(0,dv.Ym)(()=>{var y;return null==(y=this.defaultsFromMap)?void 0:y.ready},y=>{var v;const _=(null==(v=this.map)?void 0:v.allLayers.length)>0;if(y&&!this.spatialReference&&_){if((0,dr.pC)(p))return;const E=(0,JR.kB)(()=>p=(0,dr.IM)(p));p=(0,ni.vr)(function(){var w=(0,qr.Z)(function*(D){try{yield(0,ni.e4)(g.spatialReferenceWarningDelay,null,D)}catch(O){return}finally{p=null}vv.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")});return function(D){return w.apply(this,arguments)}}()),this.handles.add(E,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,dr.SC)(this.graphics),this.analyses=(0,dr.SC)(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager=(0,dr.SC)(this.toolViewManager),this.layerViewManager=(0,dr.SC)(this.layerViewManager),this.basemapView=(0,dr.SC)(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const g=this.map;this.map=null,null==g||g.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return vv.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Gq(Ot({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:g=>this.getSpatialReferenceSupport(g)},this._defaultsFromMapSettings))}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var g;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||m0.Z.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this.typeSpecificPreconditionsReady||!this._validateSpatialReference(this.spatialReference)||!(this._currentSpatialReference||null!=(g=this.defaultsFromMap)&&g.ready))}set map(g){var p;g!==this._get("map")&&(null!=(p=g)&&p.destroyed&&(vv.warn("#map","The provided map is already destroyed",{map:g}),g=null),m0.Z.isLoadable(g)&&g.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",g))}get spatialReference(){var g,p;let y=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return y&&null!=(g=this.defaultsFromMap)&&null!=(p=g.required)&&p.heightModelInfo&&(y=y.clone(),y.vcsWkid=this.defaultsFromMap.vcsWkid,y.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),y}set spatialReference(g){this._userSpatialReference=g,this._set("spatialReference",g)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var g;return null==(g=this.defaultsFromMap)?void 0:g.extent}get cursor(){const g=this.toolViewManager?this.toolViewManager.cursor:null;return(0,dr.pC)(g)?g:this._cursor||"default"}set cursor(g){this._cursor=g,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(g){return this.layerViewManager.whenLayerView(g)}getDefaultSpatialReference(){var g;return null==(g=this.defaultsFromMap)?void 0:g.spatialReference}getDefaultHeightModelInfo(){var g,p,y;return null!=(g=null!=(p=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)?p:null==(y=this.defaultsFromMap)?void 0:y.heightModelInfo)?g:null}importLayerView(g){throw new sn.Z("importLayerView() not implemented")}hasLayerViewModule(g){return!1}validate(){return(0,qr.Z)(function*(){})()}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{}}_validateSpatialReference(g){return(0,dr.pC)(this.getSpatialReferenceSupport({spatialReference:g}))}when(g,p){return this.isResolved()&&!this.ready&&vv.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.'),super.when(g,p)}forceReadyCycle(){this.ready&&((0,Br.OY)(this,"preconditionsReady",()=>this._readyCycleForced=!1),this._readyCycleForced=!0)}addAndActivateTool(g){this.toolViewManager.tools.add(g),this.activeTool=g}tryFatalErrorRecovery(){this.fatalError=null}};wn.views=new eo.Z,(0,we._)([(0,Re.Cb)()],wn.prototype,"_userSpatialReference",void 0),(0,we._)([(0,an.B)("toolViewManager.activeTool")],wn.prototype,"activeTool",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"allLayerViews",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"groundView",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"animation",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"basemapView",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"_defaultsFromMapSettings",null),(0,we._)([(0,Re.Cb)()],wn.prototype,"defaultsFromMap",null),(0,we._)([(0,Re.Cb)()],wn.prototype,"fatalError",void 0),(0,we._)([(0,Re.Cb)({type:Ic.Z})],wn.prototype,"extent",void 0),(0,we._)([(0,Re.Cb)((0,Z2.z)(XR.J,"graphics"))],wn.prototype,"graphics",void 0),(0,we._)([(0,Re.Cb)((0,Z2.z)(hv,"analyses"))],wn.prototype,"analyses",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,type:$2.Z})],wn.prototype,"heightModelInfo",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"interacting",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"navigating",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],wn.prototype,"preconditionsReady",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"typeSpecificPreconditionsReady",void 0),(0,we._)([(0,Re.Cb)({type:eo.Z,readOnly:!0})],wn.prototype,"layerViews",void 0),(0,we._)([(0,Re.Cb)({type:QR})],wn.prototype,"magnifier",void 0),(0,we._)([(0,Re.Cb)({value:null,type:M3})],wn.prototype,"map",null),(0,we._)([(0,Re.Cb)()],wn.prototype,"padding",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"ready",void 0),(0,we._)([(0,Re.Cb)({type:Oc.Z})],wn.prototype,"spatialReference",null),(0,we._)([(0,Re.Cb)()],wn.prototype,"spatialReferenceWarningDelay",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"stationary",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"supportsGround",void 0),(0,we._)([(0,Re.Cb)({type:of.Z})],wn.prototype,"timeExtent",void 0),(0,we._)([(0,an.B)("toolViewManager.tools")],wn.prototype,"tools",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"toolViewManager",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"type",void 0),(0,we._)([(0,Re.Cb)({type:Number})],wn.prototype,"scale",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"updating",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"initialExtentRequired",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,type:Ic.Z})],wn.prototype,"initialExtent",null),(0,we._)([(0,Re.Cb)()],wn.prototype,"cursor",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"input",void 0),(0,we._)([(0,Re.Cb)({type:c8,nonNullable:!0})],wn.prototype,"navigation",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"layerViewManager",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"analysisViewManager",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"width",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"height",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"resizing",void 0),(0,we._)([(0,Re.Cb)({value:null,readOnly:!0})],wn.prototype,"size",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"suspended",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"viewEvents",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],wn.prototype,"persistableViewModels",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"_isValid",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"_readyCycleForced",void 0),(0,we._)([(0,Re.Cb)()],wn.prototype,"_currentSpatialReference",void 0),wn=yv=(0,we._)([(0,Tr.j)("esri.views.View")],wn);const Hq=wn;let kc=class extends OC.D{constructor(g){super(g),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((g,p)=>this._dfd={resolve:g,reject:p}))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new sn.Z("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}update(g,p){p||(p=(0,ni.y8)(g)?"waiting-for-target":"running"),this._set("target",g),this._set("state",p)}};(0,we._)([(0,Re.Cb)({readOnly:!0})],kc.prototype,"done",null),(0,we._)([(0,Re.Cb)({readOnly:!0,type:String})],kc.prototype,"state",void 0),(0,we._)([(0,Re.Cb)()],kc.prototype,"target",void 0),kc=(0,we._)([(0,Tr.j)("esri.views.ViewAnimation")],kc),function(g){g.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(kc||(kc={}));const Y2=kc;var _v=C(78041),zo=C(24926);class Yq{constructor(p,y,v,_){const E=p.targetGeometry,w=y.targetGeometry;_?"string"==typeof _&&(_=(0,_v.Qc)(_)||_v.LI.ease):_=_v.LI.ease,this.easing=_,this.duration=v,this.sCenterX=E.x,this.sCenterY=E.y,this.sScale=p.scale,this.sRotation=p.rotation,this.tCenterX=w.x,this.tCenterY=w.y,this.tScale=y.scale,this.tRotation=y.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(p,y){const v=this.easing(y);let _,E,w,D;y>=1?(_=this.tCenterX,E=this.tCenterY,w=this.tRotation,D=this.tScale):(_=this.sCenterX+v*this.dCenterX,E=this.sCenterY+v*this.dCenterY,w=this.sRotation+v*this.dRotation,D=this.sScale+v*this.dScale),p.targetGeometry.x=_,p.targetGeometry.y=E,p.scale=D,p.rotation=w}}let zu=class extends pi.Z{constructor(g){super(g),this.duration=200,this.transition=null,this.easing=_v.LI.ease,this.view=null,this.viewpoint=null,this.viewpoint=new Qs.Z({targetGeometry:new Zu.Z,scale:0,rotation:0}),this._updateTask=(0,Td.A)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(g,p,y){this.stop(),(0,zo.JG)(this.viewpoint,p),this.transition=new Yq(this.viewpoint,g.target,y&&y.duration||this.duration,y&&y.easing||this.easing);const _=()=>{this.animation===g&&this._updateTask&&("finished"===g.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return g.when(_,_),this._startTime=performance.now(),this._updateTask.resume(),this.animation=g,g}animateContinous(g,p){this.stop(),this.updateFunction=p,this.viewpoint=g;const y=new Y2({target:g.clone()}),v=()=>{this.animation===y&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return y.when(v,v),this._startTime=performance.now(),this._updateTask.resume(),this.animation=y,y}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(g){const p=this.animation;if(p&&p.state!==Y2.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,g.deltaTime);else{const y=(performance.now()-this._startTime)/this.transition.duration,v=y>=1;this.transition.applyRatio(this.viewpoint,y),v&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,we._)([(0,Re.Cb)()],zu.prototype,"animation",void 0),(0,we._)([(0,Re.Cb)()],zu.prototype,"duration",void 0),(0,we._)([(0,Re.Cb)()],zu.prototype,"transition",void 0),(0,we._)([(0,Re.Cb)()],zu.prototype,"easing",void 0),(0,we._)([(0,Re.Cb)()],zu.prototype,"view",void 0),(0,we._)([(0,Re.Cb)()],zu.prototype,"viewpoint",void 0),zu=(0,we._)([(0,Tr.j)("esri.views.2d.AnimationManager")],zu);const Jq=zu;class Xq{constructor(p){this.view=p,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:y,graphicsView:v,labelManager:_,layerViews:E,state:{id:w}}=this.view;y.baseLayerViews.forEach(this._updateLayerView,this),E.forEach(this._updateLayerView,this),y.referenceLayerViews.forEach(this._updateLayerView,this),(0,dr.pC)(_)&&(_.lastUpdateId!==w&&(_.viewChange(),_.lastUpdateId=w),_.updateRequested&&_.processUpdate(this._updateParameters)),(0,dr.pC)(v)&&(v.lastUpdateId!==w&&(v.viewChange(),v.lastUpdateId=w),v.updateRequested&&v.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",p=>{this.stationary=p,this.requestFrame()}),this._frameTaskHandle=(0,Td.A)(this)}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(p){const y=this.view.state,v=p.lastUpdateId;null!=v&&(this.stationary||p.moving)||(p.moving=!0,p.moveStart()),v!==y.id&&p.viewChange(),this.stationary&&p.moving&&(p.moving=!1,p.moveEnd()),p.lastUpdateId=y.id,p.updateRequested&&p.processUpdate(this._updateParameters),"layerViews"in p&&p.layerViews.forEach(this._updateLayerView,this)}}function os(){return Promise.all([Promise.all([C.e(3070),C.e(8592),C.e(4266)]).then(C.bind(C,14266)),Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(8592),C.e(9510)]).then(C.bind(C,39510))])}const A0=()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(9516),C.e(5391)]).then(C.bind(C,55391))),Ev=()=>os().then(()=>Promise.all([C.e(3755),C.e(5024),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(1529)]).then(C.bind(C,68915))),_8={"base-dynamic":()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(5207),C.e(4126)]).then(C.bind(C,54126))),"base-tile":A0,"bing-maps":A0,csv:Ev,"geo-rss":()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(8592),C.e(5072)]).then(C.bind(C,5072))),feature:Ev,geojson:Ev,graphics:()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(8592),C.e(3375)]).then(C.bind(C,63375))),group:()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(408)]).then(C.bind(C,60408))),imagery:()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(6926),C.e(5207),C.e(9929),C.e(8592),C.e(8446)]).then(C.bind(C,98446))),"imagery-tile":()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(6926),C.e(9929),C.e(8592),C.e(178)]).then(C.bind(C,60178))),kml:()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(8592),C.e(5868)]).then(C.bind(C,85868))),"map-image":()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(5207),C.e(8592),C.e(8618)]).then(C.bind(C,82519))),"map-notes":()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(8592),C.e(6899)]).then(C.bind(C,36899))),"ogc-feature":()=>os().then(()=>Promise.all([C.e(3755),C.e(5024),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(1529),C.e(6829)]).then(C.bind(C,96829))),"open-street-map":A0,route:()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(8592),C.e(9066)]).then(C.bind(C,9066))),stream:()=>os().then(()=>Promise.all([C.e(3755),C.e(5024),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(1529),C.e(9051)]).then(C.bind(C,39051))),"subtype-group":()=>os().then(()=>Promise.all([C.e(3755),C.e(5024),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(1529),C.e(5876)]).then(C.bind(C,65876))),tile:A0,"vector-tile":()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(8364),C.e(1651)]).then(C.bind(C,1651))),wcs:()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(6926),C.e(9929),C.e(8592),C.e(178)]).then(C.bind(C,60178))),"web-tile":A0,wfs:Ev,wms:()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(5207),C.e(8592),C.e(6053)]).then(C.bind(C,6053))),wmts:()=>os().then(()=>Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(9516),C.e(9300)]).then(C.bind(C,49300))),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};var X2,qq=C(72258),J2=C(33190),rl=C(67831),eee=C(25748);const ree=Eo.Z.getLogger("esri.views.MapView");let Bd=X2=class extends pi.Z{constructor(g){super(g),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){return(0,dr.Wi)(this.geometry)||!this.spatialReference?null:this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:(0,iu.Q8)(this.geometry,this.spatialReference)?(0,iu.iV)(this.geometry,this.spatialReference):(0,T0.kR)()?(0,T0.iV)(this.geometry,this.spatialReference):(ree.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null)}constrain(g,p){if((0,dr.Wi)(this.normalizedGeometry))return g;const y=g.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,J2.aV)(this.normalizedGeometry,y):(0,J2.CI)(this.normalizedGeometry,y))return g;const{coordinate:v}=function tee(g,p){const{spatialReference:y}=p,v=[p.x,p.y];let _=Number.POSITIVE_INFINITY,E=0,w=0;const D=[0,0],O="extent"===g.type?[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]:g.rings;for(const A of O)for(let W=0;W<A.length-1;W++){(0,eee.Tx)(D,v,A,W);const q=(0,rl.b)(v,D);q<_&&(_=q,E=D[0],w=D[1])}return{coordinate:new Zu.Z({x:E,y:w,spatialReference:y}),distance:_}}(this.normalizedGeometry,y);return v&&(g.targetGeometry=v),g}clone(){var g,p;return new X2({geometry:null==(g=this.geometry)?void 0:g.clone(),spatialReference:null==(p=this.spatialReference)?void 0:p.clone()})}};var Q2;(0,we._)([(0,Re.Cb)({constructOnly:!0})],Bd.prototype,"geometry",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Bd.prototype,"normalizedGeometry",null),(0,we._)([(0,Re.Cb)({constructOnly:!0})],Bd.prototype,"spatialReference",void 0),Bd=X2=(0,we._)([(0,Tr.j)("esri.views.2d.constraints.GeometryConstraint")],Bd);let P0=Q2=class extends pi.Z{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(g,p){return this.enabled&&p&&(this.rotationEnabled||(g.rotation=p.rotation)),g}clone(){return new Q2({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,we._)([(0,Re.Cb)()],P0.prototype,"enabled",void 0),(0,we._)([(0,Re.Cb)()],P0.prototype,"rotationEnabled",void 0),P0=Q2=(0,we._)([(0,Tr.j)("esri.views.2d.constraints.RotationConstraint")],P0);const b8=P0;var q2;let ya=q2=class extends pi.Z{constructor(g){super(g),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let g,{lods:p,minScale:y,maxScale:v,minZoom:_,maxZoom:E}=this,w=-1,D=-1,O=!1,A=!1;if(0!==y&&0!==v&&y<v&&([y,v]=[v,y]),!p||!p.length)return this._set("effectiveMinScale",y),void this._set("effectiveMaxScale",v);p=p.map(W=>W.clone()),p.sort((W,q)=>q.scale-W.scale),p.forEach((W,q)=>W.level=q);for(const W of p)!O&&y>0&&y>=W.scale&&(w=W.level,O=!0),!A&&v>0&&v>=W.scale&&(D=g?g.level:-1,A=!0),g=W;-1===_&&(_=0===y?0:w),-1===E&&(E=0===v?p.length-1:D),_=Math.max(_,0),_=Math.min(_,p.length-1),E=Math.max(E,0),E=Math.min(E,p.length-1),_>E&&([_,E]=[E,_]),y=p[_].scale,v=p[E].scale,p.splice(0,_),p.splice(E-_+1,p.length),p.forEach((W,q)=>{this._lodByScale[W.scale]=W,this._scales[q]=W.scale}),this._set("effectiveLODs",p),this._set("effectiveMinZoom",_),this._set("effectiveMaxZoom",E),this._set("effectiveMinScale",y),this._set("effectiveMaxScale",v)}constrain(g,p){if(p&&g.scale===p.scale)return g;const y=this.effectiveMinScale,v=this.effectiveMaxScale,_=g.targetGeometry,E=p&&p.targetGeometry,D=0!==y&&g.scale>y;if(0!==v&&g.scale<v||D){const O=D?y:v;if(E){const A=(O-p.scale)/(g.scale-p.scale);_.x=E.x+(_.x-E.x)*A,_.y=E.y+(_.y-E.y)*A}g.scale=O}return this.snapToZoom&&this.effectiveLODs&&(g.scale=this._getClosestScale(g.scale)),g}fit(g){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(g,null);const p=this.scaleToZoom(g.scale),y=Math.abs(p-Math.floor(p));return g.scale=this.zoomToScale(y>.99?Math.round(p):Math.floor(p)),g}zoomToScale(g){if(!this.effectiveLODs)return 0;g-=this.effectiveMinZoom,g=Math.max(0,g);const p=this._scales;if(g<=0)return p[0];if(g>=p.length)return p[p.length-1];const y=Math.round(g-.5),v=Math.round(g);return p[v]+(v-g)*(p[y]-p[v])}scaleToZoom(g){if(!this.effectiveLODs)return-1;const p=this._scales;let y,v;if(g>=p[0])return this.effectiveMinZoom;if(g<=p[p.length-1])return this.effectiveMaxZoom;for(let _=0;_<p.length-1;_++){if(y=p[_],v=p[_+1],v===g)return _+this.effectiveMinZoom+1;if(y>g&&v<g)return _+this.effectiveMinZoom+1-(g-v)/(y-v)}}snapToClosestScale(g){if(!this.effectiveLODs)return g;const p=this.scaleToZoom(g);return this.zoomToScale(Math.round(p))}snapToNextScale(g,p=.5){if(!this.effectiveLODs)return g*p;const y=Math.round(this.scaleToZoom(g));return this.zoomToScale(y+1)}snapToPreviousScale(g,p=2){if(!this.effectiveLODs)return g*p;const y=Math.round(this.scaleToZoom(g));return this.zoomToScale(y-1)}clone(){return new q2({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(g){return this._lodByScale[g]||(g=this._scales.reduce((p,y)=>Math.abs(y-g)<=Math.abs(p-g)?y:p,this._scales[0])),this._lodByScale[g].scale}};(0,we._)([(0,Re.Cb)({readOnly:!0})],ya.prototype,"effectiveLODs",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ya.prototype,"effectiveMinZoom",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ya.prototype,"effectiveMaxZoom",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ya.prototype,"effectiveMinScale",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ya.prototype,"effectiveMaxScale",void 0),(0,we._)([(0,Re.Cb)()],ya.prototype,"lods",void 0),(0,we._)([(0,Re.Cb)()],ya.prototype,"minZoom",void 0),(0,we._)([(0,Re.Cb)()],ya.prototype,"maxZoom",void 0),(0,we._)([(0,Re.Cb)()],ya.prototype,"minScale",void 0),(0,we._)([(0,Re.Cb)()],ya.prototype,"maxScale",void 0),(0,we._)([(0,Re.Cb)()],ya.prototype,"snapToZoom",void 0),ya=q2=(0,we._)([(0,Tr.j)("esri.views.2d.constraints.ZoomConstraint")],ya);const C8=ya;var nee=C(37118);const iee={base:null,key:"type",typeMap:{extent:Ic.Z,polygon:nee.Z}};let No=class extends qh.Z.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}set geometry(g){this._set("geometry",g||null)}get _defaultLODs(){var g,p,y;const v=null==(g=this.view)||null==(p=g.defaultsFromMap)?void 0:p.tileInfo,_=null==(y=this.view)?void 0:y.spatialReference;return v&&_&&v.spatialReference.equals(_)?v.lods:null}get _geometry(){return new Bd({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new b8({rotationEnabled:this.rotationEnabled})}get _zoom(){const g=this._get("_zoom"),p=this.lods||this._defaultLODs,y=this.minZoom,v=this.maxZoom,_=this.minScale,E=this.maxScale,w=this.snapToZoom;return g&&g.lods===p&&g.minZoom===y&&g.maxZoom===v&&g.minScale===_&&g.maxScale===E&&g.snapToZoom===w?g:new C8({lods:p,minZoom:y,maxZoom:v,minScale:_,maxScale:E,snapToZoom:w})}canZoomInTo(g){const p=this.effectiveMaxScale;return 0===p||g>=p}canZoomOutTo(g){const p=this.effectiveMinScale;return 0===p||g<=p}constrain(g,p){return this._zoom.constrain(g,p),this._rotation.constrain(g,p),this._geometry.constrain(g,p),g}constrainByGeometry(g){return this._geometry.constrain(g)}fit(g){return this._zoom.fit(g)}zoomToScale(g){return this._zoom.zoomToScale(g)}scaleToZoom(g){return this._zoom.scaleToZoom(g)}snapScale(g){return this._zoom.snapToClosestScale(g)}snapToNextScale(g){return this._zoom.snapToNextScale(g)}snapToPreviousScale(g){return this._zoom.snapToPreviousScale(g)}};(0,we._)([(0,Re.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],No.prototype,"effectiveLODs",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],No.prototype,"effectiveMinScale",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],No.prototype,"effectiveMaxScale",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],No.prototype,"effectiveMinZoom",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],No.prototype,"effectiveMaxZoom",void 0),(0,we._)([(0,Re.Cb)({types:iee,value:null})],No.prototype,"geometry",null),(0,we._)([(0,Re.Cb)({type:[qq.Z]})],No.prototype,"lods",void 0),(0,we._)([(0,Re.Cb)()],No.prototype,"minScale",void 0),(0,we._)([(0,Re.Cb)()],No.prototype,"maxScale",void 0),(0,we._)([(0,Re.Cb)()],No.prototype,"minZoom",void 0),(0,we._)([(0,Re.Cb)()],No.prototype,"maxZoom",void 0),(0,we._)([(0,Re.Cb)()],No.prototype,"rotationEnabled",void 0),(0,we._)([(0,Re.Cb)()],No.prototype,"snapToZoom",void 0),(0,we._)([(0,Re.Cb)()],No.prototype,"view",void 0),(0,we._)([(0,Re.Cb)()],No.prototype,"_defaultLODs",null),(0,we._)([(0,Re.Cb)({type:Bd})],No.prototype,"_geometry",null),(0,we._)([(0,Re.Cb)({type:b8})],No.prototype,"_rotation",null),(0,we._)([(0,Re.Cb)({readOnly:!0,type:C8})],No.prototype,"_zoom",null),No=(0,we._)([(0,Tr.j)("esri.views.2d.MapViewConstraints")],No);const w8=No;var nw,M8=C(99770),oee=C(39863),R0=C(31478),see=C(12225),ew=C(46342),Cf=C(30217),tw=C(49966),x8=C(9545);function rw(g){return function aee(g){return g instanceof Float32Array&&g.length>=2}(g)||function lee(g){return Array.isArray(g)&&g.length>=2}(g)}const Gu=[0,0];let Ud=nw=class extends Hi.wq{constructor(g){super(g),this._viewpoint2D={center:(0,M8.a)(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new Ic.Z,this.id=0,this.inverseTransform=(0,ew.c)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,ew.c)(),this.transformNoRotation=(0,ew.c)(),this.displayMat3=(0,tw.c)(),this.displayViewMat3=(0,tw.c)(),this.viewMat3=(0,tw.c)(),this.viewMat2d=(0,see.c)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(g){this._set("pixelRatio",g),this._update()}set size(g){this._set("size",g),this._update()}set viewpoint(g){if(g){const p=this._viewpoint2D,y=g.targetGeometry;p.center[0]=y.x,p.center[1]=y.y,p.rotation=g.rotation,p.scale=g.scale,p.spatialReference=y.spatialReference}this._update()}copy(g){const p=this.size,y=this.viewpoint;return y&&p?(this.viewpoint=(0,zo.JG)(y,g.viewpoint),this._set("size",(0,rl.c)(p,g.size))):(this.viewpoint=g.viewpoint.clone(),this._set("size",[g.size[0],g.size[1]])),this._set("pixelRatio",g.pixelRatio),this}clone(){return new nw({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(g,p,y){return rw(p)?(0,rl.t)(g,p,this.inverseTransform):(Gu[0]=p,Gu[1]=y,(0,rl.t)(g,Gu,this.inverseTransform))}toScreen(g,p,y){return rw(p)?(0,rl.t)(g,p,this.transform):(Gu[0]=p,Gu[1]=y,(0,rl.t)(g,Gu,this.transform))}toScreenNoRotation(g,p,y){return rw(p)?(0,rl.t)(g,p,this.transformNoRotation):(Gu[0]=p,Gu[1]=y,(0,rl.t)(g,Gu,this.transformNoRotation))}getScreenTransform(g,p){const{center:y}=this._viewpoint2D,v=this._get("pixelRatio")||1,_=this._get("size");return(0,zo.Rb)(g,y,_,p,0,v),g}_update(){const{center:g,spatialReference:p,scale:y,rotation:v}=this._viewpoint2D,_=this._get("pixelRatio")||1,E=this._get("size"),w=new Qs.Z({targetGeometry:new Zu.Z(g[0],g[1],p),scale:y,rotation:v});if(this._set("viewpoint",w),!E||!p||!y)return;this.resolution=(0,zo.uG)(w),this.rotation=v,this.scale=y,this.spatialReference=p,(0,rl.c)(this.center,g),(0,Cf.s)(this.displayMat3,0!==E[0]?2/E[0]:0,0,0,0,0!==E[1]?-2/E[1]:0,0,-1,1,1);const A=(0,Cf.b)(this.viewMat3),W=(0,x8.f)(E[0]/2,E[1]/2),q=(0,x8.f)(-E[0]/2,-E[1]/2),_e=(0,oee.t)(v);(0,Cf.c)(A,A,W),(0,Cf.r)(A,A,_e),(0,Cf.c)(A,A,q),(0,Cf.m)(this.displayViewMat3,this.displayMat3,A);const be=(0,R0.i)(this.viewMat2d);return(0,R0.t)(be,be,W),(0,R0.r)(be,be,_e),(0,R0.t)(be,be,q),(0,zo.bk)(this.extent,w,E),(0,zo.Ck)(this.transform,w,E,_),(0,R0.a)(this.inverseTransform,this.transform),(0,zo.Jp)(this.transformNoRotation,w,E,_),this.worldScreenWidth=(0,zo.L2)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,we._)([(0,Re.Cb)({readOnly:!0})],Ud.prototype,"id",void 0),(0,we._)([(0,Re.Cb)({value:1,json:{write:!0}})],Ud.prototype,"pixelRatio",null),(0,we._)([(0,Re.Cb)({json:{write:!0}})],Ud.prototype,"size",null),(0,we._)([(0,Re.Cb)({type:Qs.Z,json:{write:!0}})],Ud.prototype,"viewpoint",null),Ud=nw=(0,we._)([(0,Tr.j)("esri.views.2d.ViewState")],Ud);const D8=Ud;let Hu=class extends pi.Z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}};(0,we._)([(0,Re.Cb)()],Hu.prototype,"left",void 0),(0,we._)([(0,Re.Cb)()],Hu.prototype,"top",void 0),(0,we._)([(0,Re.Cb)()],Hu.prototype,"right",void 0),(0,we._)([(0,Re.Cb)()],Hu.prototype,"bottom",void 0),Hu=(0,we._)([(0,Tr.j)("esri.views.2d.PaddedViewState.Padding")],Hu);let wf=class extends D8{constructor(...g){super(...g),this.paddedViewState=new D8,this._updateContent=(()=>{const p=(0,M8.a)();return()=>{const y=this._get("size"),v=this._get("padding");if(!y||!v)return;const _=this.paddedViewState;(0,rl.s)(p,v.left+v.right,v.top+v.bottom),(0,rl.f)(p,y,p),(0,rl.c)(_.size,p);const E=_.viewpoint;E&&(this.viewpoint=E)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new Hu,this.size=[0,0]}set padding(g){this._set("padding",g||new Hu)}set viewpoint(g){if(g){const p=g.clone();this.paddedViewState.viewpoint=g,(0,zo.H4)(p,g,this._get("size"),this._get("padding"));const y=this._viewpoint2D,v=p.targetGeometry;y.center[0]=v.x,y.center[1]=v.y,y.rotation=p.rotation,y.scale=p.scale,y.spatialReference=v.spatialReference,this._update()}}};(0,we._)([(0,Re.Cb)()],wf.prototype,"paddedViewState",void 0),(0,we._)([(0,Re.Cb)({type:Hu})],wf.prototype,"padding",null),(0,we._)([(0,Re.Cb)()],wf.prototype,"viewpoint",null),wf=(0,we._)([(0,Tr.j)("esri.views.2d.PaddedViewState")],wf);const uee=wf;C(17083);var cee=C(9598),dee=(C(58098),C(8480),C(79527),C(56656)),S8=C(33412);const Wc=Eo.Z.getLogger("esri.views.MapView");let _i=class extends(Sq(Hq)){constructor(g){super(g),this._stationaryTimer=null,this.frameTask=new Xq(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.map=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.supportsGround=!1,this.timeline=new S8.T,this.type="2d",this.constraints=new w8,this.padding={top:0,right:0,bottom:0,left:0};const p=this.handles,y=()=>this.notifyChange("updating");p.add([this.watch("viewpoint",()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)},!0),this.on("resize",v=>this._resizeHandler(v)),this.watch("animationManager.animation",v=>{this.animation=v}),this.allLayerViews.on("change",()=>{y(),p.remove("map-view-base-layerViewsUpdating"),p.add(this.allLayerViews.map(v=>v.watch("updating",y)),"map-view-base-layerViewsUpdating")})],"map-view-base")}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1}}}set animation(g){const p=this._get("animation");if(g===p)return;if(p&&p.stop(),!g||g.isFulfilled())return void this._set("animation",null);this._set("animation",g),this.frameTask.animationInProgress=!0;const y=()=>{g===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};g.when(y,y)}get center(){if(!this.ready)return this._get("center");const{center:g,spatialReference:p}=this.state.paddedViewState;return new Zu.Z({x:g[0],y:g[1],spatialReference:p})}set center(g){if(null==g)return;if(!this._normalizeInput(g))return void Wc.error("#center",`incompatible spatialReference ${JSON.stringify(g.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",g),void this.notifyChange("initialExtentRequired");const p=this.viewpoint;(0,zo.o2)(p,p,g),this.viewpoint=p}set constraints(g){const p=this._get("constraints");p&&(this.handles.remove("map-view-base-constraints"),p.destroy()),this._set("constraints",g),g&&(g.view=this,this.ready&&(this.state.viewpoint=g.fit(this.state.paddedViewState.viewpoint)),this.handles.add(g.on("update",()=>{this.ready&&this.state&&(this.state.viewpoint=g.fit(this.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(g){if(null==g)return;const p=this._normalizeInput(g);if(!p)return void Wc.error("#center",`incompatible spatialReference ${JSON.stringify(g.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!p.width||!p.height)return void Wc.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",p),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const y=this.viewpoint;(0,zo.qf)(y,y,p,this.size,{constraints:this.constraints}),this.viewpoint=y}get graphicsTileStore(){return new dee.Z(this.featuresTilingScheme)}get initialExtentRequired(){const g=this._normalizeInput(this.center),p=this._normalizeInput(this.viewpoint),y=this._normalizeInput(this.extent),{scale:v,constraints:_}=this;let E=this.zoom;return!(this.get("map.initialViewProperties.viewpoint")||y||(_.effectiveLODs||(E=-1),g&&(0!==v||-1!==E)||p&&(0,dr.pC)(p.targetGeometry)&&("extent"===p.targetGeometry.type||p.scale)))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(g){this.ready?(this.state.padding=g,this._set("padding",this.state.padding)):this._set("padding",g)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(g){if(isNaN(g))return;if(!this.ready)return void this._set("rotation",g);const p=this.viewpoint;(0,zo.YQ)(p,p,g),this.viewpoint=p}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(g){if(!g||isNaN(g))return;if(!this.ready){this._set("scale",g),this._set("zoom",-1);const y=this._get("extent");return y&&(this._set("extent",null),this._set("center",y.center)),void this.notifyChange("initialExtentRequired")}const p=this.viewpoint;(0,zo.Hy)(p,p,g),this.viewpoint=p}get stationary(){return!(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(g=>!g.destroyed&&!("layerViews"in g)&&!0===g.updating))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const g=this.state.paddedViewState;return g&&g.viewpoint.clone()}set viewpoint(g){if(null==g)return;const p=this._normalizeInput(g);if(!p)return void(!g.scale||isNaN(g.scale)?Wc.error("#viewpoint",`invalid scale value of ${g.scale}`):(0,dr.Wi)(g.targetGeometry)?Wc.error("#viewpoint","geometry not defined"):Wc.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(g.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`));if(!this.ready)return this._set("viewpoint",p),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const y=new Qs.Z({targetGeometry:new Zu.Z,scale:0,rotation:0});(0,zo.JG)(y,p),this.constraints.constrain(y,this.state.paddedViewState.viewpoint),this.state.viewpoint=y,this.frameTask.requestFrame(),this._set("viewpoint",y)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(g){if(null==g)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",g),this._set("scale",0);const y=this._get("extent");y&&(this._set("extent",null),this._set("center",y.center))}if(!this.constraints.effectiveLODs)return;const p=this.viewpoint;(0,zo.Hy)(p,p,this.constraints.zoomToScale(g)),this.viewpoint=p,this._set("zoom",this.constraints.scaleToZoom(this.scale))}goTo(g,p){if(g)return this.animation&&(this.animation=null),this._createAnimation(),(0,Br.LR)(this,"ready",p&&p.signal).then(()=>{const y=Ot({animate:!0},p),v=(0,zo.km)(g,this);return this.animation.update(v),this._gotoTask={},y.animate?this._gotoAnimated(v,y):this._gotoImmediate(v,y)});Wc.error("#goTo()","target cannot be null or undefined")}hitTest(g){return Promise.reject("Should be implemented by subclasses")}popupHitTest(g){return this.hitTest(g).then(p=>nn(Ot({},p),{mapPoint:this.toMap(g)}))}toMap(g){if(!this.ready)return null;const[y,v]=this.state.toMap([0,0],[g.x,g.y]);return new Zu.Z({x:y,y:v,spatialReference:this.spatialReference})}toScreen(g){if(!this.ready)return null;const p=this._normalizeInput(g),y=[p.x,p.y];return this.state.toScreen(y,y),(0,ga.vW)(y[0],y[1])}pixelSizeAt(){return this.ready?this.state.resolution:(Wc.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}getDefaultSpatialReference(){var g,p,y;return this.map&&"initialViewProperties"in this.map&&(null==(g=this.map)||null==(p=g.initialViewProperties)?void 0:p.spatialReference)||(null==(y=this.defaultsFromMap)?void 0:y.spatialReference)||null}getSpatialReferenceSupport({layer:g}){return g||this._get("ready")||null!==this._getDefaultViewpoint()?{}:null}importLayerView(g){return(g=>{const p=_8[g.type];if(!(0,dr.pC)(p))throw function Qq(g){const p=g.declaredClass?g.declaredClass.slice(g.declaredClass.lastIndexOf(".")+1):"Unknown",y=p.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new sn.Z(`${y}:view-not-supported`,`${p} is not supported in 2D`)}(g);return p(g)})(g)}hasLayerViewModule(g){return(g=>(0,dr.pC)(_8[g.type]))(g)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new Y2),this.animation}_cancellableGoTo(g,p,y){const v=()=>g===this._gotoTask,_=y.then(()=>{v()&&(this.animation=null)}).catch(w=>{throw v()&&(this.animation=null,p.done||(p.stop(),this.frameTask.animationInProgress=!1)),w}),E=new Promise(w=>w(_));return p.when().catch(()=>{v()&&E.cancel&&E.cancel()}),E}_gotoImmediate(g,p){const y=this._gotoTask,v=this.animation,_=g.then(E=>{if((0,ni.k_)(p),y!==this._gotoTask)throw new sn.Z("view:goto-interrupted","Goto was interrupted");this.viewpoint=v.target=E,v.finish()});return this._cancellableGoTo(y,v,_)}_gotoAnimated(g,p){const y=this._gotoTask,v=this.animation,_=g.then(E=>{if((0,ni.k_)(p),y!==this._gotoTask)throw new sn.Z("view:goto-interrupted","Goto was interrupted");return v.update(E),this.animationManager.animate(v,this.viewpoint,p),v.when().then(()=>{},()=>{})});return this._cancellableGoTo(y,v,_)}_resizeHandler(g){const p=this.state;if(!p)return;let y=this.state.paddedViewState.viewpoint;const v=this.state.paddedViewState.size.concat();p.size=[g.width,g.height],(0,zo.SI)(y,y,v,this.state.paddedViewState.size,this.resizeAlign),y=this.constraints.constrain(y,null),this.state.viewpoint=y}_startup(){const g=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(g),this._set("animationManager",new Jq({view:this})),this._set("state",new uee({padding:this._get("padding"),size:this.size,viewpoint:g})),this._set("featuresTilingScheme",new cee.Z(Dq.Z.create({spatialReference:this.spatialReference,size:512,numLODs:36}))),this._set("ready",!0),this.frameTask&&this.frameTask.start()}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[g,p],spatialReference:y,rotation:v,scale:_}=this.state.paddedViewState,E=new Zu.Z({x:g,y:p,spatialReference:y});this._set("viewpoint",null),this._set("extent",null),this._set("center",E),this._set("zoom",-1),this._set("rotation",v),this._set("scale",_),this._set("spatialReference",y),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null}_flipStationary(g){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const p=performance.now()-this._lastStationaryEventTimestamp;p<160&&(this._stationaryTimer=this._flipStationary(p))},g)),this._stationaryTimer}_normalizeInput(g,p=this.spatialReference){const y=g&&g.targetGeometry||g;return p?y?p.equals(y.spatialReference)?g:(0,iu.Q8)(y,p)?function hee(g){return g&&"esri.Viewpoint"===g.declaredClass}(g)?(g.targetGeometry=(0,iu.iV)(y,p),g):(0,iu.iV)(y,p):null:null:g}_getDefaultViewpoint(){const g=this.constraints,p={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};g.effectiveLODs?-1!==p.zoom&&(p.scale=g.zoomToScale(p.zoom)):p.zoom=-1;let y=null,v=null,_=0;const E=p.viewpoint&&p.viewpoint.rotation,w=p.viewpoint&&p.viewpoint.targetGeometry;(0,dr.pC)(w)&&("extent"===w.type?y=w:"point"===w.type&&(v=w,_=p.viewpoint.scale));const D=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),O=this._normalizeInput(this.initialExtent),A=p.extent||y||D||O,W=p.center||v||A&&A.center,q=this.get("map.initialViewProperties.viewpoint.scale"),_e=p.scale||_||q||A&&(0,zo.EK)(A,this.size),be=this.get("map.initialViewProperties.viewpoint.rotation");return W&&_e?new Qs.Z({targetGeometry:W,scale:_e,rotation:p.rotation||E||be||0}):null}};(0,we._)([(0,Re.Cb)()],_i.prototype,"_stationaryTimer",void 0),(0,we._)([(0,Re.Cb)()],_i.prototype,"_defaultsFromMapSettings",null),(0,we._)([(0,Re.Cb)()],_i.prototype,"animation",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],_i.prototype,"animationManager",void 0),(0,we._)([(0,Re.Cb)({value:null,type:Zu.Z,dependsOn:["state.id","ready"]})],_i.prototype,"center",null),(0,we._)([(0,Re.Cb)({type:w8})],_i.prototype,"constraints",null),(0,we._)([(0,Re.Cb)({value:null,type:Ic.Z,dependsOn:["state.id","ready"]})],_i.prototype,"extent",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],_i.prototype,"featuresTilingScheme",void 0),(0,we._)([(0,Re.Cb)()],_i.prototype,"fullOpacity",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],_i.prototype,"graphicsTileStore",null),(0,we._)([(0,Re.Cb)()],_i.prototype,"graphicsView",void 0),(0,we._)([(0,Re.Cb)({type:Ic.Z})],_i.prototype,"initialExtent",void 0),(0,we._)([(0,Re.Cb)({dependsOn:["map.initialViewProperties?.viewpoint","constraints.effectiveLODs","spatialReference"]})],_i.prototype,"initialExtentRequired",null),(0,we._)([(0,Re.Cb)()],_i.prototype,"map",void 0),(0,we._)([(0,Re.Cb)()],_i.prototype,"labelManager",void 0),(0,we._)([(0,Re.Cb)({value:{top:0,right:0,bottom:0,left:0},cast:g=>Ot({top:0,right:0,bottom:0,left:0},g)})],_i.prototype,"padding",null),(0,we._)([(0,Re.Cb)({type:Object})],_i.prototype,"renderingOptions",void 0),(0,we._)([(0,Re.Cb)()],_i.prototype,"resizeAlign",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,dependsOn:["state.id"]})],_i.prototype,"resolution",null),(0,we._)([(0,Re.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],_i.prototype,"rotation",null),(0,we._)([(0,Re.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],_i.prototype,"scale",null),(0,we._)([(0,Re.Cb)({type:Oc.Z,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.ready"]})],_i.prototype,"spatialReference",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],_i.prototype,"state",void 0),(0,we._)([(0,Re.Cb)({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],_i.prototype,"stationary",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],_i.prototype,"supportsGround",void 0),(0,we._)([(0,Re.Cb)({type:S8.T,readOnly:!0})],_i.prototype,"timeline",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],_i.prototype,"type",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],_i.prototype,"updating",null),(0,we._)([(0,Re.Cb)({value:null,type:Qs.Z,dependsOn:["state.id","ready"]})],_i.prototype,"viewpoint",null),(0,we._)([(0,Re.Cb)({value:-1,dependsOn:["state.id"]})],_i.prototype,"zoom",null),_i=(0,we._)([(0,Tr.j)("esri.views.MapViewBase")],_i);const fee=_i;function iw(g,p){switch(p){case"primary":return"touch"===g.pointerType||0===g.button;case"secondary":return"touch"!==g.pointerType&&2===g.button;case"tertiary":return"touch"!==g.pointerType&&1===g.button}}class I8 extends xs.a{constructor(p,y){super(!0),this.view=p,this.registerIncoming("double-click",y,v=>this._handleDoubleClick(v,y))}_handleDoubleClick(p,y){iw(p.data,"primary")&&(p.stopPropagation(),y?this.view.mapViewNavigation.zoomOut([p.data.x,p.data.y]):this.view.mapViewNavigation.zoomIn([p.data.x,p.data.y]))}}class pee extends xs.a{constructor(p,y,v){super(!0),this.view=p,this.pointerType=y,this.registerIncoming("double-tap-drag",v,_=>this._handleDoubleTapDrag(_))}_handleDoubleTapDrag(p){const{data:y}=p,{pointerType:v}=y;if(v!==this.pointerType)return;p.stopPropagation();const{action:_,delta:E}=y,{view:w}=this,{mapViewNavigation:D}=w;switch(_){case"begin":{const{scale:O}=w;this._startScale=O,this._currentScale=O,this._previousDelta=E,D.begin();break}case"update":{if(this._previousDelta.y===E.y)return;this._previousDelta=E;const A=this._startScale*1.015**E.y;D.setViewpointImmediate(A/this._currentScale),this._currentScale=A;break}case"end":{const{constraints:O}=w,{effectiveLODs:A,snapToZoom:W}=O;if(!W||!A)return void D.end();const q=O.snapScale(this._currentScale),_e=(E.y>0?Math.max(q,O.snapToPreviousScale(this._startScale)):Math.min(q,O.snapToNextScale(this._startScale)))/this._currentScale;D.zoom(_e);break}}}}class bv{constructor(p){this.callbacks=p,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(p){const y=p.data,v=y.pointers.size;switch(y.action){case"start":this.currentCount=v,this.emitStart(p);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=v,this.emitStart(p);break;case"update":this.emitUpdate(p);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=v,this.emitStart(p);break;case"end":this.emitEnd(p),this.currentCount=0}this.previousEvent=p}emitStart(p){this.startEvent=p,this.callbacks.condition(this.currentCount,p)&&this.callbacks.start(this.currentCount,p,this.startEvent)}emitUpdate(p){this.callbacks.condition(this.currentCount,p)&&this.callbacks.update(this.currentCount,p,this.startEvent)}emitEnd(p){this.callbacks.condition(this.currentCount,p)&&this.callbacks.end(this.currentCount,p,this.startEvent),this.startEvent=null}}class mee extends xs.a{constructor(p,y,v){super(!0),this.view=p,this.pointerAction=y,this.registerIncoming("drag",v,E=>this._handleDrag(E)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation());const _=this.view.mapViewNavigation;this.dragEventSeparator=new bv({start:(E,w)=>{_.pan.begin(this.view,w.data),w.stopPropagation()},update:(E,w)=>{_.pan.update(this.view,w.data),w.stopPropagation()},end:(E,w)=>{_.pan.end(this.view,w.data),w.stopPropagation()},condition:(E,w)=>1===E&&iw(w.data,this.pointerAction)})}_handleDrag(p){const y=this.view.mapViewNavigation;y.pinch.zoomMomentum||y.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(p)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class gee extends xs.a{constructor(p,y,v){super(!0),this.view=p,this.pointerAction=y;const _=this.view.mapViewNavigation;this.dragEventSeparator=new bv({start:(E,w)=>{_.rotate.begin(this.view,w.data),w.stopPropagation()},update:(E,w)=>{_.rotate.update(this.view,w.data),w.stopPropagation()},end:(E,w)=>{_.rotate.end(),w.stopPropagation()},condition:(E,w)=>1===E&&iw(w.data,this.pointerAction)}),this.registerIncoming("drag",v,E=>this.dragEventSeparator.handle(E))}}var yee=C(84161);function Al(g){let p=g*g;return g<0&&(p*=-1),p}class bee extends xs.a{constructor(p){super(!0),this.view=p,this.frameTask=null,this.watchHandles=new Ra.Z,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",y=>this.handleEvent(y)),this.handle.pause()}onInstall(p){super.onInstall(p),this.watchHandles.add([(0,Br.S1)(this.view.navigation.gamepad,"enabled",y=>{y?(this.handle.resume(),this.frameTask||(this.frameTask=(0,Td.A)({update:v=>this.frameUpdate(v.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))})])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}handleEvent(p){const y=this.view.navigation.gamepad.device;y&&p.data.device!==y||this.currentDevice&&this.currentDevice!==p.data.device||("end"===p.data.action?(this.currentDevice=null,function vee(g){g.translation[0]=0,g.translation[1]=0,g.translation[2]=0,g.heading=0,g.tilt=0}(this.transformation)):(this.currentDevice=p.data.device,function _ee(g,p,y){const v=y,_=g.state,E=g.device,w="forward-down"===p.tiltDirection?1:-1;"standard"===E.deviceType?(v.translation[0]=Al(_.axes[0]),v.translation[1]=Al(_.axes[1]),v.translation[2]=Al(_.buttons[7])-Al(_.buttons[6]),v.heading=Al(_.axes[2]),v.tilt=Al(_.axes[3])):"spacemouse"===E.deviceType&&(v.translation[0]=1.2*Al(_.axes[0]),v.translation[1]=1.2*Al(_.axes[1]),v.translation[2]=2*-Al(_.axes[2]),v.heading=1.2*Al(_.axes[5]),v.tilt=1.2*Al(_.axes[3])),v.tilt*=w,(0,yee.a)(v.translation,v.translation,1)}(p.data,this.view.navigation.gamepad,this.transformation)))}frameUpdate(p){const y=this.transformation;if(function Eee(g){return 0===g.translation[0]&&0===g.translation[1]&&0===g.translation[2]&&0===g.heading&&0===g.tilt&&0===g.zoom}(y))return;const v=this.view.viewpoint.clone(),E=wee*this.view.navigation.gamepad.velocityFactor*p;(0,zo.Rx)(v,v,[y.translation[0]*E,-y.translation[1]*E]);const O=this.view.size;(0,zo.UZ)(v,v,1+y.translation[2]*Mee*p,this.view.constraints.rotationEnabled?-y.heading*Cee*p:0,[O[0]/2,O[1]],O);const W=this.view.constraints.constrain(v,this.view.viewpoint);this.view.viewpoint=W}}const Cee=.06,wee=.7,Mee=6e-4;class xee extends xs.a{constructor(p,y,v){super(!0),this.view=p,this.keys=y,this._pressed=!1,this._keyMap={[y.left]:"left",[y.right]:"right",[y.up]:"up",[y.down]:"down"},this.registerIncoming("key-down",v,_=>this._handleKeyDown(_)),this.registerIncoming("key-up",v,_=>this._handleKeyUp(_)),this.registerIncoming("blur",v,()=>this._handleBlur())}_handleKeyDown(p){p.data.repeat||this._handleKey(p,!0)}_handleKeyUp(p){this._handleKey(p,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(p,y){const v=this._keyMap[p.data.key];if(this._pressed=null!=v,this._pressed){if(y)switch(this.view.mapViewNavigation.begin(),v){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();p.stopPropagation()}}}class Dee extends xs.a{constructor(p,y,v){super(!0),this.view=p,this.keys=y,this._pressed=!1,this._keyToDirection={[y.clockwiseOption1]:"clockwise",[y.clockwiseOption2]:"clockwise",[y.counterClockwiseOption1]:"counterClockwise",[y.counterClockwiseOption2]:"counterClockwise",[y.resetOption1]:"reset",[y.resetOption2]:"reset"},this.registerIncoming("key-down",v,_=>this._handleKeyDown(_)),this.registerIncoming("key-up",v,_=>this._handleKeyUp(_)),this.registerIncoming("blur",v,()=>this._handleBlur())}_handleKeyDown(p){p.data.repeat||this._handleKey(p,!0)}_handleKeyUp(p){this._handleKey(p,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(p,y){const v=p.modifiers;if(v.size>0&&!v.has("Shift")||!this.view.constraints.rotationEnabled)return;const _=this._keyToDirection[p.data.key];if(this._pressed=null!=_,this._pressed){if(y)switch(this.view.mapViewNavigation.begin(),_){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();p.stopPropagation()}}}class See extends xs.a{constructor(p,y,v){super(!0),this.view=p,this.keys=y,this._keysToZoomAction={},this.registerIncoming("key-down",v,_=>this._handleKeyDown(_)),y.zoomIn.forEach(_=>this._keysToZoomAction[_]=0),y.zoomOut.forEach(_=>this._keysToZoomAction[_]=1)}_handleKeyDown(p){this._handleKey(p)}_handleKey(p){const y=p.modifiers;if(y.size>0&&!y.has("Shift"))return;const{key:v}=p.data;if(!(v in this._keysToZoomAction))return;const _=this._keysToZoomAction[v],{mapViewNavigation:E}=this.view;let w=null;switch(_){case 0:w=E.zoomIn();break;case 1:w=E.zoomOut();break;default:return}E.begin(),w.then(()=>E.end()),p.stopPropagation()}}class Iee extends xs.a{constructor(p,y){super(!0),this.view=p,this._canZoom=!0,this.registerIncoming("mouse-wheel",y,v=>this._handleMouseWheel(v))}_handleMouseWheel(p){if(!this.view.navigation.mouseWheelZoomEnabled||(p.preventDefault(),p.stopPropagation(),!this._canZoom))return;const y=this.view.mapViewNavigation,{x:v,y:_,deltaY:E}=p.data,D=y.zoom(1/.6**(1/60*E),[v,_]);D&&(this._canZoom=!1,D.catch(()=>{}).then(()=>{this._canZoom=!0,y.end()}))}}class Tee extends xs.a{constructor(p){super(!0),this.view=p,this.registerIncoming("drag",v=>this._handleDrag(v)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation());const y=this.view.mapViewNavigation;this.dragEventSeparator=new bv({start:(v,_)=>{y.pinch.begin(this.view,_.data),_.stopPropagation()},update:(v,_)=>{y.pinch.update(this.view,_.data),_.stopPropagation()},end:(v,_)=>{y.pinch.end(this.view),_.stopPropagation()},condition:v=>v>=2})}_handleDrag(p){this.dragEventSeparator.handle(p)}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}var Aee=C(25441);function T8(g){const p=g.native;return p?{buttons:p.buttons.map(y=>y.pressed?y.value?y.value:1:0),axes:p.axes.map(y=>function Lee(g,p){const y=Math.abs(g);return y<p?0:Math.sign(g)*(y-p)/(1-p)}(y,g.axisThreshold))}:{buttons:[],axes:[]}}class Nee{constructor(p,y){this.element=p,this.input=y,this._hasEventListeners=!1,this.onConnectGamepad=E=>{this.connectGamepad(E.gamepad)},this.onDisconnectGamepad=E=>{const w=E.gamepad,D=w.index,O=this.inputDevices[D];O&&(this.emitGamepadEvent(w,T8(O),!1),this.inputDevices.splice(D,1),this.latestUpdate.splice(D,1),this.input.gamepad.devices.remove(O),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const v="getGamepads"in window.navigator,_=window.isSecureContext;this.supported=v&&_,this.supported&&(this.forEachGamepad(E=>this.connectGamepad(E)),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))}set hasEventListeners(p){this._hasEventListeners!==p&&(this._hasEventListeners=p,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(p){this.callback=p}connectGamepad(p){const y=new G2(p);"unknown"!==y.deviceType&&(this.inputDevices[p.index]=y,this.input.gamepad.devices.add(y)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this.startPolling():this.stopPolling()}startPolling(){null==this.frameTask&&(this.frameTask=(0,Td.A)({update:()=>this.readGamepadState()}))}stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}readGamepadState(){const p=document.hasFocus(),y=this.element.contains(document.activeElement),v="document"===this.input.gamepad.enabledFocusMode&&!p||"view"===this.input.gamepad.enabledFocusMode&&!y;this.forEachGamepad(_=>{const E=this.inputDevices[_.index];if(!E)return;const w=this.latestUpdate[_.index],D=T8(E),O=v||function Ree(g){for(let p=0;p<g.axes.length;p++)if(0!==g.axes[p])return!1;for(let p=0;p<g.buttons.length;p++)if(0!==g.buttons[p])return!1;return!0}(D);w&&(w.timestamp===_.timestamp||!w.active&&O||function Pee(g,p){if(g.axes.length!==p.axes.length||g.buttons.length!==p.buttons.length)return!1;for(let y=0;y<g.axes.length;y++)if(g.axes[y]!==p.axes[y])return!1;for(let y=0;y<g.buttons.length;y++)if(g.buttons[y]!==p.buttons[y])return!1;return!0}(w.state,D))||this.emitGamepadEvent(_,D,!O)})}forEachGamepad(p){const y=window.navigator.getGamepads();for(let v=0;v<y.length;v++){const _=y[v];this.validate(_)&&p(_)}}emitGamepadEvent(p,y,v){const _=this.latestUpdate[p.index],E=_&&_.active;if(!E&&!v)return;const w=!E&&v?"start":E&&v?"update":"end";this.latestUpdate[p.index]={timestamp:p.timestamp,state:y,active:v},this.callback&&this.callback({device:this.inputDevices[p.index],state:y,action:w})}validate(p){if(!p||!p.connected)return!1;for(let y=0;y<p.axes.length;y++)if(isNaN(p.axes[y]))return!1;return!0}}const A8=(0,Dc.Z)("trident"),P8=(0,Dc.Z)("edge"),Fee=(0,Dc.Z)("chrome"),jee=(0,Dc.Z)("ff"),Bee=(0,Dc.Z)("safari"),Mf_touchNone="esri-view-surface--touch-none",Mf_touchPan="esri-view-surface--touch-pan";let Uee=(()=>{class g{constructor(y,v){this.input=v,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=y,y.getAttribute("tabindex")||y.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Nee(y,this.input),this._gamepadSource.onEvent=_=>this._callback("gamepad",_)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(y=>{this._releasePointerCaptureSafe(y)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(y){this._browserTouchPanningEnabled=y,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(y){this._callback=y}set activeEvents(y){for(const v in this._active)y&&y.has(v)||(this._element.removeEventListener(ow[v],this._active[v]),delete this._active[v]);y&&y.forEach(v=>{if(!this._active[v]&&ow[v]){const _=(this._eventHandlers[v]||this._handleDefault).bind(this,v);this._element.addEventListener(ow[v],_),this._active[v]=_}}),this._gamepadSource.hasEventListeners=y&&y.has("gamepad")}setPointerCapture(y,v){v?(this._element.setPointerCapture(y.pointerId),this._activePointerCaptures.add(y.pointerId)):(this._releasePointerCaptureSafe(y.pointerId),this._activePointerCaptures.delete(y.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Mf_touchNone:Mf_touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Mf_touchPan:Mf_touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Mf_touchNone),this._element.classList.remove(Mf_touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(y){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(y))return;this._element.releasePointerCapture(y)}catch(v){}}_updateNormalizedPointerLikeEvent(y,v){const _=n8(this._element,y);return g.test.disableSubpixelCoordinates&&(_.x=Math.round(_.x),_.y=Math.round(_.y)),v.x=_.x,v.y=_.y,v}_handleKey(y,v){const _=(0,Aee.kK)(v);_&&"key-up"===y&&this._keyDownState.delete(_);const E={native:v,key:_,repeat:_&&this._keyDownState.has(_)};_&&"key-down"===y&&this._keyDownState.add(E.key),this._callback(y,E)}_handlePointer(y,v){const _=this._updateNormalizedPointerLikeEvent(v,{native:v,x:0,y:0,pointerType:v.pointerType,button:v.button,buttons:v.buttons,eventId:this._eventId++});this._callback(y,_)}_handlePointerPreventDefault(y,v){const _=this._updateNormalizedPointerLikeEvent(v,{native:v,x:0,y:0,pointerType:v.pointerType,button:v.button,buttons:v.buttons,eventId:this._eventId++});v.preventDefault(),this._callback(y,_)}_handleMouseWheel(y,v){let _=v.deltaY;switch(v.deltaMode){case 0:(A8||P8)&&(_=_/document.documentElement.clientHeight*600);break;case 1:_*=30;break;case 2:_*=900}A8||P8?_*=.7:Fee||Bee?_*=.6:jee&&(_*=1.375);const w=Math.abs(_);w>100&&(_=_/w*200/(1+Math.exp(-.02*(w-100))));const D=this._updateNormalizedPointerLikeEvent(v,{native:v,x:0,y:0,deltaY:_});this._callback(y,D)}_handlePointerCaptureLost(y,v){this._activePointerCaptures.delete(v.pointerId),this._handleDefault(y,v)}_handleDefault(y,v){const _={native:v};v.preventDefault(),this._callback(y,_)}_preventAltKeyDefault(y){"Alt"===y.key&&y.preventDefault()}_preventMultiTouchPanning(y){y.touches.length>1&&y.preventDefault()}}return g.test={disableSubpixelCoordinates:!1},g})();const ow={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Vee extends xs.a{constructor(){super(!0),this.registerIncoming("context-menu",p=>{p.data.native.preventDefault()})}}var Cv=C(84244);function sw(g,p){return Math.abs(p.x-g.x)+Math.abs(p.y-g.y)}class Zee extends xs.a{constructor(p=250,y=10,v=350,_=35,E=Cv.Z){super(!1),this.maximumDoubleClickDelay=p,this.maximumDoubleClickDistance=y,this.maximumDoubleTouchDelay=v,this.maximumDoubleTouchDistance=_,this._clock=E,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(p=>{null!=p.doubleClickTimeout&&(p.doubleClickTimeout.remove(),p.doubleClickTimeout=null)})}get hasPendingInputs(){return(0,fv.oE)(this._pointerState,p=>null!=p.doubleClickTimeout)}_pointerId(p){const y=p.native;return"mouse"===y.pointerType?`${y.pointerId}:${y.button}`:`${y.pointerType}`}_handleImmediateClick(p){const y=p.data,v=this._pointerId(y),_=this._pointerState.get(v);if(_){const E="touch"===y.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;sw(_.event.data,y)>E?(this._clearDoubleClickTimeout(v,!0),this._startClick(p)):(this._clearDoubleClickTimeout(v,!1),this._doubleClick.emit(_.event.data,void 0,_.event.modifiers))}else this._startClick(p)}_startClick(p){const y=this._pointerId(p.data);this._pointerState.set(y,{event:p,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(y),"touch"===p.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}),this.refreshHasPendingInputs()}_handlePointerDrag(p){const y=this._pointerId(p.data.currentEvent);this._clearDoubleClickTimeout(y,!0)}_handleDrag(p){const y=this._pointerId(p.data.pointer);this._clearDoubleClickTimeout(y,!0)}_clearDoubleClickTimeout(p,y){const v=this._pointerState.get(p);v&&(v.doubleClickTimeout.remove(),v.doubleClickTimeout=null,y&&this._doubleClickTimeoutExceeded(p),this._pointerState.delete(p),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(p){const y=this._pointerState.get(p);this._click.emit(y.event.data,void 0,y.event.modifiers),y.doubleClickTimeout=null,this._pointerState.delete(p),this.refreshHasPendingInputs()}}class $ee extends xs.a{constructor(p=250,y=10,v=350,_=35,E=Cv.Z){super(!1),this.maximumDoubleClickDelay=p,this.maximumDoubleClickDistance=y,this.maximumDoubleTouchDelay=v,this.maximumDoubleTouchDistance=_,this._clock=E,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,ga.vW)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new bv({start:(w,D)=>this._dragStart(w,D),update:(w,D)=>this._dragUpdate(D),end:(w,D)=>this._dragEnd(D)}),this.registerIncoming("drag",w=>this._dragEventSeparator.handle(w)),this.registerIncoming("pointer-down",w=>this._handlePointerDown(w)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(p=>{null!=p.doubleTapTimeout&&(p.doubleTapTimeout.remove(),p.doubleTapTimeout=null)})}get hasPendingInputs(){return(0,fv.oE)(this._pointerState,p=>null!=p.doubleTapTimeout)}_clearPointerDown(p){const y=this._pointerState.get(p);y&&(y.doubleTapTimeout.remove(),y.doubleTapTimeout=null,this._pointerState.delete(p),this.refreshHasPendingInputs())}_createDoubleTapDragData(p,y,v){const{button:_,buttons:E,pointer:w,pointers:D,pointerType:O,timestamp:A}=v;return{action:p,delta:y,button:_,buttons:E,pointer:w,pointers:D,pointerType:O,timestamp:A}}_dragStart(p,y){if(!this._doubleTapDragReady||1!==p)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:v,modifiers:_}=y,{center:E}=v;this._dragStartCenter=E;const w=this._createDoubleTapDragData("begin",(0,ga.vW)(0,0),v);this._doubleTapDrag.emit(w,void 0,_),y.stopPropagation()}_dragUpdate(p){if(!this._doubleTapDragActive)return;const{data:y,modifiers:v}=p,{center:_}=y,E=(0,ga.vW)(_.x-this._dragStartCenter.x,_.y-this._dragStartCenter.y),w=this._createDoubleTapDragData("update",E,y);this._doubleTapDrag.emit(w,void 0,v),p.stopPropagation()}_dragEnd(p){if(!this._doubleTapDragActive)return;const{data:y,modifiers:v}=p,{center:_}=y,E=(0,ga.vW)(_.x-this._dragStartCenter.x,_.y-this._dragStartCenter.y),w=this._createDoubleTapDragData("end",E,y);this._doubleTapDrag.emit(w,void 0,v),this._doubleTapDragActive=!1,p.stopPropagation()}_handlePointerDown(p){const{data:y}=p,v=this._pointerId(y),_=this._pointerState.get(v),{pointerType:E}=y.native;if(_){const w="touch"===E?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(v),sw(_.event.data,y)>w?this._storePointerDown(p):this._doubleTapDragReady=!0}else this._storePointerDown(p)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(p){const{native:y}=p,{pointerId:v,button:_,pointerType:E}=y;return"mouse"===E?`${v}:${_}`:`${E}`}_storePointerDown(p){const{data:y}=p,{pointerType:v}=y.native,_=this._pointerId(y),w=this._clock.setTimeout(()=>this._clearPointerDown(_),"touch"===v?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(_,{event:p,doubleTapTimeout:w}),this.refreshHasPendingInputs()}}var L8,aw=C(27422);class Kee extends xs.a{constructor(p){super(!1),this.navigationTouch=p,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this.handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this.handlePointerUpAndPointerLost.bind(this))}createPayload(p,y,v,_){return{action:p,pointerType:this.pointerType,button:this.mouseButton,buttons:y.buttons,timestamp:_,pointers:zee(this.activePointerMap),pointer:y,angle:v.angle,radius:v.radius,center:v.center}}addPointer(p){const y=p.native.pointerId,v=wv(this.activePointerMap).angle,_={event:p,initialAngle:0,lastAngle:0};this.activePointerMap.set(y,_);const E=Mv(_,R8(this.activePointerMap));_.initialAngle=E,_.lastAngle=E,this.updatePointerAngles(v)}updatePointer(p){if(p&&null==p.x&&null==p.y)return;const v=this.activePointerMap.get(p.native.pointerId);v?v.event=p:this.addPointer(p)}removePointer(p){const y=wv(this.activePointerMap).angle;this.activePointerMap.delete(p),this.updatePointerAngles(y)}updatePointerAngles(p){const y=wv(this.activePointerMap);this.activePointerMap.forEach(v=>{v.initialAngle=Mv(v,y)-p,v.lastAngle=Mv(v,y)-p})}emitEvent(p,y,v){const _=wv(this.activePointerMap);this.drag.emit(this.createPayload(p,y,_,v),void 0,this.startStateModifiers)}handlePointerUpAndPointerLost(p){const y=p.data.native.pointerId,v=(0,aw.HA)(p.timestamp);this.activePointerMap.get(y)&&(1===this.activePointerMap.size?(this.updatePointer(p.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",p.data,v),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(y)):(this.removePointer(y),this.emitEvent("removed",p.data,(0,aw.HA)(p.timestamp))))}handlePointerDrag(p){const y=p.data,v=y.currentEvent,_=(0,aw.HA)(p.timestamp);switch(y.action){case"start":case"update":this.isDragging?this.activePointerMap.has(v.native.pointerId)?(this.updatePointer(v),!this.isCurrentDragSuppressed&&this.emitEvent("update",v,_)):(this.addPointer(v),this.emitEvent("added",v,_),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(v),this.pointerType=p.data.startEvent.pointerType,this.mouseButton=p.data.startEvent.button,this.startStateModifiers=p.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",v,_))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function R8(g){const p=[];return g.forEach(y=>{p.push((0,ga.vW)(y.event.x,y.event.y))}),function Wee(g,p){if(p?(p.radius=0,p.center.x=0,p.center.y=0):p={radius:0,center:(0,ga.vW)()},0===g.length)return p;if(1===g.length)return p.center.x=g[0].x,p.center.y=g[0].y,p;if(2===g.length){const[Tt,Rt]=g,[Xt,ur]=[Rt.x-Tt.x,Rt.y-Tt.y];return p.radius=Math.sqrt(Xt*Xt+ur*ur)/2,p.center.x=(Tt.x+Rt.x)/2,p.center.y=(Tt.y+Rt.y)/2,p}let y=0,v=0;for(let Tt=0;Tt<g.length;Tt++)y+=g[Tt].x,v+=g[Tt].y;y/=g.length,v/=g.length;const _=g.map(Tt=>Tt.x-y),E=g.map(Tt=>Tt.y-v);let w=0,D=0,O=0,A=0,W=0,q=0,_e=0;for(let Tt=0;Tt<_.length;Tt++){const Rt=_[Tt],Xt=E[Tt],ur=Rt*Rt,_r=Xt*Xt;w+=ur,D+=_r,O+=Rt*Xt,A+=ur*Rt,W+=_r*Xt,q+=Rt*_r,_e+=Xt*ur}const be=.5*(A+q),We=.5*(W+_e),qe=w*D-O*O,dt=(be*D-We*O)/qe,gt=(w*We-O*be)/qe,lt=(0,ga.vW)(dt+y,gt+v);return{radius:Math.sqrt(dt*dt+gt*gt+(w+D)/g.length),center:lt}}(p)}function wv(g){const p=R8(g);let y=0;return g.forEach(v=>{let _=Mv(v,p),E=_-v.lastAngle;for(;E>Math.PI;)E-=2*Math.PI;for(;E<-Math.PI;)E+=2*Math.PI;_=v.lastAngle+E,v.lastAngle=_,y+=_-v.initialAngle}),y/=g.size||1,{angle:y,radius:p.radius,center:p.center}}function zee(g){const p=new Map;return g.forEach((y,v)=>p.set(v,y.event)),p}function Mv(g,p){const y=g.event;return Math.atan2(y.y-p.center.y,y.x-p.center.x)}!function(g){g[g.Left=0]="Left",g[g.Middle=1]="Middle",g[g.Right=2]="Right",g[g.Back=3]="Back",g[g.Forward=4]="Forward",g[g.Undefined=-1]="Undefined"}(L8||(L8={}));class Gee extends xs.a{constructor(p=250,y=10,v=350,_=35,E=Cv.Z){super(!1),this.maximumDoubleClickDelay=p,this.maximumDoubleClickDistance=y,this.maximumDoubleTouchDelay=v,this.maximumDoubleTouchDistance=_,this._clock=E,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",w=>{this._handlePointerLoss(w,"pointer-up")}),this.registerIncoming("pointer-capture-lost",w=>{this._handlePointerLoss(w,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",w=>{this._handlePointerLoss(w,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(p=>{p.immediateDoubleClick&&p.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(p){const y=p.data,v=this._pointerId(y);this._pointerState.has(v)||(this._pointerState.set(v,{downButton:y.native.button,immediateDoubleClick:null}),this.startCapturingPointer(y.native))}_handlePointerLoss(p,y){const v=p.data,_=this._pointerId(v),E=this._pointerState.get(_);if(E&&"pointer-up"===y&&E.downButton===v.native.button){const w=E.immediateDoubleClick;if(w){w.timeoutHandle.remove();const D="touch"===p.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;sw(w,p.data)>D?this._startImmediateDoubleClick(p,E):(this._immediateDoubleClick.emit(p.data,void 0,w.modifiers),this._removeState(v))}else this._startImmediateDoubleClick(p,E)}}_startImmediateDoubleClick(p,y){y.immediateDoubleClick={x:p.data.x,y:p.data.y,modifiers:p.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(p.data),"touch"===p.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}}_pointerId(p){const y=p.native;return"mouse"===y.pointerType?`${y.pointerId}:${y.button}`:`${y.pointerType}`}_removeState(p){const y=this._pointerId(p);this._pointerState.delete(y),this.stopCapturingPointer(p.native),this.refreshHasPendingInputs()}}class Hee extends xs.a{constructor(p=300,y=1.5,v=6,_=6,E=500,w=Cv.Z){super(!1),this.maximumClickDelay=p,this.movementUntilMouseDrag=y,this.movementUntilPenDrag=v,this.movementUntilTouchDrag=_,this.holdDelay=E,this._clock=w,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",D=>{this._handlePointerLoss(D,"pointer-up")}),this.registerIncoming("pointer-capture-lost",D=>{this._handlePointerLoss(D,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",D=>{this._handlePointerLoss(D,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(p=>{null!=p.holdTimeout&&(p.holdTimeout.remove(),p.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(p){const y=p.data,v=y.native.pointerId;let _=null;0===this._pointerState.size&&(_=this._clock.setTimeout(()=>{const w=this._pointerState.get(v);w&&(w.isDragging||(this._pointerHold.emit(w.previousEvent,void 0,p.modifiers),w.holdEmitted=!0),w.holdTimeout=null)},this.holdDelay)),this._pointerState.set(v,{startEvent:y,previousEvent:y,startTimestamp:p.timestamp,isDragging:!1,downButton:y.native.button,holdTimeout:_,modifiers:new Set}),this.startCapturingPointer(y.native),this._moveHandle.resume(),this._pointerState.size>1&&this.startDragging(p)}_createPointerDragData(p,y,v){return{action:p,startEvent:y.startEvent,previousEvent:y.previousEvent,currentEvent:v}}_handlePointerMove(p){const y=p.data,_=this._pointerState.get(y.native.pointerId);_&&(_.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",_,y),void 0,_.modifiers):function kee(g,p){const y=p.x-g.x,v=p.y-g.y;return Math.sqrt(y*y+v*v)}(y,_.startEvent)>this._getDragThreshold(y.native.pointerType)&&this.startDragging(p),_.previousEvent=y)}_getDragThreshold(p){switch(p){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}startDragging(p){const y=p.data,v=y.native.pointerId;this._pointerState.forEach(_=>{null!=_.holdTimeout&&(_.holdTimeout.remove(),_.holdTimeout=null),_.isDragging||(_.modifiers=p.modifiers,_.isDragging=!0,v===_.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",_,y)):this._pointerDrag.emit(this._createPointerDragData("start",_,_.previousEvent),p.timestamp))})}_handlePointerLoss(p,y){const v=p.data,_=v.native.pointerId,E=this._pointerState.get(_);E&&(null!=E.holdTimeout&&(E.holdTimeout.remove(),E.holdTimeout=null),E.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",E,"pointer-up"===y?v:E.previousEvent),void 0,E.modifiers):"pointer-up"===y&&E.downButton===v.native.button&&p.timestamp-E.startTimestamp<=this.maximumClickDelay&&!E.holdEmitted&&this._immediateClick.emit(v),this._pointerState.delete(_),this.stopCapturingPointer(v.native),0===this._pointerState.size&&this._moveHandle.pause())}}const xv_pan={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},xv_zoom={zoomIn:["=","+"],zoomOut:["-","_"]},xv_rotate={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let Dv=class extends pi.Z{constructor(){super(...arguments),this._handles=new Ra.Z}initialize(){this._handles.add([(0,Br.PA)(this.view,"ready",()=>this._disconnect()),(0,Br.gx)(this.view,"ready",()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const p=new Uee(this.view.surface,this.view.input),y=[new Gee,new Hee,new Zee,new Kee(this.view.navigation),new $ee],v=new Ef.$({eventSource:p,recognizers:y});v.installHandlers("prevent-context-menu",[new Vee],Ef.f.INTERNAL),v.installHandlers("navigation",[new Tee(this.view),new bee(this.view),new Iee(this.view),new I8(this.view),new I8(this.view,["Ctrl"]),new mee(this.view,"primary"),new xee(this.view,xv_pan),new See(this.view,xv_zoom),new Dee(this.view,xv_rotate),new gee(this.view,"secondary"),new pee(this.view,"touch")],Ef.f.INTERNAL),this.view.viewEvents.connect(v),this._source=p,this._inputManager=v,(0,Br.S1)(this.view.navigation,"browserTouchPanEnabled",_=>{this._source.browserTouchPanningEnabled=!_})}get test(){return{inputManager:this._inputManager}}};(0,we._)([(0,Re.Cb)()],Dv.prototype,"view",void 0),Dv=(0,we._)([(0,Tr.j)("esri.views.2d.input.MapViewInputManager")],Dv);const Yee=Dv;let Jee=0,Zc=class extends pi.Z{constructor(){super(...arguments),this.color=new Jh.Z([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return Jee++}};(0,we._)([(0,Re.Cb)({readOnly:!0})],Zc.prototype,"version",null),(0,we._)([(0,Re.Cb)({type:Jh.Z})],Zc.prototype,"color",void 0),(0,we._)([(0,Re.Cb)({type:Jh.Z})],Zc.prototype,"haloColor",void 0),(0,we._)([(0,Re.Cb)()],Zc.prototype,"haloOpacity",void 0),(0,we._)([(0,Re.Cb)()],Zc.prototype,"fillOpacity",void 0),Zc=(0,we._)([(0,Tr.j)("esri.views.2d.support.HighlightOptions")],Zc);const N8=Zc;var F8=C(18605),Qee=C(31637);const qee={checkMajorWebPerformanceCaveat:!0};let Vd=class extends pi.Z{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(g){const p=this._get("node");g!==p&&(g&&g.classList.add("esri-component"),p&&p.classList.remove("esri-component"),this._set("node",g))}castNode(g){return g?"string"==typeof g||function tte(g){return g&&"nodeType"in g}(g)?(this._set("widget",null),(0,lu.L7)(g)):(function rte(g){return g&&"function"==typeof g.render}(g)&&!g.domNode&&(g.domNode=document.createElement("div")),this._set("widget",g),g.domNode):(this._set("widget",null),null)}};(0,we._)([(0,Re.Cb)({dependsOn:[]})],Vd.prototype,"id",null),(0,we._)([(0,Re.Cb)()],Vd.prototype,"node",null),(0,we._)([(0,fa.p)("node")],Vd.prototype,"castNode",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Vd.prototype,"widget",void 0),Vd=(0,we._)([(0,Tr.j)("esri.views.ui.Component")],Vd);const Sv=Vd,nte={left:0,top:0,bottom:0,right:0},B8={bottom:30,top:15,right:15,left:15},lw="manual",qs_corner="esri-ui-corner";function uw(g){const p=g,y="object"==typeof p&&null!==p&&Object.getPrototypeOf(p);return null!==y&&y!==Object.prototype||!("component"in p||"index"in p||"position"in p)?null:g}function cw(g,{top:p,bottom:y,left:v,right:_}){g.style.top=p,g.style.bottom=y,g.style.left=v,g.style.right=_}let Yu=class extends qh.Z.EventedAccessor{constructor(g){super(g),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new Ra.Z,this.view=null,this._initContainers()}initialize(){this._handles.add([(0,Br.S1)(this,"view.padding, container",this._applyViewPadding.bind(this)),(0,Br.S1)(this,"padding",this._applyUIPadding.bind(this))])}destroy(){this.container=null;for(const g of this._components)g.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(g){const p=this._get("container");g!==p&&(g&&(g.classList.add("esri-ui"),g.classList.add((0,Lo.rk)()),this._attachContainers(g)),p&&(p.classList.remove("esri-ui"),cw(p,{top:"",bottom:"",left:"",right:""}),(0,lu.cS)(p)),this._set("container",g))}get height(){const g=this.get("view.height")||0;if(0===g)return g;const p=this._getViewPadding();return Math.max(g-(p.top+p.bottom),0)}get padding(){return this._get("padding")}set padding(g){g?this._override("padding",g):this._clearOverride("padding")}castPadding(g){return"number"==typeof g?{bottom:g,top:g,right:g,left:g}:Ot(Ot({},B8),g)}get width(){const g=this.get("view.width")||0;if(0===g)return g;const p=this._getViewPadding();return Math.max(g-(p.left+p.right),0)}add(g,p){let y,v;if(Array.isArray(g))return void g.forEach(E=>this.add(E,p));const _=uw(g);_&&({index:y,position:p,component:g,key:v}=_),p&&"object"==typeof p&&({index:y,key:v,position:p}=p),!g||p&&!this._isValidPosition(p)||this._add(g,p,y,v)}remove(g,p){if(!g)return;if(Array.isArray(g))return g.map(v=>this.remove(v,p));const y=this._find(g);if(y){const v=this._componentToKey;if(v.has(g)&&v.get(g)!==p)return;const _=this._components.indexOf(y);return y.node.parentNode&&y.node.parentNode.removeChild(y.node),this._componentToKey.delete(g),this._components.splice(_,1)[0]}}empty(g){return Array.isArray(g)?g.map(p=>this.empty(p)).reduce((p,y)=>p.concat(y)):(g=g||lw)===lw?Array.prototype.slice.call(this._manualContainer.children).filter(p=>!p.classList.contains(qs_corner)).map(p=>this.remove(p)):this._isValidPosition(g)?Array.prototype.slice.call(this._cornerNameToContainerLookup[g].children).map(this.remove,this):null}move(g,p){if(Array.isArray(g)&&g.forEach(E=>this.move(E,p)),!g)return;let y;const v=uw(g)||uw(p);if(v&&(y=v.index,p=v.position,g=v.component||g),p&&!this._isValidPosition(p))return;const _=this.remove(g);_&&this.add(_,{position:p,index:y})}find(g){if(!g)return null;const p=this._findById(g);return p&&(p.widget||p.node)}getPosition(g){for(const p in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[p].contains(g))return p;return null}_add(g,p,y,v){g instanceof Sv||(g=new Sv({node:g})),this._place({component:g,position:p,index:y}),this._components.push(g),v&&this._componentToKey.set(g,v)}_find(g){return g?g instanceof Sv?this._findByComponent(g):"string"==typeof g?this._findById(g):this._findByNode(g.domNode||g):null}_getViewPadding(){return this.get("view.padding")||nte}_attachContainers(g){g.appendChild(this._innerContainer),g.appendChild(this._manualContainer)}_initContainers(){const g=document.createElement("div");g.classList.add("esri-ui-inner-container"),g.classList.add("esri-ui-corner-container");const p=document.createElement("div");p.classList.add("esri-ui-inner-container"),p.classList.add("esri-ui-manual-container");const y=document.createElement("div");y.classList.add("esri-ui-top-left"),y.classList.add(qs_corner),g.appendChild(y);const v=document.createElement("div");v.classList.add("esri-ui-top-right"),v.classList.add(qs_corner),g.appendChild(v);const _=document.createElement("div");_.classList.add("esri-ui-bottom-left"),_.classList.add(qs_corner),g.appendChild(_);const E=document.createElement("div");E.classList.add("esri-ui-bottom-right"),E.classList.add(qs_corner),g.appendChild(E),this._innerContainer=g,this._manualContainer=p;const w=(0,Lo.dZ)();this._cornerNameToContainerLookup={"top-left":y,"top-right":v,"bottom-left":_,"bottom-right":E,"top-leading":w?v:y,"top-trailing":w?y:v,"bottom-leading":w?E:_,"bottom-trailing":w?_:E},this._positionNameToContainerLookup=Ot({manual:p},this._cornerNameToContainerLookup)}_isValidPosition(g){return!!this._positionNameToContainerLookup[g]}_place(g){const p=g.component,v=g.index,_=this._positionNameToContainerLookup[g.position||lw],E=v>-1;if(function ite(g){return g&&!g._started&&"function"==typeof g.postMixInProperties&&"function"==typeof g.buildRendering&&"function"==typeof g.postCreate&&"function"==typeof g.startup}(p.widget)&&p.widget.startup(),!E)return void _.appendChild(p.node);const w=Array.prototype.slice.call(_.children);0!==v?v>=w.length?_.appendChild(p.node):(0,lu.Vt)(p.node,w[v]):_.firstChild?(0,lu.Vt)(p.node,_.firstChild):_.appendChild(p.node)}_applyViewPadding(){const g=this.container;g&&cw(g,this._toPxPosition(this._getViewPadding()))}_applyUIPadding(){const g=this._innerContainer;g&&cw(g,this._toPxPosition(this.padding))}_toPxPosition(g){return{top:this._toPxUnit(g.top),left:this._toPxUnit(g.left),right:this._toPxUnit(g.right),bottom:this._toPxUnit(g.bottom)}}_toPxUnit(g){return 0===g?"0":g+"px"}_findByComponent(g){let p,y=null;return this._components.some(v=>(p=v===g,p&&(y=v),p)),y}_findById(g){let p,y=null;return this._components.some(v=>(p=v.id===g,p&&(y=v),p)),y}_findByNode(g){let p,y=null;return this._components.some(v=>(p=v.node===g,p&&(y=v),p)),y}};(0,we._)([(0,Re.Cb)()],Yu.prototype,"container",null),(0,we._)([(0,Re.Cb)()],Yu.prototype,"height",null),(0,we._)([(0,Re.Cb)({value:B8})],Yu.prototype,"padding",null),(0,we._)([(0,fa.p)("padding")],Yu.prototype,"castPadding",null),(0,we._)([(0,Re.Cb)()],Yu.prototype,"view",void 0),(0,we._)([(0,Re.Cb)()],Yu.prototype,"width",null),Yu=(0,we._)([(0,Tr.j)("esri.views.ui.UI")],Yu);const ote=Yu;var ste=C(59213);function U8(g,p){return g&&"copyright"in g&&(!p||"function"==typeof g.originOf&&"user"===g.originOf("copyright"))}function Ov(g,p,y){!y||!p||g.find(v=>v.layerView===p&&v.text===y)||g.push({text:y,layerView:p})}const $c=[];let xf=class extends Lc.r{constructor(g){super(g),this.clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new eo.Z,this.view=null,this._allLayerViewsChange=p=>{this.handles.remove("suspension");const y=this.get("view.allLayerViews");y&&this.handles.add(y.map(v=>v.watch(["suspended","attributionVisible"],this._updateAttributionItems)),"suspension"),p&&p.removed&&p.removed.forEach(v=>{this._pendingAttributions.delete(v),this._fetchedAttributionData.delete(v)}),this._updateAttributionItems()},this._updateAttributionItems=()=>{const p=this.get("view.allLayerViews");$c.length=0,p?(p.forEach(y=>{if(y.suspended||!y.get("layer.attributionVisible"))return;const v=y.layer;if(U8(v,"user"))return void Ov($c,y,v.copyright);if(v.hasAttributionData){if(this._fetchedAttributionData.has(y)){const E=this._fetchedAttributionData.get(y);return void(E?Ov($c,y,this._getDynamicAttribution(E,this.view,v)):U8(v)&&Ov($c,y,v.copyright))}return void this._fetchAttributionData(y)}const _=v.get("portalItem.accessInformation");Ov($c,y,_||v.copyright)}),function ate(g,p){return g.length!==p.length||g.some((y,v)=>y.text!==p[v].text)}(this.items,$c)&&(this.items.removeAll(),this.items.addMany($c)),$c.length=0,this.notifyChange("state")):this.clear()},this.handles.add([(0,Br.on)(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this.clear),(0,Br.Z4)(this,"view.stationary",()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_fetchAttributionData(g){var p=this;return(0,qr.Z)(function*(){if(p._pendingAttributions.has(g))return;p._pendingAttributions.add(g);const y=yield(0,ste.q6)(g.layer.fetchAttributionData());if(p._pendingAttributions.has(g)){const v=y.ok?p._createContributionIndex(y.value,function lte(g){return"bing-maps"===g.type}(g.layer)):null;p._pendingAttributions.delete(g),p._fetchedAttributionData.set(g,v)}p._updateAttributionItems()})()}_createContributionIndex(g,p){const y=g.contributors,v={};if(!y)return v;for(let _=0;_<y.length;_++){const E=y[_],w=E.coverageAreas;if(!w)return;for(const D of w){const O=D.bbox,A=D.zoomMin-(p&&D.zoomMin?1:0),W=D.zoomMax-(p&&D.zoomMax?1:0),_e={extent:(0,iu.$)({xmin:O[1],ymin:O[0],xmax:O[3],ymax:O[2],spatialReference:Oc.Z.WGS84}),attribution:E.attribution||"",score:null!=D.score?D.score:100,id:_};for(let be=A;be<=W;be++)v[be]=v[be]||[],v[be].push(_e)}}return v.maxKey=Math.max.apply(null,Object.keys(v)),v}_getDynamicAttribution(g,p,y){const{extent:v,scale:_}=p;let E=y.tileInfo.scaleToZoom(_);if(E=Math.min(g.maxKey,Math.round(E)),!v||null==E||E<=-1)return"";const w=g[E],D=(0,iu.iV)(v.center.clone().normalize(),p.spatialReference),O={};return w?w.filter(A=>{const W=!O[A.id]&&D&&(0,J2.aV)(A.extent,D);return W&&(O[A.id]=!0),W}).sort((A,W)=>W.score-A.score||A.objectId-W.objectId).map(A=>A.attribution).join(", "):""}};(0,we._)([(0,Re.Cb)({readOnly:!0,type:eo.Z})],xf.prototype,"items",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],xf.prototype,"state",null),(0,we._)([(0,Re.Cb)()],xf.prototype,"view",void 0),xf=(0,we._)([(0,Tr.j)("esri.widgets.Attribution.AttributionViewModel")],xf);const V8=xf;let ea=class extends ns.Z{constructor(g,p){super(g,p),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass="esri-icon-description",this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new V8}initialize(){this.own((0,Br.on)(this,"viewModel.items","change",()=>this.scheduleRender()))}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((g,p)=>(-1===g.indexOf(p.text)&&g.push(p.text),g),[]).join(this.itemDelimiter)}render(){return(0,Bt.u)("div",{bind:this,class:this.classes("esri-attribution esri-widget",{"esri-attribution--open":this._isOpen}),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return(0,Bt.u)("div",{class:"esri-attribution__powered-by"},"Powered by"," ",(0,Bt.u)("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const g=this._isOpen,p=this._isInteractive,y=p?0:-1,{attributionText:v}=this,_=p?"button":void 0;return(0,Bt.u)("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",{"esri-attribution__sources--open":g,"esri-interactive":p}),innerHTML:v,role:_,tabIndex:y})}_afterSourcesNodeCreate(g){this._prevSourceNodeHeight=g.clientWidth}_afterSourcesNodeUpdate(g){let p=!1;const{clientHeight:y,clientWidth:v,scrollWidth:_}=g,E=_>=v,w=this._attributionTextOverflowed!==E;if(this._attributionTextOverflowed=E,w&&(p=!0),this._isOpen){const D=y<this._prevSourceNodeHeight;this._prevSourceNodeHeight=y,D&&(this._isOpen=!1,p=!0)}p&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};(0,we._)([(0,Re.Cb)()],ea.prototype,"_isOpen",void 0),(0,we._)([(0,Re.Cb)()],ea.prototype,"_isInteractive",null),(0,we._)([(0,Re.Cb)()],ea.prototype,"_attributionTextOverflowed",void 0),(0,we._)([(0,Re.Cb)()],ea.prototype,"_prevSourceNodeHeight",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],ea.prototype,"attributionText",null),(0,we._)([(0,Re.Cb)()],ea.prototype,"iconClass",void 0),(0,we._)([(0,Re.Cb)()],ea.prototype,"itemDelimiter",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ea.prototype,"label",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Attribution/t9n/Attribution")],ea.prototype,"messages",void 0),(0,we._)([(0,an.B)("viewModel.view")],ea.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:V8})],ea.prototype,"viewModel",void 0),(0,we._)([(0,Na.h)()],ea.prototype,"_toggleState",null),ea=(0,we._)([(0,Tr.j)("esri.widgets.Attribution")],ea);const ute=ea;let kd=class extends(k2(pi.Z)){constructor(g){super(g),this._handles=new Ra.Z,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add((0,Br.S1)(this,"view",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const g=this.get("view.spatialReference");return!(!g||!g.isWebMercator&&!g.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const g={};"2d"===this.view.type?g.rotation=0:g.heading=0,this.callGoTo({target:g})}_updateForRotation(g){null!=g&&(this.orientation={z:g})}_updateForCamera(g){g&&(this.orientation={x:0,y:0,z:-g.heading})}_updateRotationWatcher(g){this._handles.removeAll(),g&&this._handles.add("2d"===g.type?(0,Br.S1)(this,"view.rotation",this._updateForRotation):(0,Br.S1)(this,"view.camera",this._updateForCamera))}};(0,we._)([(0,Re.Cb)({readOnly:!0})],kd.prototype,"canShowNorth",null),(0,we._)([(0,Re.Cb)()],kd.prototype,"orientation",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],kd.prototype,"state",null),(0,we._)([(0,Re.Cb)()],kd.prototype,"view",void 0),kd=(0,we._)([(0,Tr.j)("esri.widgets.CompassViewModel")],kd);const k8=kd;let du=class extends ns.Z{constructor(g,p){super(g,p),this.goToOverride=null,this.iconClass="esri-icon-locate-circled",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new k8}reset(){return this.viewModel.reset()}render(){const{orientation:g,state:p}=this.viewModel,y="disabled"===p,v="compass"==("rotation"===p?"rotation":"compass"),_=y?-1:0,E={"esri-disabled":y,"esri-interactive":!y},w={"esri-icon-compass":v,"esri-icon-dial":!v},{messages:D}=this;return(0,Bt.u)("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",E),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:_,"aria-label":D.reset,title:D.reset},(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",w),styles:this._toRotationTransform(g)}),(0,Bt.u)("span",{class:"esri-icon-font-fallback-text"},D.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(g){return{transform:`rotateZ(${g.z}deg)`}}};(0,we._)([(0,an.B)("viewModel.goToOverride")],du.prototype,"goToOverride",void 0),(0,we._)([(0,Re.Cb)()],du.prototype,"iconClass",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],du.prototype,"label",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Compass/t9n/Compass")],du.prototype,"messages",void 0),(0,we._)([(0,an.B)("viewModel.view")],du.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:k8})],du.prototype,"viewModel",void 0),(0,we._)([(0,Na.h)()],du.prototype,"_reset",null),du=(0,we._)([(0,Tr.j)("esri.widgets.Compass")],du);const dte=du;let Df=class extends pi.Z{constructor(g){super(g),this._handles=new Ra.Z,this.navigationMode="pan",this.view=null}initialize(){this._handles.add((0,Br.gx)(this,"view.inputManager",this._setNavigationMode.bind(this)))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};(0,we._)([(0,Re.Cb)({readOnly:!0})],Df.prototype,"state",null),(0,we._)([(0,Re.Cb)()],Df.prototype,"navigationMode",void 0),(0,we._)([(0,Re.Cb)()],Df.prototype,"view",void 0),Df=(0,we._)([(0,Tr.j)("esri.widgets.NavigationToggleViewModel")],Df);const W8=Df,il_button="esri-navigation-toggle__button esri-widget--button";let hu=class extends ns.Z{constructor(g,p){super(g,p),this.iconClass="esri-icon-pan2",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new W8}set layout(g){"horizontal"!==g&&(g="vertical"),this._set("layout",g)}toggle(){return this.viewModel.toggle()}render(){const g="disabled"===this.get("viewModel.state"),p="pan"===this.get("viewModel.navigationMode"),v={"esri-navigation-toggle__button--active":p},_={"esri-navigation-toggle__button--active":!p},E=g?-1:0,w=this.messages.toggle;return(0,Bt.u)("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{"esri-disabled":g,"esri-navigation-toggle--horizontal":"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:E,"aria-label":w,title:w},(0,Bt.u)("div",{class:this.classes(il_button,"esri-navigation-toggle__button--pan",v)},(0,Bt.u)("span",{class:"esri-icon-pan"})),(0,Bt.u)("div",{class:this.classes(il_button,"esri-navigation-toggle__button--rotate",_)},(0,Bt.u)("span",{class:"esri-icon-rotate"})))}_toggle(){this.toggle()}};(0,we._)([(0,Re.Cb)()],hu.prototype,"iconClass",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],hu.prototype,"label",void 0),(0,we._)([(0,Re.Cb)({value:"vertical"})],hu.prototype,"layout",null),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],hu.prototype,"messages",void 0),(0,we._)([(0,an.B)("viewModel.view")],hu.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:W8})],hu.prototype,"viewModel",void 0),(0,we._)([(0,Na.h)()],hu.prototype,"_toggle",null),hu=(0,we._)([(0,Tr.j)("esri.widgets.NavigationToggle")],hu);const hte=hu;let Gc=class extends ns.Z{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const g=this.enabled?0:-1,y={[this.iconClass]:!!this.iconClass};return(0,Bt.u)("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{"esri-disabled":!this.enabled,"esri-interactive":this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:g,title:this.title},(0,Bt.u)("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",y)}),(0,Bt.u)("span",{class:"esri-icon-font-fallback-text"},this.title))}_triggerAction(){this.action.call(this)}};(0,we._)([(0,Re.Cb)()],Gc.prototype,"action",void 0),(0,we._)([(0,Re.Cb)()],Gc.prototype,"enabled",void 0),(0,we._)([(0,Re.Cb)()],Gc.prototype,"iconClass",void 0),(0,we._)([(0,Re.Cb)()],Gc.prototype,"title",void 0),(0,we._)([(0,Na.h)()],Gc.prototype,"_triggerAction",null),Gc=(0,we._)([(0,Tr.j)("esri.widgets.IconButton")],Gc);const Z8=Gc;let Sf=class extends pi.Z{get canZoomIn(){if(!this.get("view.ready"))return!1;const g=this.get("view.animation.target.scale")||this.get("view.scale"),p=this.get("view.constraints.effectiveMaxScale");return 0===p||g>p}get canZoomOut(){if(!this.get("view.ready"))return!1;const g=this.get("view.animation.target.scale")||this.get("view.scale"),p=this.get("view.constraints.effectiveMinScale");return 0===p||g<p}};(0,we._)([(0,Re.Cb)({readOnly:!0})],Sf.prototype,"canZoomIn",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Sf.prototype,"canZoomOut",null),(0,we._)([(0,Re.Cb)()],Sf.prototype,"view",void 0),Sf=(0,we._)([(0,Tr.j)("esri.widgets.Zoom.ZoomConditions2D")],Sf);const fte=Sf;let Of=class extends pi.Z{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};(0,we._)([(0,Re.Cb)({readOnly:!0})],Of.prototype,"canZoomIn",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Of.prototype,"canZoomOut",null),(0,we._)([(0,Re.Cb)()],Of.prototype,"view",void 0),Of=(0,we._)([(0,Tr.j)("esri.widgets.Zoom.ZoomConditions3D")],Of);const pte=Of;let Hc=class extends pi.Z{constructor(g){super(g),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(g){g?"2d"===g.type?this._zoomConditions=new fte({view:g}):"3d"===g.type&&(this._zoomConditions=new pte({view:g})):this._zoomConditions=null,this._set("view",g)}zoomIn(){if(!this.canZoomIn)return;const g=this.view;"2d"===g.type?g.mapViewNavigation.zoomIn():(0,ni.R8)(g.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const g=this.view;"2d"===g.type?g.mapViewNavigation.zoomOut():(0,ni.R8)(g.goTo({zoomFactor:.5}))}};(0,we._)([(0,Re.Cb)()],Hc.prototype,"_zoomConditions",void 0),(0,we._)([(0,Re.Cb)({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Hc.prototype,"canZoomIn",void 0),(0,we._)([(0,Re.Cb)({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Hc.prototype,"canZoomOut",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Hc.prototype,"state",null),(0,we._)([(0,Re.Cb)()],Hc.prototype,"view",null),Hc=(0,we._)([(0,Tr.j)("esri.widgets.Zoom.ZoomViewModel")],Hc);const $8=Hc;let Ju=class extends ns.Z{constructor(g,p){super(g,p),this.iconClass="esri-icon-zoom-in-magnifying-glass",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new $8}initialize(){this._zoomInButton=new Z8({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"}),this._zoomOutButton=new Z8({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(g){"horizontal"!==g&&(g="vertical"),this._set("layout",g)}render(){const g=this.viewModel,p={"esri-zoom--horizontal":"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===g.state&&g.canZoomIn,this._zoomOutButton.enabled="ready"===g.state&&g.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,(0,Bt.u)("div",{class:this.classes("esri-zoom esri-widget",p)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};(0,we._)([(0,Re.Cb)()],Ju.prototype,"iconClass",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ju.prototype,"label",void 0),(0,we._)([(0,Re.Cb)({value:"vertical"})],Ju.prototype,"layout",null),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Zoom/t9n/Zoom")],Ju.prototype,"messages",void 0),(0,we._)([(0,an.B)("viewModel.view")],Ju.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:$8})],Ju.prototype,"viewModel",void 0),Ju=(0,we._)([(0,Tr.j)("esri.widgets.Zoom")],Ju);const mte=Ju,K8="esri.views.ui.DefaultUI";Eo.Z.getLogger(K8);let Iv=class extends ote{constructor(g){super(g),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[]}initialize(){this._handles.add([(0,Br.S1)(this,"components",this._componentsWatcher.bind(this)),(0,Br.S1)(this,"view",this._updateViewAwareWidgets.bind(this))])}_add(g,p,y,v){if("string"==typeof g&&this._defaultPositionLookup[g]){if(this._find(g))return;g=this._createComponent(g)}super._add(g,p,y,v)}_removeComponents(g){g.forEach(p=>{const y=this._find(p);y&&(this.remove(y),y.destroy())})}_updateViewAwareWidgets(g){this.components.forEach(p=>{const y=this._find(p),v=y&&y.widget;(function gte(g){return g&&void 0!==g.view})(v)&&(v.view=g)})}_componentsWatcher(g,p){this._removeComponents(p),this._addComponents(g),this._adjustPadding(g)}_adjustPadding(g){if(-1===g.indexOf("attribution")&&!this._isOverridden("padding")){const{top:p}=this.padding;this.padding=p}}_addComponents(g){this.initialized&&g.forEach(p=>this.add(this._createComponent(p),this._defaultPositionLookup[p]))}_createComponent(g){const p=this._createWidget(g);if(p)return new Sv({id:g,node:p})}_createWidget(g){return"attribution"===g?this._createAttribution():"compass"===g?this._createCompass():"navigation-toggle"===g?this._createNavigationToggle():"zoom"===g?this._createZoom():void 0}_createAttribution(){return new ute({view:this.view})}_createCompass(){return new dte({view:this.view})}_createNavigationToggle(){return new hte({view:this.view})}_createZoom(){return new mte({view:this.view})}};(0,we._)([(0,Re.Cb)()],Iv.prototype,"components",void 0),Iv=(0,we._)([(0,Tr.j)(K8)],Iv);const yte=Iv;let Tv=class extends yte{constructor(g){super(g),this.components=["attribution","zoom"]}};(0,we._)([(0,Re.Cb)()],Tv.prototype,"components",void 0),Tv=(0,we._)([(0,Tr.j)("esri.views.ui.2d.DefaultUI2D")],Tv);const z8=Tv,vte=Eo.Z.getLogger("esri.views.MapView");let G8,H8,Y8,J8,X8,Q8;function dw(){return dw=(0,qr.Z)(function*(){const[,{GraphicsView2D:g,GraphicContainer:p,LabelManager:y,MapViewNavigation:v,MagnifierView2D:_,Stage:E}]=yield Promise.all([Promise.all([C.e(3070),C.e(8592),C.e(4266)]).then(C.bind(C,14266)),Promise.all([C.e(7692),C.e(3755),C.e(3070),C.e(5024),C.e(4589),C.e(3751),C.e(5909),C.e(4175),C.e(3997),C.e(4522),C.e(1619),C.e(1572),C.e(4056),C.e(8773),C.e(8592),C.e(9510)]).then(C.bind(C,39510))]);H8=g,Y8=p,J8=y,X8=v,Q8=_,G8=E}),dw.apply(this,arguments)}let ps=class extends(fX(xq(fee))){constructor(g){super(g),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Qh.Z({getCollections:()=>{var p,y;return[null==(p=this.basemapView)?void 0:p.baseLayerViews,this.layerViews,null==(y=this.basemapView)?void 0:y.referenceLayerViews]},getChildrenFunction:()=>null}),this.floors=new eo.Z,this.graphicsView=null,this.highlightOptions=new N8,this.inputManager=new Yee({view:this}),this.mapViewNavigation=null,this.supersampleScreenshotsEnabled=!1,this.ui=new z8,this.rendering=!1,(0,dX.j2)()}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get background(){return this.get("map.initialViewProperties.background")||null}set background(g){void 0===g?this._clearOverride("background"):this._override("background",g)}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(g){if(o8(g)){const p=i8(this,g);return super.toMap(p)}return super.toMap(g)}hitTest(g,p){var y=this;return(0,qr.Z)(function*(){const v=o8(g)?i8(y,g):g;if(!y.ready||isNaN(v.x)||isNaN(v.y))return{screenPoint:v,results:[]};let _=new Set,E=!1,w=null,D=null;null!=p&&p.include?t6(p.include,e6(y,q=>_.add(q),q=>{w||(w=new Set),w.add(q)},q=>_.add(q),()=>E=!0)):(E=!0,_=new Set(y.allLayerViews)),null!=p&&p.exclude&&t6(p.exclude,e6(y,q=>_.delete(q),q=>{D||(D=new Set),D.add(q)}));const O=y.allLayerViews.filter(q=>!q.suspended&&_.has(q)).reverse(),A=y.toMap(v);let W=(yield Promise.all([E?y.graphicsView.hitTest(A):null,...O.map(q=>q.hitTest(A,v))])).filter(dr.pC).flat();return w&&(W=W.filter(q=>w.has(hw(q)))),D&&(W=W.filter(q=>!D.has(hw(q)))),{screenPoint:v,results:W.map(q=>({mapPoint:A,graphic:q}))}})()}takeScreenshot(g){g=g||{};const p=this.supersampleScreenshotsEnabled?Math.min(4,(0,F8.RZ)(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let y;g.layers?(y=[],g.layers.forEach(w=>{const D=this.allLayerViews.find(O=>O.layer.id===w.id);D&&"container"in D&&D.container&&y.push(D.container)})):y=this._stage.children;const{format:v,quality:_}=(0,F8.LI)(g.format,g.quality),E=function Xee(g,p,y,v,_,E,w,D){let O;g.ignorePadding&&(v={left:0,right:0,top:0,bottom:0}),null!=g.width&&null!=g.height?O=[g.width,g.height]:null==g.width&&null!=g.height?O=[g.height,g.height]:null!=g.width&&null==g.height?O=[g.width,g.width]:null==g.width&&null==g.height&&(O=null);const A=y[0]-(v.left+v.right),W=y[1]-(v.top+v.bottom);let q,_e,be=g.area||{x:0,y:0,width:A,height:W};if(O){const qe=O[0]/O[1];if(qe>A/W){const dt=be.width/qe;be={x:be.x,y:Math.round(be.y+(be.height-dt)/2),width:be.width,height:Math.round(dt)}}else{const dt=be.height*qe;be={x:Math.round(be.x+(be.width-dt)/2),y:be.y,width:Math.round(dt),height:be.height}}}else O=[be.width,be.height];return O[0]>be.width?(q=Math.min(O[0]/be.width,p),_e=O[0]/be.width/q):(q=1,_e=O[0]/be.width),{resolutionScale:q,cropArea:{x:Math.round((be.x+v.left)*q),y:Math.round((be.y+v.top)*q),width:Math.round(be.width*q),height:Math.round(be.height*q)},outputScale:_e,format:_,quality:E,children:w,rotation:D}}(g,p,this.size,this.padding,v,_,y,g.rotation);return this._stage.takeScreenshot(E)}on(g,p,y,v){return this.inputManager&&this.viewEvents.on(g,p,y,v)||super.on(g,p)}hasEventListener(g){return super.hasEventListener(g)||this.viewEvents.hasHandler(g)}whenLayerView(g){return super.whenLayerView(g)}graphicChanged(g){this.graphicsView&&this.graphicsView.graphicUpdateHandler(g)}whenReady(){return new Promise(g=>{this.ready?g(this):this._resolveWhenReady.push(g)})}forceDOMReadyCycle(){this.forceReadyCycle()}validate(){let g=function ete(g){g=Ot(Ot({},qee),g);const p=(0,Qee.Z)();return p.available?g.checkMajorWebPerformanceCaveat&&p.majorPerformanceCaveat?new sn.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):p.supportsHighPrecisionFragment?p.supportsVertexShaderSamplers?p.supportsElementIndexUint?p.supportsStandardDerivatives?p.supportsInstancedArrays?null:new sn.Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new sn.Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new sn.Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new sn.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new sn.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new sn.Z("webgl:required","WebGL is required but not supported.")}({checkMajorWebPerformanceCaveat:!1});return(0,Dc.Z)("safari")&&(0,Dc.Z)("safari")<9&&(g=new sn.Z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,Dc.Z)("safari")})),(0,dr.pC)(g)?(vte.warn("#validate()",g.message),Promise.reject(g)):function _te(){return dw.apply(this,arguments)}()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const p=new G8(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),y=new H8({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Y8(this.featuresTilingScheme)}),v=new X8({view:this,animationManager:this.animationManager}),_=new J8({view:this});this._magnifierView=new Q8,this._magnifierView.magnifier=this.magnifier,this._stage=p,this.frameTask.graphicsView=y,this._set("graphicsView",y),this._set("mapViewNavigation",v),this._set("labelManager",_),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),p.on("post-render",()=>this._set("rendering",p.renderRequested)),p.on("will-render",()=>this._set("rendering",p.renderRequested)),p.on("webgl-error",w=>this.fatalError=w.error),(0,Br.S1)(this,"stationary",w=>p.stationary=w,!0),(0,Br.S1)(this,"state.id",()=>p.state=this.state,!0),(0,Br.S1)(this,"background",w=>{p.background=w,this._magnifierView.background=w},!0),(0,Br.S1)(this,"magnifier",w=>this._magnifierView.magnifier=w,!0),(0,Br.S1)(this,"renderingOptions",w=>p.renderingOptions=w,!0),(0,Br.S1)(this,"highlightOptions",()=>p.highlightOptions=this.highlightOptions,!0)],"map-view"),p.state=this.state,this._updateStageChildren();const E=this._resolveWhenReady;this._resolveWhenReady=[],E.forEach(w=>w(this)),this.timeline.end("MapView Startup")}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown()}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(p=>{this._stage.addChild(p.container)}),this._stage.addChild(this.graphicsView.container),this._stage.addChild(this._magnifierView)}};(0,we._)([(0,Re.Cb)({type:Gy})],ps.prototype,"background",null),(0,we._)([(0,Re.Cb)()],ps.prototype,"floors",void 0),(0,we._)([(0,Re.Cb)()],ps.prototype,"graphicsView",void 0),(0,we._)([(0,Re.Cb)({type:N8})],ps.prototype,"highlightOptions",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ps.prototype,"inputManager",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ps.prototype,"resourceManager",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ps.prototype,"textureManager",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],ps.prototype,"mapViewNavigation",void 0),(0,we._)([(0,Re.Cb)({type:Boolean})],ps.prototype,"navigating",null),(0,we._)([(0,Re.Cb)({type:Boolean,constructOnly:!0})],ps.prototype,"supersampleScreenshotsEnabled",void 0),(0,we._)([(0,Re.Cb)({type:z8})],ps.prototype,"ui",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],ps.prototype,"rendering",void 0),(0,we._)([(0,Re.Cb)({constructOnly:!0})],ps.prototype,"renderCanvas",void 0),(0,we._)([(0,Re.Cb)({constructOnly:!0})],ps.prototype,"deactivatedWebGLExtensions",void 0),(0,we._)([(0,Re.Cb)({constructOnly:!0})],ps.prototype,"debugWebGLExtensions",void 0),ps=(0,we._)([(0,Tr.j)("esri.views.MapView")],ps);const q8=ps;function hw(g){const p=g.getObjectId();var y,v,_,E;return p?`${null!=(y=null!=(v=null==(_=g.layer)?void 0:_.uid)?v:null==(E=g.sourceLayer)?void 0:E.uid)?y:"MapView"}/${p}`:`"MapView/${g.uid}`}function e6(g,p,y,v,_){return E=>{if(E instanceof hf.Z){if(E.layer===g)null==_||_();else{const w=g.allLayerViews.find(D=>D.layer===E.layer);w&&(null==v||v(w))}y(hw(E))}else{const w=g.allLayerViews.find(D=>D.layer===E);w&&p(w)}}}function t6(g,p){if(g)if((0,G3.TW)(g))for(const y of g)if((0,G3.TW)(y))for(const v of y)p(v);else p(y);else p(g)}let Yc=class extends pi.Z{constructor(g){super(g)}get editedBookmark(){const{bookmark:g}=this;return g?this._get("editedBookmark")||g.clone():null}get state(){return this._get("state")}set state(g){this.validationState=void 0,this.loading=void 0,this._set("state",g)}};(0,we._)([(0,Re.Cb)()],Yc.prototype,"bookmark",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Yc.prototype,"editedBookmark",null),(0,we._)([(0,Re.Cb)()],Yc.prototype,"state",null),(0,we._)([(0,Re.Cb)()],Yc.prototype,"validationState",void 0),(0,we._)([(0,Re.Cb)()],Yc.prototype,"loading",void 0),Yc=(0,we._)([(0,Tr.j)("esri.widgets.Bookmarks.UserState")],Yc);const fw=Yc,r6="esri.widgets.Bookmarks.BookmarksViewModel",j0=Eo.Z.getLogger(r6),n6=eo.Z.ofType(YC),Ete={width:128,height:128,format:"png"},Av={takeScreenshot:!0,captureViewpoint:!0,captureRotation:!0,captureScale:!0,captureTimeExtent:!0},i6={time:!0};let Pl=class extends(k2(qh.Z.EventedAccessor)){constructor(g){super(g),this.abilities=Ot({},i6),this.activeBookmark=null}destroy(){this.view=null,this._set("activeBookmark",null)}castAbilities(g){return Ot(Ot({},i6),g)}set bookmarks(g){void 0!==g?this._override("bookmarks",g):this._clearOverride("bookmarks")}get bookmarks(){return this.get("view.map.bookmarks")||new n6}set defaultCreateOptions(g){this._set("defaultCreateOptions",Ot(Ot({},Av),g))}get defaultCreateOptions(){return Av}set defaultEditOptions(g){this._set("defaultEditOptions",Ot(Ot({},Av),g))}get defaultEditOptions(){return Av}get state(){const g=this.get("view");return g&&!g.ready?"loading":"ready"}get view(){return this._get("view")}set view(g){g&&"2d"!==g.type&&j0.error(new sn.Z("view:invalid-view","SceneView is not supported",{view:g})),this._set("view",g)}createBookmark(g){var p=this;return(0,qr.Z)(function*(){const{view:y,defaultCreateOptions:v,abilities:_}=p;if(!y){const be=new sn.Z("create-bookmark:invalid-view","Cannot create a bookmark without a view.");return j0.error(be),Promise.reject(be)}const{takeScreenshot:E,screenshotSettings:w,captureViewpoint:D,captureRotation:O,captureScale:A,captureTimeExtent:W}=Ot(Ot({},v),g),q=E?yield p._createThumbnail(w):void 0,_e=_.time&&W&&(0,dr.pC)(y.timeExtent)?y.timeExtent.clone():void 0;return new YC(Ot(Ot(Ot({},q&&{thumbnail:q}),W&&{timeExtent:_e}),D&&{viewpoint:p._createViewpoint({view:y,captureScale:A,captureRotation:O})}))})()}editBookmark(g,p){var y=this;return(0,qr.Z)(function*(){const{view:v,defaultEditOptions:_}=y;if(!v){const _e=new sn.Z("edit-bookmark:invalid-view","Cannot edit a bookmark without a view.");return j0.error(_e),Promise.reject(_e)}const{takeScreenshot:E,screenshotSettings:w,captureViewpoint:D,captureRotation:O,captureScale:A,captureTimeExtent:W}=Ot(Ot({},_),p),q=E?yield y._createThumbnail(w):void 0;return q&&(g.thumbnail=q),D&&(g.viewpoint=y._createViewpoint({view:v,captureScale:A,captureRotation:O})),W&&(0,dr.pC)(v.timeExtent)&&(g.timeExtent=v.timeExtent.clone()),y.emit("bookmark-edit",{bookmark:g}),g})()}goTo(g){const{abilities:p,view:y}=this;if(!y){const D=new sn.Z("go-to:invalid-view","Cannot go to a bookmark without a view");return j0.error(D),Promise.reject(D)}const v=null==g?void 0:g.viewpoint;if(!v){const D=new sn.Z("go-to:invalid-bookmark","Cannot go to a bookmark that does not contain a 'viewpoint'.",{bookmark:g});return j0.error(D),Promise.reject(D)}this._set("activeBookmark",g);const E=this.callGoTo({target:v}),w=null==g?void 0:g.timeExtent;return p.time&&w&&(y.timeExtent=w),this.emit("bookmark-select",{bookmark:g}),E.catch(()=>{}).then(()=>this._set("activeBookmark",null)),E}_createThumbnail(g){var p=this;return(0,qr.Z)(function*(){const y=yield p.view.takeScreenshot(Ot(Ot({},Ete),g));return new df({url:y.dataUrl})})()}_createViewpoint({view:g,captureRotation:p,captureScale:y}){var v,_;const E=null==(v=g.viewpoint)?void 0:v.clone();return new Qs.Z({targetGeometry:null==(_=g.extent)?void 0:_.clone(),rotation:p&&(null==E?void 0:E.rotation)||0,scale:y&&(null==E?void 0:E.scale)||0})}};(0,we._)([(0,Re.Cb)()],Pl.prototype,"abilities",void 0),(0,we._)([(0,fa.p)("abilities")],Pl.prototype,"castAbilities",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Pl.prototype,"activeBookmark",void 0),(0,we._)([(0,Re.Cb)({type:n6})],Pl.prototype,"bookmarks",null),(0,we._)([(0,Re.Cb)()],Pl.prototype,"defaultCreateOptions",null),(0,we._)([(0,Re.Cb)()],Pl.prototype,"defaultEditOptions",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Pl.prototype,"state",null),(0,we._)([(0,Re.Cb)({value:null})],Pl.prototype,"view",null),Pl=(0,we._)([(0,Tr.j)(r6)],Pl);const o6=Pl;var Pv;let ol=Pv=class extends pi.Z{constructor(g){super(g),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(g){return g?g.map(p=>p instanceof Pv?p:new Pv(p)):null}};(0,we._)([(0,Re.Cb)()],ol.prototype,"autoCloseMenu",void 0),(0,we._)([(0,Re.Cb)()],ol.prototype,"iconClass",void 0),(0,we._)([(0,Re.Cb)()],ol.prototype,"items",void 0),(0,we._)([(0,fa.p)("items")],ol.prototype,"castItems",null),(0,we._)([(0,Re.Cb)()],ol.prototype,"label",void 0),(0,we._)([(0,Re.Cb)()],ol.prototype,"open",void 0),(0,we._)([(0,Re.Cb)()],ol.prototype,"selected",void 0),(0,we._)([(0,Re.Cb)()],ol.prototype,"selectionEnabled",void 0),(0,we._)([(0,Re.Cb)()],ol.prototype,"clickFunction",void 0),ol=Pv=(0,we._)([(0,Tr.j)("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],ol);const B0=ol;let If=class extends pi.Z{constructor(g){super(g),this.items=null,this.open=!1}castItems(g){return g?g.map(p=>p instanceof B0?p:new B0(p)):null}};(0,we._)([(0,Re.Cb)()],If.prototype,"items",void 0),(0,we._)([(0,fa.p)("items")],If.prototype,"castItems",null),(0,we._)([(0,Re.Cb)()],If.prototype,"open",void 0),If=(0,we._)([(0,Tr.j)("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],If);const bte=If;function Tf(g,p){void 0===p&&(p=!1);var y=g.getBoundingClientRect();return{width:y.width/1,height:y.height/1,top:y.top/1,right:y.right/1,bottom:y.bottom/1,left:y.left/1,x:y.left/1,y:y.top/1}}function Rl(g){if(null==g)return window;if("[object Window]"!==g.toString()){var p=g.ownerDocument;return p&&p.defaultView||window}return g}function pw(g){var p=Rl(g);return{scrollLeft:p.pageXOffset,scrollTop:p.pageYOffset}}function U0(g){return g instanceof Rl(g).Element||g instanceof Element}function sl(g){return g instanceof Rl(g).HTMLElement||g instanceof HTMLElement}function s6(g){return"undefined"!=typeof ShadowRoot&&(g instanceof Rl(g).ShadowRoot||g instanceof ShadowRoot)}function fu(g){return g?(g.nodeName||"").toLowerCase():null}function Jc(g){return((U0(g)?g.ownerDocument:g.document)||window.document).documentElement}function mw(g){return Tf(Jc(g)).left+pw(g).scrollLeft}function Xu(g){return Rl(g).getComputedStyle(g)}function gw(g){var p=Xu(g);return/auto|scroll|overlay|hidden/.test(p.overflow+p.overflowY+p.overflowX)}function xte(g,p,y){void 0===y&&(y=!1);var v=sl(p),_=sl(p)&&function Mte(g){var p=g.getBoundingClientRect();return 1!==(p.width/g.offsetWidth||1)||1!==(p.height/g.offsetHeight||1)}(p),E=Jc(p),w=Tf(g,_),D={scrollLeft:0,scrollTop:0},O={x:0,y:0};return(v||!v&&!y)&&(("body"!==fu(p)||gw(E))&&(D=function wte(g){return g!==Rl(g)&&sl(g)?function Cte(g){return{scrollLeft:g.scrollLeft,scrollTop:g.scrollTop}}(g):pw(g)}(p)),sl(p)?((O=Tf(p,!0)).x+=p.clientLeft,O.y+=p.clientTop):E&&(O.x=mw(E))),{x:w.left+D.scrollLeft-O.x,y:w.top+D.scrollTop-O.y,width:w.width,height:w.height}}function yw(g){var p=Tf(g),y=g.offsetWidth,v=g.offsetHeight;return Math.abs(p.width-y)<=1&&(y=p.width),Math.abs(p.height-v)<=1&&(v=p.height),{x:g.offsetLeft,y:g.offsetTop,width:y,height:v}}function Rv(g){return"html"===fu(g)?g:g.assignedSlot||g.parentNode||(s6(g)?g.host:null)||Jc(g)}function a6(g){return["html","body","#document"].indexOf(fu(g))>=0?g.ownerDocument.body:sl(g)&&gw(g)?g:a6(Rv(g))}function V0(g,p){var y;void 0===p&&(p=[]);var v=a6(g),_=v===(null==(y=g.ownerDocument)?void 0:y.body),E=Rl(v),w=_?[E].concat(E.visualViewport||[],gw(v)?v:[]):v,D=p.concat(w);return _?D:D.concat(V0(Rv(w)))}function Dte(g){return["table","td","th"].indexOf(fu(g))>=0}function l6(g){return sl(g)&&"fixed"!==Xu(g).position?g.offsetParent:null}function k0(g){for(var p=Rl(g),y=l6(g);y&&Dte(y)&&"static"===Xu(y).position;)y=l6(y);return y&&("html"===fu(y)||"body"===fu(y)&&"static"===Xu(y).position)?p:y||function Ste(g){var p=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&sl(g)&&"fixed"===Xu(g).position)return null;for(var _=Rv(g);sl(_)&&["html","body"].indexOf(fu(_))<0;){var E=Xu(_);if("none"!==E.transform||"none"!==E.perspective||"paint"===E.contain||-1!==["transform","perspective"].indexOf(E.willChange)||p&&"filter"===E.willChange||p&&E.filter&&"none"!==E.filter)return _;_=_.parentNode}return null}(g)||p}var ja="top",al="bottom",ll="right",Ba="left",vw="auto",W0=[ja,al,ll,Ba],Af="start",Z0="end",u6="viewport",$0="popper",c6=W0.reduce(function(g,p){return g.concat([p+"-"+Af,p+"-"+Z0])},[]),d6=[].concat(W0,[vw]).reduce(function(g,p){return g.concat([p,p+"-"+Af,p+"-"+Z0])},[]),Ute=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Vte(g){var p=new Map,y=new Set,v=[];function _(E){y.add(E.name),[].concat(E.requires||[],E.requiresIfExists||[]).forEach(function(D){if(!y.has(D)){var O=p.get(D);O&&_(O)}}),v.push(E)}return g.forEach(function(E){p.set(E.name,E)}),g.forEach(function(E){y.has(E.name)||_(E)}),v}function Wte(g){var p;return function(){return p||(p=new Promise(function(y){Promise.resolve().then(function(){p=void 0,y(g())})})),p}}var h6={placement:"bottom",modifiers:[],strategy:"absolute"};function f6(){for(var g=arguments.length,p=new Array(g),y=0;y<g;y++)p[y]=arguments[y];return!p.some(function(v){return!(v&&"function"==typeof v.getBoundingClientRect)})}function $te(g){void 0===g&&(g={});var y=g.defaultModifiers,v=void 0===y?[]:y,_=g.defaultOptions,E=void 0===_?h6:_;return function(D,O,A){void 0===A&&(A=E);var W={placement:"bottom",orderedModifiers:[],options:Object.assign({},h6,E),modifiersData:{},elements:{reference:D,popper:O},attributes:{},styles:{}},q=[],_e=!1,be={state:W,setOptions:function(gt){var lt="function"==typeof gt?gt(W.options):gt;qe(),W.options=Object.assign({},E,W.options,lt),W.scrollParents={reference:U0(D)?V0(D):D.contextElement?V0(D.contextElement):[],popper:V0(O)};var Tt=function kte(g){var p=Vte(g);return Ute.reduce(function(y,v){return y.concat(p.filter(function(_){return _.phase===v}))},[])}(function Zte(g){var p=g.reduce(function(y,v){var _=y[v.name];return y[v.name]=_?Object.assign({},_,v,{options:Object.assign({},_.options,v.options),data:Object.assign({},_.data,v.data)}):v,y},{});return Object.keys(p).map(function(y){return p[y]})}([].concat(v,W.options.modifiers)));return W.orderedModifiers=Tt.filter(function(Mn){return Mn.enabled}),function We(){W.orderedModifiers.forEach(function(dt){var lt=dt.options,Rt=dt.effect;if("function"==typeof Rt){var Xt=Rt({state:W,name:dt.name,instance:be,options:void 0===lt?{}:lt});q.push(Xt||function(){})}})}(),be.update()},forceUpdate:function(){if(!_e){var gt=W.elements,lt=gt.reference,Tt=gt.popper;if(f6(lt,Tt)){W.rects={reference:xte(lt,k0(Tt),"fixed"===W.options.strategy),popper:yw(Tt)},W.reset=!1,W.placement=W.options.placement,W.orderedModifiers.forEach(function(Mn){return W.modifiersData[Mn.name]=Object.assign({},Mn.data)});for(var Xt=0;Xt<W.orderedModifiers.length;Xt++)if(!0!==W.reset){var ur=W.orderedModifiers[Xt],_r=ur.fn,Ur=ur.options;"function"==typeof _r&&(W=_r({state:W,options:void 0===Ur?{}:Ur,name:ur.name,instance:be})||W)}else W.reset=!1,Xt=-1}}},update:Wte(function(){return new Promise(function(dt){be.forceUpdate(),dt(W)})}),destroy:function(){qe(),_e=!0}};if(!f6(D,O))return be;function qe(){q.forEach(function(dt){return dt()}),q=[]}return be.setOptions(A).then(function(dt){!_e&&A.onFirstUpdate&&A.onFirstUpdate(dt)}),be}}var Lv={passive:!0};const zte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Kte(g){var p=g.state,y=g.instance,v=g.options,_=v.scroll,E=void 0===_||_,w=v.resize,D=void 0===w||w,O=Rl(p.elements.popper),A=[].concat(p.scrollParents.reference,p.scrollParents.popper);return E&&A.forEach(function(W){W.addEventListener("scroll",y.update,Lv)}),D&&O.addEventListener("resize",y.update,Lv),function(){E&&A.forEach(function(W){W.removeEventListener("scroll",y.update,Lv)}),D&&O.removeEventListener("resize",y.update,Lv)}},data:{}};function pu(g){return g.split("-")[0]}function Pf(g){return g.split("-")[1]}function _w(g){return["top","bottom"].indexOf(g)>=0?"x":"y"}function p6(g){var O,p=g.reference,y=g.element,v=g.placement,_=v?pu(v):null,E=v?Pf(v):null,w=p.x+p.width/2-y.width/2,D=p.y+p.height/2-y.height/2;switch(_){case ja:O={x:w,y:p.y-y.height};break;case al:O={x:w,y:p.y+p.height};break;case ll:O={x:p.x+p.width,y:D};break;case Ba:O={x:p.x-y.width,y:D};break;default:O={x:p.x,y:p.y}}var A=_?_w(_):null;if(null!=A){var W="y"===A?"height":"width";switch(E){case Af:O[A]=O[A]-(p[W]/2-y[W]/2);break;case Z0:O[A]=O[A]+(p[W]/2-y[W]/2)}}return O}const Hte={name:"popperOffsets",enabled:!0,phase:"read",fn:function Gte(g){var p=g.state;p.modifiersData[g.name]=p6({reference:p.rects.reference,element:p.rects.popper,strategy:"absolute",placement:p.placement})},data:{}};var Xc=Math.max,K0=Math.min,Nv=Math.round,Yte={top:"auto",right:"auto",bottom:"auto",left:"auto"};function m6(g){var p,y=g.popper,v=g.popperRect,_=g.placement,E=g.variation,w=g.offsets,D=g.position,O=g.gpuAcceleration,A=g.adaptive,W=g.roundOffsets,q=!0===W?function Jte(g){var y=g.y,_=window.devicePixelRatio||1;return{x:Nv(Nv(g.x*_)/_)||0,y:Nv(Nv(y*_)/_)||0}}(w):"function"==typeof W?W(w):w,_e=q.x,be=void 0===_e?0:_e,We=q.y,qe=void 0===We?0:We,dt=w.hasOwnProperty("x"),gt=w.hasOwnProperty("y"),lt=Ba,Tt=ja,Rt=window;if(A){var Xt=k0(y),ur="clientHeight",_r="clientWidth";Xt===Rl(y)&&"static"!==Xu(Xt=Jc(y)).position&&"absolute"===D&&(ur="scrollHeight",_r="scrollWidth"),Xt=Xt,(_===ja||(_===Ba||_===ll)&&E===Z0)&&(Tt=al,qe-=Xt[ur]-v.height,qe*=O?1:-1),(_===Ba||(_===ja||_===al)&&E===Z0)&&(lt=ll,be-=Xt[_r]-v.width,be*=O?1:-1)}var $r,Ur=Object.assign({position:D},A&&Yte);return Object.assign({},Ur,O?(($r={})[Tt]=gt?"0":"",$r[lt]=dt?"0":"",$r.transform=(Rt.devicePixelRatio||1)<=1?"translate("+be+"px, "+qe+"px)":"translate3d("+be+"px, "+qe+"px, 0)",$r):((p={})[Tt]=gt?qe+"px":"",p[lt]=dt?be+"px":"",p.transform="",p))}const Qte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Xte(g){var p=g.state,y=g.options,v=y.gpuAcceleration,_=void 0===v||v,E=y.adaptive,w=void 0===E||E,D=y.roundOffsets,O=void 0===D||D,W={placement:pu(p.placement),variation:Pf(p.placement),popper:p.elements.popper,popperRect:p.rects.popper,gpuAcceleration:_};null!=p.modifiersData.popperOffsets&&(p.styles.popper=Object.assign({},p.styles.popper,m6(Object.assign({},W,{offsets:p.modifiersData.popperOffsets,position:p.options.strategy,adaptive:w,roundOffsets:O})))),null!=p.modifiersData.arrow&&(p.styles.arrow=Object.assign({},p.styles.arrow,m6(Object.assign({},W,{offsets:p.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:O})))),p.attributes.popper=Object.assign({},p.attributes.popper,{"data-popper-placement":p.placement})},data:{}},tre={name:"applyStyles",enabled:!0,phase:"write",fn:function qte(g){var p=g.state;Object.keys(p.elements).forEach(function(y){var v=p.styles[y]||{},_=p.attributes[y]||{},E=p.elements[y];!sl(E)||!fu(E)||(Object.assign(E.style,v),Object.keys(_).forEach(function(w){var D=_[w];!1===D?E.removeAttribute(w):E.setAttribute(w,!0===D?"":D)}))})},effect:function ere(g){var p=g.state,y={popper:{position:p.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(p.elements.popper.style,y.popper),p.styles=y,p.elements.arrow&&Object.assign(p.elements.arrow.style,y.arrow),function(){Object.keys(p.elements).forEach(function(v){var _=p.elements[v],E=p.attributes[v]||{},D=Object.keys(p.styles.hasOwnProperty(v)?p.styles[v]:y[v]).reduce(function(O,A){return O[A]="",O},{});!sl(_)||!fu(_)||(Object.assign(_.style,D),Object.keys(E).forEach(function(O){_.removeAttribute(O)}))})}},requires:["computeStyles"]},ire={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function nre(g){var p=g.state,v=g.name,_=g.options.offset,E=void 0===_?[0,0]:_,w=d6.reduce(function(W,q){return W[q]=function rre(g,p,y){var v=pu(g),_=[Ba,ja].indexOf(v)>=0?-1:1,E="function"==typeof y?y(Object.assign({},p,{placement:g})):y,w=E[0],D=E[1];return w=w||0,D=(D||0)*_,[Ba,ll].indexOf(v)>=0?{x:D,y:w}:{x:w,y:D}}(q,p.rects,E),W},{}),D=w[p.placement],A=D.y;null!=p.modifiersData.popperOffsets&&(p.modifiersData.popperOffsets.x+=D.x,p.modifiersData.popperOffsets.y+=A),p.modifiersData[v]=w}};var ore={left:"right",right:"left",bottom:"top",top:"bottom"};function Fv(g){return g.replace(/left|right|bottom|top/g,function(p){return ore[p]})}var sre={start:"end",end:"start"};function g6(g){return g.replace(/start|end/g,function(p){return sre[p]})}function y6(g,p){var y=p.getRootNode&&p.getRootNode();if(g.contains(p))return!0;if(y&&s6(y)){var v=p;do{if(v&&g.isSameNode(v))return!0;v=v.parentNode||v.host}while(v)}return!1}function Ew(g){return Object.assign({},g,{left:g.x,top:g.y,right:g.x+g.width,bottom:g.y+g.height})}function v6(g,p){return p===u6?Ew(function are(g){var p=Rl(g),y=Jc(g),v=p.visualViewport,_=y.clientWidth,E=y.clientHeight,w=0,D=0;return v&&(_=v.width,E=v.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(w=v.offsetLeft,D=v.offsetTop)),{width:_,height:E,x:w+mw(g),y:D}}(g)):sl(p)?function ure(g){var p=Tf(g);return p.top=p.top+g.clientTop,p.left=p.left+g.clientLeft,p.bottom=p.top+g.clientHeight,p.right=p.left+g.clientWidth,p.width=g.clientWidth,p.height=g.clientHeight,p.x=p.left,p.y=p.top,p}(p):Ew(function lre(g){var p,y=Jc(g),v=pw(g),_=null==(p=g.ownerDocument)?void 0:p.body,E=Xc(y.scrollWidth,y.clientWidth,_?_.scrollWidth:0,_?_.clientWidth:0),w=Xc(y.scrollHeight,y.clientHeight,_?_.scrollHeight:0,_?_.clientHeight:0),D=-v.scrollLeft+mw(g),O=-v.scrollTop;return"rtl"===Xu(_||y).direction&&(D+=Xc(y.clientWidth,_?_.clientWidth:0)-E),{width:E,height:w,x:D,y:O}}(Jc(g)))}function E6(g){return Object.assign({},{top:0,right:0,bottom:0,left:0},g)}function b6(g,p){return p.reduce(function(y,v){return y[v]=g,y},{})}function z0(g,p){void 0===p&&(p={});var v=p.placement,_=void 0===v?g.placement:v,E=p.boundary,w=void 0===E?"clippingParents":E,D=p.rootBoundary,O=void 0===D?u6:D,A=p.elementContext,W=void 0===A?$0:A,q=p.altBoundary,_e=void 0!==q&&q,be=p.padding,We=void 0===be?0:be,qe=E6("number"!=typeof We?We:b6(We,W0)),gt=g.rects.popper,lt=g.elements[_e?W===$0?"reference":$0:W],Tt=function dre(g,p,y){var v="clippingParents"===p?function cre(g){var p=V0(Rv(g)),v=["absolute","fixed"].indexOf(Xu(g).position)>=0&&sl(g)?k0(g):g;return U0(v)?p.filter(function(_){return U0(_)&&y6(_,v)&&"body"!==fu(_)}):[]}(g):[].concat(p),_=[].concat(v,[y]),w=_.reduce(function(D,O){var A=v6(g,O);return D.top=Xc(A.top,D.top),D.right=K0(A.right,D.right),D.bottom=K0(A.bottom,D.bottom),D.left=Xc(A.left,D.left),D},v6(g,_[0]));return w.width=w.right-w.left,w.height=w.bottom-w.top,w.x=w.left,w.y=w.top,w}(U0(lt)?lt:lt.contextElement||Jc(g.elements.popper),w,O),Rt=Tf(g.elements.reference),Xt=p6({reference:Rt,element:gt,strategy:"absolute",placement:_}),ur=Ew(Object.assign({},gt,Xt)),_r=W===$0?ur:Rt,Ur={top:Tt.top-_r.top+qe.top,bottom:_r.bottom-Tt.bottom+qe.bottom,left:Tt.left-_r.left+qe.left,right:_r.right-Tt.right+qe.right},$r=g.modifiersData.offset;if(W===$0&&$r){var rn=$r[_];Object.keys(Ur).forEach(function(Mn){var On=[ll,al].indexOf(Mn)>=0?1:-1,xn=[ja,al].indexOf(Mn)>=0?"y":"x";Ur[Mn]+=rn[xn]*On})}return Ur}const mre={name:"flip",enabled:!0,phase:"main",fn:function pre(g){var p=g.state,y=g.options,v=g.name;if(!p.modifiersData[v]._skip){for(var _=y.mainAxis,E=void 0===_||_,w=y.altAxis,D=void 0===w||w,O=y.fallbackPlacements,A=y.padding,W=y.boundary,q=y.rootBoundary,_e=y.altBoundary,be=y.flipVariations,We=void 0===be||be,qe=y.allowedAutoPlacements,dt=p.options.placement,gt=pu(dt),Tt=O||(gt!==dt&&We?function fre(g){if(pu(g)===vw)return[];var p=Fv(g);return[g6(g),p,g6(p)]}(dt):[Fv(dt)]),Rt=[dt].concat(Tt).reduce(function(Gd,vu){return Gd.concat(pu(vu)===vw?function hre(g,p){void 0===p&&(p={});var _=p.boundary,E=p.rootBoundary,w=p.padding,D=p.flipVariations,O=p.allowedAutoPlacements,A=void 0===O?d6:O,W=Pf(p.placement),q=W?D?c6:c6.filter(function(We){return Pf(We)===W}):W0,_e=q.filter(function(We){return A.indexOf(We)>=0});0===_e.length&&(_e=q);var be=_e.reduce(function(We,qe){return We[qe]=z0(g,{placement:qe,boundary:_,rootBoundary:E,padding:w})[pu(qe)],We},{});return Object.keys(be).sort(function(We,qe){return be[We]-be[qe]})}(p,{placement:vu,boundary:W,rootBoundary:q,padding:A,flipVariations:We,allowedAutoPlacements:qe}):vu)},[]),Xt=p.rects.reference,ur=p.rects.popper,_r=new Map,Ur=!0,$r=Rt[0],rn=0;rn<Rt.length;rn++){var Mn=Rt[rn],On=pu(Mn),xn=Pf(Mn)===Af,xi=[ja,al].indexOf(On)>=0,io=xi?"width":"height",uo=z0(p,{placement:Mn,boundary:W,rootBoundary:q,altBoundary:_e,padding:A}),Fs=xi?xn?ll:Ba:xn?al:ja;Xt[io]>ur[io]&&(Fs=Fv(Fs));var ka=Fv(Fs),nd=[];if(E&&nd.push(uo[On]<=0),D&&nd.push(uo[Fs]<=0,uo[ka]<=0),nd.every(function(Gd){return Gd})){$r=Mn,Ur=!1;break}_r.set(Mn,nd)}if(Ur)for(var Uf=function(vu){var r_=Rt.find(function(kw){var Vf=_r.get(kw);if(Vf)return Vf.slice(0,vu).every(function(Ww){return Ww})});if(r_)return $r=r_,"break"},id=We?3:1;id>0&&"break"!==Uf(id);id--);p.placement!==$r&&(p.modifiersData[v]._skip=!0,p.placement=$r,p.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function jv(g,p,y){return Xc(g,K0(p,y))}const vre={name:"preventOverflow",enabled:!0,phase:"main",fn:function yre(g){var p=g.state,y=g.options,v=g.name,_=y.mainAxis,E=void 0===_||_,w=y.altAxis,D=void 0!==w&&w,_e=y.tether,be=void 0===_e||_e,We=y.tetherOffset,qe=void 0===We?0:We,dt=z0(p,{boundary:y.boundary,rootBoundary:y.rootBoundary,padding:y.padding,altBoundary:y.altBoundary}),gt=pu(p.placement),lt=Pf(p.placement),Tt=!lt,Rt=_w(gt),Xt=function gre(g){return"x"===g?"y":"x"}(Rt),ur=p.modifiersData.popperOffsets,_r=p.rects.reference,Ur=p.rects.popper,$r="function"==typeof qe?qe(Object.assign({},p.rects,{placement:p.placement})):qe,rn={x:0,y:0};if(ur){if(E||D){var Mn="y"===Rt?ja:Ba,On="y"===Rt?al:ll,xn="y"===Rt?"height":"width",xi=ur[Rt],io=ur[Rt]+dt[Mn],uo=ur[Rt]-dt[On],Fs=be?-Ur[xn]/2:0,ka=lt===Af?_r[xn]:Ur[xn],nd=lt===Af?-Ur[xn]:-_r[xn],am=p.elements.arrow,Uf=be&&am?yw(am):{width:0,height:0},id=p.modifiersData["arrow#persistent"]?p.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},t_=id[Mn],Gd=id[On],vu=jv(0,_r[xn],Uf[xn]),r_=Tt?_r[xn]/2-Fs-vu-t_-$r:ka-vu-t_-$r,kw=Tt?-_r[xn]/2+Fs+vu+Gd+$r:nd+vu+Gd+$r,Vf=p.elements.arrow&&k0(p.elements.arrow),J6=p.modifiersData.offset?p.modifiersData.offset[p.placement][Rt]:0,X6=ur[Rt]+r_-J6-(Vf?"y"===Rt?Vf.clientTop||0:Vf.clientLeft||0:0),Q6=ur[Rt]+kw-J6;if(E){var q6=jv(be?K0(io,X6):io,xi,be?Xc(uo,Q6):uo);ur[Rt]=q6,rn[Rt]=q6-xi}if(D){var n_=ur[Xt],e4=n_+dt["x"===Rt?ja:Ba],t4=n_-dt["x"===Rt?al:ll],r4=jv(be?K0(e4,X6):e4,n_,be?Xc(t4,Q6):t4);ur[Xt]=r4,rn[Xt]=r4-n_}}p.modifiersData[v]=rn}},requiresIfExists:["offset"]},Cre={name:"arrow",enabled:!0,phase:"main",fn:function Ere(g){var p,y=g.state,v=g.name,_=g.options,E=y.elements.arrow,w=y.modifiersData.popperOffsets,D=pu(y.placement),O=_w(D),W=[Ba,ll].indexOf(D)>=0?"height":"width";if(E&&w){var q=function(p,y){return E6("number"!=typeof(p="function"==typeof p?p(Object.assign({},y.rects,{placement:y.placement})):p)?p:b6(p,W0))}(_.padding,y),_e=yw(E),be="y"===O?ja:Ba,We="y"===O?al:ll,qe=y.rects.reference[W]+y.rects.reference[O]-w[O]-y.rects.popper[W],dt=w[O]-y.rects.reference[O],gt=k0(E),lt=gt?"y"===O?gt.clientHeight||0:gt.clientWidth||0:0,ur=lt/2-_e[W]/2+(qe/2-dt/2),_r=jv(q[be],ur,lt-_e[W]-q[We]);y.modifiersData[v]=((p={})[O]=_r,p.centerOffset=_r-ur,p)}},effect:function bre(g){var p=g.state,v=g.options.element,_=void 0===v?"[data-popper-arrow]":v;null!=_&&("string"==typeof _&&!(_=p.elements.popper.querySelector(_))||!y6(p.elements.popper,_)||(p.elements.arrow=_))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function C6(g,p,y){return void 0===y&&(y={x:0,y:0}),{top:g.top-p.height-y.y,right:g.right-p.width+y.x,bottom:g.bottom-p.height+y.y,left:g.left-p.width-y.x}}function w6(g){return[ja,ll,al,Ba].some(function(p){return g[p]>=0})}var Mre=[zte,Hte,Qte,tre,ire,mre,vre,Cre,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function wre(g){var p=g.state,y=g.name,v=p.rects.reference,_=p.rects.popper,E=p.modifiersData.preventOverflow,w=z0(p,{elementContext:"reference"}),D=z0(p,{altBoundary:!0}),O=C6(w,v),A=C6(D,_,E),W=w6(O),q=w6(A);p.modifiersData[y]={referenceClippingOffsets:O,popperEscapeOffsets:A,isReferenceHidden:W,hasPopperEscaped:q},p.attributes.popper=Object.assign({},p.attributes.popper,{"data-popper-reference-hidden":W,"data-popper-escaped":q})}}],xre=$te({defaultModifiers:Mre});const Dre=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],Sre={position:"fixed","z-index":"1000"};let mu=class extends ns.Z{constructor(g,p){super(g,p),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=y=>{this._rootNode=y},this._afterContentCreate=y=>{this._contentNode=y},this._updatePosition=()=>{(0,dr.pC)(this._popper)&&this._popper.update()}}initialize(){this.when(()=>{this._projector.append(document.body,this.render),this._renderAttached=!0}),this.own((0,Br.S1)(this,["open","anchorElement"],()=>this._buildPopper()),(0,Br.S1)(this,["placement","offset"],()=>this._setPopperOptions()))}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),(0,dr.pC)(this._rootNode)&&((0,lu.Od)(this._rootNode),this._rootNode=null),this._contentNode=null,(0,dr.pC)(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(g){}set owner(g){this._set("owner",g)}get placement(){return"top"}set placement(g){-1!==Dre.indexOf(g)?this._override("placement",g):this._clearOverride("placement")}render(){var g;const{open:p,owner:y,renderContentFunction:v}=this;return(0,Bt.u)("div",{afterCreate:this._afterRootCreate,class:this.classes("esri-popover",p?"esri-popover--open":null),styles:Sre},(0,Bt.u)("div",{dir:(0,Lo.XP)(null==(g=this.owner)?void 0:g.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},p&&(null==v?void 0:v.call(y))))}_buildPopper(){(0,dr.pC)(this._popper)&&(this._popper.destroy(),this._popper=null);const g=this._contentNode;if((0,dr.Wi)(g)||!this.open||!this.renderContentFunction)return;const p=this._getAnchor();p&&(this._popper=xre(p,g),this._setPopperOptions())}_setPopperOptions(){const{placement:g,offset:p,_popper:y}=this;(0,dr.Wi)(y)||(y.setOptions({placement:g,modifiers:[{name:"offset",options:{offset:p}}]}),y.forceUpdate())}_getAnchor(){const{anchorElement:g}=this;return(0,lu.L7)("function"==typeof g?g():g)}};(0,we._)([(0,Re.Cb)()],mu.prototype,"anchorElement",void 0),(0,we._)([(0,Re.Cb)()],mu.prototype,"container",null),(0,we._)([(0,Re.Cb)()],mu.prototype,"offset",void 0),(0,we._)([(0,Re.Cb)()],mu.prototype,"open",void 0),(0,we._)([(0,Re.Cb)()],mu.prototype,"owner",null),(0,we._)([(0,Re.Cb)()],mu.prototype,"placement",null),(0,we._)([(0,Re.Cb)()],mu.prototype,"renderContentFunction",void 0),mu=(0,we._)([(0,Tr.j)("esri.widgets.support.Popover")],mu);const Ore=mu;let Qc=class extends((0,Lc.p)(ns.Z)){constructor(g,p){super(g,p),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.viewModel=new bte,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new Ore({owner:this,open:!!this.open,placement:(0,Lo.dZ)(this.container)?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add([(0,Br.YP)(this,"open",g=>this._popover.set("open",g))]),document.addEventListener("click",this._handleOutsideClick)}destroy(){var g;null==(g=this._popover)||g.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(g){var p,y;if(!this.open||!this._rootNode||!this._menuContentNode)return;const v=g.target;null!=(p=this._menuContentNode)&&p.contains(v)||null!=(y=this._rootNode)&&y.contains(v)||(this.open=!1)}render(){return(0,Bt.u)("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes("esri-button-menu","esri-widget"),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:g,id:p,label:y,open:v}=this,_=this.classes(["esri-button-menu__button",g||"esri-icon-menu",v?"esri-button-menu__button--selected":null]);return(0,Bt.u)("button",{"aria-pressed":v.toString(),"aria-controls":`${p}-menu`,"aria-expanded":v.toString(),"aria-haspopup":"true","aria-label":y,bind:this,class:_,id:`${p}-button`,title:y,selected:v,onclick:this._toggleOpen,tabindex:"0",type:"button"})}renderMenuContent(){var g;const{id:p,open:y}=this;return(0,Bt.u)("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:"esri-button-menu__content","data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!y},(0,Bt.u)("ul",{"aria-labelledby":`${p}-button`,bind:this,class:"esri-button-menu__item-wrapper",id:`${p}-menu`,role:"menu"},(null==(g=this.items)?void 0:g.length)&&this.renderItems()))}renderItems(){var g;return null==(g=this.items)?void 0:g.map((p,y)=>this.renderItem(p,y))}renderItem(g,p,y){var v;const _=(0,dr.pC)(y)?`${this.id}-menu-item-${p}-${y}`:`${this.id}-menu-item-${p}`,E=`${_}-label`,w=this.classes("esri-button-menu__item",g.selectionEnabled?"esri-button-menu__item--selectable":null,g.selectionEnabled&&g.selected?"esri-button-menu__item--selected":null);return(0,Bt.u)("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:w,"data-item-index":p,"data-item-subIndex":y,for:_,key:_,onkeydown:D=>this._handleMenuItemKeydown(D,g),onclick:D=>this._handleMenuItemInteraction(D,g),role:"menuitem",tabindex:"0"},(0,Bt.u)("input",{disabled:!0,checked:g.selected,class:"esri-button-menu__checkbox",id:_,name:_,tabindex:"-1",type:"checkbox"}),(0,Bt.u)("label",{bind:this,class:this.classes("esri-button-menu__button","esri-button-menu__item-label"),for:_,id:E},(0,Bt.u)("span",{class:this.classes("esri-button-menu__icon",g.iconClass),"aria-hidden":"true"}),(0,Bt.u)("span",{class:"esri-button-menu__item-label-content"},g.label)),(0,Bt.u)("ul",{"aria-labelledby":E,class:"esri-button-menu__embedded-content-wrapper",id:`${this.id}-submenu`,role:"menu"},null==g||null==(v=g.items)?void 0:v.map((D,O)=>this.renderItem(D,p,O))))}_afterRootNodeCreate(g){var p;this._rootNode=g,null==(p=this._popover)||p.set("anchorElement",()=>g)}_handleMenuItemInteraction(g,p){p.selected=!p.selected,p.open=!(!p.selected||!p.items),p.autoCloseMenu&&this.set("open",!1),p.clickFunction&&p.clickFunction({event:g,item:p}),g.stopPropagation()}_handleMenuItemKeydown(g,p){const y=(0,Rc.kK)(g);(0,Lo.pf)(y)&&this._handleMenuItemInteraction(g,p),"Escape"===y&&(this.open=!1,g.preventDefault(),g.stopPropagation())}_afterMenuContentNodeCreate(g){this._menuContentNode=g,g.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(g){0===g["data-item-index"]&&g.focus()}};(0,we._)([(0,Re.Cb)()],Qc.prototype,"iconClass",void 0),(0,we._)([(0,an.B)("viewModel.items")],Qc.prototype,"items",void 0),(0,we._)([(0,Re.Cb)()],Qc.prototype,"label",void 0),(0,we._)([(0,an.B)("viewModel.open")],Qc.prototype,"open",void 0),(0,we._)([(0,Re.Cb)()],Qc.prototype,"viewModel",void 0),Qc=(0,we._)([(0,Tr.j)("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],Qc);const Ire=Qc;function x6(g,p){var y=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);p&&(v=v.filter(function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable})),y.push.apply(y,v)}return y}function gu(g){for(var p=1;p<arguments.length;p++){var y=null!=arguments[p]?arguments[p]:{};p%2?x6(Object(y),!0).forEach(function(v){Tre(g,v,y[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(y)):x6(Object(y)).forEach(function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(y,v))})}return g}function Bv(g){return(Bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(g)}function Tre(g,p,y){return p in g?Object.defineProperty(g,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):g[p]=y,g}function ul(){return ul=Object.assign||function(g){for(var p=1;p<arguments.length;p++){var y=arguments[p];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(g[v]=y[v])}return g},ul.apply(this,arguments)}function Pre(g,p){if(null==g)return{};var v,_,y=function Are(g,p){if(null==g)return{};var _,E,y={},v=Object.keys(g);for(E=0;E<v.length;E++)!(p.indexOf(_=v[E])>=0)&&(y[_]=g[_]);return y}(g,p);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(g);for(_=0;_<E.length;_++)!(p.indexOf(v=E[_])>=0)&&(!Object.prototype.propertyIsEnumerable.call(g,v)||(y[v]=g[v]))}return y}function Qu(g){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(g)}var qu=Qu(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),G0=Qu(/Edge/i),D6=Qu(/firefox/i),H0=Qu(/safari/i)&&!Qu(/chrome/i)&&!Qu(/android/i),S6=Qu(/iP(ad|od|hone)/i),Ure=Qu(/chrome/i)&&Qu(/android/i),O6={capture:!1,passive:!1};function fi(g,p,y){g.addEventListener(p,y,!qu&&O6)}function oi(g,p,y){g.removeEventListener(p,y,!qu&&O6)}function Uv(g,p){if(p){if(">"===p[0]&&(p=p.substring(1)),g)try{if(g.matches)return g.matches(p);if(g.msMatchesSelector)return g.msMatchesSelector(p);if(g.webkitMatchesSelector)return g.webkitMatchesSelector(p)}catch(y){return!1}return!1}}function Vre(g){return g.host&&g!==document&&g.host.nodeType?g.host:g.parentNode}function Ll(g,p,y,v){if(g){y=y||document;do{if(null!=p&&(">"===p[0]?g.parentNode===y&&Uv(g,p):Uv(g,p))||v&&g===y)return g;if(g===y)break}while(g=Vre(g))}return null}var Y0,I6=/\s+/g;function lo(g,p,y){if(g&&p)if(g.classList)g.classList[y?"add":"remove"](p);else{var v=(" "+g.className+" ").replace(I6," ").replace(" "+p+" "," ");g.className=(v+(y?" "+p:"")).replace(I6," ")}}function hn(g,p,y){var v=g&&g.style;if(v){if(void 0===y)return document.defaultView&&document.defaultView.getComputedStyle?y=document.defaultView.getComputedStyle(g,""):g.currentStyle&&(y=g.currentStyle),void 0===p?y:y[p];!(p in v)&&-1===p.indexOf("webkit")&&(p="-webkit-"+p),v[p]=y+("string"==typeof y?"":"px")}}function Wd(g,p){var y="";if("string"==typeof g)y=g;else do{var v=hn(g,"transform");v&&"none"!==v&&(y=v+" "+y)}while(!p&&(g=g.parentNode));var _=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return _&&new _(y)}function T6(g,p,y){if(g){var v=g.getElementsByTagName(p),_=0,E=v.length;if(y)for(;_<E;_++)y(v[_],_);return v}return[]}function yu(){return document.scrollingElement||document.documentElement}function ro(g,p,y,v,_){if(g.getBoundingClientRect||g===window){var E,w,D,O,A,W,q;if(g!==window&&g.parentNode&&g!==yu()?(w=(E=g.getBoundingClientRect()).top,D=E.left,O=E.bottom,A=E.right,W=E.height,q=E.width):(w=0,D=0,O=window.innerHeight,A=window.innerWidth,W=window.innerHeight,q=window.innerWidth),(p||y)&&g!==window&&(_=_||g.parentNode,!qu))do{if(_&&_.getBoundingClientRect&&("none"!==hn(_,"transform")||y&&"static"!==hn(_,"position"))){var _e=_.getBoundingClientRect();w-=_e.top+parseInt(hn(_,"border-top-width")),D-=_e.left+parseInt(hn(_,"border-left-width")),O=w+E.height,A=D+E.width;break}}while(_=_.parentNode);if(v&&g!==window){var be=Wd(_||g),We=be&&be.a,qe=be&&be.d;be&&(O=(w/=qe)+(W/=qe),A=(D/=We)+(q/=We))}return{top:w,left:D,bottom:O,right:A,width:q,height:W}}}function A6(g,p,y){for(var v=qc(g,!0),_=ro(g)[p];v;){var E=ro(v)[y];if(!("top"===y||"left"===y?_>=E:_<=E))return v;if(v===yu())break;v=qc(v,!1)}return!1}function Rf(g,p,y,v){for(var _=0,E=0,w=g.children;E<w.length;){if("none"!==w[E].style.display&&w[E]!==Ln.ghost&&(v||w[E]!==Ln.dragged)&&Ll(w[E],y.draggable,g,!1)){if(_===p)return w[E];_++}E++}return null}function Cw(g,p){for(var y=g.lastElementChild;y&&(y===Ln.ghost||"none"===hn(y,"display")||p&&!Uv(y,p));)y=y.previousElementSibling;return y||null}function bo(g,p){var y=0;if(!g||!g.parentNode)return-1;for(;g=g.previousElementSibling;)"TEMPLATE"!==g.nodeName.toUpperCase()&&g!==Ln.clone&&(!p||Uv(g,p))&&y++;return y}function P6(g){var p=0,y=0,v=yu();if(g)do{var _=Wd(g);p+=g.scrollLeft*_.a,y+=g.scrollTop*_.d}while(g!==v&&(g=g.parentNode));return[p,y]}function qc(g,p){if(!g||!g.getBoundingClientRect)return yu();var y=g,v=!1;do{if(y.clientWidth<y.scrollWidth||y.clientHeight<y.scrollHeight){var _=hn(y);if(y.clientWidth<y.scrollWidth&&("auto"==_.overflowX||"scroll"==_.overflowX)||y.clientHeight<y.scrollHeight&&("auto"==_.overflowY||"scroll"==_.overflowY)){if(!y.getBoundingClientRect||y===document.body)return yu();if(v||p)return y;v=!0}}}while(y=y.parentNode);return yu()}function ww(g,p){return Math.round(g.top)===Math.round(p.top)&&Math.round(g.left)===Math.round(p.left)&&Math.round(g.height)===Math.round(p.height)&&Math.round(g.width)===Math.round(p.width)}function R6(g,p){return function(){if(!Y0){var y=arguments,v=this;1===y.length?g.call(v,y[0]):g.apply(v,y),Y0=setTimeout(function(){Y0=void 0},p)}}}function L6(g,p,y){g.scrollLeft+=p,g.scrollTop+=y}function Mw(g){var p=window.Polymer,y=window.jQuery||window.Zepto;return p&&p.dom?p.dom(g).cloneNode(!0):y?y(g).clone(!0)[0]:g.cloneNode(!0)}var Ls="Sortable"+(new Date).getTime();var Lf=[],Dw={initializeByDefault:!0},J0={mount:function(p){for(var y in Dw)Dw.hasOwnProperty(y)&&!(y in p)&&(p[y]=Dw[y]);Lf.forEach(function(v){if(v.pluginName===p.pluginName)throw"Sortable: Cannot mount plugin ".concat(p.pluginName," more than once")}),Lf.push(p)},pluginEvent:function(p,y,v){var _=this;this.eventCanceled=!1,v.cancel=function(){_.eventCanceled=!0};var E=p+"Global";Lf.forEach(function(w){!y[w.pluginName]||(y[w.pluginName][E]&&y[w.pluginName][E](gu({sortable:y},v)),y.options[w.pluginName]&&y[w.pluginName][p]&&y[w.pluginName][p](gu({sortable:y},v)))})},initializePlugins:function(p,y,v,_){for(var E in Lf.forEach(function(D){var O=D.pluginName;if(p.options[O]||D.initializeByDefault){var A=new D(p,y,p.options);A.sortable=p,A.options=p.options,p[O]=A,ul(v,A.defaults)}}),p.options)if(p.options.hasOwnProperty(E)){var w=this.modifyOption(p,E,p.options[E]);void 0!==w&&(p.options[E]=w)}},getEventProperties:function(p,y){var v={};return Lf.forEach(function(_){"function"==typeof _.eventProperties&&ul(v,_.eventProperties.call(y[_.pluginName],p))}),v},modifyOption:function(p,y,v){var _;return Lf.forEach(function(E){!p[E.pluginName]||E.optionListeners&&"function"==typeof E.optionListeners[y]&&(_=E.optionListeners[y].call(p[E.pluginName],v))}),_}};var Gre=["evt"],va=function(p,y){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_=v.evt,E=Pre(v,Gre);J0.pluginEvent.bind(Ln)(p,y,gu({dragEl:Gr,parentEl:Co,ghostEl:Hn,rootEl:no,nextEl:Zd,lastDownEl:Vv,cloneEl:wo,cloneHidden:ed,dragStarted:q0,putSortable:Ds,activeSortable:Ln.active,originalEvent:_,oldIndex:Nf,oldDraggableIndex:Q0,newIndex:Ua,newDraggableIndex:td,hideGhostForTarget:W6,unhideGhostForTarget:Z6,cloneNowHidden:function(){ed=!0},cloneNowShown:function(){ed=!1},dispatchSortableEvent:function(D){ta({sortable:y,name:D,originalEvent:_})}},E))};function ta(g){!function X0(g){var p=g.sortable,y=g.rootEl,v=g.name,_=g.targetEl,E=g.cloneEl,w=g.toEl,D=g.fromEl,O=g.oldIndex,A=g.newIndex,W=g.oldDraggableIndex,q=g.newDraggableIndex,_e=g.originalEvent,be=g.putSortable,We=g.extraEventProperties;if(p=p||y&&y[Ls]){var qe,dt=p.options,gt="on"+v.charAt(0).toUpperCase()+v.substr(1);!window.CustomEvent||qu||G0?(qe=document.createEvent("Event")).initEvent(v,!0,!0):qe=new CustomEvent(v,{bubbles:!0,cancelable:!0}),qe.to=w||y,qe.from=D||y,qe.item=_||y,qe.clone=E,qe.oldIndex=O,qe.newIndex=A,qe.oldDraggableIndex=W,qe.newDraggableIndex=q,qe.originalEvent=_e,qe.pullMode=be?be.lastPutMode:void 0;var lt=gu(gu({},We),J0.getEventProperties(v,p));for(var Tt in lt)qe[Tt]=lt[Tt];y&&y.dispatchEvent(qe),dt[gt]&&dt[gt].call(p,qe)}}(gu({putSortable:Ds,cloneEl:wo,targetEl:Gr,rootEl:no,oldIndex:Nf,oldDraggableIndex:Q0,newIndex:Ua,newDraggableIndex:td},g))}var Gr,Co,Hn,no,Zd,Vv,wo,ed,Nf,Ua,Q0,td,kv,Ds,$d,Nl,Sw,Ow,F6,j6,q0,jf,em,Kv,Ns,Ff=!1,Wv=!1,Zv=[],tm=!1,$v=!1,Iw=[],Tw=!1,zv=[],Gv="undefined"!=typeof document,Hv=S6,B6=G0||qu?"cssFloat":"float",Hre=Gv&&!Ure&&!S6&&"draggable"in document.createElement("div"),U6=function(){if(Gv){if(qu)return!1;var g=document.createElement("x");return g.style.cssText="pointer-events:auto","auto"===g.style.pointerEvents}}(),V6=function(p,y){var v=hn(p),_=parseInt(v.width)-parseInt(v.paddingLeft)-parseInt(v.paddingRight)-parseInt(v.borderLeftWidth)-parseInt(v.borderRightWidth),E=Rf(p,0,y),w=Rf(p,1,y),D=E&&hn(E),O=w&&hn(w),A=D&&parseInt(D.marginLeft)+parseInt(D.marginRight)+ro(E).width,W=O&&parseInt(O.marginLeft)+parseInt(O.marginRight)+ro(w).width;return"flex"===v.display?"column"===v.flexDirection||"column-reverse"===v.flexDirection?"vertical":"horizontal":"grid"===v.display?v.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":E&&D.float&&"none"!==D.float?!w||"both"!==O.clear&&O.clear!==("left"===D.float?"left":"right")?"horizontal":"vertical":E&&("block"===D.display||"flex"===D.display||"table"===D.display||"grid"===D.display||A>=_&&"none"===v[B6]||w&&"none"===v[B6]&&A+W>_)?"vertical":"horizontal"},k6=function(p){function y(E,w){return function(D,O,A,W){if(null==E&&(w||D.options.group.name&&O.options.group.name&&D.options.group.name===O.options.group.name))return!0;if(null==E||!1===E)return!1;if(w&&"clone"===E)return E;if("function"==typeof E)return y(E(D,O,A,W),w)(D,O,A,W);var _e=(w?D:O).options.group.name;return!0===E||"string"==typeof E&&E===_e||E.join&&E.indexOf(_e)>-1}}var v={},_=p.group;(!_||"object"!=Bv(_))&&(_={name:_}),v.name=_.name,v.checkPull=y(_.pull,!0),v.checkPut=y(_.put),v.revertClone=_.revertClone,p.group=v},W6=function(){!U6&&Hn&&hn(Hn,"display","none")},Z6=function(){!U6&&Hn&&hn(Hn,"display","")};Gv&&document.addEventListener("click",function(g){if(Wv)return g.preventDefault(),g.stopPropagation&&g.stopPropagation(),g.stopImmediatePropagation&&g.stopImmediatePropagation(),Wv=!1,!1},!0);var Kd=function(p){if(Gr){var y=function(p,y){var v;return Zv.some(function(_){var E=_[Ls].options.emptyInsertThreshold;if(E&&!Cw(_)){var w=ro(_);if(p>=w.left-E&&p<=w.right+E&&y>=w.top-E&&y<=w.bottom+E)return v=_}}),v}((p=p.touches?p.touches[0]:p).clientX,p.clientY);if(y){var v={};for(var _ in p)p.hasOwnProperty(_)&&(v[_]=p[_]);v.target=v.rootEl=y,v.preventDefault=void 0,v.stopPropagation=void 0,y[Ls]._onDragOver(v)}}},Xre=function(p){Gr&&Gr.parentNode[Ls]._isOutsideThisEl(p.target)};function Ln(g,p){if(!g||!g.nodeType||1!==g.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(g));this.el=g,this.options=p=ul({},p),g[Ls]=this;var y={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(g.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return V6(g,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(w,D){w.setData("Text",D.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ln.supportPointer&&"PointerEvent"in window&&!H0,emptyInsertThreshold:5};for(var v in J0.initializePlugins(this,g,y),y)!(v in p)&&(p[v]=y[v]);for(var _ in k6(p),this)"_"===_.charAt(0)&&"function"==typeof this[_]&&(this[_]=this[_].bind(this));this.nativeDraggable=!p.forceFallback&&Hre,this.nativeDraggable&&(this.options.touchStartThreshold=1),p.supportPointer?fi(g,"pointerdown",this._onTapStart):(fi(g,"mousedown",this._onTapStart),fi(g,"touchstart",this._onTapStart)),this.nativeDraggable&&(fi(g,"dragover",this),fi(g,"dragenter",this)),Zv.push(this.el),p.store&&p.store.get&&this.sort(p.store.get(this)||[]),ul(this,function $re(){var p,g=[];return{captureAnimationState:function(){g=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(_){if("none"!==hn(_,"display")&&_!==Ln.ghost){g.push({target:_,rect:ro(_)});var E=gu({},g[g.length-1].rect);if(_.thisAnimationDuration){var w=Wd(_,!0);w&&(E.top-=w.f,E.left-=w.e)}_.fromRect=E}})},addAnimationState:function(v){g.push(v)},removeAnimationState:function(v){g.splice(function kre(g,p){for(var y in g)if(g.hasOwnProperty(y))for(var v in p)if(p.hasOwnProperty(v)&&p[v]===g[y][v])return Number(y);return-1}(g,{target:v}),1)},animateAll:function(v){var _=this;if(!this.options.animation)return clearTimeout(p),void("function"==typeof v&&v());var E=!1,w=0;g.forEach(function(D){var O=0,A=D.target,W=A.fromRect,q=ro(A),_e=A.prevFromRect,be=A.prevToRect,We=D.rect,qe=Wd(A,!0);qe&&(q.top-=qe.f,q.left-=qe.e),A.toRect=q,A.thisAnimationDuration&&ww(_e,q)&&!ww(W,q)&&(We.top-q.top)/(We.left-q.left)==(W.top-q.top)/(W.left-q.left)&&(O=function zre(g,p,y,v){return Math.sqrt(Math.pow(p.top-g.top,2)+Math.pow(p.left-g.left,2))/Math.sqrt(Math.pow(p.top-y.top,2)+Math.pow(p.left-y.left,2))*v.animation}(We,_e,be,_.options)),ww(q,W)||(A.prevFromRect=W,A.prevToRect=q,O||(O=_.options.animation),_.animate(A,We,q,O)),O&&(E=!0,w=Math.max(w,O),clearTimeout(A.animationResetTimer),A.animationResetTimer=setTimeout(function(){A.animationTime=0,A.prevFromRect=null,A.fromRect=null,A.prevToRect=null,A.thisAnimationDuration=null},O),A.thisAnimationDuration=O)}),clearTimeout(p),E?p=setTimeout(function(){"function"==typeof v&&v()},w):"function"==typeof v&&v(),g=[]},animate:function(v,_,E,w){if(w){hn(v,"transition",""),hn(v,"transform","");var D=Wd(this.el),W=(_.left-E.left)/(D&&D.a||1),q=(_.top-E.top)/(D&&D.d||1);v.animatingX=!!W,v.animatingY=!!q,hn(v,"transform","translate3d("+W+"px,"+q+"px,0)"),this.forRepaintDummy=function Kre(g){return g.offsetWidth}(v),hn(v,"transition","transform "+w+"ms"+(this.options.easing?" "+this.options.easing:"")),hn(v,"transform","translate3d(0,0,0)"),"number"==typeof v.animated&&clearTimeout(v.animated),v.animated=setTimeout(function(){hn(v,"transition",""),hn(v,"transform",""),v.animated=!1,v.animatingX=!1,v.animatingY=!1},w)}}}}())}function Yv(g,p,y,v,_,E,w,D){var O,q,A=g[Ls],W=A.options.onMove;return!window.CustomEvent||qu||G0?(O=document.createEvent("Event")).initEvent("move",!0,!0):O=new CustomEvent("move",{bubbles:!0,cancelable:!0}),O.to=p,O.from=g,O.dragged=y,O.draggedRect=v,O.related=_||p,O.relatedRect=E||ro(p),O.willInsertAfter=D,O.originalEvent=w,g.dispatchEvent(O),W&&(q=W.call(A,O,w)),q}function Aw(g){g.draggable=!1}function qre(){Tw=!1}function ine(g){for(var p=g.tagName+g.className+g.src+g.href+g.textContent,y=p.length,v=0;y--;)v+=p.charCodeAt(y);return v.toString(36)}function Jv(g){return setTimeout(g,0)}function Pw(g){return clearTimeout(g)}Ln.prototype={constructor:Ln,_isOutsideThisEl:function(p){!this.el.contains(p)&&p!==this.el&&(jf=null)},_getDirection:function(p,y){return"function"==typeof this.options.direction?this.options.direction.call(this,p,y,Gr):this.options.direction},_onTapStart:function(p){if(p.cancelable){var y=this,v=this.el,_=this.options,E=_.preventOnFilter,w=p.type,D=p.touches&&p.touches[0]||p.pointerType&&"touch"===p.pointerType&&p,O=(D||p).target,A=p.target.shadowRoot&&(p.path&&p.path[0]||p.composedPath&&p.composedPath()[0])||O,W=_.filter;if(function one(g){zv.length=0;for(var p=g.getElementsByTagName("input"),y=p.length;y--;){var v=p[y];v.checked&&zv.push(v)}}(v),!Gr&&!(/mousedown|pointerdown/.test(w)&&0!==p.button||_.disabled)&&!A.isContentEditable&&(this.nativeDraggable||!H0||!O||"SELECT"!==O.tagName.toUpperCase())&&!((O=Ll(O,_.draggable,v,!1))&&O.animated||Vv===O)){if(Nf=bo(O),Q0=bo(O,_.draggable),"function"==typeof W){if(W.call(this,p,O,this))return ta({sortable:y,rootEl:A,name:"filter",targetEl:O,toEl:v,fromEl:v}),va("filter",y,{evt:p}),void(E&&p.cancelable&&p.preventDefault())}else if(W&&(W=W.split(",").some(function(q){if(q=Ll(A,q.trim(),v,!1))return ta({sortable:y,rootEl:q,name:"filter",targetEl:O,fromEl:v,toEl:v}),va("filter",y,{evt:p}),!0})))return void(E&&p.cancelable&&p.preventDefault());_.handle&&!Ll(A,_.handle,v,!1)||this._prepareDragStart(p,D,O)}}},_prepareDragStart:function(p,y,v){var O,_=this,E=_.el,w=_.options,D=E.ownerDocument;if(v&&!Gr&&v.parentNode===E){var A=ro(v);if(no=E,Co=(Gr=v).parentNode,Zd=Gr.nextSibling,Vv=v,kv=w.group,Ln.dragged=Gr,F6=($d={target:Gr,clientX:(y||p).clientX,clientY:(y||p).clientY}).clientX-A.left,j6=$d.clientY-A.top,this._lastX=(y||p).clientX,this._lastY=(y||p).clientY,Gr.style["will-change"]="all",O=function(){va("delayEnded",_,{evt:p}),Ln.eventCanceled?_._onDrop():(_._disableDelayedDragEvents(),!D6&&_.nativeDraggable&&(Gr.draggable=!0),_._triggerDragStart(p,y),ta({sortable:_,name:"choose",originalEvent:p}),lo(Gr,w.chosenClass,!0))},w.ignore.split(",").forEach(function(W){T6(Gr,W.trim(),Aw)}),fi(D,"dragover",Kd),fi(D,"mousemove",Kd),fi(D,"touchmove",Kd),fi(D,"mouseup",_._onDrop),fi(D,"touchend",_._onDrop),fi(D,"touchcancel",_._onDrop),D6&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Gr.draggable=!0),va("delayStart",this,{evt:p}),!w.delay||w.delayOnTouchOnly&&!y||this.nativeDraggable&&(G0||qu))O();else{if(Ln.eventCanceled)return void this._onDrop();fi(D,"mouseup",_._disableDelayedDrag),fi(D,"touchend",_._disableDelayedDrag),fi(D,"touchcancel",_._disableDelayedDrag),fi(D,"mousemove",_._delayedDragTouchMoveHandler),fi(D,"touchmove",_._delayedDragTouchMoveHandler),w.supportPointer&&fi(D,"pointermove",_._delayedDragTouchMoveHandler),_._dragStartTimer=setTimeout(O,w.delay)}}},_delayedDragTouchMoveHandler:function(p){var y=p.touches?p.touches[0]:p;Math.max(Math.abs(y.clientX-this._lastX),Math.abs(y.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Gr&&Aw(Gr),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var p=this.el.ownerDocument;oi(p,"mouseup",this._disableDelayedDrag),oi(p,"touchend",this._disableDelayedDrag),oi(p,"touchcancel",this._disableDelayedDrag),oi(p,"mousemove",this._delayedDragTouchMoveHandler),oi(p,"touchmove",this._delayedDragTouchMoveHandler),oi(p,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(p,y){y=y||"touch"==p.pointerType&&p,!this.nativeDraggable||y?fi(document,this.options.supportPointer?"pointermove":y?"touchmove":"mousemove",this._onTouchMove):(fi(Gr,"dragend",this),fi(no,"dragstart",this._onDragStart));try{document.selection?Jv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(v){}},_dragStarted:function(p,y){if(Ff=!1,no&&Gr){va("dragStarted",this,{evt:y}),this.nativeDraggable&&fi(document,"dragover",Xre);var v=this.options;!p&&lo(Gr,v.dragClass,!1),lo(Gr,v.ghostClass,!0),Ln.active=this,p&&this._appendGhost(),ta({sortable:this,name:"start",originalEvent:y})}else this._nulling()},_emulateDragOver:function(){if(Nl){this._lastX=Nl.clientX,this._lastY=Nl.clientY,W6();for(var p=document.elementFromPoint(Nl.clientX,Nl.clientY),y=p;p&&p.shadowRoot&&(p=p.shadowRoot.elementFromPoint(Nl.clientX,Nl.clientY))!==y;)y=p;if(Gr.parentNode[Ls]._isOutsideThisEl(p),y)do{if(y[Ls]&&y[Ls]._onDragOver({clientX:Nl.clientX,clientY:Nl.clientY,target:p,rootEl:y})&&!this.options.dragoverBubble)break;p=y}while(y=y.parentNode);Z6()}},_onTouchMove:function(p){if($d){var y=this.options,v=y.fallbackTolerance,_=y.fallbackOffset,E=p.touches?p.touches[0]:p,w=Hn&&Wd(Hn,!0),D=Hn&&w&&w.a,O=Hn&&w&&w.d,A=Hv&&Ns&&P6(Ns),W=(E.clientX-$d.clientX+_.x)/(D||1)+(A?A[0]-Iw[0]:0)/(D||1),q=(E.clientY-$d.clientY+_.y)/(O||1)+(A?A[1]-Iw[1]:0)/(O||1);if(!Ln.active&&!Ff){if(v&&Math.max(Math.abs(E.clientX-this._lastX),Math.abs(E.clientY-this._lastY))<v)return;this._onDragStart(p,!0)}if(Hn){w?(w.e+=W-(Sw||0),w.f+=q-(Ow||0)):w={a:1,b:0,c:0,d:1,e:W,f:q};var _e="matrix(".concat(w.a,",").concat(w.b,",").concat(w.c,",").concat(w.d,",").concat(w.e,",").concat(w.f,")");hn(Hn,"webkitTransform",_e),hn(Hn,"mozTransform",_e),hn(Hn,"msTransform",_e),hn(Hn,"transform",_e),Sw=W,Ow=q,Nl=E}p.cancelable&&p.preventDefault()}},_appendGhost:function(){if(!Hn){var p=this.options.fallbackOnBody?document.body:no,y=ro(Gr,!0,Hv,!0,p),v=this.options;if(Hv){for(Ns=p;"static"===hn(Ns,"position")&&"none"===hn(Ns,"transform")&&Ns!==document;)Ns=Ns.parentNode;Ns!==document.body&&Ns!==document.documentElement?(Ns===document&&(Ns=yu()),y.top+=Ns.scrollTop,y.left+=Ns.scrollLeft):Ns=yu(),Iw=P6(Ns)}lo(Hn=Gr.cloneNode(!0),v.ghostClass,!1),lo(Hn,v.fallbackClass,!0),lo(Hn,v.dragClass,!0),hn(Hn,"transition",""),hn(Hn,"transform",""),hn(Hn,"box-sizing","border-box"),hn(Hn,"margin",0),hn(Hn,"top",y.top),hn(Hn,"left",y.left),hn(Hn,"width",y.width),hn(Hn,"height",y.height),hn(Hn,"opacity","0.8"),hn(Hn,"position",Hv?"absolute":"fixed"),hn(Hn,"zIndex","100000"),hn(Hn,"pointerEvents","none"),Ln.ghost=Hn,p.appendChild(Hn),hn(Hn,"transform-origin",F6/parseInt(Hn.style.width)*100+"% "+j6/parseInt(Hn.style.height)*100+"%")}},_onDragStart:function(p,y){var v=this,_=p.dataTransfer,E=v.options;va("dragStart",this,{evt:p}),Ln.eventCanceled?this._onDrop():(va("setupClone",this),Ln.eventCanceled||((wo=Mw(Gr)).draggable=!1,wo.style["will-change"]="",this._hideClone(),lo(wo,this.options.chosenClass,!1),Ln.clone=wo),v.cloneId=Jv(function(){va("clone",v),!Ln.eventCanceled&&(v.options.removeCloneOnHide||no.insertBefore(wo,Gr),v._hideClone(),ta({sortable:v,name:"clone"}))}),!y&&lo(Gr,E.dragClass,!0),y?(Wv=!0,v._loopId=setInterval(v._emulateDragOver,50)):(oi(document,"mouseup",v._onDrop),oi(document,"touchend",v._onDrop),oi(document,"touchcancel",v._onDrop),_&&(_.effectAllowed="move",E.setData&&E.setData.call(v,_,Gr)),fi(document,"drop",v),hn(Gr,"transform","translateZ(0)")),Ff=!0,v._dragStartId=Jv(v._dragStarted.bind(v,y,p)),fi(document,"selectstart",v),q0=!0,H0&&hn(document.body,"user-select","none"))},_onDragOver:function(p){var _,E,w,be,y=this.el,v=p.target,D=this.options,O=D.group,A=Ln.active,W=kv===O,q=D.sort,_e=Ds||A,We=this,qe=!1;if(!Tw){if(void 0!==p.preventDefault&&p.cancelable&&p.preventDefault(),v=Ll(v,D.draggable,y,!0),dt("dragOver"),Ln.eventCanceled)return qe;if(Gr.contains(p.target)||v.animated&&v.animatingX&&v.animatingY||We._ignoreWhileAnimating===v)return lt(!1);if(Wv=!1,A&&!D.disabled&&(W?q||(w=Co!==no):Ds===this||(this.lastPutMode=kv.checkPull(this,A,Gr,p))&&O.checkPut(this,A,Gr,p))){if(be="vertical"===this._getDirection(p,v),_=ro(Gr),dt("dragOverValid"),Ln.eventCanceled)return qe;if(w)return Co=no,gt(),this._hideClone(),dt("revert"),Ln.eventCanceled||(Zd?no.insertBefore(Gr,Zd):no.appendChild(Gr)),lt(!0);var Rt=Cw(y,D.draggable);if(!Rt||function tne(g,p,y){var v=ro(Cw(y.el,y.options.draggable));return p?g.clientX>v.right+10||g.clientX<=v.right&&g.clientY>v.bottom&&g.clientX>=v.left:g.clientX>v.right&&g.clientY>v.top||g.clientX<=v.right&&g.clientY>v.bottom+10}(p,be,this)&&!Rt.animated){if(Rt===Gr)return lt(!1);if(Rt&&y===p.target&&(v=Rt),v&&(E=ro(v)),!1!==Yv(no,y,Gr,_,v,E,p,!!v))return gt(),y.appendChild(Gr),Co=y,Tt(),lt(!0)}else if(Rt&&function ene(g,p,y){var v=ro(Rf(y.el,0,y.options,!0));return p?g.clientX<v.left-10||g.clientY<v.top&&g.clientX<v.right:g.clientY<v.top-10||g.clientY<v.bottom&&g.clientX<v.left}(p,be,this)){var Xt=Rf(y,0,D,!0);if(Xt===Gr)return lt(!1);if(E=ro(v=Xt),!1!==Yv(no,y,Gr,_,v,E,p,!1))return gt(),y.insertBefore(Gr,Xt),Co=y,Tt(),lt(!0)}else if(v.parentNode===y){E=ro(v);var ur,_r,xn,Ur=Gr.parentNode!==y,$r=!function(p,y,v){var _=v?p.left:p.top,D=v?y.left:y.top;return _===D||(v?p.right:p.bottom)===(v?y.right:y.bottom)||_+(v?p.width:p.height)/2===D+(v?y.width:y.height)/2}(Gr.animated&&Gr.toRect||_,v.animated&&v.toRect||E,be),rn=be?"top":"left",Mn=A6(v,"top","top")||A6(Gr,"top","top"),On=Mn?Mn.scrollTop:void 0;if(jf!==v&&(_r=E[rn],tm=!1,$v=!$r&&D.invertSwap||Ur),ur=function rne(g,p,y,v,_,E,w,D){var O=v?g.clientY:g.clientX,A=v?y.height:y.width,W=v?y.top:y.left,q=v?y.bottom:y.right,_e=!1;if(!w)if(D&&Kv<A*_){if(!tm&&(1===em?O>W+A*E/2:O<q-A*E/2)&&(tm=!0),tm)_e=!0;else if(1===em?O<W+Kv:O>q-Kv)return-em}else if(O>W+A*(1-_)/2&&O<q-A*(1-_)/2)return function nne(g){return bo(Gr)<bo(g)?1:-1}(p);return(_e=_e||w)&&(O<W+A*E/2||O>q-A*E/2)?O>W+A/2?1:-1:0}(p,v,E,be,$r?1:D.swapThreshold,null==D.invertedSwapThreshold?D.swapThreshold:D.invertedSwapThreshold,$v,jf===v),0!==ur){var xi=bo(Gr);do{xn=Co.children[xi-=ur]}while(xn&&("none"===hn(xn,"display")||xn===Hn))}if(0===ur||xn===v)return lt(!1);jf=v,em=ur;var io=v.nextElementSibling,uo=!1,Fs=Yv(no,y,Gr,_,v,E,p,uo=1===ur);if(!1!==Fs)return(1===Fs||-1===Fs)&&(uo=1===Fs),Tw=!0,setTimeout(qre,30),gt(),uo&&!io?y.appendChild(Gr):v.parentNode.insertBefore(Gr,uo?io:v),Mn&&L6(Mn,0,On-Mn.scrollTop),Co=Gr.parentNode,void 0!==_r&&!$v&&(Kv=Math.abs(_r-ro(v)[rn])),Tt(),lt(!0)}if(y.contains(Gr))return lt(!1)}return!1}function dt(ka,nd){va(ka,We,gu({evt:p,isOwner:W,axis:be?"vertical":"horizontal",revert:w,dragRect:_,targetRect:E,canSort:q,fromSortable:_e,target:v,completed:lt,onMove:function(Uf,id){return Yv(no,y,Gr,_,Uf,ro(Uf),p,id)},changed:Tt},nd))}function gt(){dt("dragOverAnimationCapture"),We.captureAnimationState(),We!==_e&&_e.captureAnimationState()}function lt(ka){return dt("dragOverCompleted",{insertion:ka}),ka&&(W?A._hideClone():A._showClone(We),We!==_e&&(lo(Gr,Ds?Ds.options.ghostClass:A.options.ghostClass,!1),lo(Gr,D.ghostClass,!0)),Ds!==We&&We!==Ln.active?Ds=We:We===Ln.active&&Ds&&(Ds=null),_e===We&&(We._ignoreWhileAnimating=v),We.animateAll(function(){dt("dragOverAnimationComplete"),We._ignoreWhileAnimating=null}),We!==_e&&(_e.animateAll(),_e._ignoreWhileAnimating=null)),(v===Gr&&!Gr.animated||v===y&&!v.animated)&&(jf=null),!D.dragoverBubble&&!p.rootEl&&v!==document&&(Gr.parentNode[Ls]._isOutsideThisEl(p.target),!ka&&Kd(p)),!D.dragoverBubble&&p.stopPropagation&&p.stopPropagation(),qe=!0}function Tt(){Ua=bo(Gr),td=bo(Gr,D.draggable),ta({sortable:We,name:"change",toEl:y,newIndex:Ua,newDraggableIndex:td,originalEvent:p})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){oi(document,"mousemove",this._onTouchMove),oi(document,"touchmove",this._onTouchMove),oi(document,"pointermove",this._onTouchMove),oi(document,"dragover",Kd),oi(document,"mousemove",Kd),oi(document,"touchmove",Kd)},_offUpEvents:function(){var p=this.el.ownerDocument;oi(p,"mouseup",this._onDrop),oi(p,"touchend",this._onDrop),oi(p,"pointerup",this._onDrop),oi(p,"touchcancel",this._onDrop),oi(document,"selectstart",this)},_onDrop:function(p){var y=this.el,v=this.options;Ua=bo(Gr),td=bo(Gr,v.draggable),va("drop",this,{evt:p}),Co=Gr&&Gr.parentNode,Ua=bo(Gr),td=bo(Gr,v.draggable),Ln.eventCanceled||(Ff=!1,$v=!1,tm=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pw(this.cloneId),Pw(this._dragStartId),this.nativeDraggable&&(oi(document,"drop",this),oi(y,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),H0&&hn(document.body,"user-select",""),hn(Gr,"transform",""),p&&(q0&&(p.cancelable&&p.preventDefault(),!v.dropBubble&&p.stopPropagation()),Hn&&Hn.parentNode&&Hn.parentNode.removeChild(Hn),(no===Co||Ds&&"clone"!==Ds.lastPutMode)&&wo&&wo.parentNode&&wo.parentNode.removeChild(wo),Gr&&(this.nativeDraggable&&oi(Gr,"dragend",this),Aw(Gr),Gr.style["will-change"]="",q0&&!Ff&&lo(Gr,Ds?Ds.options.ghostClass:this.options.ghostClass,!1),lo(Gr,this.options.chosenClass,!1),ta({sortable:this,name:"unchoose",toEl:Co,newIndex:null,newDraggableIndex:null,originalEvent:p}),no!==Co?(Ua>=0&&(ta({rootEl:Co,name:"add",toEl:Co,fromEl:no,originalEvent:p}),ta({sortable:this,name:"remove",toEl:Co,originalEvent:p}),ta({rootEl:Co,name:"sort",toEl:Co,fromEl:no,originalEvent:p}),ta({sortable:this,name:"sort",toEl:Co,originalEvent:p})),Ds&&Ds.save()):Ua!==Nf&&Ua>=0&&(ta({sortable:this,name:"update",toEl:Co,originalEvent:p}),ta({sortable:this,name:"sort",toEl:Co,originalEvent:p})),Ln.active&&((null==Ua||-1===Ua)&&(Ua=Nf,td=Q0),ta({sortable:this,name:"end",toEl:Co,originalEvent:p}),this.save())))),this._nulling()},_nulling:function(){va("nulling",this),no=Gr=Co=Hn=Zd=wo=Vv=ed=$d=Nl=q0=Ua=td=Nf=Q0=jf=em=Ds=kv=Ln.dragged=Ln.ghost=Ln.clone=Ln.active=null,zv.forEach(function(p){p.checked=!0}),zv.length=Sw=Ow=0},handleEvent:function(p){switch(p.type){case"drop":case"dragend":this._onDrop(p);break;case"dragenter":case"dragover":Gr&&(this._onDragOver(p),function Qre(g){g.dataTransfer&&(g.dataTransfer.dropEffect="move"),g.cancelable&&g.preventDefault()}(p));break;case"selectstart":p.preventDefault()}},toArray:function(){for(var y,p=[],v=this.el.children,_=0,E=v.length,w=this.options;_<E;_++)Ll(y=v[_],w.draggable,this.el,!1)&&p.push(y.getAttribute(w.dataIdAttr)||ine(y));return p},sort:function(p,y){var v={},_=this.el;this.toArray().forEach(function(E,w){var D=_.children[w];Ll(D,this.options.draggable,_,!1)&&(v[E]=D)},this),y&&this.captureAnimationState(),p.forEach(function(E){v[E]&&(_.removeChild(v[E]),_.appendChild(v[E]))}),y&&this.animateAll()},save:function(){var p=this.options.store;p&&p.set&&p.set(this)},closest:function(p,y){return Ll(p,y||this.options.draggable,this.el,!1)},option:function(p,y){var v=this.options;if(void 0===y)return v[p];var _=J0.modifyOption(this,p,y);v[p]=void 0!==_?_:y,"group"===p&&k6(v)},destroy:function(){va("destroy",this);var p=this.el;p[Ls]=null,oi(p,"mousedown",this._onTapStart),oi(p,"touchstart",this._onTapStart),oi(p,"pointerdown",this._onTapStart),this.nativeDraggable&&(oi(p,"dragover",this),oi(p,"dragenter",this)),Array.prototype.forEach.call(p.querySelectorAll("[draggable]"),function(y){y.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Zv.splice(Zv.indexOf(this.el),1),this.el=p=null},_hideClone:function(){if(!ed){if(va("hideClone",this),Ln.eventCanceled)return;hn(wo,"display","none"),this.options.removeCloneOnHide&&wo.parentNode&&wo.parentNode.removeChild(wo),ed=!0}},_showClone:function(p){if("clone"===p.lastPutMode){if(ed){if(va("showClone",this),Ln.eventCanceled)return;Gr.parentNode!=no||this.options.group.revertClone?Zd?no.insertBefore(wo,Zd):no.appendChild(wo):no.insertBefore(wo,Gr),this.options.group.revertClone&&this.animate(Gr,wo),hn(wo,"display",""),ed=!1}}else this._hideClone()}},Gv&&fi(document,"touchmove",function(g){(Ln.active||Ff)&&g.cancelable&&g.preventDefault()}),Ln.utils={on:fi,off:oi,css:hn,find:T6,is:function(p,y){return!!Ll(p,y,p,!1)},extend:function Wre(g,p){if(g&&p)for(var y in p)p.hasOwnProperty(y)&&(g[y]=p[y]);return g},throttle:R6,closest:Ll,toggleClass:lo,clone:Mw,index:bo,nextTick:Jv,cancelNextTick:Pw,detectDirection:V6,getChild:Rf},Ln.get=function(g){return g[Ls]},Ln.mount=function(){for(var g=arguments.length,p=new Array(g),y=0;y<g;y++)p[y]=arguments[y];p[0].constructor===Array&&(p=p[0]),p.forEach(function(v){if(!v.prototype||!v.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(v));v.utils&&(Ln.utils=gu(gu({},Ln.utils),v.utils)),J0.mount(v)})},Ln.create=function(g,p){return new Ln(g,p)},Ln.version="1.14.0";var rm,Rw,Nw,Fw,Xv,nm,Go=[],Lw=!1;function Qv(){Go.forEach(function(g){clearInterval(g.pid)}),Go=[]}function $6(){clearInterval(nm)}var jw=R6(function(g,p,y,v){if(p.scroll){var W,_=(g.touches?g.touches[0]:g).clientX,E=(g.touches?g.touches[0]:g).clientY,w=p.scrollSensitivity,D=p.scrollSpeed,O=yu(),A=!1;Rw!==y&&(Rw=y,Qv(),W=p.scrollFn,!0===(rm=p.scroll)&&(rm=qc(y,!0)));var q=0,_e=rm;do{var be=_e,We=ro(be),qe=We.top,dt=We.bottom,gt=We.left,lt=We.right,Tt=We.width,Rt=We.height,Xt=void 0,ur=void 0,_r=be.scrollWidth,Ur=be.scrollHeight,$r=hn(be),rn=be.scrollLeft,Mn=be.scrollTop;be===O?(Xt=Tt<_r&&("auto"===$r.overflowX||"scroll"===$r.overflowX||"visible"===$r.overflowX),ur=Rt<Ur&&("auto"===$r.overflowY||"scroll"===$r.overflowY||"visible"===$r.overflowY)):(Xt=Tt<_r&&("auto"===$r.overflowX||"scroll"===$r.overflowX),ur=Rt<Ur&&("auto"===$r.overflowY||"scroll"===$r.overflowY));var On=Xt&&(Math.abs(lt-_)<=w&&rn+Tt<_r)-(Math.abs(gt-_)<=w&&!!rn),xn=ur&&(Math.abs(dt-E)<=w&&Mn+Rt<Ur)-(Math.abs(qe-E)<=w&&!!Mn);if(!Go[q])for(var xi=0;xi<=q;xi++)Go[xi]||(Go[xi]={});(Go[q].vx!=On||Go[q].vy!=xn||Go[q].el!==be)&&(Go[q].el=be,Go[q].vx=On,Go[q].vy=xn,clearInterval(Go[q].pid),(0!=On||0!=xn)&&(A=!0,Go[q].pid=setInterval(function(){v&&0===this.layer&&Ln.active._onTouchMove(Xv);var io=Go[this.layer].vy?Go[this.layer].vy*D:0,uo=Go[this.layer].vx?Go[this.layer].vx*D:0;"function"==typeof W&&"continue"!==W.call(Ln.dragged.parentNode[Ls],uo,io,g,Xv,Go[this.layer].el)||L6(Go[this.layer].el,uo,io)}.bind({layer:q}),24))),q++}while(p.bubbleScroll&&_e!==O&&(_e=qc(_e,!1)));Lw=A}},30),K6=function(p){var y=p.originalEvent,v=p.putSortable,_=p.dragEl,w=p.dispatchSortableEvent,O=p.unhideGhostForTarget;if(y){var A=v||p.activeSortable;(0,p.hideGhostForTarget)();var W=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:y,q=document.elementFromPoint(W.clientX,W.clientY);O(),A&&!A.el.contains(q)&&(w("spill"),this.onSpill({dragEl:_,putSortable:v}))}};function Bw(){}function Uw(){}Bw.prototype={startIndex:null,dragStart:function(p){this.startIndex=p.oldDraggableIndex},onSpill:function(p){var y=p.dragEl,v=p.putSortable;this.sortable.captureAnimationState(),v&&v.captureAnimationState();var _=Rf(this.sortable.el,this.startIndex,this.options);_?this.sortable.el.insertBefore(y,_):this.sortable.el.appendChild(y),this.sortable.animateAll(),v&&v.animateAll()},drop:K6},ul(Bw,{pluginName:"revertOnSpill"}),Uw.prototype={onSpill:function(p){var y=p.dragEl,_=p.putSortable||this.sortable;_.captureAnimationState(),y.parentNode&&y.parentNode.removeChild(y),_.animateAll()},drop:K6},ul(Uw,{pluginName:"removeOnSpill"}),Ln.mount(new function sne(){function g(){for(var p in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===p.charAt(0)&&"function"==typeof this[p]&&(this[p]=this[p].bind(this))}return g.prototype={dragStarted:function(y){var v=y.originalEvent;this.sortable.nativeDraggable?fi(document,"dragover",this._handleAutoScroll):fi(document,this.options.supportPointer?"pointermove":v.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(y){var v=y.originalEvent;!this.options.dragOverBubble&&!v.rootEl&&this._handleAutoScroll(v)},drop:function(){this.sortable.nativeDraggable?oi(document,"dragover",this._handleAutoScroll):(oi(document,"pointermove",this._handleFallbackAutoScroll),oi(document,"touchmove",this._handleFallbackAutoScroll),oi(document,"mousemove",this._handleFallbackAutoScroll)),$6(),Qv(),function Zre(){clearTimeout(Y0),Y0=void 0}()},nulling:function(){Xv=Rw=rm=Lw=nm=Nw=Fw=null,Go.length=0},_handleFallbackAutoScroll:function(y){this._handleAutoScroll(y,!0)},_handleAutoScroll:function(y,v){var _=this,E=(y.touches?y.touches[0]:y).clientX,w=(y.touches?y.touches[0]:y).clientY,D=document.elementFromPoint(E,w);if(Xv=y,v||this.options.forceAutoScrollFallback||G0||qu||H0){jw(y,this.options,D,v);var O=qc(D,!0);Lw&&(!nm||E!==Nw||w!==Fw)&&(nm&&$6(),nm=setInterval(function(){var A=qc(document.elementFromPoint(E,w),!0);A!==O&&(O=A,Qv()),jw(y,_.options,A,v)},10),Nw=E,Fw=w)}else{if(!this.options.bubbleScroll||qc(D,!0)===yu())return void Qv();jw(y,this.options,qc(D,!1),!1)}}},ul(g,{pluginName:"scroll",initializeByDefault:!0})}),Ln.mount(Uw,Bw);const une=Ln,zd="data-bookmark-uid",G6={addBookmark:!0,thumbnail:!0,time:!0},Vw=/^https:\/\/.*/i;let Zi=class extends ns.Z{constructor(g,p){super(g,p),this._handles=new Ra.Z,this._addInputNode=null,this._editInputNode=null,this._urlEditInputNode=null,this._addBookmarkButtonNode=null,this._focusAddBookmarkButton=!1,this._focusEditInputBox=!1,this._focusAddInputBox=!1,this._focusUrlEditInputBox=!1,this._sortable=null,this._sortableNode=null,this._focusSortUid=null,this._selectedSortUid=null,this._sortableSavedItems=null,this._editIncludeTimeExtent=null,this._userState=null,this.defaultCreateOptions=null,this.defaultEditOptions=null,this.bookmarks=null,this.disabled=!1,this.editingEnabled=!1,this.headingLevel=2,this.goToOverride=null,this.iconClass="esri-icon-bookmark",this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this.view=null,this.viewModel=new o6,this.visibleElements=Ot({},G6)}initialize(){this.own([(0,Br.S1)(this,"viewModel.bookmarks",()=>this._bookmarksInitialized()),(0,Br.S1)(this,"editingEnabled",()=>this._toggleSorting())])}destroy(){this._destroySortable(),this._handles.destroy(),this._handles=null,this._editMenu.destroy()}loadDependencies(){return Promise.all([Promise.all([C.e(8592),C.e(2432)]).then(C.bind(C,42432)),Promise.all([C.e(8592),C.e(51)]).then(C.bind(C,10051))])}get _editMenuItems(){var g,p;const{messages:y,_userState:v}=this,_=null==v||null==(g=v.editedBookmark)||null==(p=g.thumbnail)?void 0:p.url;return[new B0({label:null==y?void 0:y.menu.refreshThumbnail,iconClass:"esri-icon-refresh",clickFunction:()=>this._refreshThumbnail()}),new B0({label:Vw.test(_)?null==y?void 0:y.menu.editImageUrl:null==y?void 0:y.menu.useImageUrl,iconClass:"esri-icon-link",clickFunction:()=>this._startUseImageUrl()}),_?new B0({label:null==y?void 0:y.menu.removeThumbnail,iconClass:"esri-icon-erase",clickFunction:()=>this._removeThumbnail()}):null].filter(Boolean)}get _editMenu(){const{_editMenuItems:g,messages:p}=this,y=this._get("_editMenu");y&&y.destroy();const v=new Ire({iconClass:"esri-icon-handle-horizontal",label:null==p?void 0:p.menu.label});return v.items=g,v}castVisibleElements(g){return Ot(Ot({},G6),g)}endAddBookmark(){this._userState=null}goTo(g){return this.viewModel.goTo(g)}render(){const{state:g}=this.viewModel,p="loading"===g?this.renderLoading():this.renderBookmarks();return(0,Bt.u)("div",{class:this.classes("esri-bookmarks esri-widget--panel","esri-widget",{"esri-widget--disabled":this.disabled})},p)}startAddBookmark(){this._userState=new fw({state:"add"}),this._focusAddInputBox=!0,this.scheduleRender()}renderLoading(){return(0,Bt.u)("div",{class:"esri-bookmarks__loader-container",key:"loader"},(0,Bt.u)("div",{class:"esri-bookmarks__loader"}))}renderNoBookmarksContainer(){const{messages:g}=this;return(0,Bt.u)("div",{class:"esri-widget__content--empty",key:"no-bookmarks"},(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-widget__no-bookmark-icon","esri-icon-bookmark")}),(0,Bt.u)(tv,{level:this.headingLevel,class:this.classes("esri-widget__heading","esri-bookmarks__no-bookmarks-heading")},null==g?void 0:g.noBookmarksHeading),(0,Bt.u)("p",{class:"esri-bookmarks__no-bookmarks-description"},null==g?void 0:g.noBookmarksDescription))}renderAddBookmarkLoading(){var g;return(0,Bt.u)("div",{key:"adding-bookmark",class:"esri-bookmarks__adding-bookmark"},(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-icon-loading-indicator","esri-rotating")}),null==(g=this.messages)?void 0:g.addingBookmark)}renderBookmarkItems(g){if(!g)return null;const{_userState:p,editingEnabled:y}=this;return g.map(v=>y&&v&&p&&("edit"===p.state||"edit-thumbnail"===p.state)&&p.bookmark===v?"edit-thumbnail"===p.state?this.renderEditingBookmarkUrl(p.editedBookmark):this.renderEditingBookmark(p.editedBookmark):this.renderBookmark(v)).toArray()}renderBookmarksContainer(g){var p;const{_userState:y,editingEnabled:v}=this,_="add"===(null==y?void 0:y.state),E=v&&!_?this.renderAddBookmarkButton():null,w=v?_&&y.loading?this.renderAddBookmarkLoading():"add"===(null==y?void 0:y.state)?this.renderAddingBookmark():null:null;return[(0,Bt.u)("ul",{key:"bookmark-list","aria-label":null==(p=this.messages)?void 0:p.widgetLabel,class:this.classes("esri-bookmarks__list",{"esri-bookmarks__list--sortable":this.editingEnabled}),afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this},this.renderBookmarkItems(g)),E,w]}renderAddBookmarkButton(){var g;return this.visibleElements.addBookmark?(0,Bt.u)("div",{key:"add-bookmark-item",class:"esri-bookmarks__add-bookmark"},(0,Bt.u)("button",{class:this.classes("esri-button","esri-button--tertiary","esri-bookmarks__add-bookmark-button"),onclick:this.startAddBookmark,afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,"data-node-ref":"_addBookmarkButtonNode",bind:this,type:"button"},(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks__add-bookmark-icon","esri-icon-plus")}),null==(g=this.messages)?void 0:g.addBookmark)):null}renderBookmarks(){const{bookmarks:g}=this.viewModel,p=g&&g.filter(Boolean),y=p&&p.length,v=y||this.editingEnabled?this.renderBookmarksContainer(p):null;return[y?null:this.renderNoBookmarksContainer(),v]}renderEditContainer(g){const{messagesCommon:p}=this;return(0,Bt.u)("div",{class:"esri-bookmarks__bookmark-edit-button-container",key:"edit-container"},(0,Bt.u)("button",{title:null==p?void 0:p.edit,"aria-label":null==p?void 0:p.edit,"data-bookmark":g,onclick:this._showEditBookmarkForm,bind:this,class:"esri-bookmarks__bookmark-edit-button",type:"button"},(0,Bt.u)("span",{"aria-hidden":"true",class:"esri-icon-edit"})))}renderDragHandle(g){const{messagesCommon:p}=this;return(0,Bt.u)("div",Ot({role:"button",tabIndex:0,key:"drag-handle",bind:this,class:"esri-bookmarks_bookmark-drag-handle",onkeydown:this._dragHandleKeydown,afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,onblur:this._dragHandleBlur,"aria-pressed":this._selectedSortUid===g.uid?"true":"false","aria-label":null==p?void 0:p.dragHandleLabel,title:null==p?void 0:p.dragHandleTitle},{[zd]:g.uid}),(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks_bookmark-drag-handle-icon","esri-icon-handle-vertical")}))}renderBookmarkImageIcon(){return(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-bookmarks__bookmark-icon","esri-icon-bookmark")})}renderBookmarkImage(g){const{visibleElements:p}=this,{thumbnail:y}=g,v=y&&y.url||"";return p.thumbnail&&v?(0,Bt.u)("img",{src:v,alt:"",class:"esri-bookmarks__image"}):null}renderBookmarkTimeSwitch(g){const{messages:p}=this,{timeExtent:y}=g,{view:v}=this.viewModel;return v.timeExtent||y?(0,Bt.u)("calcite-label",{layout:"inline-space-between","disable-spacing":"true"},p.includeTimeExtent,(0,Bt.u)("calcite-switch",{scale:"s",checked:!!y,onCalciteSwitchChange:_=>this._editIncludeTimeExtent=!!_.detail.switched})):null}renderBookmarkTimeExtent(g){const{visibleElements:p}=this,{timeExtent:y}=g;return y?(0,Bt.u)("span",{class:"esri-bookmarks__time-extent"},[(0,dr.pC)(y.start)&&(0,Bt.u)("span",{key:"start-date-group",class:"esri-bookmarks__time-extent-group"},(0,Bt.u)("span",{key:"start-date",class:"esri-bookmarks__time-extent-date"},this._formatDate(y.start)),p.time&&(0,Bt.u)("span",{key:"start-time",class:"esri-bookmarks__time-extent-time"},this._formatTime(y.start))),(0,dr.pC)(y.end)&&((0,dr.Wi)(y.start)||y.start.getTime()!==y.end.getTime())&&(0,Bt.u)("span",{key:"end-date-group",class:"esri-bookmarks__time-extent-group"},(0,Bt.u)("span",{key:"end-date",class:"esri-bookmarks__time-extent-date"},this._formatDate(y.end)),p.time&&(0,Bt.u)("span",{key:"end-time",class:"esri-bookmarks__time-extent-time"},this._formatTime(y.end)))]):null}renderBookmarkButton(g){const{messagesCommon:p}=this,{name:y,timeExtent:v}=g,{abilities:_}=this.viewModel,E=y||(null==p?void 0:p.untitled),w=(0,Bt.u)("div",{class:"esri-bookmarks__bookmark-image-container"},this.renderBookmarkImage(g)||this.renderBookmarkImageIcon()),D=_.time&&v?(0,Bt.u)("span",{key:"time-extent",class:"esri-bookmarks__bookmark-time-extent"},this.renderBookmarkTimeExtent(g)):null;return(0,Bt.u)("button",{key:"bookmark-button",class:"esri-bookmarks__bookmark-button",bind:this,"data-bookmark":g,onclick:this._goToBookmark,type:"button"},w,(0,Bt.u)("div",{class:"esri-bookmarks__bookmark-label"},(0,Bt.u)("span",{key:"bookmark-title",class:"esri-bookmarks__bookmark-name"},E),D))}renderBookmark(g){const{activeBookmark:p}=this.viewModel,y={"esri-bookmarks__bookmark--active":p===g},v=this.editingEnabled?this.renderEditContainer(g):null,_={[zd]:g.uid},E=this.editingEnabled?this.renderDragHandle(g):null;return(0,Bt.u)("li",Ot({key:g,class:this.classes("esri-bookmarks__bookmark",y)},_),E,this.renderBookmarkButton(g),v)}renderEditingBookmarkName(g){const{messages:p,_userState:y}=this,v="name-required"===y.validationState;return(0,Bt.u)("label",{class:"esri-bookmarks__authoring-label"},null==p?void 0:p.title,v?(0,Bt.u)("strong",null,null==p?void 0:p.invalidTitle):null,(0,Bt.u)("input",{required:!0,bind:this,class:this.classes("esri-input",v?"esri-bookmarks__authoring-input--invalid":null),type:"text",value:g.name,afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,"data-bookmark":g,"data-node-ref":"_editInputNode",placeholder:null==p?void 0:p.titlePlaceholder}))}renderEditingBookmarkUrlActions(){const{messagesCommon:g}=this;return(0,Bt.u)("div",{class:"esri-bookmarks__authoring-actions"},(0,Bt.u)("input",{type:"button",value:null==g?void 0:g.back,class:this.classes("esri-button","esri-button--tertiary"),onclick:this._closeUrlEditBookmarkForm,bind:this}),(0,Bt.u)("input",{class:"esri-button",type:"submit",value:null==g?void 0:g.add}))}renderEditingBookmarkActions(){const{messagesCommon:g}=this,{bookmark:p}=this._userState;return(0,Bt.u)("div",{class:"esri-bookmarks__authoring-actions"},(0,Bt.u)("input",{type:"button",value:null==g?void 0:g.delete,class:this.classes("esri-button","esri-button--tertiary","esri-bookmarks__authoring-delete-button"),"data-bookmark":p,onclick:this._deleteBookmark,bind:this}),(0,Bt.u)("input",{type:"button",value:null==g?void 0:g.cancel,class:this.classes("esri-button","esri-button--tertiary"),onclick:this._closeEditBookmarkForm,bind:this}),(0,Bt.u)("input",{class:"esri-button",type:"submit",value:null==g?void 0:g.save}))}renderEditingBookmarkUrlInput(g){var p;const{messages:y,_userState:v}=this,_=null==(p=g.thumbnail)?void 0:p.url,E=Vw.test(_)?_:null,w="absolute-url-required"===v.validationState;return(0,Bt.u)("label",{class:"esri-bookmarks__authoring-label"},w?(0,Bt.u)("strong",null,null==y?void 0:y.invalidImageUrl):null,(0,Bt.u)("input",{required:!0,bind:this,class:this.classes("esri-input",w?"esri-bookmarks__authoring-input--invalid":null),type:"text",value:E,afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,"data-bookmark":g,"data-node-ref":"_urlEditInputNode",title:null==y?void 0:y.imageUrlTooltip,placeholder:y&&`https://<${y.imageUrlPlaceholder}>`}))}renderEditingBookmarkUrl(g){return(0,Bt.u)("li",Ot({key:"edit-bookmark-url-form",class:"esri-bookmarks__authoring-card"},{[zd]:g.uid}),(0,Bt.u)("form",{class:"esri-bookmarks__authoring-form",onsubmit:this._editBookmarkUrlSubmit,bind:this},this.renderEditingBookmarkUrlInput(g),this.renderEditingBookmarkUrlActions()))}renderEditingBookmark(g){const p={[zd]:g.uid},{abilities:y}=this.viewModel,v=y.time?(0,Bt.u)("div",{key:"edit-bookmark-time-container",class:"esri-bookmarks__time-extent-container"},this.renderBookmarkTimeSwitch(g),this._editIncludeTimeExtent&&this.renderBookmarkTimeExtent(g)):null;return(0,Bt.u)("li",Ot({key:"edit-bookmark-form",class:"esri-bookmarks__authoring-card"},p),(0,Bt.u)("form",{class:"esri-bookmarks__authoring-form",onsubmit:this._editBookmarkSubmit,bind:this},(0,Bt.u)("div",{class:"esri-bookmarks__authoring-container"},(0,Bt.u)("div",{class:"esri-bookmarks__bookmark-image-container"},this.renderBookmarkImage(g),this._editMenu.render()),this.renderEditingBookmarkName(g)),v,this.renderEditingBookmarkActions()))}renderAddingBookmarkName(){const{_userState:g,messages:p}=this,y="name-required"===g.validationState;return(0,Bt.u)("label",{class:"esri-bookmarks__authoring-label"},null==p?void 0:p.title,y?(0,Bt.u)("strong",null,null==p?void 0:p.invalidTitle):null,(0,Bt.u)("input",{required:!0,bind:this,class:this.classes("esri-input",y?"esri-bookmarks__authoring-input--invalid":null),type:"text",afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,"data-node-ref":"_addInputNode",value:"",placeholder:null==p?void 0:p.titlePlaceholder}))}renderAddingBookmarkActions(){const{messagesCommon:g}=this;return(0,Bt.u)("div",{class:this.classes("esri-bookmarks__authoring-actions")},(0,Bt.u)("input",{type:"button",value:null==g?void 0:g.cancel,class:this.classes("esri-button","esri-button--tertiary","esri-bookmarks__authoring-cancel-button"),onclick:this._endAddBookmark.bind(this),bind:this}),(0,Bt.u)("input",{class:"esri-button",type:"submit",value:null==g?void 0:g.add}))}renderAddingBookmark(){return(0,Bt.u)("div",{key:"add-bookmark-form",class:"esri-bookmarks__authoring-card"},(0,Bt.u)("form",{class:"esri-bookmarks__authoring-form",onsubmit:this._addBookmarkSubmit,bind:this},this.renderAddingBookmarkName(),this.renderAddingBookmarkActions()))}_formatDate(g){return g?(0,Nc.p6)(g,(0,Nc.Ze)("short-date")):null}_formatTime(g){return g?(0,Nc.p6)(g,(0,Nc.Ze)("long-time")):null}_dragHandleBlur(){this._selectedSortUid=null,this.scheduleRender()}_dragHandleKeydown(g){const{_sortableSavedItems:p}=this,v=(0,Rc.kK)(g);if(-1===["ArrowDown","ArrowUp","Escape","Tab"," ","Enter"].indexOf(v))return;const{_sortable:_,_selectedSortUid:E}=this,w=_.toArray(),D=g.target.getAttribute(zd),O=w.indexOf(D);if((0,Lo.pf)(v)){const W=E&&E===D;return this._selectedSortUid=W?null:D,this._sortableSavedItems=W?null:this._sortable.toArray(),void this.scheduleRender()}if("Tab"===v)return this._selectedSortUid=null,void this.scheduleRender();if("Escape"===v&&p)return g.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(p,_,D),void this.scheduleRender();if(-1===O||!E)return;const A="ArrowUp"===v?O-1:O+1;A>=w.length||A<=-1||(function cne(g,p,y){g.splice(y,0,g.splice(p,1)[0])}(w,O,A),this._updateSortItems(w,_,D))}_updateSortItems(g,p,y){p.sort(g),this._sortBookmarks(p),this._focusSortUid=y,this._selectedSortUid=y}_focusDragHandle(g){const{_focusSortUid:p}=this;!g||!p||g.getAttribute(zd)===p&&(g.focus(),this._focusSortUid=null)}_toggleSorting(){const{_sortable:g,_sortableNode:p,editingEnabled:y}=this;if(p)if(g)g.option("disabled",!y);else{const v=une.create(p,{dataIdAttr:zd,handle:".esri-bookmarks_bookmark-drag-handle",group:"bookmarks",disabled:!y,onSort:()=>this._sortBookmarks(v)});this._sortable=v}}_sortNodeCreated(g){this._sortableNode=g,this._toggleSorting()}_sortBookmarks(g){const{bookmarks:p}=this.viewModel;if(!p)return;const y=g.toArray();p.sort((v,_)=>{const E=y.indexOf(v.uid),w=y.indexOf(_.uid);return E>w?1:E<w?-1:0})}_destroySortable(){const{_sortable:g}=this;g&&g.destroy(),this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=!0,this.endAddBookmark()}_bookmarksInitialized(){const g="bookmarks-init",{_handles:p}=this;p.remove(g),p.add((0,Br.on)(this,"viewModel.bookmarks","change",()=>this._bookmarksChanged()),g)}_bookmarksChanged(){const g="bookmarks-change",{bookmarks:p}=this.viewModel,{_handles:y}=this;y.remove(g);const v=p.map(_=>(0,Br.YP)(_,["active","name","thumbnail.url"],()=>this.scheduleRender()));y.add(v,g),this.scheduleRender()}_showEditBookmarkForm(g){const p=g.currentTarget["data-bookmark"];this._editIncludeTimeExtent=!!p.timeExtent,this._focusEditInputBox=!0,this._userState=new fw({bookmark:p,state:"edit"}),this.viewModel.goTo(p),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0,this._userState.state="edit"}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(g){g.preventDefault();const{_addInputNode:p,_userState:y}=this,v=p&&p.value.trim();v?(y.loading=!0,this.viewModel.createBookmark().then(_=>{_.name=v,this.viewModel.bookmarks.add(_),this._endAddBookmark()})):y.validationState="name-required"}_editBookmarkAndClose(g,p){var y=this;return(0,qr.Z)(function*(){const{viewModel:v}=y;yield v.editBookmark(g,Ot(Ot({},v.defaultEditOptions),p)),y._closeEditBookmarkForm()})()}_editBookmarkSubmit(g){g.preventDefault();const{_editInputNode:p,_userState:y,_editIncludeTimeExtent:v}=this,_=p&&p.value.trim();_?(y.bookmark.name=_,y.bookmark.thumbnail=y.editedBookmark.thumbnail,v||(y.bookmark.timeExtent=null),this._editBookmarkAndClose(y.bookmark,{takeScreenshot:!1,captureTimeExtent:v})):y.validationState="name-required"}_storeAddBookmarkButton(g){this._addBookmarkButtonNode=g,this._focusAddBookmark()}_storeEditInput(g){this._editInputNode=g,this._focusEditInput()}_storeAddInput(g){this._addInputNode=g,this._focusAddInput()}_storeUrlEditInput(g){this._urlEditInputNode=g,this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(g){this.viewModel.bookmarks.remove(g.currentTarget["data-bookmark"])}_goToBookmark(g){const p=g.currentTarget["data-bookmark"];this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(p)}_refreshThumbnail(){var g=this;return(0,qr.Z)(function*(){const{_userState:p,_editMenu:y,viewModel:v}=g;p.validationState=void 0,yield v.editBookmark(g._userState.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1,captureTimeExtent:!1}),y.open=!1,g._focusEditInputBox=!0,g.scheduleRender()})()}_removeThumbnail(){const{_userState:g,_editMenu:p}=this;g.editedBookmark.thumbnail=null,g.validationState=void 0,p.open=!1,this._focusEditInputBox=!0,this.scheduleRender()}_startUseImageUrl(){this._userState.state="edit-thumbnail",this._editMenu.open=!1,this._focusUrlEditInputBox=!0,this.scheduleRender()}_editBookmarkUrlSubmit(g){g.preventDefault();const{_urlEditInputNode:p,_userState:y}=this,v=p.value;Vw.test(v)?(v&&(y.editedBookmark.thumbnail=new df({url:v})),this._closeUrlEditBookmarkForm()):y.validationState="absolute-url-required"}};(0,we._)([(0,Re.Cb)()],Zi.prototype,"_editIncludeTimeExtent",void 0),(0,we._)([(0,Re.Cb)({type:fw})],Zi.prototype,"_userState",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],Zi.prototype,"_editMenuItems",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Zi.prototype,"_editMenu",null),(0,we._)([(0,an.B)("viewModel.defaultCreateOptions")],Zi.prototype,"defaultCreateOptions",void 0),(0,we._)([(0,an.B)("viewModel.defaultEditOptions")],Zi.prototype,"defaultEditOptions",void 0),(0,we._)([(0,an.B)("viewModel.bookmarks")],Zi.prototype,"bookmarks",void 0),(0,we._)([(0,Re.Cb)()],Zi.prototype,"disabled",void 0),(0,we._)([(0,Re.Cb)()],Zi.prototype,"editingEnabled",void 0),(0,we._)([(0,Re.Cb)()],Zi.prototype,"headingLevel",void 0),(0,we._)([(0,an.B)("viewModel.goToOverride")],Zi.prototype,"goToOverride",void 0),(0,we._)([(0,Re.Cb)()],Zi.prototype,"iconClass",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Zi.prototype,"label",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Bookmarks/t9n/Bookmarks")],Zi.prototype,"messages",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/t9n/common")],Zi.prototype,"messagesCommon",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/core/t9n/Units")],Zi.prototype,"messagesUnits",void 0),(0,we._)([(0,Re.Cb)()],Zi.prototype,"uiStrings",void 0),(0,we._)([(0,an.B)("viewModel.view")],Zi.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:o6}),VR(["select-bookmark","bookmark-edit","bookmark-select"])],Zi.prototype,"viewModel",void 0),(0,we._)([(0,Re.Cb)()],Zi.prototype,"visibleElements",void 0),(0,we._)([(0,fa.p)("visibleElements")],Zi.prototype,"castVisibleElements",null),(0,we._)([(0,Re.Cb)()],Zi.prototype,"endAddBookmark",null),(0,we._)([(0,Re.Cb)()],Zi.prototype,"startAddBookmark",null),Zi=(0,we._)([(0,Tr.j)("esri.widgets.Bookmarks")],Zi);const fne=Zi;let rd=class extends pi.Z{constructor(g){super(g),this._viewpointHandle=null,this._handles=new Ra.Z,this.group=null}initialize(){this._handles.add((0,Br.on)(this,"view.ui","expand",g=>{const{target:p}=g;p&&p!==this&&p.expanded&&p.group&&p.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(g){this._set("autoCollapse",g),this._watchViewpoint()}set expanded(g){const p=!!g;this._set("expanded",p);const y=this.get("view.ui");y&&y.emit("expand",{target:this}),this._viewpointHandleChange(p)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(g){this._get("view")!==g&&(this._set("view",g),g&&(0,Br.LR)(g,"ready",()=>{this.view===g&&this._watchViewpoint()}))}_viewpointHandleChange(g){this._viewpointHandle&&(g?(0,Br.LR)(this.view,"stationary",()=>this._viewpointHandle.resume()):this._viewpointHandle.pause())}_watchViewpoint(){const g="viewpoint";this._handles.remove(g),this._viewpointHandle=null;const{autoCollapse:p,view:y}=this;if(y&&p){const _=(0,Br.Wy)(y,"3d"===y.type?"camera":"viewpoint",()=>this._collapse());this._handles.add(_,g),this._viewpointHandle=_}}_collapse(){this.expanded=!1}};(0,we._)([(0,Re.Cb)({value:!1})],rd.prototype,"autoCollapse",null),(0,we._)([(0,Re.Cb)({value:!1})],rd.prototype,"expanded",null),(0,we._)([(0,Re.Cb)()],rd.prototype,"group",void 0),(0,we._)([(0,Re.Cb)({readOnly:!0})],rd.prototype,"state",null),(0,we._)([(0,Re.Cb)({value:null})],rd.prototype,"view",null),rd=(0,we._)([(0,Tr.j)("esri.widgets.Expand.ExpandViewModel")],rd);const H6=rd;let Mo=class extends ns.Z{constructor(g,p){super(g,p),this.autoCollapse=null,this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expanded=null,this.expandTooltip="",this.group=null,this.iconNumber=0,this.label=void 0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.view=null,this.viewModel=new H6,this._handleKeyDown=y=>{const{closeOnEsc:v,_toggleButtonEl:_,expanded:E}=this;!E||!v||y.target===_||"Escape"!==y.key||("function"==typeof v?v(y):v)&&(this.expanded=!1,null==_||_.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:g,messagesCommon:p,collapseTooltip:y,expandTooltip:v}=this;return g?y||p.collapse:v||p.expand}get collapseIconClass(){return"esri-icon-collapse"}set collapseIconClass(g){g?this._override("collapseIconClass",g):this._clearOverride("collapseIconClass")}get expandIconClass(){return(0,gf.Qd)(this.content)?this.content.iconClass:"esri-icon-expand"}set expandIconClass(g){g?this._override("expandIconClass",g):this._clearOverride("expandIconClass")}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:g}=this;return(0,Bt.u)("div",{class:this.classes("esri-expand esri-widget",{"esri-expand--auto":"auto"===g,"esri-expand--drawer":"drawer"===g,"esri-expand--floating":"floating"===g}),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:g}=this;return(0,Bt.u)("div",{class:this.classes("esri-expand__container",{"esri-expand__container--expanded":g})},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:g}=this;return(0,Bt.u)("div",{bind:this,onclick:this._toggle,class:this.classes("esri-expand__mask",{"esri-expand__mask--expanded":g})})}renderBadgeNumber(){const{expanded:g,iconNumber:p}=this;return p&&!g?(0,Bt.u)("span",{key:"expand__icon-number",class:"esri-expand__icon-number"},p):null}renderPanelNumber(){const{iconNumber:g,expanded:p}=this;return g&&p?(0,Bt.u)("span",{key:"expand__expand-icon-number",class:this.classes("esri-expand__icon-number","esri-expand__icon-number--expanded")},g):null}renderIcon(){const{collapseIconClass:g,expandIconClass:p,expanded:y}=this,v={"esri-expand__icon--expanded":y,[g]:y,[p]:!y};return g===p&&(v[g]=!0),(0,Bt.u)("span",{"aria-hidden":"true",class:this.classes("esri-collapse__icon",v)})}renderTitle(){return(0,Bt.u)("span",{class:"esri-icon-font-fallback-text"},this.expandTitle)}renderExpandButton(){const{expanded:g,expandTitle:p,contentId:y}=this;return(0,Bt.u)("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":y,"aria-expanded":g?"true":"false",bind:this,class:"esri-widget--button",onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:p},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return(0,Bt.u)("div",{class:"esri-expand__panel"},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:g,contentId:p,content:y}=this,_={id:p,role:"region",class:this.classes("esri-expand__content",{"esri-expand__content--expanded":g})};return"string"==typeof y?(0,Bt.u)("div",Ot({key:"content__string",innerHTML:y},_)):(0,gf.Qd)(y)?(0,Bt.u)("div",Ot({key:"content__widget"},_),y.render()):y instanceof HTMLElement?(0,Bt.u)("div",Ot({key:"content__html-element",bind:y,afterCreate:this._attachToNode},_)):(0,gf.o)(y)?(0,Bt.u)("div",Ot({key:"content__node",bind:y.domNode,afterCreate:this._attachToNode},_)):null}_toggle(){this.toggle()}_attachToNode(g){g.appendChild(this)}_storeToggleButtonEl(g){this._toggleButtonEl=g}};(0,we._)([(0,Re.Cb)({readOnly:!0})],Mo.prototype,"contentId",null),(0,we._)([(0,Re.Cb)({readOnly:!0})],Mo.prototype,"expandTitle",null),(0,we._)([(0,an.B)("viewModel.autoCollapse")],Mo.prototype,"autoCollapse",void 0),(0,we._)([(0,Re.Cb)()],Mo.prototype,"closeOnEsc",void 0),(0,we._)([(0,Re.Cb)()],Mo.prototype,"collapseIconClass",null),(0,we._)([(0,Re.Cb)()],Mo.prototype,"collapseTooltip",void 0),(0,we._)([(0,Re.Cb)()],Mo.prototype,"content",void 0),(0,we._)([(0,an.B)("viewModel.expanded")],Mo.prototype,"expanded",void 0),(0,we._)([(0,Re.Cb)()],Mo.prototype,"expandIconClass",null),(0,we._)([(0,Re.Cb)()],Mo.prototype,"expandTooltip",void 0),(0,we._)([(0,an.B)("viewModel.group")],Mo.prototype,"group",void 0),(0,we._)([(0,Re.Cb)()],Mo.prototype,"iconNumber",void 0),(0,we._)([(0,Re.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Mo.prototype,"label",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/widgets/Expand/t9n/Expand")],Mo.prototype,"messages",void 0),(0,we._)([(0,Re.Cb)(),(0,is.H)("esri/t9n/common")],Mo.prototype,"messagesCommon",void 0),(0,we._)([(0,Re.Cb)()],Mo.prototype,"mode",void 0),(0,we._)([(0,an.B)("viewModel.view")],Mo.prototype,"view",void 0),(0,we._)([(0,Re.Cb)({type:H6})],Mo.prototype,"viewModel",void 0),(0,we._)([(0,Na.h)()],Mo.prototype,"_toggle",null),Mo=(0,we._)([(0,Tr.j)("esri.widgets.Expand")],Mo);const pne=Mo,mne=["mapViewNode"],gne=[{path:"",redirectTo:"geo",pathMatch:"full"},{path:"geo",component:gJ},{path:"map",component:(()=>{class g{constructor(){this.view=null}initializeMap(){const y=this.mapViewEl.nativeElement,v=new z3({portalItem:{id:"aa1d3f80270146208328cf66d022e09c"}}),_=new q8({container:y,map:v}),E=new fne({view:_,editingEnabled:!0}),w=new pne({view:_,content:E,expanded:!0});return _.ui.add(w,"top-right"),v.when(()=>{v.bookmarks&&v.bookmarks.length?console.log("Bookmarks: ",v.bookmarks.length):console.log("No bookmarks in this webmap.")}),this.view=_,this.view.when()}ngOnInit(){this.initializeMap().then(()=>{console.log("The map is ready.")})}ngOnDestroy(){this.view&&this.view.destroy()}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275cmp=jl({type:g,selectors:[["ng-component"]],viewQuery:function(y,v){if(1&y&&EE(mne,7),2&y){let _;Tp(_=Ap())&&(v.mapViewEl=_.first)}},decls:2,vars:0,consts:[["mapViewNode",""]],template:function(y,v){1&y&&yl(0,"div",null,0)},styles:['@import"https://js.arcgis.com/4.22/@arcgis/core/assets/esri/themes/light/main.css";.esri-view[_ngcontent-%COMP%], #mapViewNode[_ngcontent-%COMP%]{padding:0;margin:0;height:100%;width:100%}']}),g})()},{path:"scan",component:kY}];let yne=(()=>{class g{}return g.\u0275fac=function(y){return new(y||g)},g.\u0275mod=ra({type:g}),g.\u0275inj=Lt({imports:[[HT.forRoot(gne)],HT]}),g})(),vne=(()=>{class g{constructor(){this.title="ANB Fauna & Flora"}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275cmp=jl({type:g,selectors:[["app-root"]],decls:36,vars:1,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],["role","main",1,"content"],[1,"card","highlight-card","card-small"],["id","rocket","xmlns","http://www.w3.org/2000/svg","width","101.678","height","101.678","viewBox","0 0 101.678 101.678"],["id","Group_83","data-name","Group 83","transform","translate(-141 -696)"],["id","Ellipse_8","data-name","Ellipse 8","cx","50.839","cy","50.839","r","50.839","transform","translate(141 696)","fill","#dd0031"],["id","Group_47","data-name","Group 47","transform","translate(165.185 720.185)"],["id","Path_33","data-name","Path 33","d","M3.4,42.615a3.084,3.084,0,0,0,3.553,3.553,21.419,21.419,0,0,0,12.215-6.107L9.511,30.4A21.419,21.419,0,0,0,3.4,42.615Z","transform","translate(0.371 3.363)","fill","#fff"],["id","Path_34","data-name","Path 34","d","M53.3,3.221A3.09,3.09,0,0,0,50.081,0,48.227,48.227,0,0,0,18.322,13.437c-6-1.666-14.991-1.221-18.322,7.218A33.892,33.892,0,0,1,9.439,25.1l-.333.666a3.013,3.013,0,0,0,.555,3.553L23.985,43.641a2.9,2.9,0,0,0,3.553.555l.666-.333A33.892,33.892,0,0,1,32.647,53.3c8.55-3.664,8.884-12.326,7.218-18.322A48.227,48.227,0,0,0,53.3,3.221ZM34.424,9.772a6.439,6.439,0,1,1,9.106,9.106,6.368,6.368,0,0,1-9.106,0A6.467,6.467,0,0,1,34.424,9.772Z","transform","translate(0 0.005)","fill","#fff"],["id","rocket-smoke","xmlns","http://www.w3.org/2000/svg","width","516.119","height","1083.632","viewBox","0 0 516.119 1083.632"],["id","Path_40","data-name","Path 40","d","M644.6,141S143.02,215.537,147.049,870.207s342.774,201.755,342.774,201.755S404.659,847.213,388.815,762.2c-27.116-145.51-11.551-384.124,271.9-609.1C671.15,139.365,644.6,141,644.6,141Z","transform","translate(-147.025 -140.939)","fill","#f5f5f5"],[1,"card-container"],["routerLink","/geo",1,"card"],["routerLink","/scan",1,"card"],["routerLink","/map",1,"card"],["id","clouds","xmlns","http://www.w3.org/2000/svg","width","2611.084","height","485.677","viewBox","0 0 2611.084 485.677"],["id","Path_39","data-name","Path 39","d","M2379.709,863.793c10-93-77-171-168-149-52-114-225-105-264,15-75,3-140,59-152,133-30,2.83-66.725,9.829-93.5,26.25-26.771-16.421-63.5-23.42-93.5-26.25-12-74-77-130-152-133-39-120-212-129-264-15-54.084-13.075-106.753,9.173-138.488,48.9-31.734-39.726-84.4-61.974-138.487-48.9-52-114-225-105-264,15a162.027,162.027,0,0,0-103.147,43.044c-30.633-45.365-87.1-72.091-145.206-58.044-52-114-225-105-264,15-75,3-140,59-152,133-53,5-127,23-130,83-2,42,35,72,70,86,49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33,61.112,8.015,113.854-5.72,150.492-29.764a165.62,165.62,0,0,0,110.861-3.236c47,94,178,113,251,33,31.385,4.116,60.563,2.495,86.487-3.311,25.924,5.806,55.1,7.427,86.488,3.311,73,80,204,61,251-33a165.625,165.625,0,0,0,120,0c51,13,108,15,157-5a147.188,147.188,0,0,0,33.5-18.694,147.217,147.217,0,0,0,33.5,18.694c49,20,106,18,157,5a165.625,165.625,0,0,0,120,0c47,94,178,113,251,33C2446.709,1093.793,2554.709,922.793,2379.709,863.793Z","transform","translate(142.69 -634.312)","fill","#eee"]],template:function(y,v){1&y&&(Vo(0,"div",0),yl(1,"img",1),Vo(2,"span"),Ka(3,"Welcome"),ko(),yl(4,"div",2),ko(),Vo(5,"div",3)(6,"div",4),Om(),Vo(7,"svg",5)(8,"title"),Ka(9,"Rocket Ship"),ko(),Vo(10,"g",6),yl(11,"circle",7),Vo(12,"g",8),yl(13,"path",9)(14,"path",10),ko()()(),Im(),Vo(15,"span"),Ka(16),ko(),Om(),Vo(17,"svg",11)(18,"title"),Ka(19,"Rocket Ship Smoke"),ko(),yl(20,"path",12),ko()(),Im(),Vo(21,"div",13)(22,"a",14)(23,"span"),Ka(24,"Geolocation"),ko()(),Vo(25,"a",15)(26,"span"),Ka(27,"QR-Code"),ko()(),Vo(28,"a",16)(29,"span"),Ka(30,"Map"),ko()(),Om(),Vo(31,"svg",17)(32,"title"),Ka(33,"Gray Clouds Background"),ko(),yl(34,"path",18),ko()(),Im(),yl(35,"router-outlet"),ko()),2&y&&(function px(g){mx(ci(),Ir(),$s()+g,Mm())}(16),lg("",v.title," app is running!"))},directives:[ty,Cb],styles:["",'[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }']}),g})();let _ne=(()=>{class g{constructor(){this.view=null}createMap(y){var v=this;return(0,qr.Z)(function*(){const _=new z3({portalItem:{id:"aa1d3f80270146208328cf66d022e09c"}}),E=new q8({container:y,map:_});return _.when(()=>{_.bookmarks&&_.bookmarks.length?console.log("Bookmarks: ",_.bookmarks.length):console.log("No bookmarks in this webmap.")}),v.view=E,v.view.when()})()}destroyMap(){this.view&&this.view.destroy()}}return g.\u0275fac=function(y){return new(y||g)},g.\u0275prov=xt({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),Ene=(()=>{class g{}return g.\u0275fac=function(y){return new(y||g)},g.\u0275mod=ra({type:g,bootstrap:[vne]}),g.\u0275inj=Lt({providers:[_ne],imports:[[KU,yne,dJ.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),VY]]}),g})();(function Dj(){JO=!1})(),ZU().bootstrapModule(Ene).catch(g=>console.error(g))},76210:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z5:()=>yn,AA:()=>Vt,yM:()=>Dr,K3:()=>Gn,h:()=>Mt,GH:()=>Yr,YY:()=>Kr});var x=C(15861);let te,oe,Y,B=!1,X=!1,Z=!1,z=!1,ae=null,V=!1;const P="undefined"!=typeof window?window:{},$=P.document||{head:{}},H={$flags$:0,$resourcesUrl$:"",jmp:Be=>Be(),raf:Be=>requestAnimationFrame(Be),ael:(Be,nt,Ct,Ne)=>Be.addEventListener(nt,Ct,Ne),rel:(Be,nt,Ct,Ne)=>Be.removeEventListener(nt,Ct,Ne),ce:(Be,nt)=>new CustomEvent(Be,nt)},ye=(()=>{let Be=!1;try{$.addEventListener("e",null,Object.defineProperty({},"passive",{get(){Be=!0}}))}catch(nt){}return Be})(),ge=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(Be){}return!1})(),Q=(Be,nt,Ct,Ne)=>{Ct&&Ct.map(([ke,ot,Dt])=>{const kt=ue(Be,ke),Jt=pe(nt,Dt),ir=me(ke);H.ael(kt,ot,Jt,ir),(nt.$rmListeners$=nt.$rmListeners$||[]).push(()=>H.rel(kt,ot,Jt,ir))})},pe=(Be,nt)=>Ct=>{try{Be.$hostElement$[nt](Ct)}catch(Ne){jn(Ne)}},ue=(Be,nt)=>4&nt?$:8&nt?P:16&nt?$.body:Be,me=Be=>ye?{passive:0!=(1&Be),capture:0!=(2&Be)}:0!=(2&Be),je="http://www.w3.org/1999/xlink",Ye=new WeakMap,Ae=(Be,nt,Ct,Ne)=>{let ke=Je(nt,Ct),ot=Lt.get(ke);if(Be=11===Be.nodeType?Be:$,ot)if("string"==typeof ot){let kt,Dt=Ye.get(Be=Be.head||Be);Dt||Ye.set(Be,Dt=new Set),Dt.has(ke)||(kt=$.createElement("style"),kt.innerHTML=ot,Be.insertBefore(kt,Be.querySelector("link")),Dt&&Dt.add(ke))}else!Be.adoptedStyleSheets.includes(ot)&&(Be.adoptedStyleSheets=[...Be.adoptedStyleSheets,ot]);return ke},Je=(Be,nt)=>"sc-"+(nt&&32&Be.$flags$?Be.$tagName$+"-"+nt:Be.$tagName$),pt={},at=Be=>"object"==(Be=typeof Be)||"function"===Be,Mt=(Be,nt,...Ct)=>{let Ne=null,ke=null,ot=null,Dt=!1,kt=!1,Jt=[];const ir=Zr=>{for(let Fr=0;Fr<Zr.length;Fr++)Ne=Zr[Fr],Array.isArray(Ne)?ir(Ne):null!=Ne&&"boolean"!=typeof Ne&&((Dt="function"!=typeof Be&&!at(Ne))&&(Ne=String(Ne)),Dt&&kt?Jt[Jt.length-1].$text$+=Ne:Jt.push(Dt?Pt(null,Ne):Ne),kt=Dt)};if(ir(Ct),nt&&(nt.key&&(ke=nt.key),nt.name&&(ot=nt.name),true)){const Zr=nt.className||nt.class;Zr&&(nt.class="object"!=typeof Zr?Zr:Object.keys(Zr).filter(Fr=>Zr[Fr]).join(" "))}if("function"==typeof Be)return Be(null===nt?{}:nt,Jt,rr);const Sr=Pt(Be,null);return Sr.$attrs$=nt,Jt.length>0&&(Sr.$children$=Jt),Sr.$key$=ke,Sr.$name$=ot,Sr},Pt=(Be,nt)=>{const Ct={$flags$:0,$tag$:Be,$text$:nt,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return Ct},Vt={},Zt=Be=>Be&&Be.$tag$===Vt,rr={forEach:(Be,nt)=>Be.map(vr).forEach(nt),map:(Be,nt)=>Be.map(vr).map(nt).map(yr)},vr=Be=>({vattrs:Be.$attrs$,vchildren:Be.$children$,vkey:Be.$key$,vname:Be.$name$,vtag:Be.$tag$,vtext:Be.$text$}),yr=Be=>{if("function"==typeof Be.vtag){const Ct=Object.assign({},Be.vattrs);return Be.vkey&&(Ct.key=Be.vkey),Be.vname&&(Ct.name=Be.vname),Mt(Be.vtag,Ct,...Be.vchildren||[])}const nt=Pt(Be.vtag,Be.vtext);return nt.$attrs$=Be.vattrs,nt.$children$=Be.vchildren,nt.$key$=Be.vkey,nt.$name$=Be.vname,nt},_t=(Be,nt,Ct,Ne,ke,ot)=>{if(Ct!==Ne){let Dt=Qi(Be,nt),kt=nt.toLowerCase();if("class"===nt){const Jt=Be.classList,ir=Ht(Ct),Sr=Ht(Ne);Jt.remove(...ir.filter(Zr=>Zr&&!Sr.includes(Zr))),Jt.add(...Sr.filter(Zr=>Zr&&!ir.includes(Zr)))}else if("style"===nt){for(const Jt in Ct)(!Ne||null==Ne[Jt])&&(Jt.includes("-")?Be.style.removeProperty(Jt):Be.style[Jt]="");for(const Jt in Ne)(!Ct||Ne[Jt]!==Ct[Jt])&&(Jt.includes("-")?Be.style.setProperty(Jt,Ne[Jt]):Be.style[Jt]=Ne[Jt])}else if("key"!==nt)if("ref"===nt)Ne&&Ne(Be);else if(Be.__lookupSetter__(nt)||"o"!==nt[0]||"n"!==nt[1]){{const Jt=at(Ne);if((Dt||Jt&&null!==Ne)&&!ke)try{if(Be.tagName.includes("-"))Be[nt]=Ne;else{let Sr=null==Ne?"":Ne;"list"===nt?Dt=!1:(null==Ct||Be[nt]!=Sr)&&(Be[nt]=Sr)}}catch(Sr){}let ir=!1;kt!==(kt=kt.replace(/^xlink\:?/,""))&&(nt=kt,ir=!0),null==Ne||!1===Ne?(!1!==Ne||""===Be.getAttribute(nt))&&(ir?Be.removeAttributeNS(je,nt):Be.removeAttribute(nt)):(!Dt||4&ot||ke)&&!Jt&&(Ne=!0===Ne?"":Ne,ir?Be.setAttributeNS(je,nt,Ne):Be.setAttribute(nt,Ne))}}else nt="-"===nt[2]?nt.slice(3):Qi(P,kt)?kt.slice(2):kt[2]+nt.slice(3),Ct&&H.rel(Be,nt,Ct,!1),Ne&&H.ael(Be,nt,Ne,!1)}},$t=/\s/,Ht=Be=>Be?Be.split($t):[],er=(Be,nt,Ct,Ne)=>{const ke=11===nt.$elm$.nodeType&&nt.$elm$.host?nt.$elm$.host:nt.$elm$,ot=Be&&Be.$attrs$||pt,Dt=nt.$attrs$||pt;for(Ne in ot)Ne in Dt||_t(ke,Ne,ot[Ne],void 0,Ct,nt.$flags$);for(Ne in Dt)_t(ke,Ne,ot[Ne],Dt[Ne],Ct,nt.$flags$)},lr=(Be,nt,Ct,Ne)=>{let Dt,kt,Jt,ke=nt.$children$[Ct],ot=0;if(!B&&(Z=!0,"slot"===ke.$tag$&&(te&&Ne.classList.add(te+"-s"),ke.$flags$|=ke.$children$?2:1)),null!==ke.$text$)Dt=ke.$elm$=$.createTextNode(ke.$text$);else if(1&ke.$flags$)Dt=ke.$elm$=$.createTextNode("");else{if(!z&&(z="svg"===ke.$tag$),Dt=ke.$elm$=$.createElementNS(z?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&ke.$flags$?"slot-fb":ke.$tag$),z&&"foreignObject"===ke.$tag$&&(z=!1),er(null,ke,z),(Be=>null!=Be)(te)&&Dt["s-si"]!==te&&Dt.classList.add(Dt["s-si"]=te),ke.$children$)for(ot=0;ot<ke.$children$.length;++ot)kt=lr(Be,ke,ot,Dt),kt&&Dt.appendChild(kt);"svg"===ke.$tag$?z=!1:"foreignObject"===Dt.tagName&&(z=!0)}return Dt["s-hn"]=Y,3&ke.$flags$&&(Dt["s-sr"]=!0,Dt["s-cr"]=oe,Dt["s-sn"]=ke.$name$||"",Jt=Be&&Be.$children$&&Be.$children$[Ct],Jt&&Jt.$tag$===ke.$tag$&&Be.$elm$&&fr(Be.$elm$,!1)),Dt},fr=(Be,nt)=>{H.$flags$|=1;const Ct=Be.childNodes;for(let Ne=Ct.length-1;Ne>=0;Ne--){const ke=Ct[Ne];ke["s-hn"]!==Y&&ke["s-ol"]&&(Kt(ke).insertBefore(ke,Qt(ke)),ke["s-ol"].remove(),ke["s-ol"]=void 0,Z=!0),nt&&fr(ke,nt)}H.$flags$&=-2},ht=(Be,nt,Ct,Ne,ke,ot)=>{let kt,Dt=Be["s-cr"]&&Be["s-cr"].parentNode||Be;for(Dt.shadowRoot&&Dt.tagName===Y&&(Dt=Dt.shadowRoot);ke<=ot;++ke)Ne[ke]&&(kt=lr(null,Ct,ke,Be),kt&&(Ne[ke].$elm$=kt,Dt.insertBefore(kt,Qt(nt))))},St=(Be,nt,Ct,Ne,ke)=>{for(;nt<=Ct;++nt)(Ne=Be[nt])&&(ke=Ne.$elm$,Ue(Ne),X=!0,ke["s-ol"]?ke["s-ol"].remove():fr(ke,!0),ke.remove())},Wt=(Be,nt)=>Be.$tag$===nt.$tag$&&("slot"===Be.$tag$?Be.$name$===nt.$name$:Be.$key$===nt.$key$),Qt=Be=>Be&&Be["s-ol"]||Be,Kt=Be=>(Be["s-ol"]?Be["s-ol"]:Be).parentNode,Ze=(Be,nt)=>{const Ct=nt.$elm$=Be.$elm$,Ne=Be.$children$,ke=nt.$children$,ot=nt.$tag$,Dt=nt.$text$;let kt;null!==Dt?(kt=Ct["s-cr"])?kt.parentNode.textContent=Dt:Be.$text$!==Dt&&(Ct.data=Dt):(z="svg"===ot||"foreignObject"!==ot&&z,"slot"===ot||er(Be,nt,z),null!==Ne&&null!==ke?((Be,nt,Ct,Ne)=>{let Di,Ki,ke=0,ot=0,Dt=0,kt=0,Jt=nt.length-1,ir=nt[0],Sr=nt[Jt],Zr=Ne.length-1,Fr=Ne[0],Vn=Ne[Zr];for(;ke<=Jt&&ot<=Zr;)if(null==ir)ir=nt[++ke];else if(null==Sr)Sr=nt[--Jt];else if(null==Fr)Fr=Ne[++ot];else if(null==Vn)Vn=Ne[--Zr];else if(Wt(ir,Fr))Ze(ir,Fr),ir=nt[++ke],Fr=Ne[++ot];else if(Wt(Sr,Vn))Ze(Sr,Vn),Sr=nt[--Jt],Vn=Ne[--Zr];else if(Wt(ir,Vn))("slot"===ir.$tag$||"slot"===Vn.$tag$)&&fr(ir.$elm$.parentNode,!1),Ze(ir,Vn),Be.insertBefore(ir.$elm$,Sr.$elm$.nextSibling),ir=nt[++ke],Vn=Ne[--Zr];else if(Wt(Sr,Fr))("slot"===ir.$tag$||"slot"===Vn.$tag$)&&fr(Sr.$elm$.parentNode,!1),Ze(Sr,Fr),Be.insertBefore(Sr.$elm$,ir.$elm$),Sr=nt[--Jt],Fr=Ne[++ot];else{for(Dt=-1,kt=ke;kt<=Jt;++kt)if(nt[kt]&&null!==nt[kt].$key$&&nt[kt].$key$===Fr.$key$){Dt=kt;break}Dt>=0?(Ki=nt[Dt],Ki.$tag$!==Fr.$tag$?Di=lr(nt&&nt[ot],Ct,Dt,Be):(Ze(Ki,Fr),nt[Dt]=void 0,Di=Ki.$elm$),Fr=Ne[++ot]):(Di=lr(nt&&nt[ot],Ct,ot,Be),Fr=Ne[++ot]),Di&&Kt(ir.$elm$).insertBefore(Di,Qt(ir.$elm$))}ke>Jt?ht(Be,null==Ne[Zr+1]?null:Ne[Zr+1].$elm$,Ct,Ne,ot,Zr):ot>Zr&&St(nt,ke,Jt)})(Ct,Ne,nt,ke):null!==ke?(null!==Be.$text$&&(Ct.textContent=""),ht(Ct,null,nt,ke,0,ke.length-1)):null!==Ne&&St(Ne,0,Ne.length-1),z&&"svg"===ot&&(z=!1))},st=Be=>{let Ct,Ne,ke,ot,Dt,kt,nt=Be.childNodes;for(Ne=0,ke=nt.length;Ne<ke;Ne++)if(Ct=nt[Ne],1===Ct.nodeType){if(Ct["s-sr"])for(Dt=Ct["s-sn"],Ct.hidden=!1,ot=0;ot<ke;ot++)if(kt=nt[ot].nodeType,nt[ot]["s-hn"]!==Ct["s-hn"]||""!==Dt){if(1===kt&&Dt===nt[ot].getAttribute("slot")){Ct.hidden=!0;break}}else if(1===kt||3===kt&&""!==nt[ot].textContent.trim()){Ct.hidden=!0;break}st(Ct)}},Ge=[],Xe=Be=>{let nt,Ct,Ne,ke,ot,Dt,kt=0,Jt=Be.childNodes,ir=Jt.length;for(;kt<ir;kt++){if(nt=Jt[kt],nt["s-sr"]&&(Ct=nt["s-cr"])&&Ct.parentNode)for(Ne=Ct.parentNode.childNodes,ke=nt["s-sn"],Dt=Ne.length-1;Dt>=0;Dt--)Ct=Ne[Dt],!Ct["s-cn"]&&!Ct["s-nr"]&&Ct["s-hn"]!==nt["s-hn"]&&(He(Ct,ke)?(ot=Ge.find(Sr=>Sr.$nodeToRelocate$===Ct),X=!0,Ct["s-sn"]=Ct["s-sn"]||ke,ot?ot.$slotRefNode$=nt:Ge.push({$slotRefNode$:nt,$nodeToRelocate$:Ct}),Ct["s-sr"]&&Ge.map(Sr=>{He(Sr.$nodeToRelocate$,Ct["s-sn"])&&(ot=Ge.find(Zr=>Zr.$nodeToRelocate$===Ct),ot&&!Sr.$slotRefNode$&&(Sr.$slotRefNode$=ot.$slotRefNode$))})):Ge.some(Sr=>Sr.$nodeToRelocate$===Ct)||Ge.push({$nodeToRelocate$:Ct}));1===nt.nodeType&&Xe(nt)}},He=(Be,nt)=>1===Be.nodeType?null===Be.getAttribute("slot")&&""===nt||Be.getAttribute("slot")===nt:Be["s-sn"]===nt||""===nt,Ue=Be=>{Be.$attrs$&&Be.$attrs$.ref&&Be.$attrs$.ref(null),Be.$children$&&Be.$children$.map(Ue)},it=(Be,nt)=>{const Ct=Be.$hostElement$,Ne=Be.$cmpMeta$,ke=Be.$vnode$||Pt(null,null),ot=Zt(nt)?nt:Mt(null,null,nt);if(Y=Ct.tagName,Ne.$attrsToReflect$&&(ot.$attrs$=ot.$attrs$||{},Ne.$attrsToReflect$.map(([Dt,kt])=>ot.$attrs$[kt]=Ct[Dt])),ot.$tag$=null,ot.$flags$|=4,Be.$vnode$=ot,ot.$elm$=ke.$elm$=Ct.shadowRoot||Ct,te=Ct["s-sc"],oe=Ct["s-cr"],B=0!=(1&Ne.$flags$),X=!1,Ze(ke,ot),H.$flags$|=1,Z){Xe(ot.$elm$);let Dt,kt,Jt,ir,Sr,Zr,Fr=0;for(;Fr<Ge.length;Fr++)Dt=Ge[Fr],kt=Dt.$nodeToRelocate$,kt["s-ol"]||(Jt=$.createTextNode(""),Jt["s-nr"]=kt,kt.parentNode.insertBefore(kt["s-ol"]=Jt,kt));for(Fr=0;Fr<Ge.length;Fr++)if(Dt=Ge[Fr],kt=Dt.$nodeToRelocate$,Dt.$slotRefNode$){for(ir=Dt.$slotRefNode$.parentNode,Sr=Dt.$slotRefNode$.nextSibling,Jt=kt["s-ol"];Jt=Jt.previousSibling;)if(Zr=Jt["s-nr"],Zr&&Zr["s-sn"]===kt["s-sn"]&&ir===Zr.parentNode&&(Zr=Zr.nextSibling,!Zr||!Zr["s-nr"])){Sr=Zr;break}(!Sr&&ir!==kt.parentNode||kt.nextSibling!==Sr)&&kt!==Sr&&(!kt["s-hn"]&&kt["s-ol"]&&(kt["s-hn"]=kt["s-ol"].parentNode.nodeName),ir.insertBefore(kt,Sr))}else 1===kt.nodeType&&(kt.hidden=!0)}X&&st(ot.$elm$),H.$flags$&=-2,Ge.length=0},Dr=(Be,nt,Ct)=>{const Ne=Be;return{emit:ke=>kr(Ne,nt,{bubbles:!!(4&Ct),composed:!!(2&Ct),cancelable:!!(1&Ct),detail:ke})}},kr=(Be,nt,Ct)=>{const Ne=H.ce(nt,Ct);return Be.dispatchEvent(Ne),Ne},cn=(Be,nt)=>{Be.$flags$|=16;const Ct=()=>Kn(Be,nt);return on(Ct)},Kn=(Be,nt)=>{const Ct=Be.$hostElement$,Ne=()=>{},ke=Ct;let ot;return nt?(Li(Ct,"componentWillLoad"),ot=mi(ke,"componentWillLoad")):(Li(Ct,"componentWillUpdate"),ot=mi(ke,"componentWillUpdate")),Li(Ct,"componentWillRender"),ot=Fn(ot,()=>mi(ke,"componentWillRender")),Ne(),Fn(ot,()=>$i(Be,ke,nt))},$i=function(){var Be=(0,x.Z)(function*(nt,Ct,Ne){const ke=nt.$hostElement$,ot=()=>{};Ne&&(Be=>{const nt=Be.$cmpMeta$,Ct=Be.$hostElement$,Ne=nt.$flags$,ke=()=>{},ot=Ae(Ct.shadowRoot?Ct.shadowRoot:Ct.getRootNode(),nt,Be.$modeName$);10&Ne&&(Ct["s-sc"]=ot,Ct.classList.add(ot+"-h"),2&Ne&&Ct.classList.add(ot+"-s")),ke()})(nt);const kt=()=>{};si(nt,Ct,ke),kt(),ot(),xo(nt)});return function(Ct,Ne,ke){return Be.apply(this,arguments)}}(),si=(Be,nt,Ct)=>{try{ae=nt,nt=nt.render&&nt.render(),Be.$flags$&=-17,Be.$flags$|=2,it(Be,nt)}catch(kt){jn(kt,Be.$hostElement$)}return ae=null,null},xo=Be=>{const Ct=Be.$hostElement$,Ne=()=>{},ke=Ct;mi(ke,"componentDidRender"),Li(Ct,"componentDidRender"),64&Be.$flags$?(mi(ke,"componentDidUpdate"),Li(Ct,"componentDidUpdate"),Ne()):(Be.$flags$|=64,mi(ke,"componentDidLoad"),Li(Ct,"componentDidLoad"),Ne())},mi=(Be,nt,Ct)=>{if(Be&&Be[nt])try{return Be[nt](Ct)}catch(Ne){jn(Ne)}},Fn=(Be,nt)=>Be&&Be.then?Be.then(nt):nt(),Li=(Be,nt)=>{},So=(Be,nt,Ct)=>{if(nt.$members$){Be.watchers&&(nt.$watchers$=Be.watchers);const Ne=Object.entries(nt.$members$),ke=Be.prototype;Ne.map(([ot,[Dt]])=>{(31&Dt||32&Dt)&&Object.defineProperty(ke,ot,{get(){return((Be,nt)=>In(this).$instanceValues$.get(nt))(0,ot)},set(kt){((Be,nt,Ct,Ne)=>{const ke=In(Be),ot=Be,Dt=ke.$instanceValues$.get(nt),kt=ke.$flags$,Jt=ot;if(Ct=((Be,nt)=>null==Be||at(Be)?Be:4&nt?"false"!==Be&&(""===Be||!!Be):2&nt?parseFloat(Be):1&nt?String(Be):Be)(Ct,Ne.$members$[nt][0]),Ct!==Dt&&(ke.$instanceValues$.set(nt,Ct),1)){if(Ne.$watchers$&&128&kt){const ir=Ne.$watchers$[nt];ir&&ir.map(Sr=>{try{Jt[Sr](Ct,Dt,nt)}catch(Zr){jn(Zr,ot)}})}if(2==(18&kt)){if(Jt.componentShouldUpdate&&!1===Jt.componentShouldUpdate(Ct,Dt,nt))return;cn(ke,!1)}}})(this,ot,kt,nt)},configurable:!0,enumerable:!0})});{const ot=new Map;ke.attributeChangedCallback=function(Dt,kt,Jt){H.jmp(()=>{const ir=ot.get(Dt);if(this.hasOwnProperty(ir))Jt=this[ir],delete this[ir];else if(ke.hasOwnProperty(ir)&&"number"==typeof this[ir]&&this[ir]==Jt)return;this[ir]=(null!==Jt||"boolean"!=typeof this[ir])&&Jt})},Be.observedAttributes=Ne.filter(([Dt,kt])=>15&kt[0]).map(([Dt,kt])=>{const Jt=kt[1]||Dt;return ot.set(Jt,Dt),512&kt[0]&&nt.$attrsToReflect$.push([Dt,Jt]),Jt})}}return Be},ei=function(){var Be=(0,x.Z)(function*(nt,Ct,Ne,ke,ot){if(0==(32&Ct.$flags$)&&(ot=nt.constructor,Ct.$flags$|=32,customElements.whenDefined(Ne.$tagName$).then(()=>Ct.$flags$|=128),ot.style)){let Jt=ot.style;"string"!=typeof Jt&&(Jt=Jt[Ct.$modeName$=(Be=>ar.map(nt=>nt(Be)).find(nt=>!!nt))(nt)]);const ir=Je(Ne,Ct.$modeName$);if(!Lt.has(ir)){const Sr=()=>{};((Be,nt,Ct)=>{let Ne=Lt.get(Be);ge&&Ct?(Ne=Ne||new CSSStyleSheet,Ne.replace(nt)):Ne=nt,Lt.set(Be,Ne)})(ir,Jt,!!(1&Ne.$flags$)),Sr()}}const kt=()=>cn(Ct,!0);kt()});return function(Ct,Ne,ke,ot,Dt){return Be.apply(this,arguments)}}(),Ve=Be=>{},Ut=Be=>{const nt=Be["s-cr"]=$.createComment("");nt["s-cn"]=!0,Be.insertBefore(nt,Be.firstChild)},Yr=(Be,nt)=>{const Ct={$flags$:nt[0],$tagName$:nt[1]};Ct.$members$=nt[2],Ct.$listeners$=nt[3],Ct.$watchers$=Be.$watchers$,Ct.$attrsToReflect$=[];const Ne=Be.prototype.connectedCallback,ke=Be.prototype.disconnectedCallback;return Object.assign(Be.prototype,{__registerHost(){Ii(this,Ct)},connectedCallback(){(Be=>{if(0==(1&H.$flags$)){const nt=In(Be),Ct=nt.$cmpMeta$,Ne=()=>{};if(1&nt.$flags$)Q(Be,nt,Ct.$listeners$),Ve(nt.$lazyInstance$);else{let ke;nt.$flags$|=1,!ke&&12&Ct.$flags$&&Ut(Be),Ct.$members$&&Object.entries(Ct.$members$).map(([ot,[Dt]])=>{if(31&Dt&&Be.hasOwnProperty(ot)){const kt=Be[ot];delete Be[ot],Be[ot]=kt}}),ei(Be,nt,Ct)}Ne()}})(this),Ne&&Ne.call(this)},disconnectedCallback(){(Be=>{if(0==(1&H.$flags$)){const nt=In(Be);nt.$rmListeners$&&(nt.$rmListeners$.map(Ne=>Ne()),nt.$rmListeners$=void 0)}})(this),ke&&ke.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&Ct.$flags$)})}}),Be.is=Ct.$tagName$,So(Be,Ct)},Gn=Be=>{const nt=new URL(Be,H.$resourcesUrl$);return nt.origin!==P.location.origin?nt.href:nt.pathname},Kr=Be=>H.$resourcesUrl$=Be,fo=new WeakMap,In=Be=>fo.get(Be),Ii=(Be,nt)=>{const Ct={$flags$:0,$hostElement$:Be,$cmpMeta$:nt,$instanceValues$:new Map};return Q(Be,Ct,nt.$listeners$),fo.set(Be,Ct)},Qi=(Be,nt)=>nt in Be,jn=(Be,nt)=>(0,console.error)(Be,nt),Lt=new Map,ar=[],tr=[],pr=[],Et=(Be,nt)=>Ct=>{Be.push(Ct),V||(V=!0,nt&&4&H.$flags$?Er(mr):H.raf(mr))},jt=Be=>{for(let nt=0;nt<Be.length;nt++)try{Be[nt](performance.now())}catch(Ct){jn(Ct)}Be.length=0},mr=()=>{jt(tr),jt(pr),(V=tr.length>0)&&H.raf(mr)},Er=Be=>Promise.resolve(void 0).then(Be),on=Et(pr,!0),yn={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},27122:(ut,Oe)=>{"use strict";function x(Ie,ze){for(var Fe=0;Fe<ze.length;Fe++){var Se=ze[Fe];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(Ie,Se.key,Se)}}function T(Ie,ze,Fe){return ze&&x(Ie.prototype,ze),Fe&&x(Ie,Fe),Ie}function ne(){return ne=Object.assign||function(Ie){for(var ze=1;ze<arguments.length;ze++){var Fe=arguments[ze];for(var Se in Fe)Object.prototype.hasOwnProperty.call(Fe,Se)&&(Ie[Se]=Fe[Se])}return Ie},ne.apply(this,arguments)}function ie(Ie,ze){Ie.prototype=Object.create(ze.prototype),Ie.prototype.constructor=Ie,oe(Ie,ze)}function te(Ie){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(Fe){return Fe.__proto__||Object.getPrototypeOf(Fe)})(Ie)}function oe(Ie,ze){return(oe=Object.setPrototypeOf||function(Se,Ke){return Se.__proto__=Ke,Se})(Ie,ze)}function Y(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ie){return!1}}function j(Ie,ze,Fe){return(j=Y()?Reflect.construct:function(Ke,et,It){var Ft=[null];Ft.push.apply(Ft,et);var cr=new(Function.bind.apply(Ke,Ft));return It&&oe(cr,It.prototype),cr}).apply(null,arguments)}function B(Ie){var ze="function"==typeof Map?new Map:void 0;return B=function(Se){if(null===Se||!function L(Ie){return-1!==Function.toString.call(Ie).indexOf("[native code]")}(Se))return Se;if("function"!=typeof Se)throw new TypeError("Super expression must either be null or a function");if(void 0!==ze){if(ze.has(Se))return ze.get(Se);ze.set(Se,Ke)}function Ke(){return j(Se,arguments,te(this).constructor)}return Ke.prototype=Object.create(Se.prototype,{constructor:{value:Ke,enumerable:!1,writable:!0,configurable:!0}}),oe(Ke,Se)},B(Ie)}function z(Ie,ze){(null==ze||ze>Ie.length)&&(ze=Ie.length);for(var Fe=0,Se=new Array(ze);Fe<ze;Fe++)Se[Fe]=Ie[Fe];return Se}function ae(Ie,ze){var Fe="undefined"!=typeof Symbol&&Ie[Symbol.iterator]||Ie["@@iterator"];if(Fe)return(Fe=Fe.call(Ie)).next.bind(Fe);if(Array.isArray(Ie)||(Fe=function Z(Ie,ze){if(Ie){if("string"==typeof Ie)return z(Ie,ze);var Fe=Object.prototype.toString.call(Ie).slice(8,-1);if("Object"===Fe&&Ie.constructor&&(Fe=Ie.constructor.name),"Map"===Fe||"Set"===Fe)return Array.from(Ie);if("Arguments"===Fe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe))return z(Ie,ze)}}(Ie))||ze&&Ie&&"number"==typeof Ie.length){Fe&&(Ie=Fe);var Se=0;return function(){return Se>=Ie.length?{done:!0}:{done:!1,value:Ie[Se++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var K=function(Ie){function ze(){return Ie.apply(this,arguments)||this}return ie(ze,Ie),ze}(B(Error)),V=function(Ie){function ze(Fe){return Ie.call(this,"Invalid DateTime: "+Fe.toMessage())||this}return ie(ze,Ie),ze}(K),P=function(Ie){function ze(Fe){return Ie.call(this,"Invalid Interval: "+Fe.toMessage())||this}return ie(ze,Ie),ze}(K),F=function(Ie){function ze(Fe){return Ie.call(this,"Invalid Duration: "+Fe.toMessage())||this}return ie(ze,Ie),ze}(K),$=function(Ie){function ze(){return Ie.apply(this,arguments)||this}return ie(ze,Ie),ze}(K),J=function(Ie){function ze(Fe){return Ie.call(this,"Invalid unit "+Fe)||this}return ie(ze,Ie),ze}(K),H=function(Ie){function ze(){return Ie.apply(this,arguments)||this}return ie(ze,Ie),ze}(K),de=function(Ie){function ze(){return Ie.call(this,"Zone is an abstract class")||this}return ie(ze,Ie),ze}(K),ee="numeric",ye="short",le="long",ge={year:ee,month:ee,day:ee},se={year:ee,month:ye,day:ee},Q={year:ee,month:ye,day:ee,weekday:ye},pe={year:ee,month:le,day:ee},ue={year:ee,month:le,day:ee,weekday:le},me={hour:ee,minute:ee},ve={hour:ee,minute:ee,second:ee},fe={hour:ee,minute:ee,second:ee,timeZoneName:ye},Me={hour:ee,minute:ee,second:ee,timeZoneName:le},ce={hour:ee,minute:ee,hourCycle:"h23"},he={hour:ee,minute:ee,second:ee,hourCycle:"h23"},De={hour:ee,minute:ee,second:ee,hourCycle:"h23",timeZoneName:ye},xe={hour:ee,minute:ee,second:ee,hourCycle:"h23",timeZoneName:le},Pe={year:ee,month:ee,day:ee,hour:ee,minute:ee},je={year:ee,month:ee,day:ee,hour:ee,minute:ee,second:ee},rt={year:ee,month:ye,day:ee,hour:ee,minute:ee},Le={year:ee,month:ye,day:ee,hour:ee,minute:ee,second:ee},Ce={year:ee,month:ye,day:ee,weekday:ye,hour:ee,minute:ee},Te={year:ee,month:le,day:ee,hour:ee,minute:ee,timeZoneName:ye},Ye={year:ee,month:le,day:ee,hour:ee,minute:ee,second:ee,timeZoneName:ye},ct={year:ee,month:le,day:ee,weekday:le,hour:ee,minute:ee,timeZoneName:le},Ae={year:ee,month:le,day:ee,weekday:le,hour:ee,minute:ee,second:ee,timeZoneName:le};function Qe(Ie){return void 0===Ie}function Je(Ie){return"number"==typeof Ie}function re(Ie){return"number"==typeof Ie&&Ie%1==0}function tt(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(Ie){return!1}}function mt(Ie,ze,Fe){if(0!==Ie.length)return Ie.reduce(function(Se,Ke){var et=[ze(Ke),Ke];return Se&&Fe(Se[0],et[0])===Se[0]?Se:et},null)[1]}function yt(Ie,ze){return Object.prototype.hasOwnProperty.call(Ie,ze)}function at(Ie,ze,Fe){return re(Ie)&&Ie>=ze&&Ie<=Fe}function Pt(Ie,ze){void 0===ze&&(ze=2);var Fe=Ie<0?"-":"",Se=Fe?-1*Ie:Ie;return""+Fe+(Se.toString().length<ze?("0".repeat(ze)+Se).slice(-ze):Se.toString())}function Vt(Ie){if(!Qe(Ie)&&null!==Ie&&""!==Ie)return parseInt(Ie,10)}function Zt(Ie){if(!Qe(Ie)&&null!==Ie&&""!==Ie)return parseFloat(Ie)}function rr(Ie){if(!Qe(Ie)&&null!==Ie&&""!==Ie){var ze=1e3*parseFloat("0."+Ie);return Math.floor(ze)}}function vr(Ie,ze,Fe){void 0===Fe&&(Fe=!1);var Se=Math.pow(10,ze);return(Fe?Math.trunc:Math.round)(Ie*Se)/Se}function yr(Ie){return Ie%4==0&&(Ie%100!=0||Ie%400==0)}function gr(Ie){return yr(Ie)?366:365}function _t(Ie,ze){var Fe=function Mt(Ie,ze){return Ie-ze*Math.floor(Ie/ze)}(ze-1,12)+1;return 2===Fe?yr(Ie+(ze-Fe)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][Fe-1]}function $t(Ie){var ze=Date.UTC(Ie.year,Ie.month-1,Ie.day,Ie.hour,Ie.minute,Ie.second,Ie.millisecond);return Ie.year<100&&Ie.year>=0&&(ze=new Date(ze)).setUTCFullYear(ze.getUTCFullYear()-1900),+ze}function Ht(Ie){var ze=(Ie+Math.floor(Ie/4)-Math.floor(Ie/100)+Math.floor(Ie/400))%7,Fe=Ie-1,Se=(Fe+Math.floor(Fe/4)-Math.floor(Fe/100)+Math.floor(Fe/400))%7;return 4===ze||3===Se?53:52}function er(Ie){return Ie>99?Ie:Ie>60?1900+Ie:2e3+Ie}function lr(Ie,ze,Fe,Se){void 0===Se&&(Se=null);var Ke=new Date(Ie),et={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};Se&&(et.timeZone=Se);var It=ne({timeZoneName:ze},et),Ft=new Intl.DateTimeFormat(Fe,It).formatToParts(Ke).find(function(Gt){return"timezonename"===Gt.type.toLowerCase()});return Ft?Ft.value:null}function fr(Ie,ze){var Fe=parseInt(Ie,10);Number.isNaN(Fe)&&(Fe=0);var Se=parseInt(ze,10)||0;return 60*Fe+(Fe<0||Object.is(Fe,-0)?-Se:Se)}function ht(Ie){var ze=Number(Ie);if("boolean"==typeof Ie||""===Ie||Number.isNaN(ze))throw new H("Invalid unit value "+Ie);return ze}function St(Ie,ze){var Fe={};for(var Se in Ie)if(yt(Ie,Se)){var Ke=Ie[Se];if(null==Ke)continue;Fe[ze(Se)]=ht(Ke)}return Fe}function Nt(Ie,ze){var Fe=Math.trunc(Math.abs(Ie/60)),Se=Math.trunc(Math.abs(Ie%60)),Ke=Ie>=0?"+":"-";switch(ze){case"short":return""+Ke+Pt(Fe,2)+":"+Pt(Se,2);case"narrow":return""+Ke+Fe+(Se>0?":"+Se:"");case"techie":return""+Ke+Pt(Fe,2)+Pt(Se,2);default:throw new RangeError("Value format "+ze+" is out of range for property format")}}function Wt(Ie){return function bt(Ie,ze){return ze.reduce(function(Fe,Se){return Fe[Se]=Ie[Se],Fe},{})}(Ie,["hour","minute","second","millisecond"])}var Qt=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,Kt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],st=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ge(Ie){switch(Ie){case"narrow":return[].concat(st);case"short":return[].concat(Ze);case"long":return[].concat(Kt);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Xe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],He=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ue=["M","T","W","T","F","S","S"];function it(Ie){switch(Ie){case"narrow":return[].concat(Ue);case"short":return[].concat(He);case"long":return[].concat(Xe);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var wt=["AM","PM"],nr=["Before Christ","Anno Domini"],wr=["BC","AD"],Dr=["B","A"];function kr(Ie){switch(Ie){case"narrow":return[].concat(Dr);case"short":return[].concat(wr);case"long":return[].concat(nr);default:return null}}function co(Ie,ze){for(var Ke,Fe="",Se=ae(Ie);!(Ke=Se()).done;){var et=Ke.value;Fe+=et.literal?et.val:ze(et.val)}return Fe}var xo={D:ge,DD:se,DDD:pe,DDDD:ue,t:me,tt:ve,ttt:fe,tttt:Me,T:ce,TT:he,TTT:De,TTTT:xe,f:Pe,ff:rt,fff:Te,ffff:ct,F:je,FF:Le,FFF:Ye,FFFF:Ae},Yi=function(){function Ie(Fe,Se){this.opts=Se,this.loc=Fe,this.systemLoc=null}Ie.create=function(Se,Ke){return void 0===Ke&&(Ke={}),new Ie(Se,Ke)},Ie.parseFormat=function(Se){for(var Ke=null,et="",It=!1,Ft=[],Gt=0;Gt<Se.length;Gt++){var cr=Se.charAt(Gt);"'"===cr?(et.length>0&&Ft.push({literal:It,val:et}),Ke=null,et="",It=!It):It||cr===Ke?et+=cr:(et.length>0&&Ft.push({literal:!1,val:et}),et=cr,Ke=cr)}return et.length>0&&Ft.push({literal:It,val:et}),Ft},Ie.macroTokenToFormatOpts=function(Se){return xo[Se]};var ze=Ie.prototype;return ze.formatWithSystemDefault=function(Se,Ke){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(Se,ne({},this.opts,Ke)).format()},ze.formatDateTime=function(Se,Ke){return void 0===Ke&&(Ke={}),this.loc.dtFormatter(Se,ne({},this.opts,Ke)).format()},ze.formatDateTimeParts=function(Se,Ke){return void 0===Ke&&(Ke={}),this.loc.dtFormatter(Se,ne({},this.opts,Ke)).formatToParts()},ze.resolvedOptions=function(Se,Ke){return void 0===Ke&&(Ke={}),this.loc.dtFormatter(Se,ne({},this.opts,Ke)).resolvedOptions()},ze.num=function(Se,Ke){if(void 0===Ke&&(Ke=0),this.opts.forceSimple)return Pt(Se,Ke);var et=ne({},this.opts);return Ke>0&&(et.padTo=Ke),this.loc.numberFormatter(et).format(Se)},ze.formatDateTimeFromString=function(Se,Ke){var et=this,It="en"===this.loc.listingMode(),Ft=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,Gt=function(vn,Bo){return et.loc.extract(Se,vn,Bo)},cr=function(vn){return Se.isOffsetFixed&&0===Se.offset&&vn.allowZ?"Z":Se.isValid?Se.zone.formatOffset(Se.ts,vn.format):""},Ar=function(vn,Bo){return It?function Kn(Ie,ze){return Ge(ze)[Ie.month-1]}(Se,vn):Gt(Bo?{month:vn}:{month:vn,day:"numeric"},"month")},Pr=function(vn,Bo){return It?function cn(Ie,ze){return it(ze)[Ie.weekday-1]}(Se,vn):Gt(Bo?{weekday:vn}:{weekday:vn,month:"long",day:"numeric"},"weekday")},Dn=function(vn){return It?function $i(Ie,ze){return kr(ze)[Ie.year<0?0:1]}(Se,vn):Gt({era:vn},"era")};return co(Ie.parseFormat(Ke),function(vn){switch(vn){case"S":return et.num(Se.millisecond);case"u":case"SSS":return et.num(Se.millisecond,3);case"s":return et.num(Se.second);case"ss":return et.num(Se.second,2);case"uu":return et.num(Math.floor(Se.millisecond/10),2);case"uuu":return et.num(Math.floor(Se.millisecond/100));case"m":return et.num(Se.minute);case"mm":return et.num(Se.minute,2);case"h":return et.num(Se.hour%12==0?12:Se.hour%12);case"hh":return et.num(Se.hour%12==0?12:Se.hour%12,2);case"H":return et.num(Se.hour);case"HH":return et.num(Se.hour,2);case"Z":return cr({format:"narrow",allowZ:et.opts.allowZ});case"ZZ":return cr({format:"short",allowZ:et.opts.allowZ});case"ZZZ":return cr({format:"techie",allowZ:et.opts.allowZ});case"ZZZZ":return Se.zone.offsetName(Se.ts,{format:"short",locale:et.loc.locale});case"ZZZZZ":return Se.zone.offsetName(Se.ts,{format:"long",locale:et.loc.locale});case"z":return Se.zoneName;case"a":return It?function Wr(Ie){return wt[Ie.hour<12?0:1]}(Se):Gt({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return Ft?Gt({day:"numeric"},"day"):et.num(Se.day);case"dd":return Ft?Gt({day:"2-digit"},"day"):et.num(Se.day,2);case"c":case"E":return et.num(Se.weekday);case"ccc":return Pr("short",!0);case"cccc":return Pr("long",!0);case"ccccc":return Pr("narrow",!0);case"EEE":return Pr("short",!1);case"EEEE":return Pr("long",!1);case"EEEEE":return Pr("narrow",!1);case"L":return Ft?Gt({month:"numeric",day:"numeric"},"month"):et.num(Se.month);case"LL":return Ft?Gt({month:"2-digit",day:"numeric"},"month"):et.num(Se.month,2);case"LLL":return Ar("short",!0);case"LLLL":return Ar("long",!0);case"LLLLL":return Ar("narrow",!0);case"M":return Ft?Gt({month:"numeric"},"month"):et.num(Se.month);case"MM":return Ft?Gt({month:"2-digit"},"month"):et.num(Se.month,2);case"MMM":return Ar("short",!1);case"MMMM":return Ar("long",!1);case"MMMMM":return Ar("narrow",!1);case"y":return Ft?Gt({year:"numeric"},"year"):et.num(Se.year);case"yy":return Ft?Gt({year:"2-digit"},"year"):et.num(Se.year.toString().slice(-2),2);case"yyyy":return Ft?Gt({year:"numeric"},"year"):et.num(Se.year,4);case"yyyyyy":return Ft?Gt({year:"numeric"},"year"):et.num(Se.year,6);case"G":return Dn("short");case"GG":return Dn("long");case"GGGGG":return Dn("narrow");case"kk":return et.num(Se.weekYear.toString().slice(-2),2);case"kkkk":return et.num(Se.weekYear,4);case"W":return et.num(Se.weekNumber);case"WW":return et.num(Se.weekNumber,2);case"o":return et.num(Se.ordinal);case"ooo":return et.num(Se.ordinal,3);case"q":return et.num(Se.quarter);case"qq":return et.num(Se.quarter,2);case"X":return et.num(Math.floor(Se.ts/1e3));case"x":return et.num(Se.ts);default:return function(vn){var Bo=Ie.macroTokenToFormatOpts(vn);return Bo?et.formatWithSystemDefault(Se,Bo):vn}(vn)}})},ze.formatDurationFromString=function(Se,Ke){var Pr,et=this,It=function(Pr){switch(Pr[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},Gt=Ie.parseFormat(Ke),cr=Gt.reduce(function(Ar,Pr){return Pr.literal?Ar:Ar.concat(Pr.val)},[]),jr=Se.shiftTo.apply(Se,cr.map(It).filter(function(Ar){return Ar}));return co(Gt,(Pr=jr,function(Qr){var Dn=It(Qr);return Dn?et.num(Pr.get(Dn),Qr.length):Qr}))},Ie}(),qn=function(){function Ie(Fe,Se){this.reason=Fe,this.explanation=Se}return Ie.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},Ie}(),mi=function(){function Ie(){}var ze=Ie.prototype;return ze.offsetName=function(Se,Ke){throw new de},ze.formatOffset=function(Se,Ke){throw new de},ze.offset=function(Se){throw new de},ze.equals=function(Se){throw new de},T(Ie,[{key:"type",get:function(){throw new de}},{key:"name",get:function(){throw new de}},{key:"isUniversal",get:function(){throw new de}},{key:"isValid",get:function(){throw new de}}]),Ie}(),Fn=null,Li=function(Ie){function ze(){return Ie.apply(this,arguments)||this}ie(ze,Ie);var Fe=ze.prototype;return Fe.offsetName=function(Ke,et){return lr(Ke,et.format,et.locale)},Fe.formatOffset=function(Ke,et){return Nt(this.offset(Ke),et)},Fe.offset=function(Ke){return-new Date(Ke).getTimezoneOffset()},Fe.equals=function(Ke){return"system"===Ke.type},T(ze,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===Fn&&(Fn=new ze),Fn}}]),ze}(mi),js=RegExp("^"+Qt.source+"$"),ss={},Do={year:0,month:1,day:2,hour:3,minute:4,second:5},Ji={},Nn=function(Ie){function ze(Se){var Ke;return(Ke=Ie.call(this)||this).zoneName=Se,Ke.valid=ze.isValidZone(Se),Ke}ie(ze,Ie),ze.create=function(Ke){return Ji[Ke]||(Ji[Ke]=new ze(Ke)),Ji[Ke]},ze.resetCache=function(){Ji={},ss={}},ze.isValidSpecifier=function(Ke){return!(!Ke||!Ke.match(js))},ze.isValidZone=function(Ke){if(!Ke)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:Ke}).format(),!0}catch(et){return!1}};var Fe=ze.prototype;return Fe.offsetName=function(Ke,et){return lr(Ke,et.format,et.locale,this.name)},Fe.formatOffset=function(Ke,et){return Nt(this.offset(Ke),et)},Fe.offset=function(Ke){var et=new Date(Ke);if(isNaN(et))return NaN;var It=function Ea(Ie){return ss[Ie]||(ss[Ie]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:Ie,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),ss[Ie]}(this.name),Ft=It.formatToParts?function Bs(Ie,ze){for(var Fe=Ie.formatToParts(ze),Se=[],Ke=0;Ke<Fe.length;Ke++){var et=Fe[Ke],Ft=et.value,Gt=Do[et.type];Qe(Gt)||(Se[Gt]=parseInt(Ft,10))}return Se}(It,et):function ms(Ie,ze){var Fe=Ie.format(ze).replace(/\u200E/g,""),Se=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(Fe);return[Se[3],Se[1],Se[2],Se[4],Se[5],Se[6]]}(It,et),Ar=Ft[3],Xn=+et,vn=Xn%1e3;return($t({year:Ft[0],month:Ft[1],day:Ft[2],hour:24===Ar?0:Ar,minute:Ft[4],second:Ft[5],millisecond:0})-(Xn-=vn>=0?vn:1e3+vn))/6e4},Fe.equals=function(Ke){return"iana"===Ke.type&&Ke.name===this.name},T(ze,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),ze}(mi),So=null,ei=function(Ie){function ze(Se){var Ke;return(Ke=Ie.call(this)||this).fixed=Se,Ke}ie(ze,Ie),ze.instance=function(Ke){return 0===Ke?ze.utcInstance:new ze(Ke)},ze.parseSpecifier=function(Ke){if(Ke){var et=Ke.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(et)return new ze(fr(et[1],et[2]))}return null};var Fe=ze.prototype;return Fe.offsetName=function(){return this.name},Fe.formatOffset=function(Ke,et){return Nt(this.fixed,et)},Fe.offset=function(){return this.fixed},Fe.equals=function(Ke){return"fixed"===Ke.type&&Ke.fixed===this.fixed},T(ze,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+Nt(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return null===So&&(So=new ze(0)),So}}]),ze}(mi),Ve=function(Ie){function ze(Se){var Ke;return(Ke=Ie.call(this)||this).zoneName=Se,Ke}ie(ze,Ie);var Fe=ze.prototype;return Fe.offsetName=function(){return null},Fe.formatOffset=function(){return""},Fe.offset=function(){return NaN},Fe.equals=function(){return!1},T(ze,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),ze}(mi);function Yt(Ie,ze){if(Qe(Ie)||null===Ie)return ze;if(Ie instanceof mi)return Ie;if(function Ee(Ie){return"string"==typeof Ie}(Ie)){var Fe=Ie.toLowerCase();return"local"===Fe||"system"===Fe?ze:"utc"===Fe||"gmt"===Fe?ei.utcInstance:Nn.isValidSpecifier(Fe)?Nn.create(Ie):ei.parseSpecifier(Fe)||new Ve(Ie)}return Je(Ie)?ei.instance(Ie):"object"==typeof Ie&&Ie.offset&&"number"==typeof Ie.offset?Ie:new Ve(Ie)}var Rr,Ut=function(){return Date.now()},Mr="system",br=null,Yr=null,fn=null,xr=function(){function Ie(){}return Ie.resetCaches=function(){In.resetCache(),Nn.resetCache()},T(Ie,null,[{key:"now",get:function(){return Ut},set:function(Fe){Ut=Fe}},{key:"defaultZone",get:function(){return Yt(Mr,Li.instance)},set:function(Fe){Mr=Fe}},{key:"defaultLocale",get:function(){return br},set:function(Fe){br=Fe}},{key:"defaultNumberingSystem",get:function(){return Yr},set:function(Fe){Yr=Fe}},{key:"defaultOutputCalendar",get:function(){return fn},set:function(Fe){fn=Fe}},{key:"throwOnInvalid",get:function(){return Rr},set:function(Fe){Rr=Fe}}]),Ie}(),bn=["base"],Pn={};function zr(Ie,ze){void 0===ze&&(ze={});var Fe=JSON.stringify([Ie,ze]),Se=Pn[Fe];return Se||(Se=new Intl.DateTimeFormat(Ie,ze),Pn[Fe]=Se),Se}var qt={},Un={};var Gn=null;function Ni(Ie,ze,Fe,Se,Ke){var et=Ie.listingMode(Fe);return"error"===et?null:"en"===et?Se(ze):Ke(ze)}var Oo=function(){function Ie(Fe,Se,Ke){if(this.padTo=Ke.padTo||0,this.floor=Ke.floor||!1,!Se){var et={useGrouping:!1};Ke.padTo>0&&(et.minimumIntegerDigits=Ke.padTo),this.inf=function Or(Ie,ze){void 0===ze&&(ze={});var Fe=JSON.stringify([Ie,ze]),Se=qt[Fe];return Se||(Se=new Intl.NumberFormat(Ie,ze),qt[Fe]=Se),Se}(Fe,et)}}return Ie.prototype.format=function(Se){if(this.inf){var Ke=this.floor?Math.floor(Se):Se;return this.inf.format(Ke)}return Pt(this.floor?Math.floor(Se):vr(Se,3),this.padTo)},Ie}(),ln=function(){function Ie(Fe,Se,Ke){var et;if(this.opts=Ke,Fe.zone.isUniversal){var It=Fe.offset/60*-1,Ft=It>=0?"Etc/GMT+"+It:"Etc/GMT"+It;0!==Fe.offset&&Nn.create(Ft).valid?(et=Ft,this.dt=Fe):(et="UTC",this.dt=Ke.timeZoneName||0===Fe.offset?Fe:mo.fromMillis(Fe.ts+60*Fe.offset*1e3))}else"system"===Fe.zone.type?this.dt=Fe:(this.dt=Fe,et=Fe.zone.name);var Gt=ne({},this.opts);et&&(Gt.timeZone=et),this.dtf=zr(Se,Gt)}var ze=Ie.prototype;return ze.format=function(){return this.dtf.format(this.dt.toJSDate())},ze.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},ze.resolvedOptions=function(){return this.dtf.resolvedOptions()},Ie}(),fo=function(){function Ie(Fe,Se,Ke){this.opts=ne({style:"long"},Ke),!Se&&tt()&&(this.rtf=function ai(Ie,ze){void 0===ze&&(ze={});var Se=function X(Ie,ze){if(null==Ie)return{};var Ke,et,Fe={},Se=Object.keys(Ie);for(et=0;et<Se.length;et++)!(ze.indexOf(Ke=Se[et])>=0)&&(Fe[Ke]=Ie[Ke]);return Fe}(ze,bn),Ke=JSON.stringify([Ie,Se]),et=Un[Ke];return et||(et=new Intl.RelativeTimeFormat(Ie,ze),Un[Ke]=et),et}(Fe,Ke))}var ze=Ie.prototype;return ze.format=function(Se,Ke){return this.rtf?this.rtf.format(Se,Ke):function si(Ie,ze,Fe,Se){void 0===Fe&&(Fe="always"),void 0===Se&&(Se=!1);var Ke={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},et=-1===["hours","minutes","seconds"].indexOf(Ie);if("auto"===Fe&&et){var It="days"===Ie;switch(ze){case 1:return It?"tomorrow":"next "+Ke[Ie][0];case-1:return It?"yesterday":"last "+Ke[Ie][0];case 0:return It?"today":"this "+Ke[Ie][0]}}var Ft=Object.is(ze,-0)||ze<0,Gt=Math.abs(ze),cr=1===Gt,jr=Ke[Ie],Ar=Se?cr?jr[1]:jr[2]||jr[1]:cr?Ke[Ie][0]:Ie;return Ft?Gt+" "+Ar+" ago":"in "+Gt+" "+Ar}(Ke,Se,this.opts.numeric,"long"!==this.opts.style)},ze.formatToParts=function(Se,Ke){return this.rtf?this.rtf.formatToParts(Se,Ke):[]},Ie}(),In=function(){function Ie(Fe,Se,Ke,et){var It=function ui(Ie){var ze=Ie.indexOf("-u-");if(-1===ze)return[Ie];var Fe,Se=Ie.substring(0,ze);try{Fe=zr(Ie).resolvedOptions()}catch(Ft){Fe=zr(Se).resolvedOptions()}return[Se,Fe.numberingSystem,Fe.calendar]}(Fe),Gt=It[1],cr=It[2];this.locale=It[0],this.numberingSystem=Se||Gt||null,this.outputCalendar=Ke||cr||null,this.intl=function Bn(Ie,ze,Fe){return(Fe||ze)&&(Ie+="-u",Fe&&(Ie+="-ca-"+Fe),ze&&(Ie+="-nu-"+ze)),Ie}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=et,this.fastNumbersCached=null}Ie.fromOpts=function(Se){return Ie.create(Se.locale,Se.numberingSystem,Se.outputCalendar,Se.defaultToEN)},Ie.create=function(Se,Ke,et,It){void 0===It&&(It=!1);var Ft=Se||xr.defaultLocale;return new Ie(Ft||(It?"en-US":function Kr(){return Gn||(Gn=(new Intl.DateTimeFormat).resolvedOptions().locale)}()),Ke||xr.defaultNumberingSystem,et||xr.defaultOutputCalendar,Ft)},Ie.resetCache=function(){Gn=null,Pn={},qt={},Un={}},Ie.fromObject=function(Se){var Ke=void 0===Se?{}:Se;return Ie.create(Ke.locale,Ke.numberingSystem,Ke.outputCalendar)};var ze=Ie.prototype;return ze.listingMode=function(Se){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"},ze.clone=function(Se){return Se&&0!==Object.getOwnPropertyNames(Se).length?Ie.create(Se.locale||this.specifiedLocale,Se.numberingSystem||this.numberingSystem,Se.outputCalendar||this.outputCalendar,Se.defaultToEN||!1):this},ze.redefaultToEN=function(Se){return void 0===Se&&(Se={}),this.clone(ne({},Se,{defaultToEN:!0}))},ze.redefaultToSystem=function(Se){return void 0===Se&&(Se={}),this.clone(ne({},Se,{defaultToEN:!1}))},ze.months=function(Se,Ke,et){var It=this;return void 0===Ke&&(Ke=!1),void 0===et&&(et=!0),Ni(this,Se,et,Ge,function(){var Ft=Ke?{month:Se,day:"numeric"}:{month:Se},Gt=Ke?"format":"standalone";return It.monthsCache[Gt][Se]||(It.monthsCache[Gt][Se]=function gs(Ie){for(var ze=[],Fe=1;Fe<=12;Fe++){var Se=mo.utc(2016,Fe,1);ze.push(Ie(Se))}return ze}(function(cr){return It.extract(cr,Ft,"month")})),It.monthsCache[Gt][Se]})},ze.weekdays=function(Se,Ke,et){var It=this;return void 0===Ke&&(Ke=!1),void 0===et&&(et=!0),Ni(this,Se,et,it,function(){var Ft=Ke?{weekday:Se,year:"numeric",month:"long",day:"numeric"}:{weekday:Se},Gt=Ke?"format":"standalone";return It.weekdaysCache[Gt][Se]||(It.weekdaysCache[Gt][Se]=function Xi(Ie){for(var ze=[],Fe=1;Fe<=7;Fe++){var Se=mo.utc(2016,11,13+Fe);ze.push(Ie(Se))}return ze}(function(cr){return It.extract(cr,Ft,"weekday")})),It.weekdaysCache[Gt][Se]})},ze.meridiems=function(Se){var Ke=this;return void 0===Se&&(Se=!0),Ni(this,void 0,Se,function(){return wt},function(){if(!Ke.meridiemCache){var et={hour:"numeric",hourCycle:"h12"};Ke.meridiemCache=[mo.utc(2016,11,13,9),mo.utc(2016,11,13,19)].map(function(It){return Ke.extract(It,et,"dayperiod")})}return Ke.meridiemCache})},ze.eras=function(Se,Ke){var et=this;return void 0===Ke&&(Ke=!0),Ni(this,Se,Ke,kr,function(){var It={era:Se};return et.eraCache[Se]||(et.eraCache[Se]=[mo.utc(-40,1,1),mo.utc(2017,1,1)].map(function(Ft){return et.extract(Ft,It,"era")})),et.eraCache[Se]})},ze.extract=function(Se,Ke,et){var Gt=this.dtFormatter(Se,Ke).formatToParts().find(function(cr){return cr.type.toLowerCase()===et});return Gt?Gt.value:null},ze.numberFormatter=function(Se){return void 0===Se&&(Se={}),new Oo(this.intl,Se.forceSimple||this.fastNumbers,Se)},ze.dtFormatter=function(Se,Ke){return void 0===Ke&&(Ke={}),new ln(Se,this.intl,Ke)},ze.relFormatter=function(Se){return void 0===Se&&(Se={}),new fo(this.intl,this.isEnglish(),Se)},ze.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},ze.equals=function(Se){return this.locale===Se.locale&&this.numberingSystem===Se.numberingSystem&&this.outputCalendar===Se.outputCalendar},T(Ie,[{key:"fastNumbers",get:function(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function ho(Ie){return(!Ie.numberingSystem||"latn"===Ie.numberingSystem)&&("latn"===Ie.numberingSystem||!Ie.locale||Ie.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(Ie.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}}]),Ie}();function Us(){for(var Ie=arguments.length,ze=new Array(Ie),Fe=0;Fe<Ie;Fe++)ze[Fe]=arguments[Fe];var Se=ze.reduce(function(Ke,et){return Ke+et.source},"");return RegExp("^"+Se+"$")}function Ii(){for(var Ie=arguments.length,ze=new Array(Ie),Fe=0;Fe<Ie;Fe++)ze[Fe]=arguments[Fe];return function(Se){return ze.reduce(function(Ke,et){var It=Ke[0],Ft=Ke[1],cr=et(Se,Ke[2]),Ar=cr[1],Pr=cr[2];return[ne({},It,cr[0]),Ft||Ar,Pr]},[{},null,1]).slice(0,2)}}function Qi(Ie){if(null==Ie)return[null,null];for(var ze=arguments.length,Fe=new Array(ze>1?ze-1:0),Se=1;Se<ze;Se++)Fe[Se-1]=arguments[Se];for(var Ke=0,et=Fe;Ke<et.length;Ke++){var It=et[Ke],Ft=It[0],Gt=It[1],cr=Ft.exec(Ie);if(cr)return Gt(cr)}return[null,null]}function jn(){for(var Ie=arguments.length,ze=new Array(Ie),Fe=0;Fe<Ie;Fe++)ze[Fe]=arguments[Fe];return function(Se,Ke){var It,et={};for(It=0;It<ze.length;It++)et[ze[It]]=Vt(Se[Ke+It]);return[et,null,Ke+It]}}var Qn=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Xr=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Tn=RegExp(""+Xr.source+Qn.source+"?"),Vs=RegExp("(?:T"+Tn.source+")?"),Lt=jn("weekYear","weekNumber","weekDay"),ar=jn("year","ordinal"),pr=RegExp(Xr.source+" ?(?:"+Qn.source+"|("+Qt.source+"))?"),or=RegExp("(?: "+pr.source+")?");function Et(Ie,ze,Fe){var Se=Ie[ze];return Qe(Se)?Fe:Vt(Se)}function jt(Ie,ze){return[{year:Et(Ie,ze),month:Et(Ie,ze+1,1),day:Et(Ie,ze+2,1)},null,ze+3]}function zt(Ie,ze){return[{hours:Et(Ie,ze,0),minutes:Et(Ie,ze+1,0),seconds:Et(Ie,ze+2,0),milliseconds:rr(Ie[ze+3])},null,ze+4]}function mr(Ie,ze){var Fe=!Ie[ze]&&!Ie[ze+1],Se=fr(Ie[ze+1],Ie[ze+2]);return[{},Fe?null:ei.instance(Se),ze+3]}function Er(Ie,ze){return[{},Ie[ze]?Nn.create(Ie[ze]):null,ze+1]}var hr=RegExp("^T?"+Xr.source+"$"),on=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function yn(Ie){var Se=Ie[2],Ke=Ie[3],et=Ie[4],It=Ie[5],Ft=Ie[6],Gt=Ie[7],cr=Ie[8],jr="-"===Ie[0][0],Ar=Gt&&"-"===Gt[0],Pr=function(Dn,kn){return void 0===kn&&(kn=!1),void 0!==Dn&&(kn||Dn&&jr)?-Dn:Dn};return[{years:Pr(Zt(Ie[1])),months:Pr(Zt(Se)),weeks:Pr(Zt(Ke)),days:Pr(Zt(et)),hours:Pr(Zt(It)),minutes:Pr(Zt(Ft)),seconds:Pr(Zt(Gt),"-0"===Gt),milliseconds:Pr(rr(cr),Ar)}]}var Be={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function nt(Ie,ze,Fe,Se,Ke,et,It){var Ft={year:2===ze.length?er(Vt(ze)):Vt(ze),month:Ze.indexOf(Fe)+1,day:Vt(Se),hour:Vt(Ke),minute:Vt(et)};return It&&(Ft.second=Vt(It)),Ie&&(Ft.weekday=Ie.length>3?Xe.indexOf(Ie)+1:He.indexOf(Ie)+1),Ft}var Ct=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Ne(Ie){var Qr,Gt=Ie[8],cr=Ie[9],jr=Ie[10],Ar=Ie[11],Pr=nt(Ie[1],Ie[4],Ie[3],Ie[2],Ie[5],Ie[6],Ie[7]);return Qr=Gt?Be[Gt]:cr?0:fr(jr,Ar),[Pr,new ei(Qr)]}var ot=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Dt=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,kt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Jt(Ie){return[nt(Ie[1],Ie[4],Ie[3],Ie[2],Ie[5],Ie[6],Ie[7]),ei.utcInstance]}function ir(Ie){return[nt(Ie[1],Ie[7],Ie[2],Ie[3],Ie[4],Ie[5],Ie[6]),ei.utcInstance]}var Sr=Us(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Vs),Zr=Us(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vs),Fr=Us(/(\d{4})-?(\d{3})/,Vs),Vn=Us(Tn),Di=Ii(jt,zt,mr),Ki=Ii(Lt,zt,mr),Cn=Ii(ar,zt,mr),dl=Ii(zt,mr),od=Ii(zt),jl=Us(/(\d{4})-(\d\d)-(\d\d)/,or),o_=Us(pr),um=Ii(jt,zt,mr,Er),cm=Ii(zt,mr,Er),hm={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},fm=ne({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},hm),dn=365.2425,Io=30.436875,as=ne({years:{quarters:4,months:12,weeks:dn/7,days:dn,hours:24*dn,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:dn/28,days:dn/4,hours:24*dn/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:Io/7,days:Io,hours:24*Io,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},hm),ks=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],_u=ks.slice(0).reverse();function Fo(Ie,ze,Fe){void 0===Fe&&(Fe=!1);var Se={values:Fe?ze.values:ne({},Ie.values,ze.values||{}),loc:Ie.loc.clone(ze.loc),conversionAccuracy:ze.conversionAccuracy||Ie.conversionAccuracy};return new po(Se)}function Yd(Ie,ze,Fe,Se,Ke){var et=Ie[Ke][Fe],It=ze[Fe]/et,Gt=Math.sign(It)!==Math.sign(Se[Ke])&&0!==Se[Ke]&&Math.abs(It)<=1?function Hd(Ie){return Ie<0?Math.floor(Ie):Math.ceil(Ie)}(It):Math.trunc(It);Se[Ke]+=Gt,ze[Fe]-=Gt*et}var po=function(){function Ie(Fe){var Se="longterm"===Fe.conversionAccuracy||!1;this.values=Fe.values,this.loc=Fe.loc||In.create(),this.conversionAccuracy=Se?"longterm":"casual",this.invalid=Fe.invalid||null,this.matrix=Se?as:fm,this.isLuxonDuration=!0}Ie.fromMillis=function(Se,Ke){return Ie.fromObject({milliseconds:Se},Ke)},Ie.fromObject=function(Se,Ke){if(void 0===Ke&&(Ke={}),null==Se||"object"!=typeof Se)throw new H("Duration.fromObject: argument expected to be an object, got "+(null===Se?"null":typeof Se));return new Ie({values:St(Se,Ie.normalizeUnit),loc:In.fromObject(Ke),conversionAccuracy:Ke.conversionAccuracy})},Ie.fromDurationLike=function(Se){if(Je(Se))return Ie.fromMillis(Se);if(Ie.isDuration(Se))return Se;if("object"==typeof Se)return Ie.fromObject(Se);throw new H("Unknown duration argument "+Se+" of type "+typeof Se)},Ie.fromISO=function(Se,Ke){var et=function fl(Ie){return Qi(Ie,[on,yn])}(Se),It=et[0];return It?Ie.fromObject(It,Ke):Ie.invalid("unparsable",'the input "'+Se+"\" can't be parsed as ISO 8601")},Ie.fromISOTime=function(Se,Ke){var et=function i_(Ie){return Qi(Ie,[hr,od])}(Se),It=et[0];return It?Ie.fromObject(It,Ke):Ie.invalid("unparsable",'the input "'+Se+"\" can't be parsed as ISO 8601")},Ie.invalid=function(Se,Ke){if(void 0===Ke&&(Ke=null),!Se)throw new H("need to specify a reason the Duration is invalid");var et=Se instanceof qn?Se:new qn(Se,Ke);if(xr.throwOnInvalid)throw new F(et);return new Ie({invalid:et})},Ie.normalizeUnit=function(Se){var Ke={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[Se&&Se.toLowerCase()];if(!Ke)throw new J(Se);return Ke},Ie.isDuration=function(Se){return Se&&Se.isLuxonDuration||!1};var ze=Ie.prototype;return ze.toFormat=function(Se,Ke){void 0===Ke&&(Ke={});var et=ne({},Ke,{floor:!1!==Ke.round&&!1!==Ke.floor});return this.isValid?Yi.create(this.loc,et).formatDurationFromString(this,Se):"Invalid Duration"},ze.toObject=function(){return this.isValid?ne({},this.values):{}},ze.toISO=function(){if(!this.isValid)return null;var Se="P";return 0!==this.years&&(Se+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(Se+=this.months+3*this.quarters+"M"),0!==this.weeks&&(Se+=this.weeks+"W"),0!==this.days&&(Se+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(Se+="T"),0!==this.hours&&(Se+=this.hours+"H"),0!==this.minutes&&(Se+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(Se+=vr(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===Se&&(Se+="T0S"),Se},ze.toISOTime=function(Se){if(void 0===Se&&(Se={}),!this.isValid)return null;var Ke=this.toMillis();if(Ke<0||Ke>=864e5)return null;Se=ne({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},Se);var et=this.shiftTo("hours","minutes","seconds","milliseconds"),It="basic"===Se.format?"hhmm":"hh:mm";(!Se.suppressSeconds||0!==et.seconds||0!==et.milliseconds)&&(It+="basic"===Se.format?"ss":":ss",(!Se.suppressMilliseconds||0!==et.milliseconds)&&(It+=".SSS"));var Ft=et.toFormat(It);return Se.includePrefix&&(Ft="T"+Ft),Ft},ze.toJSON=function(){return this.toISO()},ze.toString=function(){return this.toISO()},ze.toMillis=function(){return this.as("milliseconds")},ze.valueOf=function(){return this.toMillis()},ze.plus=function(Se){if(!this.isValid)return this;for(var Ft,Ke=Ie.fromDurationLike(Se),et={},It=ae(ks);!(Ft=It()).done;){var Gt=Ft.value;(yt(Ke.values,Gt)||yt(this.values,Gt))&&(et[Gt]=Ke.get(Gt)+this.get(Gt))}return Fo(this,{values:et},!0)},ze.minus=function(Se){if(!this.isValid)return this;var Ke=Ie.fromDurationLike(Se);return this.plus(Ke.negate())},ze.mapUnits=function(Se){if(!this.isValid)return this;for(var Ke={},et=0,It=Object.keys(this.values);et<It.length;et++){var Ft=It[et];Ke[Ft]=ht(Se(this.values[Ft],Ft))}return Fo(this,{values:Ke},!0)},ze.get=function(Se){return this[Ie.normalizeUnit(Se)]},ze.set=function(Se){return this.isValid?Fo(this,{values:ne({},this.values,St(Se,Ie.normalizeUnit))}):this},ze.reconfigure=function(Se){var Ke=void 0===Se?{}:Se,Ft=Ke.conversionAccuracy,cr={loc:this.loc.clone({locale:Ke.locale,numberingSystem:Ke.numberingSystem})};return Ft&&(cr.conversionAccuracy=Ft),Fo(this,cr)},ze.as=function(Se){return this.isValid?this.shiftTo(Se).get(Se):NaN},ze.normalize=function(){if(!this.isValid)return this;var Se=this.toObject();return function sd(Ie,ze){_u.reduce(function(Fe,Se){return Qe(ze[Se])?Fe:(Fe&&Yd(Ie,ze,Fe,ze,Se),Se)},null)}(this.matrix,Se),Fo(this,{values:Se},!0)},ze.shiftTo=function(){for(var Se=arguments.length,Ke=new Array(Se),et=0;et<Se;et++)Ke[et]=arguments[et];if(!this.isValid)return this;if(0===Ke.length)return this;Ke=Ke.map(function(Bo){return Ie.normalizeUnit(Bo)});for(var cr,Ar,It={},Ft={},Gt=this.toObject(),jr=ae(ks);!(Ar=jr()).done;){var Pr=Ar.value;if(Ke.indexOf(Pr)>=0){cr=Pr;var Qr=0;for(var Dn in Ft)Qr+=this.matrix[Dn][Pr]*Ft[Dn],Ft[Dn]=0;Je(Gt[Pr])&&(Qr+=Gt[Pr]);var kn=Math.trunc(Qr);for(var Xn in It[Pr]=kn,Ft[Pr]=Qr-kn,Gt)ks.indexOf(Xn)>ks.indexOf(Pr)&&Yd(this.matrix,Gt,Xn,It,Pr)}else Je(Gt[Pr])&&(Ft[Pr]=Gt[Pr])}for(var vn in Ft)0!==Ft[vn]&&(It[cr]+=vn===cr?Ft[vn]:Ft[vn]/this.matrix[cr][vn]);return Fo(this,{values:It},!0).normalize()},ze.negate=function(){if(!this.isValid)return this;for(var Se={},Ke=0,et=Object.keys(this.values);Ke<et.length;Ke++){var It=et[Ke];Se[It]=-this.values[It]}return Fo(this,{values:Se},!0)},ze.equals=function(Se){if(!this.isValid||!Se.isValid||!this.loc.equals(Se.loc))return!1;for(var It,et=ae(ks);!(It=et()).done;){var Ft=It.value;if(cr=Se.values[Ft],!(void 0===(Gt=this.values[Ft])||0===Gt?void 0===cr||0===cr:Gt===cr))return!1}var Gt,cr;return!0},T(Ie,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),Ie}(),ba="Invalid Interval",ad=function(){function Ie(Fe){this.s=Fe.start,this.e=Fe.end,this.invalid=Fe.invalid||null,this.isLuxonInterval=!0}Ie.invalid=function(Se,Ke){if(void 0===Ke&&(Ke=null),!Se)throw new H("need to specify a reason the Interval is invalid");var et=Se instanceof qn?Se:new qn(Se,Ke);if(xr.throwOnInvalid)throw new P(et);return new Ie({invalid:et})},Ie.fromDateTimes=function(Se,Ke){var et=wu(Se),It=wu(Ke),Ft=function ls(Ie,ze){return Ie&&Ie.isValid?ze&&ze.isValid?ze<Ie?ad.invalid("end before start","The end of an interval must be after its start, but you had start="+Ie.toISO()+" and end="+ze.toISO()):null:ad.invalid("missing or invalid end"):ad.invalid("missing or invalid start")}(et,It);return null==Ft?new Ie({start:et,end:It}):Ft},Ie.after=function(Se,Ke){var et=po.fromDurationLike(Ke),It=wu(Se);return Ie.fromDateTimes(It,It.plus(et))},Ie.before=function(Se,Ke){var et=po.fromDurationLike(Ke),It=wu(Se);return Ie.fromDateTimes(It.minus(et),It)},Ie.fromISO=function(Se,Ke){var et=(Se||"").split("/",2),It=et[0],Ft=et[1];if(It&&Ft){var Gt,cr,jr,Ar;try{cr=(Gt=mo.fromISO(It,Ke)).isValid}catch(Dn){cr=!1}try{Ar=(jr=mo.fromISO(Ft,Ke)).isValid}catch(Dn){Ar=!1}if(cr&&Ar)return Ie.fromDateTimes(Gt,jr);if(cr){var Pr=po.fromISO(Ft,Ke);if(Pr.isValid)return Ie.after(Gt,Pr)}else if(Ar){var Qr=po.fromISO(It,Ke);if(Qr.isValid)return Ie.before(jr,Qr)}}return Ie.invalid("unparsable",'the input "'+Se+"\" can't be parsed as ISO 8601")},Ie.isInterval=function(Se){return Se&&Se.isLuxonInterval||!1};var ze=Ie.prototype;return ze.length=function(Se){return void 0===Se&&(Se="milliseconds"),this.isValid?this.toDuration.apply(this,[Se]).get(Se):NaN},ze.count=function(Se){if(void 0===Se&&(Se="milliseconds"),!this.isValid)return NaN;var Ke=this.start.startOf(Se),et=this.end.startOf(Se);return Math.floor(et.diff(Ke,Se).get(Se))+1},ze.hasSame=function(Se){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,Se))},ze.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},ze.isAfter=function(Se){return!!this.isValid&&this.s>Se},ze.isBefore=function(Se){return!!this.isValid&&this.e<=Se},ze.contains=function(Se){return!!this.isValid&&this.s<=Se&&this.e>Se},ze.set=function(Se){var Ke=void 0===Se?{}:Se;return this.isValid?Ie.fromDateTimes(Ke.start||this.s,Ke.end||this.e):this},ze.splitAt=function(){var Se=this;if(!this.isValid)return[];for(var Ke=arguments.length,et=new Array(Ke),It=0;It<Ke;It++)et[It]=arguments[It];for(var Ft=et.map(wu).filter(function(Qr){return Se.contains(Qr)}).sort(),Gt=[],cr=this.s,jr=0;cr<this.e;){var Ar=Ft[jr]||this.e,Pr=+Ar>+this.e?this.e:Ar;Gt.push(Ie.fromDateTimes(cr,Pr)),cr=Pr,jr+=1}return Gt},ze.splitBy=function(Se){var Ke=po.fromDurationLike(Se);if(!this.isValid||!Ke.isValid||0===Ke.as("milliseconds"))return[];for(var Ft,et=this.s,It=1,Gt=[];et<this.e;){var cr=this.start.plus(Ke.mapUnits(function(jr){return jr*It}));Gt.push(Ie.fromDateTimes(et,Ft=+cr>+this.e?this.e:cr)),et=Ft,It+=1}return Gt},ze.divideEqually=function(Se){return this.isValid?this.splitBy(this.length()/Se).slice(0,Se):[]},ze.overlaps=function(Se){return this.e>Se.s&&this.s<Se.e},ze.abutsStart=function(Se){return!!this.isValid&&+this.e==+Se.s},ze.abutsEnd=function(Se){return!!this.isValid&&+Se.e==+this.s},ze.engulfs=function(Se){return!!this.isValid&&this.s<=Se.s&&this.e>=Se.e},ze.equals=function(Se){return!(!this.isValid||!Se.isValid)&&this.s.equals(Se.s)&&this.e.equals(Se.e)},ze.intersection=function(Se){if(!this.isValid)return this;var Ke=this.s>Se.s?this.s:Se.s,et=this.e<Se.e?this.e:Se.e;return Ke>=et?null:Ie.fromDateTimes(Ke,et)},ze.union=function(Se){return this.isValid?Ie.fromDateTimes(this.s<Se.s?this.s:Se.s,this.e>Se.e?this.e:Se.e):this},Ie.merge=function(Se){var Ke=Se.sort(function(Ft,Gt){return Ft.s-Gt.s}).reduce(function(Ft,Gt){var cr=Ft[0],jr=Ft[1];return jr?jr.overlaps(Gt)||jr.abutsStart(Gt)?[cr,jr.union(Gt)]:[cr.concat([jr]),Gt]:[cr,Gt]},[[],null]),et=Ke[0],It=Ke[1];return It&&et.push(It),et},Ie.xor=function(Se){for(var Ke,Pr,et=null,It=0,Ft=[],Gt=Se.map(function(Dn){return[{time:Dn.s,type:"s"},{time:Dn.e,type:"e"}]}),Ar=ae((Ke=Array.prototype).concat.apply(Ke,Gt).sort(function(Dn,kn){return Dn.time-kn.time}));!(Pr=Ar()).done;){var Qr=Pr.value;1===(It+="s"===Qr.type?1:-1)?et=Qr.time:(et&&+et!=+Qr.time&&Ft.push(Ie.fromDateTimes(et,Qr.time)),et=null)}return Ie.merge(Ft)},ze.difference=function(){for(var Se=this,Ke=arguments.length,et=new Array(Ke),It=0;It<Ke;It++)et[It]=arguments[It];return Ie.xor([this].concat(et)).map(function(Ft){return Se.intersection(Ft)}).filter(function(Ft){return Ft&&!Ft.isEmpty()})},ze.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":ba},ze.toISO=function(Se){return this.isValid?this.s.toISO(Se)+"/"+this.e.toISO(Se):ba},ze.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():ba},ze.toISOTime=function(Se){return this.isValid?this.s.toISOTime(Se)+"/"+this.e.toISOTime(Se):ba},ze.toFormat=function(Se,Ke){var It=(void 0===Ke?{}:Ke).separator,Ft=void 0===It?" \u2013 ":It;return this.isValid?""+this.s.toFormat(Se)+Ft+this.e.toFormat(Se):ba},ze.toDuration=function(Se,Ke){return this.isValid?this.e.diff(this.s,Se,Ke):po.invalid(this.invalidReason)},ze.mapEndpoints=function(Se){return Ie.fromDateTimes(Se(this.s),Se(this.e))},T(Ie,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),Ie}(),us=function(){function Ie(){}return Ie.hasDST=function(Fe){void 0===Fe&&(Fe=xr.defaultZone);var Se=mo.now().setZone(Fe).set({month:12});return!Fe.isUniversal&&Se.offset!==Se.set({month:6}).offset},Ie.isValidIANAZone=function(Fe){return Nn.isValidSpecifier(Fe)&&Nn.isValidZone(Fe)},Ie.normalizeZone=function(Fe){return Yt(Fe,xr.defaultZone)},Ie.months=function(Fe,Se){void 0===Fe&&(Fe="long");var Ke=void 0===Se?{}:Se,et=Ke.locale,Ft=Ke.numberingSystem,cr=Ke.locObj,Ar=Ke.outputCalendar;return((void 0===cr?null:cr)||In.create(void 0===et?null:et,void 0===Ft?null:Ft,void 0===Ar?"gregory":Ar)).months(Fe)},Ie.monthsFormat=function(Fe,Se){void 0===Fe&&(Fe="long");var Ke=void 0===Se?{}:Se,et=Ke.locale,Ft=Ke.numberingSystem,cr=Ke.locObj,Ar=Ke.outputCalendar;return((void 0===cr?null:cr)||In.create(void 0===et?null:et,void 0===Ft?null:Ft,void 0===Ar?"gregory":Ar)).months(Fe,!0)},Ie.weekdays=function(Fe,Se){void 0===Fe&&(Fe="long");var Ke=void 0===Se?{}:Se,et=Ke.locale,Ft=Ke.numberingSystem,cr=Ke.locObj;return((void 0===cr?null:cr)||In.create(void 0===et?null:et,void 0===Ft?null:Ft,null)).weekdays(Fe)},Ie.weekdaysFormat=function(Fe,Se){void 0===Fe&&(Fe="long");var Ke=void 0===Se?{}:Se,et=Ke.locale,Ft=Ke.numberingSystem,cr=Ke.locObj;return((void 0===cr?null:cr)||In.create(void 0===et?null:et,void 0===Ft?null:Ft,null)).weekdays(Fe,!0)},Ie.meridiems=function(Fe){var Ke=(void 0===Fe?{}:Fe).locale;return In.create(void 0===Ke?null:Ke).meridiems()},Ie.eras=function(Fe,Se){void 0===Fe&&(Fe="short");var et=(void 0===Se?{}:Se).locale;return In.create(void 0===et?null:et,null,"gregory").eras(Fe)},Ie.features=function(){return{relative:tt()}},Ie}();function Jr(Ie,ze){var Fe=function(et){return et.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},Se=Fe(ze)-Fe(Ie);return Math.floor(po.fromMillis(Se).as("days"))}var vs={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Bl={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},jo=vs.hanidec.replace(/[\[|\]]/g,"").split("");function yi(Ie,ze){return void 0===ze&&(ze=""),new RegExp(""+vs[Ie.numberingSystem||"latn"]+ze)}function ti(Ie,ze){return void 0===ze&&(ze=function(Se){return Se}),{regex:Ie,deser:function(Se){return ze(function Eu(Ie){var ze=parseInt(Ie,10);if(isNaN(ze)){ze="";for(var Fe=0;Fe<Ie.length;Fe++){var Se=Ie.charCodeAt(Fe);if(-1!==Ie[Fe].search(vs.hanidec))ze+=jo.indexOf(Ie[Fe]);else for(var Ke in Bl){var et=Bl[Ke],It=et[0];Se>=It&&Se<=et[1]&&(ze+=Se-It)}}return parseInt(ze,10)}return ze}(Se[0]))}}}var ud="( |"+String.fromCharCode(160)+")",bu=new RegExp(ud,"g");function kf(Ie){return Ie.replace(/\./g,"\\.?").replace(bu,ud)}function Cu(Ie){return Ie.replace(/\./g,"").replace(bu," ").toLowerCase()}function Bi(Ie,ze){return null===Ie?null:{regex:RegExp(Ie.map(kf).join("|")),deser:function(Se){var Ke=Se[0];return Ie.findIndex(function(et){return Cu(Ke)===Cu(et)})+ze}}}function ec(Ie,ze){return{regex:Ie,deser:function(Se){return fr(Se[1],Se[2])},groups:ze}}function Ul(Ie){return{regex:Ie,deser:function(Fe){return Fe[0]}}}function Ca(Ie){return Ie.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s_={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},tc=null;function u_(Ie,ze,Fe){var Se=function l_(Ie,ze){var Fe;return(Fe=Array.prototype).concat.apply(Fe,Ie.map(function(Se){return function Ma(Ie,ze){if(Ie.literal)return Ie;var Fe=Yi.macroTokenToFormatOpts(Ie.val);if(!Fe)return Ie;var et=Yi.create(ze,Fe).formatDateTimeParts(function Jd(){return tc||(tc=mo.fromMillis(1555555555555)),tc}()).map(function(It){return function a_(Ie,ze,Fe){var Se=Ie.type;if("literal"===Se)return{literal:!0,val:Ie.value};var It=s_[Se];return"object"==typeof It&&(It=It[Fe[Se]]),It?{literal:!1,val:It}:void 0}(It,0,Fe)});return et.includes(void 0)?Ie:et}(Se,ze)}))}(Yi.parseFormat(Fe),Ie),Ke=Se.map(function(Xn){return function Ti(Ie,ze){var Fe=yi(ze),Se=yi(ze,"{2}"),Ke=yi(ze,"{3}"),et=yi(ze,"{4}"),It=yi(ze,"{6}"),Ft=yi(ze,"{1,2}"),Gt=yi(ze,"{1,3}"),cr=yi(ze,"{1,6}"),jr=yi(ze,"{1,9}"),Ar=yi(ze,"{2,4}"),Pr=yi(ze,"{4,6}"),Qr=function(vn){return{regex:RegExp(Ca(vn.val)),deser:function(oc){return oc[0]},literal:!0}},kn=function(vn){if(Ie.literal)return Qr(vn);switch(vn.val){case"G":return Bi(ze.eras("short",!1),0);case"GG":return Bi(ze.eras("long",!1),0);case"y":return ti(cr);case"yy":case"kk":return ti(Ar,er);case"yyyy":case"kkkk":return ti(et);case"yyyyy":return ti(Pr);case"yyyyyy":return ti(It);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return ti(Ft);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return ti(Se);case"MMM":return Bi(ze.months("short",!0,!1),1);case"MMMM":return Bi(ze.months("long",!0,!1),1);case"LLL":return Bi(ze.months("short",!1,!1),1);case"LLLL":return Bi(ze.months("long",!1,!1),1);case"o":case"S":return ti(Gt);case"ooo":case"SSS":return ti(Ke);case"u":return Ul(jr);case"uu":return Ul(Ft);case"uuu":case"E":case"c":return ti(Fe);case"a":return Bi(ze.meridiems(),0);case"EEE":return Bi(ze.weekdays("short",!1,!1),1);case"EEEE":return Bi(ze.weekdays("long",!1,!1),1);case"ccc":return Bi(ze.weekdays("short",!0,!1),1);case"cccc":return Bi(ze.weekdays("long",!0,!1),1);case"Z":case"ZZ":return ec(new RegExp("([+-]"+Ft.source+")(?::("+Se.source+"))?"),2);case"ZZZ":return ec(new RegExp("([+-]"+Ft.source+")("+Se.source+")?"),2);case"z":return Ul(/[a-z_+-/]{1,256}?/i);default:return Qr(vn)}}(Ie)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return kn.token=Ie,kn}(Xn,Ie)}),et=Ke.find(function(Xn){return Xn.invalidReason});if(et)return{input:ze,tokens:Se,invalidReason:et.invalidReason};var It=function Wa(Ie){return["^"+Ie.map(function(Fe){return Fe.regex}).reduce(function(Fe,Se){return Fe+"("+Se.source+")"},"")+"$",Ie]}(Ke),Gt=It[1],cr=RegExp(It[0],"i"),jr=function wa(Ie,ze,Fe){var Se=Ie.match(ze);if(Se){var Ke={},et=1;for(var It in Fe)if(yt(Fe,It)){var Ft=Fe[It],Gt=Ft.groups?Ft.groups+1:1;!Ft.literal&&Ft.token&&(Ke[Ft.token.val[0]]=Ft.deser(Se.slice(et,et+Gt))),et+=Gt}return[Se,Ke]}return[Se,{}]}(ze,cr,Gt),Ar=jr[0],Pr=jr[1],Qr=Pr?function Wf(Ie){var Fe;return Fe=Qe(Ie.Z)?Qe(Ie.z)?null:Nn.create(Ie.z):new ei(Ie.Z),Qe(Ie.q)||(Ie.M=3*(Ie.q-1)+1),Qe(Ie.h)||(Ie.h<12&&1===Ie.a?Ie.h+=12:12===Ie.h&&0===Ie.a&&(Ie.h=0)),0===Ie.G&&Ie.y&&(Ie.y=-Ie.y),Qe(Ie.u)||(Ie.S=rr(Ie.u)),[Object.keys(Ie).reduce(function(Ke,et){var It=function(et){switch(et){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(et);return It&&(Ke[It]=Ie[et]),Ke},{}),Fe]}(Pr):[null,null],Dn=Qr[0],kn=Qr[1];if(yt(Pr,"a")&&yt(Pr,"H"))throw new $("Can't include meridiem when specifying 24-hour format");return{input:ze,tokens:Se,regex:cr,rawMatches:Ar,matches:Pr,result:Dn,zone:kn}}var pm=[0,31,59,90,120,151,181,212,243,273,304,334],d_=[0,31,60,91,121,152,182,213,244,274,305,335];function xa(Ie,ze){return new qn("unit out of range","you specified "+ze+" (of type "+typeof ze+") as a "+Ie+", which is invalid")}function h_(Ie,ze,Fe){var Se=new Date(Date.UTC(Ie,ze-1,Fe)).getUTCDay();return 0===Se?7:Se}function f_(Ie,ze,Fe){return Fe+(yr(Ie)?d_:pm)[ze-1]}function p_(Ie,ze){var Fe=yr(Ie)?d_:pm,Se=Fe.findIndex(function(et){return et<ze});return{month:Se+1,day:ze-Fe[Se]}}function mm(Ie){var Ft,ze=Ie.year,Fe=Ie.month,Se=Ie.day,Ke=f_(ze,Fe,Se),et=h_(ze,Fe,Se),It=Math.floor((Ke-et+10)/7);return It<1?It=Ht(Ft=ze-1):It>Ht(ze)?(Ft=ze+1,It=1):Ft=ze,ne({weekYear:Ft,weekNumber:It,weekday:et},Wt(Ie))}function m_(Ie){var Ft,ze=Ie.weekYear,Fe=Ie.weekNumber,Se=Ie.weekday,Ke=h_(ze,1,4),et=gr(ze),It=7*Fe+Se-Ke-3;It<1?It+=gr(Ft=ze-1):It>et?(Ft=ze+1,It-=gr(ze)):Ft=ze;var Gt=p_(Ft,It);return ne({year:Ft,month:Gt.month,day:Gt.day},Wt(Ie))}function gm(Ie){var ze=Ie.year;return ne({year:ze,ordinal:f_(ze,Ie.month,Ie.day)},Wt(Ie))}function g_(Ie){var ze=Ie.year,Se=p_(ze,Ie.ordinal);return ne({year:ze,month:Se.month,day:Se.day},Wt(Ie))}function y_(Ie){var ze=re(Ie.year),Fe=at(Ie.month,1,12),Se=at(Ie.day,1,_t(Ie.year,Ie.month));return ze?Fe?!Se&&xa("day",Ie.day):xa("month",Ie.month):xa("year",Ie.year)}function v_(Ie){var ze=Ie.hour,Fe=Ie.minute,Se=Ie.second,Ke=Ie.millisecond,et=at(ze,0,23)||24===ze&&0===Fe&&0===Se&&0===Ke,It=at(Fe,0,59),Ft=at(Se,0,59),Gt=at(Ke,0,999);return et?It?Ft?!Gt&&xa("millisecond",Ke):xa("second",Se):xa("minute",Fe):xa("hour",ze)}var ym="Invalid DateTime",Zf=864e13;function rc(Ie){return new qn("unsupported zone",'the zone "'+Ie.name+'" is not supported')}function vm(Ie){return null===Ie.weekData&&(Ie.weekData=mm(Ie.c)),Ie.weekData}function Xd(Ie,ze){var Fe={ts:Ie.ts,zone:Ie.zone,c:Ie.c,o:Ie.o,loc:Ie.loc,invalid:Ie.invalid};return new mo(ne({},Fe,ze,{old:Fe}))}function __(Ie,ze,Fe){var Se=Ie-60*ze*1e3,Ke=Fe.offset(Se);if(ze===Ke)return[Se,ze];var et=Fe.offset(Se-=60*(Ke-ze)*1e3);return Ke===et?[Se,Ke]:[Ie-60*Math.min(Ke,et)*1e3,Math.max(Ke,et)]}function Vl(Ie,ze){var Fe=new Date(Ie+=60*ze*1e3);return{year:Fe.getUTCFullYear(),month:Fe.getUTCMonth()+1,day:Fe.getUTCDate(),hour:Fe.getUTCHours(),minute:Fe.getUTCMinutes(),second:Fe.getUTCSeconds(),millisecond:Fe.getUTCMilliseconds()}}function Qd(Ie,ze,Fe){return __($t(Ie),ze,Fe)}function Ws(Ie,ze){var Fe=Ie.o,Se=Ie.c.year+Math.trunc(ze.years),Ke=Ie.c.month+Math.trunc(ze.months)+3*Math.trunc(ze.quarters),et=ne({},Ie.c,{year:Se,month:Ke,day:Math.min(Ie.c.day,_t(Se,Ke))+Math.trunc(ze.days)+7*Math.trunc(ze.weeks)}),It=po.fromObject({years:ze.years-Math.trunc(ze.years),quarters:ze.quarters-Math.trunc(ze.quarters),months:ze.months-Math.trunc(ze.months),weeks:ze.weeks-Math.trunc(ze.weeks),days:ze.days-Math.trunc(ze.days),hours:ze.hours,minutes:ze.minutes,seconds:ze.seconds,milliseconds:ze.milliseconds}).as("milliseconds"),Gt=__($t(et),Fe,Ie.zone),cr=Gt[0],jr=Gt[1];return 0!==It&&(jr=Ie.zone.offset(cr+=It)),{ts:cr,o:jr}}function nc(Ie,ze,Fe,Se,Ke){var et=Fe.setZone,It=Fe.zone;if(Ie&&0!==Object.keys(Ie).length){var Gt=mo.fromObject(Ie,ne({},Fe,{zone:ze||It}));return et?Gt:Gt.setZone(It)}return mo.invalid(new qn("unparsable",'the input "'+Ke+"\" can't be parsed as "+Se))}function ic(Ie,ze,Fe){return void 0===Fe&&(Fe=!0),Ie.isValid?Yi.create(In.create("en-US"),{allowZ:Fe,forceSimple:!0}).formatDateTimeFromString(Ie,ze):null}function _m(Ie,ze){var Fe=ze.suppressSeconds,Ke=ze.suppressMilliseconds,It=ze.includeOffset,Ft=ze.includePrefix,Gt=void 0!==Ft&&Ft,cr=ze.includeZone,jr=void 0!==cr&&cr,Ar=ze.spaceZone,Qr=ze.format,Dn=void 0===Qr?"extended":Qr,kn="basic"===Dn?"HHmm":"HH:mm";(!(void 0!==Fe&&Fe)||0!==Ie.second||0!==Ie.millisecond)&&(kn+="basic"===Dn?"ss":":ss",(!(void 0!==Ke&&Ke)||0!==Ie.millisecond)&&(kn+=".SSS")),(jr||It)&&void 0!==Ar&&Ar&&(kn+=" "),jr?kn+="z":It&&(kn+="basic"===Dn?"ZZZ":"ZZ");var Xn=ic(Ie,kn);return Gt&&(Xn="T"+Xn),Xn}var $f={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Em={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},E_={ordinal:1,hour:0,minute:0,second:0,millisecond:0},qd=["year","month","day","hour","minute","second","millisecond"],b_=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],na=["year","ordinal","hour","minute","second","millisecond"];function eh(Ie){var ze={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[Ie.toLowerCase()];if(!ze)throw new J(Ie);return ze}function bm(Ie,ze){var et,It,Fe=Yt(ze.zone,xr.defaultZone),Se=In.fromObject(ze),Ke=xr.now();if(Qe(Ie.year))et=Ke;else{for(var Gt,Ft=ae(qd);!(Gt=Ft()).done;){var cr=Gt.value;Qe(Ie[cr])&&(Ie[cr]=$f[cr])}var jr=y_(Ie)||v_(Ie);if(jr)return mo.invalid(jr);var Pr=Qd(Ie,Fe.offset(Ke),Fe);et=Pr[0],It=Pr[1]}return new mo({ts:et,zone:Fe,loc:Se,o:It})}function th(Ie,ze,Fe){var Se=!!Qe(Fe.round)||Fe.round,Ke=function(Ar,Pr){return Ar=vr(Ar,Se||Fe.calendary?0:2,!0),ze.loc.clone(Fe).relFormatter(Fe).format(Ar,Pr)},et=function(Ar){return Fe.calendary?ze.hasSame(Ie,Ar)?0:ze.startOf(Ar).diff(Ie.startOf(Ar),Ar).get(Ar):ze.diff(Ie,Ar).get(Ar)};if(Fe.unit)return Ke(et(Fe.unit),Fe.unit);for(var Ft,It=ae(Fe.units);!(Ft=It()).done;){var Gt=Ft.value,cr=et(Gt);if(Math.abs(cr)>=1)return Ke(cr,Gt)}return Ke(Ie>ze?-0:0,Fe.units[Fe.units.length-1])}function Cm(Ie){var Fe,ze={};return Ie.length>0&&"object"==typeof Ie[Ie.length-1]?(ze=Ie[Ie.length-1],Fe=Array.from(Ie).slice(0,Ie.length-1)):Fe=Array.from(Ie),[ze,Fe]}var mo=function(){function Ie(Fe){var Se=Fe.zone||xr.defaultZone,Ke=Fe.invalid||(Number.isNaN(Fe.ts)?new qn("invalid input"):null)||(Se.isValid?null:rc(Se));this.ts=Qe(Fe.ts)?xr.now():Fe.ts;var et=null,It=null;if(!Ke)if(Fe.old&&Fe.old.ts===this.ts&&Fe.old.zone.equals(Se)){var Gt=[Fe.old.c,Fe.old.o];et=Gt[0],It=Gt[1]}else{var cr=Se.offset(this.ts);et=Vl(this.ts,cr),et=(Ke=Number.isNaN(et.year)?new qn("invalid input"):null)?null:et,It=Ke?null:cr}this._zone=Se,this.loc=Fe.loc||In.create(),this.invalid=Ke,this.weekData=null,this.c=et,this.o=It,this.isLuxonDateTime=!0}Ie.now=function(){return new Ie({})},Ie.local=function(){var Se=Cm(arguments),Ke=Se[0],et=Se[1],It=et[0],Ft=et[1],Gt=et[2],cr=et[3],jr=et[4],Ar=et[5],Pr=et[6];return bm({year:It,month:Ft,day:Gt,hour:cr,minute:jr,second:Ar,millisecond:Pr},Ke)},Ie.utc=function(){var Se=Cm(arguments),Ke=Se[0],et=Se[1],It=et[0],Ft=et[1],Gt=et[2],cr=et[3],jr=et[4],Ar=et[5],Pr=et[6];return Ke.zone=ei.utcInstance,bm({year:It,month:Ft,day:Gt,hour:cr,minute:jr,second:Ar,millisecond:Pr},Ke)},Ie.fromJSDate=function(Se,Ke){void 0===Ke&&(Ke={});var et=function $e(Ie){return"[object Date]"===Object.prototype.toString.call(Ie)}(Se)?Se.valueOf():NaN;if(Number.isNaN(et))return Ie.invalid("invalid input");var It=Yt(Ke.zone,xr.defaultZone);return It.isValid?new Ie({ts:et,zone:It,loc:In.fromObject(Ke)}):Ie.invalid(rc(It))},Ie.fromMillis=function(Se,Ke){if(void 0===Ke&&(Ke={}),Je(Se))return Se<-Zf||Se>Zf?Ie.invalid("Timestamp out of range"):new Ie({ts:Se,zone:Yt(Ke.zone,xr.defaultZone),loc:In.fromObject(Ke)});throw new H("fromMillis requires a numerical input, but received a "+typeof Se+" with value "+Se)},Ie.fromSeconds=function(Se,Ke){if(void 0===Ke&&(Ke={}),Je(Se))return new Ie({ts:1e3*Se,zone:Yt(Ke.zone,xr.defaultZone),loc:In.fromObject(Ke)});throw new H("fromSeconds requires a numerical input")},Ie.fromObject=function(Se,Ke){void 0===Ke&&(Ke={}),Se=Se||{};var et=Yt(Ke.zone,xr.defaultZone);if(!et.isValid)return Ie.invalid(rc(et));var It=xr.now(),Ft=et.offset(It),Gt=St(Se,eh),cr=!Qe(Gt.ordinal),jr=!Qe(Gt.year),Ar=!Qe(Gt.month)||!Qe(Gt.day),Pr=jr||Ar,Qr=Gt.weekYear||Gt.weekNumber,Dn=In.fromObject(Ke);if((Pr||cr)&&Qr)throw new $("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ar&&cr)throw new $("Can't mix ordinal dates with month/day");var Xn,vn,kn=Qr||Gt.weekday&&!Pr,Bo=Vl(It,Ft);kn?(Xn=b_,vn=Em,Bo=mm(Bo)):cr?(Xn=na,vn=E_,Bo=gm(Bo)):(Xn=qd,vn=$f);for(var w_,oc=!1,An=ae(Xn);!(w_=An()).done;){var cd=w_.value;Qe(Gt[cd])?Gt[cd]=oc?vn[cd]:Bo[cd]:oc=!0}var x_=kn?function Zw(Ie){var ze=re(Ie.weekYear),Fe=at(Ie.weekNumber,1,Ht(Ie.weekYear)),Se=at(Ie.weekday,1,7);return ze?Fe?!Se&&xa("weekday",Ie.weekday):xa("week",Ie.week):xa("weekYear",Ie.weekYear)}(Gt):cr?function $w(Ie){var ze=re(Ie.year),Fe=at(Ie.ordinal,1,gr(Ie.year));return ze?!Fe&&xa("ordinal",Ie.ordinal):xa("year",Ie.year)}(Gt):y_(Gt),Kf=x_||v_(Gt);if(Kf)return Ie.invalid(Kf);var wm=Qd(kn?m_(Gt):cr?g_(Gt):Gt,Ft,et),zf=new Ie({ts:wm[0],zone:et,o:wm[1],loc:Dn});return Gt.weekday&&Pr&&Se.weekday!==zf.weekday?Ie.invalid("mismatched weekday","you can't specify both a weekday of "+Gt.weekday+" and a date of "+zf.toISO()):zf},Ie.fromISO=function(Se,Ke){void 0===Ke&&(Ke={});var et=function hl(Ie){return Qi(Ie,[Sr,Di],[Zr,Ki],[Fr,Cn],[Vn,dl])}(Se);return nc(et[0],et[1],Ke,"ISO 8601",Se)},Ie.fromRFC2822=function(Se,Ke){void 0===Ke&&(Ke={});var et=function ys(Ie){return Qi(function ke(Ie){return Ie.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(Ie),[Ct,Ne])}(Se);return nc(et[0],et[1],Ke,"RFC 2822",Se)},Ie.fromHTTP=function(Se,Ke){void 0===Ke&&(Ke={});var et=function lm(Ie){return Qi(Ie,[ot,Jt],[Dt,Jt],[kt,ir])}(Se);return nc(et[0],et[1],Ke,"HTTP",Ke)},Ie.fromFormat=function(Se,Ke,et){if(void 0===et&&(et={}),Qe(Se)||Qe(Ke))throw new H("fromFormat requires an input string and a format");var Ft=et.locale,cr=et.numberingSystem,Pr=function c_(Ie,ze,Fe){var Se=u_(Ie,ze,Fe);return[Se.result,Se.zone,Se.invalidReason]}(In.fromOpts({locale:void 0===Ft?null:Ft,numberingSystem:void 0===cr?null:cr,defaultToEN:!0}),Se,Ke),Qr=Pr[0],Dn=Pr[1],kn=Pr[2];return kn?Ie.invalid(kn):nc(Qr,Dn,et,"format "+Ke,Se)},Ie.fromString=function(Se,Ke,et){return void 0===et&&(et={}),Ie.fromFormat(Se,Ke,et)},Ie.fromSQL=function(Se,Ke){void 0===Ke&&(Ke={});var et=function dm(Ie){return Qi(Ie,[jl,um],[o_,cm])}(Se);return nc(et[0],et[1],Ke,"SQL",Se)},Ie.invalid=function(Se,Ke){if(void 0===Ke&&(Ke=null),!Se)throw new H("need to specify a reason the DateTime is invalid");var et=Se instanceof qn?Se:new qn(Se,Ke);if(xr.throwOnInvalid)throw new V(et);return new Ie({invalid:et})},Ie.isDateTime=function(Se){return Se&&Se.isLuxonDateTime||!1};var ze=Ie.prototype;return ze.get=function(Se){return this[Se]},ze.resolvedLocaleOptions=function(Se){void 0===Se&&(Se={});var Ke=Yi.create(this.loc.clone(Se),Se).resolvedOptions(this);return{locale:Ke.locale,numberingSystem:Ke.numberingSystem,outputCalendar:Ke.calendar}},ze.toUTC=function(Se,Ke){return void 0===Se&&(Se=0),void 0===Ke&&(Ke={}),this.setZone(ei.instance(Se),Ke)},ze.toLocal=function(){return this.setZone(xr.defaultZone)},ze.setZone=function(Se,Ke){var et=void 0===Ke?{}:Ke,It=et.keepLocalTime,Ft=void 0!==It&&It,Gt=et.keepCalendarTime,cr=void 0!==Gt&&Gt;if((Se=Yt(Se,xr.defaultZone)).equals(this.zone))return this;if(Se.isValid){var jr=this.ts;if(Ft||cr){var Ar=Se.offset(this.ts);jr=Qd(this.toObject(),Ar,Se)[0]}return Xd(this,{ts:jr,zone:Se})}return Ie.invalid(rc(Se))},ze.reconfigure=function(Se){var Ke=void 0===Se?{}:Se;return Xd(this,{loc:this.loc.clone({locale:Ke.locale,numberingSystem:Ke.numberingSystem,outputCalendar:Ke.outputCalendar})})},ze.setLocale=function(Se){return this.reconfigure({locale:Se})},ze.set=function(Se){if(!this.isValid)return this;var Ar,Ke=St(Se,eh),et=!Qe(Ke.weekYear)||!Qe(Ke.weekNumber)||!Qe(Ke.weekday),It=!Qe(Ke.ordinal),Ft=!Qe(Ke.year),Gt=!Qe(Ke.month)||!Qe(Ke.day);if((Ft||Gt||It)&&(Ke.weekYear||Ke.weekNumber))throw new $("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Gt&&It)throw new $("Can't mix ordinal dates with month/day");et?Ar=m_(ne({},mm(this.c),Ke)):Qe(Ke.ordinal)?(Ar=ne({},this.toObject(),Ke),Qe(Ke.day)&&(Ar.day=Math.min(_t(Ar.year,Ar.month),Ar.day))):Ar=g_(ne({},gm(this.c),Ke));var Pr=Qd(Ar,this.o,this.zone);return Xd(this,{ts:Pr[0],o:Pr[1]})},ze.plus=function(Se){return this.isValid?Xd(this,Ws(this,po.fromDurationLike(Se))):this},ze.minus=function(Se){return this.isValid?Xd(this,Ws(this,po.fromDurationLike(Se).negate())):this},ze.startOf=function(Se){if(!this.isValid)return this;var Ke={},et=po.normalizeUnit(Se);switch(et){case"years":Ke.month=1;case"quarters":case"months":Ke.day=1;case"weeks":case"days":Ke.hour=0;case"hours":Ke.minute=0;case"minutes":Ke.second=0;case"seconds":Ke.millisecond=0}if("weeks"===et&&(Ke.weekday=1),"quarters"===et){var It=Math.ceil(this.month/3);Ke.month=3*(It-1)+1}return this.set(Ke)},ze.endOf=function(Se){var Ke;return this.isValid?this.plus((Ke={},Ke[Se]=1,Ke)).startOf(Se).minus(1):this},ze.toFormat=function(Se,Ke){return void 0===Ke&&(Ke={}),this.isValid?Yi.create(this.loc.redefaultToEN(Ke)).formatDateTimeFromString(this,Se):ym},ze.toLocaleString=function(Se,Ke){return void 0===Se&&(Se=ge),void 0===Ke&&(Ke={}),this.isValid?Yi.create(this.loc.clone(Ke),Se).formatDateTime(this):ym},ze.toLocaleParts=function(Se){return void 0===Se&&(Se={}),this.isValid?Yi.create(this.loc.clone(Se),Se).formatDateTimeParts(this):[]},ze.toISO=function(Se){return void 0===Se&&(Se={}),this.isValid?this.toISODate(Se)+"T"+this.toISOTime(Se):null},ze.toISODate=function(Se){var et=(void 0===Se?{}:Se).format,Ft="basic"===(void 0===et?"extended":et)?"yyyyMMdd":"yyyy-MM-dd";return this.year>9999&&(Ft="+"+Ft),ic(this,Ft)},ze.toISOWeekDate=function(){return ic(this,"kkkk-'W'WW-c")},ze.toISOTime=function(Se){var Ke=void 0===Se?{}:Se,et=Ke.suppressMilliseconds,Ft=Ke.suppressSeconds,cr=Ke.includeOffset,Ar=Ke.includePrefix,Qr=Ke.format;return _m(this,{suppressSeconds:void 0!==Ft&&Ft,suppressMilliseconds:void 0!==et&&et,includeOffset:void 0===cr||cr,includePrefix:void 0!==Ar&&Ar,format:void 0===Qr?"extended":Qr})},ze.toRFC2822=function(){return ic(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},ze.toHTTP=function(){return ic(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},ze.toSQLDate=function(){return ic(this,"yyyy-MM-dd")},ze.toSQLTime=function(Se){var Ke=void 0===Se?{}:Se,et=Ke.includeOffset,Ft=Ke.includeZone;return _m(this,{includeOffset:void 0===et||et,includeZone:void 0!==Ft&&Ft,spaceZone:!0})},ze.toSQL=function(Se){return void 0===Se&&(Se={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(Se):null},ze.toString=function(){return this.isValid?this.toISO():ym},ze.valueOf=function(){return this.toMillis()},ze.toMillis=function(){return this.isValid?this.ts:NaN},ze.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},ze.toJSON=function(){return this.toISO()},ze.toBSON=function(){return this.toJSDate()},ze.toObject=function(Se){if(void 0===Se&&(Se={}),!this.isValid)return{};var Ke=ne({},this.c);return Se.includeConfig&&(Ke.outputCalendar=this.outputCalendar,Ke.numberingSystem=this.loc.numberingSystem,Ke.locale=this.loc.locale),Ke},ze.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},ze.diff=function(Se,Ke,et){if(void 0===Ke&&(Ke="milliseconds"),void 0===et&&(et={}),!this.isValid||!Se.isValid)return po.invalid("created by diffing an invalid DateTime");var It=ne({locale:this.locale,numberingSystem:this.numberingSystem},et),Ft=function pt(Ie){return Array.isArray(Ie)?Ie:[Ie]}(Ke).map(po.normalizeUnit),Gt=Se.valueOf()>this.valueOf(),Ar=function ji(Ie,ze,Fe,Se){var Ar,Ke=function Jn(Ie,ze,Fe){for(var et,It,Ke={},Ft=0,Gt=[["years",function(kn,Xn){return Xn.year-kn.year}],["quarters",function(kn,Xn){return Xn.quarter-kn.quarter}],["months",function(kn,Xn){return Xn.month-kn.month+12*(Xn.year-kn.year)}],["weeks",function(kn,Xn){var vn=Jr(kn,Xn);return(vn-vn%7)/7}],["days",Jr]];Ft<Gt.length;Ft++){var cr=Gt[Ft],jr=cr[0],Ar=cr[1];if(Fe.indexOf(jr)>=0){var Pr;et=jr;var Dn,Qr=Ar(Ie,ze);(It=Ie.plus(((Pr={})[jr]=Qr,Pr)))>ze?(Ie=Ie.plus(((Dn={})[jr]=Qr-1,Dn)),Qr-=1):Ie=It,Ke[jr]=Qr}}return[Ie,Ke,It,et]}(Ie,ze,Fe),et=Ke[0],It=Ke[1],Ft=Ke[2],Gt=Ke[3],cr=ze-et,jr=Fe.filter(function(Dn){return["hours","minutes","seconds","milliseconds"].indexOf(Dn)>=0});0===jr.length&&(Ft<ze&&(Ft=et.plus(((Ar={})[Gt]=1,Ar))),Ft!==et&&(It[Gt]=(It[Gt]||0)+cr/(Ft-et)));var Qr,Pr=po.fromObject(It,Se);return jr.length>0?(Qr=po.fromMillis(cr,Se)).shiftTo.apply(Qr,jr).plus(Pr):Pr}(Gt?this:Se,Gt?Se:this,Ft,It);return Gt?Ar.negate():Ar},ze.diffNow=function(Se,Ke){return void 0===Se&&(Se="milliseconds"),void 0===Ke&&(Ke={}),this.diff(Ie.now(),Se,Ke)},ze.until=function(Se){return this.isValid?ad.fromDateTimes(this,Se):this},ze.hasSame=function(Se,Ke){if(!this.isValid)return!1;var et=Se.valueOf(),It=this.setZone(Se.zone,{keepLocalTime:!0});return It.startOf(Ke)<=et&&et<=It.endOf(Ke)},ze.equals=function(Se){return this.isValid&&Se.isValid&&this.valueOf()===Se.valueOf()&&this.zone.equals(Se.zone)&&this.loc.equals(Se.loc)},ze.toRelative=function(Se){if(void 0===Se&&(Se={}),!this.isValid)return null;var Ke=Se.base||Ie.fromObject({},{zone:this.zone}),et=Se.padding?this<Ke?-Se.padding:Se.padding:0,It=["years","months","days","hours","minutes","seconds"],Ft=Se.unit;return Array.isArray(Se.unit)&&(It=Se.unit,Ft=void 0),th(Ke,this.plus(et),ne({},Se,{numeric:"always",units:It,unit:Ft}))},ze.toRelativeCalendar=function(Se){return void 0===Se&&(Se={}),this.isValid?th(Se.base||Ie.fromObject({},{zone:this.zone}),this,ne({},Se,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},Ie.min=function(){for(var Se=arguments.length,Ke=new Array(Se),et=0;et<Se;et++)Ke[et]=arguments[et];if(!Ke.every(Ie.isDateTime))throw new H("min requires all arguments be DateTimes");return mt(Ke,function(It){return It.valueOf()},Math.min)},Ie.max=function(){for(var Se=arguments.length,Ke=new Array(Se),et=0;et<Se;et++)Ke[et]=arguments[et];if(!Ke.every(Ie.isDateTime))throw new H("max requires all arguments be DateTimes");return mt(Ke,function(It){return It.valueOf()},Math.max)},Ie.fromFormatExplain=function(Se,Ke,et){void 0===et&&(et={});var Ft=et.locale,cr=et.numberingSystem;return u_(In.fromOpts({locale:void 0===Ft?null:Ft,numberingSystem:void 0===cr?null:cr,defaultToEN:!0}),Se,Ke)},Ie.fromStringExplain=function(Se,Ke,et){return void 0===et&&(et={}),Ie.fromFormatExplain(Se,Ke,et)},T(Ie,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?vm(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?vm(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?vm(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?gm(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?us.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?us.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?us.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?us.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return yr(this.year)}},{key:"daysInMonth",get:function(){return _t(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?gr(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?Ht(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return ge}},{key:"DATE_MED",get:function(){return se}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return Q}},{key:"DATE_FULL",get:function(){return pe}},{key:"DATE_HUGE",get:function(){return ue}},{key:"TIME_SIMPLE",get:function(){return me}},{key:"TIME_WITH_SECONDS",get:function(){return ve}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return fe}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Me}},{key:"TIME_24_SIMPLE",get:function(){return ce}},{key:"TIME_24_WITH_SECONDS",get:function(){return he}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return De}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return xe}},{key:"DATETIME_SHORT",get:function(){return Pe}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return je}},{key:"DATETIME_MED",get:function(){return rt}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return Le}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return Ce}},{key:"DATETIME_FULL",get:function(){return Te}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Ye}},{key:"DATETIME_HUGE",get:function(){return ct}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Ae}}]),Ie}();function wu(Ie){if(mo.isDateTime(Ie))return Ie;if(Ie&&Ie.valueOf&&Je(Ie.valueOf()))return mo.fromJSDate(Ie);if(Ie&&"object"==typeof Ie)return mo.fromObject(Ie);throw new H("Unknown datetime argument: "+Ie+", of type "+typeof Ie)}Oe.ou=mo},41993:ut=>{function Oe(C){return Promise.resolve().then(()=>{var x=new Error("Cannot find module '"+C+"'");throw x.code="MODULE_NOT_FOUND",x})}Oe.keys=()=>[],Oe.resolve=Oe,Oe.id=41993,ut.exports=Oe},73386:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{default:()=>se});var ee,x=C(15861),T=C(17626),ne=C(7093),ie=C(89726),te=C(55538),oe=C(86162),Y=C(58817),j=C(47996),L=C(47877),B=C(63290),X=C(62208),Z=C(10699),z=C(21726),ae=C(77712),V=(C(90912),C(76898)),P=C(99433),F=C(65234),$=C(84687),J=C(55463),H=C(33954),de=C(32584);let ye=0;const le=B.Z.getLogger("esri.Basemap");let ge=ee=class extends((0,oe.eC)(j.Z)){constructor(Q){super(Q),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+ye++,this.baseLayers=new ne.Z,this.referenceLayers=new ne.Z;const pe=me=>{me.parent&&me.parent!==this&&"remove"in me.parent&&me.parent.remove(me),me.parent=this,"elevation"===me.type&&le.error(`Layer '${me.title}, id:${me.id}' of type '${me.type}' is not supported as a basemap layer and will therefore be ignored.`)},ue=me=>{me.parent=null};this.baseLayers.on("after-add",me=>pe(me.item)),this.referenceLayers.on("after-add",me=>pe(me.item)),this.baseLayers.on("after-remove",me=>ue(me.item)),this.referenceLayers.on("after-remove",me=>ue(me.item))}initialize(){this.when().catch(Q=>{le.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,Q)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var Q;const pe=this.baseLayers.removeAll();for(const me of pe)me.destroy();const ue=this.referenceLayers.removeAll();for(const me of ue)me.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(Q=this.portalItem)||Q.destroy(),this.portalItem=null}normalizeCtorArgs(Q){return Q&&"resourceInfo"in Q&&(this._set("resourceInfo",Q.resourceInfo),delete(Q=Ot({},Q)).resourceInfo),Q}set baseLayers(Q){this._set("baseLayers",(0,ie.Z)(Q,this._get("baseLayers")))}_writeBaseLayers(Q,pe,ue){const me=[];Q&&(ue=nn(Ot({},ue),{layerContainerType:"basemap"}),this.baseLayers.forEach(ve=>{const fe=(0,de.Nw)(ve,ue.webmap?ue.webmap.getLayerJSONFromResourceInfo(ve):null,ue);(0,X.pC)(fe)&&me.push(fe)}),this.referenceLayers.forEach(ve=>{const fe=(0,de.Nw)(ve,ue.webmap?ue.webmap.getLayerJSONFromResourceInfo(ve):null,ue);(0,X.pC)(fe)&&(fe.isReference=!0,me.push(fe))})),pe.baseMapLayers=me}set referenceLayers(Q){this._set("referenceLayers",(0,ie.Z)(Q,this._get("referenceLayers")))}writeTitle(Q,pe){pe.title=Q||"Basemap"}load(Q){return this.addResolvingPromise(this._loadFromSource(Q)),Promise.resolve(this)}loadAll(){return(0,L.GZ)(this,Q=>{Q(this.baseLayers,this.referenceLayers)})}clone(){const Q={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(Q.loadStatus="loaded"),new ee({resourceInfo:this.resourceInfo}).set(Q)}read(Q,pe){this.resourceInfo||this._set("resourceInfo",{data:Q,context:pe}),super.read(Q,pe)}write(Q,pe){return Q=Q||{},pe&&pe.origin||(pe=Ot({origin:"web-map"},pe)),super.write(Q,pe),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(Q.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(ue=>{const me=(0,Y.d9)(ue);return me.url&&(0,z.oC)(me.url)&&(me.url=`https:${me.url}`),me.templateUrl&&(0,z.oC)(me.templateUrl)&&(me.templateUrl=`https:${me.templateUrl}`),me})),Q}_loadFromSource(Q){var pe=this;return(0,x.Z)(function*(){const{resourceInfo:ue,portalItem:me}=pe;(0,Z.k_)(Q);const ve=[];ue?(ve.push(pe._loadLayersFromJSON(ue.data,ue.context?ue.context.url:null,Q)),ue.data.id&&!ue.data.title&&ve.push((0,H.g)(ue.data.id).then(ce=>{ce&&pe.read({title:ce},ue.context)}))):me&&ve.push(pe._loadFromItem(me,Q)),yield Promise.all(ve)})()}_loadLayersFromJSON(Q,pe,ue){var me=this;return(0,x.Z)(function*(){const ve=me.resourceInfo&&me.resourceInfo.context,fe=me.portalItem&&me.portalItem.portal||ve&&ve.portal||null,Me=ve&&"web-scene"===ve.origin?"web-scene":"web-map",{populateOperationalLayers:ce}=yield Promise.all([C.e(7534),C.e(1074)]).then(C.bind(C,71074)),he=[];if((0,Z.k_)(ue),Q.baseMapLayers&&Array.isArray(Q.baseMapLayers)){const De={context:{origin:Me,url:pe,portal:fe,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},xe=ce(me.baseLayers,Q.baseMapLayers.filter(je=>!je.isReference),De);he.push(xe);const Pe=ce(me.referenceLayers,Q.baseMapLayers.filter(je=>je.isReference),De);he.push(Pe)}yield(0,Z.as)(he)})()}_loadFromItem(Q,pe){var ue=this;return(0,x.Z)(function*(){const me=yield Q.load(pe),ve=yield me.fetchData("json",pe),fe=(0,z.mN)(Q.itemUrl);return ue._set("resourceInfo",{data:ve.baseMap,context:{origin:"web-map",portal:Q.portal||$.Z.getDefault(),url:fe}}),ue.read(ue.resourceInfo.data,ue.resourceInfo.context),ue.read({spatialReference:ve.spatialReference},ue.resourceInfo.context),ue.read({title:Q.title,thumbnailUrl:Q.thumbnailUrl},{origin:"portal-item",portal:Q.portal||$.Z.getDefault(),url:fe}),ue._loadLayersFromJSON(ue.resourceInfo.data,fe,pe)})()}static fromId(Q){const pe=H.s[Q];if(pe){if(pe.deprecated){let ue=null;"dark-gray"===Q?ue="dark-gray-vector":"gray"===Q?ue="gray-vector":"streets"===Q?ue="streets-vector":"topo"===Q&&(ue="topo-vector"),(0,te.x9)(le,`The ${Q} basemap has entered mature support and is no longer being updated.`,{replacement:ue,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return ee.fromJSON(pe)}return null}};(0,T._)([(0,ae.Cb)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(Q,pe,ue,me){this._writeBaseLayers(Q,pe,me)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:ne.Z}},writer(Q,pe,ue,me){this._writeBaseLayers(Q,pe,me)}}}}}})],ge.prototype,"baseLayers",null),(0,T._)([(0,ae.Cb)({type:String,json:{origins:{"web-scene":{write:!0}}}})],ge.prototype,"id",void 0),(0,T._)([(0,ae.Cb)({type:J.default})],ge.prototype,"portalItem",void 0),(0,T._)([(0,ae.Cb)()],ge.prototype,"referenceLayers",null),(0,T._)([(0,ae.Cb)({readOnly:!0})],ge.prototype,"resourceInfo",void 0),(0,T._)([(0,ae.Cb)({type:F.Z})],ge.prototype,"spatialReference",void 0),(0,T._)([(0,ae.Cb)()],ge.prototype,"thumbnailUrl",void 0),(0,T._)([(0,ae.Cb)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ge.prototype,"title",void 0),(0,T._)([(0,P.c)("title")],ge.prototype,"writeTitle",null),ge=ee=(0,T._)([(0,V.j)("esri.Basemap")],ge);const se=ge},91558:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Y});var x=C(20414),T=C(21286),ne=C(62208),ie=C(90912);function te(j){return(0,T.uZ)((0,ie.vU)(j),0,255)}function oe(j,L,B){return j=Number(j),isNaN(j)?B:j<L?L:j>B?B:j}class Y{constructor(L){this.r=255,this.g=255,this.b=255,this.a=1,L&&this.setColor(L)}static blendColors(L,B,X,Z=new Y){return Z.r=Math.round(L.r+(B.r-L.r)*X),Z.g=Math.round(L.g+(B.g-L.g)*X),Z.b=Math.round(L.b+(B.b-L.b)*X),Z.a=L.a+(B.a-L.a)*X,Z._sanitize()}static fromRgb(L,B){const X=L.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(X){const Z=X[2].split(/\s*,\s*/),z=X[1];if("rgb"===z&&3===Z.length||"rgba"===z&&4===Z.length){const ae=Z[0];if("%"===ae.charAt(ae.length-1)){const K=Z.map(V=>2.56*parseFloat(V));return 4===Z.length&&(K[3]=parseFloat(Z[3])),Y.fromArray(K,B)}return Y.fromArray(Z.map(K=>parseFloat(K)),B)}if("hsl"===z&&3===Z.length||"hsla"===z&&4===Z.length)return Y.fromArray((0,x.B7)(parseFloat(Z[0]),parseFloat(Z[1])/100,parseFloat(Z[2])/100,parseFloat(Z[3])),B)}return null}static fromHex(L,B=new Y){if(4!==L.length&&7!==L.length||"#"!==L[0])return null;const X=4===L.length?4:8,Z=(1<<X)-1;let z=Number("0x"+L.substr(1));return isNaN(z)?null:(["b","g","r"].forEach(ae=>{const K=z&Z;z>>=X,B[ae]=4===X?17*K:K}),B.a=1,B)}static fromArray(L,B=new Y){return B._set(Number(L[0]),Number(L[1]),Number(L[2]),Number(L[3])),isNaN(B.a)&&(B.a=1),B._sanitize()}static fromString(L,B){const X=(0,x.St)(L)?(0,x.h$)(L):null;return X&&Y.fromArray(X,B)||Y.fromRgb(L,B)||Y.fromHex(L,B)}static fromJSON(L){return L&&new Y([L[0],L[1],L[2],L[3]/255])}static toUnitRGB(L){return(0,ne.pC)(L)?[L.r/255,L.g/255,L.b/255]:null}static toUnitRGBA(L){return(0,ne.pC)(L)?[L.r/255,L.g/255,L.b/255,null!=L.a?L.a:1]:null}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(L){if("string"==typeof L)Y.fromString(L,this);else if(Array.isArray(L))Y.fromArray(L,this);else{var B,X,Z,z;this._set(null!=(B=L.r)?B:0,null!=(X=L.g)?X:0,null!=(Z=L.b)?Z:0,null!=(z=L.a)?z:1),L instanceof Y||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const L=this.r.toString(16),B=this.g.toString(16),X=this.b.toString(16);return`#${L.length<2?"0"+L:L}${B.length<2?"0"+B:B}${X.length<2?"0"+X:X}`}toCss(L=!1){const B=this.r+", "+this.g+", "+this.b;return L?`rgba(${B}, ${this.a})`:`rgb(${B})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(L=0){const B=te(this.r),X=te(this.g),Z=te(this.b);return 0===L||1!==this.a?[B,X,Z,te(255*this.a)]:[B,X,Z]}clone(){return new Y(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(oe(this.r,0,255)),this.g=Math.round(oe(this.g,0,255)),this.b=Math.round(oe(this.b,0,255)),this.a=oe(this.a,0,1),this}_set(L,B,X,Z){this.r=L,this.g=B,this.b=X,this.a=Z}}Y.prototype.declaredClass="esri.Color"},88879:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var z,x=C(17626),T=C(29132),ne=C(73281),ie=C(65787),te=C(86162),oe=C(58817),Y=C(62208),j=C(86236),L=C(77712),X=(C(90912),C(76898)),Z=C(91179);let ae=z=class extends te.wq{constructor(...V){super(...V),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,j.D)(),configurable:!0})}normalizeCtorArgs(V,P,F,$){return V&&!V.declaredClass?V:{geometry:V,symbol:P,attributes:F,popupTemplate:$}}set attributes(V){const P=this._get("attributes");P!==V&&(this._set("attributes",V),this._notifyLayer("attributes",P,V))}set geometry(V){const P=this._get("geometry");P!==V&&(this._set("geometry",V),this._notifyLayer("geometry",P,V))}set symbol(V){const P=this._get("symbol");P!==V&&(this._set("symbol",V),this._notifyLayer("symbol",P,V))}set visible(V){const P=this._get("visible");P!==V&&(this._set("visible",V),this._notifyLayer("visible",P,V))}getEffectivePopupTemplate(V=!1){if(this.popupTemplate)return this.popupTemplate;for(const P of[this.sourceLayer,this.layer])if(P){if("popupTemplate"in P&&P.popupTemplate)return P.popupTemplate;if(V&&"defaultPopupTemplate"in P&&(0,Y.pC)(P.defaultPopupTemplate))return P.defaultPopupTemplate}return null}getAttribute(V){return this.attributes&&this.attributes[V]}setAttribute(V,P){if(this.attributes){const F=this.getAttribute(V);this.attributes[V]=P,this._notifyLayer("attributes",F,P,V)}else this.attributes={[V]:P},this._notifyLayer("attributes",void 0,P,V)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:(0,Y.pC)(this.geometry)?this.geometry.toJSON():null,symbol:(0,Y.pC)(this.symbol)?this.symbol.toJSON():null,attributes:Ot({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new z(this.cloneProperties())}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}cloneProperties(){return{attributes:(0,oe.d9)(this.attributes),geometry:(0,oe.d9)(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:(0,oe.d9)(this.symbol),visible:this.visible}}_notifyLayer(V,P,F,$){if(!this.layer||!("graphicChanged"in this.layer))return;const J={graphic:this,property:V,oldValue:P,newValue:F};"attributes"===V&&(J.attributeName=$),this.layer.graphicChanged(J)}};(0,x._)([(0,L.Cb)({value:null})],ae.prototype,"attributes",null),(0,x._)([(0,L.Cb)({value:null,types:T.qM,json:{read:Z.im}})],ae.prototype,"geometry",null),(0,x._)([(0,L.Cb)({type:Boolean})],ae.prototype,"isAggregate",void 0),(0,x._)([(0,L.Cb)()],ae.prototype,"layer",void 0),(0,x._)([(0,L.Cb)({type:ne.Z})],ae.prototype,"popupTemplate",void 0),(0,x._)([(0,L.Cb)()],ae.prototype,"sourceLayer",void 0),(0,x._)([(0,L.Cb)({value:null,types:ie.LB})],ae.prototype,"symbol",null),(0,x._)([(0,L.Cb)({type:Boolean,value:!0})],ae.prototype,"visible",null),ae=z=(0,x._)([(0,X.j)("esri.Graphic")],ae),(ae||(ae={})).generateUID=j.D;const K=ae},73281:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ct});var x=C(15861),T=C(17626),ne=C(7093),ie=C(86162),te=C(58817),oe=C(63290),Y=C(10699),j=C(77712),L=C(66656),B=C(68653),X=C(76898),Z=C(99433),z=C(90912),ae=C(36630),K=C(55664),V=C(55013),P=C(16615),F=C(82561),$=C(75484),J=C(64531),H=C(501);const ee={base:null,key:"type",typeMap:{attachment:K.Z,media:J.Z,text:H.Z,expression:F.Z,field:$.Z}};var Q,ye=C(38439),le=C(25621);C(85931),C(8314);let pe=Q=class extends ie.wq{constructor(Ae){super(Ae),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Q({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};(0,T._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],pe.prototype,"returnTopmostRaster",void 0),(0,T._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],pe.prototype,"showNoDataRecords",void 0),pe=Q=(0,T._)([(0,X.j)("esri.popup.LayerOptions")],pe);const ue=pe;var ve,me=C(51686);let fe=ve=class extends ie.wq{constructor(Ae){super(Ae),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new ve({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?(0,te.d9)(this.orderByFields):null})}};(0,T._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],fe.prototype,"showRelatedRecords",void 0),(0,T._)([(0,j.Cb)({type:[me.Z],json:{write:!0}})],fe.prototype,"orderByFields",void 0),fe=ve=(0,T._)([(0,X.j)("esri.popup.RelatedRecordsInfo")],fe);const Me=fe;var Pe,ce=C(65560),he=C(59397),De=C(48753),xe=C(10671);const je=ne.Z.ofType({key:"type",defaultKeyValue:"button",base:he.Z,typeMap:{button:De.Z,toggle:xe.Z}}),rt={base:V.Z,key:"type",typeMap:{media:J.Z,custom:P.Z,text:H.Z,attachments:K.Z,fields:$.Z,expression:F.Z}},Le="esri.PopupTemplate",Ce=oe.Z.getLogger(Le),Te=["attachments","fields","media","text","expression"];let Ye=Pe=class extends ie.wq{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(Ae){return Array.isArray(Ae)?Ae.map(Qe=>(0,z.N7)(rt,Qe)):"string"==typeof Ae||"function"==typeof Ae||Ae instanceof HTMLElement||(0,Y.y8)(Ae)?Ae:(Ce.error("content error","unsupported content value",{value:Ae}),null)}readContent(Ae,Qe){const{popupElements:Je}=Qe;return Array.isArray(Je)&&Je.length>0?this._readPopupInfoElements(Qe):this._readPopupInfo(Qe)}writeContent(Ae,Qe,Je,re){"string"!=typeof Ae?Array.isArray(Ae)&&(Qe.popupElements=Ae.filter(Ee=>-1!==Te.indexOf(Ee.type)).map(Ee=>Ee&&Ee.toJSON(re)),Qe.popupElements.forEach(Ee=>{"attachments"===Ee.type?this._writeAttachmentContent(Qe):"media"===Ee.type?this._writeMediaContent(Ee,Qe):"text"===Ee.type&&this._writeTextContent(Ee,Qe)})):Qe.description=Ae}writeFieldInfos(Ae,Qe,Je,re){const{content:Ee}=this,$e=Array.isArray(Ee)?Ee:null;if(Ae){const tt=$e?$e.filter(mt=>"fields"===mt.type):[],pt=tt.length&&tt.every(mt=>{var bt;return null==(bt=mt.fieldInfos)?void 0:bt.length});Qe.fieldInfos=Ae.filter(Boolean).map(mt=>{const bt=mt.toJSON(re);return pt&&(bt.visible=!1),bt})}if($e)for(const tt of $e)"fields"===tt.type&&this._writeFieldsContent(tt,Qe)}writeLayerOptions(Ae,Qe,Je,re){Qe[Je]=!Ae||null===Ae.showNoDataRecords&&null===Ae.returnTopmostRaster?null:Ae.toJSON(re)}writeTitle(Ae,Qe){Qe.title=Ae||""}clone(){const{actions:Ae}=this,Qe=Ae?(0,te.d9)(Ae.toArray()):[];return new Pe({actions:Qe,content:Array.isArray(this.content)?(0,te.d9)(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?(0,te.d9)(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?(0,te.d9)(this.fieldInfos):null,layerOptions:this.layerOptions?(0,te.d9)(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?(0,te.d9)(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?(0,te.d9)(this.relatedRecordsInfo):null})}collectRequiredFields(Ae,Qe){var Je=this;return(0,x.Z)(function*(){yield Je._collectExpressionInfoFields(Ae,Qe,Je._getContentExpressionInfos(Je.content,Je.expressionInfos)),(0,ae.gd)(Ae,Qe,[...Je.outFields||[],...Je._getActionsFields(Je.actions),...Je._getTitleFields(Je.title),...Je._getContentFields(Je.content)])})()}getRequiredFields(Ae){var Qe=this;return(0,x.Z)(function*(){const Je=new Set;return yield Qe.collectRequiredFields(Je,Ae),[...Je].sort()})()}_writeFieldsContent(Ae,Qe){if(!Array.isArray(Ae.fieldInfos)||!Ae.fieldInfos.length)return;const Je=(0,te.d9)(Ae.fieldInfos);Array.isArray(Qe.fieldInfos)?Je.forEach(re=>{const Ee=Qe.fieldInfos.find($e=>$e.fieldName.toLowerCase()===re.fieldName.toLowerCase());Ee?Ee.visible=!0:Qe.fieldInfos.push(re)}):Qe.fieldInfos=Je}_writeAttachmentContent(Ae){Ae.showAttachments||(Ae.showAttachments=!0)}_writeTextContent(Ae,Qe){!Qe.description&&Ae.text&&(Qe.description=Ae.text)}_writeMediaContent(Ae,Qe){if(!Array.isArray(Ae.mediaInfos)||!Ae.mediaInfos.length)return;const Je=(0,te.d9)(Ae.mediaInfos);Qe.mediaInfos=Array.isArray(Qe.mediaInfos)?[...Qe.mediaInfos,...Je]:Je}_readPopupInfoElements({description:Ae,mediaInfos:Qe,popupElements:Je}){const re={description:!1,mediaInfos:!1};return Je.map(Ee=>"media"===Ee.type?(Ee.mediaInfos||!Qe||re.mediaInfos||(Ee.mediaInfos=Qe,re.mediaInfos=!0),J.Z.fromJSON(Ee)):"text"===Ee.type?(Ee.text||!Ae||re.description||(Ee.text=Ae,re.description=!0),H.Z.fromJSON(Ee)):"attachments"===Ee.type?K.Z.fromJSON(Ee):"fields"===Ee.type?$.Z.fromJSON(Ee):"expression"===Ee.type?F.Z.fromJSON(Ee):void 0).filter(Boolean)}_readPopupInfo({description:Ae,mediaInfos:Qe,showAttachments:Je}){const re=[];return re.push(Ae?new H.Z({text:Ae}):new $.Z),Array.isArray(Qe)&&Qe.length&&re.push(J.Z.fromJSON({mediaInfos:Qe})),Je&&re.push(K.Z.fromJSON({displayType:"auto"})),re.length?re:Ae}_getContentElementFields(Ae){const Qe=null==Ae?void 0:Ae.type;if("attachments"===Qe)return[...this._extractFieldNames(Ae.title),...this._extractFieldNames(Ae.description)];if("custom"===Qe)return Ae.outFields||[];if("fields"===Qe)return[...this._extractFieldNames(Ae.title),...this._extractFieldNames(Ae.description),...this._getFieldInfoFields(Ae.fieldInfos||this.fieldInfos)];if("media"===Qe){const Je=Ae.mediaInfos||[];return[...this._extractFieldNames(Ae.title),...this._extractFieldNames(Ae.description),...Je.reduce((re,Ee)=>[...re,...this._getMediaInfoFields(Ee)],[])]}return"text"===Qe?this._extractFieldNames(Ae.text):[]}_getMediaInfoFields(Ae){const{caption:Qe,title:Je,value:re}=Ae,Ee=re||{},{fields:$e=[],normalizeField:tt,tooltipField:pt,sourceURL:mt,linkURL:bt}=Ee,yt=[...this._extractFieldNames(Je),...this._extractFieldNames(Qe),...this._extractFieldNames(mt),...this._extractFieldNames(bt),...$e];return tt&&yt.push(tt),pt&&yt.push(pt),yt}_getContentExpressionInfos(Ae,Qe){return Array.isArray(Ae)?Ae.reduce((Je,re)=>[...Je,..."expression"===re.type&&re.expressionInfo?[re.expressionInfo]:[]],Qe||[]):[]}_getContentFields(Ae){return"string"==typeof Ae?this._extractFieldNames(Ae):Array.isArray(Ae)?Ae.reduce((Qe,Je)=>[...Qe,...this._getContentElementFields(Je)],[]):[]}_collectExpressionInfoFields(Ae,Qe,Je){return(0,x.Z)(function*(){Je&&(yield Promise.all(Je.map(re=>(0,ae.io)(Ae,Qe,re.expression))))})()}_getFieldInfoFields(Ae){return Ae?Ae.filter(Qe=>void 0===Qe.visible||!!Qe.visible).map(Qe=>Qe.fieldName).filter(Qe=>-1===Qe.indexOf("relationships/")&&-1===Qe.indexOf("expression/")):[]}_getActionsFields(Ae){return Ae?Ae.toArray().reduce((Qe,Je)=>[...Qe,...this._getActionFields(Je)],[]):[]}_getActionFields(Ae){const{className:Qe,title:Je,type:re}=Ae,Ee="button"===re||"toggle"===re?Ae.image:"";return[...this._extractFieldNames(Je),...this._extractFieldNames(Qe),...this._extractFieldNames(Ee)]}_getTitleFields(Ae){return"string"==typeof Ae?this._extractFieldNames(Ae):[]}_extractFieldNames(Ae){if(!Ae||"string"!=typeof Ae)return[];const Je=Ae.match(/{[^}]*}/g);if(!Je)return[];const re=/\{(\w+):.+\}/,Ee=Je.filter($e=>!(0===$e.indexOf("{relationships/")||0===$e.indexOf("{expression/"))).map($e=>$e.replace(re,"{$1}"));return Ee?Ee.map($e=>$e.slice(1,-1)):[]}};(0,T._)([(0,j.Cb)({type:je})],Ye.prototype,"actions",void 0),(0,T._)([(0,j.Cb)()],Ye.prototype,"content",void 0),(0,T._)([(0,L.p)("content")],Ye.prototype,"castContent",null),(0,T._)([(0,B.r)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],Ye.prototype,"readContent",null),(0,T._)([(0,Z.c)("content",{popupElements:{type:ne.Z.ofType(ee)},showAttachments:{type:Boolean},mediaInfos:{type:ne.Z.ofType(ce.V)},description:{type:String}})],Ye.prototype,"writeContent",null),(0,T._)([(0,j.Cb)({type:[ye.Z],json:{write:!0}})],Ye.prototype,"expressionInfos",void 0),(0,T._)([(0,j.Cb)({type:[le.Z]})],Ye.prototype,"fieldInfos",void 0),(0,T._)([(0,Z.c)("fieldInfos")],Ye.prototype,"writeFieldInfos",null),(0,T._)([(0,j.Cb)({type:ue})],Ye.prototype,"layerOptions",void 0),(0,T._)([(0,Z.c)("layerOptions")],Ye.prototype,"writeLayerOptions",null),(0,T._)([(0,j.Cb)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ye.prototype,"lastEditInfoEnabled",void 0),(0,T._)([(0,j.Cb)()],Ye.prototype,"outFields",void 0),(0,T._)([(0,j.Cb)()],Ye.prototype,"overwriteActions",void 0),(0,T._)([(0,j.Cb)()],Ye.prototype,"returnGeometry",void 0),(0,T._)([(0,j.Cb)({json:{type:String}})],Ye.prototype,"title",void 0),(0,T._)([(0,Z.c)("title")],Ye.prototype,"writeTitle",null),(0,T._)([(0,j.Cb)({type:Me,json:{write:!0}})],Ye.prototype,"relatedRecordsInfo",void 0),Ye=Pe=(0,T._)([(0,X.j)(Le)],Ye);const ct=Ye},97478:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>V});var Z,x=C(17626),T=C(86162),ne=C(62208),ie=C(28170),te=C(77712),L=(C(85931),C(8314),C(90912),C(68653)),B=C(76898),X=C(99433);let z=Z=class extends T.wq{constructor(P){super(P),this.end=null,this.start=null}static get allTime(){return ae}static get empty(){return K}readEnd(P,F){return null!=F.end?new Date(F.end):null}writeEnd(P,F){F.end=P?P.getTime():null}get isAllTime(){return this.equals(Z.allTime)}get isEmpty(){return this.equals(Z.empty)}readStart(P,F){return null!=F.start?new Date(F.start):null}writeStart(P,F){F.start=P?P.getTime():null}clone(){return new Z({end:this.end,start:this.start})}equals(P){if(!P)return!1;const F=(0,ne.pC)(this.start)?this.start.getTime():this.start,$=(0,ne.pC)(this.end)?this.end.getTime():this.end,J=(0,ne.pC)(P.start)?P.start.getTime():P.start,H=(0,ne.pC)(P.end)?P.end.getTime():P.end;return F===J&&$===H}expandTo(P){if(this.isEmpty||this.isAllTime)return this.clone();const F=(0,ne.Po)(this.start,J=>(0,ie.JE)(J,P)),$=(0,ne.Po)(this.end,J=>(0,ie.Nm)((0,ie.JE)(J,P),1,P));return new Z({start:F,end:$})}intersection(P){if(!P)return this.clone();if(this.isEmpty||P.isEmpty)return Z.empty;if(this.isAllTime)return P.clone();if(P.isAllTime)return this.clone();const F=(0,ne.R2)(this.start,-1/0,ye=>ye.getTime()),$=(0,ne.R2)(this.end,1/0,ye=>ye.getTime()),J=(0,ne.R2)(P.start,-1/0,ye=>ye.getTime()),H=(0,ne.R2)(P.end,1/0,ye=>ye.getTime());let de,ee;if(J>=F&&J<=$?de=J:F>=J&&F<=H&&(de=F),$>=J&&$<=H?ee=$:H>=F&&H<=$&&(ee=H),!isNaN(de)&&!isNaN(ee)){const ye=new Z;return ye.start=de===-1/0?null:new Date(de),ye.end=ee===1/0?null:new Date(ee),ye}return Z.empty}offset(P,F){if(this.isEmpty||this.isAllTime)return this.clone();const $=new Z,{start:J,end:H}=this;return(0,ne.pC)(J)&&($.start=(0,ie.Nm)(J,P,F)),(0,ne.pC)(H)&&($.end=(0,ie.Nm)(H,P,F)),$}union(P){if(!P||P.isEmpty)return this.clone();if(this.isEmpty)return P.clone();if(this.isAllTime||P.isAllTime)return ae.clone();const F=(0,ne.pC)(this.start)&&(0,ne.pC)(P.start)?new Date(Math.min(this.start.getTime(),P.start.getTime())):null,$=(0,ne.pC)(this.end)&&(0,ne.pC)(P.end)?new Date(Math.max(this.end.getTime(),P.end.getTime())):null;return new Z({start:F,end:$})}};(0,x._)([(0,te.Cb)({type:Date,json:{write:{allowNull:!0}}})],z.prototype,"end",void 0),(0,x._)([(0,L.r)("end")],z.prototype,"readEnd",null),(0,x._)([(0,X.c)("end")],z.prototype,"writeEnd",null),(0,x._)([(0,te.Cb)({readOnly:!0,json:{read:!1}})],z.prototype,"isAllTime",null),(0,x._)([(0,te.Cb)({readOnly:!0,json:{read:!1}})],z.prototype,"isEmpty",null),(0,x._)([(0,te.Cb)({type:Date,json:{write:{allowNull:!0}}})],z.prototype,"start",void 0),(0,x._)([(0,L.r)("start")],z.prototype,"readStart",null),(0,x._)([(0,X.c)("start")],z.prototype,"writeStart",null),z=Z=(0,x._)([(0,B.j)("esri.TimeExtent")],z);const ae=new z,K=new z({start:void 0,end:void 0}),V=z},20849:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Z});var B,x=C(17626),T=C(86162),ne=C(28170),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898)),L=C(58926);let X=B=class extends T.wq{constructor(z){super(z),this.value=0,this.unit="milliseconds"}toMilliseconds(){return(0,ne.rJ)(this.value,this.unit,"milliseconds")}clone(){return new B({value:this.value,unit:this.unit})}};(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0},nonNullable:!0})],X.prototype,"value",void 0),(0,x._)([(0,ie.Cb)({type:L.v.apiValues,json:{type:L.v.jsonValues,read:L.v.read,write:L.v.write},nonNullable:!0})],X.prototype,"unit",void 0),X=B=(0,x._)([(0,j.j)("esri.TimeInterval")],X);const Z=X},76687:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Qe});var x=C(17626),T=C(86162),ne=C(21286),ie=C(77712),Y=(C(85931),C(8314),C(66656)),j=C(68653),L=C(76898),B=C(99433),X=C(90912),Z=C(49672),ae=(C(84161),C(28093));class Q{constructor(re,Ee){this.min=re,this.max=Ee,this.range=Ee-re}ndiff(re,Ee=0){return Math.ceil((re-Ee)/this.range)*this.range+Ee}_normalize(re,Ee,$e,tt=0,pt=!1){return($e-=tt)<re?$e+=this.ndiff(re-$e):$e>Ee&&($e-=this.ndiff($e-Ee)),pt&&$e===Ee&&($e=re),$e+tt}normalize(re,Ee=0,$e=!1){return this._normalize(this.min,this.max,re,Ee,$e)}clamp(re,Ee=0){return(0,ne.uZ)(re-Ee,this.min,this.max)+Ee}monotonic(re,Ee,$e){return re<Ee?Ee:Ee+this.ndiff(re-Ee,$e)}minimalMonotonic(re,Ee,$e){return this._normalize(re,re+this.range,Ee,$e)}center(re,Ee,$e){return Ee=this.monotonic(re,Ee,$e),this.normalize((re+Ee)/2,$e)}diff(re,Ee,$e){return this.monotonic(re,Ee,$e)-re}shortestSignedDiff(re,Ee){re=this.normalize(re);const $e=(Ee=this.normalize(Ee))-re,tt=Ee<re?this.minimalMonotonic(re,Ee)-re:Ee-this.minimalMonotonic(Ee,re);return Math.abs($e)<Math.abs(tt)?$e:tt}contains(re,Ee,$e){return Ee=this.minimalMonotonic(re,Ee),($e=this.minimalMonotonic(re,$e))>re&&$e<Ee}}function ve(Je){for(const re in Je){const Ee=Je[re];Ee instanceof Function&&(Je[re]=Ee.bind(Je))}return Je}(0,ae.c)(),(0,ae.c)(),ve(new Q(0,2*Math.PI)),ve(new Q(-Math.PI,Math.PI));const ce=ve(new Q(0,360));var Pe;(0,ae.c)(),(0,ae.c)(),(0,ae.c)();let je=Pe=class extends T.wq{constructor(...Je){super(...Je),this.position=new Z.Z([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(Je,re,Ee,$e){if(Je&&"object"==typeof Je&&("x"in Je||Array.isArray(Je))){const tt={position:Je};return null!=re&&(tt.heading=re),null!=Ee&&(tt.tilt=Ee),null!=$e&&(tt.fov=$e),tt}return Je}writePosition(Je,re,Ee,$e){const tt=Je.clone();tt.x=(0,X.q9)(Je.x||0),tt.y=(0,X.q9)(Je.y||0),tt.z=Je.hasZ?(0,X.q9)(Je.z||0):Je.z,re[Ee]=tt.write({},$e)}readPosition(Je,re){const Ee=new Z.Z;return Ee.read(Je,re),Ee.x=(0,X.q9)(Ee.x||0),Ee.y=(0,X.q9)(Ee.y||0),Ee.z=Ee.hasZ?(0,X.q9)(Ee.z||0):Ee.z,Ee}equals(Je){return!!Je&&this.tilt===Je.tilt&&this.heading===Je.heading&&this.fov===Je.fov&&this.position.equals(Je.position)}clone(){return new Pe({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};(0,x._)([(0,ie.Cb)({type:Z.Z,json:{write:{isRequired:!0}}})],je.prototype,"position",void 0),(0,x._)([(0,B.c)("position")],je.prototype,"writePosition",null),(0,x._)([(0,j.r)("position")],je.prototype,"readPosition",null),(0,x._)([(0,ie.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,Y.p)(Je=>ce.normalize((0,X.q9)(Je)))],je.prototype,"heading",void 0),(0,x._)([(0,ie.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,Y.p)(Je=>(0,ne.uZ)((0,X.q9)(Je),-180,180))],je.prototype,"tilt",void 0),(0,x._)([(0,ie.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],je.prototype,"fov",void 0),je=Pe=(0,x._)([(0,L.j)("esri.Camera")],je);const rt=je;var Ye,Le=C(29132),Ce=C(62208),Te=C(91179);let ct=Ye=class extends T.wq{constructor(Je){super(Je),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(Je){return(Je%=360)<0&&(Je+=360),Je}clone(){return new Ye({rotation:this.rotation,scale:this.scale,targetGeometry:(0,Ce.pC)(this.targetGeometry)?this.targetGeometry.clone():null,camera:(0,Ce.pC)(this.camera)?this.camera.clone():null})}};function Ae(){return{enabled:!this.camera}}(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Ae}}}}})],ct.prototype,"rotation",void 0),(0,x._)([(0,Y.p)("rotation")],ct.prototype,"castRotation",null),(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Ae}}}}})],ct.prototype,"scale",void 0),(0,x._)([(0,ie.Cb)({types:Le.qM,json:{read:Te.im,write:!0,origins:{"web-scene":{read:Te.im,write:{overridePolicy:Ae}}}}})],ct.prototype,"targetGeometry",void 0),(0,x._)([(0,ie.Cb)({type:rt,json:{write:!0}})],ct.prototype,"camera",void 0),ct=Ye=(0,x._)([(0,L.j)("esri.Viewpoint")],ct);const Qe=ct},7652:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>x});class x{constructor(ne,ie){this.definition=null,this.context=null,this.definition=ne,this.context=ie}}},98362:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>x});class x{constructor(ne=[]){this._elements=ne}length(){return this._elements.length}get(ne){return this._elements[ne]}toArray(){const ne=[];for(let ie=0;ie<this.length();ie++)ne.push(this.get(ie));return ne}}},5371:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ne});var x=C(98362),T=C(26685);class ne extends x.Z{constructor(te,oe,Y,j,L){super(te),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=Y,this._hasM=j,this._spRef=oe,this._cacheId=L}get(te){if(void 0===this._lazyPath[te]){const oe=this._elements[te];if(void 0===oe)return;this._lazyPath[te]=new T.Z(oe,this._spRef,this._hasZ,this._hasM,this._cacheId,te)}return this._lazyPath[te]}equalityTest(te){return te===this||null!==te&&te instanceof ne&&te.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}},26685:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ne});var x=C(98362),T=C(49672);class ne extends x.Z{constructor(te,oe,Y,j,L,B){super(te),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=oe,this._hasZ=Y,this._hasM=j,this._cacheId=L,this._partId=B}get(te){if(void 0===this._lazyPt[te]){const oe=this._elements[te];if(void 0===oe)return;const Y=this._hasZ,j=this._hasM;let L=null;L=Y&&!j?new T.Z(oe[0],oe[1],oe[2],void 0,this._spRef):j&&!Y?new T.Z(oe[0],oe[1],void 0,oe[2],this._spRef):Y&&j?new T.Z(oe[0],oe[1],oe[2],oe[3],this._spRef):new T.Z(oe[0],oe[1],this._spRef),L.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+te.toString(),this._lazyPt[te]=L}return this._lazyPt[te]}equalityTest(te){return te===this||null!==te&&te instanceof ne&&te.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}},54346:(ut,Oe,C)=>{"use strict";C.d(Oe,{V:()=>j});var x=C(59318),ne=(C(84792),C(26584)),ie=C(63290),te=C(21726);const oe=ie.Z.getLogger("esri.assets");function j(L){if(!x.Z.assetsPath)throw oe.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ne.Z("assets:path-not-set","config.assetsPath is not set");return(0,te.v_)(x.Z.assetsPath,L)}},71530:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>X});var L,x=C(17626),T=C(91558),ne=C(86162),ie=C(58817),te=C(77712),Y=(C(90912),C(76898)),j=C(60958);let B=L=class extends ne.wq{constructor(){super(...arguments),this.color=new T.Z("white")}clone(){return new L({color:(0,ie.d9)(this.color)})}};(0,x._)([(0,te.Cb)(j.a)],B.prototype,"color",void 0),B=L=(0,x._)([(0,Y.j)("esri.symbols.callouts.LineCallout3DBorder")],B);const X=B;Object.freeze({__proto__:null,get LineCallout3DBorder(){return B},default:X})},1719:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>ne,c:()=>x,g:()=>T});var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function T(ie){return ie&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie}function ne(ie){throw new Error('Could not dynamically require "'+ie+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},39863:(ut,Oe,C)=>{"use strict";C.d(Oe,{E:()=>x,R:()=>T,a:()=>oe,t:()=>te});const x=1e-6,T=Math.random,ne=Math.PI/180,ie=180/Math.PI;function te(L){return L*ne}function oe(L){return L*ie}Object.freeze({__proto__:null,EPSILON:x,RANDOM:T,toRadian:te,toDegree:oe,equals:function Y(L,B){return Math.abs(L-B)<=x*Math.max(1,Math.abs(L),Math.abs(B))}})},47562:(ut,Oe,C)=>{"use strict";C.d(Oe,{A:()=>rr,B:()=>Vt,C:()=>Zt,D:()=>ce,E:()=>me,F:()=>ct,G:()=>bt,H:()=>Le,I:()=>de,J:()=>Pt,K:()=>gr,L:()=>Ht,M:()=>$t,N:()=>H,O:()=>er,P:()=>Q,Q:()=>Ce,R:()=>ee,S:()=>ye,T:()=>Ee,U:()=>ht,V:()=>lr,a:()=>he,b:()=>Pe,c:()=>pe,d:()=>re,e:()=>Je,f:()=>ve,g:()=>Qe,h:()=>St,i:()=>fe,j:()=>Me,k:()=>ge,l:()=>Kt,m:()=>se,n:()=>je,o:()=>De,p:()=>rt,q:()=>xe,r:()=>Mt,s:()=>$e,t:()=>pt,u:()=>Nt,v:()=>le,w:()=>Qt,x:()=>ue,y:()=>at,z:()=>mt});var x=C(7652),T=C(98362),ne=C(5371),ie=C(26685),te=C(10699),oe=C(2004),Y=C(21674),j=C(72854),L=C(49672),B=C(37118),X=C(55214),Z=C(27122),z=C(62208),ae=C(75327),K=C(25748),V=C(56683);class P{constructor(st){this.value=st}}class F{constructor(st){this.value=st}}class ${constructor(st){this.fn=st}}class J{constructor(st,Ge){this.paramCount=Ge,this.fn=st}}const H=$,de=F,ee=P,ye=J,le={type:"VOID"},ge={type:"BREAK"},se={type:"CONTINUE"};function Q(Ze,st,Ge){return""===st||null==st||st===Ge||st===Ge?Ze:Ze=Ze.split(st).join(Ge)}function pe(Ze){return Ze instanceof $||Ze instanceof x.Z||Ze instanceof J}function ue(Ze){return!!(ve(Ze)||Me(Ze)||je(Ze)||fe(Ze)||null===Ze||Ze===le||"number"==typeof Ze)}function me(Ze,st){return void 0===Ze?st:Ze}function ve(Ze){return"string"==typeof Ze||Ze instanceof String}function fe(Ze){return"boolean"==typeof Ze}function Me(Ze){return"number"==typeof Ze}function ce(Ze){return"number"==typeof Ze&&isFinite(Ze)&&Math.floor(Ze)===Ze}function he(Ze){return Ze instanceof Array}function De(Ze){return!0===(Ze&&Ze.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===Ze.declaredRootClass)}function xe(Ze){return!0===(Ze&&Ze.declaredRootClass&&"esri.arcade.featureSetCollection"===Ze.declaredRootClass)}function Pe(Ze){return Ze instanceof T.Z}function je(Ze){return Ze instanceof Date}function rt(Ze,st,Ge){if(Ze.length<st||Ze.length>Ge)throw new Error("Function called with wrong number of Parameters")}function Le(Ze){return Ze<0?-Math.round(-Ze):Math.round(Ze)}function Ce(){let Ze=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(st){const Ge=(Ze+16*Math.random())%16|0;return Ze=Math.floor(Ze/16),("x"===st?Ge:3&Ge|8).toString(16)})}function Te(Ze,st){return!1===isNaN(Ze)?null==st||""===st?Ze.toString():(st=Q(st,"\u2030",""),st=Q(st,"\xa4",""),(0,ae.WU)(Ze,{pattern:st})):Ze.toString()}function Ye(Ze,st){const Ge=Z.ou.fromJSDate(Ze);return null==st||""===st?Ge.toISO({suppressMilliseconds:!0}):Ge.toFormat(ct(st),{locale:(0,V.Kd)(),numberingSystem:"latn"})}function ct(Ze){Ze=Ze.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let st="";const Ge=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const Xe of Ze.match(Ge))switch(Xe){case"D":st+="d";break;case"DD":st+="dd";break;case"DDD":st+="o";break;case"d":st+="c";break;case"ddd":st+="ccc";break;case"dddd":st+="cccc";break;case"M":st+="L";break;case"MM":st+="LL";break;case"MMM":st+="LLL";break;case"MMMM":st+="LLLL";break;case"YY":st+="yy";break;case"Y":case"YYYY":st+="yyyy";break;case"Q":st+="q";break;case"Z":st+="ZZ";break;case"ZZ":st+="ZZZ";break;case"S":st+="'S'";break;case"SS":st+="'SS'";break;case"SSS":st+="u";break;case"A":case"a":st+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":st+=Xe;break;default:Xe.length>=2&&"["===Xe.slice(0,1)&&"]"===Xe.slice(-1)?st+=`'${Xe.slice(1,-1)}'`:st+=`'${Xe}'`}return st}function Ae(Ze,st,Ge){switch(Ge){case">":return Ze>st;case"<":return Ze<st;case">=":return Ze>=st;case"<=":return Ze<=st}return!1}function Qe(Ze,st,Ge){if(null===Ze){if(null===st||st===le)return Ae(null,null,Ge);if(Me(st))return Ae(0,st,Ge);if(ve(st)||fe(st))return Ae(0,pt(st),Ge);if(je(st))return Ae(0,st.getTime(),Ge)}if(Ze===le){if(null===st||st===le)return Ae(null,null,Ge);if(Me(st))return Ae(0,st,Ge);if(ve(st)||fe(st))return Ae(0,pt(st),Ge);if(je(st))return Ae(0,st.getTime(),Ge)}else if(Me(Ze)){if(Me(st))return Ae(Ze,st,Ge);if(fe(st))return Ae(Ze,pt(st),Ge);if(null===st||st===le)return Ae(Ze,0,Ge);if(ve(st))return Ae(Ze,pt(st),Ge);if(je(st))return Ae(Ze,st.getTime(),Ge)}else if(ve(Ze)){if(ve(st))return Ae(re(Ze),re(st),Ge);if(je(st))return Ae(pt(Ze),st.getTime(),Ge);if(Me(st))return Ae(pt(Ze),st,Ge);if(null===st||st===le)return Ae(pt(Ze),0,Ge);if(fe(st))return Ae(pt(Ze),pt(st),Ge)}else if(je(Ze)){if(je(st))return Ae(Ze,st,Ge);if(null===st||st===le)return Ae(Ze.getTime(),0,Ge);if(Me(st))return Ae(Ze.getTime(),st,Ge);if(fe(st)||ve(st))return Ae(Ze.getTime(),pt(st),Ge)}else if(fe(Ze)){if(fe(st))return Ae(Ze,st,Ge);if(Me(st))return Ae(pt(Ze),pt(st),Ge);if(je(st))return Ae(pt(Ze),st.getTime(),Ge);if(null===st||st===le)return Ae(pt(Ze),0,Ge);if(ve(st))return Ae(pt(Ze),pt(st),Ge)}return!!Je(Ze,st)&&("<="===Ge||">="===Ge)}function Je(Ze,st){if(Ze===st||null===Ze&&st===le||null===st&&Ze===le)return!0;if(je(Ze)&&je(st))return Ze.getTime()===st.getTime();if(Ze instanceof ne.Z||Ze instanceof ie.Z)return Ze.equalityTest(st);if(Ze instanceof L.Z&&st instanceof L.Z){const Ge=Ze.cache._arcadeCacheId,Xe=st.cache._arcadeCacheId;if(null!=Ge)return Ge===Xe}return void 0!==Ze&&void 0!==st&&null!==Ze&&null!==st&&"object"==typeof Ze&&"object"==typeof st&&(Ze._arcadeCacheId===st._arcadeCacheId&&null!=Ze._arcadeCacheId||Ze._underlyingGraphic===st._underlyingGraphic&&null!=Ze._underlyingGraphic)}function re(Ze,st){if(ve(Ze))return Ze;if(null===Ze)return"";if(Me(Ze))return Te(Ze,st);if(fe(Ze))return Ze.toString();if(je(Ze))return Ye(Ze,st);if(Ze instanceof Y.Z)return JSON.stringify(Ze.toJSON());if(he(Ze)){const Ge=[];for(let Xe=0;Xe<Ze.length;Xe++)Ge[Xe]=tt(Ze[Xe]);return"["+Ge.join(",")+"]"}if(Ze instanceof T.Z){const Ge=[];for(let Xe=0;Xe<Ze.length();Xe++)Ge[Xe]=tt(Ze.get(Xe));return"["+Ge.join(",")+"]"}return null!==Ze&&"object"==typeof Ze&&void 0!==Ze.castToText?Ze.castToText():pe(Ze)?"object, Function":""}function Ee(Ze){const st=[];if(!1===he(Ze))return null;if(Ze instanceof T.Z){for(let Ge=0;Ge<Ze.length();Ge++)st[Ge]=pt(Ze.get(Ge));return st}for(let Ge=0;Ge<Ze.length;Ge++)st[Ge]=pt(Ze[Ge]);return st}function $e(Ze,st){if(ve(Ze))return Ze;if(null===Ze)return"";if(Me(Ze))return Te(Ze,st);if(fe(Ze))return Ze.toString();if(je(Ze))return Ye(Ze,st);if(Ze instanceof Y.Z)return Ze instanceof oe.Z?'{"xmin":'+Ze.xmin.toString()+',"ymin":'+Ze.ymin.toString()+","+(Ze.hasZ?'"zmin":'+Ze.zmin.toString()+",":"")+(Ze.hasM?'"mmin":'+Ze.mmin.toString()+",":"")+'"xmax":'+Ze.xmax.toString()+',"ymax":'+Ze.ymax.toString()+","+(Ze.hasZ?'"zmax":'+Ze.zmax.toString()+",":"")+(Ze.hasM?'"mmax":'+Ze.mmax.toString()+",":"")+'"spatialReference":'+yr(Ze.spatialReference)+"}":yr(Ze.toJSON(),(Ge,Xe)=>Ge.key===Xe.key?0:"spatialReference"===Ge.key?1:"spatialReference"===Xe.key||Ge.key<Xe.key?-1:Ge.key>Xe.key?1:0);if(he(Ze)){const Ge=[];for(let Xe=0;Xe<Ze.length;Xe++)Ge[Xe]=tt(Ze[Xe]);return"["+Ge.join(",")+"]"}if(Ze instanceof T.Z){const Ge=[];for(let Xe=0;Xe<Ze.length();Xe++)Ge[Xe]=tt(Ze.get(Xe));return"["+Ge.join(",")+"]"}return null!==Ze&&"object"==typeof Ze&&void 0!==Ze.castToText?Ze.castToText():pe(Ze)?"object, Function":""}function tt(Ze){if(null===Ze)return"null";if(fe(Ze)||Me(Ze)||ve(Ze))return JSON.stringify(Ze);if(Ze instanceof Y.Z||Ze instanceof T.Z||Ze instanceof Array)return $e(Ze);if(Ze instanceof Date)return JSON.stringify(Ye(Ze,""));if(null!==Ze&&"object"==typeof Ze){if(void 0!==Ze.castToText)return Ze.castToText()}else if(Ze===le)return"null";return"null"}function pt(Ze,st){return Me(Ze)?Ze:null===Ze||""===Ze?0:je(Ze)?NaN:fe(Ze)?Ze?1:0:he(Ze)||""===Ze||void 0===Ze?NaN:void 0!==st&&ve(Ze)?(st=Q(st,"\u2030",""),st=Q(st,"\xa4",""),(0,ae.Qc)(Ze,{pattern:st})):Ze===le?0:Number(Ze)}function mt(Ze){if(je(Ze))return Ze;if(ve(Ze)){const st=yt(Ze);if(st)return st.toJSDate()}return null}function bt(Ze){return je(Ze)?Z.ou.fromJSDate(Ze):ve(Ze)?yt(Ze):null}function yt(Ze){const st=/ (\d\d)/;let Ge=Z.ou.fromISO(Ze);return Ge.isValid||st.test(Ze)&&(Ze=Ze.replace(st,"T$1"),Ge=Z.ou.fromISO(Ze),Ge.isValid)?Ge:null}function at(Ze){return fe(Ze)?Ze:ve(Ze)?"true"===(Ze=Ze.toLowerCase()):!!Me(Ze)&&0!==Ze&&!isNaN(Ze)}function Mt(Ze,st){return(0,z.Wi)(Ze)?null:(null!=Ze.spatialReference||(Ze.spatialReference=st),Ze)}function Pt(Ze){if(null===Ze)return null;if(Ze instanceof L.Z)return"NaN"===Ze.x||null===Ze.x||isNaN(Ze.x)?null:Ze;if(Ze instanceof B.Z){if(0===Ze.rings.length)return null;for(const st of Ze.rings)if(st.length>0)return Ze;return null}if(Ze instanceof X.Z){if(0===Ze.paths.length)return null;for(const st of Ze.paths)if(st.length>0)return Ze;return null}return Ze instanceof j.Z?0===Ze.points.length?null:Ze:Ze instanceof oe.Z?"NaN"===Ze.xmin||null===Ze.xmin||isNaN(Ze.xmin)?null:Ze:null}function Vt(Ze,st){if(!Ze||!Ze.domain)return st;let Ge=null;if("string"===Ze.field.type||"esriFieldTypeString"===Ze.field.type)st=re(st);else{if(null==st)return null;if(""===st)return st;st=pt(st)}for(let Xe=0;Xe<Ze.domain.codedValues.length;Xe++){const He=Ze.domain.codedValues[Xe];He.code===st&&(Ge=He)}return null===Ge?st:Ge.name}function Zt(Ze,st){if(!Ze||!Ze.domain)return st;let Ge=null;st=re(st);for(let Xe=0;Xe<Ze.domain.codedValues.length;Xe++){const He=Ze.domain.codedValues[Xe];He.name===st&&(Ge=He)}return null===Ge?st:Ge.code}function rr(Ze,st,Ge=null,Xe){if(!st||!st.fields)return null;let He,Ue,it=null;for(let wt=0;wt<st.fields.length;wt++){const nr=st.fields[wt];nr.name.toLowerCase()===Ze.toString().toLowerCase()&&(it=nr)}if(null===it)throw new Error("Field not found");return Xe||(Xe=Ge&&st.typeIdField&&Ge._field(st.typeIdField)),null!=Xe&&st.types.some(function(wt){return wt.id===Xe&&(He=wt.domains&&wt.domains[it.name],He&&"inherited"===He.type&&(He=vr(it.name,st),Ue=!0),!0)}),Ue||He||(He=vr(Ze,st)),{field:it,domain:He}}function vr(Ze,st){let Ge;return st.fields.some(function(Xe){return Xe.name.toLowerCase()===Ze.toLowerCase()&&(Ge=Xe.domain),!!Ge}),Ge}function yr(Ze,st){st||(st={}),"function"==typeof st&&(st={cmp:st});const Ge="boolean"==typeof st.cycles&&st.cycles,Xe=st.cmp&&(He=st.cmp,function(it){return function(wt,nr){return He({key:wt,value:it[wt]},{key:nr,value:it[nr]})}});var He;const Ue=[];return function it(wt){if(wt&&wt.toJSON&&"function"==typeof wt.toJSON&&(wt=wt.toJSON()),void 0===wt)return;if("number"==typeof wt)return isFinite(wt)?""+wt:"null";if("object"!=typeof wt)return JSON.stringify(wt);let nr,wr;if(Array.isArray(wt)){for(wr="[",nr=0;nr<wt.length;nr++)nr&&(wr+=","),wr+=it(wt[nr])||"null";return wr+"]"}if(null===wt)return"null";if(-1!==Ue.indexOf(wt)){if(Ge)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const Dr=Ue.push(wt)-1,kr=Object.keys(wt).sort(Xe&&Xe(wt));for(wr="",nr=0;nr<kr.length;nr++){const Wr=kr[nr],cn=it(wt[Wr]);cn&&(wr&&(wr+=","),wr+=JSON.stringify(Wr)+":"+cn)}return Ue.splice(Dr,1),"{"+wr+"}"}(Ze)}function gr(Ze){if(null===Ze)return null;const st=[];for(const Ge of Ze)st.push(Ge&&(Ge.declaredClass&&"esri.arcade.Feature"===Ge.declaredClass||"FeatureSetReader"===Ge.type)?Ge.geometry():Ge);return st}function _t(Ze,st){if(!(st instanceof L.Z))throw new Error("Invalid Argument");Ze.push(st.hasZ?st.hasM?[st.x,st.y,st.z,st.m]:[st.x,st.y,st.z]:[st.x,st.y])}function $t(Ze,st){if(he(Ze)||Pe(Ze)){let Ge=!1,Xe=!1,He=[],Ue=st;if(he(Ze)){for(const it of Ze)_t(He,it);He.length>0&&(Ue=Ze[0].spatialReference,Ge=Ze[0].hasZ,Xe=Ze[0].hasM)}else if(Ze instanceof ie.Z)He=Ze._elements,He.length>0&&(Ge=Ze._hasZ,Xe=Ze._hasM,Ue=Ze.get(0).spatialReference);else{if(!Pe(Ze))throw new Error("Invalid Argument");for(const it of Ze.toArray())_t(He,it);He.length>0&&(Ue=Ze.get(0).spatialReference,Ge=!0===Ze.get(0).hasZ,Xe=!0===Ze.get(0).hasM)}return 0===He.length?null:(!1===(0,K.bu)(He,Xe,Ge)&&(He=He.slice(0).reverse()),new B.Z({rings:[He],spatialReference:Ue,hasZ:Ge,hasM:Xe}))}return Ze}function Ht(Ze,st){if(he(Ze)||Pe(Ze)){let Ge=!1,Xe=!1,He=[],Ue=st;if(he(Ze)){for(const it of Ze)_t(He,it);He.length>0&&(Ue=Ze[0].spatialReference,Ge=!0===Ze[0].hasZ,Xe=!0===Ze[0].hasM)}else if(Ze instanceof ie.Z)He=Ze._elements,He.length>0&&(Ge=Ze._hasZ,Xe=Ze._hasM,Ue=Ze.get(0).spatialReference);else if(Pe(Ze)){for(const it of Ze.toArray())_t(He,it);He.length>0&&(Ue=Ze.get(0).spatialReference,Ge=!0===Ze.get(0).hasZ,Xe=!0===Ze.get(0).hasM)}return 0===He.length?null:new X.Z({paths:[He],spatialReference:Ue,hasZ:Ge,hasM:Xe})}return Ze}function er(Ze,st){if(he(Ze)||Pe(Ze)){let Ge=!1,Xe=!1,He=[],Ue=st;if(he(Ze)){for(const it of Ze)_t(He,it);He.length>0&&(Ue=Ze[0].spatialReference,Ge=!0===Ze[0].hasZ,Xe=!0===Ze[0].hasM)}else if(Ze instanceof ie.Z)He=Ze._elements,He.length>0&&(Ge=Ze._hasZ,Xe=Ze._hasM,Ue=Ze.get(0).spatialReference);else if(Pe(Ze)){for(const it of Ze.toArray())_t(He,it);He.length>0&&(Ue=Ze.get(0).spatialReference,Ge=!0===Ze.get(0).hasZ,Xe=!0===Ze.get(0).hasM)}return 0===He.length?null:new j.Z({points:He,spatialReference:Ue,hasZ:Ge,hasM:Xe})}return Ze}function lr(Ze,st=!1){const Ge=[];if(null===Ze)return Ge;if(!0===he(Ze)){for(let Xe=0;Xe<Ze.length;Xe++){const He=re(Ze[Xe]);""===He&&!0!==st||Ge.push(He)}return Ge}if(Ze instanceof T.Z){for(let Xe=0;Xe<Ze.length();Xe++){const He=re(Ze.get(Xe));""===He&&!0!==st||Ge.push(He)}return Ge}if(ue(Ze)){const Xe=re(Ze);return""===Xe&&!0!==st||Ge.push(Xe),Ge}return[]}let fr=0;function ht(Ze){return fr++,fr%100==0?(fr=0,(0,te.Ue)(st=>{setTimeout(()=>{st(Ze)},0)})):Ze}function St(Ze,st,Ge){switch(Ge){case"&":return Ze&st;case"|":return Ze|st;case"^":return Ze^st;case"<<":return Ze<<st;case">>":return Ze>>st;case">>>":return Ze>>>st}}function Nt(Ze,st=null){return null==Ze?null:fe(Ze)||Me(Ze)||ve(Ze)?Ze:Ze instanceof Y.Z?!0===(null==st?void 0:st.keepGeometryType)?Ze:Ze.toJSON():Ze instanceof T.Z?Ze.toArray().map(Ge=>Nt(Ge,st)):Ze instanceof Array?Ze.map(Ge=>Nt(Ge,st)):Ze instanceof Date?Ze:null!==Ze&&"object"==typeof Ze&&void 0!==Ze.castAsJson?Ze.castAsJson(st):null}function Wt(Ze,st,Ge,Xe,He){return Qt(Ze,st,Ge).then(Ue=>{He[Xe]=Ue})}function Qt(Ze,st=null,Ge=null){if(Ze instanceof T.Z&&(Ze=Ze.toArray()),null==Ze)return(0,te.DB)(null);if(ue(Ze)||Ze instanceof Y.Z||Ze instanceof Date)return(0,te.DB)(Nt(Ze,Ge));if(Ze instanceof Array){const Xe=[],He=[];for(const Ue of Ze)null===Ue||ue(Ue)||Ue instanceof Y.Z||Ue instanceof Date?He.push(Nt(Ue,Ge)):(He.push(null),Xe.push(Wt(Ue,st,Ge,He.length-1,He)));return Xe.length>0?(0,te.$6)(Xe).then(()=>He):(0,te.DB)(He)}return null!==Ze&&"object"==typeof Ze&&void 0!==Ze.castAsJsonAsync?Ze.castAsJsonAsync(st,Ge):(0,te.DB)(null)}const Kt=Object.freeze({__proto__:null,ReturnResultE:P,ImplicitResultE:F,NativeFunctionE:$,SizzleFunctionE:J,NativeFunction:H,ImplicitResult:de,ReturnResult:ee,SizzleFunction:ye,voidOperation:le,breakResult:ge,continueResult:se,multiReplace:Q,isFunctionParameter:pe,isSimpleType:ue,defaultUndefined:me,isString:ve,isBoolean:fe,isNumber:Me,isInteger:ce,isArray:he,isFeatureSet:De,isFeatureSetCollection:xe,isImmutableArray:Pe,isDate:je,pcCheck:rt,absRound:Le,generateUUID:Ce,formatNumber:Te,formatDate:Ye,standardiseDateFormat:ct,greaterThanLessThan:Qe,equalityTest:Je,toString:re,toNumberArray:Ee,toStringExplicit:$e,toNumber:pt,toDate:mt,toDateTime:bt,toBoolean:at,fixSpatialReference:Mt,fixNullGeometry:Pt,getDomainValue:Vt,getDomainCode:Zt,getDomain:rr,stableStringify:yr,autoCastFeatureToGeometry:gr,autoCastArrayOfPointsToPolygon:$t,autoCastArrayOfPointsToPolyline:Ht,autoCastArrayOfPointsToMultiPoint:er,toStringArray:lr,tick:ht,binaryOperator:St,castAsJson:Nt,castAsJsonAsync:Qt})},31478:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>te,b:()=>X,f:()=>Z,i:()=>ne,m:()=>Y,r:()=>j,s:()=>L,t:()=>B});var x=C(39863);function ne(le){return le[0]=1,le[1]=0,le[2]=0,le[3]=1,le[4]=0,le[5]=0,le}function te(le,ge){const se=ge[0],Q=ge[1],pe=ge[2],ue=ge[3],me=ge[4],ve=ge[5];let fe=se*ue-Q*pe;return fe?(fe=1/fe,le[0]=ue*fe,le[1]=-Q*fe,le[2]=-pe*fe,le[3]=se*fe,le[4]=(pe*ve-ue*me)*fe,le[5]=(Q*me-se*ve)*fe,le):null}function Y(le,ge,se){const Q=ge[0],pe=ge[1],ue=ge[2],me=ge[3],ve=ge[4],fe=ge[5],Me=se[0],ce=se[1],he=se[2],De=se[3],xe=se[4],Pe=se[5];return le[0]=Q*Me+ue*ce,le[1]=pe*Me+me*ce,le[2]=Q*he+ue*De,le[3]=pe*he+me*De,le[4]=Q*xe+ue*Pe+ve,le[5]=pe*xe+me*Pe+fe,le}function j(le,ge,se){const Q=ge[0],pe=ge[1],ue=ge[2],me=ge[3],ve=ge[4],fe=ge[5],Me=Math.sin(se),ce=Math.cos(se);return le[0]=Q*ce+ue*Me,le[1]=pe*ce+me*Me,le[2]=Q*-Me+ue*ce,le[3]=pe*-Me+me*ce,le[4]=ve,le[5]=fe,le}function L(le,ge,se){const pe=ge[1],ue=ge[2],me=ge[3],ve=ge[4],fe=ge[5],Me=se[0],ce=se[1];return le[0]=ge[0]*Me,le[1]=pe*Me,le[2]=ue*ce,le[3]=me*ce,le[4]=ve,le[5]=fe,le}function B(le,ge,se){const Q=ge[0],pe=ge[1],ue=ge[2],me=ge[3],ve=ge[4],fe=ge[5],Me=se[0],ce=se[1];return le[0]=Q,le[1]=pe,le[2]=ue,le[3]=me,le[4]=Q*Me+ue*ce+ve,le[5]=pe*Me+me*ce+fe,le}function X(le,ge){const se=Math.sin(ge),Q=Math.cos(ge);return le[0]=Q,le[1]=se,le[2]=-se,le[3]=Q,le[4]=0,le[5]=0,le}function Z(le,ge){return le[0]=ge[0],le[1]=0,le[2]=0,le[3]=ge[1],le[4]=0,le[5]=0,le}function P(le,ge,se){return le[0]=ge[0]-se[0],le[1]=ge[1]-se[1],le[2]=ge[2]-se[2],le[3]=ge[3]-se[3],le[4]=ge[4]-se[4],le[5]=ge[5]-se[5],le}Object.freeze({__proto__:null,copy:function T(le,ge){return le[0]=ge[0],le[1]=ge[1],le[2]=ge[2],le[3]=ge[3],le[4]=ge[4],le[5]=ge[5],le},identity:ne,set:function ie(le,ge,se,Q,pe,ue,me){return le[0]=ge,le[1]=se,le[2]=Q,le[3]=pe,le[4]=ue,le[5]=me,le},invert:te,determinant:function oe(le){return le[0]*le[3]-le[1]*le[2]},multiply:Y,rotate:j,scale:L,translate:B,fromRotation:X,fromScaling:Z,fromTranslation:function z(le,ge){return le[0]=1,le[1]=0,le[2]=0,le[3]=1,le[4]=ge[0],le[5]=ge[1],le},str:function ae(le){return"mat2d("+le[0]+", "+le[1]+", "+le[2]+", "+le[3]+", "+le[4]+", "+le[5]+")"},frob:function K(le){return Math.sqrt(le[0]**2+le[1]**2+le[2]**2+le[3]**2+le[4]**2+le[5]**2+1)},add:function V(le,ge,se){return le[0]=ge[0]+se[0],le[1]=ge[1]+se[1],le[2]=ge[2]+se[2],le[3]=ge[3]+se[3],le[4]=ge[4]+se[4],le[5]=ge[5]+se[5],le},subtract:P,multiplyScalar:function F(le,ge,se){return le[0]=ge[0]*se,le[1]=ge[1]*se,le[2]=ge[2]*se,le[3]=ge[3]*se,le[4]=ge[4]*se,le[5]=ge[5]*se,le},multiplyScalarAndAdd:function $(le,ge,se,Q){return le[0]=ge[0]+se[0]*Q,le[1]=ge[1]+se[1]*Q,le[2]=ge[2]+se[2]*Q,le[3]=ge[3]+se[3]*Q,le[4]=ge[4]+se[4]*Q,le[5]=ge[5]+se[5]*Q,le},exactEquals:function J(le,ge){return le[0]===ge[0]&&le[1]===ge[1]&&le[2]===ge[2]&&le[3]===ge[3]&&le[4]===ge[4]&&le[5]===ge[5]},equals:function H(le,ge){const se=le[0],Q=le[1],pe=le[2],ue=le[3],me=le[4],ve=le[5],fe=ge[0],Me=ge[1],ce=ge[2],he=ge[3],De=ge[4],xe=ge[5];return Math.abs(se-fe)<=x.E*Math.max(1,Math.abs(se),Math.abs(fe))&&Math.abs(Q-Me)<=x.E*Math.max(1,Math.abs(Q),Math.abs(Me))&&Math.abs(pe-ce)<=x.E*Math.max(1,Math.abs(pe),Math.abs(ce))&&Math.abs(ue-he)<=x.E*Math.max(1,Math.abs(ue),Math.abs(he))&&Math.abs(me-De)<=x.E*Math.max(1,Math.abs(me),Math.abs(De))&&Math.abs(ve-xe)<=x.E*Math.max(1,Math.abs(ve),Math.abs(xe))},mul:Y,sub:P})},12225:(ut,Oe,C)=>{"use strict";function x(){const j=new Float32Array(6);return j[0]=1,j[3]=1,j}function te(j,L,B,X){const Z=L[X],z=L[X+1];j[X]=B[0]*Z+B[2]*z+B[4],j[X+1]=B[1]*Z+B[3]*z+B[5]}function oe(j,L,B,X=0,Z=0,z=2){const ae=Z||L.length/z;for(let K=X;K<ae;K++)te(j,L,B,K*z)}C.d(Oe,{c:()=>x,t:()=>oe}),Object.freeze({__proto__:null,create:x,clone:function T(j){const L=new Float32Array(6);return L[0]=j[0],L[1]=j[1],L[2]=j[2],L[3]=j[3],L[4]=j[4],L[5]=j[5],L},fromValues:function ne(j,L,B,X,Z,z){const ae=new Float32Array(6);return ae[0]=j,ae[1]=L,ae[2]=B,ae[3]=X,ae[4]=Z,ae[5]=z,ae},createView:function ie(j,L){return new Float32Array(j,L,6)},transform:te,transformMany:oe})},46342:(ut,Oe,C)=>{"use strict";function x(){return[1,0,0,1,0,0]}C.d(Oe,{c:()=>x}),Object.freeze({__proto__:null,create:x,clone:function T(oe){return[oe[0],oe[1],oe[2],oe[3],oe[4],oe[5]]},fromValues:function ne(oe,Y,j,L,B,X){return[oe,Y,j,L,B,X]},createView:function ie(oe,Y){return new Float64Array(oe,Y,6)}})},30217:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>H,b:()=>te,c:()=>X,d:()=>z,f:()=>T,i:()=>me,j:()=>ae,m:()=>B,r:()=>Z,s:()=>ie,t:()=>oe});var x=C(39863);function T(ce,he){return ce[0]=he[0],ce[1]=he[1],ce[2]=he[2],ce[3]=he[4],ce[4]=he[5],ce[5]=he[6],ce[6]=he[8],ce[7]=he[9],ce[8]=he[10],ce}function ie(ce,he,De,xe,Pe,je,rt,Le,Ce,Te){return ce[0]=he,ce[1]=De,ce[2]=xe,ce[3]=Pe,ce[4]=je,ce[5]=rt,ce[6]=Le,ce[7]=Ce,ce[8]=Te,ce}function te(ce){return ce[0]=1,ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=1,ce[5]=0,ce[6]=0,ce[7]=0,ce[8]=1,ce}function oe(ce,he){if(ce===he){const De=he[1],xe=he[2],Pe=he[5];ce[1]=he[3],ce[2]=he[6],ce[3]=De,ce[5]=he[7],ce[6]=xe,ce[7]=Pe}else ce[0]=he[0],ce[1]=he[3],ce[2]=he[6],ce[3]=he[1],ce[4]=he[4],ce[5]=he[7],ce[6]=he[2],ce[7]=he[5],ce[8]=he[8];return ce}function B(ce,he,De){const xe=he[0],Pe=he[1],je=he[2],rt=he[3],Le=he[4],Ce=he[5],Te=he[6],Ye=he[7],ct=he[8],Ae=De[0],Qe=De[1],Je=De[2],re=De[3],Ee=De[4],$e=De[5],tt=De[6],pt=De[7],mt=De[8];return ce[0]=Ae*xe+Qe*rt+Je*Te,ce[1]=Ae*Pe+Qe*Le+Je*Ye,ce[2]=Ae*je+Qe*Ce+Je*ct,ce[3]=re*xe+Ee*rt+$e*Te,ce[4]=re*Pe+Ee*Le+$e*Ye,ce[5]=re*je+Ee*Ce+$e*ct,ce[6]=tt*xe+pt*rt+mt*Te,ce[7]=tt*Pe+pt*Le+mt*Ye,ce[8]=tt*je+pt*Ce+mt*ct,ce}function X(ce,he,De){const xe=he[0],Pe=he[1],je=he[2],rt=he[3],Le=he[4],Ce=he[5],Te=he[6],Ye=he[7],ct=he[8],Ae=De[0],Qe=De[1];return ce[0]=xe,ce[1]=Pe,ce[2]=je,ce[3]=rt,ce[4]=Le,ce[5]=Ce,ce[6]=Ae*xe+Qe*rt+Te,ce[7]=Ae*Pe+Qe*Le+Ye,ce[8]=Ae*je+Qe*Ce+ct,ce}function Z(ce,he,De){const xe=he[0],Pe=he[1],je=he[2],rt=he[3],Le=he[4],Ce=he[5],Te=he[6],Ye=he[7],ct=he[8],Ae=Math.sin(De),Qe=Math.cos(De);return ce[0]=Qe*xe+Ae*rt,ce[1]=Qe*Pe+Ae*Le,ce[2]=Qe*je+Ae*Ce,ce[3]=Qe*rt-Ae*xe,ce[4]=Qe*Le-Ae*Pe,ce[5]=Qe*Ce-Ae*je,ce[6]=Te,ce[7]=Ye,ce[8]=ct,ce}function z(ce,he,De){const xe=De[0],Pe=De[1],je=De[2];return ce[0]=xe*he[0],ce[1]=xe*he[1],ce[2]=xe*he[2],ce[3]=Pe*he[3],ce[4]=Pe*he[4],ce[5]=Pe*he[5],ce[6]=je*he[6],ce[7]=je*he[7],ce[8]=je*he[8],ce}function ae(ce,he,De){const xe=De[0],Pe=De[1];return ce[0]=xe*he[0],ce[1]=xe*he[1],ce[2]=xe*he[2],ce[3]=Pe*he[3],ce[4]=Pe*he[4],ce[5]=Pe*he[5],ce}function H(ce,he){const De=he[0],xe=he[1],Pe=he[2],je=he[3],rt=he[4],Le=he[5],Ce=he[6],Te=he[7],Ye=he[8],ct=he[9],Ae=he[10],Qe=he[11],Je=he[12],re=he[13],Ee=he[14],$e=he[15],tt=De*Le-xe*rt,pt=De*Ce-Pe*rt,mt=De*Te-je*rt,bt=xe*Ce-Pe*Le,yt=xe*Te-je*Le,at=Pe*Te-je*Ce,Mt=Ye*re-ct*Je,Pt=Ye*Ee-Ae*Je,Vt=Ye*$e-Qe*Je,Zt=ct*Ee-Ae*re,rr=ct*$e-Qe*re,vr=Ae*$e-Qe*Ee;let yr=tt*vr-pt*rr+mt*Zt+bt*Vt-yt*Pt+at*Mt;return yr?(yr=1/yr,ce[0]=(Le*vr-Ce*rr+Te*Zt)*yr,ce[1]=(Ce*Vt-rt*vr-Te*Pt)*yr,ce[2]=(rt*rr-Le*Vt+Te*Mt)*yr,ce[3]=(Pe*rr-xe*vr-je*Zt)*yr,ce[4]=(De*vr-Pe*Vt+je*Pt)*yr,ce[5]=(xe*Vt-De*rr-je*Mt)*yr,ce[6]=(re*at-Ee*yt+$e*bt)*yr,ce[7]=(Ee*mt-Je*at-$e*pt)*yr,ce[8]=(Je*yt-re*mt+$e*tt)*yr,ce):null}function ge(ce,he,De){return ce[0]=he[0]-De[0],ce[1]=he[1]-De[1],ce[2]=he[2]-De[2],ce[3]=he[3]-De[3],ce[4]=he[4]-De[4],ce[5]=he[5]-De[5],ce[6]=he[6]-De[6],ce[7]=he[7]-De[7],ce[8]=he[8]-De[8],ce}function me(ce){const he=x.E,De=ce[0],xe=ce[1],Pe=ce[2],je=ce[3],rt=ce[4],Le=ce[5],Ce=ce[6],Te=ce[7],Ye=ce[8];return Math.abs(1-(De*De+je*je+Ce*Ce))<=he&&Math.abs(1-(xe*xe+rt*rt+Te*Te))<=he&&Math.abs(1-(Pe*Pe+Le*Le+Ye*Ye))<=he}Object.freeze({__proto__:null,fromMat4:T,copy:function ne(ce,he){return ce[0]=he[0],ce[1]=he[1],ce[2]=he[2],ce[3]=he[3],ce[4]=he[4],ce[5]=he[5],ce[6]=he[6],ce[7]=he[7],ce[8]=he[8],ce},set:ie,identity:te,transpose:oe,invert:function Y(ce,he){const De=he[0],xe=he[1],Pe=he[2],je=he[3],rt=he[4],Le=he[5],Ce=he[6],Te=he[7],Ye=he[8],ct=Ye*rt-Le*Te,Ae=-Ye*je+Le*Ce,Qe=Te*je-rt*Ce;let Je=De*ct+xe*Ae+Pe*Qe;return Je?(Je=1/Je,ce[0]=ct*Je,ce[1]=(-Ye*xe+Pe*Te)*Je,ce[2]=(Le*xe-Pe*rt)*Je,ce[3]=Ae*Je,ce[4]=(Ye*De-Pe*Ce)*Je,ce[5]=(-Le*De+Pe*je)*Je,ce[6]=Qe*Je,ce[7]=(-Te*De+xe*Ce)*Je,ce[8]=(rt*De-xe*je)*Je,ce):null},adjoint:function j(ce,he){const De=he[0],xe=he[1],Pe=he[2],je=he[3],rt=he[4],Le=he[5],Ce=he[6],Te=he[7],Ye=he[8];return ce[0]=rt*Ye-Le*Te,ce[1]=Pe*Te-xe*Ye,ce[2]=xe*Le-Pe*rt,ce[3]=Le*Ce-je*Ye,ce[4]=De*Ye-Pe*Ce,ce[5]=Pe*je-De*Le,ce[6]=je*Te-rt*Ce,ce[7]=xe*Ce-De*Te,ce[8]=De*rt-xe*je,ce},determinant:function L(ce){const Pe=ce[3],je=ce[4],rt=ce[5],Le=ce[6],Ce=ce[7],Te=ce[8];return ce[0]*(Te*je-rt*Ce)+ce[1]*(-Te*Pe+rt*Le)+ce[2]*(Ce*Pe-je*Le)},multiply:B,translate:X,rotate:Z,scale:z,scaleByVec2:ae,fromTranslation:function K(ce,he){return ce[0]=1,ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=1,ce[5]=0,ce[6]=he[0],ce[7]=he[1],ce[8]=1,ce},fromRotation:function V(ce,he){const De=Math.sin(he),xe=Math.cos(he);return ce[0]=xe,ce[1]=De,ce[2]=0,ce[3]=-De,ce[4]=xe,ce[5]=0,ce[6]=0,ce[7]=0,ce[8]=1,ce},fromScaling:function P(ce,he){return ce[0]=he[0],ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=he[1],ce[5]=0,ce[6]=0,ce[7]=0,ce[8]=1,ce},fromMat2d:function F(ce,he){return ce[0]=he[0],ce[1]=he[1],ce[2]=0,ce[3]=he[2],ce[4]=he[3],ce[5]=0,ce[6]=he[4],ce[7]=he[5],ce[8]=1,ce},fromQuat:function $(ce,he){const De=he[0],xe=he[1],Pe=he[2],je=he[3],rt=De+De,Le=xe+xe,Ce=Pe+Pe,Te=De*rt,Ye=xe*rt,ct=xe*Le,Ae=Pe*rt,Qe=Pe*Le,Je=Pe*Ce,re=je*rt,Ee=je*Le,$e=je*Ce;return ce[0]=1-ct-Je,ce[3]=Ye-$e,ce[6]=Ae+Ee,ce[1]=Ye+$e,ce[4]=1-Te-Je,ce[7]=Qe-re,ce[2]=Ae-Ee,ce[5]=Qe+re,ce[8]=1-Te-ct,ce},normalFromMat4Legacy:function J(ce,he){const De=he[0],xe=he[1],Pe=he[2],je=he[4],rt=he[5],Le=he[6],Ce=he[8],Te=he[9],Ye=he[10],ct=Ye*rt-Le*Te,Ae=-Ye*je+Le*Ce,Qe=Te*je-rt*Ce,Je=De*ct+xe*Ae+Pe*Qe;if(!Je)return null;const re=1/Je;return ce[0]=ct*re,ce[1]=(-Ye*xe+Pe*Te)*re,ce[2]=(Le*xe-Pe*rt)*re,ce[3]=Ae*re,ce[4]=(Ye*De-Pe*Ce)*re,ce[5]=(-Le*De+Pe*je)*re,ce[6]=Qe*re,ce[7]=(-Te*De+xe*Ce)*re,ce[8]=(rt*De-xe*je)*re,ce},normalFromMat4:H,projection:function de(ce,he,De){return ce[0]=2/he,ce[1]=0,ce[2]=0,ce[3]=0,ce[4]=-2/De,ce[5]=0,ce[6]=-1,ce[7]=1,ce[8]=1,ce},str:function ee(ce){return"mat3("+ce[0]+", "+ce[1]+", "+ce[2]+", "+ce[3]+", "+ce[4]+", "+ce[5]+", "+ce[6]+", "+ce[7]+", "+ce[8]+")"},frob:function ye(ce){return Math.sqrt(ce[0]**2+ce[1]**2+ce[2]**2+ce[3]**2+ce[4]**2+ce[5]**2+ce[6]**2+ce[7]**2+ce[8]**2)},add:function le(ce,he,De){return ce[0]=he[0]+De[0],ce[1]=he[1]+De[1],ce[2]=he[2]+De[2],ce[3]=he[3]+De[3],ce[4]=he[4]+De[4],ce[5]=he[5]+De[5],ce[6]=he[6]+De[6],ce[7]=he[7]+De[7],ce[8]=he[8]+De[8],ce},subtract:ge,multiplyScalar:function se(ce,he,De){return ce[0]=he[0]*De,ce[1]=he[1]*De,ce[2]=he[2]*De,ce[3]=he[3]*De,ce[4]=he[4]*De,ce[5]=he[5]*De,ce[6]=he[6]*De,ce[7]=he[7]*De,ce[8]=he[8]*De,ce},multiplyScalarAndAdd:function Q(ce,he,De,xe){return ce[0]=he[0]+De[0]*xe,ce[1]=he[1]+De[1]*xe,ce[2]=he[2]+De[2]*xe,ce[3]=he[3]+De[3]*xe,ce[4]=he[4]+De[4]*xe,ce[5]=he[5]+De[5]*xe,ce[6]=he[6]+De[6]*xe,ce[7]=he[7]+De[7]*xe,ce[8]=he[8]+De[8]*xe,ce},exactEquals:function pe(ce,he){return ce[0]===he[0]&&ce[1]===he[1]&&ce[2]===he[2]&&ce[3]===he[3]&&ce[4]===he[4]&&ce[5]===he[5]&&ce[6]===he[6]&&ce[7]===he[7]&&ce[8]===he[8]},equals:function ue(ce,he){const De=ce[0],xe=ce[1],Pe=ce[2],je=ce[3],rt=ce[4],Le=ce[5],Ce=ce[6],Te=ce[7],Ye=ce[8],ct=he[0],Ae=he[1],Qe=he[2],Je=he[3],re=he[4],Ee=he[5],$e=he[6],tt=he[7],pt=he[8];return Math.abs(De-ct)<=x.E*Math.max(1,Math.abs(De),Math.abs(ct))&&Math.abs(xe-Ae)<=x.E*Math.max(1,Math.abs(xe),Math.abs(Ae))&&Math.abs(Pe-Qe)<=x.E*Math.max(1,Math.abs(Pe),Math.abs(Qe))&&Math.abs(je-Je)<=x.E*Math.max(1,Math.abs(je),Math.abs(Je))&&Math.abs(rt-re)<=x.E*Math.max(1,Math.abs(rt),Math.abs(re))&&Math.abs(Le-Ee)<=x.E*Math.max(1,Math.abs(Le),Math.abs(Ee))&&Math.abs(Ce-$e)<=x.E*Math.max(1,Math.abs(Ce),Math.abs($e))&&Math.abs(Te-tt)<=x.E*Math.max(1,Math.abs(Te),Math.abs(tt))&&Math.abs(Ye-pt)<=x.E*Math.max(1,Math.abs(Ye),Math.abs(pt))},isOrthoNormal:me,mul:B,sub:ge})},49966:(ut,Oe,C)=>{"use strict";function x(){const oe=new Float32Array(9);return oe[0]=1,oe[4]=1,oe[8]=1,oe}function T(oe){const Y=new Float32Array(9);return Y[0]=oe[0],Y[1]=oe[1],Y[2]=oe[2],Y[3]=oe[3],Y[4]=oe[4],Y[5]=oe[5],Y[6]=oe[6],Y[7]=oe[7],Y[8]=oe[8],Y}C.d(Oe,{a:()=>T,c:()=>x}),Object.freeze({__proto__:null,create:x,clone:T,fromValues:function ne(oe,Y,j,L,B,X,Z,z,ae){const K=new Float32Array(9);return K[0]=oe,K[1]=Y,K[2]=j,K[3]=L,K[4]=B,K[5]=X,K[6]=Z,K[7]=z,K[8]=ae,K},createView:function ie(oe,Y){return new Float32Array(oe,Y,9)}})},28347:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>X,b:()=>Y,e:()=>z,f:()=>Z,i:()=>te,k:()=>ct,m:()=>B,n:()=>Ye,p:()=>Te,s:()=>ie,t:()=>oe,u:()=>J});var x=C(28093),T=C(39863);function ie(re,Ee,$e,tt,pt,mt,bt,yt,at,Mt,Pt,Vt,Zt,rr,vr,yr,gr){return re[0]=Ee,re[1]=$e,re[2]=tt,re[3]=pt,re[4]=mt,re[5]=bt,re[6]=yt,re[7]=at,re[8]=Mt,re[9]=Pt,re[10]=Vt,re[11]=Zt,re[12]=rr,re[13]=vr,re[14]=yr,re[15]=gr,re}function te(re){return re[0]=1,re[1]=0,re[2]=0,re[3]=0,re[4]=0,re[5]=1,re[6]=0,re[7]=0,re[8]=0,re[9]=0,re[10]=1,re[11]=0,re[12]=0,re[13]=0,re[14]=0,re[15]=1,re}function oe(re,Ee){if(re===Ee){const $e=Ee[1],tt=Ee[2],pt=Ee[3],mt=Ee[6],bt=Ee[7],yt=Ee[11];re[1]=Ee[4],re[2]=Ee[8],re[3]=Ee[12],re[4]=$e,re[6]=Ee[9],re[7]=Ee[13],re[8]=tt,re[9]=mt,re[11]=Ee[14],re[12]=pt,re[13]=bt,re[14]=yt}else re[0]=Ee[0],re[1]=Ee[4],re[2]=Ee[8],re[3]=Ee[12],re[4]=Ee[1],re[5]=Ee[5],re[6]=Ee[9],re[7]=Ee[13],re[8]=Ee[2],re[9]=Ee[6],re[10]=Ee[10],re[11]=Ee[14],re[12]=Ee[3],re[13]=Ee[7],re[14]=Ee[11],re[15]=Ee[15];return re}function Y(re,Ee){const $e=Ee[0],tt=Ee[1],pt=Ee[2],mt=Ee[3],bt=Ee[4],yt=Ee[5],at=Ee[6],Mt=Ee[7],Pt=Ee[8],Vt=Ee[9],Zt=Ee[10],rr=Ee[11],vr=Ee[12],yr=Ee[13],gr=Ee[14],_t=Ee[15],$t=$e*yt-tt*bt,Ht=$e*at-pt*bt,er=$e*Mt-mt*bt,lr=tt*at-pt*yt,fr=tt*Mt-mt*yt,ht=pt*Mt-mt*at,St=Pt*yr-Vt*vr,Nt=Pt*gr-Zt*vr,Wt=Pt*_t-rr*vr,Qt=Vt*gr-Zt*yr,Kt=Vt*_t-rr*yr,Ze=Zt*_t-rr*gr;let st=$t*Ze-Ht*Kt+er*Qt+lr*Wt-fr*Nt+ht*St;return st?(st=1/st,re[0]=(yt*Ze-at*Kt+Mt*Qt)*st,re[1]=(pt*Kt-tt*Ze-mt*Qt)*st,re[2]=(yr*ht-gr*fr+_t*lr)*st,re[3]=(Zt*fr-Vt*ht-rr*lr)*st,re[4]=(at*Wt-bt*Ze-Mt*Nt)*st,re[5]=($e*Ze-pt*Wt+mt*Nt)*st,re[6]=(gr*er-vr*ht-_t*Ht)*st,re[7]=(Pt*ht-Zt*er+rr*Ht)*st,re[8]=(bt*Kt-yt*Wt+Mt*St)*st,re[9]=(tt*Wt-$e*Kt-mt*St)*st,re[10]=(vr*fr-yr*er+_t*$t)*st,re[11]=(Vt*er-Pt*fr-rr*$t)*st,re[12]=(yt*Nt-bt*Qt-at*St)*st,re[13]=($e*Qt-tt*Nt+pt*St)*st,re[14]=(yr*Ht-vr*lr-gr*$t)*st,re[15]=(Pt*lr-Vt*Ht+Zt*$t)*st,re):null}function B(re,Ee,$e){const tt=Ee[0],pt=Ee[1],mt=Ee[2],bt=Ee[3],yt=Ee[4],at=Ee[5],Mt=Ee[6],Pt=Ee[7],Vt=Ee[8],Zt=Ee[9],rr=Ee[10],vr=Ee[11],yr=Ee[12],gr=Ee[13],_t=Ee[14],$t=Ee[15];let Ht=$e[0],er=$e[1],lr=$e[2],fr=$e[3];return re[0]=Ht*tt+er*yt+lr*Vt+fr*yr,re[1]=Ht*pt+er*at+lr*Zt+fr*gr,re[2]=Ht*mt+er*Mt+lr*rr+fr*_t,re[3]=Ht*bt+er*Pt+lr*vr+fr*$t,Ht=$e[4],er=$e[5],lr=$e[6],fr=$e[7],re[4]=Ht*tt+er*yt+lr*Vt+fr*yr,re[5]=Ht*pt+er*at+lr*Zt+fr*gr,re[6]=Ht*mt+er*Mt+lr*rr+fr*_t,re[7]=Ht*bt+er*Pt+lr*vr+fr*$t,Ht=$e[8],er=$e[9],lr=$e[10],fr=$e[11],re[8]=Ht*tt+er*yt+lr*Vt+fr*yr,re[9]=Ht*pt+er*at+lr*Zt+fr*gr,re[10]=Ht*mt+er*Mt+lr*rr+fr*_t,re[11]=Ht*bt+er*Pt+lr*vr+fr*$t,Ht=$e[12],er=$e[13],lr=$e[14],fr=$e[15],re[12]=Ht*tt+er*yt+lr*Vt+fr*yr,re[13]=Ht*pt+er*at+lr*Zt+fr*gr,re[14]=Ht*mt+er*Mt+lr*rr+fr*_t,re[15]=Ht*bt+er*Pt+lr*vr+fr*$t,re}function X(re,Ee,$e){const tt=$e[0],pt=$e[1],mt=$e[2];let bt,yt,at,Mt,Pt,Vt,Zt,rr,vr,yr,gr,_t;return Ee===re?(re[12]=Ee[0]*tt+Ee[4]*pt+Ee[8]*mt+Ee[12],re[13]=Ee[1]*tt+Ee[5]*pt+Ee[9]*mt+Ee[13],re[14]=Ee[2]*tt+Ee[6]*pt+Ee[10]*mt+Ee[14],re[15]=Ee[3]*tt+Ee[7]*pt+Ee[11]*mt+Ee[15]):(bt=Ee[0],yt=Ee[1],at=Ee[2],Mt=Ee[3],Pt=Ee[4],Vt=Ee[5],Zt=Ee[6],rr=Ee[7],vr=Ee[8],yr=Ee[9],gr=Ee[10],_t=Ee[11],re[0]=bt,re[1]=yt,re[2]=at,re[3]=Mt,re[4]=Pt,re[5]=Vt,re[6]=Zt,re[7]=rr,re[8]=vr,re[9]=yr,re[10]=gr,re[11]=_t,re[12]=bt*tt+Pt*pt+vr*mt+Ee[12],re[13]=yt*tt+Vt*pt+yr*mt+Ee[13],re[14]=at*tt+Zt*pt+gr*mt+Ee[14],re[15]=Mt*tt+rr*pt+_t*mt+Ee[15]),re}function Z(re,Ee,$e){const tt=$e[0],pt=$e[1],mt=$e[2];return re[0]=Ee[0]*tt,re[1]=Ee[1]*tt,re[2]=Ee[2]*tt,re[3]=Ee[3]*tt,re[4]=Ee[4]*pt,re[5]=Ee[5]*pt,re[6]=Ee[6]*pt,re[7]=Ee[7]*pt,re[8]=Ee[8]*mt,re[9]=Ee[9]*mt,re[10]=Ee[10]*mt,re[11]=Ee[11]*mt,re[12]=Ee[12],re[13]=Ee[13],re[14]=Ee[14],re[15]=Ee[15],re}function z(re,Ee,$e,tt){let pt,mt,bt,yt,at,Mt,Pt,Vt,Zt,rr,vr,yr,gr,_t,$t,Ht,er,lr,fr,ht,St,Nt,Wt,Qt,Kt=tt[0],Ze=tt[1],st=tt[2],Ge=Math.sqrt(Kt*Kt+Ze*Ze+st*st);return Ge<T.E?null:(Ge=1/Ge,Kt*=Ge,Ze*=Ge,st*=Ge,pt=Math.sin($e),mt=Math.cos($e),bt=1-mt,yt=Ee[0],at=Ee[1],Mt=Ee[2],Pt=Ee[3],Vt=Ee[4],Zt=Ee[5],rr=Ee[6],vr=Ee[7],yr=Ee[8],gr=Ee[9],_t=Ee[10],$t=Ee[11],Ht=Kt*Kt*bt+mt,er=Ze*Kt*bt+st*pt,lr=st*Kt*bt-Ze*pt,fr=Kt*Ze*bt-st*pt,ht=Ze*Ze*bt+mt,St=st*Ze*bt+Kt*pt,Nt=Kt*st*bt+Ze*pt,Wt=Ze*st*bt-Kt*pt,Qt=st*st*bt+mt,re[0]=yt*Ht+Vt*er+yr*lr,re[1]=at*Ht+Zt*er+gr*lr,re[2]=Mt*Ht+rr*er+_t*lr,re[3]=Pt*Ht+vr*er+$t*lr,re[4]=yt*fr+Vt*ht+yr*St,re[5]=at*fr+Zt*ht+gr*St,re[6]=Mt*fr+rr*ht+_t*St,re[7]=Pt*fr+vr*ht+$t*St,re[8]=yt*Nt+Vt*Wt+yr*Qt,re[9]=at*Nt+Zt*Wt+gr*Qt,re[10]=Mt*Nt+rr*Wt+_t*Qt,re[11]=Pt*Nt+vr*Wt+$t*Qt,Ee!==re&&(re[12]=Ee[12],re[13]=Ee[13],re[14]=Ee[14],re[15]=Ee[15]),re)}function J(re,Ee){const $e=Math.sin(Ee),tt=Math.cos(Ee);return re[0]=1,re[1]=0,re[2]=0,re[3]=0,re[4]=0,re[5]=tt,re[6]=$e,re[7]=0,re[8]=0,re[9]=-$e,re[10]=tt,re[11]=0,re[12]=0,re[13]=0,re[14]=0,re[15]=1,re}function ee(re,Ee,$e){const tt=Ee[0],pt=Ee[1],mt=Ee[2],bt=Ee[3],yt=tt+tt,at=pt+pt,Mt=mt+mt,Pt=tt*yt,Vt=tt*at,Zt=tt*Mt,rr=pt*at,vr=pt*Mt,yr=mt*Mt,gr=bt*yt,_t=bt*at,$t=bt*Mt;return re[0]=1-(rr+yr),re[1]=Vt+$t,re[2]=Zt-_t,re[3]=0,re[4]=Vt-$t,re[5]=1-(Pt+yr),re[6]=vr+gr,re[7]=0,re[8]=Zt+_t,re[9]=vr-gr,re[10]=1-(Pt+rr),re[11]=0,re[12]=$e[0],re[13]=$e[1],re[14]=$e[2],re[15]=1,re}const le=(0,x.c)();function rt(re,Ee,$e){return re[0]=Ee[0]-$e[0],re[1]=Ee[1]-$e[1],re[2]=Ee[2]-$e[2],re[3]=Ee[3]-$e[3],re[4]=Ee[4]-$e[4],re[5]=Ee[5]-$e[5],re[6]=Ee[6]-$e[6],re[7]=Ee[7]-$e[7],re[8]=Ee[8]-$e[8],re[9]=Ee[9]-$e[9],re[10]=Ee[10]-$e[10],re[11]=Ee[11]-$e[11],re[12]=Ee[12]-$e[12],re[13]=Ee[13]-$e[13],re[14]=Ee[14]-$e[14],re[15]=Ee[15]-$e[15],re}function Te(re,Ee){return re[0]===Ee[0]&&re[1]===Ee[1]&&re[2]===Ee[2]&&re[3]===Ee[3]&&re[4]===Ee[4]&&re[5]===Ee[5]&&re[6]===Ee[6]&&re[7]===Ee[7]&&re[8]===Ee[8]&&re[9]===Ee[9]&&re[10]===Ee[10]&&re[11]===Ee[11]&&re[12]===Ee[12]&&re[13]===Ee[13]&&re[14]===Ee[14]&&re[15]===Ee[15]}function Ye(re,Ee){if(re===Ee)return!0;const $e=re[0],tt=re[1],pt=re[2],mt=re[3],bt=re[4],yt=re[5],at=re[6],Mt=re[7],Pt=re[8],Vt=re[9],Zt=re[10],rr=re[11],vr=re[12],yr=re[13],gr=re[14],_t=re[15],$t=Ee[0],Ht=Ee[1],er=Ee[2],lr=Ee[3],fr=Ee[4],ht=Ee[5],St=Ee[6],Nt=Ee[7],Wt=Ee[8],Qt=Ee[9],Kt=Ee[10],Ze=Ee[11],st=Ee[12],Ge=Ee[13],Xe=Ee[14],He=Ee[15];return Math.abs($e-$t)<=T.E*Math.max(1,Math.abs($e),Math.abs($t))&&Math.abs(tt-Ht)<=T.E*Math.max(1,Math.abs(tt),Math.abs(Ht))&&Math.abs(pt-er)<=T.E*Math.max(1,Math.abs(pt),Math.abs(er))&&Math.abs(mt-lr)<=T.E*Math.max(1,Math.abs(mt),Math.abs(lr))&&Math.abs(bt-fr)<=T.E*Math.max(1,Math.abs(bt),Math.abs(fr))&&Math.abs(yt-ht)<=T.E*Math.max(1,Math.abs(yt),Math.abs(ht))&&Math.abs(at-St)<=T.E*Math.max(1,Math.abs(at),Math.abs(St))&&Math.abs(Mt-Nt)<=T.E*Math.max(1,Math.abs(Mt),Math.abs(Nt))&&Math.abs(Pt-Wt)<=T.E*Math.max(1,Math.abs(Pt),Math.abs(Wt))&&Math.abs(Vt-Qt)<=T.E*Math.max(1,Math.abs(Vt),Math.abs(Qt))&&Math.abs(Zt-Kt)<=T.E*Math.max(1,Math.abs(Zt),Math.abs(Kt))&&Math.abs(rr-Ze)<=T.E*Math.max(1,Math.abs(rr),Math.abs(Ze))&&Math.abs(vr-st)<=T.E*Math.max(1,Math.abs(vr),Math.abs(st))&&Math.abs(yr-Ge)<=T.E*Math.max(1,Math.abs(yr),Math.abs(Ge))&&Math.abs(gr-Xe)<=T.E*Math.max(1,Math.abs(gr),Math.abs(Xe))&&Math.abs(_t-He)<=T.E*Math.max(1,Math.abs(_t),Math.abs(He))}function ct(re){const Ee=T.E,$e=re[0],tt=re[1],pt=re[2],mt=re[4],bt=re[5],yt=re[6],at=re[8],Mt=re[9],Pt=re[10];return Math.abs(1-($e*$e+mt*mt+at*at))<=Ee&&Math.abs(1-(tt*tt+bt*bt+Mt*Mt))<=Ee&&Math.abs(1-(pt*pt+yt*yt+Pt*Pt))<=Ee}Object.freeze({__proto__:null,copy:function ne(re,Ee){return re[0]=Ee[0],re[1]=Ee[1],re[2]=Ee[2],re[3]=Ee[3],re[4]=Ee[4],re[5]=Ee[5],re[6]=Ee[6],re[7]=Ee[7],re[8]=Ee[8],re[9]=Ee[9],re[10]=Ee[10],re[11]=Ee[11],re[12]=Ee[12],re[13]=Ee[13],re[14]=Ee[14],re[15]=Ee[15],re},set:ie,identity:te,transpose:oe,invert:Y,adjoint:function j(re,Ee){const $e=Ee[0],tt=Ee[1],pt=Ee[2],mt=Ee[3],bt=Ee[4],yt=Ee[5],at=Ee[6],Mt=Ee[7],Pt=Ee[8],Vt=Ee[9],Zt=Ee[10],rr=Ee[11],vr=Ee[12],yr=Ee[13],gr=Ee[14],_t=Ee[15];return re[0]=yt*(Zt*_t-rr*gr)-Vt*(at*_t-Mt*gr)+yr*(at*rr-Mt*Zt),re[1]=-(tt*(Zt*_t-rr*gr)-Vt*(pt*_t-mt*gr)+yr*(pt*rr-mt*Zt)),re[2]=tt*(at*_t-Mt*gr)-yt*(pt*_t-mt*gr)+yr*(pt*Mt-mt*at),re[3]=-(tt*(at*rr-Mt*Zt)-yt*(pt*rr-mt*Zt)+Vt*(pt*Mt-mt*at)),re[4]=-(bt*(Zt*_t-rr*gr)-Pt*(at*_t-Mt*gr)+vr*(at*rr-Mt*Zt)),re[5]=$e*(Zt*_t-rr*gr)-Pt*(pt*_t-mt*gr)+vr*(pt*rr-mt*Zt),re[6]=-($e*(at*_t-Mt*gr)-bt*(pt*_t-mt*gr)+vr*(pt*Mt-mt*at)),re[7]=$e*(at*rr-Mt*Zt)-bt*(pt*rr-mt*Zt)+Pt*(pt*Mt-mt*at),re[8]=bt*(Vt*_t-rr*yr)-Pt*(yt*_t-Mt*yr)+vr*(yt*rr-Mt*Vt),re[9]=-($e*(Vt*_t-rr*yr)-Pt*(tt*_t-mt*yr)+vr*(tt*rr-mt*Vt)),re[10]=$e*(yt*_t-Mt*yr)-bt*(tt*_t-mt*yr)+vr*(tt*Mt-mt*yt),re[11]=-($e*(yt*rr-Mt*Vt)-bt*(tt*rr-mt*Vt)+Pt*(tt*Mt-mt*yt)),re[12]=-(bt*(Vt*gr-Zt*yr)-Pt*(yt*gr-at*yr)+vr*(yt*Zt-at*Vt)),re[13]=$e*(Vt*gr-Zt*yr)-Pt*(tt*gr-pt*yr)+vr*(tt*Zt-pt*Vt),re[14]=-($e*(yt*gr-at*yr)-bt*(tt*gr-pt*yr)+vr*(tt*at-pt*yt)),re[15]=$e*(yt*Zt-at*Vt)-bt*(tt*Zt-pt*Vt)+Pt*(tt*at-pt*yt),re},determinant:function L(re){const Ee=re[0],$e=re[1],tt=re[2],pt=re[3],mt=re[4],bt=re[5],yt=re[6],at=re[7],Mt=re[8],Pt=re[9],Vt=re[10],Zt=re[11],rr=re[12],vr=re[13],yr=re[14],gr=re[15];return(Ee*bt-$e*mt)*(Vt*gr-Zt*yr)-(Ee*yt-tt*mt)*(Pt*gr-Zt*vr)+(Ee*at-pt*mt)*(Pt*yr-Vt*vr)+($e*yt-tt*bt)*(Mt*gr-Zt*rr)-($e*at-pt*bt)*(Mt*yr-Vt*rr)+(tt*at-pt*yt)*(Mt*vr-Pt*rr)},multiply:B,translate:X,scale:Z,rotate:z,rotateX:function ae(re,Ee,$e){const tt=Math.sin($e),pt=Math.cos($e),mt=Ee[4],bt=Ee[5],yt=Ee[6],at=Ee[7],Mt=Ee[8],Pt=Ee[9],Vt=Ee[10],Zt=Ee[11];return Ee!==re&&(re[0]=Ee[0],re[1]=Ee[1],re[2]=Ee[2],re[3]=Ee[3],re[12]=Ee[12],re[13]=Ee[13],re[14]=Ee[14],re[15]=Ee[15]),re[4]=mt*pt+Mt*tt,re[5]=bt*pt+Pt*tt,re[6]=yt*pt+Vt*tt,re[7]=at*pt+Zt*tt,re[8]=Mt*pt-mt*tt,re[9]=Pt*pt-bt*tt,re[10]=Vt*pt-yt*tt,re[11]=Zt*pt-at*tt,re},rotateY:function K(re,Ee,$e){const tt=Math.sin($e),pt=Math.cos($e),mt=Ee[0],bt=Ee[1],yt=Ee[2],at=Ee[3],Mt=Ee[8],Pt=Ee[9],Vt=Ee[10],Zt=Ee[11];return Ee!==re&&(re[4]=Ee[4],re[5]=Ee[5],re[6]=Ee[6],re[7]=Ee[7],re[12]=Ee[12],re[13]=Ee[13],re[14]=Ee[14],re[15]=Ee[15]),re[0]=mt*pt-Mt*tt,re[1]=bt*pt-Pt*tt,re[2]=yt*pt-Vt*tt,re[3]=at*pt-Zt*tt,re[8]=mt*tt+Mt*pt,re[9]=bt*tt+Pt*pt,re[10]=yt*tt+Vt*pt,re[11]=at*tt+Zt*pt,re},rotateZ:function V(re,Ee,$e){const tt=Math.sin($e),pt=Math.cos($e),mt=Ee[0],bt=Ee[1],yt=Ee[2],at=Ee[3],Mt=Ee[4],Pt=Ee[5],Vt=Ee[6],Zt=Ee[7];return Ee!==re&&(re[8]=Ee[8],re[9]=Ee[9],re[10]=Ee[10],re[11]=Ee[11],re[12]=Ee[12],re[13]=Ee[13],re[14]=Ee[14],re[15]=Ee[15]),re[0]=mt*pt+Mt*tt,re[1]=bt*pt+Pt*tt,re[2]=yt*pt+Vt*tt,re[3]=at*pt+Zt*tt,re[4]=Mt*pt-mt*tt,re[5]=Pt*pt-bt*tt,re[6]=Vt*pt-yt*tt,re[7]=Zt*pt-at*tt,re},fromTranslation:function P(re,Ee){return re[0]=1,re[1]=0,re[2]=0,re[3]=0,re[4]=0,re[5]=1,re[6]=0,re[7]=0,re[8]=0,re[9]=0,re[10]=1,re[11]=0,re[12]=Ee[0],re[13]=Ee[1],re[14]=Ee[2],re[15]=1,re},fromScaling:function F(re,Ee){return re[0]=Ee[0],re[1]=0,re[2]=0,re[3]=0,re[4]=0,re[5]=Ee[1],re[6]=0,re[7]=0,re[8]=0,re[9]=0,re[10]=Ee[2],re[11]=0,re[12]=0,re[13]=0,re[14]=0,re[15]=1,re},fromRotation:function $(re,Ee,$e){let tt,pt,mt,bt=$e[0],yt=$e[1],at=$e[2],Mt=Math.sqrt(bt*bt+yt*yt+at*at);return Mt<T.E?null:(Mt=1/Mt,bt*=Mt,yt*=Mt,at*=Mt,tt=Math.sin(Ee),pt=Math.cos(Ee),mt=1-pt,re[0]=bt*bt*mt+pt,re[1]=yt*bt*mt+at*tt,re[2]=at*bt*mt-yt*tt,re[3]=0,re[4]=bt*yt*mt-at*tt,re[5]=yt*yt*mt+pt,re[6]=at*yt*mt+bt*tt,re[7]=0,re[8]=bt*at*mt+yt*tt,re[9]=yt*at*mt-bt*tt,re[10]=at*at*mt+pt,re[11]=0,re[12]=0,re[13]=0,re[14]=0,re[15]=1,re)},fromXRotation:J,fromYRotation:function H(re,Ee){const $e=Math.sin(Ee),tt=Math.cos(Ee);return re[0]=tt,re[1]=0,re[2]=-$e,re[3]=0,re[4]=0,re[5]=1,re[6]=0,re[7]=0,re[8]=$e,re[9]=0,re[10]=tt,re[11]=0,re[12]=0,re[13]=0,re[14]=0,re[15]=1,re},fromZRotation:function de(re,Ee){const $e=Math.sin(Ee),tt=Math.cos(Ee);return re[0]=tt,re[1]=$e,re[2]=0,re[3]=0,re[4]=-$e,re[5]=tt,re[6]=0,re[7]=0,re[8]=0,re[9]=0,re[10]=1,re[11]=0,re[12]=0,re[13]=0,re[14]=0,re[15]=1,re},fromRotationTranslation:ee,fromQuat2:function ye(re,Ee){const $e=le,tt=-Ee[0],pt=-Ee[1],mt=-Ee[2],bt=Ee[3],yt=Ee[4],at=Ee[5],Mt=Ee[6],Pt=Ee[7],Vt=tt*tt+pt*pt+mt*mt+bt*bt;return Vt>0?($e[0]=2*(yt*bt+Pt*tt+at*mt-Mt*pt)/Vt,$e[1]=2*(at*bt+Pt*pt+Mt*tt-yt*mt)/Vt,$e[2]=2*(Mt*bt+Pt*mt+yt*pt-at*tt)/Vt):($e[0]=2*(yt*bt+Pt*tt+at*mt-Mt*pt),$e[1]=2*(at*bt+Pt*pt+Mt*tt-yt*mt),$e[2]=2*(Mt*bt+Pt*mt+yt*pt-at*tt)),ee(re,Ee,$e),re},getTranslation:function ge(re,Ee){return re[0]=Ee[12],re[1]=Ee[13],re[2]=Ee[14],re},getScaling:function se(re,Ee){const $e=Ee[0],tt=Ee[1],pt=Ee[2],mt=Ee[4],bt=Ee[5],yt=Ee[6],at=Ee[8],Mt=Ee[9],Pt=Ee[10];return re[0]=Math.sqrt($e*$e+tt*tt+pt*pt),re[1]=Math.sqrt(mt*mt+bt*bt+yt*yt),re[2]=Math.sqrt(at*at+Mt*Mt+Pt*Pt),re},getRotation:function Q(re,Ee){const $e=Ee[0]+Ee[5]+Ee[10];let tt=0;return $e>0?(tt=2*Math.sqrt($e+1),re[3]=.25*tt,re[0]=(Ee[6]-Ee[9])/tt,re[1]=(Ee[8]-Ee[2])/tt,re[2]=(Ee[1]-Ee[4])/tt):Ee[0]>Ee[5]&&Ee[0]>Ee[10]?(tt=2*Math.sqrt(1+Ee[0]-Ee[5]-Ee[10]),re[3]=(Ee[6]-Ee[9])/tt,re[0]=.25*tt,re[1]=(Ee[1]+Ee[4])/tt,re[2]=(Ee[8]+Ee[2])/tt):Ee[5]>Ee[10]?(tt=2*Math.sqrt(1+Ee[5]-Ee[0]-Ee[10]),re[3]=(Ee[8]-Ee[2])/tt,re[0]=(Ee[1]+Ee[4])/tt,re[1]=.25*tt,re[2]=(Ee[6]+Ee[9])/tt):(tt=2*Math.sqrt(1+Ee[10]-Ee[0]-Ee[5]),re[3]=(Ee[1]-Ee[4])/tt,re[0]=(Ee[8]+Ee[2])/tt,re[1]=(Ee[6]+Ee[9])/tt,re[2]=.25*tt),re},fromRotationTranslationScale:function pe(re,Ee,$e,tt){const pt=Ee[0],mt=Ee[1],bt=Ee[2],yt=Ee[3],at=pt+pt,Mt=mt+mt,Pt=bt+bt,Vt=pt*at,Zt=pt*Mt,rr=pt*Pt,vr=mt*Mt,yr=mt*Pt,gr=bt*Pt,_t=yt*at,$t=yt*Mt,Ht=yt*Pt,er=tt[0],lr=tt[1],fr=tt[2];return re[0]=(1-(vr+gr))*er,re[1]=(Zt+Ht)*er,re[2]=(rr-$t)*er,re[3]=0,re[4]=(Zt-Ht)*lr,re[5]=(1-(Vt+gr))*lr,re[6]=(yr+_t)*lr,re[7]=0,re[8]=(rr+$t)*fr,re[9]=(yr-_t)*fr,re[10]=(1-(Vt+vr))*fr,re[11]=0,re[12]=$e[0],re[13]=$e[1],re[14]=$e[2],re[15]=1,re},fromRotationTranslationScaleOrigin:function ue(re,Ee,$e,tt,pt){const mt=Ee[0],bt=Ee[1],yt=Ee[2],at=Ee[3],Mt=mt+mt,Pt=bt+bt,Vt=yt+yt,Zt=mt*Mt,rr=mt*Pt,vr=mt*Vt,yr=bt*Pt,gr=bt*Vt,_t=yt*Vt,$t=at*Mt,Ht=at*Pt,er=at*Vt,lr=tt[0],fr=tt[1],ht=tt[2],St=pt[0],Nt=pt[1],Wt=pt[2],Qt=(1-(yr+_t))*lr,Kt=(rr+er)*lr,Ze=(vr-Ht)*lr,st=(rr-er)*fr,Ge=(1-(Zt+_t))*fr,Xe=(gr+$t)*fr,He=(vr+Ht)*ht,Ue=(gr-$t)*ht,it=(1-(Zt+yr))*ht;return re[0]=Qt,re[1]=Kt,re[2]=Ze,re[3]=0,re[4]=st,re[5]=Ge,re[6]=Xe,re[7]=0,re[8]=He,re[9]=Ue,re[10]=it,re[11]=0,re[12]=$e[0]+St-(Qt*St+st*Nt+He*Wt),re[13]=$e[1]+Nt-(Kt*St+Ge*Nt+Ue*Wt),re[14]=$e[2]+Wt-(Ze*St+Xe*Nt+it*Wt),re[15]=1,re},fromQuat:function me(re,Ee){const $e=Ee[0],tt=Ee[1],pt=Ee[2],mt=Ee[3],bt=$e+$e,yt=tt+tt,at=pt+pt,Mt=$e*bt,Pt=tt*bt,Vt=tt*yt,Zt=pt*bt,rr=pt*yt,vr=pt*at,yr=mt*bt,gr=mt*yt,_t=mt*at;return re[0]=1-Vt-vr,re[1]=Pt+_t,re[2]=Zt-gr,re[3]=0,re[4]=Pt-_t,re[5]=1-Mt-vr,re[6]=rr+yr,re[7]=0,re[8]=Zt+gr,re[9]=rr-yr,re[10]=1-Mt-Vt,re[11]=0,re[12]=0,re[13]=0,re[14]=0,re[15]=1,re},frustum:function ve(re,Ee,$e,tt,pt,mt,bt){const yt=1/($e-Ee),at=1/(pt-tt),Mt=1/(mt-bt);return re[0]=2*mt*yt,re[1]=0,re[2]=0,re[3]=0,re[4]=0,re[5]=2*mt*at,re[6]=0,re[7]=0,re[8]=($e+Ee)*yt,re[9]=(pt+tt)*at,re[10]=(bt+mt)*Mt,re[11]=-1,re[12]=0,re[13]=0,re[14]=bt*mt*2*Mt,re[15]=0,re},perspective:function fe(re,Ee,$e,tt,pt){const mt=1/Math.tan(Ee/2);let bt;return re[0]=mt/$e,re[1]=0,re[2]=0,re[3]=0,re[4]=0,re[5]=mt,re[6]=0,re[7]=0,re[8]=0,re[9]=0,re[11]=-1,re[12]=0,re[13]=0,re[15]=0,null!=pt&&pt!==1/0?(bt=1/(tt-pt),re[10]=(pt+tt)*bt,re[14]=2*pt*tt*bt):(re[10]=-1,re[14]=-2*tt),re},perspectiveFromFieldOfView:function Me(re,Ee,$e,tt){const pt=Math.tan(Ee.upDegrees*Math.PI/180),mt=Math.tan(Ee.downDegrees*Math.PI/180),bt=Math.tan(Ee.leftDegrees*Math.PI/180),yt=Math.tan(Ee.rightDegrees*Math.PI/180),at=2/(bt+yt),Mt=2/(pt+mt);return re[0]=at,re[1]=0,re[2]=0,re[3]=0,re[4]=0,re[5]=Mt,re[6]=0,re[7]=0,re[8]=-(bt-yt)*at*.5,re[9]=(pt-mt)*Mt*.5,re[10]=tt/($e-tt),re[11]=-1,re[12]=0,re[13]=0,re[14]=tt*$e/($e-tt),re[15]=0,re},ortho:function ce(re,Ee,$e,tt,pt,mt,bt){const yt=1/(Ee-$e),at=1/(tt-pt),Mt=1/(mt-bt);return re[0]=-2*yt,re[1]=0,re[2]=0,re[3]=0,re[4]=0,re[5]=-2*at,re[6]=0,re[7]=0,re[8]=0,re[9]=0,re[10]=2*Mt,re[11]=0,re[12]=(Ee+$e)*yt,re[13]=(pt+tt)*at,re[14]=(bt+mt)*Mt,re[15]=1,re},lookAt:function he(re,Ee,$e,tt){let pt,mt,bt,yt,at,Mt,Pt,Vt,Zt,rr;const vr=Ee[0],yr=Ee[1],gr=Ee[2],_t=tt[0],$t=tt[1],Ht=tt[2],er=$e[0],lr=$e[1],fr=$e[2];return Math.abs(vr-er)<T.E&&Math.abs(yr-lr)<T.E&&Math.abs(gr-fr)<T.E?te(re):(Pt=vr-er,Vt=yr-lr,Zt=gr-fr,rr=1/Math.sqrt(Pt*Pt+Vt*Vt+Zt*Zt),Pt*=rr,Vt*=rr,Zt*=rr,pt=$t*Zt-Ht*Vt,mt=Ht*Pt-_t*Zt,bt=_t*Vt-$t*Pt,rr=Math.sqrt(pt*pt+mt*mt+bt*bt),rr?(rr=1/rr,pt*=rr,mt*=rr,bt*=rr):(pt=0,mt=0,bt=0),yt=Vt*bt-Zt*mt,at=Zt*pt-Pt*bt,Mt=Pt*mt-Vt*pt,rr=Math.sqrt(yt*yt+at*at+Mt*Mt),rr?(rr=1/rr,yt*=rr,at*=rr,Mt*=rr):(yt=0,at=0,Mt=0),re[0]=pt,re[1]=yt,re[2]=Pt,re[3]=0,re[4]=mt,re[5]=at,re[6]=Vt,re[7]=0,re[8]=bt,re[9]=Mt,re[10]=Zt,re[11]=0,re[12]=-(pt*vr+mt*yr+bt*gr),re[13]=-(yt*vr+at*yr+Mt*gr),re[14]=-(Pt*vr+Vt*yr+Zt*gr),re[15]=1,re)},targetTo:function De(re,Ee,$e,tt){const pt=Ee[0],mt=Ee[1],bt=Ee[2],yt=tt[0],at=tt[1],Mt=tt[2];let Pt=pt-$e[0],Vt=mt-$e[1],Zt=bt-$e[2],rr=Pt*Pt+Vt*Vt+Zt*Zt;rr>0&&(rr=1/Math.sqrt(rr),Pt*=rr,Vt*=rr,Zt*=rr);let vr=at*Zt-Mt*Vt,yr=Mt*Pt-yt*Zt,gr=yt*Vt-at*Pt;return rr=vr*vr+yr*yr+gr*gr,rr>0&&(rr=1/Math.sqrt(rr),vr*=rr,yr*=rr,gr*=rr),re[0]=vr,re[1]=yr,re[2]=gr,re[3]=0,re[4]=Vt*gr-Zt*yr,re[5]=Zt*vr-Pt*gr,re[6]=Pt*yr-Vt*vr,re[7]=0,re[8]=Pt,re[9]=Vt,re[10]=Zt,re[11]=0,re[12]=pt,re[13]=mt,re[14]=bt,re[15]=1,re},str:function xe(re){return"mat4("+re[0]+", "+re[1]+", "+re[2]+", "+re[3]+", "+re[4]+", "+re[5]+", "+re[6]+", "+re[7]+", "+re[8]+", "+re[9]+", "+re[10]+", "+re[11]+", "+re[12]+", "+re[13]+", "+re[14]+", "+re[15]+")"},frob:function Pe(re){return Math.sqrt(re[0]**2+re[1]**2+re[2]**2+re[3]**2+re[4]**2+re[5]**2+re[6]**2+re[7]**2+re[8]**2+re[9]**2+re[10]**2+re[11]**2+re[12]**2+re[13]**2+re[14]**2+re[15]**2)},add:function je(re,Ee,$e){return re[0]=Ee[0]+$e[0],re[1]=Ee[1]+$e[1],re[2]=Ee[2]+$e[2],re[3]=Ee[3]+$e[3],re[4]=Ee[4]+$e[4],re[5]=Ee[5]+$e[5],re[6]=Ee[6]+$e[6],re[7]=Ee[7]+$e[7],re[8]=Ee[8]+$e[8],re[9]=Ee[9]+$e[9],re[10]=Ee[10]+$e[10],re[11]=Ee[11]+$e[11],re[12]=Ee[12]+$e[12],re[13]=Ee[13]+$e[13],re[14]=Ee[14]+$e[14],re[15]=Ee[15]+$e[15],re},subtract:rt,multiplyScalar:function Le(re,Ee,$e){return re[0]=Ee[0]*$e,re[1]=Ee[1]*$e,re[2]=Ee[2]*$e,re[3]=Ee[3]*$e,re[4]=Ee[4]*$e,re[5]=Ee[5]*$e,re[6]=Ee[6]*$e,re[7]=Ee[7]*$e,re[8]=Ee[8]*$e,re[9]=Ee[9]*$e,re[10]=Ee[10]*$e,re[11]=Ee[11]*$e,re[12]=Ee[12]*$e,re[13]=Ee[13]*$e,re[14]=Ee[14]*$e,re[15]=Ee[15]*$e,re},multiplyScalarAndAdd:function Ce(re,Ee,$e,tt){return re[0]=Ee[0]+$e[0]*tt,re[1]=Ee[1]+$e[1]*tt,re[2]=Ee[2]+$e[2]*tt,re[3]=Ee[3]+$e[3]*tt,re[4]=Ee[4]+$e[4]*tt,re[5]=Ee[5]+$e[5]*tt,re[6]=Ee[6]+$e[6]*tt,re[7]=Ee[7]+$e[7]*tt,re[8]=Ee[8]+$e[8]*tt,re[9]=Ee[9]+$e[9]*tt,re[10]=Ee[10]+$e[10]*tt,re[11]=Ee[11]+$e[11]*tt,re[12]=Ee[12]+$e[12]*tt,re[13]=Ee[13]+$e[13]*tt,re[14]=Ee[14]+$e[14]*tt,re[15]=Ee[15]+$e[15]*tt,re},exactEquals:Te,equals:Ye,isOrthoNormal:ct,mul:B,sub:rt})},55494:(ut,Oe,C)=>{"use strict";function x(){const Y=new Float32Array(16);return Y[0]=1,Y[5]=1,Y[10]=1,Y[15]=1,Y}C.d(Oe,{c:()=>x});const te=x();Object.freeze({__proto__:null,create:x,clone:function T(Y){const j=new Float32Array(16);return j[0]=Y[0],j[1]=Y[1],j[2]=Y[2],j[3]=Y[3],j[4]=Y[4],j[5]=Y[5],j[6]=Y[6],j[7]=Y[7],j[8]=Y[8],j[9]=Y[9],j[10]=Y[10],j[11]=Y[11],j[12]=Y[12],j[13]=Y[13],j[14]=Y[14],j[15]=Y[15],j},fromValues:function ne(Y,j,L,B,X,Z,z,ae,K,V,P,F,$,J,H,de){const ee=new Float32Array(16);return ee[0]=Y,ee[1]=j,ee[2]=L,ee[3]=B,ee[4]=X,ee[5]=Z,ee[6]=z,ee[7]=ae,ee[8]=K,ee[9]=V,ee[10]=P,ee[11]=F,ee[12]=$,ee[13]=J,ee[14]=H,ee[15]=de,ee},createView:function ie(Y,j){return new Float32Array(Y,j,16)},IDENTITY:te})},29840:(ut,Oe,C)=>{"use strict";C.d(Oe,{f:()=>ne,i:()=>L,p:()=>Z,r:()=>te,t:()=>ie,w:()=>oe});var x=C(62208),T=C(21726);function ne(z,ae){const K=ae&&ae.url&&ae.url.path;if(z&&K&&(z=(0,T.hF)(z,K,{preserveProtocolRelative:!0}),ae.portalItem&&ae.readResourcePaths)){const V=(0,T.PF)(z,ae.portalItem.itemUrl);j.test(V)&&ae.readResourcePaths.push(ae.portalItem.resourceFromPath(V).path)}return X(z,ae&&ae.portal)}function ie(z,ae,K=0){if(!z)return z;!(0,T.YP)(z)&&ae&&ae.blockedRelativeUrls&&ae.blockedRelativeUrls.push(z);let V=(0,T.hF)(z);if(ae){const P=ae.verifyItemRelativeUrls&&ae.verifyItemRelativeUrls.rootPath||ae.url&&ae.url.path;if(P){const F=X(P,ae.portal);V=(0,T.PF)(X(V,ae.portal),F,F),V!==z&&ae.verifyItemRelativeUrls&&ae.verifyItemRelativeUrls.writtenUrls.push(V)}}return V=function B(z,ae){return ae&&!ae.isPortal&&ae.urlKey&&ae.customBaseUrl?(0,T.Ie)(z,`${ae.urlKey}.${ae.customBaseUrl}`,ae.portalHostname):z}(V,ae&&ae.portal),(0,T.YP)(V)&&(V=(0,T.Fv)(V)),null!=ae&&ae.resources&&null!=ae&&ae.portalItem&&!(0,T.YP)(V)&&!(0,T.HK)(V)&&0===K&&ae.resources.toKeep.push({resource:ae.portalItem.resourceFromPath(V)}),V}function te(z,ae,K){return ne(z,K)}function oe(z,ae,K,V){const P=ie(z,V);void 0!==P&&(ae[K]=P)}const Y=/\/items\/([^\/]+)\/resources\//,j=/^\.\/resources\//;function L(z){const ae=(0,x.pC)(z)?z.match(Y):null;return(0,x.pC)(ae)?ae[1]:null}function X(z,ae){if(!ae||ae.isPortal||!ae.urlKey||!ae.customBaseUrl)return z;const K=`${ae.urlKey}.${ae.customBaseUrl}`;return(0,T.D6)(T.Gd,`${T.Gd.scheme}://${K}`)?(0,T.Ie)(z,ae.portalHostname,K):(0,T.Ie)(z,K,ae.portalHostname)}const Z=Object.freeze({__proto__:null,fromJSON:ne,toJSON:ie,read:te,write:oe,itemIdFromResourceUrl:L})},14259:(ut,Oe,C)=>{"use strict";C.d(Oe,{q:()=>te});var x,ne,ie={exports:{}};x=ie,void 0!==(ne=function(){function Y(B,X,Z,z,ae){for(;z>Z;){if(z-Z>600){var K=z-Z+1,V=X-Z+1,P=Math.log(K),F=.5*Math.exp(2*P/3),$=.5*Math.sqrt(P*F*(K-F)/K)*(V-K/2<0?-1:1);Y(B,X,Math.max(Z,Math.floor(X-V*F/K+$)),Math.min(z,Math.floor(X+(K-V)*F/K+$)),ae)}var J=B[X],H=Z,de=z;for(j(B,Z,X),ae(B[z],J)>0&&j(B,Z,z);H<de;){for(j(B,H,de),H++,de--;ae(B[H],J)<0;)H++;for(;ae(B[de],J)>0;)de--}0===ae(B[Z],J)?j(B,Z,de):j(B,++de,z),de<=X&&(Z=de+1),X<=de&&(z=de-1)}}function j(B,X,Z){var z=B[X];B[X]=B[Z],B[Z]=z}function L(B,X){return B<X?-1:B>X?1:0}return function oe(B,X,Z,z,ae){Y(B,X,Z||0,z||B.length-1,ae||L)}}())&&(x.exports=ne);const te=ie.exports},76279:(ut,Oe,C)=>{"use strict";C.d(Oe,{r:()=>T});var x=C(14259);function T(P,F){if(!(this instanceof T))return new T(P,F);this._maxEntries=Math.max(4,P||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),F&&("function"==typeof F?this.toBBox=F:this._initFormat(F)),this.clear()}function ne(P,F,$){if(!$)return F.indexOf(P);for(var J=0;J<F.length;J++)if($(P,F[J]))return J;return-1}function ie(P,F){te(P,0,P.children.length,F,P)}function te(P,F,$,J,H){H||(H=K(null)),H.minX=1/0,H.minY=1/0,H.maxX=-1/0,H.maxY=-1/0;for(var de,ee=F;ee<$;ee++)de=P.children[ee],oe(H,P.leaf?J(de):de);return H}function oe(P,F){return P.minX=Math.min(P.minX,F.minX),P.minY=Math.min(P.minY,F.minY),P.maxX=Math.max(P.maxX,F.maxX),P.maxY=Math.max(P.maxY,F.maxY),P}function Y(P,F){return P.minX-F.minX}function j(P,F){return P.minY-F.minY}function L(P){return(P.maxX-P.minX)*(P.maxY-P.minY)}function B(P){return P.maxX-P.minX+(P.maxY-P.minY)}function X(P,F){return(Math.max(F.maxX,P.maxX)-Math.min(F.minX,P.minX))*(Math.max(F.maxY,P.maxY)-Math.min(F.minY,P.minY))}function Z(P,F){var $=Math.max(P.minX,F.minX),J=Math.max(P.minY,F.minY),H=Math.min(P.maxX,F.maxX),de=Math.min(P.maxY,F.maxY);return Math.max(0,H-$)*Math.max(0,de-J)}function z(P,F){return P.minX<=F.minX&&P.minY<=F.minY&&F.maxX<=P.maxX&&F.maxY<=P.maxY}function ae(P,F){return F.minX<=P.maxX&&F.minY<=P.maxY&&F.maxX>=P.minX&&F.maxY>=P.minY}function K(P){return{children:P,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function V(P,F,$,J,H){for(var de,ee=[F,$];ee.length;)($=ee.pop())-(F=ee.pop())<=J||(de=F+Math.ceil(($-F)/J/2)*J,(0,x.q)(P,de,F,$,H),ee.push(F,de,de,$))}T.prototype={all:function(){return this._all(this.data,[])},search:function(P){var F=this.data,$=[],J=this.toBBox;if(!ae(P,F))return $;for(var H,de,ee,ye,le=[];F;){for(H=0,de=F.children.length;H<de;H++)ee=F.children[H],ae(P,ye=F.leaf?J(ee):ee)&&(F.leaf?$.push(ee):z(P,ye)?this._all(ee,$):le.push(ee));F=le.pop()}return $},collides:function(P){var F=this.data,$=this.toBBox;if(!ae(P,F))return!1;for(var J,H,de,ee,ye=[];F;){for(J=0,H=F.children.length;J<H;J++)if(de=F.children[J],ae(P,ee=F.leaf?$(de):de)){if(F.leaf||z(P,ee))return!0;ye.push(de)}F=ye.pop()}return!1},load:function(P){if(!P||!P.length)return this;if(P.length<this._minEntries){for(var F=0,$=P.length;F<$;F++)this.insert(P[F]);return this}var J=this._build(P.slice(),0,P.length-1,0);if(this.data.children.length)if(this.data.height===J.height)this._splitRoot(this.data,J);else{if(this.data.height<J.height){var H=this.data;this.data=J,J=H}this._insert(J,this.data.height-J.height-1,!0)}else this.data=J;return this},insert:function(P){return P&&this._insert(P,this.data.height-1),this},clear:function(){return this.data=K([]),this},remove:function(P,F){if(!P)return this;for(var $,J,H,de,ee=this.data,ye=this.toBBox(P),le=[],ge=[];ee||le.length;){if(ee||(ee=le.pop(),J=le[le.length-1],$=ge.pop(),de=!0),ee.leaf&&-1!==(H=ne(P,ee.children,F)))return ee.children.splice(H,1),le.push(ee),this._condense(le),this;de||ee.leaf||!z(ee,ye)?J?($++,ee=J.children[$],de=!1):ee=null:(le.push(ee),ge.push($),$=0,J=ee,ee=ee.children[0])}return this},toBBox:function(P){return P},compareMinX:Y,compareMinY:j,toJSON:function(){return this.data},fromJSON:function(P){return this.data=P,this},_all:function(P,F){for(var $=[];P;)P.leaf?F.push.apply(F,P.children):$.push.apply($,P.children),P=$.pop();return F},_build:function(P,F,$,J){var H,de=$-F+1,ee=this._maxEntries;if(de<=ee)return ie(H=K(P.slice(F,$+1)),this.toBBox),H;J||(J=Math.ceil(Math.log(de)/Math.log(ee)),ee=Math.ceil(de/Math.pow(ee,J-1))),(H=K([])).leaf=!1,H.height=J;var ye,le,ge,se,Q=Math.ceil(de/ee),pe=Q*Math.ceil(Math.sqrt(ee));for(V(P,F,$,pe,this.compareMinX),ye=F;ye<=$;ye+=pe)for(V(P,ye,ge=Math.min(ye+pe-1,$),Q,this.compareMinY),le=ye;le<=ge;le+=Q)se=Math.min(le+Q-1,ge),H.children.push(this._build(P,le,se,J-1));return ie(H,this.toBBox),H},_chooseSubtree:function(P,F,$,J){for(var H,de,ee,ye,le,ge,se,Q;J.push(F),!F.leaf&&J.length-1!==$;){for(se=Q=1/0,H=0,de=F.children.length;H<de;H++)le=L(ee=F.children[H]),(ge=X(P,ee)-le)<Q?(Q=ge,se=le<se?le:se,ye=ee):ge===Q&&le<se&&(se=le,ye=ee);F=ye||F.children[0]}return F},_insert:function(P,F,$){var H=$?P:(0,this.toBBox)(P),de=[],ee=this._chooseSubtree(H,this.data,F,de);for(ee.children.push(P),oe(ee,H);F>=0&&de[F].children.length>this._maxEntries;)this._split(de,F),F--;this._adjustParentBBoxes(H,de,F)},_split:function(P,F){var $=P[F],J=$.children.length,H=this._minEntries;this._chooseSplitAxis($,H,J);var de=this._chooseSplitIndex($,H,J),ee=K($.children.splice(de,$.children.length-de));ee.height=$.height,ee.leaf=$.leaf,ie($,this.toBBox),ie(ee,this.toBBox),F?P[F-1].children.push(ee):this._splitRoot($,ee)},_splitRoot:function(P,F){this.data=K([P,F]),this.data.height=P.height+1,this.data.leaf=!1,ie(this.data,this.toBBox)},_chooseSplitIndex:function(P,F,$){var J,H,de,ee,ye,le,ge,se;for(le=ge=1/0,J=F;J<=$-F;J++)ee=Z(H=te(P,0,J,this.toBBox),de=te(P,J,$,this.toBBox)),ye=L(H)+L(de),ee<le?(le=ee,se=J,ge=ye<ge?ye:ge):ee===le&&ye<ge&&(ge=ye,se=J);return se},_chooseSplitAxis:function(P,F,$){var J=P.leaf?this.compareMinX:Y,H=P.leaf?this.compareMinY:j;this._allDistMargin(P,F,$,J)<this._allDistMargin(P,F,$,H)&&P.children.sort(J)},_allDistMargin:function(P,F,$,J){P.children.sort(J);var H,de,ee=this.toBBox,ye=te(P,0,F,ee),le=te(P,$-F,$,ee),ge=B(ye)+B(le);for(H=F;H<$-F;H++)de=P.children[H],oe(ye,P.leaf?ee(de):de),ge+=B(ye);for(H=$-F-1;H>=F;H--)de=P.children[H],oe(le,P.leaf?ee(de):de),ge+=B(le);return ge},_adjustParentBBoxes:function(P,F,$){for(var J=$;J>=0;J--)oe(F[J],P)},_condense:function(P){for(var F,$=P.length-1;$>=0;$--)0===P[$].children.length?$>0?(F=P[$-1].children).splice(F.indexOf(P[$]),1):this.clear():ie(P[$],this.toBBox)},_initFormat:function(P){var F=["return a"," - b",";"];this.compareMinX=new Function("a","b",F.join(P[0])),this.compareMinY=new Function("a","b",F.join(P[1])),this.toBBox=new Function("a","return {minX: a"+P[0]+", minY: a"+P[1]+", maxX: a"+P[2]+", maxY: a"+P[3]+"};")}}},17626:(ut,Oe,C)=>{"use strict";function x(T,ne,ie,te){var oe,Y=arguments.length,j=Y<3?ne:null===te?te=Object.getOwnPropertyDescriptor(ne,ie):te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)j=Reflect.decorate(T,ne,ie,te);else for(var L=T.length-1;L>=0;L--)(oe=T[L])&&(j=(Y<3?oe(j):Y>3?oe(ne,ie,j):oe(ne,ie))||j);return Y>3&&j&&Object.defineProperty(ne,ie,j),j}C.d(Oe,{_:()=>x})},67831:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>V,b:()=>K,c:()=>T,f:()=>te,g:()=>z,h:()=>De,i:()=>H,j:()=>ee,k:()=>de,l:()=>P,m:()=>ie,n:()=>$,s:()=>ne,t:()=>se});var x=C(39863);function T(Te,Ye){return Te[0]=Ye[0],Te[1]=Ye[1],Te}function ne(Te,Ye,ct){return Te[0]=Ye,Te[1]=ct,Te}function ie(Te,Ye,ct){return Te[0]=Ye[0]+ct[0],Te[1]=Ye[1]+ct[1],Te}function te(Te,Ye,ct){return Te[0]=Ye[0]-ct[0],Te[1]=Ye[1]-ct[1],Te}function oe(Te,Ye,ct){return Te[0]=Ye[0]*ct[0],Te[1]=Ye[1]*ct[1],Te}function Y(Te,Ye,ct){return Te[0]=Ye[0]/ct[0],Te[1]=Ye[1]/ct[1],Te}function z(Te,Ye,ct){return Te[0]=Ye[0]*ct,Te[1]=Ye[1]*ct,Te}function K(Te,Ye){const ct=Ye[0]-Te[0],Ae=Ye[1]-Te[1];return Math.sqrt(ct*ct+Ae*Ae)}function V(Te,Ye){const ct=Ye[0]-Te[0],Ae=Ye[1]-Te[1];return ct*ct+Ae*Ae}function P(Te){const Ye=Te[0],ct=Te[1];return Math.sqrt(Ye*Ye+ct*ct)}function F(Te){const Ye=Te[0],ct=Te[1];return Ye*Ye+ct*ct}function $(Te,Ye){return Te[0]=-Ye[0],Te[1]=-Ye[1],Te}function H(Te,Ye){const ct=Ye[0],Ae=Ye[1];let Qe=ct*ct+Ae*Ae;return Qe>0&&(Qe=1/Math.sqrt(Qe),Te[0]=Ye[0]*Qe,Te[1]=Ye[1]*Qe),Te}function de(Te,Ye){return Te[0]*Ye[0]+Te[1]*Ye[1]}function ee(Te,Ye,ct){const Ae=Ye[0]*ct[1]-Ye[1]*ct[0];return Te[0]=Te[1]=0,Te[2]=Ae,Te}function se(Te,Ye,ct){const Ae=Ye[0],Qe=Ye[1];return Te[0]=ct[0]*Ae+ct[2]*Qe+ct[4],Te[1]=ct[1]*Ae+ct[3]*Qe+ct[5],Te}const De=te;Object.freeze({__proto__:null,copy:T,set:ne,add:ie,subtract:te,multiply:oe,divide:Y,ceil:function j(Te,Ye){return Te[0]=Math.ceil(Ye[0]),Te[1]=Math.ceil(Ye[1]),Te},floor:function L(Te,Ye){return Te[0]=Math.floor(Ye[0]),Te[1]=Math.floor(Ye[1]),Te},min:function B(Te,Ye,ct){return Te[0]=Math.min(Ye[0],ct[0]),Te[1]=Math.min(Ye[1],ct[1]),Te},max:function X(Te,Ye,ct){return Te[0]=Math.max(Ye[0],ct[0]),Te[1]=Math.max(Ye[1],ct[1]),Te},round:function Z(Te,Ye){return Te[0]=Math.round(Ye[0]),Te[1]=Math.round(Ye[1]),Te},scale:z,scaleAndAdd:function ae(Te,Ye,ct,Ae){return Te[0]=Ye[0]+ct[0]*Ae,Te[1]=Ye[1]+ct[1]*Ae,Te},distance:K,squaredDistance:V,length:P,squaredLength:F,negate:$,inverse:function J(Te,Ye){return Te[0]=1/Ye[0],Te[1]=1/Ye[1],Te},normalize:H,dot:de,cross:ee,lerp:function ye(Te,Ye,ct,Ae){const Qe=Ye[0],Je=Ye[1];return Te[0]=Qe+Ae*(ct[0]-Qe),Te[1]=Je+Ae*(ct[1]-Je),Te},random:function le(Te,Ye){Ye=Ye||1;const ct=2*(0,x.R)()*Math.PI;return Te[0]=Math.cos(ct)*Ye,Te[1]=Math.sin(ct)*Ye,Te},transformMat2:function ge(Te,Ye,ct){const Ae=Ye[0],Qe=Ye[1];return Te[0]=ct[0]*Ae+ct[2]*Qe,Te[1]=ct[1]*Ae+ct[3]*Qe,Te},transformMat2d:se,transformMat3:function Q(Te,Ye,ct){const Ae=Ye[0],Qe=Ye[1];return Te[0]=ct[0]*Ae+ct[3]*Qe+ct[6],Te[1]=ct[1]*Ae+ct[4]*Qe+ct[7],Te},transformMat4:function pe(Te,Ye,ct){const Ae=Ye[0],Qe=Ye[1];return Te[0]=ct[0]*Ae+ct[4]*Qe+ct[12],Te[1]=ct[1]*Ae+ct[5]*Qe+ct[13],Te},rotate:function ue(Te,Ye,ct,Ae){const Qe=Ye[0]-ct[0],Je=Ye[1]-ct[1],re=Math.sin(Ae),Ee=Math.cos(Ae);return Te[0]=Qe*Ee-Je*re+ct[0],Te[1]=Qe*re+Je*Ee+ct[1],Te},angle:function me(Te,Ye){const ct=Te[0],Ae=Te[1],Qe=Ye[0],Je=Ye[1];let re=ct*ct+Ae*Ae;re>0&&(re=1/Math.sqrt(re));let Ee=Qe*Qe+Je*Je;Ee>0&&(Ee=1/Math.sqrt(Ee));const $e=(ct*Qe+Ae*Je)*re*Ee;return $e>1?0:$e<-1?Math.PI:Math.acos($e)},str:function ve(Te){return"vec2("+Te[0]+", "+Te[1]+")"},exactEquals:function fe(Te,Ye){return Te[0]===Ye[0]&&Te[1]===Ye[1]},equals:function Me(Te,Ye){const ct=Te[0],Ae=Te[1],Qe=Ye[0],Je=Ye[1];return Math.abs(ct-Qe)<=x.E*Math.max(1,Math.abs(ct),Math.abs(Qe))&&Math.abs(Ae-Je)<=x.E*Math.max(1,Math.abs(Ae),Math.abs(Je))},projectAndScale:function ce(Te,Ye,ct,Ae,Qe){let Je=Ye[0]-ct[0],re=Ye[1]-ct[1];const Ee=(Ae[0]*Je+Ae[1]*re)*(Qe-1);return Je=Ae[0]*Ee,re=Ae[1]*Ee,Te[0]=Ye[0]+Je,Te[1]=Ye[1]+re,Te},len:P,sub:De,mul:oe,div:Y,dist:K,sqrDist:V,sqrLen:F})},9545:(ut,Oe,C)=>{"use strict";function x(){return new Float32Array(2)}function ne(ae,K){const V=new Float32Array(2);return V[0]=ae,V[1]=K,V}function te(){return x()}function oe(){return ne(1,1)}function Y(){return ne(1,0)}function j(){return ne(0,1)}C.d(Oe,{c:()=>x,f:()=>ne});const L=te(),B=oe(),X=Y(),Z=j();Object.freeze({__proto__:null,create:x,clone:function T(ae){const K=new Float32Array(2);return K[0]=ae[0],K[1]=ae[1],K},fromValues:ne,createView:function ie(ae,K){return new Float32Array(ae,K,2)},zeros:te,ones:oe,unitX:Y,unitY:j,ZEROS:L,ONES:B,UNIT_X:X,UNIT_Y:Z})},99770:(ut,Oe,C)=>{"use strict";function x(){return[0,0]}function ne(K,V){return[K,V]}function te(K,V){return new Float64Array(K,V,2)}function Y(){return ne(1,1)}function j(){return ne(1,0)}function L(){return ne(0,1)}C.d(Oe,{a:()=>x,c:()=>te,f:()=>ne});const X=Y(),Z=j(),z=L();Object.freeze({__proto__:null,create:x,clone:function T(K){return[K[0],K[1]]},fromValues:ne,fromArray:function ie(K){const V=[0,0],P=Math.min(2,K.length);for(let F=0;F<P;++F)V[F]=K[F];return V},createView:te,zeros:function oe(){return[0,0]},ones:Y,unitX:j,unitY:L,ZEROS:[0,0],ONES:X,UNIT_X:Z,UNIT_Y:z})},84161:(ut,Oe,C)=>{"use strict";C.d(Oe,{E:()=>L,a:()=>K,b:()=>oe,c:()=>ye,d:()=>ee,e:()=>le,f:()=>Y,g:()=>ie,h:()=>F,i:()=>P,k:()=>Pe,l:()=>ne,m:()=>pe,n:()=>de,p:()=>$,q:()=>me,r:()=>rt,s:()=>te,t:()=>ue,u:()=>Ae});var x=C(28093),T=C(39863);function ne(re){const Ee=re[0],$e=re[1],tt=re[2];return Math.sqrt(Ee*Ee+$e*$e+tt*tt)}function ie(re,Ee){return re[0]=Ee[0],re[1]=Ee[1],re[2]=Ee[2],re}function te(re,Ee,$e,tt){return re[0]=Ee,re[1]=$e,re[2]=tt,re}function oe(re,Ee,$e){return re[0]=Ee[0]+$e[0],re[1]=Ee[1]+$e[1],re[2]=Ee[2]+$e[2],re}function Y(re,Ee,$e){return re[0]=Ee[0]-$e[0],re[1]=Ee[1]-$e[1],re[2]=Ee[2]-$e[2],re}function j(re,Ee,$e){return re[0]=Ee[0]*$e[0],re[1]=Ee[1]*$e[1],re[2]=Ee[2]*$e[2],re}function L(re,Ee,$e){return re[0]=Ee[0]/$e[0],re[1]=Ee[1]/$e[1],re[2]=Ee[2]/$e[2],re}function K(re,Ee,$e){return re[0]=Ee[0]*$e,re[1]=Ee[1]*$e,re[2]=Ee[2]*$e,re}function P(re,Ee){const $e=Ee[0]-re[0],tt=Ee[1]-re[1],pt=Ee[2]-re[2];return Math.sqrt($e*$e+tt*tt+pt*pt)}function F(re,Ee){const $e=Ee[0]-re[0],tt=Ee[1]-re[1],pt=Ee[2]-re[2];return $e*$e+tt*tt+pt*pt}function $(re){const Ee=re[0],$e=re[1],tt=re[2];return Ee*Ee+$e*$e+tt*tt}function de(re,Ee){const $e=Ee[0],tt=Ee[1],pt=Ee[2];let mt=$e*$e+tt*tt+pt*pt;return mt>0&&(mt=1/Math.sqrt(mt),re[0]=Ee[0]*mt,re[1]=Ee[1]*mt,re[2]=Ee[2]*mt),re}function ee(re,Ee){return re[0]*Ee[0]+re[1]*Ee[1]+re[2]*Ee[2]}function ye(re,Ee,$e){const tt=Ee[0],pt=Ee[1],mt=Ee[2],bt=$e[0],yt=$e[1],at=$e[2];return re[0]=pt*at-mt*yt,re[1]=mt*bt-tt*at,re[2]=tt*yt-pt*bt,re}function le(re,Ee,$e,tt){const pt=Ee[0],mt=Ee[1],bt=Ee[2];return re[0]=pt+tt*($e[0]-pt),re[1]=mt+tt*($e[1]-mt),re[2]=bt+tt*($e[2]-bt),re}function pe(re,Ee,$e){const tt=Ee[0],pt=Ee[1],mt=Ee[2];return re[0]=$e[0]*tt+$e[4]*pt+$e[8]*mt+$e[12],re[1]=$e[1]*tt+$e[5]*pt+$e[9]*mt+$e[13],re[2]=$e[2]*tt+$e[6]*pt+$e[10]*mt+$e[14],re}function ue(re,Ee,$e){const tt=Ee[0],pt=Ee[1],mt=Ee[2];return re[0]=tt*$e[0]+pt*$e[3]+mt*$e[6],re[1]=tt*$e[1]+pt*$e[4]+mt*$e[7],re[2]=tt*$e[2]+pt*$e[5]+mt*$e[8],re}function me(re,Ee,$e){const tt=$e[0],pt=$e[1],mt=$e[2],yt=Ee[0],at=Ee[1],Mt=Ee[2];let Pt=pt*Mt-mt*at,Vt=mt*yt-tt*Mt,Zt=tt*at-pt*yt,rr=pt*Zt-mt*Vt,vr=mt*Pt-tt*Zt,yr=tt*Vt-pt*Pt;const gr=2*$e[3];return Pt*=gr,Vt*=gr,Zt*=gr,rr*=2,vr*=2,yr*=2,re[0]=yt+Pt+rr,re[1]=at+Vt+vr,re[2]=Mt+Zt+yr,re}const he=(0,x.c)(),De=(0,x.c)();function Pe(re,Ee){return re[0]===Ee[0]&&re[1]===Ee[1]&&re[2]===Ee[2]}function rt(re,Ee,$e){const tt=$e[0]-Ee[0],pt=$e[1]-Ee[1],mt=$e[2]-Ee[2];let bt=tt*tt+pt*pt+mt*mt;return bt>0?(bt=1/Math.sqrt(bt),re[0]=tt*bt,re[1]=pt*bt,re[2]=mt*bt,re):(re[0]=0,re[1]=0,re[2]=0,re)}const Ae=ne;Object.freeze({__proto__:null,length:ne,copy:ie,set:te,add:oe,subtract:Y,multiply:j,divide:L,ceil:function B(re,Ee){return re[0]=Math.ceil(Ee[0]),re[1]=Math.ceil(Ee[1]),re[2]=Math.ceil(Ee[2]),re},floor:function X(re,Ee){return re[0]=Math.floor(Ee[0]),re[1]=Math.floor(Ee[1]),re[2]=Math.floor(Ee[2]),re},min:function Z(re,Ee,$e){return re[0]=Math.min(Ee[0],$e[0]),re[1]=Math.min(Ee[1],$e[1]),re[2]=Math.min(Ee[2],$e[2]),re},max:function z(re,Ee,$e){return re[0]=Math.max(Ee[0],$e[0]),re[1]=Math.max(Ee[1],$e[1]),re[2]=Math.max(Ee[2],$e[2]),re},round:function ae(re,Ee){return re[0]=Math.round(Ee[0]),re[1]=Math.round(Ee[1]),re[2]=Math.round(Ee[2]),re},scale:K,scaleAndAdd:function V(re,Ee,$e,tt){return re[0]=Ee[0]+$e[0]*tt,re[1]=Ee[1]+$e[1]*tt,re[2]=Ee[2]+$e[2]*tt,re},distance:P,squaredDistance:F,squaredLength:$,negate:function J(re,Ee){return re[0]=-Ee[0],re[1]=-Ee[1],re[2]=-Ee[2],re},inverse:function H(re,Ee){return re[0]=1/Ee[0],re[1]=1/Ee[1],re[2]=1/Ee[2],re},normalize:de,dot:ee,cross:ye,lerp:le,hermite:function ge(re,Ee,$e,tt,pt,mt){const bt=mt*mt,yt=bt*(2*mt-3)+1,at=bt*(mt-2)+mt,Mt=bt*(mt-1),Pt=bt*(3-2*mt);return re[0]=Ee[0]*yt+$e[0]*at+tt[0]*Mt+pt[0]*Pt,re[1]=Ee[1]*yt+$e[1]*at+tt[1]*Mt+pt[1]*Pt,re[2]=Ee[2]*yt+$e[2]*at+tt[2]*Mt+pt[2]*Pt,re},bezier:function se(re,Ee,$e,tt,pt,mt){const bt=1-mt,yt=bt*bt,at=mt*mt,Mt=yt*bt,Pt=3*mt*yt,Vt=3*at*bt,Zt=at*mt;return re[0]=Ee[0]*Mt+$e[0]*Pt+tt[0]*Vt+pt[0]*Zt,re[1]=Ee[1]*Mt+$e[1]*Pt+tt[1]*Vt+pt[1]*Zt,re[2]=Ee[2]*Mt+$e[2]*Pt+tt[2]*Vt+pt[2]*Zt,re},random:function Q(re,Ee){Ee=Ee||1;const $e=2*(0,T.R)()*Math.PI,tt=2*(0,T.R)()-1,pt=Math.sqrt(1-tt*tt)*Ee;return re[0]=Math.cos($e)*pt,re[1]=Math.sin($e)*pt,re[2]=tt*Ee,re},transformMat4:pe,transformMat3:ue,transformQuat:me,rotateX:function ve(re,Ee,$e,tt){const pt=[],mt=[];return pt[0]=Ee[0]-$e[0],pt[1]=Ee[1]-$e[1],pt[2]=Ee[2]-$e[2],mt[0]=pt[0],mt[1]=pt[1]*Math.cos(tt)-pt[2]*Math.sin(tt),mt[2]=pt[1]*Math.sin(tt)+pt[2]*Math.cos(tt),re[0]=mt[0]+$e[0],re[1]=mt[1]+$e[1],re[2]=mt[2]+$e[2],re},rotateY:function fe(re,Ee,$e,tt){const pt=[],mt=[];return pt[0]=Ee[0]-$e[0],pt[1]=Ee[1]-$e[1],pt[2]=Ee[2]-$e[2],mt[0]=pt[2]*Math.sin(tt)+pt[0]*Math.cos(tt),mt[1]=pt[1],mt[2]=pt[2]*Math.cos(tt)-pt[0]*Math.sin(tt),re[0]=mt[0]+$e[0],re[1]=mt[1]+$e[1],re[2]=mt[2]+$e[2],re},rotateZ:function Me(re,Ee,$e,tt){const pt=[],mt=[];return pt[0]=Ee[0]-$e[0],pt[1]=Ee[1]-$e[1],pt[2]=Ee[2]-$e[2],mt[0]=pt[0]*Math.cos(tt)-pt[1]*Math.sin(tt),mt[1]=pt[0]*Math.sin(tt)+pt[1]*Math.cos(tt),mt[2]=pt[2],re[0]=mt[0]+$e[0],re[1]=mt[1]+$e[1],re[2]=mt[2]+$e[2],re},angle:function ce(re,Ee){ie(he,re),ie(De,Ee),de(he,he),de(De,De);const $e=ee(he,De);return $e>1?0:$e<-1?Math.PI:Math.acos($e)},str:function xe(re){return"vec3("+re[0]+", "+re[1]+", "+re[2]+")"},exactEquals:Pe,equals:function je(re,Ee){if(re===Ee)return!0;const $e=re[0],tt=re[1],pt=re[2],mt=Ee[0],bt=Ee[1],yt=Ee[2];return Math.abs($e-mt)<=T.E*Math.max(1,Math.abs($e),Math.abs(mt))&&Math.abs(tt-bt)<=T.E*Math.max(1,Math.abs(tt),Math.abs(bt))&&Math.abs(pt-yt)<=T.E*Math.max(1,Math.abs(pt),Math.abs(yt))},direction:rt,sub:Y,mul:j,div:L,dist:P,sqrDist:F,len:Ae,sqrLen:$})},28093:(ut,Oe,C)=>{"use strict";function x(){return[0,0,0]}function T(P){return[P[0],P[1],P[2]]}function ne(P,F,$){return[P,F,$]}function ie(P){const F=[0,0,0],$=Math.min(3,P.length);for(let J=0;J<$;++J)F[J]=P[J];return F}function te(P,F){return new Float64Array(P,F,3)}function Y(){return ne(1,1,1)}function j(){return ne(1,0,0)}function L(){return ne(0,1,0)}function B(){return ne(0,0,1)}C.d(Oe,{O:()=>Z,Z:()=>X,a:()=>T,b:()=>te,c:()=>x,d:()=>ie,f:()=>ne});const X=[0,0,0],Z=Y(),z=j(),ae=L(),K=B();Object.freeze({__proto__:null,create:x,clone:T,fromValues:ne,fromArray:ie,createView:te,zeros:function oe(){return[0,0,0]},ones:Y,unitX:j,unitY:L,unitZ:B,ZEROS:X,ONES:Z,UNIT_X:z,UNIT_Y:ae,UNIT_Z:K})},993:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>ie,b:()=>z,c:()=>T,d:()=>de,e:()=>P,f:()=>F,g:()=>Q,h:()=>pe,l:()=>ee,n:()=>H,s:()=>ne});var x=C(39863);function T(xe,Pe){return xe[0]=Pe[0],xe[1]=Pe[1],xe[2]=Pe[2],xe[3]=Pe[3],xe}function ne(xe,Pe,je,rt,Le){return xe[0]=Pe,xe[1]=je,xe[2]=rt,xe[3]=Le,xe}function ie(xe,Pe,je){return xe[0]=Pe[0]+je[0],xe[1]=Pe[1]+je[1],xe[2]=Pe[2]+je[2],xe[3]=Pe[3]+je[3],xe}function te(xe,Pe,je){return xe[0]=Pe[0]-je[0],xe[1]=Pe[1]-je[1],xe[2]=Pe[2]-je[2],xe[3]=Pe[3]-je[3],xe}function oe(xe,Pe,je){return xe[0]=Pe[0]*je[0],xe[1]=Pe[1]*je[1],xe[2]=Pe[2]*je[2],xe[3]=Pe[3]*je[3],xe}function Y(xe,Pe,je){return xe[0]=Pe[0]/je[0],xe[1]=Pe[1]/je[1],xe[2]=Pe[2]/je[2],xe[3]=Pe[3]/je[3],xe}function z(xe,Pe,je){return xe[0]=Pe[0]*je,xe[1]=Pe[1]*je,xe[2]=Pe[2]*je,xe[3]=Pe[3]*je,xe}function K(xe,Pe){const je=Pe[0]-xe[0],rt=Pe[1]-xe[1],Le=Pe[2]-xe[2],Ce=Pe[3]-xe[3];return Math.sqrt(je*je+rt*rt+Le*Le+Ce*Ce)}function V(xe,Pe){const je=Pe[0]-xe[0],rt=Pe[1]-xe[1],Le=Pe[2]-xe[2],Ce=Pe[3]-xe[3];return je*je+rt*rt+Le*Le+Ce*Ce}function P(xe){const Pe=xe[0],je=xe[1],rt=xe[2],Le=xe[3];return Math.sqrt(Pe*Pe+je*je+rt*rt+Le*Le)}function F(xe){const Pe=xe[0],je=xe[1],rt=xe[2],Le=xe[3];return Pe*Pe+je*je+rt*rt+Le*Le}function H(xe,Pe){const je=Pe[0],rt=Pe[1],Le=Pe[2],Ce=Pe[3];let Te=je*je+rt*rt+Le*Le+Ce*Ce;return Te>0&&(Te=1/Math.sqrt(Te),xe[0]=je*Te,xe[1]=rt*Te,xe[2]=Le*Te,xe[3]=Ce*Te),xe}function de(xe,Pe){return xe[0]*Pe[0]+xe[1]*Pe[1]+xe[2]*Pe[2]+xe[3]*Pe[3]}function ee(xe,Pe,je,rt){const Le=Pe[0],Ce=Pe[1],Te=Pe[2],Ye=Pe[3];return xe[0]=Le+rt*(je[0]-Le),xe[1]=Ce+rt*(je[1]-Ce),xe[2]=Te+rt*(je[2]-Te),xe[3]=Ye+rt*(je[3]-Ye),xe}function Q(xe,Pe){return xe[0]===Pe[0]&&xe[1]===Pe[1]&&xe[2]===Pe[2]&&xe[3]===Pe[3]}function pe(xe,Pe){const je=xe[0],rt=xe[1],Le=xe[2],Ce=xe[3],Te=Pe[0],Ye=Pe[1],ct=Pe[2],Ae=Pe[3];return Math.abs(je-Te)<=x.E*Math.max(1,Math.abs(je),Math.abs(Te))&&Math.abs(rt-Ye)<=x.E*Math.max(1,Math.abs(rt),Math.abs(Ye))&&Math.abs(Le-ct)<=x.E*Math.max(1,Math.abs(Le),Math.abs(ct))&&Math.abs(Ce-Ae)<=x.E*Math.max(1,Math.abs(Ce),Math.abs(Ae))}Object.freeze({__proto__:null,copy:T,set:ne,add:ie,subtract:te,multiply:oe,divide:Y,ceil:function j(xe,Pe){return xe[0]=Math.ceil(Pe[0]),xe[1]=Math.ceil(Pe[1]),xe[2]=Math.ceil(Pe[2]),xe[3]=Math.ceil(Pe[3]),xe},floor:function L(xe,Pe){return xe[0]=Math.floor(Pe[0]),xe[1]=Math.floor(Pe[1]),xe[2]=Math.floor(Pe[2]),xe[3]=Math.floor(Pe[3]),xe},min:function B(xe,Pe,je){return xe[0]=Math.min(Pe[0],je[0]),xe[1]=Math.min(Pe[1],je[1]),xe[2]=Math.min(Pe[2],je[2]),xe[3]=Math.min(Pe[3],je[3]),xe},max:function X(xe,Pe,je){return xe[0]=Math.max(Pe[0],je[0]),xe[1]=Math.max(Pe[1],je[1]),xe[2]=Math.max(Pe[2],je[2]),xe[3]=Math.max(Pe[3],je[3]),xe},round:function Z(xe,Pe){return xe[0]=Math.round(Pe[0]),xe[1]=Math.round(Pe[1]),xe[2]=Math.round(Pe[2]),xe[3]=Math.round(Pe[3]),xe},scale:z,scaleAndAdd:function ae(xe,Pe,je,rt){return xe[0]=Pe[0]+je[0]*rt,xe[1]=Pe[1]+je[1]*rt,xe[2]=Pe[2]+je[2]*rt,xe[3]=Pe[3]+je[3]*rt,xe},distance:K,squaredDistance:V,length:P,squaredLength:F,negate:function $(xe,Pe){return xe[0]=-Pe[0],xe[1]=-Pe[1],xe[2]=-Pe[2],xe[3]=-Pe[3],xe},inverse:function J(xe,Pe){return xe[0]=1/Pe[0],xe[1]=1/Pe[1],xe[2]=1/Pe[2],xe[3]=1/Pe[3],xe},normalize:H,dot:de,lerp:ee,random:function ye(xe,Pe){let je,rt,Le,Ce,Te,Ye;Pe=Pe||1;do{je=2*(0,x.R)()-1,rt=2*(0,x.R)()-1,Te=je*je+rt*rt}while(Te>=1);do{Le=2*(0,x.R)()-1,Ce=2*(0,x.R)()-1,Ye=Le*Le+Ce*Ce}while(Ye>=1);const ct=Math.sqrt((1-Te)/Ye);return xe[0]=Pe*je,xe[1]=Pe*rt,xe[2]=Pe*Le*ct,xe[3]=Pe*Ce*ct,xe},transformMat4:function le(xe,Pe,je){const rt=Pe[0],Le=Pe[1],Ce=Pe[2],Te=Pe[3];return xe[0]=je[0]*rt+je[4]*Le+je[8]*Ce+je[12]*Te,xe[1]=je[1]*rt+je[5]*Le+je[9]*Ce+je[13]*Te,xe[2]=je[2]*rt+je[6]*Le+je[10]*Ce+je[14]*Te,xe[3]=je[3]*rt+je[7]*Le+je[11]*Ce+je[15]*Te,xe},transformQuat:function ge(xe,Pe,je){const rt=Pe[0],Le=Pe[1],Ce=Pe[2],Te=je[0],Ye=je[1],ct=je[2],Ae=je[3],Qe=Ae*rt+Ye*Ce-ct*Le,Je=Ae*Le+ct*rt-Te*Ce,re=Ae*Ce+Te*Le-Ye*rt,Ee=-Te*rt-Ye*Le-ct*Ce;return xe[0]=Qe*Ae+Ee*-Te+Je*-ct-re*-Ye,xe[1]=Je*Ae+Ee*-Ye+re*-Te-Qe*-ct,xe[2]=re*Ae+Ee*-ct+Qe*-Ye-Je*-Te,xe[3]=Pe[3],xe},str:function se(xe){return"vec4("+xe[0]+", "+xe[1]+", "+xe[2]+", "+xe[3]+")"},exactEquals:Q,equals:pe,sub:te,mul:oe,div:Y,dist:K,sqrDist:V,len:P,sqrLen:F})},20414:(ut,Oe,C)=>{"use strict";C.d(Oe,{h$:()=>ne,VL:()=>ie,rW:()=>Y,B7:()=>oe,St:()=>T});const x={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function T(j){return x[j]||x[j.toLowerCase()]}function ne(j){var L;return null!=(L=x[j])?L:x[j.toLowerCase()]}function ie(j){return[...ne(j)]}function te(j,L,B){B<0&&++B,B>1&&--B;const X=6*B;return X<1?j+(L-j)*X:2*B<1?L:3*B<2?j+(L-j)*(2/3-B)*6:j}function oe(j,L,B,X=1){const Z=(j%360+360)%360/360,z=B<=.5?B*(L+1):B+L-B*L,ae=2*B-z;return[Math.round(255*te(ae,z,Z+1/3)),Math.round(255*te(ae,z,Z)),Math.round(255*te(ae,z,Z-1/3)),X]}function Y(j){const L=j.length>5,B=L?8:4,X=(1<<B)-1,Z=L?1:17,z=L?9===j.length:5===j.length;let ae=Number("0x"+j.substr(1));if(isNaN(ae))return null;const K=[0,0,0,1];let V;return z&&(V=ae&X,ae>>=B,K[3]=Z*V/255),V=ae&X,ae>>=B,K[2]=Z*V,V=ae&X,ae>>=B,K[1]=Z*V,V=ae&X,ae>>=B,K[0]=Z*V,K}},59318:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ie}),C(8314);var ne,T=C(94113);const ie={apiKey:void 0,applicationUrl:null==(ne=globalThis.location)?void 0:ne.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};globalThis.esriConfig&&((0,T.RH)(ie,globalThis.esriConfig,!0),delete ie.has),ie.assetsPath||(ie.assetsPath=`https://js.arcgis.com/${"4.22.2".slice(0,-2)}/@arcgis/core/assets`),ie.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(ie,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),ie.request.corsEnabledServers=[],ie.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0}},14517:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>le});var x=C(55538),T=C(63290),ne=C(34595),ie=C(34117),oe=(C(8314),C(58817)),Y=C(27899),j=C(36082),L=C(12196);class B{constructor(se,Q,pe){this.properties=se,this.propertyName=Q,this.metadata=pe,this._observers=null,this._accessed=null,this._handles=null,this.flags=1|(pe.nonNullable?8:0)|(pe.hasOwnProperty("value")?16:0)|(void 0===pe.get?32:0)|(void 0===pe.dependsOn?64:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){(0,j.it)(this);const se=this.properties.store,Q=this.propertyName,pe=this.flags,ue=se.get(Q);if(4&pe||1&~pe&&se.has(Q))return ue;this.flags|=4;const me=this.properties.host;let ve;64&pe?ve=(0,j.LJ)(this,this.metadata.get,me):((0,j.GF)(me,this),ve=this.metadata.get.call(me)),se.set(Q,ve,1);const fe=se.get(Q);return fe===ue?this.flags&=-2:(0,j.gb)(this.commit,this),this.flags&=-5,fe}onObservableAccessed(se){se!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(se)||this._accessed.push(se))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const se=this._accessed;if(null===se)return;let Q=this._handles;null===Q&&(Q=this._handles=[]);for(let pe=0;pe<se.length;++pe)Q.push(se[pe].observe(this));se.length=0}observe(se){return null===this._observers&&(this._observers=[]),this._observers.includes(se)||this._observers.push(se),new L.X(this._observers,se)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){2&~this.flags&&(this.flags|=1);const se=this._observers;if(null!==se)for(let Q=0;Q<se.length;++Q)se[Q].onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onCommitted(){if(null===this._observers)return;const se=this._observers.slice();for(let Q=0;Q<se.length;++Q)se[Q].onCommitted()}_clearObservationHandles(){const se=this._handles;if(null!==se){for(let Q=0;Q<se.length;++Q)se[Q].remove();se.length=0}}}var X=C(31283);class Z{constructor(){this._values=new Map}clone(se){const Q=new Z;return this._values.forEach((pe,ue)=>{se&&se.has(ue)||Q.set(ue,(0,oe.d9)(pe))}),Q}get(se){return this._values.get(se)}originOf(){return 6}keys(){return[...this._values.keys()]}set(se,Q){this._values.set(se,Q)}delete(se){this._values.delete(se)}has(se){return this._values.has(se)}forEach(se){this._values.forEach(se)}}var z=C(52323);function ae(ge,se,Q){return void 0!==ge}function K(ge,se,Q,pe){return!(void 0===ge||null==Q&&8&ge.flags)}T.Z.getLogger("esri.core.accessorSupport.Properties");class P{constructor(se){this.host=se,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new Z,this._origin=6;const Q=this.host.constructor.__accessorMetadata__,pe=Q.properties;for(const ue in pe){const me=new B(this,ue,pe[ue]);this.properties.set(ue,me)}this.metadatas=pe,this._autoDestroy=Q.autoDestroy}initialize(){this.lifecycle=1}constructed(){this.lifecycle=2}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[se,Q]of this.properties){const pe=this.internalGet(se);pe&&(ge=pe)&&"function"==typeof ge.destroy&&(pe.destroy(),8&~Q.flags&&this._internalSet(Q,null)),Q.destroy()}else for(const[se,Q]of this.properties)Q.destroy();var ge}get initialized(){return 0!==this.lifecycle}get(se){const Q=this.properties.get(se);if(Q.metadata.get)return Q.getComputed();(0,j.it)(Q);const pe=this.store;return pe.has(se)?pe.get(se):Q.metadata.value}originOf(se){const Q=this.store.originOf(se);if(void 0===Q){const pe=this.properties.get(se);if(void 0!==pe&&16&pe.flags)return"defaults"}return(0,X.x3)(Q)}has(se){return!!this.properties.has(se)&&this.store.has(se)}keys(){return[...this.properties.keys()]}internalGet(se){const Q=this.properties.get(se);if(ae(Q))return this.store.has(se)?this.store.get(se):Q.metadata.value}internalSet(se,Q){const pe=this.properties.get(se);ae(pe)&&this._internalSet(pe,Q)}getDependsInfo(se,Q,pe){const ue=this.properties.get(Q);if(!ae(ue))return"";const me=new Set,ve=(0,j.LJ)({onObservableAccessed:Me=>me.add(Me),onTrackingEnd:()=>{}},()=>{var Me;return null==(Me=ue.metadata.get)?void 0:Me.call(se)});let fe=`${pe}${se.declaredClass.split(".").pop()}.${Q}: ${ve}\n`;if(0===me.size)return fe;pe+="  ";for(const Me of me){if(!(Me instanceof B))continue;const ce=Me.properties.host,he=Me.propertyName,De=(0,z.vw)(ce);fe+=De?De.getDependsInfo(ce,he,pe):`${pe}${he}: undefined\n`}return fe}setAtOrigin(se,Q,pe){const ue=this.properties.get(se);if(ae(ue))return this._setAtOrigin(ue,Q,pe)}isOverridden(se){const Q=this.properties.get(se);return void 0!==Q&&!!(2&Q.flags)}clearOverride(se){const Q=this.properties.get(se);void 0!==Q&&2&Q.flags&&(Q.flags&=-3,Q.notifyChange())}override(se,Q){const pe=this.properties.get(se);if(!K(pe,0,Q))return;const ue=pe.metadata.cast;if(ue){const me=this._cast(ue,Q),{valid:ve,value:fe}=me;if($.release(me),!ve)return;Q=fe}pe.flags|=2,this._internalSet(pe,Q)}set(se,Q){const pe=this.properties.get(se);if(!K(pe,0,Q))return;const ue=pe.metadata.cast;if(ue){const ve=this._cast(ue,Q),{valid:fe,value:Me}=ve;if($.release(ve),!fe)return;Q=Me}const me=pe.metadata.set;me?me.call(this.host,Q):this._internalSet(pe,Q)}setDefaultOrigin(se){this._origin=(0,X.M9)(se)}getDefaultOrigin(){return(0,X.x3)(this._origin)}notifyChange(se){const Q=this.properties.get(se);void 0!==Q&&Q.notifyChange()}invalidate(se){const Q=this.properties.get(se);void 0!==Q&&Q.invalidate()}commit(se){const Q=this.properties.get(se);void 0!==Q&&Q.commit()}_internalSet(se,Q){this._setAtOrigin(se,Q,0!==this.lifecycle?this._origin:0)}_setAtOrigin(se,Q,pe){const ue=this.store,me=se.propertyName;ue.has(me,pe)&&(0,oe.fS)(Q,ue.get(me))&&2&~se.flags&&pe===ue.originOf(me)||(se.invalidate(),ue.set(me,Q,pe),se.commit(),(0,j.mS)(this.host,se))}_cast(se,Q){const pe=$.acquire();return pe.valid=!0,pe.value=Q,se&&(pe.value=se.call(this.host,Q,pe)),pe}}const $=new Y.Z(class F{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});var J=C(82255),H=C(45262),de=C(77712),ee=C(76898);function ye(ge){if(null==ge)return{value:ge};if(Array.isArray(ge))return{type:[ge[0]],value:null};switch(typeof ge){case"object":return ge.constructor&&ge.constructor.__accessorMetadata__||ge instanceof Date?{type:ge.constructor,value:ge}:ge;case"boolean":return{type:Boolean,value:ge};case"string":return{type:String,value:ge};case"number":return{type:Number,value:ge};case"function":return{type:ge,value:null};default:return}}class le{constructor(...se){if(this.constructor===le)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new P(this)}),se.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,se))}static createSubclass(se={}){if(Array.isArray(se))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:Q,declaredClass:pe,constructor:ue}=se;delete se.declaredClass,delete se.properties,delete se.constructor;const me=this;class ve extends me{constructor(...Me){super(...Me),this.inherited=null,ue&&ue.apply(this,Me)}}(0,ie.JT)(ve.prototype);for(const fe in se){const Me=se[fe];ve.prototype[fe]="function"==typeof Me?function(...ce){const he=this.inherited;let De;this.inherited=function(...xe){if(me.prototype[fe])return me.prototype[fe].apply(this,xe)};try{De=Me.apply(this,ce)}catch(xe){throw this.inherited=he,xe}return this.inherited=he,De}:se[fe]}for(const fe in Q){const Me=ye(Q[fe]);(0,de.Cb)(Me)(ve.prototype,fe)}return(0,ee.j)(pe)(ve)}postscript(se){const Q=this.__accessor__,pe=Q.ctorArgs||se;Q.initialize(),pe&&(this.set(pe),Q.ctorArgs=null),Q.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||((0,H.BT)(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(se){this.get(se)}get(se){return(0,ne.U2)(this,se)}hasOwnProperty(se){return this.__accessor__?this.__accessor__.has(se):Object.prototype.hasOwnProperty.call(this,se)}isInstanceOf(se){return(0,x.XV)(T.Z.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof se}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(se,Q){return(0,J.t)(this,se,Q),this}watch(se,Q,pe){return(0,H.YP)(this,se,Q,pe)}_clearOverride(se){return this.__accessor__.clearOverride(se)}_override(se,Q){return this.__accessor__.override(se,Q)}_isOverridden(se){return this.__accessor__.isOverridden(se)}notifyChange(se){this.__accessor__.notifyChange(se)}_get(se){return this.__accessor__.internalGet(se)}_set(se,Q){return this.__accessor__.internalSet(se,Q),this}}},35575:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ne});var x=C(27899);function T(te){te.length=0}class ne{constructor(oe=50,Y=50){this._pool=new x.Z(Array,void 0,T,Y,oe)}acquire(){return this._pool.acquire()}release(oe){this._pool.release(oe)}prune(){this._pool.prune(0)}static acquire(){return ie.acquire()}static release(oe){return ie.release(oe)}static prune(){ie.prune()}}const ie=new ne(100)},7093:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>pe});var K,x=C(17626),T=C(35575),ne=C(61885),ie=C(58817),te=C(62208),oe=C(27899),Y=C(50618),j=C(77712),L=C(90912),B=C(61039),X=C(76898),Z=C(36082),z=C(12196);class ae{constructor(){this._observers=[]}observe(me){return this._observers.includes(me)||this._observers.push(me),new z.X(this._observers,me)}notify(){const me=this._observers.slice();for(let ve=0;ve<me.length;++ve){const fe=me[ve];fe.onInvalidated(),fe.onCommitted()}}}const P=new oe.Z(class V{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(me){this.defaultPrevented=!1,this.item=me}},void 0,ue=>{ue.item=null,ue.target=null,ue.defaultPrevented=!1,ue.cancellable=!1}),F=()=>{};function $(ue){return ue?ue instanceof Q?ue.toArray():ue.length?Array.prototype.slice.apply(ue):[]:[]}function J(ue){if(ue&&ue.length)return ue[0]}function H(ue,me,ve,fe){const Me=Math.min(ue.length-ve,me.length-fe);let ce=0;for(;ce<Me&&ue[ve+ce]===me[fe+ce];)ce++;return ce}function de(ue,me,ve,fe){me&&me.forEach((Me,ce,he)=>{ue.push(Me),de(ue,ve.call(fe,Me,ce,he),ve,fe)})}const ee=new Set,ye=new Set,le=new Set,ge=new Map;let se=0,Q=K=class extends ne.Z.EventedAccessor{constructor(ue){super(ue),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new ae,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:se++})}static isCollection(ue){return null!=ue&&ue instanceof K}normalizeCtorArgs(ue){return ue?Array.isArray(ue)||ue instanceof K?{items:ue}:ue:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return(0,Z.it)(this._observable),this._items}set items(ue){this._emitBeforeChanges(1)||(this._splice(0,this.length,$(ue)),this._emitAfterChanges(1))}hasEventListener(ue){return"change"===ue?this._chgListeners.length>0:this._emitter.hasEventListener(ue)}on(ue,me){if("change"===ue){const ve=this._chgListeners,fe={removed:!1,callback:me};return ve.push(fe),this._notifications&&this._notifications.push({listeners:ve.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=F,fe.removed=!0,ve.splice(ve.indexOf(fe),1)}}}return this._emitter.on(ue,me)}once(ue,me){const ve=this.on(ue,me);return{remove(){ve.remove()}}}add(ue,me){if((0,Z.it)(this._observable),this._emitBeforeChanges(1))return this;const ve=this.getNextIndex(null!=me?me:null);return this._splice(ve,0,[ue]),this._emitAfterChanges(1),this}addMany(ue,me=this._items.length){if((0,Z.it)(this._observable),!ue||!ue.length)return this;if(this._emitBeforeChanges(1))return this;const ve=this.getNextIndex(me);return this._splice(ve,0,$(ue)),this._emitAfterChanges(1),this}removeAll(){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges(2))return[];const ue=this._splice(0,this.length)||[];return this._emitAfterChanges(2),ue}clone(){return(0,Z.it)(this._observable),this._createNewInstance({items:this._items.map(ie.d9)})}concat(...ue){(0,Z.it)(this._observable);const me=ue.map($);return this._createNewInstance({items:this._items.concat(...me)})}drain(ue,me){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges(2))return;const ve=(0,te.j0)(this._splice(0,this.length)),fe=ve.length;for(let Me=0;Me<fe;Me++)ue.call(me,ve[Me],Me,ve);this._emitAfterChanges(2)}every(ue,me){return(0,Z.it)(this._observable),this._items.every(ue,me)}filter(ue,me){let ve;return(0,Z.it)(this._observable),ve=2===arguments.length?this._items.filter(ue,me):this._items.filter(ue),this._createNewInstance({items:ve})}find(ue,me){return(0,Z.it)(this._observable),this._items.find(ue,me)}findIndex(ue,me){return(0,Z.it)(this._observable),this._items.findIndex(ue,me)}flatten(ue,me){(0,Z.it)(this._observable);const ve=[];return de(ve,this,ue,me),new K(ve)}forEach(ue,me){return(0,Z.it)(this._observable),this._items.forEach(ue,me)}getItemAt(ue){return(0,Z.it)(this._observable),this._items[ue]}getNextIndex(ue){(0,Z.it)(this._observable);const me=this.length;return(ue=null==ue?me:ue)<0?ue=0:ue>me&&(ue=me),ue}includes(ue,me=0){return(0,Z.it)(this._observable),this._items.includes(ue,me)}indexOf(ue,me=0){return(0,Z.it)(this._observable),this._items.indexOf(ue,me)}join(ue=","){return(0,Z.it)(this._observable),this._items.join(ue)}lastIndexOf(ue,me=this.length-1){return(0,Z.it)(this._observable),this._items.lastIndexOf(ue,me)}map(ue,me){(0,Z.it)(this._observable);const ve=this._items.map(ue,me);return new K({items:ve})}reorder(ue,me=this.length-1){(0,Z.it)(this._observable);const ve=this.indexOf(ue);if(-1!==ve){if(me<0?me=0:me>=this.length&&(me=this.length-1),ve!==me){if(this._emitBeforeChanges(4))return ue;this._splice(ve,1),this._splice(me,0,[ue]),this._emitAfterChanges(4)}return ue}}pop(){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges(2))return;const ue=J(this._splice(this.length-1,1));return this._emitAfterChanges(2),ue}push(...ue){return(0,Z.it)(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,ue),this._emitAfterChanges(1)),this.length}reduce(ue,me){(0,Z.it)(this._observable);const ve=this._items;return 2===arguments.length?ve.reduce(ue,me):ve.reduce(ue)}reduceRight(ue,me){(0,Z.it)(this._observable);const ve=this._items;return 2===arguments.length?ve.reduceRight(ue,me):ve.reduceRight(ue)}remove(ue){return(0,Z.it)(this._observable),this.removeAt(this.indexOf(ue))}removeAt(ue){if((0,Z.it)(this._observable),ue<0||ue>=this.length||this._emitBeforeChanges(2))return;const me=J(this._splice(ue,1));return this._emitAfterChanges(2),me}removeMany(ue){if((0,Z.it)(this._observable),!ue||!ue.length||this._emitBeforeChanges(2))return[];const me=ue instanceof K?ue.toArray():ue,ve=this._items,fe=[],Me=me.length;for(let ce=0;ce<Me;ce++){const De=ve.indexOf(me[ce]);if(De>-1){const xe=1+H(me,ve,ce+1,De+1),Pe=this._splice(De,xe);Pe&&Pe.length>0&&fe.push.apply(fe,Pe),ce+=xe-1}}return this._emitAfterChanges(2),fe}reverse(){if((0,Z.it)(this._observable),this._emitBeforeChanges(4))return this;const ue=this._splice(0,this.length);return ue&&(ue.reverse(),this._splice(0,0,ue)),this._emitAfterChanges(4),this}shift(){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges(2))return;const ue=J(this._splice(0,1));return this._emitAfterChanges(2),ue}slice(ue=0,me=this.length){return(0,Z.it)(this._observable),this._createNewInstance({items:this._items.slice(ue,me)})}some(ue,me){return(0,Z.it)(this._observable),this._items.some(ue,me)}sort(ue){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges(4))return this;const me=(0,te.j0)(this._splice(0,this.length));return arguments.length?me.sort(ue):me.sort(),this._splice(0,0,me),this._emitAfterChanges(4),this}splice(ue,me,...ve){(0,Z.it)(this._observable);const fe=(me?2:0)|(ve.length?1:0);if(this._emitBeforeChanges(fe))return[];const Me=this._splice(ue,me,ve)||[];return this._emitAfterChanges(fe),Me}toArray(){return(0,Z.it)(this._observable),this._items.slice()}toJSON(){return(0,Z.it)(this._observable),this.toArray()}toLocaleString(){return(0,Z.it)(this._observable),this._items.toLocaleString()}toString(){return(0,Z.it)(this._observable),this._items.toString()}unshift(...ue){return(0,Z.it)(this._observable),!ue.length||this._emitBeforeChanges(1)||(this._splice(0,0,ue),this._emitAfterChanges(1)),this.length}_createNewInstance(ue){return new this.constructor(ue)}_splice(ue,me,ve){const fe=this._items,Me=this.itemType;let ce,he;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,Y.Os)(()=>this._dispatchChange())),me){if(he=fe.splice(ue,me),this.hasEventListener("before-remove")){const De=P.acquire();De.target=this,De.cancellable=!0;for(let xe=0,Pe=he.length;xe<Pe;xe++)ce=he[xe],De.reset(ce),this.emit("before-remove",De),De.defaultPrevented&&(he.splice(xe,1),fe.splice(ue,0,ce),ue+=1,xe-=1,Pe-=1);P.release(De)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const De=P.acquire();De.target=this,De.cancellable=!1;const xe=he.length;for(let Pe=0;Pe<xe;Pe++)De.reset(he[Pe]),this.emit("after-remove",De);P.release(De)}}if(ve&&ve.length){if(Me){const je=[];for(const rt of ve){const Le=Me.ensureType(rt);null==Le&&null!=rt||je.push(Le)}ve=je}const De=this.hasEventListener("before-add"),xe=this.hasEventListener("after-add"),Pe=ue===this.length;if(De||xe){const je=P.acquire();je.target=this,je.cancellable=!0;const rt=P.acquire();rt.target=this,rt.cancellable=!1;for(const Le of ve)De?(je.reset(Le),this.emit("before-add",je),je.defaultPrevented||(Pe?fe.push(Le):fe.splice(ue++,0,Le),this._set("length",fe.length),xe&&(rt.reset(Le),this.emit("after-add",rt)))):(Pe?fe.push(Le):fe.splice(ue++,0,Le),this._set("length",fe.length),rt.reset(Le),this.emit("after-add",rt));P.release(rt),P.release(je)}else{if(Pe)for(const je of ve)fe.push(je);else fe.splice(ue,0,...ve);this._set("length",fe.length)}}return(ve&&ve.length||he&&he.length)&&this._notifyChangeEvent(ve,he),he}_emitBeforeChanges(ue){let me=!1;if(this.hasEventListener("before-changes")){const ve=P.acquire();ve.target=this,ve.cancellable=!0,ve.type=ue,this.emit("before-changes",ve),me=ve.defaultPrevented,P.release(ve)}return me}_emitAfterChanges(ue){if(this.hasEventListener("after-changes")){const me=P.acquire();me.target=this,me.cancellable=!1,me.type=ue,this.emit("after-changes",me),P.release(me)}this._observable.notify()}_notifyChangeEvent(ue,me){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:ue,removed:me})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const ue=this._notifications;this._notifications=null;for(const me of ue){const ve=me.changes;ee.clear(),ye.clear(),le.clear();for(const{added:xe,removed:Pe}of ve){if(xe)if(0===le.size&&0===ye.size)for(const je of xe)ee.add(je);else for(const je of xe)ye.has(je)?(le.add(je),ye.delete(je)):le.has(je)||ee.add(je);if(Pe)if(0===le.size&&0===ee.size)for(const je of Pe)ye.add(je);else for(const je of Pe)ee.has(je)?ee.delete(je):(le.delete(je),ye.add(je))}const fe=T.Z.acquire();ee.forEach(xe=>{fe.push(xe)});const Me=T.Z.acquire();ye.forEach(xe=>{Me.push(xe)});const ce=this._items,he=me.items,De=T.Z.acquire();if(le.forEach(xe=>{he.indexOf(xe)!==ce.indexOf(xe)&&De.push(xe)}),me.listeners&&(fe.length||Me.length||De.length)){const xe={target:this,added:fe,removed:Me,moved:De},Pe=me.listeners.length;for(let je=0;je<Pe;je++){const rt=me.listeners[je];rt.removed||rt.callback.call(this,xe)}}T.Z.release(fe),T.Z.release(Me),T.Z.release(De)}ee.clear(),ye.clear(),le.clear()}};Q.ofType=ue=>{if(!ue)return K;if(ge.has(ue))return ge.get(ue);let me=null;if("function"==typeof ue)me=ue.prototype.declaredClass;else if(ue.base)me=ue.base.prototype.declaredClass;else for(const fe in ue.typeMap){const Me=ue.typeMap[fe].prototype.declaredClass;me?me+=` | ${Me}`:me=Me}let ve=class extends K{};return(0,x._)([(0,B.c)({Type:ue,ensureType:"function"==typeof ue?(0,L.se)(ue):(0,L.N7)(ue)})],ve.prototype,"itemType",void 0),ve=(0,x._)([(0,X.j)(`esri.core.Collection<${me}>`)],ve),ge.set(ue,ve),ve},(0,x._)([(0,j.Cb)()],Q.prototype,"length",void 0),(0,x._)([(0,j.Cb)()],Q.prototype,"items",null),Q=K=(0,x._)([(0,X.j)("esri.core.Collection")],Q);const pe=Q},46882:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>z});var x=C(17626),T=C(7093),ne=C(80542),ie=C(62208),oe=(C(45262),C(21352)),Y=C(77712),X=(C(85931),C(8314),C(90912),C(76898));let Z=class extends((0,ne.p)(T.Z)){constructor(ae){super(ae),this.getCollections=null}initialize(){this.handles.add((0,oe.EH)(()=>this.refresh()))}destroy(){this.getCollections=null}refresh(){const ae=(0,ie.pC)(this.getCollections)?this.getCollections():null;if((0,ie.Wi)(ae))return void this.removeAll();let K=0;for(const V of ae)(0,ie.pC)(V)&&(K=this._processCollection(K,V));this.splice(K,this.length)}_createNewInstance(ae){return new T.Z(ae)}_processCollection(ae,K){if(!K)return ae;const V=this.itemFilterFunction?this.itemFilterFunction:P=>!!P;for(const P of K)if(P){if(V(P)){const F=this.indexOf(P,ae);F>=0?F!==ae&&this.reorder(P,ae):this.add(P,ae),++ae}if(this.getChildrenFunction){const F=this.getChildrenFunction(P);if(Array.isArray(F))for(const $ of F)ae=this._processCollection(ae,$);else ae=this._processCollection(ae,F)}}return ae}};(0,x._)([(0,Y.Cb)()],Z.prototype,"getCollections",void 0),(0,x._)([(0,Y.Cb)()],Z.prototype,"getChildrenFunction",void 0),(0,x._)([(0,Y.Cb)()],Z.prototype,"itemFilterFunction",void 0),Z=(0,x._)([(0,X.j)("esri.core.CollectionFlattener")],Z);const z=Z},26584:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ie});var x=C(58817),T=C(63290),ne=C(90888);class ie extends ne.Z{constructor(oe,Y,j){if(super(oe,Y,j),!(this instanceof ie))return new ie(oe,Y,j)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(oe,Y)=>{if(Y&&"object"==typeof Y&&"function"==typeof Y.toJSON)return Y;try{return(0,x.d9)(Y)}catch(j){return"[object]"}}))}}catch(oe){throw T.Z.getLogger("esri.core.Error").error(oe),oe}return{name:this.name,message:this.message,details:this.details}}static fromJSON(oe){return new ie(oe.name,oe.message,oe.details)}}ie.prototype.type="error"},61885:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>oe});var x=C(17626),T=C(14517),ne=C(54024),ie=C(76898);class te{constructor(){this._emitter=new te.EventEmitter(this)}emit(j,L){return this._emitter.emit(j,L)}on(j,L){return this._emitter.on(j,L)}once(j,L){return this._emitter.once(j,L)}hasEventListener(j){return this._emitter.hasEventListener(j)}}!function(Y){class j{constructor(X=null){this.target=X,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(X,Z){const z=this._listenersMap&&this._listenersMap.get(X);if(!z)return!1;const ae=this.target||this;return[...z].forEach(K=>{K.call(ae,Z)}),z.length>0}on(X,Z){if(Array.isArray(X)){const ae=X.map(K=>this.on(K,Z));return(0,ne.AL)(ae)}if(X.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const z=this._listenersMap.get(X)||[];return z.push(Z),this._listenersMap.set(X,z),{remove:()=>{const ae=this._listenersMap&&this._listenersMap.get(X)||[],K=ae.indexOf(Z);K>=0&&ae.splice(K,1)}}}once(X,Z){const z=this.on(X,ae=>{z.remove(),Z.call(null,ae)});return z}hasEventListener(X){const Z=this._listenersMap&&this._listenersMap.get(X);return null!=Z&&Z.length>0}}Y.EventEmitter=j,Y.EventedMixin=B=>{let X=class extends B{constructor(){super(...arguments),this._emitter=new j}destroy(){this._emitter.clear()}emit(Z,z){return this._emitter.emit(Z,z)}on(Z,z){return this._emitter.on(Z,z)}once(Z,z){return this._emitter.once(Z,z)}hasEventListener(Z){return this._emitter.hasEventListener(Z)}};return X=(0,x._)([(0,ie.j)("esri.core.Evented")],X),X};let L=class extends T.Z{constructor(){super(...arguments),this._emitter=new te.EventEmitter(this)}destroy(){this._emitter.clear()}emit(B,X){return this._emitter.emit(B,X)}on(B,X){return this._emitter.on(B,X)}once(B,X){return this._emitter.once(B,X)}hasEventListener(B){return this._emitter.hasEventListener(B)}};L=(0,x._)([(0,ie.j)("esri.core.Evented")],L),Y.EventedAccessor=L}(te||(te={}));const oe=te},80542:(ut,Oe,C)=>{"use strict";C.d(Oe,{r:()=>j,p:()=>Y});var x=C(17626),T=C(14517),ne=C(72392),ie=C(77712),te=C(76898),oe=C(70257);const Y=L=>{let B=class extends L{destroy(){var X,Z;this.destroyed||(null==(X=this._get("handles"))||X.destroy(),null==(Z=this._get("updatingHandles"))||Z.destroy())}get handles(){return this._get("handles")||new ne.Z}get updatingHandles(){return this._get("updatingHandles")||new oe.t}};return(0,x._)([(0,ie.Cb)({readOnly:!0})],B.prototype,"handles",null),(0,x._)([(0,ie.Cb)({readOnly:!0})],B.prototype,"updatingHandles",null),B=(0,x._)([(0,te.j)("esri.core.HandleOwner")],B),B};let j=class extends(Y(T.Z)){};j=(0,x._)([(0,te.j)("esri.core.HandleOwner")],j)},72392:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>j});var x=C(17626),T=C(14517),ne=C(7093),ie=C(62208),te=C(77712),oe=C(76898);let Y=class extends T.Z{constructor(L){super(L),this._groups=new Map}destroy(){this.removeAll()}get size(){let L=0;return this._groups.forEach(B=>{L+=B.length}),L}add(L,B){if(!this._isHandle(L)&&!Array.isArray(L)&&!ne.Z.isCollection(L))return this;const X=this._getOrCreateGroup(B);return Array.isArray(L)||ne.Z.isCollection(L)?L.forEach(Z=>this._isHandle(Z)&&X.push(Z)):X.push(L),this.notifyChange("size"),this}forEach(L,B){if("function"==typeof L)this._groups.forEach(X=>X.forEach(L));else{const X=this._getGroup(L);X&&B&&X.forEach(B)}}has(L){return this._groups.has(this._ensureGroupKey(L))}remove(L){if(Array.isArray(L)||ne.Z.isCollection(L))return L.forEach(this.remove,this),this;if(!this.has(L))return this;const B=this._getGroup(L);for(let X=0;X<B.length;X++)B[X].remove();return this._deleteGroup(L),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(L=>{for(let B=0;B<L.length;B++)L[B].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(L){return L&&!!L.remove}_getOrCreateGroup(L){if(this.has(L))return this._getGroup(L);const B=[];return this._groups.set(this._ensureGroupKey(L),B),B}_getGroup(L){return(0,ie.j0)(this._groups.get(this._ensureGroupKey(L)))}_deleteGroup(L){return this._groups.delete(this._ensureGroupKey(L))}_ensureGroupKey(L){return L||"_default_"}};(0,x._)([(0,te.Cb)({readOnly:!0})],Y.prototype,"size",null),Y=(0,x._)([(0,oe.j)("esri.core.Handles")],Y);const j=Y},61996:(ut,Oe,C)=>{"use strict";C.d(Oe,{I:()=>ie});var x=C(17626),T=C(76898);let ne=0;const ie=oe=>{let Y=class extends oe{constructor(...j){super(...j),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+ne++})}};return Y=(0,x._)([(0,T.j)("esri.core.Identifiable")],Y),Y};let te=class extends(ie(class{})){};te=(0,x._)([(0,T.j)("esri.core.Identifiable")],te)},78498:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>T});var x=C(1036);class T{constructor(ie,te){this._storage=new x.WJ,this._storage.maxSize=ie,te&&this._storage.registerRemoveFunc("",te)}put(ie,te){this._storage.put(ie,te,1,1)}pop(ie){return this._storage.pop(ie)}get(ie){return this._storage.get(ie)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},86162:(ut,Oe,C)=>{"use strict";C.d(Oe,{wq:()=>L,eC:()=>oe});var x=C(17626),T=C(14517),ne=C(29338),ie=C(36054),te=C(76898);const oe=B=>{let X=class extends B{constructor(...Z){super(...Z)}read(Z,z){(0,ne.ij)(this,Z,z)}write(Z={},z){return(0,ie.cW)(this,Z,z)}toJSON(Z){return this.write({},Z)}static fromJSON(Z,z){return Y.call(this,Z,z)}};return X=(0,x._)([(0,te.j)("esri.core.JSONSupport")],X),X.prototype.toJSON.isDefaultToJSON=!0,X};function Y(B,X){if(!B)return null;if(B.declaredClass)throw new Error("JSON object is already hydrated");const Z=new this;return Z.read(B,X),Z}let L=class extends(oe(T.Z)){};L=(0,x._)([(0,te.j)("esri.core.JSONSupport")],L)},93961:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>T});var x=C(1036);class T{constructor(ie,te){this._storage=new x.WJ,this._storage.maxSize=ie,te&&this._storage.registerRemoveFunc("",te)}put(ie,te,oe){this._storage.put(ie,te,oe,1)}pop(ie){return this._storage.pop(ie)}get(ie){return this._storage.get(ie)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(ie){this._storage.maxSize=ie}}},47996:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ae});var x=C(17626),T=C(26584),ne=C(60330),ie=C(10699),te=C(14889),oe=C(77712),Y=C(76898);const X="loaded",Z=K=>{let V=class extends K{constructor(...P){super(...P),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(F=>{const $=this.load.bind(this);this.load=J=>{const H=new Promise((de,ee)=>{const ye=(0,ie.$F)(J,ee);this.destroyed&&ee(new T.Z("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(de,ee).finally(()=>{ye&&ye.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const de=this._loadController=new AbortController;$({signal:de.signal}),(0,ie.fu)(de.signal,()=>{this._promiseProps.abort()})}return F(),H}})),this.when(()=>{this._set("loadStatus",X),this._loadController=null},F=>{this._set("loadStatus","failed"),this._set("loadError",F),this._loadController=null})}get loaded(){return this.loadStatus===X}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var P;return this.isFulfilled()||(this._set("loadError",new T.Z("load:cancelled","Cancelled")),null==(P=this._loadController)||P.abort()),this}};return(0,x._)([(0,oe.Cb)({readOnly:!0})],V.prototype,"loaded",null),(0,x._)([(0,oe.Cb)({readOnly:!0})],V.prototype,"loadError",void 0),(0,x._)([(0,oe.Cb)()],V.prototype,"loadStatus",void 0),(0,x._)([(0,oe.Cb)({type:[te.Z],readOnly:!0})],V.prototype,"loadWarnings",null),V=(0,x._)([(0,Y.j)("esri.core.Loadable")],V),V};let z=class extends(Z(ne.D)){};var K;z=(0,x._)([(0,Y.j)("esri.core.Loadable")],z),(K=z||(z={})).LoadableMixin=Z,K.isLoadable=function V(P){return!(!P||!P.load)};const ae=z},63290:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>oe});var x=C(59318),ne=(C(8314),C(62208)),ie=C(77275);const te={info:0,warn:1,error:2,none:3};class oe{constructor(j){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=j.level&&(this.level=j.level),null!=j.writer&&(this.writer=j.writer),this._module=j.module,oe._loggers[this.module]=this;const L=this.module.lastIndexOf(".");-1!==L&&(this._parent=oe.getLogger(this.module.slice(0,L)))}get module(){return this._module}get parent(){return this._parent}error(...j){this._log("error","always",...j)}warn(...j){this._log("warn","always",...j)}info(...j){this._log("info","always",...j)}errorOnce(...j){this._log("error","once",...j)}warnOnce(...j){this._log("warn","once",...j)}infoOnce(...j){this._log("info","once",...j)}errorOncePerTick(...j){this._log("error","oncePerTick",...j)}warnOncePerTick(...j){this._log("warn","oncePerTick",...j)}infoOncePerTick(...j){this._log("info","oncePerTick",...j)}get test(){const j=this;return{loggedMessages:j._loggedMessages,clearLoggedWarnings:()=>j._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(j={}){const L=oe._loggers;return oe._loggers=j,L},set throttlingDisabled(j){oe._throttlingDisabled=j}}}static getLogger(j){let L=oe._loggers[j];return L||(L=new oe({module:j})),L}_log(j,L,...B){if(this._matchLevel(j)){if("always"!==L&&!oe._throttlingDisabled){const X=this._argsToKey(B),Z=this._loggedMessages[j].get(X);if("once"===L&&null!=Z||"oncePerTick"===L&&Z&&Z>=oe._tickCounter)return;this._loggedMessages[j].set(X,oe._tickCounter),oe._scheduleTickCounterIncrement()}for(const X of x.Z.log.interceptors)if(X(j,this.module,...B))return;this._inheritedWriter()(j,this.module,...B)}}_parentWithMember(j,L){let B=this;for(;(0,ne.pC)(B);){const X=B[j];if((0,ne.pC)(X))return X;B=B.parent}return L}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(j,L,...B){console[j](`[${L}]`,...B)}_matchLevel(j){return te[this._parentWithMember("level",x.Z.log.level?x.Z.log.level:"warn")]<=te[j]}_argsToKey(...j){return(0,ie.hP)(JSON.stringify(j,(B,X)=>"object"!=typeof X||Array.isArray(X)?X:"[Object]"))}static _scheduleTickCounterIncrement(){oe._tickCounterScheduled||(oe._tickCounterScheduled=!0,Promise.resolve().then(()=>{oe._tickCounter++,oe._tickCounterScheduled=!1}))}}oe._loggers={},oe._tickCounter=0,oe._tickCounterScheduled=!1,oe._throttlingDisabled=!1},88159:(ut,Oe,C)=>{"use strict";function x(ie,te){for(const[oe,Y]of ie)if(te(Y,oe))return!0;return!1}function ne(ie,te,oe){const Y=ie.get(te);if(void 0!==Y)return Y;const j=oe();return ie.set(te,j),j}C.d(Oe,{s1:()=>ne,oE:()=>x})},1036:(ut,Oe,C)=>{"use strict";C.d(Oe,{Xq:()=>ie,WJ:()=>te});var x=C(62208),T=C(77029);class ie{constructor(Y,j,L){this._namespace=Y,this._storage=j,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",L&&(this._storage.registerRemoveFunc(this._namespace,L),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(Y,j,L,B=0){this._storage.put(this._namespace+Y,j,L,B)}get(Y){const j=this._storage.get(this._namespace+Y);return void 0===j?++this._miss:++this._hit,j}pop(Y){const j=this._storage.pop(this._namespace+Y);return void 0===j?++this._miss:++this._hit,j}updateSize(Y,j,L){this._storage.updateSize(this._namespace+Y,j,L)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class te{constructor(Y=10485760){this._maxSize=Y,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new T.Z,this._users=new T.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(Y){this._users.push(Y)}deregister(Y){this._users.removeUnordered(Y)}registerRemoveFunc(Y,j){this._removeFuncs.push([Y,j])}deregisterRemoveFunc(Y){this._removeFuncs.filterInPlace(j=>j[0]!==Y)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(Y){this._maxSize=Math.max(Y,0),this._checkSizeLimit()}put(Y,j,L,B){const X=this._db.get(Y);if(X&&(this._size-=X.size,this._db.delete(Y),X.entry!==j&&this._notifyRemove(Y,X.entry,0)),L>this._maxSize)return void this._notifyRemove(Y,j,0);if(void 0===j)return void console.warn("Refusing to cache undefined entry ");if(!L||L<0)return void console.warn("Refusing to cache entry with invalid size "+L);const Z=1+Math.max(B,-3)- -3;this._db.set(Y,{entry:j,size:L,lifetime:Z,lives:Z}),this._size+=L,this._checkSizeLimit()}updateSize(Y,j,L){const B=this._db.get(Y);if(B&&B.entry===j){for(this._size-=B.size;L>this._maxSize;){const X=this._notifyRemove(Y,j,1);if(!((0,x.pC)(X)&&X>0))return void this._db.delete(Y);L=X}B.size=L,this._size+=L,this._checkSizeLimit()}}pop(Y){const j=this._db.get(Y);if(j)return this._size-=j.size,this._db.delete(Y),++this._hit,j.entry;++this._miss}get(Y){const j=this._db.get(Y);if(void 0!==j)return this._db.delete(Y),j.lives=j.lifetime,this._db.set(Y,j),++this._hit,j.entry;++this._miss}getStats(){const Y={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},j={},L=new Array;this._db.forEach((Z,z)=>{const ae=Z.lifetime;L[ae]=(L[ae]||0)+Z.size,this._users.forAll(K=>{const V=K.namespace;z.startsWith(V)&&(j[V]=(j[V]||0)+Z.size)})});const B={};this._users.forAll(Z=>{const z=Z.namespace;!isNaN(Z.hitRate)&&Z.hitRate>0?(j[z]=j[z]||0,B[z]=Math.round(100*Z.hitRate)+"%"):B[z]="0%"});const X=Object.keys(j);X.sort((Z,z)=>j[z]-j[Z]),X.forEach(Z=>Y[Z]=Math.round(j[Z]/2**20)+"MB / "+B[Z]);for(let Z=L.length-1;Z>=0;--Z){const z=L[Z];z&&(Y["Priority "+(Z+-3-1)]=Math.round(z/this.size*100)+"%")}return Y}resetStats(){this._hit=this._miss=0,this._users.forAll(Y=>Y.resetHitRate())}clear(Y){this._db.forEach((j,L)=>{L.startsWith(Y)&&(this._size-=j.size,this._db.delete(L),this._notifyRemove(L,j.entry,0))})}clearAll(){this._db.forEach((Y,j)=>this._notifyRemove(j,Y.entry,0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(Y,j,L){let B;return this._removeFuncs.some(X=>{if(Y.startsWith(X[0])){const Z=X[1](j,L);return"number"==typeof Z&&(B=Z),!0}return!1}),B}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[Y,j]of this._db){if(this._db.delete(Y),j.lives<=1){this._size-=j.size;const L=this._notifyRemove(Y,j.entry,1);(0,x.pC)(L)&&L>0&&(this._size+=L,j.lives=j.lifetime,j.size=L,this._db.set(Y,j))}else--j.lives,this._db.set(Y,j);if(this._size<=.9*this.maxSize)return}}}},90888:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ne});var x=C(94113);class ne{constructor(te,oe,Y){this.name=te,this.details=Y,this.message=void 0,this instanceof ne&&(this.message=oe&&function T(ie,te){return ie.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(oe,Y){if(""===Y)return"$";const j=(0,x.hS)(Y,te),L=null==j?"":j;if(void 0===L)throw new Error(`could not find key "${Y}" in template`);return L.toString()})}(oe,Y)||"")}toString(){return"["+this.name+"]: "+this.message}}},99959:(ut,Oe,C)=>{"use strict";C.d(Oe,{R:()=>V,w:()=>P});var x=C(17626),T=C(14517),ne=C(62208),ie=C(58817),te=C(31283);class oe{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(te.kk),this._values=new Map}clone($){const J=new oe,H=this._originStores[0];H&&H.forEach((de,ee)=>{J.set(ee,(0,ie.d9)(de),0)});for(let de=2;de<te.kk;de++){const ee=this._originStores[de];ee&&ee.forEach((ye,le)=>{$&&$.has(le)||J.set(le,(0,ie.d9)(ye),de)})}return J}get($,J){const H=void 0===J?this._values:this._originStores[J];return H?H.get($):void 0}keys($){const J=null==$?this._values:this._originStores[$];return J?[...J.keys()]:[]}set($,J,H=6){let de=this._originStores[H];if(de||(de=new Map,this._originStores[H]=de),de.set($,J),!this._values.has($)||(0,ne.j0)(this._propertyOriginMap.get($))<=H){const ee=this._values.get($);return this._values.set($,J),this._propertyOriginMap.set($,H),ee!==J}return!1}delete($,J=6){const H=this._originStores[J];if(!H)return;const de=H.get($);if(H.delete($),this._values.has($)&&this._propertyOriginMap.get($)===J){this._values.delete($);for(let ee=J-1;ee>=0;ee--){const ye=this._originStores[ee];if(ye&&ye.has($)){this._values.set($,ye.get($)),this._propertyOriginMap.set($,ee);break}}}return de}has($,J){const H=void 0===J?this._values:this._originStores[J];return!!H&&H.has($)}revert($,J){for(;J>0&&!this.has($,J);)--J;const H=this._originStores[J],de=H&&H.get($),ee=this._values.get($);return this._values.set($,de),this._propertyOriginMap.set($,J),ee!==de}originOf($){return this._propertyOriginMap.get($)||0}forEach($){this._values.forEach($)}}var Y=C(29338),j=C(52323),L=C(76898);const B=F=>{let $=class extends F{constructor(...J){super(...J);const H=(0,ne.j0)((0,j.vw)(this)),de=H.metadatas,ee=H.store,ye=new oe;H.store=ye,ee.keys().forEach(le=>{ye.set(le,ee.get(le),0)}),Object.keys(de).forEach(le=>{H.internalGet(le)&&ye.set(le,H.internalGet(le),0)})}read(J,H){(0,Y.ij)(this,J,H)}getAtOrigin(J,H){const de=X(this),ee=(0,te.M9)(H);if("string"==typeof J)return de.get(J,ee);const ye={};return J.forEach(le=>{ye[le]=de.get(le,ee)}),ye}originOf(J){return(0,te.x3)(this.originIdOf(J))}originIdOf(J){return X(this).originOf(J)}revert(J,H){const de=X(this),ee=(0,te.M9)(H),ye=(0,j.vw)(this);let le;le="string"==typeof J?"*"===J?de.keys(ee):[J]:J,le.forEach(ge=>{ye.invalidate(ge),de.revert(ge,ee),ye.commit(ge)})}};return $=(0,x._)([(0,L.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],$),$};function X(F){return(0,j.vw)(F).store}let Z=class extends(B(T.Z)){};Z=(0,x._)([(0,L.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],Z);var z=C(36054);const ae=F=>{let $=class extends F{constructor(...J){super(...J)}clear(J,H="user"){return K(this).delete(J,(0,te.M9)(H))}write(J={},H){return(0,z.cW)(this,J=J||{},H),J}setAtOrigin(J,H,de){(0,j.vw)(this).setAtOrigin(J,H,(0,te.M9)(de))}removeOrigin(J){const H=K(this),de=(0,te.M9)(J),ee=H.keys(de);for(const ye of ee)H.originOf(ye)===de&&H.set(ye,H.get(ye,de),6)}updateOrigin(J,H){const de=K(this),ee=(0,te.M9)(H),ye=this.get(J);for(let le=ee+1;le<te.kk;++le)de.delete(J,le);de.set(J,ye,ee)}toJSON(J){return this.write({},J)}};return $=(0,x._)([(0,L.j)("esri.core.WriteableMultiOriginJSONSupport")],$),$.prototype.toJSON.isDefaultToJSON=!0,$};function K(F){return(0,j.vw)(F).store}const V=F=>{let $=class extends(ae(B(F))){constructor(...J){super(...J)}};return $=(0,x._)([(0,L.j)("esri.core.MultiOriginJSONSupport")],$),$};let P=class extends(V(T.Z)){};P=(0,x._)([(0,L.j)("esri.core.MultiOriginJSONSupport")],P)},27899:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ne});let ne=(()=>{class ie{constructor(oe,Y,j,L=1,B=0){if(this.ctor=oe,this.acquireFunction=Y,this.releaseFunction=j,this.allocationSize=L,this._pool=new Array(B),this._initialSize=B,this.ctor)for(let X=0;X<B;X++)this._pool[X]=new this.ctor;this.allocationSize=Math.max(L,1)}destroy(){this.prune(0)}acquire(...oe){let Y;if(ie.test.disabled)Y=new this.ctor;else{if(0===this._pool.length){const j=this.allocationSize;for(let L=0;L<j;L++)this._pool[L]=new this.ctor}Y=this._pool.pop()}return this.acquireFunction?this.acquireFunction(Y,...oe):function T(ie){return ie&&ie.acquire&&"function"==typeof ie.acquire}(Y)&&Y.acquire(...oe),Y}release(oe){oe&&!ie.test.disabled&&(this.releaseFunction?this.releaseFunction(oe):function x(ie){return ie&&ie.release&&"function"==typeof ie.release}(oe)&&oe.release(),this._pool.push(oe))}prune(oe=this._initialSize){if(!(oe>=this._pool.length)){for(let Y=oe;Y<this._pool.length;++Y)this._dispose(this._pool[Y]);this._pool.length=oe}}_dispose(oe){oe.dispose&&"function"==typeof oe.dispose&&oe.dispose()}}return ie.test={disabled:!1},ie})()},73362:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>T});class T{constructor(ie,te=29){this.name=ie,this._counter=0,this._items=new Array(te)}record(ie){this._items[++this._counter%this._items.length]=ie}get median(){return this._items.slice().sort((ie,te)=>ie-te)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((ie,te)=>ie+te,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}},77029:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>oe});var T,x=C(85931);!function(j){const L=(z,ae,K,V)=>{let P=ae,F=ae;const $=K>>>1,J=z[P-1];for(;F<=$;){F=P<<1,F<K&&V(z[F-1],z[F])<0&&++F;const H=z[F-1];if(V(H,J)<=0)break;z[P-1]=H,P=F}z[P-1]=J},B=(z,ae)=>z<ae?-1:z>ae?1:0;j.sort=function X(z,ae,K,V){void 0===ae&&(ae=0),void 0===K&&(K=z.length),void 0===V&&(V=B);for(let F=K>>>1;F>ae;F--)L(z,F,K,V);const P=ae+1;for(let F=K-1;F>ae;F--){const $=z[ae];z[ae]=z[F],z[F]=$,L(z,P,F,V)}},j.iterableSort=function*Z(z,ae,K,V){void 0===ae&&(ae=0),void 0===K&&(K=z.length),void 0===V&&(V=B);for(let F=K>>>1;F>ae;F--)L(z,F,K,V),yield;const P=ae+1;for(let F=K-1;F>ae;F--){const $=z[ae];z[ae]=z[F],z[F]=$,L(z,P,F,V),yield}}}(T||(T={}));const ne=T;class oe{constructor(L){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new x.SO,L&&(L.initialSize&&(this.data=new Array(L.initialSize)),L.allocator&&(this._allocator=L.allocator),void 0!==L.deallocator&&(this._deallocator=L.deallocator),L.shrink&&(this._shrink=()=>Y(this)))}toArray(){return this.data.slice(0,this.length)}getItemAt(L){if(!(L<0||L>=this._length))return this.data[L]}get length(){return this._length}set length(L){if(L>this._length){if(this._allocator){for(;this._length<L;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=L}else{if(this._deallocator)for(let B=L;B<this._length;++B)this.data[B]=this._deallocator(this.data[B]);this._length=L,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(L){this.data[this._length++]=L}pushArray(L,B=L.length){for(let X=0;X<B;X++)this.data[this._length++]=L[X]}fill(L,B){for(let X=0;X<B;X++)this.data[this._length++]=L}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const L=this.data[this._length];return++this._length,L}unshift(L){this.data.unshift(L),this._length++,Y(this)}pop(){if(0===this.length)return;const L=this.data[this.length-1];return this.length=this.length-1,this._shrink(),L}remove(L){const B=(0,x.cq)(this.data,L,this.length,this._hint);if(-1!==B)return this.data.splice(B,1),this.length=this.length-1,L}removeUnordered(L){const B=(0,x.e$)(this.data,L,this.length,this._hint);return void 0!==B&&(this.length=this.length-1),this._shrink(),B}removeUnorderedIndex(L){if(!(L>=this.length||L<0))return this.swapElements(L,this.length-1),this.pop()}removeUnorderedMany(L,B=L.length,X){this.length=(0,x.FY)(this.data,L,this.length,B,this._hint,X),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(L,B){L>=this.length||B>=this.length||L===B||([this.data[L],this.data[B]]=[this.data[B],this.data[L]])}sort(L){ne.sort(this.data,0,this.length,L)}iterableSort(L){return ne.iterableSort(this.data,0,this.length,L)}some(L,B){for(let X=0;X<this.length;++X)if(L.call(B,this.data[X],X,this.data))return!0;return!1}filterInPlace(L,B){let X=0;for(let Z=0;Z<this._length;++Z){const z=this.data[Z];L.call(B,z,Z,this.data)&&(this.data[Z]=this.data[X],this.data[X]=z,X++)}if(this._deallocator)for(let Z=X;Z<this._length;Z++)this.data[Z]=this._deallocator(this.data[Z]);return this._length=X,this._shrink(),this}forAll(L,B){const X=this.length,Z=this.data;for(let z=0;z<X;++z)L.call(B,Z[z],z,Z)}forEach(L,B){for(let X=0;X<this.length;++X)L.call(B,this.data[X],X,this.data)}map(L,B){const X=new Array(this.length);for(let Z=0;Z<this.length;++Z)X[Z]=L.call(B,this.data[Z],Z,this.data);return X}reduce(L,B){let X=B;for(let Z=0;Z<this.length;++Z)X=L(X,this.data[Z],Z,this.data);return X}has(L){const B=this.length,X=this.data;for(let Z=0;Z<B;++Z)if(X[Z]===L)return!0;return!1}}function Y(j){j.data.length>1.5*j.length&&(j.data.length=Math.floor(1.1*j.length))}},60330:(ut,Oe,C)=>{"use strict";C.d(Oe,{D:()=>j,v:()=>Y});var x=C(17626),T=C(14517),ne=C(62208),ie=C(10699),te=C(76898);class oe{constructor(B){this.instance=B,this._resolver=(0,ie.dD)(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()})}addResolvingPromise(B){this._resolvingPromises.push(B),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject((0,ie.zE)())}when(B,X){return this._resolver.promise.then(B,X)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const B=(0,ie.dD)(),X=[...this._resolvingPromises,(0,ne.j0)(B.promise)],Z=this._allPromise=Promise.all(X);Z.then(()=>{this.isFulfilled()||this._allPromise!==Z||this._resolver.resolve(this.instance)},z=>{this.isFulfilled()||this._allPromise!==Z||(0,ie.D_)(z)||this._resolver.reject(z)}),B.resolve()}}const Y=L=>{let B=class extends L{constructor(...X){super(...X),this._promiseProps=new oe(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(X,Z){return new Promise((z,ae)=>{this._promiseProps.when(z,ae)}).then(X,Z)}catch(X){return this.when(null,X)}addResolvingPromise(X){X&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in X?X.when():X)}};return B=(0,x._)([(0,te.j)("esri.core.Promise")],B),B};let j=class extends(Y(T.Z)){};j=(0,x._)([(0,te.j)("esri.core.Promise")],j)},35133:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>T});var x=C(62208);class T{constructor(ie=(te=>te.values().next().value)){this._peeker=ie,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(0===this._items.size)return;let ie;for(ie of this._items);return ie}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(ie){this.contains(ie)||this._items.add(ie)}contains(ie){return this._items.has(ie)}pop(){if(0===this.length)return;const ie=this.peek();return this._items.delete((0,x.j0)(ie)),ie}popLast(){if(0===this.length)return;const ie=this.last();return this._items.delete((0,x.j0)(ie)),ie}remove(ie){this._items.delete(ie)}filter(ie){return this._items.forEach(te=>{ie(te)||this._items.delete(te)}),this}}},4619:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>x});class x{constructor(ne=1){this._seed=ne}set seed(ne){this._seed=null==ne?Math.random()*x._m:ne}getInt(){return this._seed=(x._a*this._seed+x._c)%x._m,this._seed}getFloat(){return this.getInt()/(x._m-1)}getIntRange(ne,ie){return Math.round(this.getFloatRange(ne,ie))}getFloatRange(ne,ie){const te=ie-ne;return ne+this.getInt()/x._m*te}}x._m=2147483647,x._a=48271,x._c=0},10349:(ut,Oe,C)=>{"use strict";C.d(Oe,{G:()=>T});var x=C(26584);class T{constructor(ie,te,oe=""){this.major=ie,this.minor=te,this._context=oe}lessThan(ie,te){return this.major<ie||ie===this.major&&this.minor<te}since(ie,te){return!this.lessThan(ie,te)}validate(ie){if(this.major!==ie.major)throw new x.Z((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:ie})}clone(){return new T(this.major,this.minor,this._context)}static parse(ie,te=""){const[oe,Y]=ie.split("."),j=/^\s*\d+\s*$/;if(!oe||!oe.match||!oe.match(j))throw new x.Z((te&&te+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:ie});if(!Y||!Y.match||!Y.match(j))throw new x.Z((te&&te+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:ie});const L=parseInt(oe,10),B=parseInt(Y,10);return new T(L,B,te)}}},14889:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>T});var x=C(90888);class T extends x.Z{constructor(ie,te,oe){if(super(ie,te,oe),!(this instanceof T))return new T(ie,te,oe)}}T.prototype.type="warning"},31283:(ut,Oe,C)=>{"use strict";C.d(Oe,{kk:()=>T,x3:()=>ie,Wm:()=>oe,M9:()=>ne});var x=C(62208);const T=7;function ne(L){switch(L){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function ie(L){switch(L){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}return(0,x.j0)(void 0)}function oe(L){return ie(L)}},83960:(ut,Oe,C)=>{"use strict";C.d(Oe,{B:()=>T});var x=C(77712);function T(ne,ie){const te=ie?nn(Ot({},ie),{source:ne}):ne;return(0,x.Cb)({aliasOf:te})}},66656:(ut,Oe,C)=>{"use strict";C.d(Oe,{p:()=>Y});var x=C(90912),T=C(34117);const ne=Object.prototype.toString;function ie(j){const L="__accessorMetadata__"in j?(0,x.se)(j):j;return function(...B){if(B.push(L),"number"==typeof B[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return te.apply(this,B)}}function te(j,L,B,X){(0,T.VZ)(j,L).cast=X}function Y(...j){if(3!==j.length||"string"!=typeof j[1])return 1===j.length&&"[object Function]"===ne.call(j[0])?ie(j[0]):1===j.length&&"string"==typeof j[0]?function oe(j){return function(L,B){(0,T.VZ)(L,j).cast=L[B]}}(j[0]):void 0}},55342:(ut,Oe,C)=>{"use strict";C.d(Oe,{J:()=>ne});var x=C(2076),T=C(77712);function ne(ie,te={}){var oe;const Y=ie instanceof x.Xn?ie:new x.Xn(ie,te),j={type:null==(oe=null==te?void 0:te.ignoreUnknown)||oe?Y.apiValues:String,readOnly:null==te?void 0:te.readOnly,json:{type:Y.jsonValues,read:(null==te||!te.readOnly)&&{reader:Y.read},write:{writer:Y.write}}};return void 0!==(null==te?void 0:te.default)&&(j.json.default=te.default),void 0!==(null==te?void 0:te.name)&&(j.json.name=te.name),(0,T.Cb)(j)}},77712:(ut,Oe,C)=>{"use strict";C.d(Oe,{Eg:()=>L,Cb:()=>oe,CJ:()=>Y});var x=C(63290),T=C(90912),ne=C(34595),ie=C(34117),te=C(82255);function oe(B={}){return(X,Z)=>{if(X===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${X.name}.${Z}. Accessor does not support static properties.`);const z=Object.getOwnPropertyDescriptor(X,Z),ae=(0,ie.VZ)(X,Z);z&&(z.get||z.set?(ae.get=z.get||ae.get,ae.set=z.set||ae.set):"value"in z&&("value"in B&&x.Z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${Z}" on "${X.constructor.name}" already defined in the metadata`,B),ae.value=B.value=z.value)),null!=B.readOnly&&(ae.readOnly=B.readOnly);const K=B.aliasOf;if(K){const F="string"==typeof K?K:K.source,$="string"==typeof K?null:!0===K.overridable;let J;ae.dependsOn=[F],ae.get=function(){let H=(0,ne.U2)(this,F);if("function"==typeof H){J||(J=F.split(".").slice(0,-1).join("."));const de=(0,ne.U2)(this,J);de&&(H=H.bind(de))}return H},ae.readOnly||(ae.set=$?function(H){void 0!==H?this._override(Z,H):this._clearOverride(Z)}:function(H){(0,te.t)(this,F,H)})}const V=B.type,P=B.types;ae.cast||(V?ae.cast=function j(B){let X=0,Z=B;if((0,T.AY)(B))return(0,T.sY)(B);for(;Array.isArray(Z)&&1===Z.length&&"string"!=typeof Z[0]&&"number"!=typeof Z[0];)Z=Z[0],X++;const z=Z;if((0,T.gB)(z))return 0===X?(0,T.i$)(z):(0,T.Iu)((0,T.i$)(z),X);if(1===X)return(0,T.rY)(z);if(X>1)return(0,T.di)(z,X);return B.from?B.from:(0,T.se)(B)}(V):P&&(ae.cast=Array.isArray(P)?(0,T.Ls)((0,T.N7)(P[0])):(0,T.N7)(P))),B.range&&(ae.cast=L(ae.cast,B.range)),(0,ie.tz)(ae,B)}}function Y(B,X,Z){const z=(0,ie.VZ)(B,Z);z.json||(z.json={});let ae=z.json;return void 0!==X&&(ae.origins||(ae.origins={}),ae.origins[X]||(ae.origins[X]={}),ae=ae.origins[X]),ae}function L(B,X){return Z=>{let z=+B(Z);return null!=X.step&&(z=Math.round(z/X.step)*X.step),null!=X.min&&(z=Math.max(X.min,z)),null!=X.max&&(z=Math.min(X.max,z)),z}}},68653:(ut,Oe,C)=>{"use strict";C.d(Oe,{r:()=>T});var x=C(77712);function T(ne,ie,te){let oe,Y;return void 0===ie||Array.isArray(ie)?(Y=ne,te=ie,oe=[void 0]):(Y=ie,oe=Array.isArray(ne)?ne:[ne]),(j,L)=>{const B=j.constructor.prototype;oe.forEach(X=>{const Z=(0,x.CJ)(j,X,Y);Z.read&&"object"==typeof Z.read||(Z.read={}),Z.read.reader=B[L],te&&(Z.read.source=(Z.read.source||[]).concat(te))})}}},61039:(ut,Oe,C)=>{"use strict";function x(T){return(ne,ie)=>{ne[ie]=T}}C.d(Oe,{c:()=>x})},76898:(ut,Oe,C)=>{"use strict";C.d(Oe,{j:()=>Y}),C(8314);var T=C(34117),ne=C(36082),ie=C(33794);const te=new Set,oe=new Set;function Y(B){return X=>{X.prototype.declaredClass=B,function L(B){const Z=(0,T.JT)(B.prototype).properties,z={};for(const ae of Object.getOwnPropertyNames(Z)){const K=Z[ae];(0,ie.OM)(K),z[ae]={enumerable:!0,configurable:!0,get:j(ae,K),set(V){const P=this.__accessor__;if(void 0!==P){if(!Object.isFrozen(this)){if(P.initialized&&K.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${ae}' of ${this.declaredClass}`);if(2===P.lifecycle&&K.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${ae}' of ${this.declaredClass}`);P.set(ae,V)}}else Object.defineProperty(this,ae,{enumerable:!0,configurable:!0,writable:!0,value:V})}}}Object.defineProperties(B.prototype,z)}(X);const Z=[],z=[];let ae=X.prototype;for(;ae;)ae.hasOwnProperty("initialize")&&!te.has(ae.initialize)&&(te.add(ae.initialize),Z.push(ae.initialize)),ae.hasOwnProperty("destroy")&&!oe.has(ae.destroy)&&(oe.add(ae.destroy),z.push(ae.destroy)),ae=Object.getPrototypeOf(ae);te.clear(),oe.clear();class K extends X{constructor(...P){if(super(...P),this.constructor===K&&"function"==typeof this.postscript){if(Z.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let F=Z.length-1;F>=0;F--)Z[F].call(this)}}),z.length){let F=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!F){F=!0;for(let $=0;$<z.length;$++)z[$].call(this)}}})}this.postscript(...P)}}}return K.__accessorMetadata__=(0,T.JT)(X.prototype),K.prototype.declaredClass=B,K}}function j(B,X){return null==X.get?function(){const Z=this.__accessor__.properties.get(B);if(void 0===Z)return;(0,ne.it)(Z);const z=this.__accessor__.store;return z.has(B)?z.get(B):Z.metadata.value}:function(){const Z=this.__accessor__.properties.get(B);if(void 0!==Z)return Z.getComputed()}}},99433:(ut,Oe,C)=>{"use strict";C.d(Oe,{c:()=>T});var x=C(77712);function T(ne,ie,te){let oe,Y;return void 0===ie?(Y=ne,oe=[void 0]):"string"!=typeof ie?(Y=ne,oe=[void 0],te=ie):(Y=ie,oe=Array.isArray(ne)?ne:[ne]),(j,L)=>{const B=j.constructor.prototype;for(const X of oe){const Z=(0,x.CJ)(j,X,Y);Z.write&&"object"==typeof Z.write||(Z.write={}),te&&(Z.write.target=te),Z.write.writer=B[L]}}}},84682:(ut,Oe,C)=>{"use strict";C.d(Oe,{Hg:()=>ae,uD:()=>Z,V7:()=>z});var x=C(14517),T=C(7093),ne=C(62208),ie=C(52323);const te=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function oe(V){return V instanceof x.Z}function Y(V){return V instanceof T.Z?Object.keys(V.items):oe(V)?(0,ie.vw)(V).keys():V?Object.keys(V):[]}function j(V,P){return V instanceof T.Z?V.items[P]:V[P]}function B(V){return V?V.declaredClass:null}function X(V,P){const F=V.diff;if(F&&"function"==typeof F)return F(V,P);const $=Y(V),J=Y(P);if(0===$.length&&0===J.length)return;if(!$.length||!J.length||function L(V,P){return!(!Array.isArray(V)||!Array.isArray(P))&&V.length!==P.length}(V,P))return{type:"complete",oldValue:V,newValue:P};const H=J.filter(se=>-1===$.indexOf(se)),de=$.filter(se=>-1===J.indexOf(se)),ee=$.filter(se=>J.indexOf(se)>-1&&j(V,se)!==j(P,se)).concat(H,de).sort(),ye=B(V);if(ye&&te.indexOf(ye)>-1&&ee.length)return{type:"complete",oldValue:V,newValue:P};let le;const ge=oe(V)&&oe(P);for(const se of ee){const Q=j(V,se),pe=j(P,se);let ue;(ge||"function"!=typeof Q&&"function"!=typeof pe)&&Q!==pe&&(null==Q&&null==pe||(ue=F&&F[se]&&"function"==typeof F[se]?F[se](Q,pe):"object"==typeof Q&&"object"==typeof pe&&B(Q)===B(pe)?X(Q,pe):{type:"complete",oldValue:Q,newValue:pe},(0,ne.pC)(ue)&&((0,ne.pC)(le)?le.diff[se]=ue:le={type:"partial",diff:{[se]:ue}})))}return le}function Z(V,P){if((0,ne.Wi)(V))return!1;const F=P.split(".");let $=V;for(const J of F){if("complete"===$.type)return!0;if("partial"!==$.type)return!1;{const H=$.diff[J];if(!H)return!1;$=H}}return!0}function z(V,P){for(const F of P)if(Z(V,F))return!0;return!1}function ae(V,P){if(!("function"==typeof V||"function"==typeof P||(0,ne.Wi)(V)&&(0,ne.Wi)(P)))return(0,ne.Wi)(V)||(0,ne.Wi)(P)||"object"==typeof V&&"object"==typeof P&&B(V)!==B(P)?{type:"complete",oldValue:V,newValue:P}:X(V,P)}},90912:(ut,Oe,C)=>{"use strict";C.d(Oe,{z8:()=>pe,rY:()=>de,Ls:()=>H,TJ:()=>V,vU:()=>L,sY:()=>ve,di:()=>le,Iu:()=>ye,q9:()=>j,i$:()=>se,N7:()=>Q,Zs:()=>Y,se:()=>J,AY:()=>me,gB:()=>ge,V5:()=>ue}),C(8314);var T=C(63290),ne=C(88159);const ie=T.Z.getLogger("esri.core.Accessor");function te(he){return null==he?he:new Date(he)}function oe(he){return null==he?he:!!he}function Y(he){return null==he?he:he.toString()}function j(he){return null==he?he:(he=parseFloat(he),isNaN(he)?0:he)}function L(he){return null==he?he:Math.round(parseFloat(he))}function B(he){return he&&he.constructor&&void 0!==he.constructor.__accessorMetadata__}function X(he,De){return null!=De&&he&&!(De instanceof he)}function Z(he){return he&&"isCollection"in he}function z(he){return he&&he.Type?"function"==typeof he.Type?he.Type:he.Type.base:null}function K(he,De){return!!B(De)&&(ie.error("Accessor#set","Assigning an instance of '"+(De.declaredClass||"unknown")+"' which is not a subclass of '"+P(he)+"'"),!0)}function V(he,De){return null==De?De:Z(he)?function ae(he,De){if(!De||!De.constructor||!Z(De.constructor))return K(he,De)?De:new he(De);const xe=z(he.prototype.itemType),Pe=z(De.constructor.prototype.itemType);return xe?Pe?xe===Pe?De:xe.prototype.isPrototypeOf(Pe.prototype)?new he(De):(K(he,De),De):new he(De):De}(he,De):X(he,De)?K(he,De)?De:new he(De):De}function P(he){return he&&he.prototype&&he.prototype.declaredClass||"unknown"}const F=new WeakMap;function $(he){switch(he){case Number:return j;case pe:return L;case Boolean:return oe;case String:return Y;case Date:return te;default:return(0,ne.s1)(F,he,()=>V.bind(null,he))}}function J(he,De){const xe=$(he);return 1===arguments.length?xe:xe(De)}function H(he,De,xe){return 1===arguments.length?H.bind(null,he):De&&(Array.isArray(De)?De.map(Pe=>he(Pe,xe)):[he(De,xe)])}function de(he,De){return 1===arguments.length?H(J.bind(null,he)):H(J.bind(null,he),De)}function ee(he,De,xe){return 0!==De&&Array.isArray(xe)?xe.map(Pe=>ee(he,De-1,Pe)):he(xe)}function ye(he,De,xe){if(2===arguments.length)return ye.bind(null,he,De);if(!xe)return xe;let Pe=De,je=xe=ee(he,De,xe);for(;Pe>0&&Array.isArray(je);)Pe--,je=je[0];if(void 0!==je)for(let rt=0;rt<Pe;rt++)xe=[xe];return xe}function le(he,De,xe){return 2===arguments.length?ye(J.bind(null,he),De):ye(J.bind(null,he),De,xe)}function ge(he){return!!Array.isArray(he)&&!he.some(De=>{const xe=typeof De;return!("string"===xe||"number"===xe||"function"===xe&&he.length>1)})}function se(he,De){if(2===arguments.length)return se(he).call(null,De);const xe=new Set,Pe=he.filter(Ce=>"function"!=typeof Ce),je=he.filter(Ce=>"function"==typeof Ce);for(const Ce of he)"string"!=typeof Ce&&"number"!=typeof Ce||xe.add(Ce);let rt=null,Le=null;return(Ce,Te)=>{if(null==Ce)return Ce;const Ye=typeof Ce,ct="string"===Ye||"number"===Ye;return ct&&(xe.has(Ce)||je.some(Ae=>"string"===Ye&&Ae===String||"number"===Ye&&Ae===Number))||"object"===Ye&&je.some(Ae=>!X(Ce,Ae))?Ce:(ct&&Pe.length?(rt||(rt=Pe.map(Ae=>"string"==typeof Ae?`'${Ae}'`:`${Ae}`).join(", ")),ie.error("Accessor#set",`'${Ce}' is not a valid value for this property, only the following values are valid: ${rt}`)):"object"==typeof Ce&&je.length?(Le||(Le=je.map(Ae=>P(Ae)).join(", ")),ie.error("Accessor#set",`'${Ce}' is not a valid value for this property, value must be one of ${Le}`)):ie.error("Accessor#set",`'${Ce}' is not a valid value for this property`),Te&&(Te.valid=!1),null)}}function Q(he,De){if(2===arguments.length)return Q(he).call(null,De);const xe={},Pe=[],je=[];for(const Te in he.typeMap){const Ye=he.typeMap[Te];xe[Te]=J(Ye),Pe.push(P(Ye)),je.push(Te)}const rt=()=>`'${Pe.join("', '")}'`,Le=()=>`'${je.join("', '")}'`,Ce="string"==typeof he.key?Te=>Te[he.key]:he.key;return Te=>{if(he.base&&!X(he.base,Te)||null==Te)return Te;const Ye=Ce(Te)||he.defaultKeyValue,ct=xe[Ye];if(!ct)return ie.error("Accessor#set",`Invalid property value, value needs to be one of ${rt()}, or a plain object that can autocast (having .type = ${Le()})`),null;if(!X(he.typeMap[Ye],Te))return Te;if("string"==typeof he.key&&!B(Te)){const Ae={};for(const Qe in Te)Qe!==he.key&&(Ae[Qe]=Te[Qe]);return ct(Ae)}return ct(Te)}}class pe{}const ue={native:he=>({type:"native",value:he}),array:he=>({type:"array",value:he}),oneOf:he=>({type:"one-of",values:he})};function me(he){if(!he||!("type"in he))return!1;switch(he.type){case"native":case"array":case"one-of":return!0}return!1}function ve(he){switch(he.type){case"native":return J(he.value);case"array":return H(ve(he.value));case"one-of":return function fe(he){let De=null;return(xe,Pe)=>ce(xe,he)?xe:(null==De&&(De=Me(he)),ie.error("Accessor#set",`Invalid property value, value needs to be of type ${De}`),Pe&&(Pe.valid=!1),null)}(he);default:return null}}function Me(he){switch(he.type){case"native":switch(he.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case pe:return"integer";case Date:return"date";default:return P(he.value)}case"array":return`array of ${Me(he.value)}`;case"one-of":{const De=he.values.map(xe=>Me(xe));return`one of ${De.slice(0,De.length-1)} or ${De[De.length-1]}`}}return"unknown"}function ce(he,De){if(null==he)return!0;switch(De.type){case"native":switch(De.value){case Number:case pe:return"number"==typeof he;case Boolean:return"boolean"==typeof he;case String:return"string"==typeof he}return he instanceof De.value;case"array":return!!Array.isArray(he)&&!he.some(xe=>!ce(xe,De.value));case"one-of":return De.values.some(xe=>ce(he,xe))}}},33794:(ut,Oe,C)=>{"use strict";C.d(Oe,{hk:()=>X,HS:()=>L,Ah:()=>B,OM:()=>P});var x=C(90912),ne=C(383);function te(F){F.name&&(F.read&&"object"==typeof F.read?void 0===F.read.source&&(F.read.source=F.name):F.read={source:F.name},F.write&&"object"==typeof F.write?void 0===F.write.target&&(F.write.target=F.name):F.write={target:F.name})}function oe(F){"boolean"==typeof F.read?F.read={enabled:F.read}:"function"==typeof F.read?F.read={enabled:!0,reader:F.read}:F.read&&"object"==typeof F.read&&void 0===F.read.enabled&&(F.read.enabled=!0)}function Y(F){"boolean"==typeof F.write?F.write={enabled:F.write}:"function"==typeof F.write?F.write={enabled:!0,writer:F.write}:F.write&&"object"==typeof F.write&&void 0===F.write.enabled&&(F.write.enabled=!0)}var j=C(23025);function L(F,$){return X(F,"read",$)}function B(F,$){return X(F,"write",$)}function X(F,$,J){let H=F&&F.json;if(F&&F.json&&F.json.origins&&J){const de=F.json.origins[J.origin];de&&("any"===$||$ in de)&&(H=de)}return H}function ae(F){return F.type?K(F):V(F)}function K(F){if(!F.type)return;let $=0,J=F.type;for(;Array.isArray(J)&&!(0,x.gB)(J);)J=J[0],$++;return{type:J,ndimArray:$}}function V(F){if(!F.types)return;let $=0,J=F.types;for(;Array.isArray(J);)J=J[0],$++;return{types:J,ndimArray:$}}function P(F){(function ie(F){if(F.json||(F.json={}),oe(F.json),Y(F.json),te(F.json),F.json.origins)for(const $ in F.json.origins)oe(F.json.origins[$]),Y(F.json.origins[$]),te(F.json.origins[$]);return!0})(F)&&(function T(F){if(F.json&&F.json.origins){const $=F.json.origins,J={"web-document":["web-scene","web-map"]};for(const H in J)if($[H]){const de=$[H];J[H].forEach(ee=>{$[ee]=de}),delete $[H]}}}(F),function Z(F){const $=function z(F){return F.json.types?V(F.json):F.type?K(F):V(F)}(F);if(F.json.origins)for(const J in F.json.origins){const H=F.json.origins[J],de=H.types?ae(H):$;(0,ne.U)(de,H,!1),H.types&&!H.write&&F.json.write&&F.json.write.enabled&&(H.write=Ot({},F.json.write)),(0,j.U)(de,H)}(0,ne.U)($,F.json,!0),(0,j.U)($,F.json)}(F))}},383:(ut,Oe,C)=>{"use strict";C.d(Oe,{U:()=>Y,d:()=>j});var x=C(63290),T=C(94113),ne=C(14889),ie=C(34117),te=C(94056);const oe=x.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Y(J,H,de){var ee,ye;J&&(!de&&!H.read||null!=(ee=H.read)&&ee.reader||!1===(null==(ye=H.read)?void 0:ye.enabled)||function K(J){return"types"in J?P(J.types):V(J.type)}(J)&&(0,T.RB)("read.reader",j(J),H))}function j(J){var H;const de=null!=(H=J.ndimArray)?H:0;if(de>1)return function Z(J){var H;const de=L(J),ee=X.bind(null,de),ye=null!=(H=J.ndimArray)?H:0;return(le,ge,se)=>{if(null==le)return le;le=ee(le,se,ye);let Q=ye,pe=le;for(;Q>0&&Array.isArray(pe);)Q--,pe=pe[0];if(void 0!==pe)for(let ue=0;ue<Q;ue++)le=[le];return le}}(J);if(1===de)return z(J);if("type"in J&&ae(J.type)){var ee,ye;const le=null==(ee=J.type.prototype)||null==(ye=ee.itemType)?void 0:ye.Type,ge=z("function"==typeof le?{type:le}:{types:le});return(se,Q,pe)=>{const ue=ge(se,Q,pe);return ue&&new J.type(ue)}}return L(J)}function L(J){return"type"in J?function B(J){return J.prototype.read?(H,de,ee)=>{if(null==H)return H;const ye=typeof H;if("object"!==ye)return void oe.error(`Expected JSON value of type 'object' to deserialize type '${J.prototype.declaredClass}', but got '${ye}'`);const le=new J;return le.read(H,ee),le}:J.fromJSON}(J.type):function F(J){var H;let de=null;const ee=null!=(H=J.errorContext)?H:"type";return(ye,le,ge)=>{if(null==ye)return ye;const se=typeof ye;if("object"!==se)return void oe.error(`Expected JSON value of type 'object' to deserialize, but got '${se}'`);de||(de=function $(J){const H={};for(const ye in J.typeMap){var de,ee;const le=J.typeMap[ye],ge=(0,ie.JT)(le.prototype);if("function"==typeof J.key)continue;const se=ge.properties[J.key];if(!se)continue;null!=(de=se.json)&&de.type&&Array.isArray(se.json.type)&&1===se.json.type.length&&"string"==typeof se.json.type[0]&&(H[se.json.type[0]]=le);const Q=null==(ee=se.json)?void 0:ee.write;if(!Q||!Q.writer){H[ye]=le;continue}const pe=Q.target,ue="string"==typeof pe?pe:J.key,me={};Q.writer(ye,me,ue),me[ue]&&(H[me[ue]]=le)}return H}(J));const Q=J.key;if("string"!=typeof Q)return;const pe=ye[Q],ue=pe?de[pe]:J.defaultKeyValue?J.typeMap[J.defaultKeyValue]:void 0;if(!ue){const ve=`Type '${pe||"unknown"}' is not supported`;return ge&&ge.messages&&ye&&ge.messages.push(new ne.Z(`${ee}:unsupported`,ve,{definition:ye,context:ge})),void oe.error(ve)}const me=new ue;return me.read(ye,ge),me}}(J.types)}function X(J,H,de,ee){return 0!==ee&&Array.isArray(H)?H.map(ye=>X(J,ye,de,ee-1)):J(H,void 0,de)}function z(J){const H=L(J);return(de,ee,ye)=>{if(null==de)return de;if(Array.isArray(de)){const ge=[];for(const se of de){const Q=H(se,void 0,ye);void 0!==Q&&ge.push(Q)}return ge}const le=H(de,void 0,ye);return void 0!==le?[le]:void 0}}function ae(J){if(!(0,te.u)(J))return!1;const H=J.prototype.itemType;return!(!H||!H.Type)&&("function"==typeof H.Type?V(H.Type):P(H.Type))}function V(J){return!Array.isArray(J)&&!!J&&J.prototype&&("read"in J.prototype||"fromJSON"in J||ae(J))}function P(J){for(const H in J.typeMap)if(!V(J.typeMap[H]))return!1;return!0}},94056:(ut,Oe,C)=>{"use strict";function x(T){return!!T&&T.prototype&&T.prototype.declaredClass&&0===T.prototype.declaredClass.indexOf("esri.core.Collection")}C.d(Oe,{u:()=>x})},23025:(ut,Oe,C)=>{"use strict";C.d(Oe,{U:()=>oe,k:()=>Z});var x=C(26584),T=C(63290),ne=C(94113),ie=C(94056);const te=T.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function oe(V,P){var F;if(!P.write||P.write.writer||!1===P.write.enabled&&!P.write.overridePolicy)return;const $=null!=(F=null==V?void 0:V.ndimArray)?F:0;P.write.writer=V&&(1===$||"type"in V&&(0,ie.u)(V.type))?z:$>1?function K(V){return function(P,F,$,J){let H;if(null===P)H=null;else{H=ae(P,J,V);let de=V,ee=H;for(;de>0&&Array.isArray(ee);)de--,ee=ee[0];if(void 0!==ee)for(let ye=0;ye<de;ye++)H=[H]}(0,ne.RB)($,H,F)}}($):P.types?Array.isArray(P.types)?function L(V){return(P,F,$,J)=>P&&Array.isArray(P)?B(P.filter(H=>j(H,V,J)),F,$,J):B(P,F,$,J)}(P.types[0]):function Y(V){return(P,F,$,J)=>P?j(P,V,J)?B(P,F,$,J):void 0:B(P,F,$,J)}(P.types):B}function j(V,P,F){for(const H in P.typeMap)if(V instanceof P.typeMap[H])return!0;if(null!=F&&F.messages){var $,J;const H=null!=($=P.errorContext)?$:"type",de=`Values of type '${null!=(J="function"!=typeof P.key?V[P.key]:V.declaredClass)?J:"Unknown"}' cannot be written`;F&&F.messages&&V&&F.messages.push(new x.Z(`${H}:unsupported`,de,{definition:V,context:F})),te.error(de)}return!1}function B(V,P,F,$){(0,ne.RB)(F,X(V,$),P)}function X(V,P){return V&&"function"==typeof V.write?V.write({},P):V&&"function"==typeof V.toJSON?V.toJSON():"number"==typeof V?Z(V):V}function Z(V){return V===-1/0?-Number.MAX_VALUE:V===1/0?Number.MAX_VALUE:isNaN(V)?null:V}function z(V,P,F,$){let J;null===V?J=null:V&&"function"==typeof V.map?(J=V.map(H=>X(H,$)),"function"==typeof J.toArray&&(J=J.toArray())):J=[X(V,$)],(0,ne.RB)(F,J,P)}function ae(V,P,F){return 0!==F&&Array.isArray(V)?V.map($=>ae($,P,F-1)):X(V,P)}},34595:(ut,Oe,C)=>{"use strict";C.d(Oe,{Gg:()=>oe,U2:()=>te,$z:()=>ie});var x=C(52323);function T(Y,j){const L="?"===Y[Y.length-1]?Y.slice(0,-1):Y;if(null!=j.getItemAt||Array.isArray(j)){const X=parseInt(L,10);if(!isNaN(X))return Array.isArray(j)?j[X]:j.getItemAt(X)}const B=(0,x.vw)(j);return(0,x.b6)(B,L)?B.get(L):j[L]}function ne(Y,j,L){if(null==Y)return Y;const B=T(j[L],Y);return!B&&L<j.length-1?void 0:L===j.length-1?B:ne(B,j,L+1)}function ie(Y,j,L=0){return"string"==typeof j&&-1===j.indexOf(".")?T(j,Y):ne(Y,(0,x.NI)(j),L)}function te(Y,j){return ie(Y,j)}function oe(Y,j){return void 0!==ie(j,Y)}},34117:(ut,Oe,C)=>{"use strict";C.d(Oe,{JT:()=>te,VZ:()=>Y,tz:()=>B});var x=C(58817),T=C(62208),ne=C(52323);class ie{constructor(V){this.autoDestroy=!1,this.properties=V}}function te(K){let V=K.constructor.__accessorMetadata__;const P=Object.prototype.hasOwnProperty.call(K.constructor,"__accessorMetadata__");if(V){if(!P){const F=Object.create(V.properties),$=V.autoDestroy;for(const J in F)F[J]=(0,x.d9)(F[J]);V=new ie(F),V.autoDestroy=$,Object.defineProperty(K.constructor,"__accessorMetadata__",{value:V,enumerable:!1,configurable:!0,writable:!0})}}else V=new ie({}),Object.defineProperty(K.constructor,"__accessorMetadata__",{value:V,enumerable:!1,configurable:!0,writable:!0});return(0,T.j0)(K.constructor.__accessorMetadata__)}function Y(K,V){const P=function oe(K){return te(K).properties}(K);let F=P[V];return F||(F=P[V]={}),F}function B(K,V){return(0,ne.TS)(K,V,Z)}const X=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Z(K){return X.test(K)?"replace":"merge"}},52489:(ut,Oe,C)=>{"use strict";C.d(Oe,{D:()=>T});var x=C(22558);function T(ne){ne&&ne.writtenProperties&&ne.writtenProperties.forEach(ie=>{const te=ie.target;ie.newOrigin&&ie.oldOrigin!==ie.newOrigin&&(0,x.l)(te)&&te.updateOrigin(ie.propName,ie.newOrigin)})}},29338:(ut,Oe,C)=>{"use strict";C.d(Oe,{ij:()=>L,$Z:()=>B});var x=C(34595),T=C(52323),ne=C(33794);function ie(X,Z,z){if(!X||!X.read||!1===X.read.enabled||!X.read.source)return!1;const ae=X.read.source;if("string"==typeof ae){if(ae===Z||ae.indexOf(".")>-1&&0===ae.indexOf(Z)&&(0,x.Gg)(ae,z))return!0}else for(const K of ae)if(K===Z||K.indexOf(".")>-1&&0===K.indexOf(Z)&&(0,x.Gg)(K,z))return!0;return!1}function oe(X,Z,z,ae,K){let V=(0,ne.HS)(Z[z],K);(function te(X){return X&&(!X.read||!1!==X.read.enabled&&!X.read.source)})(V)&&(X[z]=!0);for(const P of Object.getOwnPropertyNames(Z))V=(0,ne.HS)(Z[P],K),ie(V,z,ae)&&(X[P]=!0)}function Y(X,Z,z,ae){const V=(0,ne.hk)(z.metadatas[Z],"any",ae),P=V&&V.default;if(void 0===P)return;const F="function"==typeof P?P.call(X,Z,ae):P;void 0!==F&&z.set(Z,F)}const j={origin:"service"};function L(X,Z,z=j){if(!Z||"object"!=typeof Z)return;const ae=(0,T.vw)(X),K=ae.metadatas,V={};for(const P of Object.getOwnPropertyNames(Z))oe(V,K,P,Z,z);ae.setDefaultOrigin(z.origin);for(const P of Object.getOwnPropertyNames(V)){const F=(0,ne.HS)(K[P],z).read,$=F&&F.source;let J;J=$&&"string"==typeof $?(0,x.$z)(Z,$):Z[P],F&&F.reader&&(J=F.reader.call(X,J,Z,z)),void 0!==J&&ae.set(P,J)}if(!z||!z.ignoreDefaults)for(const P of Object.getOwnPropertyNames(K))V[P]||Y(X,P,ae,z);ae.setDefaultOrigin("user")}function B(X,Z,z,ae=j){var K;const V=nn(Ot({},ae),{messages:[]});z(V),null==(K=V.messages)||K.forEach(P=>{"warning"!==P.type||X.loaded?ae&&ae.messages&&ae.messages.push(P):X.loadWarnings.push(P)})}},82255:(ut,Oe,C)=>{"use strict";C.d(Oe,{t:()=>ie}),C(8314);var T=C(63290),ne=C(34595);function ie(te,oe,Y){if(te&&oe)if("object"==typeof oe)for(const j of Object.getOwnPropertyNames(oe))ie(te,j,oe[j]);else{if(-1!==oe.indexOf(".")){const j=oe.split("."),L=j.splice(j.length-1,1)[0];return void ie((0,ne.U2)(te,j),L,Y)}te[oe]=Y}}T.Z.getLogger("esri.core.accessorSupport.set")},36082:(ut,Oe,C)=>{"use strict";C.d(Oe,{mS:()=>V,LJ:()=>X,gb:()=>Z,it:()=>j,GF:()=>F}),C(8314);var T=C(63290),ne=C(52323);let ie,te=[];const oe=T.Z.getLogger("esri.core.Accessor");function j(J){void 0!==ie&&ie.onObservableAccessed(J)}let L=!1,B=!1;function X(J,H,de){if(L)return z(J,H,de);ae(J);const ee=H.call(de);return K(),ee}function Z(J,H){return X(void 0,J,H)}function z(J,H,de){const ee=L;L=!0,ae(J);let ye=null;try{ye=H.call(de)}catch(le){B&&oe.error(le)}return K(),L=ee,ye}function ae(J){ie=J,te.push(J)}function K(){const J=te.pop();ie=te.length>0?te[te.length-1]:void 0,void 0!==J&&J.onTrackingEnd()}function V(J,H){if(32&H.flags)return;const de=B;B=!1,64&H.flags?z(H,H.metadata.get,J):F(J,H),B=de}const P=[];function F(J,H){128&H.flags||(H.flags|=128,z(H,()=>{const de=H.metadata.dependsOn||P;for(const ee of de)if("string"==typeof ee&&-1===ee.indexOf("."))$(J,ee,!1);else{const ye=(0,ne.NI)(ee);for(let le=0,ge=J;le<ye.length&&null!=ge&&"object"==typeof ge;++le)ge=$(ge,ye[le],le!==ye.length-1)}}),H.flags&=-129)}function $(J,H,de){const ee="?"===H[H.length-1]?H.slice(0,-1):H;if(null!=J.getItemAt||Array.isArray(J)){const ge=parseInt(ee,10);if(!isNaN(ge))return Array.isArray(J)?J[ge]:J.getItemAt(ge)}const ye=(0,ne.vw)(J),le=null==ye?void 0:ye.properties.get(ee);return le&&(j(le),V(J,le)),de?J[ee]:void 0}},12196:(ut,Oe,C)=>{"use strict";C.d(Oe,{X:()=>T});var x=C(85931);class T{constructor(ie,te){this._observers=ie,this._observer=te}remove(){(0,x.Od)(this._observers,this._observer)}}},819:(ut,Oe,C)=>{"use strict";C.d(Oe,{M:()=>x});class x{constructor(ne){this._notify=ne,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const ne=this._invalidCount;if(1===ne)return this._invalidCount=0,void this._notify();this._invalidCount=ne>0?ne-1:0}onObservableAccessed(ne){this._accessed.includes(ne)||this._accessed.push(ne)}onTrackingEnd(){const ne=this._handles,ie=this._accessed;for(let te=0;te<ie.length;++te)ne.push(ie[te].observe(this));ie.length=0}clear(){const ne=this._handles;for(let ie=0;ie<ne.length;++ie)ne[ie].remove();ne.length=0}}},21352:(ut,Oe,C)=>{"use strict";C.d(Oe,{EH:()=>Y,U5:()=>te,Xz:()=>oe});var x=C(36082),T=C(819);let ne=!1;const ie=[];function te(B,X){let Z=new T.M(function K(){if(!Z||ae)return;if(ne)return void j(K);const P=z;Z.clear(),ne=!0,ae=!0,z=(0,x.LJ)(Z,B),ae=!1,ne=!1,X(z,P),L()}),z=null,ae=!1;return ae=!0,z=(0,x.LJ)(Z,B),ae=!1,{remove:function V(){Z&&(Z.destroy(),Z=null,z=null)}}}function oe(B,X){let Z=new T.M(function ae(){X(z,V)}),z=null;function V(){return Z?(Z.clear(),z=(0,x.LJ)(Z,B),z):null}return V(),{remove:function K(){Z&&(Z.destroy(),Z=null),z=null}}}function Y(B){let X=new T.M(function z(){X&&!Z&&(ne?j(z):(X.clear(),ne=!0,Z=!0,(0,x.LJ)(X,B),Z=!1,ne=!1,L()))}),Z=!1;return Z=!0,(0,x.LJ)(X,B),Z=!1,{remove:function ae(){X&&(X.destroy(),X=null)}}}function j(B){ie.includes(B)||ie.unshift(B)}function L(){for(;ie.length;)ie.pop()()}},52323:(ut,Oe,C)=>{"use strict";C.d(Oe,{vw:()=>ie,b6:()=>te,TS:()=>Y,IH:()=>K,Qc:()=>ae,NI:()=>B});var x=C(54024),T=C(58817),ne=C(62208);function ie(V){return V?V.__accessor__?V.__accessor__:V.propertyInvalidated?V:null:null}function te(V,P){return null!=V&&V.metadatas&&null!=V.metadatas[P]}function Y(V,P,F){return j(V,P,F?{policy:F,path:""}:null)}function j(V,P,F){return P?Object.keys(P).reduce(function($,J){let H=null,de="merge";if(F&&(H=F.path?`${F.path}.${J}`:J,de=F.policy(H)),"replace"===de)return $[J]=P[J],$;if(void 0===$[J])return $[J]=(0,T.d9)(P[J]),$;let ee=$[J],ye=P[J];if(ee===ye)return $;if(Array.isArray(ye)||Array.isArray($))ee=$[J]=ee?Array.isArray(ee)?ee.concat():[ee]:[],ye&&(Array.isArray(ye)||(ye=[ye]),ye.forEach(le=>{-1===ee.indexOf(le)&&ee.push(le)}));else if(ye&&"object"==typeof ye)if(F){const le=F.path;F.path=(0,ne.j0)(H),$[J]=j(ee,ye,F),F.path=le}else $[J]=j(ee,ye,null);else $.hasOwnProperty(J)&&!P.hasOwnProperty(J)||($[J]=ye);return $},V||{}):V}function B(V){return Array.isArray(V)?V:V.split(".")}function X(V){return V.indexOf(",")>-1?V.split(",").map(P=>P.trim()):[V.trim()]}function ae(V,P,F,$){const J=function Z(V){if(Array.isArray(V)){const P=[];for(const F of V)P.push(...X(F));return P}return X(V)}(P);if(1!==J.length){const H=J.map(de=>$(V,de,F));return(0,x.AL)(H)}return $(V,J[0],F)}function K(V){let P=!1;return()=>{P||(P=!0,V())}}},45262:(ut,Oe,C)=>{"use strict";C.d(Oe,{BT:()=>F,YP:()=>le,aQ:()=>Q});var x=C(35575),T=C(58817),ne=C(62208),ie=C(27899),oe=C(50618),Y=C(86236),j=C(34595),L=C(21352),B=C(52323);class X{constructor(){this.uid=(0,Y.D)(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(me,ve,fe,Me,ce){return this.pool.acquire(0,me,ve,fe,Me,ce,T.fS)}static acquireTracked(me,ve,fe,Me){return this.pool.acquire(1,me,ve,fe,null,null,Me)}notify(me,ve){0===this.type?this.callback.call(this.target,me,ve,this.path,this.target):this.callback.call(null,me,ve)}acquire(me,ve,fe,Me,ce,he,De){this.uid=(0,Y.D)(),this.removed=!1,this.type=me,this.oldValue=ve,this.callback=fe,this.getValue=Me,this.target=ce,this.path=he,this.equals=De}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=(0,Y.D)(),this.removed=!0}}X.pool=new class te extends ie.Z{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=(0,ne.Bd)(this._set)}acquire(...me){const ve=super.acquire(...me);return this._set.delete(ve),ve}release(me){me&&!this._set.has(me)&&(super.release(me),this._set.add(me))}_dispose(me){this._set.delete(me),super._dispose(me)}}(X);const Z=new x.Z,z=new Set;let ae;function K(ue){z.delete(ue),z.add(ue),ae||(ae=(0,oe.Os)($))}function V(ue){if(ue.removed)return;const me=ue.oldValue,ve=ue.getValue();ue.equals(me,ve)||(ue.oldValue=ve,ue.notify(ve,me))}function F(ue){for(const me of z.values())me.target===ue&&(me.removed=!0)}function $(){let ue=10;for(;ae&&ue--;){ae=null;const me=J(),ve=Z.acquire();for(const fe of me){const Me=fe.uid;V(fe),Me===fe.uid&&fe.removed&&ve.push(fe)}for(const fe of z)fe.removed&&(ve.push(fe),z.delete(fe));for(const fe of ve)X.pool.release(fe);Z.release(ve),Z.release(me),H.forEach(fe=>fe())}}function J(){const ue=Z.acquire();ue.length=z.size;let me=0;for(const ve of z)ue[me]=ve,++me;return z.clear(),ue}const H=new Set;function le(ue,me,ve,fe=!1){return!ue.__accessor__||ue.__accessor__.destroyed?{remove(){}}:fe?function ye(ue,me,ve){const fe=(0,B.Qc)(ue,me,ve,(Me,ce,he)=>{let De=!1;return(0,L.U5)(()=>(0,j.$z)(Me,ce),(xe,Pe)=>{Me.__accessor__.destroyed?fe.remove():De||(De=!0,(0,T.fS)(Pe,xe)||he.call(Me,xe,Pe,ce,Me),De=!1)})});return fe}(ue,me,ve):function ee(ue,me,ve){let fe=(0,B.Qc)(ue,me,ve,(Me,ce,he)=>{let De,xe,Pe=(0,L.Xz)(()=>(0,j.$z)(Me,ce),(je,rt)=>{Me.__accessor__.destroyed||De&&De.uid!==xe?fe.remove():(De||(De=X.acquireUntracked(je,he,rt,Me,ce),xe=De.uid),K(De))});return{remove:(0,B.IH)(()=>{Pe.remove(),De&&(De.uid!==xe||De.removed||(De.removed=!0,K(De)),De=null),fe=Pe=null})}});return fe}(ue,me,ve)}function Q(ue,me,ve=!1,fe=T.fS){return ve?function se(ue,me,ve){let fe=!1;return(0,L.U5)(ue,(Me,ce)=>{fe||(fe=!0,ve(ce,Me)||me(Me,ce),fe=!1)})}(ue,me,fe):function ge(ue,me,ve){let fe,Me,ce=(0,L.Xz)(ue,(he,De)=>{fe&&fe.uid!==Me?ce.remove():(fe||(fe=X.acquireTracked(he,me,De,ve),Me=fe.uid),K(fe))});return{remove:(0,B.IH)(()=>{ce.remove(),fe&&(fe.uid!==Me||fe.removed||(fe.removed=!0,K(fe)),fe=null),ce=null})}}(ue,me,fe)}},36054:(ut,Oe,C)=>{"use strict";C.d(Oe,{df:()=>X,cW:()=>Z});var x=C(85931),T=C(26584),ne=C(63290),ie=C(31283),te=C(52323),oe=C(33794);const Y=ne.Z.getLogger("esri.core.accessorSupport.write");function j(z,ae,K,V,P){var F,$;const J={};return null==(F=ae.write)||null==($=F.writer)||$.call(z,V,J,K,P),J}function L(z,ae,K,V,P,F){if(!V||!V.write)return!1;const $=z.get(K);if(!P&&V.write.overridePolicy){const J=V.write.overridePolicy.call(z,$,K,F);void 0!==J&&(P=J)}if(P||(P=V.write),!P||!1===P.enabled)return!1;if((null===$&&!P.allowNull&&!P.writerEnsuresNonNull||void 0===$)&&P.isRequired){const J=new T.Z("web-document-write:property-required",`Missing value for required property '${K}' on '${z.declaredClass}'`,{propertyName:K,target:z});return J&&F&&F.messages?F.messages.push(J):J&&!F&&Y.error(J.name,J.message),!1}return!(void 0===$||null===$&&!P.allowNull&&!P.writerEnsuresNonNull||function B(z,ae,K,V,P){const F=V.default;if(void 0===F)return!1;if(null!=V.defaultEquals)return V.defaultEquals(P);if("function"==typeof F){if(Array.isArray(P)){const $=F.call(z,ae,K);return(0,x.fS)($,P)}return!1}return F===P}(z,K,F,V,$)||void 0===V.default&&!P.ignoreOrigin&&F&&F.origin&&ae.store.originOf(K)<(0,ie.M9)(F.origin))}function X(z,ae,K,V){const P=(0,te.vw)(z),$=(0,oe.Ah)(P.metadatas[ae],V);return!!$&&L(z,P,ae,$,K,V)}function Z(z,ae,K){if(z&&"function"==typeof z.toJSON&&(!z.toJSON.isDefaultToJSON||!z.write))return(0,te.TS)(ae,z.toJSON());const V=(0,te.vw)(z),P=V.metadatas;for(const J in P){const H=(0,oe.Ah)(P[J],K);if(!L(z,V,J,H,void 0,K))continue;const de=z.get(J),ee=j(z,H,H.write&&"string"==typeof H.write.target?H.write.target:J,de,K);var F,$;Object.keys(ee).length>0&&(ae=(0,te.TS)(ae,ee),null!=K&&null!=(F=K.resources)&&null!=($=F.pendingOperations)&&$.length&&Promise.all(K.resources.pendingOperations).then(()=>(0,te.TS)(ae,ee)),K&&K.writtenProperties&&K.writtenProperties.push({target:z,propName:J,oldOrigin:(0,ie.Wm)(V.store.originOf(J)),newOrigin:K.origin}))}return ae}},85931:(ut,Oe,C)=>{"use strict";C.d(Oe,{SO:()=>J,a9:()=>K,fS:()=>L,xH:()=>$,cq:()=>de,zG:()=>Z,w6:()=>V,Od:()=>ue,e$:()=>ee,FY:()=>le});var x=C(62208),T=C(4619);function L(me,ve,fe){if((0,x.Wi)(me)&&(0,x.Wi)(ve))return!0;if((0,x.Wi)(me)||(0,x.Wi)(ve)||me.length!==ve.length)return!1;if(fe){for(let Me=0;Me<me.length;Me++)if(!fe(me[Me],ve[Me]))return!1}else for(let Me=0;Me<me.length;Me++)if(me[Me]!==ve[Me])return!1;return!0}function Z(me){return me&&"number"==typeof me.length}const ae=!!Array.prototype.fill;function K(me,ve){if(ae)return new Array(me).fill(ve);const fe=new Array(me);for(let Me=0;Me<me;Me++)fe[Me]=ve;return fe}function V(me,ve){void 0===ve&&(ve=me,me=0);const fe=new Array(ve-me);for(let Me=me;Me<ve;Me++)fe[Me-me]=Me;return fe}function $(me){return me.reduce((ve,fe)=>ve.concat(fe||[]),[])}class J{constructor(){this.last=0}}const H=new J;function de(me,ve,fe,Me){Me=Me||H;const ce=Math.max(0,Me.last-10);for(let De=ce;De<fe;++De)if(me[De]===ve)return Me.last=De,De;const he=Math.min(ce,fe);for(let De=0;De<he;++De)if(me[De]===ve)return Me.last=De,De;return-1}function ee(me,ve,fe,Me){const ce=null==fe?me.length:fe,he=de(me,ve,ce,Me);if(-1!==he)return me[he]=me[ce-1],null==fe&&me.pop(),ve}const ye=new Set;function le(me,ve,fe=me.length,Me=ve.length,ce,he){if(0===Me||0===fe)return fe;ye.clear();for(let xe=0;xe<Me;++xe)ye.add(ve[xe]);ce=ce||H;const De=Math.max(0,ce.last-10);for(let xe=De;xe<fe;++xe)if(ye.has(me[xe])&&(he&&he.push(me[xe]),ye.delete(me[xe]),me[xe]=me[fe-1],--fe,--xe,0===ye.size||0===fe))return ye.clear(),fe;for(let xe=0;xe<De;++xe)if(ye.has(me[xe])&&(he&&he.push(me[xe]),ye.delete(me[xe]),me[xe]=me[fe-1],--fe,--xe,0===ye.size||0===fe))return ye.clear(),fe;return ye.clear(),fe}function ue(me,ve){const fe=me.indexOf(ve);return-1!==fe?(me.splice(fe,1),ve):null}new T.Z},59213:(ut,Oe,C)=>{"use strict";C.d(Oe,{Ed:()=>ne,UI:()=>ie,q6:()=>te,mt:()=>oe});var x=C(62208),T=C(10699);function ne(j,L,B){return(0,T.as)(j.map((X,Z)=>L.apply(B,[X,Z])))}function ie(j,L,B){return(0,T.as)(j.map((X,Z)=>L.apply(B,[X,Z]))).then(X=>X.map(Z=>Z.value))}function te(j){return(0,x.Wi)(j)?(0,T.DB)():j.then(L=>({ok:!0,value:L})).catch(L=>({ok:!1,error:L}))}function oe(j){return j.then(L=>({ok:!0,value:L})).catch(L=>((0,T.r9)(L),{ok:!1,error:L}))}},84244:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>T});const T=function x(ne){return{setTimeout:(ie,te)=>{const oe=ne.setTimeout(ie,te);return{remove:()=>ne.clearTimeout(oe)}}}}(globalThis)},89726:(ut,Oe,C)=>{"use strict";C.d(Oe,{R:()=>ne,Z:()=>T});var x=C(7093);function T(te,oe,Y=x.Z){return oe||(oe=new Y),oe===te||(oe.removeAll(),function ie(te){return te&&(Array.isArray(te)||"items"in te&&Array.isArray(te.items))}(te)?oe.addMany(te):te&&oe.add(te)),oe}function ne(te){return te}},94573:(ut,Oe,C)=>{"use strict";function T(oe){}function ie(oe){return()=>oe}C.d(Oe,{Bg:()=>T,sM:()=>ie}),C(8314)},55538:(ut,Oe,C)=>{"use strict";C.d(Oe,{x9:()=>Y,XV:()=>te,Mr:()=>oe});var x=C(8314);const T=new Set;function te(j,L,B={}){if((0,x.Z)("esri-deprecation-warnings")){const{moduleName:X}=B;Y(j,"Function: "+(X?X+"::":"")+L+"()",B)}}function oe(j,L,B={}){if((0,x.Z)("esri-deprecation-warnings")){const{moduleName:X}=B;Y(j,"Property: "+(X?X+"::":"")+L,B)}}function Y(j,L,B={}){if((0,x.Z)("esri-deprecation-warnings")){const{replacement:X,version:Z,see:z,warnOnce:ae}=B;let K=L;X&&(K+=`\n\t\u{1f6e0}\ufe0f Replacement: ${X}`),Z&&(K+=`\n\t\u2699\ufe0f Version: ${Z}`),z&&(K+=`\n\t\u{1f517} See ${z} for more details.`),function ne(j,L,B=!1){B&&T.has(L)||(B&&T.add(L),j.warn(`\u{1f6d1} DEPRECATED - ${L}`))}(j,K,ae)}}},40764:(ut,Oe,C)=>{"use strict";function x(j){return"string"==typeof j?document.getElementById(j):j}function T(j){for(;j.hasChildNodes();)j.removeChild(j.firstChild)}function ie(j,L){const B=L.parentNode;B&&B.insertBefore(j,L)}function te(j,L){for(;;){const B=j.firstChild;if(!B)break;L.appendChild(B)}}function oe(j){j.parentNode&&j.parentNode.removeChild(j)}C.d(Oe,{L7:()=>x,cS:()=>T,Vt:()=>ie,Od:()=>oe,YD:()=>te}),(()=>{if("function"==typeof Element.prototype.closest)return(L,B)=>L.closest(B);Element.prototype.matches||Element})()},17770:(ut,Oe,C)=>{"use strict";function x(Y){return Y&&("function"==typeof Y.on||"function"==typeof Y.addEventListener)}function T(Y,j,L){if(!x(Y))throw new TypeError("target is not a Evented or EventTarget object");if("on"in Y)return Y.on(j,L);if(Array.isArray(j)){const B=j.slice();for(const X of B)Y.addEventListener(X,L);return{remove(){for(const X of B)Y.removeEventListener(X,L)}}}return Y.addEventListener(j,L),{remove(){Y.removeEventListener(j,L)}}}function ne(Y,j,L){if(!x(Y))throw new TypeError("target is not a Evented or EventTarget object");if("once"in Y)return Y.once(j,L);const B=T(Y,j,X=>{B.remove(),L.call(Y,X)});return{remove(){B.remove()}}}C.d(Oe,{kK:()=>oe,vT:()=>x,on:()=>T,IH:()=>ne});const te={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function oe({key:Y}){return te[Y]||Y}},54024:(ut,Oe,C)=>{"use strict";C.d(Oe,{AL:()=>T,kB:()=>ne});var x=C(62208);function T(j){return ne(()=>j.forEach(L=>(0,x.pC)(L)&&L.remove()))}function ne(j){return{remove:()=>{j&&(j(),j=void 0)}}}},8314:(ut,Oe,C)=>{"use strict";var x,T;let ne;var ie,te;function oe(Y){return"function"==typeof ne[Y]?ne[Y]=ne[Y](globalThis):ne[Y]}C.d(Oe,{Z:()=>oe}),ne=null!=(x=globalThis.dojoConfig)&&x.has||null!=(T=globalThis.esriConfig)&&T.has?Ot(Ot({},null==(ie=globalThis.dojoConfig)?void 0:ie.has),null==(te=globalThis.esriConfig)?void 0:te.has):{},oe.add=(Y,j,L,B)=>((B||void 0===ne[Y])&&(ne[Y]=j),L&&oe(Y)),oe.cache=ne,oe.add("esri-deprecation-warnings",!0),(()=>{var Y;oe.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const j="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(oe.add("host-browser",j),oe.add("host-node","object"==typeof globalThis.process&&(null==(Y=globalThis.process.versions)?void 0:Y.node)&&globalThis.process.versions.v8),oe.add("dom",j),oe("host-browser")){const L=navigator,B=L.userAgent,X=L.appVersion,Z=parseFloat(X);if(oe.add("wp",parseFloat(B.split("Windows Phone")[1])||void 0),oe.add("msapp",parseFloat(B.split("MSAppHost/")[1])||void 0),oe.add("khtml",X.includes("Konqueror")?Z:void 0),oe.add("edge",parseFloat(B.split("Edge/")[1])||void 0),oe.add("opr",parseFloat(B.split("OPR/")[1])||void 0),oe.add("webkit",!oe("wp")&&!oe("edge")&&parseFloat(B.split("WebKit/")[1])||void 0),oe.add("chrome",!oe("edge")&&!oe("opr")&&parseFloat(B.split("Chrome/")[1])||void 0),oe.add("android",!oe("wp")&&parseFloat(B.split("Android ")[1])||void 0),oe.add("safari",!X.includes("Safari")||oe("wp")||oe("chrome")||oe("android")||oe("edge")||oe("opr")?void 0:parseFloat(X.split("Version/")[1])),oe.add("mac",X.includes("Macintosh")),!oe("wp")&&B.match(/(iPhone|iPod|iPad)/)){const z=RegExp.$1.replace(/P/,"p"),ae=B.match(/OS ([\d_]+)/)?RegExp.$1:"1",K=parseFloat(ae.replace(/_/,".").replace(/_/g,""));oe.add(z,K),oe.add("ios",K)}oe.add("trident",parseFloat(X.split("Trident/")[1])||void 0),oe("webkit")||(!B.includes("Gecko")||oe("wp")||oe("khtml")||oe("trident")||oe("edge")||oe.add("mozilla",Z),oe("mozilla")&&oe.add("ff",parseFloat(B.split("Firefox/")[1]||B.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const Y=navigator.userAgent,j=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(Y),L=/iPhone/i.test(Y);j&&oe.add("esri-mobile",j),L&&oe.add("esri-iPhone",L),oe.add("esri-geolocation",!!navigator.geolocation)}oe.add("esri-canvas-svg-support",!oe("trident")),oe.add("esri-wasm","WebAssembly"in globalThis),oe.add("esri-shared-array-buffer",()=>{const Y="SharedArrayBuffer"in globalThis,j=!1===globalThis.crossOriginIsolated;return Y&&!j}),oe.add("esri-atomics","Atomics"in globalThis),oe.add("esri-workers","Worker"in globalThis),oe.add("esri-text-decoder","TextDecoder"in globalThis),oe.add("esri-text-encoder","TextEncoder"in globalThis),oe.add("web-feat:cache","caches"in globalThis),oe.add("esri-workers-arraybuffer-transfer",!oe("safari")||Number(oe("safari"))>=12),oe.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),oe.add("featurelayer-simplify-payload-size-factors",[1,1,4]),oe.add("featurelayer-snapshot-enabled",!0),oe.add("featurelayer-snapshot-point-min-threshold",8e4),oe.add("featurelayer-snapshot-point-max-threshold",4e5),oe.add("featurelayer-snapshot-point-coverage",.1),oe.add("featurelayer-advanced-symbols",!1),oe.add("featurelayer-pbf",!0),oe.add("featurelayer-pbf-statistics",!1),oe.add("feature-layers-workers",!0),oe.add("mapview-transitions-duration",200),oe.add("mapserver-pbf-enabled",!1),oe.add("vectortilelayer-max-buffers",oe("ff")?160:Number.POSITIVE_INFINITY),oe("host-webworker")||oe("host-browser")&&(oe.add("esri-csp-restrictions",()=>{try{new Function}catch(Y){return!0}return!1}),oe.add("esri-image-decode",()=>{if("decode"in new Image){const Y=new Image;return Y.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void Y.decode().then(()=>{oe.add("esri-image-decode",!0,!0,!0)}).catch(()=>{oe.add("esri-image-decode",!1,!0,!0)})}return!1}),oe.add("esri-url-encodes-apostrophe",()=>{const Y=window.document.createElement("a");return Y.href="?'",Y.href.includes("?%27")}))})()},56354:(ut,Oe,C)=>{"use strict";function x(ie){const te=[];return function*(){yield*te;for(const oe of ie)te.push(oe),yield oe}}function T(ie,te){for(const oe of ie)if(null!=oe&&te(oe))return oe}function ne(ie){return null!=ie&&"function"==typeof ie[Symbol.iterator]}C.d(Oe,{Fs:()=>x,sE:()=>T,TW:()=>ne})},2076:(ut,Oe,C)=>{"use strict";C.d(Oe,{Xn:()=>T,wY:()=>ne});var x=C(94113);class T{constructor(te,oe={ignoreUnknown:!1}){this.jsonToAPI=te,this.options=oe,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(te),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=Y=>this.fromJSON(Y),this.write=(Y,j,L)=>{const B=this.toJSON(Y);void 0!==B&&(0,x.RB)(L,B,j)},this.write.isJSONMapWriter=!0}toJSON(te){return this.apiToJSON.hasOwnProperty(te)?this.apiToJSON[te]:this.options.ignoreUnknown?void 0:te}fromJSON(te){return this.jsonToAPI.hasOwnProperty(te)?this.jsonToAPI[te]:this.options.ignoreUnknown?void 0:te}invertMap(te){const oe={};for(const Y in te)oe[te[Y]]=Y;return oe}getKeysSorted(te){const oe=[];for(const Y in te)oe.push(Y);return oe.sort(),oe}}function ne(){return function(ie){return new T(ie,{ignoreUnknown:!0})}}},58817:(ut,Oe,C)=>{"use strict";C.d(Oe,{d9:()=>te,fS:()=>oe,yd:()=>ie}),C(85931),C(8314);var ne=C(55713);function ie(Z,z){let ae;if(z)for(ae in Z)Z.hasOwnProperty(ae)&&(void 0===Z[ae]?delete Z[ae]:Z[ae]instanceof Object&&ie(Z[ae],!0));else for(ae in Z)Z.hasOwnProperty(ae)&&void 0===Z[ae]&&delete Z[ae];return Z}function te(Z){if(!Z||"object"!=typeof Z||"function"==typeof Z)return Z;if((0,ne.W0)(Z)||(0,ne.lq)(Z)||(0,ne.KZ)(Z)||(0,ne.z3)(Z)||(0,ne.Uc)(Z)||(0,ne.Hx)(Z)||(0,ne.ZY)(Z)||(0,ne.xZ)(Z)||(0,ne.fS)(Z))return(0,ne.tP)(Z);if(Z instanceof Date)return new Date(Z.getTime());if(Z instanceof ArrayBuffer)return Z.slice(0,Z.byteLength);if(Z instanceof Map){const K=new Map;return Z.forEach((V,P)=>{K.set(P,te(V))}),K}if(Z instanceof Set){const K=new Set;return Z.forEach(V=>{K.add(te(V))}),K}let z;const ae=Z;if("function"==typeof ae.clone)z=ae.clone();else if("function"==typeof ae.map&&"function"==typeof ae.forEach)z=ae.map(te);else if("function"==typeof ae.notifyChange&&"function"==typeof ae.watch)z=ae.clone();else{z={};for(const K of Object.getOwnPropertyNames(Z))z[K]=te(Z[K])}return z}function oe(Z,z){return Z===z||"number"==typeof Z&&isNaN(Z)&&"number"==typeof z&&isNaN(z)||"function"==typeof(Z||{}).getTime&&"function"==typeof(z||{}).getTime&&Z.getTime()===z.getTime()||!1}},47877:(ut,Oe,C)=>{"use strict";C.d(Oe,{GZ:()=>oe,wF:()=>j});var x=C(15861),T=C(59213),ne=C(7093),ie=C(47996),te=C(62208);function oe(X,Z){return Y.apply(this,arguments)}function Y(){return(Y=(0,x.Z)(function*(X,Z){return yield X.load(),j(X,Z)})).apply(this,arguments)}function j(X,Z){return L.apply(this,arguments)}function L(){return L=(0,x.Z)(function*(X,Z){const z=[],ae=(...V)=>{for(const P of V)(0,te.Wi)(P)||(Array.isArray(P)?ae(...P):ne.Z.isCollection(P)?P.forEach(F=>ae(F)):ie.Z.isLoadable(P)&&z.push(P))};Z(ae);let K=null;if(yield(0,T.UI)(z,function(){var V=(0,x.Z)(function*(P){!1!==(yield(0,T.q6)(B(P)?P.loadAll():P.load())).ok||K||(K=P)});return function(P){return V.apply(this,arguments)}}()),K)throw K.loadError;return X}),L.apply(this,arguments)}function B(X){return"loadAll"in X&&"function"==typeof X.loadAll}},21286:(ut,Oe,C)=>{"use strict";C.d(Oe,{ZF:()=>K,Kt:()=>V,jE:()=>ee,uZ:()=>te,oK:()=>$,Vl:()=>Z,wt:()=>Y,t7:()=>B,Sf:()=>ie,fp:()=>j,BV:()=>z});var x=C(84161);C(993);const ne=new Float32Array(1);function ie(se){--se;for(let Q=1;Q<32;Q<<=1)se|=se>>Q;return se+1}function te(se,Q,pe){return Math.min(Math.max(se,Q),pe)}function Y(se){return 0==(se&se-1)}function j(se){return se--,se|=se>>1,se|=se>>2,se|=se>>4,se|=se>>8,se|=se>>16,++se}function B(se,Q,pe){return se+(Q-se)*pe}function Z(se){return se*Math.PI/180}function z(se){return 180*se/Math.PI}function K(se){return Math.acos(te(se,-1,1))}function V(se){return Math.asin(te(se,-1,1))}function $(se){return J(Math.max(-ge,Math.min(se,ge)))}function J(se){return ne[0]=se,ne[0]}function ee(se,Q){const pe=(0,x.l)(se),ue=V(se[2]/pe),me=Math.atan2(se[1]/pe,se[0]/pe);return(0,x.s)(Q,pe,ue,me),Q}const ge=J(34028234663852886e22)},62208:(ut,Oe,C)=>{"use strict";function T(le){return null!=le}function ne(le){return null==le}function ie(le){return void 0===le}function te(le,ge){return T(le)?ge(le):null}function oe(le){return le}function Y(le,ge){if(ne(le))throw new Error(ge);return le}function j(le,ge){return T(le)?le:"function"==typeof ge?ge():ge}function L(le){return T(le)&&le.destroy(),null}function B(le){return T(le)&&le.dispose(),null}function X(le){return T(le)&&le.remove(),null}function Z(le){return T(le)&&le.abort(),null}function z(le){return T(le)&&le.release(),null}function K(le){return null}function P(le,ge){const se=new Array;for(const Q of le)se.push($(Q,null,ge));return se}function F(le,ge){for(const se of le)$(se,null,ge)}function $(le,ge,se){return T(le)?se(le):ge}function J(le,ge){return T(le)?ge(le):null}function de(le){return le.filter(ge=>T(ge))}function ee(le,...ge){let se=le;for(let Q=0;Q<ge.length&&se;++Q)se=se[ge[Q]];return se}function ye(le){return le}C.d(Oe,{IM:()=>Z,Po:()=>J,yw:()=>te,j0:()=>ye,SC:()=>L,O3:()=>B,lV:()=>de,JR:()=>F,U2:()=>ee,Wi:()=>ne,pC:()=>T,o8:()=>ie,Fd:()=>P,R2:()=>$,Bd:()=>K,RY:()=>z,hw:()=>X,Wg:()=>oe,Pt:()=>j,s3:()=>Y})},22558:(ut,Oe,C)=>{"use strict";function x(T){return T&&"getAtOrigin"in T&&"originOf"in T}C.d(Oe,{l:()=>x})},79682:(ut,Oe,C)=>{"use strict";C.d(Oe,{Y:()=>T});const x=[];function T(ne){x.push(ne),1===x.length&&queueMicrotask(()=>{const ie=x.slice();x.length=0;for(const te of ie)te()})}},75327:(ut,Oe,C)=>{"use strict";C.d(Oe,{lt:()=>B,WU:()=>te,Qc:()=>X});var x=C(77275),T=C(56683);const ne={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function ie(V){V||(V=(0,T.Kd)());let P=V in ne;if(!P){const H=V.split("-");H.length>1&&H[0]in ne&&(V=H[0],P=!0),P||(V="en")}const[F,$,J="#,##0.###"]=ne[V];return{decimal:F,group:$,pattern:J}}function te(V,P){const F=ie((P=Ot({},P)).locale);P.customs=F;const $=P.pattern||F.pattern;return isNaN(V)||Math.abs(V)===1/0?null:function Y(V,P,F){const $=(F=F||{}).customs.group,J=F.customs.decimal,H=P.split(";"),de=H[0];if(-1!==(P=H[V<0?1:0]||"-"+de).indexOf("%"))V*=100;else if(-1!==P.indexOf("\u2030"))V*=1e3;else{if(-1!==P.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==P.indexOf("E"))throw new Error("exponential notation not supported")}const ee=oe,ye=de.match(ee);if(!ye)throw new Error("unable to find a number expression in pattern: "+P);return!1===F.fractional&&(F.places=0),P.replace(ee,function j(V,P,F){!0===(F=F||{}).places&&(F.places=0),F.places===1/0&&(F.places=6);const $=P.split("."),J="string"==typeof F.places&&F.places.indexOf(",");let H=F.places;J?H=F.places.substring(J+1):H>=0||(H=($[1]||[]).length),F.round<0||(V=Number(V.toFixed(Number(H))));const de=String(Math.abs(V)).split("."),ee=de[1]||"";if($[1]||F.places){J&&(F.places=F.places.substring(0,J));const ue=void 0!==F.places?F.places:$[1]&&$[1].lastIndexOf("0")+1;ue>ee.length&&(de[1]=ee.padEnd(Number(ue),"0")),H<ee.length&&(de[1]=ee.substr(0,Number(H)))}else de[1]&&de.pop();const ye=$[0].replace(",","");let le=ye.indexOf("0");-1!==le&&(le=ye.length-le,le>de[0].length&&(de[0]=de[0].padStart(le,"0")),-1===ye.indexOf("#")&&(de[0]=de[0].substr(de[0].length-le)));let ge,se,Q=$[0].lastIndexOf(",");if(-1!==Q){ge=$[0].length-Q-1;const ue=$[0].substr(0,Q);Q=ue.lastIndexOf(","),-1!==Q&&(se=ue.length-Q-1)}const pe=[];for(let ue=de[0];ue;){const me=ue.length-ge;pe.push(me>0?ue.substr(me):ue),ue=me>0?ue.slice(0,me):"",se&&(ge=se,se=void 0)}return de[0]=pe.reverse().join(F.group||","),de.join(F.decimal||".")}(V,ye[0],{decimal:J,group:$,places:F.places,round:F.round}))}(V,$,P)}const oe=/[#0,]*[#0](?:\.0*#*)?/;function B(V){const P=ie((V=V||{}).locale),F=V.pattern||P.pattern,$=P.group,J=P.decimal;let H=1;if(-1!==F.indexOf("%"))H/=100;else if(-1!==F.indexOf("\u2030"))H/=1e3;else if(-1!==F.indexOf("\xa4"))throw new Error("currency notation not supported");const de=F.split(";");return 1===de.length&&de.push("-"+de[0]),{regexp:ae(de,function(ye){return(ye="(?:"+(0,x.Qs)(ye,".")+")").replace(oe,function(le){const ge={signed:!1,separator:V.strict?$:[$,""],fractional:V.fractional,decimal:J,exponent:!1},se=le.split(".");let Q=V.places;1===se.length&&1!==H&&(se[1]="###"),1===se.length||0===Q?ge.fractional=!1:(void 0===Q&&(Q=V.pattern?se[1].lastIndexOf("0")+1:1/0),Q&&null==V.fractional&&(ge.fractional=!0),!V.places&&Q<se[1].length&&(Q+=","+se[1].length),ge.places=Q);const pe=se[0].split(",");return pe.length>1&&(ge.groupSize=pe.pop().length,pe.length>1&&(ge.groupSize2=pe.pop().length)),"("+function Z(V){"places"in(V=V||{})||(V.places=1/0),"string"!=typeof V.decimal&&(V.decimal="."),"fractional"in V&&!/^0/.test(String(V.places))||(V.fractional=[!0,!1]),"exponent"in V||(V.exponent=[!0,!1]),"eSigned"in V||(V.eSigned=[!0,!1]);const P=z(V),F=ae(V.fractional,function(J){let H="";return J&&0!==V.places&&(H="\\"+V.decimal,V.places===1/0?H="(?:"+H+"\\d+)?":H+="\\d{"+V.places+"}"),H},!0);let $=P+F;return F&&($="(?:(?:"+$+")|(?:"+F+"))"),$+ae(V.exponent,function(J){return J?"([eE]"+z({signed:V.eSigned})+")":""})}(ge)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:$,decimal:J,factor:H}}function X(V,P){const F=B(P),$=new RegExp("^"+F.regexp+"$").exec(V);if(!$)return NaN;let J=$[1];if(!$[1]){if(!$[2])return NaN;J=$[2],F.factor*=-1}return J=J.replace(new RegExp("["+F.group+"\\s\\xa0]","g"),"").replace(F.decimal,"."),Number(J)*F.factor}function z(V){return"signed"in(V=V||{})||(V.signed=[!0,!1]),"separator"in V?"groupSize"in V||(V.groupSize=3):V.separator="",ae(V.signed,function(P){return P?"[-+]":""},!0)+ae(V.separator,function(P){if(!P)return"(?:\\d+)";" "===(P=(0,x.Qs)(P))?P="\\s":"\xa0"===P&&(P="\\s\\xa0");const F=V.groupSize,$=V.groupSize2;if($){const J="(?:0|[1-9]\\d{0,"+($-1)+"}(?:["+P+"]\\d{"+$+"})*["+P+"]\\d{"+F+"})";return F-$>0?"(?:"+J+"|(?:0|[1-9]\\d{0,"+(F-1)+"}))":J}return"(?:0|[1-9]\\d{0,"+(F-1)+"}(?:["+P+"]\\d{"+F+"})*)"},!0)}const ae=function(V,P,F){if(!(V instanceof Array))return P(V);const $=[];for(let J=0;J<V.length;J++)$.push(P(V[J]));return K($.join("|"),F)},K=function(V,P){return"("+(P?"?:":"")+V+")"}},94113:(ut,Oe,C)=>{"use strict";C.d(Oe,{RH:()=>T,hS:()=>ne,RB:()=>ie});var x=C(58817);function T(Y,j,L=!1){return oe(Y,j,L)}function ne(Y,j){if(null!=j)return j[Y]||te(Y.split("."),!1,j)}function ie(Y,j,L){const B=Y.split("."),X=B.pop(),Z=te(B,!0,L);Z&&X&&(Z[X]=j)}function te(Y,j,L){let B=L;for(const X of Y){if(null==B)return;if(!(X in B)){if(!j)return;B[X]={}}B=B[X]}return B}function oe(Y,j,L){return j?Object.keys(j).reduce(function(B,X){let Z=B[X],z=j[X];return Z===z?B:void 0===Z?(B[X]=(0,x.d9)(z),B):(Array.isArray(z)||Array.isArray(B)?(Z=B[X]=Z?Array.isArray(Z)?Z.concat():[Z]:[],z&&(Array.isArray(z)||(z=[z]),L?z.forEach(ae=>{-1===Z.indexOf(ae)&&Z.push(ae)}):B[X]=z.concat())):z&&"object"==typeof z?B[X]=oe(Z,z,L):B.hasOwnProperty(X)&&!j.hasOwnProperty(X)||(B[X]=z),B)},Y||{}):Y}},24192:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>oe});var x=C(8314),T=C(27899);const ne=4294967296,ie=(0,x.Z)("esri-text-decoder")?new TextDecoder("utf-8"):null,te=(0,x.Z)("safari")||(0,x.Z)("ios")?6:(0,x.Z)("ff")?12:32;class oe{constructor(j,L,B=0,X=(j?j.byteLength:0)){this._tag=0,this._dataType=99,this.init(j,L,B,X)}init(j,L,B,X){this._data=j,this._dataView=L,this._pos=B,this._end=X}clone(){return new oe(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(j){this._pos=j}nextTag(j){for(;;){if(this._pos===this._end)return!1;const L=this._decodeVarint();if(this._tag=L>>3,this._dataType=7&L,!j||j===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const j=this._decodeVarint();return this._tag=j>>3,this._dataType=7&j,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let j=4294967295;return j=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?j:(j=(j|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?j:(j=(j|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?j:(j=(j|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?j:(j=(j|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?j:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const j=this.getUInt32();return j>>>1^-(1&j)|0}getSInt64(){return this._decodeSVarint()}getBool(){const j=0!==this._data[this._pos];return this._skip(1),j}getEnum(){return this._decodeVarint()}getFixed64(){const j=this._dataView,L=this._pos,B=j.getUint32(L,!0)+j.getUint32(L+4,!0)*ne;return this._skip(8),B}getSFixed64(){const j=this._dataView,L=this._pos,B=j.getUint32(L,!0)+j.getInt32(L+4,!0)*ne;return this._skip(8),B}getDouble(){const j=this._dataView.getFloat64(this._pos,!0);return this._skip(8),j}getFixed32(){const j=this._dataView.getUint32(this._pos,!0);return this._skip(4),j}getSFixed32(){const j=this._dataView.getInt32(this._pos,!0);return this._skip(4),j}getFloat(){const j=this._dataView.getFloat32(this._pos,!0);return this._skip(4),j}getString(){const j=this._getLength(),L=this._pos,B=this._toString(this._data,L,L+j);return this._skip(j),B}getBytes(){const j=this._getLength(),L=this._pos,B=this._toBytes(this._data,L,L+j);return this._skip(j),B}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(j,L,B,X){const Z=this.getMessage(),z=j(Z,L,B,X);return Z.release(),z}processMessage(j){const L=this.getMessage(),B=j(L);return L.release(),B}getMessage(){const j=this._getLength(),L=oe.pool.acquire();return L.init(this._data,this._dataView,this._pos,this._pos+j),this._skip(j),L}release(){oe.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(j){this._skip(j)}_skip(j){if(this._pos+j>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=j}_decodeVarint(){const j=this._data;let L,B=this._pos,X=0;if(this._end-B>=10)do{if(L=j[B++],X|=127&L,0==(128&L)||(L=j[B++],X|=(127&L)<<7,0==(128&L))||(L=j[B++],X|=(127&L)<<14,0==(128&L))||(L=j[B++],X|=(127&L)<<21,0==(128&L))||(L=j[B++],X+=268435456*(127&L),0==(128&L))||(L=j[B++],X+=34359738368*(127&L),0==(128&L))||(L=j[B++],X+=4398046511104*(127&L),0==(128&L))||(L=j[B++],X+=562949953421312*(127&L),0==(128&L))||(L=j[B++],X+=72057594037927940*(127&L),0==(128&L))||(L=j[B++],X+=0x8000000000000000*(127&L),0==(128&L)))break;throw new Error("Varint too long!")}while(0);else{let Z=1;for(;B!==this._end&&(L=j[B],0!=(128&L));)++B,X+=(127&L)*Z,Z*=128;if(B===this._end)throw new Error("Varint overrun!");++B,X+=L*Z}return this._pos=B,X}_decodeSVarint(){const j=this._decodeVarint();return j%2?-(j+1)/2:j/2}_getLength(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(j,L,B){if((B=Math.min(this._end,B))-L>te&&ie){const z=j.subarray(L,B);return ie.decode(z)}let X="",Z="";for(let z=L;z<B;++z){const ae=j[z];128&ae?Z+="%"+ae.toString(16):(X+=decodeURIComponent(Z)+String.fromCharCode(ae),Z="")}return Z.length&&(X+=decodeURIComponent(Z)),X}_toBytes(j,L,B){return B=Math.min(this._end,B),new Uint8Array(j.buffer,L,B-L)}}oe.pool=new T.Z(oe,null,Y=>{Y._data=null,Y._dataView=null})},10699:(ut,Oe,C)=>{"use strict";C.d(Oe,{e4:()=>se,$6:()=>oe,Ue:()=>j,zE:()=>L,dD:()=>de,hh:()=>fe,vr:()=>ce,Ds:()=>ve,as:()=>ee,WW:()=>ye,R8:()=>J,D_:()=>$,Hc:()=>Z,tI:()=>me,y8:()=>pe,fu:()=>K,$F:()=>V,d1:()=>le,DB:()=>ge,r9:()=>z,k_:()=>B,H9:()=>ae,Yn:()=>he,gx:()=>ue,Hl:()=>P});var x=C(84244),T=C(26584),ne=C(17770),te=(C(63290),C(62208));function oe(De){return Promise.all(De)}function j(De){return new Promise((xe,Pe)=>{try{De(xe,Pe)}catch(je){Promise.resolve().then(()=>Pe(je))}})}function L(De="Aborted"){return new T.Z("AbortError",De)}function B(De,xe="Aborted"){if(Z(De))throw L(xe)}function X(De){return(0,te.pC)(De)?"aborted"in De?De:De.signal:De}function Z(De){const xe=X(De);return(0,te.pC)(xe)&&xe.aborted}function z(De){if($(De))throw De}function ae(De){if(!$(De))throw De}function K(De,xe){const Pe=X(De);if(!(0,te.Wi)(Pe)){if(!Pe.aborted)return(0,ne.IH)(Pe,"abort",()=>xe());xe()}}function V(De,xe){const Pe=X(De);if(!(0,te.Wi)(Pe))return B(Pe),(0,ne.IH)(Pe,"abort",()=>xe(L()))}function P(De,xe){const Pe=X(xe);return(0,te.Wi)(Pe)?De:new Promise((je,rt)=>{let Le=K(xe,()=>rt(L()));const Ce=()=>Le=(0,te.hw)(Le);De.then(Ce,Ce),De.then(je,rt)})}function $(De){return De&&"AbortError"===De.name}function J(De){return De.catch(xe=>{if(!$(xe))throw xe})}function de(){let De=null;const xe=new Promise((Pe,je)=>{De={promise:void 0,resolve:Pe,reject:je}});return De.promise=xe,De}function ee(De){if(!De)return;if("function"!=typeof De.forEach){const Pe=Object.keys(De);return ee(Pe.map(je=>De[je])).then(je=>{const rt={};return Pe.forEach((Le,Ce)=>rt[Le]=je[Ce]),rt})}const xe=De;return j(Pe=>{const je=[];let rt=xe.length;0===rt&&Pe(je),xe.forEach(Le=>{const Ce={promise:Le||Promise.resolve(Le)};je.push(Ce),Ce.promise.then(Te=>{Ce.value=Te}).catch(Te=>{Ce.error=Te}).then(()=>{--rt,0===rt&&Pe(je)})})})}function ye(De){return ee(De).then(xe=>xe.filter(Pe=>!!Pe.value).map(Pe=>Pe.value))}function le(De){return Promise.reject(De)}function ge(De){return Promise.resolve(De)}function se(De,xe,Pe){const je=new AbortController;return K(Pe,()=>je.abort()),new Promise((rt,Le)=>{let Ce=setTimeout(()=>{Ce=0,rt(xe)},De);K(je,()=>{Ce&&(clearTimeout(Ce),Le(L()))})})}function pe(De){return De&&"function"==typeof De.then}function ue(De){return me(De)?De:Promise.resolve(De)}function me(De){return De&&"object"==typeof De&&"then"in De&&"function"==typeof De.then}function ve(De,xe=-1){let Pe,je,rt,Le,Ce=null;const Te=(...Ye)=>{if(Pe){je=Ye,Le&&Le.reject(L()),Le=de();const Je=(0,te.j0)(Le.promise);if(Ce){const re=Ce;Ce=null,re.abort()}return Je}if(rt=Le||de(),Le=null,xe>0){const Je=new AbortController;Pe=ue(De(...Ye,Je.signal));const re=Pe;se(xe).then(()=>{Pe===re&&(Le?Je.abort():Ce=Je)})}else Pe=1,Pe=ue(De(...Ye));const ct=()=>{const Je=je;je=rt=Pe=Ce=null,null!=Je&&Te(...Je)},Ae=Pe,Qe=rt;return Ae.then(ct,ct),Ae.then(Qe.resolve,Qe.reject),(0,te.j0)(Qe.promise)};return Te}function fe(){let De,xe;const Pe=new Promise((rt,Le)=>{De=rt,xe=Le}),je=rt=>{De(rt)};return je.resolve=rt=>De(rt),je.reject=rt=>xe(rt),je.timeout=(rt,Le)=>x.Z.setTimeout(()=>je.reject(Le),rt),je.promise=Pe,je}function ce(De,xe){let Pe,je=new AbortController;const rt=De(je.signal);let Le={promise:rt,finished:!1,abort:()=>{je&&(je.abort(),je=null)}};const Ce=()=>{Le&&(Le.finished=!0,Le=null),(0,te.pC)(Pe)&&(Pe.remove(),Pe=null),je=null};return rt.then(Ce,Ce),Pe=K(xe,()=>{(0,te.pC)(Le)&&Le.abort()}),Le}function he(De){return Promise.resolve().then(()=>{B(De)})}},32917:(ut,Oe,C)=>{"use strict";C.d(Oe,{Ym:()=>te,zF:()=>oe}),C(17770);var T=C(62208),ne=C(45262);function te(ae,K,V={}){return Y(ae,K,V,j)}function oe(ae,K,V={}){return Y(ae,K,V,L)}function Y(ae,K,V={},P){let F=null;const $=V.once?(J,H)=>{P(J)&&((0,T.hw)(F),K(J,H))}:(J,H)=>{P(J)&&K(J,H)};if(F=(0,ne.aQ)(ae,$,V.sync,V.equals),V.initial){const J=ae();$(J,J)}return F}function j(ae){return!0}function L(ae){return!!ae}C(21352)},50618:(ut,Oe,C)=>{"use strict";C.d(Oe,{A:()=>F,Os:()=>P,MU:()=>se});var x=C(62208),T=C(79682),ne=C(73362),ie=C(77029),te=C(10699),oe=C(27422);class Y{constructor(me){this.phases=me,this.paused=!1,this.ticks=-1,this.removed=!1}}class j{constructor(me){this.callback=me,this.isActive=!0}remove(){this.isActive=!1}}let L=0;const X={time:(0,oe.HA)(0),deltaTime:(0,oe.HA)(0),elapsedFrameTime:(0,oe.HA)(0),frameDuration:(0,oe.HA)(0)},Z=["prepare","preRender","render","postRender","update"],z=[],ae=new ie.Z;class K{constructor(me){this._task=me}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const V={frameTasks:ae,willDispatch:!1,clearFrameTasks:function J(ue=!1){ae.forAll(me=>{me.removed=!0}),ue&&le()},dispatch:ge,executeFrameTasks:function ee(ue){const me=(0,oe.HA)(ue-L);L=ue;const ve=1e3/60,fe=Math.max(0,me-ve);for(let Me=0;Me<Z.length;Me++){const ce=performance.now(),he=Z[Me];ae.forAll(De=>{var xe;De.paused||De.removed||(0===Me&&De.ticks++,De.phases[he]&&(X.time=ue,X.deltaTime=0===De.ticks?(0,oe.HA)(0):me,X.elapsedFrameTime=(0,oe.HA)(performance.now()-ue),X.frameDuration=(0,oe.HA)(ve-fe),null==(xe=De.phases[he])||xe.call(De,X)))}),Q[Me].record(performance.now()-ce)}le(),pe.record(performance.now()-ue)}};function P(ue){const me=new j(ue);return z.push(me),V.willDispatch||(V.willDispatch=!0,(0,T.Y)(ge)),me}function F(ue){const me=new Y(ue);return ae.push(me),null==$&&(L=performance.now(),$=requestAnimationFrame(de)),new K(me)}let $=null;function de(){const ue=performance.now();$=null,$=ae.length>0?requestAnimationFrame(de):null,V.executeFrameTasks(ue)}const ye=new ie.Z;function le(){ae.forAll(ue=>{ue.removed&&ye.push(ue)}),ae.removeUnorderedMany(ye.data,ye.length),ye.clear()}function ge(){for(;z.length;){const ue=(0,x.j0)(z.shift());ue.isActive&&ue.callback()}V.willDispatch=!1}function se(ue=1,me){const ve=(0,te.hh)(),fe=()=>{(0,te.Hc)(me)?ve.reject((0,te.zE)()):0===ue?ve():(--ue,(0,T.Y)(()=>fe()))};return fe(),ve.promise}const Q=Z.map(ue=>new ne.Z(ue)),pe=new ne.Z("total")},23841:(ut,Oe,C)=>{"use strict";C.d(Oe,{vW:()=>Y,s1:()=>j,F2:()=>ie,Wz:()=>te,t_:()=>oe});const x=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function ie(P){return P?P/72*96:0}function te(P){return P?72*P/96:0}function oe(P){if("string"==typeof P){const F=P.match(x);if(F){const $=Number(F[1]),J=F[3]&&F[3].toLowerCase(),H="-"===P.charAt(0),de="px"===J?te($):$;return H?-de:de}return console.warn("screenUtils.toPt: input not recognized!"),null}return P}function Y(P=0,F=0){return{x:P,y:F}}function j(P=0,F=0){return[P,F]}},77275:(ut,Oe,C)=>{"use strict";C.d(Oe,{Qs:()=>te,hP:()=>oe,gx:()=>ie,Cb:()=>Y});var x=C(94113);const T=/\{([^\}]+)\}/g;function ne(j){return null==j?"":j}function ie(j,L){return j.replace(T,"object"==typeof L?(B,X)=>ne((0,x.hS)(X,L)):(B,X)=>ne(L(X)))}function te(j,L){return j.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,B=>L&&-1!==L.indexOf(B)?B:`\\${B}`)}function oe(j){let L=0;for(let B=0;B<j.length;B++)L=(L<<5)-L+j.charCodeAt(B),L|=0;return L}function Y(j){return(new DOMParser).parseFromString(j||"","text/html").body.innerText||""}},28705:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>Z,z:()=>z});var x=C(17626),T=C(7093),ne=C(89726),ie=C(80542),oe=(C(8314),C(63290)),Y=C(62208),j=C(77712),X=(C(85931),C(90912),C(76898));oe.Z.getLogger("esri.core.support.OwningCollection");let Z=class extends((0,ie.p)(T.Z)){constructor(ae){super(ae),this.handles.add([this.on("before-add",K=>{(0,Y.Wi)(K.item)&&K.preventDefault()}),this.on("after-add",K=>this._own(K.item)),this.on("after-remove",K=>this._release(K.item))])}get owner(){return this._get("owner")}set owner(ae){ae!==this._get("owner")&&(this._releaseAll(),this._set("owner",ae),this._ownAll())}_ownAll(){for(const ae of this.items)this._own(ae)}_releaseAll(){for(const ae of this.items)this._release(ae)}_createNewInstance(ae){return this.itemType?new(T.Z.ofType(this.itemType.Type))(ae):new T.Z(ae)}};function z(ae,K){return{type:ae,cast:ne.R,set(V){const P=(0,ne.Z)(V,this._get(K),ae);P.owner=this,this._set(K,P)}}}(0,x._)([(0,j.Cb)()],Z.prototype,"owner",null),Z=(0,x._)([(0,X.j)("esri.core.support.OwningCollection")],Z)},7074:(ut,Oe,C)=>{"use strict";function x(T,ne,ie,te){let oe=null,Y=1e3;"number"==typeof ne?(Y=ne,te=ie):(oe=null!=ne?ne:null,Y=ie);let j,L=0;const B=()=>{L=0,T.apply(te,j)},X=(...Z)=>{oe&&oe.apply(te,Z),j=Z,Y?L||(L=setTimeout(B,Y)):B()};return X.remove=()=>{L&&(clearTimeout(L),L=0)},X.forceUpdate=()=>{L&&(clearTimeout(L),B())},X.hasPendingUpdates=()=>!!L,X}C.d(Oe,{P:()=>x})},27422:(ut,Oe,C)=>{"use strict";function x(te){return te}C.d(Oe,{HA:()=>x})},28170:(ut,Oe,C)=>{"use strict";C.d(Oe,{rJ:()=>X,Nm:()=>ie,JE:()=>oe}),C(8314);const T={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},ne={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function ie(Z,z,ae){const K=new Date(Z.getTime());if(z&&ae){const V=ne[ae],{getter:P,setter:F,multiplier:$}=V;K[F](K[P]()+z*$)}return K}function oe(Z,z){switch(z){case"milliseconds":return new Date(Z.getTime());case"seconds":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate(),Z.getHours(),Z.getMinutes(),Z.getSeconds());case"minutes":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate(),Z.getHours(),Z.getMinutes());case"hours":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate(),Z.getHours());case"days":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate());case"weeks":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate()-Z.getDay());case"months":return new Date(Z.getFullYear(),Z.getMonth(),1);case"years":return new Date(Z.getFullYear(),0,1);case"decades":return new Date(Z.getFullYear()-Z.getFullYear()%10,0,1);case"centuries":return new Date(Z.getFullYear()-Z.getFullYear()%100,0,1);default:return new Date}}function X(Z,z,ae){return 0===Z?0:Z*T[z]/T[ae]}},55713:(ut,Oe,C)=>{"use strict";function x(K,V){if(K.forEach)K.forEach(V);else for(let P=0;P<K.length;P++)V(K[P],P,K)}function T(K,V,P){if(K.slice)return K.slice(V,P);void 0===V?V=0:(V<0&&(V+=K.length),V=Math.min(K.length,Math.max(0,V))),void 0===P?P=K.length:(P<0&&(P+=K.length),P=Math.min(K.length,Math.max(0,P)));const F=Math.max(0,P-V),$=new K.constructor(F);for(let J=0;J<F;J++)$[J]=K[V+J];return $}function ne(K){return K instanceof ArrayBuffer||K&&K.constructor&&"ArrayBuffer"===K.constructor.name}function ie(K){return K instanceof Int8Array||K&&K.constructor&&"Int8Array"===K.constructor.name}function te(K){return K instanceof Uint8Array||K&&K.constructor&&"Uint8Array"===K.constructor.name}function oe(K){return K instanceof Uint8ClampedArray||K&&K.constructor&&"Uint8ClampedArray"===K.constructor.name}function Y(K){return K instanceof Int16Array||K&&K.constructor&&"Int16Array"===K.constructor.name}function j(K){return K instanceof Uint16Array||K&&K.constructor&&"Uint16Array"===K.constructor.name}function L(K){return K instanceof Int32Array||K&&K.constructor&&"Int32Array"===K.constructor.name}function B(K){return K instanceof Uint32Array||K&&K.constructor&&"Uint32Array"===K.constructor.name}function X(K){return K instanceof Float32Array||K&&K.constructor&&"Float32Array"===K.constructor.name}function Z(K){return K instanceof Float64Array||K&&K.constructor&&"Float64Array"===K.constructor.name}C.d(Oe,{Ed:()=>x,eP:()=>ne,xZ:()=>X,fS:()=>Z,z3:()=>Y,Hx:()=>L,W0:()=>ie,Uc:()=>j,ZY:()=>B,lq:()=>te,KZ:()=>oe,tP:()=>T})},86236:(ut,Oe,C)=>{"use strict";C.d(Oe,{D:()=>ne});let x=0;function ne(){return++x}},16730:(ut,Oe,C)=>{"use strict";C.d(Oe,{gV:()=>mt,En:()=>pe,Z7:()=>Te,c9:()=>Ce,_R:()=>rt,qE:()=>Ae,cM:()=>Le,hd:()=>L,ty:()=>xe,Jo:()=>bt,$C:()=>Pe}),C(8314);var T=C(2076),ne=C(62208),ie=C(12080),te=C(65234),oe=C(94425),Y=C(37053),j=C(84029);const L=39.37,B=oe.sv.radius*Math.PI/200,X=/UNIT\[([^\]]+)\]\]$/i,Z=j.Z,z=/UNIT\[([^\]]+)\]/i,ae=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),K=(0,T.wY)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),V=at=>at*at,P=at=>at*at*at,F={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:V(.001)},"square-centimeters":{inBaseUnits:V(.01)},"square-decimeters":{inBaseUnits:V(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:V(1e3)},"square-inches":{inBaseUnits:V(.0254)},"square-feet":{inBaseUnits:V(.3048)},"square-yards":{inBaseUnits:V(.9144)},"square-miles":{inBaseUnits:V(1609.344)},"square-us-feet":{inBaseUnits:V(1200/3937)},acres:{inBaseUnits:.0015625*V(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*P(.001)},"cubic-centimeters":{inBaseUnits:1e3*P(.01)},"cubic-decimeters":{inBaseUnits:1e3*P(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*P(1e3)},"cubic-inches":{inBaseUnits:1e3*P(.0254)},"cubic-feet":{inBaseUnits:1e3*P(.3048)},"cubic-yards":{inBaseUnits:1e3*P(.9144)},"cubic-miles":{inBaseUnits:1e3*P(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},$=function(){const at={};for(const Mt in F)for(const Pt in F[Mt].units)at[Pt]=Mt;return at}();function le(at){const Mt=$[at];if(Mt)return Mt;throw new Error("unknown measure")}function Q(at,Mt=null){return Mt=Mt||le(at),F[Mt].baseUnit===at}function pe(at,Mt,Pt){if(Mt===Pt)return at;const Vt=le(Mt);if(Vt!==le(Pt))throw new Error("incompatible units");const Zt=Q(Mt,Vt)?at:function J(at,Mt,Pt){return at*F[Pt].units[Mt].inBaseUnits}(at,Mt,Vt);return Q(Pt,Vt)?Zt:function H(at,Mt,Pt){return at/F[Pt].units[Mt].inBaseUnits}(Zt,Pt,Vt)}function xe(at,Mt,Pt){return pe(at,Mt,"meters")/(Pt*Math.PI/180)}function Pe(at){return K.fromJSON(at.toLowerCase())||null}function rt(at){if(at&&"object"==typeof at&&!(0,Y.N$)(at))return 1;const Mt=Ce(at);return Mt>1e5?1:Mt}function Le(at){return Ce(at)>=(at instanceof te.Z?(0,ie.Iu)(at).metersPerDegree:1e5)?"meters":Ae(at)}function Ce(at,Mt=oe.sv.metersPerDegree){return Te(at,!0)||Mt}function Te(at,Mt=!1){let Pt,Vt,Zt=null;if(null!=at&&("object"==typeof at?(Pt=at.wkid,Vt=at.wkt):"number"==typeof at?Pt=at:"string"==typeof at&&(Vt=at)),Pt){if((0,Y.o$)(Pt))return oe.yr.metersPerDegree;if((0,Y.ME)(Pt))return oe.Z1.metersPerDegree;Zt=Z.values[Z[Pt]],!Zt&&Mt&&ae.has(Pt)&&(Zt=B)}else Vt&&(Je(Vt)?Zt=Ye(X.exec(Vt),Zt):Qe(Vt)&&(Zt=Ye(z.exec(Vt),Zt)));return Zt}function Ye(at,Mt){return at&&at[1]?ct(at[1]):Mt}function ct(at){return parseFloat(at.split(",")[1])}function Ae(at){let Mt,Pt,Vt=null;if(null!=at&&("object"==typeof at?(Mt=at.wkid,Pt=at.wkt):"number"==typeof at?Mt=at:"string"==typeof at&&(Pt=at)),Mt)Vt=Z.units[Z[Mt]];else if(Pt){const Zt=Je(Pt)?X:Qe(Pt)?z:null;if(Zt){const rr=Zt.exec(Pt);rr&&rr[1]&&(Vt=function Ee(at){const Mt=/[\\"\\']{1}([^\\"\\']+)/.exec(at);let Pt=Mt&&Mt[1];if(!Pt||-1===Z.units.indexOf(Pt)){const Vt=ct(at);Pt=null;const Zt=Z.values;for(let rr=0;rr<Zt.length;++rr)if(Math.abs(Vt-Zt[rr])<1e-7){Pt=Z.units[rr];break}}return Pt}(rr[1]))}}return(0,ne.pC)(Vt)?Pe(Vt):null}function Qe(at){return/^GEOCCS/i.test(at)}function Je(at){return/^PROJCS/i.test(at)}const tt={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},pt={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},mt=(0,T.wY)()(tt),bt=(0,T.wY)()(pt);(0,T.wY)()(Ot(Ot({},tt),pt))},21726:(ut,Oe,C)=>{"use strict";C.d(Oe,{R9:()=>V,qg:()=>le,tD:()=>pe,ZN:()=>Nt,fl:()=>Wt,AX:()=>$,Gd:()=>P,Ie:()=>lr,sJ:()=>Ae,AH:()=>Ye,vt:()=>yr,oh:()=>fe,P$:()=>rt,Ml:()=>Kt,ed:()=>ue,b7:()=>ye,D6:()=>Me,tm:()=>me,YP:()=>Le,jc:()=>Ce,HK:()=>Te,$U:()=>mt,oC:()=>tt,zd:()=>ht,kl:()=>ce,v_:()=>je,hF:()=>De,_l:()=>Qe,PF:()=>xe,Fv:()=>Pe,B7:()=>ee,u0:()=>H,Yd:()=>vr,Hu:()=>St,Qj:()=>_t,hO:()=>Mt,mN:()=>J});var x=C(59318),T=C(26584),ne=C(63290),ie=C(62208);const te=ne.Z.getLogger("esri.core.urlUtils"),oe=x.Z.request,Y="esri/config: esriConfig.request.proxyUrl is not set.",j=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,L=/^\s*http:/i,B=/^\s*https:/i,X=/^\s*file:/i,Z=/:\d+$/,z=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ae=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),K=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class V{constructor(Xe=""){this.uri=Xe,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let He=(0,ie.j0)(this.uri.match(ae));this.scheme=He[2]||(He[1]?"":null),this.authority=He[4]||(He[3]?"":null),this.path=He[5],this.query=He[7]||(He[6]?"":null),this.fragment=He[9]||(He[8]?"":null),null!=this.authority&&(He=(0,ie.j0)(this.authority.match(K)),this.user=He[3]||null,this.password=He[4]||null,this.host=He[6]||He[7],this.port=He[9]||null)}toString(){return this.uri}}const P=new V(x.Z.applicationUrl),F={},$=(()=>{const Ge=(0,ie.j0)(P.path),Xe=Ge.substring(0,Ge.lastIndexOf(Ge.split("/")[Ge.split("/").length-1]));return`${P.scheme}://${P.host}${null!=P.port?`:${P.port}`:""}${Xe}`})();function J(Ge){const Xe={path:null,query:null},He=new V(Ge),Ue=Ge.indexOf("?");return null===He.query?Xe.path=Ge:(Xe.path=Ge.substring(0,Ue),Xe.query=H(He.query)),He.fragment&&(Xe.hash=He.fragment,null===He.query&&(Xe.path=Xe.path.substring(0,Xe.path.length-(He.fragment.length+1)))),Xe}function H(Ge){const Xe=Ge.split("&"),He={};for(const Ue of Xe){if(!Ue)continue;const it=Ue.indexOf("=");let wt,nr;it<0?(wt=decodeURIComponent(Ue),nr=""):(wt=decodeURIComponent(Ue.slice(0,it)),nr=decodeURIComponent(Ue.slice(it+1)));let wr=He[wt];"string"==typeof wr&&(wr=He[wt]=[wr]),Array.isArray(wr)?wr.push(nr):He[wt]=nr}return He}function de(Ge){return Ge&&"object"==typeof Ge&&"toJSON"in Ge&&"function"==typeof Ge.toJSON}function ee(Ge,Xe){return Ge?Xe&&"function"==typeof Xe?Object.keys(Ge).map(He=>encodeURIComponent(He)+"="+encodeURIComponent(Xe(He,Ge[He]))).join("&"):Object.keys(Ge).map(He=>{const Ue=Ge[He];if(null==Ue)return"";const it=encodeURIComponent(He)+"=",wt=Xe&&Xe[He];return wt?it+encodeURIComponent(wt(Ue)):Array.isArray(Ue)?Ue.map(nr=>de(nr)?it+encodeURIComponent(JSON.stringify(nr)):it+encodeURIComponent(nr)).join("&"):de(Ue)?it+encodeURIComponent(JSON.stringify(Ue)):it+encodeURIComponent(Ue)}).filter(He=>He).join("&"):""}function ye(Ge=!1){let Xe,He=oe.proxyUrl;if("string"==typeof Ge){Xe=mt(Ge);const Ue=ue(Ge);Ue&&(He=Ue.proxyUrl)}else Xe=!!Ge;if(!He)throw te.warn(Y),new T.Z("urlutils:proxy-not-set",Y);return Xe&&Vt()&&(He=Mt(He)),J(He)}function le(Ge){const Xe=ue(Ge);let He,Ue;if(Xe){const it=se(Xe.proxyUrl);He=it.path,Ue=it.query?H(it.query):null}if(He){const it=J(Ge);Ge=He+"?"+it.path;const wt=ee(Ot(Ot({},Ue),it.query));wt&&(Ge=`${Ge}?${wt}`)}return Ge}const ge={path:"",query:""};function se(Ge){const Xe=Ge.indexOf("?");return-1!==Xe?(ge.path=Ge.slice(0,Xe),ge.query=Ge.slice(Xe+1)):(ge.path=Ge,ge.query=null),ge}function Q(Ge){return(Ge=Zt(Ge=function gr(Ge){return Ge&&"/"===Ge[Ge.length-1]?Ge:`${Ge}/`}(Ge=se(Ge).path),!0)).toLowerCase()}function pe(Ge){const Xe={proxyUrl:Ge.proxyUrl,urlPrefix:Q(Ge.urlPrefix)},He=oe.proxyRules,Ue=Xe.urlPrefix;let it=He.length;for(let wt=0;wt<He.length;wt++){const nr=He[wt].urlPrefix;if(0===Ue.indexOf(nr)){if(Ue.length===nr.length)return-1;it=wt;break}0===nr.indexOf(Ue)&&(it=wt+1)}return He.splice(it,0,Xe),it}function ue(Ge){const Xe=oe.proxyRules,He=Q(Ge);for(let Ue=0;Ue<Xe.length;Ue++)if(0===He.indexOf(Xe[Ue].urlPrefix))return Xe[Ue]}function me(Ge,Xe){return Ge=ve(Ge),Xe=ve(Xe),Zt(Ge)===Zt(Xe)}function ve(Ge){const Xe=(Ge=Pe(Ge)).indexOf("/sharing");return Xe>0?Ge.substring(0,Xe):Ge.replace(/\/+$/,"")}function fe(Ge){const Xe=Ue=>null==Ue||Ue instanceof RegExp&&Ue.test(Ge)||"string"==typeof Ue&&Ge.startsWith(Ue),He=oe.interceptors;if(He)for(const Ue of He)if(Array.isArray(Ue.urls)){if(Ue.urls.some(Xe))return Ue}else if(Xe(Ue.urls))return Ue;return null}function Me(Ge,Xe,He=!1){const Ue=fr(Ge),it=fr(Xe);return!(!He&&Ue.scheme!==it.scheme)&&null!=Ue.host&&null!=it.host&&Ue.host.toLowerCase()===it.host.toLowerCase()&&Ue.port===it.port}function ce(Ge){if("string"==typeof Ge){if(!Le(Ge))return!0;Ge=fr(Ge)}if(Me(Ge,P))return!0;const Xe=oe.trustedServers||[];for(let He=0;He<Xe.length;He++){const Ue=he(Xe[He]);for(let it=0;it<Ue.length;it++)if(Me(Ge,Ue[it]))return!0}return!1}function he(Ge){return F[Ge]||(F[Ge]=pt(Ge)||tt(Ge)?[new V(De(Ge))]:[new V(`http://${Ge}`),new V(`https://${Ge}`)]),F[Ge]}function De(Ge,Xe=$,He){return tt(Ge)?He&&He.preserveProtocolRelative?Ge:"http"===P.scheme&&P.authority===rt(Ge).slice(2)?`http:${Ge}`:`https:${Ge}`:pt(Ge)?Ge:(0,ie.j0)(je("/"===Ge[0]?function rr(Ge){const Xe=Ge.indexOf("//"),He=Ge.indexOf("/",Xe+2);return-1===He?Ge:Ge.slice(0,He)}(Xe):Xe,Ge))}function xe(Ge,Xe=$,He){if(!Le(Ge))return Ge;const Ue=Pe(Ge),it=Ue.toLowerCase(),wt=Pe(Xe).toLowerCase().replace(/\/+$/,""),nr=He?Pe(He).toLowerCase().replace(/\/+$/,""):null;if(nr&&0!==wt.indexOf(nr))return Ge;const wr=(cn,Kn,$i)=>-1===($i=cn.indexOf(Kn,$i))?cn.length:$i;let Dr=wr(it,"/",it.indexOf("//")+2),kr=-1;for(;it.slice(0,Dr+1)===wt.slice(0,Dr)+"/"&&(kr=Dr+1,Dr!==it.length);)Dr=wr(it,"/",Dr+1);if(-1===kr||nr&&kr<nr.length)return Ge;Ge=Ue.slice(kr);const Wr=wt.slice(kr-1).replace(/[^/]+/g,"").length;if(Wr>0)for(let cn=0;cn<Wr;cn++)Ge=`../${Ge}`;else Ge=`./${Ge}`;return Ge}function Pe(Ge){return function er(Ge){const Xe=oe.httpsDomains;if(!function bt(Ge){return L.test(Ge)||"http"===P.scheme&&tt(Ge)}(Ge))return Ge;const He=Ge.indexOf("/",7);let Ue;if(Ue=-1===He?Ge:Ge.slice(0,He),Ue=Ue.toLowerCase().slice(7),Z.test(Ue)){if(!Ue.endsWith(":80"))return Ge;Ue=Ue.slice(0,-3),Ge=Ge.replace(":80","")}return function Pt(){return"http"===P.scheme}()&&Ue===P.authority&&!z.test(Ge)||(Vt()&&Ue===P.authority||Xe&&Xe.some(it=>Ue===it||Ue.endsWith(`.${it}`))||Vt()&&!ue(Ge))&&(Ge=Mt(Ge)),Ge}(Ge=function Ht(Ge){return Ge.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(Ge=function $t(Ge){if(/^https?:\/\//i.test(Ge)){const Xe=se(Ge);Ge=(Ge=Xe.path.replace(/\/{2,}/g,"/")).replace("/","//"),Xe.query&&(Ge+=`?${Xe.query}`)}return Ge}(Ge=De(Ge=Ge.trim()))))}function je(...Ge){const Xe=Ge.filter(ie.pC);if(!Xe||!Xe.length)return;const He=[];if(Le(Xe[0])){const it=Xe[0],wt=it.indexOf("//");-1!==wt&&(He.push(it.slice(0,wt+1)),function yt(Ge){return X.test(Ge)}(Xe[0])&&(He[0]+="/"),Xe[0]=it.slice(wt+2))}else"/"===Xe[0][0]&&He.push("");const Ue=Xe.reduce((it,wt)=>wt?it.concat(wt.split("/")):it,[]);for(let it=0;it<Ue.length;it++){const wt=Ue[it];".."===wt&&He.length>0&&".."!==He[He.length-1]?He.pop():(!wt&&it===Ue.length-1||wt&&("."!==wt||0===He.length))&&He.push(wt)}return He.join("/")}function rt(Ge,Xe=!1){if(Ce(Ge)||Te(Ge))return null;let He=Ge.indexOf("://");if(-1===He&&tt(Ge))He=2;else{if(-1===He)return null;He+=3}const Ue=Ge.indexOf("/",He);return-1!==Ue&&(Ge=Ge.slice(0,Ue)),Xe&&(Ge=Zt(Ge,!0)),Ge}function Le(Ge){return tt(Ge)||pt(Ge)}function Ce(Ge){return null!=Ge&&"blob:"===Ge.slice(0,5)}function Te(Ge){return"data:"===Ge.slice(0,5)}function Ye(Ge){const Xe=Ae(Ge);if(!Xe||!Xe.isBase64)return null;const He=atob(Xe.data),Ue=new Uint8Array(He.length);for(let it=0;it<He.length;it++)Ue[it]=He.charCodeAt(it);return Ue.buffer}const ct=/^data:(.*?)(;base64)?,(.*)$/;function Ae(Ge){const Xe=Ge.match(ct);if(!Xe)return null;const[,He,Ue,it]=Xe;return{mediaType:He,isBase64:!!Ue,data:it}}function Qe(Ge){return Ge.isBase64?`data:${Ge.mediaType};base64,${Ge.data}`:`data:${Ge.mediaType},${Ge.data}`}function tt(Ge){return null!=Ge&&void 0!==Ge&&"/"===Ge[0]&&"/"===Ge[1]}function pt(Ge){return j.test(Ge)}function mt(Ge){return B.test(Ge)||"https"===P.scheme&&tt(Ge)}function Mt(Ge){return tt(Ge)?`https:${Ge}`:Ge.replace(L,"https:")}function Vt(){return"https"===P.scheme}function Zt(Ge,Xe=!1){return tt(Ge)?Ge.slice(2):(Ge=Ge.replace(j,""),Xe&&Ge.length>1&&"/"===Ge[0]&&"/"===Ge[1]&&(Ge=Ge.slice(2)),Ge)}function vr(Ge){let Xe=0;if(Le(Ge)){const Ue=Ge.indexOf("//");-1!==Ue&&(Xe=Ue+2)}const He=Ge.lastIndexOf("/");return He<Xe?Ge:Ge.slice(0,He+1)}function yr(Ge,Xe){if(!Ge)return"";const He=J(Ge).path.replace(/\/+$/,""),Ue=He.substring(He.lastIndexOf("/")+1);if(null==Xe||!Xe.length)return Ue;const it=new RegExp(`.(${Xe.join("|")})$`,"ig");return Ue.replace(it,"")}function _t(Ge){return Ge.replace(/\/+$/,"")}function lr(Ge,Xe,He){if(!(Xe&&He&&Ge&&Le(Ge)))return Ge;const Ue=Ge.indexOf("//"),it=Ge.indexOf("/",Ue+2),wt=Ge.indexOf(":",Ue+2),nr=Math.min(it<0?Ge.length:it,wt<0?Ge.length:wt);return Ge.slice(Ue+2,nr).toLowerCase()!==Xe.toLowerCase()?Ge:`${Ge.slice(0,Ue+2)}${He}${Ge.slice(nr)}`}function fr(Ge){return"string"==typeof Ge?new V(De(Ge)):(Ge.scheme||(Ge.scheme=P.scheme),Ge)}function ht(Ge){return st.test(Ge)}function St(Ge,Xe){const He=J(Ge),Ue=Object.keys(He.query||{});return Ue.length>0&&Xe&&Xe.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${Ue.join(", ")}.`),He.path}function Nt(Ge,Xe,He){const Ue=J(Ge),it=Ue.query||{};return it[Xe]=String(He),`${Ue.path}?${ee(it)}`}function Wt(Ge,Xe){const He=J(Ge),Ue=He.query||{};for(const wt in Xe)Ue[wt]=Xe[wt];const it=ee(Ue);return it?`${He.path}?${it}`:He.path}function Kt(Ge){if((0,ie.Wi)(Ge))return null;const Xe=Ge.match(Ze);return Xe?Xe[1]:null}const Ze=/.*?\.([^\/]*)$/,st=/(^data:image\/svg|\.svg$)/i},35948:(ut,Oe,C)=>{"use strict";function x(){const T=crypto.getRandomValues(new Uint16Array(8));T[3]=4095&T[3]|16384,T[4]=16383&T[4]|32768;const ne=ie=>T[ie].toString(16);return ne(0)+ne(1)+"-"+ne(2)+"-"+ne(3)+"-"+ne(4)+"-"+ne(5)+ne(6)+ne(7)}C.d(Oe,{D:()=>x})},27e3:(ut,Oe,C)=>{"use strict";C.d(Oe,{S1:()=>te,on:()=>ee,Wy:()=>de,YP:()=>oe,gx:()=>j,Nj:()=>ae,OY:()=>K,PA:()=>B,cm:()=>X,N1:()=>L,Z4:()=>Z,LR:()=>z,tH:()=>le});var x=C(17770),ne=(C(58817),C(10699));const ie=/\?(\.|$)/g;function te(ve,fe,Me,ce){const he=Array.isArray(fe)?fe:fe.indexOf(",")>-1?fe.split(","):[fe],De=oe(ve,fe,Me,ce);for(const xe of he){const Pe=xe.trim().replace(ie,"$1"),je=ve.get(Pe);Me.call(ve,je,je,Pe,ve)}return De}function oe(ve,fe,Me,ce){return ve.watch(fe,Me,ce)}function j(ve,fe,Me,ce){return ye(ve,fe,ge,Me,ce)}function L(ve,fe,Me,ce){return le(ve,fe,ge,Me,ce)}function B(ve,fe,Me,ce){return ye(ve,fe,se,Me,ce)}function X(ve,fe,Me,ce){return le(ve,fe,se,Me,ce)}function Z(ve,fe,Me,ce){return ye(ve,fe,Q,Me,ce)}function z(ve,fe,Me,ce){return le(ve,fe,Q,Me,ce)}function ae(ve,fe,Me,ce){return ye(ve,fe,pe,Me,ce)}function K(ve,fe,Me,ce){return le(ve,fe,pe,Me,ce)}function de(ve,fe,Me,ce){let he=!1;const De=ve.watch(fe,(xe,Pe,je,rt)=>{he||Me.call(ve,xe,Pe,je,rt)},ce);return{remove(){De.remove()},pause(){he=!0},resume(){he=!1}}}function ee(ve,fe,Me,ce,he,De,xe){const Pe={};function je(Le){const Ce=Pe[Le];Ce&&(De&&De(Ce.target,Le,ve,Me),Ce.handle.remove(),delete Pe[Le])}const rt=te(ve,fe,(Le,Ce,Te)=>{je(Te),(0,x.vT)(Le)&&(Pe[Te]={handle:(0,x.on)(Le,Me,ce),target:Le},he&&he(Le,Te,ve,Me))},xe);return{remove(){rt.remove();for(const Le in Pe)je(Le)}}}function ye(ve,fe,Me,ce,he){const De=ve.watch(fe,(xe,Pe,je,rt)=>{Me&&!Me(xe)||null==ce||ce.call(ve,xe,Pe,je,rt)},he);if(Array.isArray(fe))for(const xe of fe){const Pe=ve.get(xe);Me&&Me(Pe)&&(null==ce||ce.call(ve,Pe,Pe,fe,ve))}else{const xe=ve.get(fe);Me&&Me(xe)&&(null==ce||ce.call(ve,xe,xe,fe,ve))}return De}function le(ve,fe,Me,ce,he){const De="function"==typeof ce?ce:null,xe="object"==typeof ce?ce:null;"boolean"==typeof ce&&(he=ce);let Pe,je=!1;function rt(){Pe&&(Pe.remove(),Pe=null)}const Le=(0,ne.dD)();(0,ne.fu)(xe,()=>{rt(),Le.reject((0,ne.zE)())});const Ce={then:Le.promise.then.bind(Le.promise),catch:Le.promise.catch.bind(Le.promise),remove:rt};return Object.freeze(Ce),Pe=ye(ve,fe,Me,(Te,Ye,ct,Ae)=>{je=!0,rt(),De&&De.call(ve,Te,Ye,ct,Ae),Le.resolve({value:Te,oldValue:Ye,propertyName:ct,target:Ae})},he),je&&rt(),Ce}function ge(ve){return!!ve}function se(ve){return!ve}function Q(ve){return!0===ve}function pe(ve){return!1===ve}},93662:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>oe});var x=C(54024),T=C(63290),ne=C(10699),ie=C(89951);const te=T.Z.getLogger("esri.core.workers.Connection");class oe{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(j,L){return new Promise((B,X)=>{let Z=!0;const z=ae=>{(0,ne.k_)(L.signal),Z&&(Z=!1,ae())};this._clients.length=j.length,this._clientPromises.length=j.length;for(let ae=0;ae<j.length;++ae){const K=j[ae];(0,ne.y8)(K)?this._clientPromises[ae]=K.then(V=>(this._clients[ae]=new ie.Z(V,L),z(B),this._clients[ae]),()=>(z(X),null)):(this._clients[ae]=new ie.Z(K,L),this._clientPromises[ae]=Promise.resolve(this._clients[ae]),z(B))}})}broadcast(j,L,B){const X=new Array(this._clientPromises.length);for(let Z=0;Z<this._clientPromises.length;++Z)X[Z]=this._clientPromises[Z].then(ae=>ae.invoke(j,L,B));return X}close(){for(const j of this._clientPromises)j.then(L=>L.close());this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let j;for(let L=0;L<this._clients.length;++L){const B=this._clients[L];if(B){if(!B.isBusy())return Promise.resolve(B)}else j=j||[],j.push(this._clientPromises[L])}return j?Promise.race(j):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(j,L,B){let X=null;return Array.isArray(B)?(te.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),X={transferList:B}):X=B,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then(Z=>Z.invoke(j,L,X))}on(j,L){return Promise.all(this._clientPromises).then(()=>(0,x.AL)(this._clients.map(B=>B.on(j,L))))}openPorts(){return new Promise(j=>{const L=new Array(this._clientPromises.length);let B=L.length;for(let X=0;X<this._clientPromises.length;++X)this._clientPromises[X].then(Z=>{L[X]=Z.openPort(),0==--B&&j(L)})})}get test(){return{numClients:this._clients.length}}}},89951:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>V});var x=C(24263),T=C(26584),ne=C(17770),ie=C(62208),te=C(10699),oe=C(13126),Y=C(38365);const j={statsWorker:()=>Promise.all([C.e(3930),C.e(4135)]).then(C.bind(C,44135)),geometryEngineWorker:()=>Promise.all([C.e(4918),C.e(8592),C.e(1843)]).then(C.bind(C,28632)),CSVSourceWorker:()=>Promise.all([C.e(410),C.e(3930),C.e(8330),C.e(3222),C.e(9155)]).then(C.bind(C,39155)),EdgeProcessingWorker:()=>Promise.all([C.e(479),C.e(8592),C.e(8947)]).then(C.bind(C,36239)),ElevationSamplerWorker:()=>Promise.all([C.e(479),C.e(853),C.e(8149)]).then(C.bind(C,28149)),FeatureServiceSnappingSourceWorker:()=>Promise.all([C.e(410),C.e(3930),C.e(8330),C.e(3222),C.e(6210)]).then(C.bind(C,56210)),GeoJSONSourceWorker:()=>Promise.all([C.e(410),C.e(3930),C.e(8330),C.e(3222),C.e(8592),C.e(4079)]).then(C.bind(C,84079)),LercWorker:()=>C.e(7300).then(C.bind(C,57300)),MemorySourceWorker:()=>Promise.all([C.e(410),C.e(3930),C.e(8330),C.e(3222),C.e(8592),C.e(7728)]).then(C.bind(C,7728)),PBFDecoderWorker:()=>C.e(6089).then(C.bind(C,46089)),Pipeline:()=>Promise.all([C.e(3755),C.e(410),C.e(1572),C.e(3930),C.e(8330),C.e(9628),C.e(8592),C.e(7249)]).then(C.bind(C,87249)),PointCloudWorker:()=>Promise.all([C.e(8592),C.e(1107)]).then(C.bind(C,61107)),RasterWorker:()=>Promise.all([C.e(7692),C.e(6926),C.e(581),C.e(7897),C.e(5976)]).then(C.bind(C,15976)),SceneLayerWorker:()=>C.e(375).then(C.bind(C,30375)),WFSSourceWorker:()=>Promise.all([C.e(410),C.e(3930),C.e(8330),C.e(3222),C.e(3774),C.e(8592),C.e(2305)]).then(C.bind(C,62305)),WorkerTileHandler:()=>Promise.all([C.e(3751),C.e(4522),C.e(8364),C.e(8032)]).then(C.bind(C,90195))},{CLOSE:L,ABORT:B,INVOKE:X,RESPONSE:Z,OPEN_PORT:z,ON:ae}=oe.Cs;class K{constructor(F){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=F,this._timer=null,this._process=this._process.bind(this)}push(F){F.type===oe.Cs.ABORT?this._cancelledJobIds.add(F.jobId):(this._invokeMessages.push(F),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const F of this._invokeMessages)this._cancelledJobIds.has(F.jobId)||this._invoke(F);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class V{constructor(F,$){this._port=F,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new K(J=>this._onInvokeMessage(J)),this._client=$.client,this._onMessage=this._onMessage.bind(this),this._channel=$.channel,this._schedule=$.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(F){const $=new MessageChannel;let J;J="function"==typeof F?new F:"default"in F&&"function"==typeof F.default?new F.default:F;const H=new V($.port1,{channel:$,client:J});return"object"==typeof J&&"remoteClient"in J&&(J.remoteClient=H),V.clients.set(H,J),$.port2}static loadWorker(F){const $=j[F];return $?$():Promise.resolve(null)}close(){this._post({type:L}),this._close()}isBusy(){return this._outJobs.size>0}invoke(F,$,J){const H=J&&J.signal,de=J&&J.transferList;if(!this._port)return Promise.reject(new T.Z("worker:port-closed",`Cannot call invoke('${F}'), port is closed`,{methodName:F,data:$}));const ee=(0,oe.jt)();return new Promise((ye,le)=>{const ge=(0,te.$F)(H,()=>{var Q;const pe=this._outJobs.get(ee);pe&&(this._outJobs.delete(ee),null==(Q=pe.abortHandle)||Q.remove(),this._post({type:B,jobId:ee}),le((0,te.zE)()))});this._outJobs.set(ee,{resolve:ye,reject:le,abortHandle:ge,debugInfo:F}),this._post({type:X,jobId:ee,methodName:F,abortable:null!=H},$,de)})}on(F,$){const J=new MessageChannel;function H(de){$(de.data)}return this._port.postMessage({type:oe.Cs.ON,eventType:F,port:J.port2},[J.port2]),J.port1.addEventListener("message",H),J.port1.start(),{remove(){J.port1.postMessage({type:oe.Cs.CLOSE}),J.port1.close(),J.port1.removeEventListener("message",H)}}}openPort(){const F=new MessageChannel;return this._post({type:z,port:F.port2}),F.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(F=>{var $;null==($=F.abortHandle)||$.remove(),F.reject((0,te.zE)(`Worker closing, aborting job calling '${F.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(F){(0,ie.pC)(this._schedule)?this._schedule(()=>this._processMessage(F)):this._processMessage(F)}_processMessage(F){const $=(0,oe.QM)(F);if($)switch($.type){case Z:this._onResponseMessage($);break;case X:this._invokeQueue.push($);break;case B:this._onAbortMessage($);break;case L:this._onCloseMessage();break;case z:this._onOpenPortMessage($);break;case ae:this._onOnMessage($)}}_onAbortMessage(F){const $=this._inJobs,J=F.jobId,H=$.get(J);this._invokeQueue.push(F),H&&(H.controller&&H.controller.abort(),$.delete(J))}_onCloseMessage(){const F=this._client;this._close(),F&&"destroy"in F&&V.clients.get(this)===F&&F.destroy(),V.clients.delete(this),F&&F.remoteClient&&(F.remoteClient=null)}_onInvokeMessage(F){const{methodName:$,jobId:J,data:H,abortable:de}=F,ee=de?new AbortController:null,ye=this._inJobs;let le,ge=this._client,se=ge[$];try{if(!se&&$&&-1!==$.indexOf(".")){const Q=$.split(".");for(let pe=0;pe<Q.length-1;pe++)ge=ge[Q[pe]],se=ge[Q[pe+1]]}if("function"!=typeof se)throw new TypeError(`${$} is not a function`);le=se.call(ge,H,{client:this,signal:ee?ee.signal:null})}catch(Q){return void this._post({type:Z,jobId:J,error:(0,oe.AB)(Q)})}(0,te.y8)(le)?(ye.set(J,{controller:ee,promise:le}),le.then(Q=>{ye.has(J)&&(ye.delete(J),this._post({type:Z,jobId:J},Q))},Q=>{ye.has(J)&&(ye.delete(J),(0,te.D_)(Q)||this._post({type:Z,jobId:J,error:(0,oe.AB)(Q||{message:`Error encountered at method ${$}`})}))})):this._post({type:Z,jobId:J},le)}_onOpenPortMessage(F){new V(F.port,{client:this._client})}_onOnMessage(F){const{port:$}=F,J=this._client.on(F.eventType,de=>{$.postMessage(de)}),H=(0,ne.on)(F.port,"message",de=>{(0,oe.QM)(de).type===oe.Cs.CLOSE&&(H.remove(),J.remove(),$.close())})}_onResponseMessage(F){var $;const{jobId:J,error:H,data:de}=F,ee=this._outJobs;if(!ee.has(J))return;const ye=ee.get(J);ee.delete(J),null==($=ye.abortHandle)||$.remove(),H?ye.reject(T.Z.fromJSON(JSON.parse(H))):ye.resolve(de)}_post(F,$,J){return(0,oe.oi)(this._port,F,$,J)}}V.kernelInfo={revision:Y.$,version:x.i8,buildDate:Y.r},V.clients=new Map},13126:(ut,Oe,C)=>{"use strict";C.d(Oe,{Cs:()=>T,jt:()=>ie,oi:()=>Y,QM:()=>j,AB:()=>oe});var T,X,x=C(8314);(X=T||(T={}))[X.HANDSHAKE=0]="HANDSHAKE",X[X.OPEN=1]="OPEN",X[X.OPENED=2]="OPENED",X[X.RESPONSE=3]="RESPONSE",X[X.INVOKE=4]="INVOKE",X[X.ABORT=5]="ABORT",X[X.CLOSE=6]="CLOSE",X[X.OPEN_PORT=7]="OPEN_PORT",X[X.ON=8]="ON";let ne=0;function ie(){return ne++}function oe(X){return X?"string"==typeof X?JSON.stringify({name:"message",message:X}):X.toJSON?JSON.stringify(X):JSON.stringify({name:X.name,message:X.message,details:X.details||{stack:X.stack}}):null}function Y(X,Z,z,ae){if(Z.type===T.OPEN_PORT)return void X.postMessage(Z,[Z.port]);if(Z.type!==T.INVOKE&&Z.type!==T.RESPONSE)return void X.postMessage(Z);let K;!function te(X){return X&&"object"==typeof X&&("result"in X||"transferList"in X)}(z)?(K=L(ae),Z.data=z):(K=L(z.transferList),Z.data=z.result),K?X.postMessage(Z,K):X.postMessage(Z)}function j(X){if(!X)return null;const Z=X.data;return Z?"string"==typeof Z?JSON.parse(Z):Z:null}function L(X){if(!X||!X.length)return null;if((0,x.Z)("esri-workers-arraybuffer-transfer"))return X;const Z=X.filter(z=>!function B(X){return X instanceof ArrayBuffer||X&&X.constructor&&"ArrayBuffer"===X.constructor.name}(z));return Z.length?Z:null}},59289:(ut,Oe,C)=>{"use strict";C.d(Oe,{j2:()=>Ye,bA:()=>Je});var x=C(15861),T=C(26584),ne=C(8314),ie=C(10699),te=C(93662),oe=C(89951),Y=C(24263),j=C(63290),L=C(13126),B=C(54346),X=C(59318),z=(C(52515),C(21726));const K={};var F=C(79682);class ${constructor(){const yt=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(at=>{this[at]=(...Mt)=>yt[at](...Mt)})}}class J{constructor(){this._dispatcher=new $,this._workerPostMessage({type:L.Cs.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(yt){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=yt,yt&&this.addEventListener("message",yt)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(yt){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=yt,yt&&this.addEventListener("messageerror",yt)}get onerror(){return this._onerrorHandler}set onerror(yt){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=yt,yt&&this.addEventListener("error",yt)}postMessage(yt){(0,F.Y)(()=>{this._workerMessageHandler(new MessageEvent("message",{data:yt}))})}dispatchEvent(yt){return this._dispatcher.dispatchEvent(yt)}addEventListener(yt,at,Mt){this._dispatcher.addEventListener(yt,at,Mt)}removeEventListener(yt,at,Mt){this._dispatcher.removeEventListener(yt,at,Mt)}_workerPostMessage(yt){(0,F.Y)(()=>{this.dispatchEvent(new MessageEvent("message",{data:yt}))})}_workerMessageHandler(yt){var at=this;return(0,x.Z)(function*(){const Mt=(0,L.QM)(yt);if(Mt&&Mt.type===L.Cs.OPEN){const{modulePath:Pt,jobId:Vt}=Mt;let Zt=yield oe.Z.loadWorker(Pt);Zt||(Zt=yield import(Pt));const rr=oe.Z.connect(Zt);at._workerPostMessage({type:L.Cs.OPENED,jobId:Vt,data:rr})}})()}}var H=C(56683),de=C(38365);const ee=j.Z.getLogger("esri.core.workers"),{HANDSHAKE:ye}=L.Cs,le='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let ge,se;const Q="Failed to create Worker. Fallback to execute module in main thread";function ue(){return(ue=(0,x.Z)(function*(){if(!(0,ne.Z)("esri-workers"))return me(new J);if(!ge&&!se)try{const yt=le.replace('"{CONFIGURATION}"',`'${fe()}'`);ge=URL.createObjectURL(new Blob([yt],{type:"text/javascript"}))}catch(yt){se=yt||{}}let bt;if(ge)try{bt=new Worker(ge,{name:"esri-worker-"+Me++})}catch(yt){ee.warn(Q,se),bt=new J}else ee.warn(Q,se),bt=new J;return me(bt)})).apply(this,arguments)}function me(bt){return ve.apply(this,arguments)}function ve(){return(ve=(0,x.Z)(function*(bt){return new Promise(yt=>{function at(Pt){const Vt=(0,L.QM)(Pt);Vt&&Vt.type===ye&&(bt.removeEventListener("message",at),bt.removeEventListener("error",Mt),yt(bt))}function Mt(Pt){Pt.preventDefault(),bt.removeEventListener("message",at),bt.removeEventListener("error",Mt),ee.warn("Failed to create Worker. Fallback to execute module in main thread",Pt),(bt=new J).addEventListener("message",at),bt.addEventListener("error",Mt)}bt.addEventListener("message",at),bt.addEventListener("error",Mt)})})).apply(this,arguments)}function fe(){let bt;if(null!=X.Z.default){const Pt=Ot({},X.Z);delete Pt.default,bt=JSON.parse(JSON.stringify(Pt))}else bt=JSON.parse(JSON.stringify(X.Z));bt.assetsPath=(0,z.hF)(bt.assetsPath),bt.request.interceptors=[],bt.log.interceptors=[],bt.locale=(0,H.Kd)(),bt.has={"esri-csp-restrictions":(0,ne.Z)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,ne.Z)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":(0,ne.Z)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":(0,ne.Z)("featurelayer-pbf"),"featurelayer-simplify-thresholds":(0,ne.Z)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,ne.Z)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,ne.Z)("featurelayer-simplify-mobile-factor"),"esri-atomics":(0,ne.Z)("esri-atomics"),"esri-shared-array-buffer":(0,ne.Z)("esri-shared-array-buffer"),"esri-tiles-debug":(0,ne.Z)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,ne.Z)("esri-workers-arraybuffer-transfer"),"host-webworker":1},bt.workers.loaderUrl&&(bt.workers.loaderUrl=(0,z.hF)(bt.workers.loaderUrl)),bt.workers.workerPath=(0,z.hF)(bt.workers.workerPath?bt.workers.workerPath:(0,B.V)("esri/core/workers/RemoteClient.js"));const yt=X.Z.workers.loaderConfig,at=function P(bt){var yt;const at={async:bt.async,isDebug:bt.isDebug,locale:bt.locale,baseUrl:bt.baseUrl,has:Ot({},bt.has),map:Ot({},bt.map),packages:bt.packages&&bt.packages.concat()||[],paths:Ot({},bt.paths)};return bt.hasOwnProperty("async")||(at.async=!0),bt.hasOwnProperty("isDebug")||(at.isDebug=!1),bt.baseUrl||(at.baseUrl=K.baseUrl),null==(yt=K.packages)||yt.forEach(Mt=>{!function V(bt,yt){for(const at of bt)if(at.name===yt.name)return;bt.push(yt)}(at.packages,Mt)}),at}({baseUrl:null==yt?void 0:yt.baseUrl,locale:(0,H.Kd)(),has:Ot({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},null==yt?void 0:yt.has),map:Ot({},null==yt?void 0:yt.map),paths:Ot({},null==yt?void 0:yt.paths),packages:(null==yt?void 0:yt.packages)||[]});return JSON.stringify({esriConfig:bt,loaderConfig:at,kernelInfo:{version:Y.i8,buildDate:de.r,revision:de.$}})}let Me=0;const ce=j.Z.getLogger("esri.core.workers"),{ABORT:he,INVOKE:De,OPEN:xe,OPENED:Pe,RESPONSE:je}=L.Cs;class rt{constructor(yt,at){this._outJobs=new Map,this._inJobs=new Map,this.worker=yt,this.id=at,yt.addEventListener("message",this._onMessage.bind(this)),yt.addEventListener("error",Mt=>{Mt.preventDefault(),ce.error(Mt)})}static create(yt){return(0,x.Z)(function*(){const at=yield function pe(){return ue.apply(this,arguments)}();return new rt(at,yt)})()}terminate(){this.worker.terminate()}open(yt,at={}){var Mt=this;return(0,x.Z)(function*(){const{signal:Pt}=at,Vt=(0,L.jt)();return new Promise((Zt,rr)=>{const vr={resolve:Zt,reject:rr,abortHandle:(0,ie.$F)(Pt,()=>{Mt._outJobs.delete(Vt),Mt._post({type:he,jobId:Vt})})};Mt._outJobs.set(Vt,vr),Mt._post({type:xe,jobId:Vt,modulePath:yt})})})()}_onMessage(yt){const at=(0,L.QM)(yt);if(at)switch(at.type){case Pe:this._onOpenedMessage(at);break;case je:this._onResponseMessage(at);break;case he:this._onAbortMessage(at);break;case De:this._onInvokeMessage(at)}}_onAbortMessage(yt){const at=this._inJobs,Mt=yt.jobId,Pt=at.get(Mt);Pt&&(Pt.controller&&Pt.controller.abort(),at.delete(Mt))}_onInvokeMessage(yt){const{methodName:at,jobId:Mt,data:Pt,abortable:Vt}=yt,Zt=Vt?new AbortController:null,rr=this._inJobs,vr=Y.Nv[at];let yr;try{if("function"!=typeof vr)throw new TypeError(`${at} is not a function`);yr=vr.call(null,Pt,{signal:Zt?Zt.signal:null})}catch(gr){return void this._post({type:je,jobId:Mt,error:(0,L.AB)(gr)})}(0,ie.y8)(yr)?(rr.set(Mt,{controller:Zt,promise:yr}),yr.then(gr=>{rr.has(Mt)&&(rr.delete(Mt),this._post({type:je,jobId:Mt},gr))},gr=>{rr.has(Mt)&&(rr.delete(Mt),gr||(gr={message:"Error encountered at method"+at}),(0,ie.D_)(gr)||this._post({type:je,jobId:Mt,error:(0,L.AB)(gr||{message:`Error encountered at method ${at}`})}))})):this._post({type:je,jobId:Mt},yr)}_onOpenedMessage(yt){var at;const{jobId:Mt,data:Pt}=yt,Vt=this._outJobs.get(Mt);Vt&&(this._outJobs.delete(Mt),null==(at=Vt.abortHandle)||at.remove(),Vt.resolve(Pt))}_onResponseMessage(yt){var at;const{jobId:Mt,error:Pt,data:Vt}=yt,Zt=this._outJobs.get(Mt);Zt&&(this._outJobs.delete(Mt),null==(at=Zt.abortHandle)||at.remove(),Pt?Zt.reject(T.Z.fromJSON(JSON.parse(Pt))):Zt.resolve(Vt))}_post(yt,at,Mt){return(0,L.oi)(this.worker,yt,at,Mt)}}let Le=(0,ne.Z)("esri-workers-debug")?1:(0,ne.Z)("host-browser")?navigator.hardwareConcurrency-1:0;Le||(Le=(0,ne.Z)("safari")&&(0,ne.Z)("mac")||(0,ne.Z)("trident")?7:2);let Ce=0;const Te=[];function Ye(){pt()}function Ae(bt,yt){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,x.Z)(function*(bt,yt){const at=new te.Z;return yield at.open(bt,yt),at})).apply(this,arguments)}function Je(bt){return re.apply(this,arguments)}function re(){return(re=(0,x.Z)(function*(bt,yt={}){if("string"!=typeof bt)throw new T.Z("workers:undefined-module","modulePath is missing");let at=yt.strategy||"distributed";if((0,ne.Z)("host-webworker")&&!(0,ne.Z)("esri-workers")&&(at="local"),"local"===at){let Mt=yield oe.Z.loadWorker(bt);Mt||(Mt=yield import(bt)),(0,ie.k_)(yt.signal);const Pt=yt.client||Mt;return Ae([oe.Z.connect(Mt)],nn(Ot({},yt),{client:Pt}))}if(yield pt(),(0,ie.k_)(yt.signal),"dedicated"===at){const Mt=Ce++%Le;return Ae([yield Te[Mt].open(bt,yt)],yt)}if(yt.maxNumWorkers&&yt.maxNumWorkers>0){const Mt=Math.min(yt.maxNumWorkers,Le);if(Mt<Le){const Pt=new Array(Mt);for(let Vt=0;Vt<Mt;++Vt){const Zt=Ce++%Le;Pt[Vt]=Te[Zt].open(bt,yt)}return Ae(Pt,yt)}}return Ae(Te.map(Mt=>Mt.open(bt,yt)),yt)})).apply(this,arguments)}let $e,tt=null;function pt(){return mt.apply(this,arguments)}function mt(){return(mt=(0,x.Z)(function*(){if(tt)return tt;$e=new AbortController;const bt=[];for(let yt=0;yt<Le;yt++){const at=rt.create(yt).then(Mt=>(Te[yt]=Mt,Mt));bt.push(at)}return tt=Promise.all(bt),tt})).apply(this,arguments)}},29132:(ut,Oe,C)=>{"use strict";C.d(Oe,{qM:()=>Z});var x=C(90912),T=C(2004),ne=C(21674),ie=C(72854),te=C(49672),oe=C(37118),Y=C(55214);C(65234),C(71774),C(91179);const Z={base:ne.Z,key:"type",typeMap:{extent:T.Z,multipoint:ie.Z,point:te.Z,polyline:Y.Z,polygon:oe.Z}};(0,x.N7)(Z)},2004:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>J});var V,x=C(17626),T=C(62208),ne=C(77275),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898)),L=C(21674),B=C(49672),X=C(65234),Z=C(33190),z=C(11519),ae=C(37053),K=C(46367);function F(H,de,ee){return null==de?ee:null==ee?de:H(de,ee)}let $=V=class extends L.Z{constructor(...H){super(...H),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(H,de,ee,ye,le){return function P(H){return H&&("esri.geometry.SpatialReference"===H.declaredClass||null!=H.wkid)}(H)?{spatialReference:H,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof H?(H.spatialReference=null==H.spatialReference?X.Z.WGS84:H.spatialReference,H):{xmin:H,ymin:de,xmax:ee,ymax:ye,spatialReference:null==le?X.Z.WGS84:le}}static fromBounds(H,de){return new V({xmin:H[0],ymin:H[1],xmax:H[2],ymax:H[3],spatialReference:de})}static fromPoint(H){return new V({xmin:H.x,ymin:H.y,zmin:H.z,xmax:H.x,ymax:H.y,zmax:H.z,spatialReference:H.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const H=new B.Z({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(H.z=.5*(this.zmin+this.zmax)),this.hasM&&(H.m=.5*(this.mmin+this.mmax)),H}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(H){const de=this.center;return null!=H.z&&this.hasZ?this.offset(H.x-de.x,H.y-de.y,H.z-de.z):this.offset(H.x-de.x,H.y-de.y)}clone(){const H=new V;return H.xmin=this.xmin,H.ymin=this.ymin,H.xmax=this.xmax,H.ymax=this.ymax,H.spatialReference=this.spatialReference,null!=this.zmin&&(H.zmin=this.zmin,H.zmax=this.zmax),null!=this.mmin&&(H.mmin=this.mmin,H.mmax=this.mmax),H}contains(H){if(!H)return!1;const de=this.spatialReference,ee=H.spatialReference;return de&&ee&&!de.equals(ee)&&(0,K.Q8)(de,ee)&&(H=de.isWebMercator?(0,K.$)(H):(0,K.Sx)(H,!0)),"point"===H.type?(0,Z.aV)(this,H):"extent"===H.type&&(0,Z.uP)(this,H)}equals(H){if(this===H)return!0;if((0,T.Wi)(H))return!1;const de=this.spatialReference,ee=H.spatialReference;return de&&ee&&!de.equals(ee)&&(0,K.Q8)(de,ee)&&(H=de.isWebMercator?(0,K.$)(H):(0,K.Sx)(H,!0)),this.xmin===H.xmin&&this.ymin===H.ymin&&this.zmin===H.zmin&&this.mmin===H.mmin&&this.xmax===H.xmax&&this.ymax===H.ymax&&this.zmax===H.zmax&&this.mmax===H.mmax}expand(H){const de=.5*(1-H),ee=this.width*de,ye=this.height*de;if(this.xmin+=ee,this.ymin+=ye,this.xmax-=ee,this.ymax-=ye,this.hasZ){const le=(this.zmax-this.zmin)*de;this.zmin+=le,this.zmax-=le}if(this.hasM){const le=(this.mmax-this.mmin)*de;this.mmin+=le,this.mmax-=le}return this}intersects(H){if((0,T.Wi)(H))return!1;"mesh"===H.type&&(H=H.extent);const de=this.spatialReference,ee=H.spatialReference;return de&&ee&&!de.equals(ee)&&(0,K.Q8)(de,ee)&&(H=de.isWebMercator?(0,K.$)(H):(0,K.Sx)(H,!0)),(0,z.IY)(H.type)(this,H)}normalize(){const H=this._normalize(!1,!0);return Array.isArray(H)?H:[H]}offset(H,de,ee){return this.xmin+=H,this.ymin+=de,this.xmax+=H,this.ymax+=de,null!=ee&&(this.zmin+=ee,this.zmax+=ee),this}shiftCentralMeridian(){return this._normalize(!0)}union(H){return this===H||(this.xmin=Math.min(this.xmin,H.xmin),this.ymin=Math.min(this.ymin,H.ymin),this.xmax=Math.max(this.xmax,H.xmax),this.ymax=Math.max(this.ymax,H.ymax),(this.hasZ||H.hasZ)&&(this.zmin=F(Math.min,this.zmin,H.zmin),this.zmax=F(Math.max,this.zmax,H.zmax)),(this.hasM||H.hasM)&&(this.mmin=F(Math.min,this.mmin,H.mmin),this.mmax=F(Math.max,this.mmax,H.mmax))),this}intersection(H){return this===H?this:(0,T.Wi)(H)||!this.intersects(H)?null:(this.xmin=Math.max(this.xmin,H.xmin),this.ymin=Math.max(this.ymin,H.ymin),this.xmax=Math.min(this.xmax,H.xmax),this.ymax=Math.min(this.ymax,H.ymax),(this.hasZ||H.hasZ)&&(this.zmin=F(Math.max,this.zmin,H.zmin),this.zmax=F(Math.min,this.zmax,H.zmax)),(this.hasM||H.hasM)&&(this.mmin=F(Math.max,this.mmin,H.mmin),this.mmax=F(Math.min,this.mmax,H.mmax)),this)}toJSON(H){return this.write({},H)}_shiftCM(H=(0,ae.C5)(this.spatialReference)){if(!H||!this.spatialReference)return this;const de=this.spatialReference,ee=this._getCM(H);if(ee){const ye=de.isWebMercator?(0,K.Sx)(ee):ee;this.xmin-=ee.x,this.xmax-=ee.x,de.isWebMercator||(ye.x=this._normalizeX(ye.x,H).x),this.spatialReference=new X.Z((0,ne.gx)(de.isWGS84?H.altTemplate:H.wkTemplate,{Central_Meridian:ye.x}))}return this}_getCM(H){let de=null;const[ee,ye]=H.valid,le=this.xmin,ge=this.xmax;return le>=ee&&le<=ye&&ge>=ee&&ge<=ye||(de=this.center),de}_normalize(H,de,ee){const ye=this.spatialReference;if(!ye)return this;if(!(ee=ee||(0,ae.C5)(ye)))return this;const le=this._getParts(ee).map(Q=>Q.extent);if(le.length<2)return le[0]||this;if(le.length>2)return H?this._shiftCM(ee):this.set({xmin:ee.valid[0],xmax:ee.valid[1]});if(H)return this._shiftCM(ee);if(de)return le;let ge=!0,se=!0;return le.forEach(Q=>{Q.hasZ||(ge=!1),Q.hasM||(se=!1)}),{rings:le.map(Q=>{const pe=[[Q.xmin,Q.ymin],[Q.xmin,Q.ymax],[Q.xmax,Q.ymax],[Q.xmax,Q.ymin],[Q.xmin,Q.ymin]];if(ge){const ue=(Q.zmax-Q.zmin)/2;for(let me=0;me<pe.length;me++)pe[me].push(ue)}if(se){const ue=(Q.mmax-Q.mmin)/2;for(let me=0;me<pe.length;me++)pe[me].push(ue)}return pe}),hasZ:ge,hasM:se,spatialReference:ye}}_getParts(H){let de=this.cache._parts;if(!de){de=[];const{ymin:le,ymax:ge,spatialReference:se}=this,Q=this.width,pe=this.xmin,ue=this.xmax;let me;H=H||(0,ae.C5)(se);const[ve,fe]=H.valid;me=this._normalizeX(this.xmin,H);const Me=me.x,ce=me.frameId;me=this._normalizeX(this.xmax,H);const he=me.x,De=me.frameId,xe=Me===he&&Q>0;if(Q>2*fe){const Pe=new V(pe<ue?Me:he,le,fe,ge,se),je=new V(ve,le,pe<ue?he:Me,ge,se),rt=new V(0,le,fe,ge,se),Le=new V(ve,le,0,ge,se),Ce=[],Te=[];Pe.contains(rt)&&Ce.push(ce),Pe.contains(Le)&&Te.push(ce),je.contains(rt)&&Ce.push(De),je.contains(Le)&&Te.push(De);for(let Ye=ce+1;Ye<De;Ye++)Ce.push(Ye),Te.push(Ye);de.push({extent:Pe,frameIds:[ce]},{extent:je,frameIds:[De]},{extent:rt,frameIds:Ce},{extent:Le,frameIds:Te})}else Me>he||xe?de.push({extent:new V(Me,le,fe,ge,se),frameIds:[ce]},{extent:new V(ve,le,he,ge,se),frameIds:[De]}):de.push({extent:new V(Me,le,he,ge,se),frameIds:[ce]});this.cache._parts=de}const ee=this.hasZ,ye=this.hasM;if(ee||ye){const le={};ee&&(le.zmin=this.zmin,le.zmax=this.zmax),ye&&(le.mmin=this.mmin,le.mmax=this.mmax);for(let ge=0;ge<de.length;ge++)de[ge].extent.set(le)}return de}_normalizeX(H,de){const[ee,ye]=de.valid,le=2*ye;let ge,se=0;return H>ye?(ge=Math.ceil(Math.abs(H-ye)/le),H-=ge*le,se=ge):H<ee&&(ge=Math.ceil(Math.abs(H-ee)/le),H+=ge*le,se=-ge),{x:H,frameId:se}}};(0,x._)([(0,ie.Cb)({readOnly:!0})],$.prototype,"cache",null),(0,x._)([(0,ie.Cb)({readOnly:!0})],$.prototype,"center",null),(0,x._)([(0,ie.Cb)({readOnly:!0})],$.prototype,"extent",null),(0,x._)([(0,ie.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],$.prototype,"hasM",null),(0,x._)([(0,ie.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],$.prototype,"hasZ",null),(0,x._)([(0,ie.Cb)({readOnly:!0})],$.prototype,"height",null),(0,x._)([(0,ie.Cb)({readOnly:!0})],$.prototype,"width",null),(0,x._)([(0,ie.Cb)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],$.prototype,"xmin",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0}})],$.prototype,"ymin",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],$.prototype,"mmin",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$.prototype,"zmin",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0}})],$.prototype,"xmax",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0}})],$.prototype,"ymax",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],$.prototype,"mmax",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$.prototype,"zmax",void 0),$=V=(0,x._)([(0,j.j)("esri.geometry.Extent")],$),$.prototype.toJSON.isDefaultToJSON=!0;const J=$},21674:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(68653)),j=C(76898),L=C(65234);let B=class extends T.wq{constructor(...Z){super(...Z),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=L.Z.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(Z,z){if(Z instanceof L.Z)return Z;if(null!=Z){const ae=new L.Z;return ae.read(Z,z),ae}return Z}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(Z){return this.cache[Z]}setCacheValue(Z,z){this.cache[Z]=z}};(0,x._)([(0,ne.Cb)()],B.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({readOnly:!0})],B.prototype,"cache",null),(0,x._)([(0,ne.Cb)({readOnly:!0})],B.prototype,"extent",null),(0,x._)([(0,ne.Cb)({type:Boolean,json:{write:{overridePolicy:Z=>({enabled:Z})}}})],B.prototype,"hasM",void 0),(0,x._)([(0,ne.Cb)({type:Boolean,json:{write:{overridePolicy:Z=>({enabled:Z})}}})],B.prototype,"hasZ",void 0),(0,x._)([(0,ne.Cb)({type:L.Z,json:{write:!0}})],B.prototype,"spatialReference",void 0),(0,x._)([(0,Y.r)("spatialReference")],B.prototype,"readSpatialReference",null),B=(0,x._)([(0,j.j)("esri.geometry.Geometry")],B);const X=B},79334:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>J});var z,x=C(17626),T=C(85931),ne=C(2076),ie=C(86162),te=C(16730),oe=C(14889),Y=C(77712),B=(C(8314),C(90912),C(68653)),X=C(76898),Z=C(99433);const ae=(0,ne.wY)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),K=ae.jsonValues.slice();(0,T.e$)(K,"orthometric");const V=(0,ne.wY)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let P=z=class extends ie.wq{constructor(H){super(H),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(H,de,ee){return ae.write(H,de,ee)}readHeightModel(H,de,ee){return ae.read(H)||(ee&&ee.messages&&ee.messages.push(function $(H,de){return new oe.Z("height-model:unsupported",`Height model of value '${H}' is not supported`,de)}(H,{context:ee})),null)}readHeightUnit(H,de,ee){return V.read(H)||(ee&&ee.messages&&ee.messages.push(F(H,{context:ee})),null)}readHeightUnitService(H,de,ee){return(0,te.$C)(H)||V.read(H)||(ee&&ee.messages&&ee.messages.push(F(H,{context:ee})),null)}readVertCRS(H,de){return de.vertCRS||de.ellipsoid||de.geoid}clone(){return new z({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(H){return!!H&&(this===H||this.heightModel===H.heightModel&&this.heightUnit===H.heightUnit&&this.vertCRS===H.vertCRS)}static deriveUnitFromSR(H,de){const ee=(0,te.cM)(de);return new z({heightModel:H.heightModel,heightUnit:ee,vertCRS:H.vertCRS})}write(H,de){return de=Ot({origin:"web-scene"},de),super.write(H,de)}static fromJSON(H){if(!H)return null;const de=new z;return de.read(H,{origin:"web-scene"}),de}};function F(H,de){return new oe.Z("height-unit:unsupported",`Height unit of value '${H}' is not supported`,de)}(0,x._)([(0,Y.Cb)({type:ae.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:K,default:"ellipsoidal"}}}})],P.prototype,"heightModel",void 0),(0,x._)([(0,Z.c)("web-scene","heightModel")],P.prototype,"writeHeightModel",null),(0,x._)([(0,B.r)(["web-scene","service"],"heightModel")],P.prototype,"readHeightModel",null),(0,x._)([(0,Y.Cb)({type:V.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:V.jsonValues,write:V.write}}}})],P.prototype,"heightUnit",void 0),(0,x._)([(0,B.r)("web-scene","heightUnit")],P.prototype,"readHeightUnit",null),(0,x._)([(0,B.r)("service","heightUnit")],P.prototype,"readHeightUnitService",null),(0,x._)([(0,Y.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],P.prototype,"vertCRS",void 0),(0,x._)([(0,B.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],P.prototype,"readVertCRS",null),P=z=(0,x._)([(0,X.j)("esri.geometry.HeightModelInfo")],P);const J=P},72854:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var X,x=C(17626),T=C(58817),ne=C(77712),te=(C(90912),C(76898)),oe=C(99433),Y=C(2004),j=C(21674),L=C(49672),B=C(18945);function Z(V){return(P,F)=>null==P?F:null==F?P:V(P,F)}let ae=X=class extends j.Z{constructor(...V){super(...V),this.points=[],this.type="multipoint"}normalizeCtorArgs(V,P){if(!V&&!P)return null;const F={};Array.isArray(V)?(F.points=V,F.spatialReference=P):function z(V){return V&&("esri.geometry.SpatialReference"===V.declaredClass||null!=V.wkid)}(V)?F.spatialReference=V:(V.points&&(F.points=V.points),V.spatialReference&&(F.spatialReference=V.spatialReference),V.hasZ&&(F.hasZ=V.hasZ),V.hasM&&(F.hasM=V.hasM));const $=F.points&&F.points[0];return $&&(void 0===F.hasZ&&void 0===F.hasM?(F.hasZ=$.length>2,F.hasM=!1):void 0===F.hasZ?F.hasZ=$.length>3:void 0===F.hasM&&(F.hasM=$.length>3)),F}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const V=this.points;if(!V.length)return null;const P=new Y.Z,F=this.hasZ,$=this.hasM,J=F?3:2,H=V[0],de=Z(Math.min),ee=Z(Math.max);let ye,le,ge,se,[Q,pe]=H,[ue,me]=H;for(let ve=0,fe=V.length;ve<fe;ve++){const Me=V[ve],[ce,he]=Me;if(Q=de(Q,ce),pe=de(pe,he),ue=ee(ue,ce),me=ee(me,he),F&&Me.length>2){const De=Me[2];ye=de(ye,De),ge=ee(ge,De)}if($&&Me.length>J){const De=Me[J];le=de(le,De),se=ee(se,De)}}return P.xmin=Q,P.ymin=pe,P.xmax=ue,P.ymax=me,P.spatialReference=this.spatialReference,F?(P.zmin=ye,P.zmax=ge):(P.zmin=null,P.zmax=null),$?(P.mmin=le,P.mmax=se):(P.mmin=null,P.mmax=null),P}writePoints(V,P){P.points=(0,T.d9)(this.points)}addPoint(V){return(0,B.l)(this,V),Array.isArray(V)?this.points.push(V):this.points.push(V.toArray()),this.notifyChange("points"),this}clone(){const V={points:(0,T.d9)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(V.hasZ=!0),this.hasM&&(V.hasM=!0),new X(V)}getPoint(V){if(!this._validateInputs(V))return null;const P=this.points[V],F={x:P[0],y:P[1],spatialReference:this.spatialReference};let $=2;return this.hasZ&&(F.z=P[2],$=3),this.hasM&&(F.m=P[$]),new L.Z(F)}removePoint(V){if(!this._validateInputs(V))return null;const P=new L.Z(this.points.splice(V,1)[0],this.spatialReference);return this.notifyChange("points"),P}setPoint(V,P){return this._validateInputs(V)?((0,B.l)(this,P),Array.isArray(P)||(P=P.toArray()),this.points[V]=P,this.notifyChange("points"),this):this}toJSON(V){return this.write({},V)}_validateInputs(V){return null!=V&&V>=0&&V<this.points.length}};(0,x._)([(0,ne.Cb)({readOnly:!0})],ae.prototype,"cache",null),(0,x._)([(0,ne.Cb)()],ae.prototype,"extent",null),(0,x._)([(0,ne.Cb)({type:[[Number]],json:{write:{isRequired:!0}}})],ae.prototype,"points",void 0),(0,x._)([(0,oe.c)("points")],ae.prototype,"writePoints",null),ae=X=(0,x._)([(0,te.j)("esri.geometry.Multipoint")],ae),ae.prototype.toJSON.isDefaultToJSON=!0;const K=ae},49672:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>le});var J,x=C(17626),T=C(63290),ne=C(62208),ie=C(77712),Y=(C(85931),C(8314),C(66656)),j=C(68653),L=C(76898),B=C(99433),X=C(90912),Z=C(21674),z=C(65234),F=C(37053),$=C(46367);const H=[0,0];function de(ge){return ge&&("esri.geometry.SpatialReference"===ge.declaredClass||null!=ge.wkid)}const ee=T.Z.getLogger("esri.geometry.Point");let ye=J=class extends Z.Z{constructor(...ge){super(...ge),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(ge,se){se._set("x",ge._get("x")),se._set("y",ge._get("y")),se._set("z",ge._get("z")),se._set("m",ge._get("m"));const Q=ge._get("spatialReference");se._set("spatialReference",Object.isFrozen(Q)?Q:Q.clone())}normalizeCtorArgs(ge,se,Q,pe,ue){let me;if(Array.isArray(ge))me=ge,ue=se,ge=me[0],se=me[1],Q=me[2],pe=me[3];else if(ge&&"object"==typeof ge){if(me=ge,ge=null!=me.x?me.x:me.longitude,se=null!=me.y?me.y:me.latitude,Q=me.z,pe=me.m,(ue=me.spatialReference)&&"esri.geometry.SpatialReference"!==ue.declaredClass&&(ue=new z.Z(ue)),null!=me.longitude||null!=me.latitude)if(null==me.longitude)ee.warn(".longitude=","Latitude was defined without longitude");else if(null==me.latitude)ee.warn(".latitude=","Longitude was defined without latitude");else if(!me.declaredClass&&ue&&ue.isWebMercator){const fe=(0,$.hG)(me.longitude,me.latitude,H);ge=fe[0],se=fe[1]}}else de(Q)?(ue=Q,Q=null):de(pe)&&(ue=pe,pe=null);const ve={x:ge,y:se};return null==ve.x&&null!=ve.y?ee.warn(".y=","Y coordinate was defined without an X coordinate"):null==ve.y&&null!=ve.x&&ee.warn(".x=","X coordinate was defined without a Y coordinate"),null!=ue&&(ve.spatialReference=ue),null!=Q&&(ve.z=Q),null!=pe&&(ve.m=pe),ve}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(ge){ge!==(void 0!==this._get("m"))&&(this._set("m",ge?0:void 0),this._set("hasM",ge))}get hasZ(){return void 0!==this.z}set hasZ(ge){ge!==(void 0!==this._get("z"))&&(this._set("z",ge?0:void 0),this._set("hasZ",ge))}get latitude(){const{spatialReference:ge,x:se,y:Q}=this;if(ge){if(ge.isWebMercator)return(0,$.R6)(se,Q,H)[1];if(ge.isGeographic)return Q}return null}set latitude(ge){const{spatialReference:se,x:Q}=this;se&&(se.isWebMercator?this._set("y",(0,$.hG)(Q,ge,H)[1]):se.isGeographic&&this._set("y",ge),this._set("latitude",ge))}get longitude(){const{x:ge,y:se,spatialReference:Q}=this;if(Q){if(Q.isWebMercator)return(0,$.R6)(ge,se,H)[0];if(Q.isGeographic)return ge}return null}set longitude(ge){const{y:se,spatialReference:Q}=this;Q&&(Q.isWebMercator?this._set("x",(0,$.hG)(ge,se,H)[0]):Q.isGeographic&&this._set("x",ge),this._set("longitude",ge))}writeX(ge,se,Q){se[Q]=isNaN(ge)?"NaN":ge}readX(ge){return"string"==typeof ge?NaN:ge}clone(){const ge=new J;return ge.x=this.x,ge.y=this.y,ge.z=this.z,ge.m=this.m,ge.spatialReference=this.spatialReference,ge}copy(ge){return J.copy(ge,this),this}equals(ge){if((0,ne.Wi)(ge))return!1;const{x:se,y:Q,z:pe,m:ue,spatialReference:me}=this,{z:ve,m:fe}=ge;let{x:Me,y:ce,spatialReference:he}=ge;if(!me.equals(he))if(me.isWebMercator&&he.isWGS84)[Me,ce]=(0,$.hG)(Me,ce),he=me;else{if(!me.isWGS84||!he.isWebMercator)return!1;[Me,ce]=(0,$.R6)(Me,ce),he=me}return se===Me&&Q===ce&&pe===ve&&ue===fe&&me.wkid===he.wkid}offset(ge,se,Q){return function ae(ge,se,Q,pe){var ue;return ge.x=ge.x+se,ge.y=ge.y+Q,null!=pe&&(ge.z=(null!=(ue=ge.z)?ue:0)+pe),ge}(this,ge,se,Q)}normalize(){if(!this.spatialReference)return this;const ge=(0,F.C5)(this.spatialReference);if(!ge)return this;let se=this.x;const[Q,pe]=ge.valid,ue=2*pe;let me;return se>pe?(me=Math.ceil(Math.abs(se-pe)/ue),se-=me*ue):se<Q&&(me=Math.ceil(Math.abs(se-Q)/ue),se+=me*ue),this._set("x",se),this}distance(ge){return function V(ge,se){const Q=ge.x-se.x,pe=ge.y-se.y,ue=ge.hasZ&&se.hasZ?ge.z-se.z:0;return Math.sqrt(Q*Q+pe*pe+ue*ue)}(this,ge)}toArray(){const ge=this.hasZ,se=this.hasM;return ge&&se?[this.x,this.y,this.z,this.m]:ge?[this.x,this.y,this.z]:se?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(ge){return this.write({},ge)}};(0,x._)([(0,ie.Cb)({readOnly:!0})],ye.prototype,"cache",null),(0,x._)([(0,ie.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ye.prototype,"hasM",null),(0,x._)([(0,ie.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ye.prototype,"hasZ",null),(0,x._)([(0,ie.Cb)({type:Number})],ye.prototype,"latitude",null),(0,x._)([(0,ie.Cb)({type:Number})],ye.prototype,"longitude",null),(0,x._)([(0,ie.Cb)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),(0,Y.p)(ge=>isNaN(ge)?ge:(0,X.q9)(ge))],ye.prototype,"x",void 0),(0,x._)([(0,B.c)("x")],ye.prototype,"writeX",null),(0,x._)([(0,j.r)("x")],ye.prototype,"readX",null),(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0}})],ye.prototype,"y",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ye.prototype,"z",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ye.prototype,"m",void 0),ye=J=(0,x._)([(0,L.j)("esri.geometry.Point")],ye),ye.prototype.toJSON.isDefaultToJSON=!0;const le=ye},37118:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ee});var J,x=C(17626),T=C(85931),ne=C(58817),ie=C(62208),te=C(77712),Y=(C(90912),C(76898)),j=C(99433),L=C(2004),B=C(21674),X=C(49672),Z=C(65234),z=C(27105),ae=C(33190),K=C(25748),V=C(15176),P=C(11519),F=C(46367),$=C(18945);function H(ye){return!Array.isArray(ye[0])}let de=J=class extends B.Z{constructor(...ye){super(...ye),this.rings=[],this.type="polygon"}static fromExtent(ye){const le=ye.clone().normalize(),ge=ye.spatialReference;let se=!1,Q=!1;for(const ue of le)ue.hasZ&&(se=!0),ue.hasM&&(Q=!0);const pe={rings:le.map(function(ue){const me=[[ue.xmin,ue.ymin],[ue.xmin,ue.ymax],[ue.xmax,ue.ymax],[ue.xmax,ue.ymin],[ue.xmin,ue.ymin]];if(se&&ue.hasZ){const ve=ue.zmin+.5*(ue.zmax-ue.zmin);for(let fe=0;fe<me.length;fe++)me[fe].push(ve)}if(Q&&ue.hasM){const ve=ue.mmin+.5*(ue.mmax-ue.mmin);for(let fe=0;fe<me.length;fe++)me[fe].push(ve)}return me}),spatialReference:ge};return se&&(pe.hasZ=!0),Q&&(pe.hasM=!0),new J(pe)}normalizeCtorArgs(ye,le){let ge,se,Q=null,pe=null;return ye&&!Array.isArray(ye)?(Q=ye.rings?ye.rings:null,le||(ye.spatialReference?le=ye.spatialReference:ye.rings||(le=ye)),ge=ye.hasZ,se=ye.hasM):Q=ye,Q=Q||[],Q.length&&Q[0]&&null!=Q[0][0]&&"number"==typeof Q[0][0]&&(Q=[Q]),pe=Q[0]&&Q[0][0],pe&&(void 0===ge&&void 0===se?(ge=pe.length>2,se=pe.length>3):void 0===ge?ge=se?pe.length>3:pe.length>2:void 0===se&&(se=ge?pe.length>3:pe.length>2)),{rings:Q,spatialReference:le=le||Z.Z.WGS84,hasZ:ge,hasM:se}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const ye=(0,z.tO)(this);if(!ye||isNaN(ye[0])||isNaN(ye[1])||this.hasZ&&isNaN(ye[2]))return null;const le=new X.Z;return le.x=ye[0],le.y=ye[1],le.spatialReference=this.spatialReference,this.hasZ&&(le.z=ye[2]),le}get extent(){const{spatialReference:ye}=this,le=(0,V._w)(this);if(!le)return null;const ge=new L.Z(le);return ge.spatialReference=ye,ge}get isSelfIntersecting(){return(0,P.Ff)(this.rings)}writeRings(ye,le){le.rings=(0,ne.d9)(this.rings)}addRing(ye){if(!ye)return;const le=this.rings,ge=le.length;if(H(ye)){const se=[];for(let Q=0,pe=ye.length;Q<pe;Q++)se[Q]=ye[Q].toArray();le[ge]=se}else le[ge]=ye.concat();return this.notifyChange("rings"),this}clone(){const ye=new J;return ye.spatialReference=this.spatialReference,ye.rings=(0,ne.d9)(this.rings),ye.hasZ=this.hasZ,ye.hasM=this.hasM,ye}equals(ye){if(this===ye)return!0;if((0,ie.Wi)(ye))return!1;const le=this.spatialReference,ge=ye.spatialReference;if((0,ie.pC)(le)!==(0,ie.pC)(ge)||(0,ie.pC)(le)&&(0,ie.pC)(ge)&&!le.equals(ge)||this.rings.length!==ye.rings.length)return!1;const se=([Q,pe,ue,me],[ve,fe,Me,ce])=>Q===ve&&pe===fe&&(null==ue&&null==Me||ue===Me)&&(null==me&&null==ce||me===ce);for(let Q=0;Q<this.rings.length;Q++)if(!(0,T.fS)(this.rings[Q],ye.rings[Q],se))return!1;return!0}contains(ye){if(!ye)return!1;const le=(0,F.iV)(ye,this.spatialReference);return(0,ae.CI)(this,(0,ie.pC)(le)?le:ye)}isClockwise(ye){let le;return le=H(ye)?ye.map(ge=>this.hasZ?this.hasM?[ge.x,ge.y,ge.z,ge.m]:[ge.x,ge.y,ge.z]:[ge.x,ge.y]):ye,(0,K.bu)(le,this.hasM,this.hasZ)}getPoint(ye,le){if(!this._validateInputs(ye,le))return null;const ge=this.rings[ye][le],se=this.hasZ,Q=this.hasM;return se&&!Q?new X.Z(ge[0],ge[1],ge[2],void 0,this.spatialReference):Q&&!se?new X.Z(ge[0],ge[1],void 0,ge[2],this.spatialReference):se&&Q?new X.Z(ge[0],ge[1],ge[2],ge[3],this.spatialReference):new X.Z(ge[0],ge[1],this.spatialReference)}insertPoint(ye,le,ge){return this._validateInputs(ye,le,!0)?((0,$.l)(this,ge),Array.isArray(ge)||(ge=ge.toArray()),this.rings[ye].splice(le,0,ge),this.notifyChange("rings"),this):this}removePoint(ye,le){if(!this._validateInputs(ye,le))return null;const ge=new X.Z(this.rings[ye].splice(le,1)[0],this.spatialReference);return this.notifyChange("rings"),ge}removeRing(ye){if(!this._validateInputs(ye,null))return null;const le=this.rings.splice(ye,1)[0],ge=this.spatialReference,se=le.map(Q=>new X.Z(Q,ge));return this.notifyChange("rings"),se}setPoint(ye,le,ge){return this._validateInputs(ye,le)?((0,$.l)(this,ge),Array.isArray(ge)||(ge=ge.toArray()),this.rings[ye][le]=ge,this.notifyChange("rings"),this):this}_validateInputs(ye,le,ge=!1){if(null==ye||ye<0||ye>=this.rings.length)return!1;if(null!=le){const se=this.rings[ye];if(ge&&(le<0||le>se.length)||!ge&&(le<0||le>=se.length))return!1}return!0}toJSON(ye){return this.write({},ye)}};(0,x._)([(0,te.Cb)({readOnly:!0})],de.prototype,"cache",null),(0,x._)([(0,te.Cb)({readOnly:!0})],de.prototype,"centroid",null),(0,x._)([(0,te.Cb)({readOnly:!0})],de.prototype,"extent",null),(0,x._)([(0,te.Cb)({readOnly:!0})],de.prototype,"isSelfIntersecting",null),(0,x._)([(0,te.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],de.prototype,"rings",void 0),(0,x._)([(0,j.c)("rings")],de.prototype,"writeRings",null),de=J=(0,x._)([(0,Y.j)("esri.geometry.Polygon")],de),de.prototype.toJSON.isDefaultToJSON=!0;const ee=de},55214:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>V});var z,x=C(17626),T=C(58817),ne=C(77712),te=(C(90912),C(76898)),oe=C(99433),Y=C(2004),j=C(21674),L=C(49672),B=C(65234),X=C(15176),Z=C(18945);let K=z=class extends j.Z{constructor(...P){super(...P),this.paths=[],this.type="polyline"}normalizeCtorArgs(P,F){let $,J,H=null,de=null;return P&&!Array.isArray(P)?(H=P.paths?P.paths:null,F||(P.spatialReference?F=P.spatialReference:P.paths||(F=P)),$=P.hasZ,J=P.hasM):H=P,H=H||[],H.length&&H[0]&&null!=H[0][0]&&"number"==typeof H[0][0]&&(H=[H]),de=H[0]&&H[0][0],de&&(void 0===$&&void 0===J?($=de.length>2,J=!1):void 0===$?$=!J&&de.length>3:void 0===J&&(J=!$&&de.length>3)),{paths:H,spatialReference:F=F||B.Z.WGS84,hasZ:$,hasM:J}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:P}=this,F=(0,X.Wn)(this);if(!F)return null;const $=new Y.Z(F);return $.spatialReference=P,$}writePaths(P,F){F.paths=(0,T.d9)(this.paths)}addPath(P){if(!P)return;const F=this.paths,$=F.length;if(function ae(P){return!Array.isArray(P[0])}(P)){const J=[];for(let H=0,de=P.length;H<de;H++)J[H]=P[H].toArray();F[$]=J}else F[$]=P.concat();return this.notifyChange("paths"),this}clone(){const P=new z;return P.spatialReference=this.spatialReference,P.paths=(0,T.d9)(this.paths),P.hasZ=this.hasZ,P.hasM=this.hasM,P}getPoint(P,F){if(!this._validateInputs(P,F))return null;const $=this.paths[P][F],J=this.hasZ,H=this.hasM;return J&&!H?new L.Z($[0],$[1],$[2],void 0,this.spatialReference):H&&!J?new L.Z($[0],$[1],void 0,$[2],this.spatialReference):J&&H?new L.Z($[0],$[1],$[2],$[3],this.spatialReference):new L.Z($[0],$[1],this.spatialReference)}insertPoint(P,F,$){return this._validateInputs(P,F,!0)?((0,Z.l)(this,$),Array.isArray($)||($=$.toArray()),this.paths[P].splice(F,0,$),this.notifyChange("paths"),this):this}removePath(P){if(!this._validateInputs(P,null))return null;const F=this.paths.splice(P,1)[0],$=this.spatialReference,J=F.map(H=>new L.Z(H,$));return this.notifyChange("paths"),J}removePoint(P,F){if(!this._validateInputs(P,F))return null;const $=new L.Z(this.paths[P].splice(F,1)[0],this.spatialReference);return this.notifyChange("paths"),$}setPoint(P,F,$){return this._validateInputs(P,F)?((0,Z.l)(this,$),Array.isArray($)||($=$.toArray()),this.paths[P][F]=$,this.notifyChange("paths"),this):this}_validateInputs(P,F,$=!1){if(null==P||P<0||P>=this.paths.length)return!1;if(null!=F){const J=this.paths[P];if($&&(F<0||F>J.length)||!$&&(F<0||F>=J.length))return!1}return!0}toJSON(P){return this.write({},P)}};(0,x._)([(0,ne.Cb)({readOnly:!0})],K.prototype,"cache",null),(0,x._)([(0,ne.Cb)({readOnly:!0})],K.prototype,"extent",null),(0,x._)([(0,ne.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],K.prototype,"paths",void 0),(0,x._)([(0,oe.c)("paths")],K.prototype,"writePaths",null),K=z=(0,x._)([(0,te.j)("esri.geometry.Polyline")],K),K.prototype.toJSON.isDefaultToJSON=!0;const V=K},65234:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(86162),ne=C(58817),ie=C(90912),te=C(77712),oe=C(76898),Y=C(99433),j=C(37053);let B=L=class extends T.wq{constructor(Z){super(Z),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(Z){if(!Z)return null;if(Z.wkid){if(102100===Z.wkid)return L.WebMercator;if(4326===Z.wkid)return L.WGS84}const z=new L;return z.read(Z),z}normalizeCtorArgs(Z){return Z&&"object"==typeof Z?Z:{["string"==typeof Z?"wkt":"wkid"]:Z}}get isWGS84(){return(0,j.oR)(this)}get isWebMercator(){return(0,j.sS)(this)}get isGeographic(){return(0,j.sT)(this)}get isWrappable(){return(0,j.MP)(this)}writeWkt(Z,z){this.wkid||(z.wkt=Z)}clone(){if(this===L.WGS84)return L.WGS84;if(this===L.WebMercator)return L.WebMercator;const Z=new L;return null!=this.wkid?(Z.wkid=this.wkid,null!=this.latestWkid&&(Z.latestWkid=this.latestWkid),null!=this.vcsWkid&&(Z.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(Z.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(Z.wkt=this.wkt),this.imageCoordinateSystem&&(Z.imageCoordinateSystem=(0,ne.d9)(this.imageCoordinateSystem)),Z}equals(Z){if(null==Z)return!1;if(this.imageCoordinateSystem||Z.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==Z.imageCoordinateSystem)return!1;const{id:z,referenceServiceName:ae}=Z.imageCoordinateSystem,{geodataXform:K}=Z.imageCoordinateSystem,V=this.imageCoordinateSystem;return null==z||K?JSON.stringify(V)===JSON.stringify(Z.imageCoordinateSystem):ae?V.id===z&&V.referenceServiceName===ae:V.id===z}return(0,j.fS)(this,Z)}toJSON(Z){return this.write(void 0,Z)}};B.GCS_NAD_1927=null,B.WGS84=null,B.WebMercator=null,B.PlateCarree=null,(0,x._)([(0,te.Cb)({readOnly:!0})],B.prototype,"isWGS84",null),(0,x._)([(0,te.Cb)({readOnly:!0})],B.prototype,"isWebMercator",null),(0,x._)([(0,te.Cb)({readOnly:!0})],B.prototype,"isGeographic",null),(0,x._)([(0,te.Cb)({readOnly:!0})],B.prototype,"isWrappable",null),(0,x._)([(0,te.Cb)({type:ie.z8,json:{write:!0}})],B.prototype,"latestWkid",void 0),(0,x._)([(0,te.Cb)({type:ie.z8,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],B.prototype,"wkid",void 0),(0,x._)([(0,te.Cb)({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],B.prototype,"wkt",void 0),(0,x._)([(0,Y.c)("wkt"),(0,Y.c)("web-scene","wkt")],B.prototype,"writeWkt",null),(0,x._)([(0,te.Cb)({type:ie.z8,json:{write:!0}})],B.prototype,"vcsWkid",void 0),(0,x._)([(0,te.Cb)({type:ie.z8,json:{write:!0}})],B.prototype,"latestVcsWkid",void 0),(0,x._)([(0,te.Cb)()],B.prototype,"imageCoordinateSystem",void 0),B=L=(0,x._)([(0,oe.j)("esri.geometry.SpatialReference")],B),B.prototype.toJSON.isDefaultToJSON=!0,B.GCS_NAD_1927=new B({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),B.WGS84=new B(j.Zn),B.WebMercator=new B(j.R_),B.PlateCarree=new B(j.WR),Object.freeze&&(Object.freeze(B.GCS_NAD_1927),Object.freeze(B.WGS84),Object.freeze(B.WebMercator));const X=B},56741:(ut,Oe,C)=>{"use strict";C.d(Oe,{Up:()=>gr,Bm:()=>co,rS:()=>Vt,iQ:()=>_t,kR:()=>yt,zD:()=>at,iV:()=>Mt,CM:()=>Dr,oj:()=>Pt,KC:()=>He,Wt:()=>Qt});var x=C(15861),T=C(26584),ne=C(21286),ie=C(62208),te=C(10699),oe=C(16730),Y=C(28347),L=(C(84161),C(28093)),B=C(2004),X=C(72854),Z=C(54346),z=C(8314);let ae,K=null;function V(){return!!K}function F(){return ae||(ae=C.e(3714).then(C.bind(C,73714)).then(ft=>ft.p).then(({default:ft})=>ft({locateFile:xt=>(0,Z.V)(`esri/geometry/support/${xt}`)})).then(ft=>{ve(ft)}),ae)}var $,J,H,ft;(function(ft){function xt(tr,pr,or){K.ensureCache.prepare();const Et=ce(or),jt=or===Et,zt=K.ensureFloat64(Et),mr=K._pe_geog_to_proj(K.getPointer(tr),pr,zt);return mr&&he(or,pr,zt,jt),mr}function Lt(tr,pr,or){return ar(tr,pr,or,0)}function ar(tr,pr,or,Et){K.ensureCache.prepare();const jt=ce(or),zt=or===jt,mr=K.ensureFloat64(jt),Er=K._pe_proj_to_geog_center(K.getPointer(tr),pr,mr,Et);return Er&&he(or,pr,mr,zt),Er}ft.geogToProj=xt,ft.projGeog=function vt(tr,pr,or,Et){switch(Et){case J.PE_TRANSFORM_P_TO_G:return Lt(tr,pr,or);case J.PE_TRANSFORM_G_TO_P:return xt(tr,pr,or)}return 0},ft.projToGeog=Lt,ft.projToGeogCenter=ar})($||($={})),(ft=J||(J={})).init=function xt(){ft.PE_BUFFER_MAX=K.PeDefs.prototype.PE_BUFFER_MAX,ft.PE_NAME_MAX=K.PeDefs.prototype.PE_NAME_MAX,ft.PE_MGRS_MAX=K.PeDefs.prototype.PE_MGRS_MAX,ft.PE_USNG_MAX=K.PeDefs.prototype.PE_USNG_MAX,ft.PE_DD_MAX=K.PeDefs.prototype.PE_DD_MAX,ft.PE_DDM_MAX=K.PeDefs.prototype.PE_DDM_MAX,ft.PE_DMS_MAX=K.PeDefs.prototype.PE_DMS_MAX,ft.PE_UTM_MAX=K.PeDefs.prototype.PE_UTM_MAX,ft.PE_PARM_MAX=K.PeDefs.prototype.PE_PARM_MAX,ft.PE_TYPE_NONE=K.PeDefs.prototype.PE_TYPE_NONE,ft.PE_TYPE_GEOGCS=K.PeDefs.prototype.PE_TYPE_GEOGCS,ft.PE_TYPE_PROJCS=K.PeDefs.prototype.PE_TYPE_PROJCS,ft.PE_TYPE_GEOGTRAN=K.PeDefs.prototype.PE_TYPE_GEOGTRAN,ft.PE_TYPE_COORDSYS=K.PeDefs.prototype.PE_TYPE_COORDSYS,ft.PE_TYPE_UNIT=K.PeDefs.prototype.PE_TYPE_UNIT,ft.PE_TYPE_LINUNIT=K.PeDefs.prototype.PE_TYPE_LINUNIT,ft.PE_STR_OPTS_NONE=K.PeDefs.prototype.PE_STR_OPTS_NONE,ft.PE_STR_AUTH_NONE=K.PeDefs.prototype.PE_STR_AUTH_NONE,ft.PE_STR_AUTH_TOP=K.PeDefs.prototype.PE_STR_AUTH_TOP,ft.PE_STR_NAME_CANON=K.PeDefs.prototype.PE_STR_NAME_CANON,ft.PE_PARM_X0=K.PeDefs.prototype.PE_PARM_X0,ft.PE_PARM_ND=K.PeDefs.prototype.PE_PARM_ND,ft.PE_TRANSFORM_1_TO_2=K.PeDefs.prototype.PE_TRANSFORM_1_TO_2,ft.PE_TRANSFORM_2_TO_1=K.PeDefs.prototype.PE_TRANSFORM_2_TO_1,ft.PE_TRANSFORM_P_TO_G=K.PeDefs.prototype.PE_TRANSFORM_P_TO_G,ft.PE_TRANSFORM_G_TO_P=K.PeDefs.prototype.PE_TRANSFORM_G_TO_P,ft.PE_HORIZON_RECT=K.PeDefs.prototype.PE_HORIZON_RECT,ft.PE_HORIZON_POLY=K.PeDefs.prototype.PE_HORIZON_POLY,ft.PE_HORIZON_LINE=K.PeDefs.prototype.PE_HORIZON_LINE,ft.PE_HORIZON_DELTA=K.PeDefs.prototype.PE_HORIZON_DELTA},function(ft){const xt={},vt={},Lt=hr=>{if(hr){const on=hr.getType();switch(on){case J.PE_TYPE_GEOGCS:hr=K.castObject(hr,K.PeGeogcs);break;case J.PE_TYPE_PROJCS:hr=K.castObject(hr,K.PeProjcs);break;case J.PE_TYPE_GEOGTRAN:hr=K.castObject(hr,K.PeGeogtran);break;default:on&J.PE_TYPE_UNIT&&(hr=K.castObject(hr,K.PeUnit))}}return hr};function pr(hr,on){let yn=null,Be=xt[hr];if(Be||(Be={},xt[hr]=Be),Be.hasOwnProperty(String(on)))yn=Be[on];else{const nt=K.PeFactory.prototype.factoryByType(hr,on);K.compare(nt,K.NULL)||(yn=nt,Be[on]=yn)}return yn=Lt(yn),yn}ft.initialize=function ar(){K.PeFactory.prototype.initialize(null)},ft.coordsys=function tr(hr){return pr(J.PE_TYPE_COORDSYS,hr)},ft.factoryByType=pr,ft.fromString=function or(hr,on){let yn=null,Be=vt[hr];if(Be||(Be={},vt[hr]=Be),Be.hasOwnProperty(on))yn=Be[on];else{const nt=K.PeFactory.prototype.fromString(hr,on);K.compare(nt,K.NULL)||(yn=nt,Be[on]=yn)}return yn=Lt(yn),yn},ft.geogcs=function Et(hr){return pr(J.PE_TYPE_GEOGCS,hr)},ft.geogtran=function jt(hr){return pr(J.PE_TYPE_GEOGTRAN,hr)},ft.getCode=function zt(hr){return K.PeFactory.prototype.getCode(hr)},ft.projcs=function mr(hr){return pr(J.PE_TYPE_PROJCS,hr)},ft.unit=function Er(hr){return pr(J.PE_TYPE_UNIT,hr)}}(H||(H={}));let de=null;var ee,ye,le,ge,se,Q,pe,ue,me;function ve(ft){function xt(tr,pr,or){tr[pr]=or(tr[pr])}K=ft,J.init(),ee.init(),se.init(),pe.init(),ue.init(),de=class extends K.PeGCSExtent{destroy(){K.destroy(this)}};const vt=[K.PeDatum,K.PeGeogcs,K.PeGeogtran,K.PeObject,K.PeParameter,K.PePrimem,K.PeProjcs,K.PeSpheroid,K.PeUnit];for(const tr of vt)xt(tr.prototype,"getName",pr=>function(){return pr.call(this,new Array(J.PE_NAME_MAX))});for(const tr of[K.PeGeogtran,K.PeProjcs])xt(tr.prototype,"getParameters",pr=>function(){const or=new Array(J.PE_PARM_MAX);let Et=pr.call(this);for(let jt=0;jt<or.length;jt++){const zt=K.getValue(Et,"*");or[jt]=zt?K.wrapPointer(zt,K.PeParameter):null,Et+=Int32Array.BYTES_PER_ELEMENT}return or});xt(K.PeHorizon.prototype,"getCoord",tr=>function(){const pr=this.getSize();if(!pr)return null;const or=[];return he(or,pr,tr.call(this)),or}),xt(K.PeGTlistExtendedEntry.prototype,"getEntries",tr=>{const pr=K._pe_getPeGTlistExtendedGTsSize();return function(){let or=null;const Et=tr.call(this);if(!K.compare(Et,K.NULL)){or=[Et];const jt=this.getSteps();if(jt>1){const zt=K.getPointer(Et);for(let mr=1;mr<jt;mr++)or.push(K.wrapPointer(zt+pr*mr,K.PeGTlistExtendedGTs))}}return or}});const Lt=K._pe_getPeHorizonSize(),ar=tr=>function(){let pr=this._cache;if(pr||(pr=new Map,this._cache=pr),pr.has(tr))return pr.get(tr);let or=null;const Et=tr.call(this);if(!K.compare(Et,K.NULL)){or=[Et];const jt=Et.getNump();if(jt>1){const zt=K.getPointer(Et);for(let mr=1;mr<jt;mr++)or.push(K.wrapPointer(zt+Lt*mr,K.PeHorizon))}}return pr.set(tr,or),or};xt(K.PeProjcs.prototype,"horizonGcsGenerate",ar),xt(K.PeProjcs.prototype,"horizonPcsGenerate",ar),K.PeObject.prototype.toString=function(tr=J.PE_STR_OPTS_NONE){K.ensureCache.prepare();const pr=K.getPointer(this),or=K.ensureInt8(new Array(J.PE_BUFFER_MAX));return K.UTF8ToString(K._pe_object_to_string_ext(pr,tr,or))}}function fe(ft){if(!ft)return;const xt=K.getClass(ft);if(!xt)return;const vt=K.getCache(xt);if(!vt)return;const Lt=K.getPointer(ft);Lt&&delete vt[Lt]}function Me(ft,xt){const vt=[],Lt=new Array(xt);for(let ar=0;ar<ft;ar++)vt.push(K.ensureInt8(Lt));return vt}function ce(ft){let xt;return Array.isArray(ft[0])?(xt=[],ft.forEach(vt=>{xt.push(vt[0],vt[1])})):xt=ft,xt}function he(ft,xt,vt,Lt=!1){if(Lt)for(let ar=0;ar<2*xt;ar++)ft[ar]=K.getValue(vt+ar*Float64Array.BYTES_PER_ELEMENT,"double");else{const ar=0===ft.length;for(let tr=0;tr<xt;tr++)ar&&(ft[tr]=new Array(2)),ft[tr][0]=K.getValue(vt,"double"),ft[tr][1]=K.getValue(vt+Float64Array.BYTES_PER_ELEMENT,"double"),vt+=2*Float64Array.BYTES_PER_ELEMENT}}(function(ft){let xt;ft.init=function vt(){ft.PE_GTLIST_OPTS_COMMON=K.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,xt=K._pe_getPeGTlistExtendedEntrySize()},ft.getGTlist=function Lt(ar,tr,pr,or,Et,jt){let zt=null;const mr=new K.PeInteger(jt);try{const Er=K.PeGTlistExtended.prototype.getGTlist(ar,tr,pr,or,Et,mr);if((jt=mr.val)&&(zt=[Er],jt>1)){const hr=K.getPointer(Er);for(let on=1;on<jt;on++)zt.push(K.wrapPointer(hr+xt*on,K.PeGTlistExtendedEntry))}}finally{K.destroy(mr)}return zt}})(ee||(ee={})),function(ft){ft.destroy=function xt(vt){if(vt&&vt.length){for(const Lt of vt)fe(Lt),Lt.getEntries().forEach(ar=>{fe(ar);const tr=ar.getGeogtran();fe(tr),tr.getParameters().forEach(fe),[tr.getGeogcs1(),tr.getGeogcs2()].forEach(pr=>{fe(pr);const or=pr.getDatum();fe(or),fe(or.getSpheroid()),fe(pr.getPrimem()),fe(pr.getUnit())})});K.PeGTlistExtendedEntry.prototype.Delete(vt[0])}}}(ye||(ye={})),function(ft){ft.geogToGeog=function xt(vt,Lt,ar,tr,pr){K.ensureCache.prepare();const or=ce(ar),Et=ar===or,jt=K.ensureFloat64(or);let zt=0;tr&&(zt=K.ensureFloat64(tr));const mr=K._pe_geog_to_geog(K.getPointer(vt),Lt,jt,zt,pr);return mr&&he(ar,Lt,jt,Et),mr}}(le||(le={})),function(ft){const xt=(jt,zt,mr,Er,hr,on)=>{let yn,Be;switch(K.ensureCache.prepare(),jt){case"dd":yn=K._pe_geog_to_dd,Be=J.PE_DD_MAX;break;case"ddm":yn=K._pe_geog_to_ddm,Be=J.PE_DDM_MAX;break;case"dms":yn=K._pe_geog_to_dms,Be=J.PE_DMS_MAX}let nt=0;zt&&(nt=K.getPointer(zt));const Ct=ce(Er),Ne=K.ensureFloat64(Ct),ke=Me(mr,Be),ot=yn(nt,mr,Ne,hr,K.ensureInt32(ke));if(ot)for(let Dt=0;Dt<mr;Dt++)on[Dt]=K.UTF8ToString(ke[Dt]);return ot},vt=(jt,zt,mr,Er,hr)=>{let on;switch(K.ensureCache.prepare(),jt){case"dd":on=K._pe_dd_to_geog;break;case"ddm":on=K._pe_ddm_to_geog;break;case"dms":on=K._pe_dms_to_geog}let yn=0;zt&&(yn=K.getPointer(zt));const Be=Er.map(ke=>K.ensureString(ke)),nt=K.ensureInt32(Be),Ct=K.ensureFloat64(new Array(2*mr)),Ne=on(yn,mr,nt,Ct);return Ne&&he(hr,mr,Ct),Ne};ft.geog_to_dms=function Lt(jt,zt,mr,Er,hr){return xt("dms",jt,zt,mr,Er,hr)},ft.dms_to_geog=function ar(jt,zt,mr,Er){return vt("dms",jt,zt,mr,Er)},ft.geog_to_ddm=function tr(jt,zt,mr,Er,hr){return xt("ddm",jt,zt,mr,Er,hr)},ft.ddm_to_geog=function pr(jt,zt,mr,Er){return vt("ddm",jt,zt,mr,Er)},ft.geog_to_dd=function or(jt,zt,mr,Er,hr){return xt("dd",jt,zt,mr,Er,hr)},ft.dd_to_geog=function Et(jt,zt,mr,Er){return vt("dd",jt,zt,mr,Er)}}(ge||(ge={})),function(ft){ft.init=function xt(){ft.PE_MGRS_STYLE_NEW=K.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,ft.PE_MGRS_STYLE_OLD=K.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,ft.PE_MGRS_STYLE_AUTO=K.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,ft.PE_MGRS_180_ZONE_1_PLUS=K.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,ft.PE_MGRS_ADD_SPACES=K.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},ft.geog_to_mgrs_extended=function vt(ar,tr,pr,or,Et,jt,zt){K.ensureCache.prepare();let mr=0;ar&&(mr=K.getPointer(ar));const Er=ce(pr),hr=K.ensureFloat64(Er),on=Me(tr,J.PE_MGRS_MAX),yn=K.ensureInt32(on),Be=K._pe_geog_to_mgrs_extended(mr,tr,hr,or,Et,jt,yn);if(Be)for(let nt=0;nt<tr;nt++)zt[nt]=K.UTF8ToString(on[nt]);return Be},ft.mgrs_to_geog_extended=function Lt(ar,tr,pr,or,Et){K.ensureCache.prepare();let jt=0;ar&&(jt=K.getPointer(ar));const zt=pr.map(on=>K.ensureString(on)),mr=K.ensureInt32(zt),Er=K.ensureFloat64(new Array(2*tr)),hr=K._pe_mgrs_to_geog_extended(jt,tr,mr,or,Er);return hr&&he(Et,tr,Er),hr}}(se||(se={})),function(ft){ft.geog_to_usng=function xt(Lt,ar,tr,pr,or,Et,jt){K.ensureCache.prepare();let zt=0;Lt&&(zt=K.getPointer(Lt));const mr=ce(tr),Er=K.ensureFloat64(mr),hr=Me(ar,J.PE_MGRS_MAX),on=K.ensureInt32(hr),yn=K._pe_geog_to_usng(zt,ar,Er,pr,or,Et,on);if(yn)for(let Be=0;Be<ar;Be++)jt[Be]=K.UTF8ToString(hr[Be]);return yn},ft.usng_to_geog=function vt(Lt,ar,tr,pr){K.ensureCache.prepare();let or=0;Lt&&(or=K.getPointer(Lt));const Et=tr.map(Er=>K.ensureString(Er)),jt=K.ensureInt32(Et),zt=K.ensureFloat64(new Array(2*ar)),mr=K._pe_usng_to_geog(or,ar,jt,zt);return mr&&he(pr,ar,zt),mr}}(Q||(Q={})),function(ft){ft.init=function xt(){ft.PE_UTM_OPTS_NONE=K.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,ft.PE_UTM_OPTS_ADD_SPACES=K.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,ft.PE_UTM_OPTS_NS=K.PeNotationUtm.prototype.PE_UTM_OPTS_NS},ft.geog_to_utm=function vt(ar,tr,pr,or,Et){K.ensureCache.prepare();let jt=0;ar&&(jt=K.getPointer(ar));const zt=ce(pr),mr=K.ensureFloat64(zt),Er=Me(tr,J.PE_UTM_MAX),hr=K.ensureInt32(Er),on=K._pe_geog_to_utm(jt,tr,mr,or,hr);if(on)for(let yn=0;yn<tr;yn++)Et[yn]=K.UTF8ToString(Er[yn]);return on},ft.utm_to_geog=function Lt(ar,tr,pr,or,Et){K.ensureCache.prepare();let jt=0;ar&&(jt=K.getPointer(ar));const zt=pr.map(on=>K.ensureString(on)),mr=K.ensureInt32(zt),Er=K.ensureFloat64(new Array(2*tr)),hr=K._pe_utm_to_geog(jt,tr,mr,or,Er);return hr&&he(Et,tr,Er),hr}}(pe||(pe={})),function(ft){const xt=new Map;ft.init=function vt(){ft.PE_PCSINFO_OPTION_NONE=K.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,ft.PE_PCSINFO_OPTION_DOMAIN=K.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,ft.PE_POLE_OUTSIDE_BOUNDARY=K.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,ft.PE_POLE_POINT=K.PePCSInfo.prototype.PE_POLE_POINT},ft.generate=function Lt(ar,tr=ft.PE_PCSINFO_OPTION_DOMAIN){let pr,or;return xt.has(ar)&&(or=xt.get(ar),or[tr]&&(pr=or[tr])),pr||(pr=K.PePCSInfo.prototype.generate(ar,tr),or||(or=[],xt.set(ar,or)),or[tr]=pr),pr}}(ue||(ue={})),function(ft){ft.version_string=function xt(){return K.PeVersion.prototype.version_string()}}(me||(me={}));const De=Object.freeze({__proto__:null,get _pe(){return K},isLoaded:V,isSupported:function P(){return!!(0,z.Z)("esri-wasm")},load:F,get PeCSTransformations(){return $},get PeDefs(){return J},get PeFactory(){return H},get PeGCSExtent(){return de},get PeGTlistExtended(){return ee},get PeGTlistExtendedEntry(){return ye},get PeGTTransformations(){return le},get PeNotationDms(){return ge},get PeNotationMgrs(){return se},get PeNotationUsng(){return Q},get PeNotationUtm(){return pe},get PePCSInfo(){return ue},get PeVersion(){return me},_init:ve});var xe=C(49672),Pe=C(37118),je=C(55214),rt=C(12080),Ce=(C(65401),C(94425));Math;const ct=Ce.sv.radius,Ae=Ce.sv.eccentricitySquared,Qe={a1:ct*Ae,a2:ct*Ae*ct*Ae,a3:ct*Ae*Ae/2,a4:ct*Ae*ct*Ae*2.5,a5:ct*Ae+ct*Ae*Ae/2,a6:1-Ae};var re=C(98346),Ee=C(37053);C(33696);let tt=null,pt=null,mt=null,bt={};function yt(){return!!tt&&V()}function at(ft){return(0,ie.Wi)(mt)&&(mt=Promise.all([F(),C.e(4918).then(C.bind(C,4918)).then(xt=>xt.g),C.e(8592).then(C.bind(C,77777))])),mt.then(([,xt,{hydratedAdapter:vt}])=>{(0,te.k_)(ft),pt=vt,tt=xt.default,tt._enableProjection(De)})}function Mt(ft,xt,vt=null){return Array.isArray(ft)?0===ft.length?[]:Pt(pt,ft,ft[0].spatialReference,xt,vt):Pt(pt,[ft],ft.spatialReference,xt,vt)[0]}function Pt(ft,xt,vt,Lt,ar=null){if((0,ie.Wi)(vt)||(0,ie.Wi)(Lt))return xt;if(gr(vt,Lt,ar))return xt.map(tr=>(0,ie.Wg)(function er(ft,xt,vt){return ft?"x"in ft?function fr(ft,xt,vt,Lt,ar){Tn[0]=ft.x,Tn[1]=ft.y;const tr=ft.z;return Tn[2]=void 0!==tr?tr:ar,Dr(Tn,xt,0,Tn,Lt,0,1)?(vt.x=Tn[0],vt.y=Tn[1],vt.spatialReference=Lt,void 0===tr?(vt.z=void 0,vt.hasZ=!1):(vt.z=Tn[2],vt.hasZ=!0),void 0===ft.m?(vt.m=void 0,vt.hasM=!1):(vt.m=ft.m,vt.hasM=!0),vt):null}(ft,xt,new xe.Z,vt,0):"xmin"in ft?function st(ft,xt,vt,Lt,ar){const{xmin:tr,ymin:pr,xmax:or,ymax:Et,hasZ:jt,hasM:zt}=ft;return Ue(tr,pr,jt?ft.zmin:ar,xt,Tn,Lt)?(vt.xmin=Tn[0],vt.ymin=Tn[1],jt&&(vt.zmin=Tn[2]),Ue(or,Et,jt?ft.zmax:ar,xt,Tn,Lt)?(vt.xmax=Tn[0],vt.ymax=Tn[1],jt&&(vt.zmax=Tn[2]),zt&&(vt.mmin=ft.mmin,vt.mmax=ft.mmax),vt.spatialReference=Lt,vt):null):null}(ft,xt,new B.Z,vt,0):"rings"in ft?Kt(ft,xt,new Pe.Z,vt,0):"paths"in ft?function Wt(ft,xt,vt,Lt,ar){const{paths:tr,hasZ:pr,hasM:or}=ft,Et=[];return Wr(tr,pr,or,xt,Et,Lt,ar)?(vt.paths=Et,vt.spatialReference=Lt,vt.hasZ=pr,vt.hasM=or,vt):null}(ft,xt,new je.Z,vt,0):"points"in ft?function St(ft,xt,vt,Lt,ar){const{points:tr,hasZ:pr,hasM:or}=ft,Et=[],jt=tr.length,zt=[];for(const mr of tr)zt.push(mr[0],mr[1],pr?mr[2]:ar);if(!Dr(zt,xt,0,zt,Lt,0,jt))return null;for(let mr=0;mr<jt;++mr){const Er=3*mr,hr=zt[Er],on=zt[Er+1];Et.push(pr&&or?[hr,on,zt[Er+2],tr[mr][3]]:pr?[hr,on,zt[Er+2]]:or?[hr,on,tr[mr][2]]:[hr,on])}return vt.points=Et,vt.spatialReference=Lt,vt.hasZ=pr,vt.hasM=or,vt}(ft,xt,new X.Z,vt,0):null:null}(tr,vt,Lt)));if((0,ie.Wi)(ar)){const tr=re.Z.cacheKey(vt,Lt);void 0!==bt[tr]?ar=bt[tr]:(ar=Vt(vt,Lt,null),(0,ie.Wi)(ar)&&(ar=new re.Z),bt[tr]=ar)}if((0,ie.Wi)(tt))throw new rr;return tt._project(ft,xt,vt,Lt,ar)}function Vt(ft,xt,vt=null){if((0,ie.Wi)(tt))throw new rr;if((0,ie.Wi)(ft)||(0,ie.Wi)(xt))return null;const Lt=tt._getTransformation(pt,ft,xt,vt,null==vt?void 0:vt.spatialReference);return null!==Lt?re.Z.fromGE(Lt):null}class rr extends T.Z{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function gr(ft,xt,vt){return!vt&&(!!(0,Ee.fS)(ft,xt)||(0,Ee.JY)(ft)&&(0,Ee.JY)(xt)&&!!Ni(ft,xt,In))}function _t(ft,xt,vt,Lt){return $t.apply(this,arguments)}function $t(){return $t=(0,x.Z)(function*(ft,xt,vt,Lt){if(!yt())if(Array.isArray(ft)){for(const{source:ar,dest:tr,geographicTransformation:pr}of ft)if(!gr(ar,tr,pr))return at(Lt)}else if(!gr(ft,xt,vt))return at(Lt)}),$t.apply(this,arguments)}function Qt(ft,xt,vt=xt.spatialReference,Lt=0){return(0,ie.pC)(vt)&&(0,ie.pC)(Kt(ft,ft.spatialReference,xt,vt,Lt))}function Kt(ft,xt,vt,Lt,ar){const{rings:tr,hasZ:pr,hasM:or}=ft,Et=[];return Wr(tr,pr,or,xt,Et,Lt,ar)?(vt.rings=Et,vt.spatialReference=Lt,vt.hasZ=pr,vt.hasM=or,vt):null}function He(ft,xt,vt,Lt=0){Tn[0]=ft.x,Tn[1]=ft.y;const ar=ft.z;return Tn[2]=void 0!==ar?ar:Lt,Dr(Tn,ft.spatialReference,0,xt,vt,0,1)}function Ue(ft,xt,vt,Lt,ar,tr){return jn[0]=ft,jn[1]=xt,jn[2]=vt,Dr(jn,Lt,0,ar,tr,0,1)}function Dr(ft,xt,vt,Lt,ar,tr,pr=1){const or=Ni(xt,ar,In);if((0,ie.Wi)(or))return!1;if(or===Fn){if(ft===Lt&&vt===tr)return!0;const jt=vt+3*pr;for(let zt=vt,mr=tr;zt<jt;zt++,mr++)Lt[mr]=ft[zt];return!0}const Et=vt+3*pr;for(let jt=vt,zt=tr;jt<Et;jt+=3,zt+=3)or(ft,jt,Lt,zt);return!0}function Wr(ft,xt,vt,Lt,ar,tr,pr=0){const or=new Array;for(const jt of ft)for(const zt of jt)or.push(zt[0],zt[1],xt?zt[2]:pr);if(!Dr(or,Lt,0,or,tr,0,or.length/3))return!1;let Et=0;ar.length=0;for(const jt of ft){const zt=new Array;for(const mr of jt)xt&&vt?zt.push([or[Et++],or[Et++],or[Et++],mr[3]]):xt?zt.push([or[Et++],or[Et++],or[Et++]]):vt?(zt.push([or[Et++],or[Et++],mr[2]]),Et++):(zt.push([or[Et++],or[Et++]]),Et++);ar.push(zt)}return!0}function co(ft,xt,vt,Lt){if((0,ie.Wi)(ft)||(0,ie.Wi)(Lt))return!1;const ar=mi(ft,ln),tr=mi(Lt,fo);if(ar===tr&&!xo(tr)&&(0!==ar||(0,Ee.fS)(ft,Lt)))return(0,Y.i)(vt),(0,Y.a)(vt,vt,xt),!0;if(xo(tr)){const pr=Xi[ar][11],or=Xi[11][tr];return!(0,ie.Wi)(pr)&&!(0,ie.Wi)(or)&&(pr(xt,0,Qn,0),or(Qn,0,Xr,0),Yi(Ii*Qn[0],Ii*Qn[1],vt),vt[12]=Xr[0],vt[13]=Xr[1],vt[14]=Xr[2],!0)}if(!(3!==tr&&12!==tr||2!==ar&&1!==ar&&3!==ar)){const pr=Xi[ar][11],or=Xi[11][tr];return!(0,ie.Wi)(pr)&&!(0,ie.Wi)(or)&&(pr(xt,0,Qn,0),or(Qn,0,Xr,0),1===ar?function qn(ft,xt,vt){Yi(ft,xt,vt),(0,Y.t)(vt,vt)}(Ii*Qn[0],Ii*Qn[1],vt):(0,Y.i)(vt),vt[12]=Xr[0],vt[13]=Xr[1],vt[14]=Xr[2],!0)}return!1}function xo(ft){return 1===ft||7===ft||9===ft}function Yi(ft,xt,vt){const Lt=Math.sin(ft),ar=Math.cos(ft),tr=Math.sin(xt),pr=Math.cos(xt),or=vt;return or[0]=-Lt,or[4]=-tr*ar,or[8]=pr*ar,or[12]=0,or[1]=ar,or[5]=-tr*Lt,or[9]=pr*Lt,or[13]=0,or[2]=0,or[6]=pr,or[10]=tr,or[14]=0,or[3]=0,or[7]=0,or[11]=0,or[15]=1,or}function mi(ft,xt){return xt.spatialReference===ft?xt.spatialReferenceId:(xt.spatialReference=ft,"metersPerUnit"in xt&&(xt.metersPerUnit=(0,oe.c9)(ft,1)),xt.spatialReferenceId=ft.wkt===rt.GG.wkt?1:(0,Ee.oR)(ft)?2:(0,Ee.sS)(ft)?3:(0,Ee.QM)(ft)?12:ft.wkt===rt.wY.wkt?4:4490===ft.wkid?5:ft.wkt===rt.HQ.wkt?7:ft.wkt===rt.VY.wkt?9:(0,Ee.BZ)(ft)?8:(0,Ee.V2)(ft)?10:0)}function Fn(ft,xt,vt,Lt){ft!==vt&&(vt[Lt++]=ft[xt++],vt[Lt++]=ft[xt++],vt[Lt]=ft[xt])}function Li(ft,xt,vt,Lt){vt[Lt++]=Qi*(ft[xt++]/Ce.sv.radius),vt[Lt++]=Qi*(Math.PI/2-2*Math.atan(Math.exp(-ft[xt++]/Ce.sv.radius))),vt[Lt]=ft[xt]}function Do(ft,xt,vt,Lt){!function Ea(ft,xt,vt,Lt,ar){const tr=.4999999*Math.PI,pr=(0,ne.uZ)(Ii*ft[xt+1],-tr,tr),or=Math.sin(pr);vt[Lt++]=Ii*ft[xt]*ar.radius,vt[Lt++]=ar.halfSemiMajorAxis*Math.log((1+or)/(1-or)),vt[Lt]=ft[xt+2]}(ft,xt,vt,Lt,Ce.sv)}const ms=Ce.sv.radius*Math.PI/180,Bs=180/(Ce.sv.radius*Math.PI);function Ji(ft,xt,vt,Lt){vt[Lt]=ft[xt]*ms,vt[Lt+1]=ft[xt+1]*ms,vt[Lt+2]=ft[xt+2]}function Nn(ft,xt,vt,Lt){vt[Lt]=ft[xt]*Bs,vt[Lt+1]=ft[xt+1]*Bs,vt[Lt+2]=ft[xt+2]}function fn(ft,xt,vt,Lt,ar){const tr=ar+ft[xt+2],pr=Ii*ft[xt+1],or=Ii*ft[xt],Et=Math.cos(pr);vt[Lt++]=Math.cos(or)*Et*tr,vt[Lt++]=Math.sin(or)*Et*tr,vt[Lt]=Math.sin(pr)*tr}function Rr(ft,xt,vt,Lt){fn(ft,xt,vt,Lt,Ce.Z1.radius)}function xr(ft,xt,vt,Lt){fn(ft,xt,vt,Lt,Ce.yr.radius)}function bn(ft,xt,vt,Lt){fn(ft,xt,vt,Lt,Ce.sv.radius)}function Pn(ft,xt,vt,Lt,ar){const tr=ft[xt],pr=ft[xt+1],or=ft[xt+2],Et=Math.sqrt(tr*tr+pr*pr+or*or),jt=(0,ne.Kt)(or/(0===Et?1:Et)),zt=Math.atan2(pr,tr);vt[Lt++]=Qi*zt,vt[Lt++]=Qi*jt,vt[Lt]=Et-ar}function zr(ft,xt,vt,Lt){Pn(ft,xt,vt,Lt,Ce.Z1.radius)}function qt(ft,xt,vt,Lt){Pn(ft,xt,vt,Lt,Ce.yr.radius)}function Or(ft,xt,vt,Lt){Pn(ft,xt,vt,Lt,Ce.sv.radius)}function Kr(ft,xt,vt,Lt){!function Gn(ft,xt,vt,Lt,ar){const tr=Ii*ft[xt],pr=Ii*ft[xt+1],or=ft[xt+2],Et=Math.sin(pr),jt=Math.cos(pr),zt=ar.radius/Math.sqrt(1-ar.eccentricitySquared*Et*Et);vt[Lt++]=(zt+or)*jt*Math.cos(tr),vt[Lt++]=(zt+or)*jt*Math.sin(tr),vt[Lt++]=(zt*(1-ar.eccentricitySquared)+or)*Et}(ft,xt,vt,Lt,Ce.sv)}function ui(ft,xt,vt,Lt){const ar=Qe,tr=ft[xt],pr=ft[xt+1],or=ft[xt+2];let Et,jt,zt,mr,Er,hr,on,yn,Be,nt,Ct,Ne,ke,ot,Dt,kt,Jt,ir,Sr,Zr,Fr;Et=Math.abs(or),jt=tr*tr+pr*pr,zt=Math.sqrt(jt),mr=jt+or*or,Er=Math.sqrt(mr),Zr=Math.atan2(pr,tr),hr=or*or/mr,on=jt/mr,ot=ar.a2/Er,Dt=ar.a3-ar.a4/Er,on>.3?(yn=Et/Er*(1+on*(ar.a1+ot+hr*Dt)/Er),Sr=Math.asin(yn),nt=yn*yn,Be=Math.sqrt(1-nt)):(Be=zt/Er*(1-hr*(ar.a5-ot-on*Dt)/Er),Sr=Math.acos(Be),nt=1-Be*Be,yn=Math.sqrt(nt)),Ct=1-Ce.sv.eccentricitySquared*nt,Ne=Ce.sv.radius/Math.sqrt(Ct),ke=ar.a6*Ne,ot=zt-Ne*Be,Dt=Et-ke*yn,Jt=Be*ot+yn*Dt,kt=Be*Dt-yn*ot,ir=kt/(ke/Ct+Jt),Sr+=ir,Fr=Jt+kt*ir/2,or<0&&(Sr=-Sr),vt[Lt++]=Qi*Zr,vt[Lt++]=Qi*Sr,vt[Lt]=Fr}const Xi={2:{5:null,8:null,10:null,11:Fn,6:Fn,1:bn,7:null,9:null,0:null,3:Do,12:Ji,2:Fn,4:Kr},5:{5:Fn,8:null,10:null,11:Fn,6:Fn,1:bn,7:null,9:null,0:null,3:null,12:Ji,2:null,4:Kr},8:{5:null,8:Fn,10:null,11:Fn,6:null,1:null,7:xr,9:null,0:null,3:null,12:null,2:null,4:null},10:{5:null,8:null,10:Fn,11:Fn,6:null,1:null,7:null,9:Rr,0:null,3:null,12:null,2:null,4:null},3:{5:null,8:null,10:null,11:Li,6:Li,1:function js(ft,xt,vt,Lt){Li(ft,xt,vt,Lt),bn(vt,Lt,vt,Lt)},7:null,9:null,0:null,3:Fn,12:function So(ft,xt,vt,Lt){Li(ft,xt,vt,Lt),Ji(vt,Lt,vt,Lt)},2:Li,4:function ss(ft,xt,vt,Lt){Li(ft,xt,vt,Lt),Kr(vt,Lt,vt,Lt)}},4:{5:ui,8:null,10:null,11:ui,6:ui,1:function Bn(ft,xt,vt,Lt){ui(ft,xt,vt,Lt),bn(vt,Lt,vt,Lt)},7:null,9:null,0:null,3:function gs(ft,xt,vt,Lt){ui(ft,xt,vt,Lt),Do(vt,Lt,vt,Lt)},12:function ei(ft,xt,vt,Lt){ui(ft,xt,vt,Lt),Ji(vt,Lt,vt,Lt)},2:ui,4:Fn},1:{5:Or,8:null,10:null,11:Or,6:Or,1:Fn,7:null,9:null,0:null,3:function Un(ft,xt,vt,Lt){Or(ft,xt,vt,Lt),Do(vt,Lt,vt,Lt)},12:function Ve(ft,xt,vt,Lt){Or(ft,xt,vt,Lt),Ji(vt,Lt,vt,Lt)},2:Or,4:function ai(ft,xt,vt,Lt){Or(ft,xt,vt,Lt),Kr(vt,Lt,vt,Lt)}},7:{5:null,8:qt,10:null,11:qt,6:null,1:null,7:Fn,9:null,0:null,3:null,12:null,2:null,4:null},9:{5:null,8:null,10:zr,11:zr,6:null,1:null,7:null,9:Fn,0:null,3:null,12:null,2:null,4:null},0:{5:null,8:null,10:null,11:null,6:null,1:null,7:null,9:null,0:Fn,3:null,12:null,2:null,4:null},11:{5:Fn,8:Fn,10:Fn,11:Fn,6:Fn,1:bn,7:xr,9:Rr,0:null,3:Do,12:Ji,2:Fn,4:Kr},6:{5:null,8:null,10:null,11:Fn,6:Fn,1:bn,7:null,9:null,0:null,3:null,12:Ji,2:Fn,4:Kr},12:{5:Nn,8:null,10:null,11:Nn,6:Nn,1:function Yt(ft,xt,vt,Lt){Nn(ft,xt,vt,Lt),bn(vt,Lt,vt,Lt)},7:null,9:null,0:null,3:function Ut(ft,xt,vt,Lt){Nn(ft,xt,vt,Lt),Do(vt,Lt,vt,Lt)},12:Fn,2:Nn,4:function Mr(ft,xt,vt,Lt){Nn(ft,xt,vt,Lt),Kr(vt,Lt,vt,Lt)}}};function Ni(ft,xt,vt=Oo()){return(0,ie.Wi)(ft)||(0,ie.Wi)(xt)?null:function ho(ft,xt,vt){if((0,ie.Wi)(ft)||(0,ie.Wi)(xt)||vt.source.spatialReference===ft&&vt.dest.spatialReference===xt)return vt;const Lt=mi(ft,vt.source),ar=mi(xt,vt.dest);return vt.projector=0===Lt&&0===ar?(0,Ee.fS)(ft,xt)?Fn:null:Xi[Lt][ar],vt}(ft,xt,vt).projector}function Oo(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Fn}}const ln={spatialReference:null,spatialReferenceId:0},fo={spatialReference:null,spatialReferenceId:0},In=Oo(),Ii=(Oo(),(0,ne.Vl)(1)),Qi=(0,ne.BV)(1),jn=(0,L.c)(),Qn=(0,L.c)(),Xr=(0,L.c)(),Tn=(0,L.c)();(0,L.c)()},12080:(ut,Oe,C)=>{"use strict";C.d(Oe,{GG:()=>te,HQ:()=>oe,VY:()=>Y,wY:()=>j,Iu:()=>X,e8:()=>Z,rS:()=>B,N_:()=>L});var x=C(65234),T=C(94425),ne=C(37053);function ie(z){return new x.Z({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${z.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const te=ie(T.sv),oe=ie(T.yr),Y=ie(T.Z1),j=new x.Z({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${T.sv.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function L(z){return z&&z===T.yr?oe:z&&z===T.Z1?Y:te}function B(z){return z&&((0,ne.BZ)(z)||z===oe)?oe:z&&((0,ne.V2)(z)||z===Y)?Y:te}function X(z){return z&&((0,ne.BZ)(z)||z===oe)?T.yr:z&&((0,ne.V2)(z)||z===Y)?T.Z1:T.sv}function Z(z){return(0,ne.o$)(z)?T.yr:(0,ne.ME)(z)?T.Z1:T.sv}},94425:(ut,Oe,C)=>{"use strict";C.d(Oe,{sv:()=>T,yr:()=>ne,Z1:()=>ie});class x{constructor(oe,Y,j,L){this.semiMajorAxis=oe,this.flattening=Y,this.outerAtmosphereRimWidth=j,this.semiMinorAxis=this.semiMajorAxis*(1-this.flattening),this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=L||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const T=new x(6378137,1/298.257223563,3e5,.006694379990137799),ne=new x(3396190,1/169.8944472236118,23e4),ie=new x(1737400,0,0)},98346:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ne});let x=0;class T{constructor(te=null){this.uid=x++,te?(this._wkt=void 0!==te.wkt?te.wkt:null,this._wkid=void 0!==te.wkid?te.wkid:-1,this._isInverse=void 0!==te.isInverse&&!0===te.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(te){const oe=new T;return oe._wkt=te.wkt,oe._wkid=te.wkid,oe._isInverse=te.isInverse,oe}get wkt(){return this._wkt}set wkt(te){this._wkt=te,this.uid=x++}get wkid(){return this._wkid}set wkid(te){this._wkid=te,this.uid=x++}get isInverse(){return this._isInverse}set isInverse(te){this._isInverse=te,this.uid=x++}getInverse(){const te=new T;return te._wkt=this.wkt,te._wkid=this._wkid,te._isInverse=!this.isInverse,te}}class ne{constructor(te){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,te&&te.steps)for(const oe of te.steps)this.steps.push(oe instanceof T?oe:new T({wkid:oe.wkid,wkt:oe.wkt,isInverse:oe.isInverse}))}static cacheKey(te,oe){return[null!=te.wkid?te.wkid.toString():"-1",null!=te.wkt?te.wkt.toString():"",null!=oe.wkid?oe.wkid.toString():"-1",null!=oe.wkt?oe.wkt.toString():""].join(",")}static fromGE(te){const oe=new ne;let Y="";for(const j of te.steps){const L=T.fromGE(j);oe.steps.push(L),Y+=L.uid.toString()+","}return oe._cached_projection={},oe._gtlistentry=null,oe._chain=Y,oe}getInverse(){const te=new ne;te.steps=[];for(let oe=this.steps.length-1;oe>=0;oe--)te.steps.push(this.steps[oe].getInverse());return te}getGTListEntry(){let te="";for(const oe of this.steps)te+=oe.uid.toString()+",";return te!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=te),this._gtlistentry}assignCachedGe(te,oe,Y){this._cached_projection[ne.cacheKey(te,oe)]=Y}getCachedGeTransformation(te,oe){let Y="";for(const L of this.steps)Y+=L.uid.toString()+",";Y!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Y);const j=this._cached_projection[ne.cacheKey(te,oe)];return void 0===j?null:j}}},84029:(ut,Oe,C)=>{"use strict";let x;C.d(Oe,{Z:()=>T});const T={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(x=2e3;x<=2045;x++)T[x]=0;for(x=2056;x<=2065;x++)T[x]=0;for(x=2067;x<=2135;x++)T[x]=0;for(x=2137;x<=2154;x++)T[x]=0;for(x=2161;x<=2170;x++)T[x]=0;for(x=2172;x<=2193;x++)T[x]=0;for(x=2195;x<=2198;x++)T[x]=0;for(x=2200;x<=2203;x++)T[x]=0;for(x=2205;x<=2217;x++)T[x]=0;for(x=2222;x<=2224;x++)T[x]=1;for(x=2225;x<=2250;x++)T[x]=2;for(x=2251;x<=2253;x++)T[x]=1;for(x=2257;x<=2264;x++)T[x]=2;for(x=2274;x<=2279;x++)T[x]=2;for(x=2280;x<=2282;x++)T[x]=1;for(x=2283;x<=2289;x++)T[x]=2;for(x=2290;x<=2292;x++)T[x]=0;for(x=2308;x<=2313;x++)T[x]=0;for(x=2315;x<=2491;x++)T[x]=0;for(x=2494;x<=2866;x++)T[x]=0;for(x=2867;x<=2869;x++)T[x]=1;for(x=2870;x<=2888;x++)T[x]=2;for(x=2891;x<=2895;x++)T[x]=2;for(x=2896;x<=2898;x++)T[x]=1;for(x=2902;x<=2908;x++)T[x]=2;for(x=2915;x<=2920;x++)T[x]=2;for(x=2921;x<=2923;x++)T[x]=1;for(x=2924;x<=2930;x++)T[x]=2;for(x=2931;x<=2962;x++)T[x]=0;for(x=2964;x<=2968;x++)T[x]=2;for(x=2969;x<=2973;x++)T[x]=0;for(x=2975;x<=2991;x++)T[x]=0;for(x=2995;x<=3051;x++)T[x]=0;for(x=3054;x<=3079;x++)T[x]=0;for(x=3081;x<=3088;x++)T[x]=0;for(x=3092;x<=3101;x++)T[x]=0;for(x=3106;x<=3138;x++)T[x]=0;for(x=3146;x<=3151;x++)T[x]=0;for(x=3153;x<=3166;x++)T[x]=0;for(x=3168;x<=3172;x++)T[x]=0;for(x=3174;x<=3203;x++)T[x]=0;for(x=3294;x<=3358;x++)T[x]=0;for(x=3367;x<=3403;x++)T[x]=0;for(x=3408;x<=3416;x++)T[x]=0;for(x=3417;x<=3438;x++)T[x]=2;for(x=3441;x<=3446;x++)T[x]=2;for(x=3447;x<=3450;x++)T[x]=0;for(x=3451;x<=3459;x++)T[x]=2;for(x=3460;x<=3478;x++)T[x]=0;for(x=3554;x<=3559;x++)T[x]=0;for(x=3560;x<=3570;x++)T[x]=2;for(x=3571;x<=3581;x++)T[x]=0;for(x=3594;x<=3597;x++)T[x]=0;for(x=3601;x<=3604;x++)T[x]=0;for(x=3637;x<=3639;x++)T[x]=0;for(x=3665;x<=3667;x++)T[x]=0;for(x=3693;x<=3695;x++)T[x]=0;for(x=3701;x<=3727;x++)T[x]=0;for(x=3728;x<=3739;x++)T[x]=2;for(x=3740;x<=3751;x++)T[x]=0;for(x=3753;x<=3760;x++)T[x]=2;for(x=3761;x<=3773;x++)T[x]=0;for(x=3775;x<=3777;x++)T[x]=0;for(x=3779;x<=3781;x++)T[x]=0;for(x=3783;x<=3785;x++)T[x]=0;for(x=3788;x<=3791;x++)T[x]=0;for(x=3797;x<=3802;x++)T[x]=0;for(x=3814;x<=3816;x++)T[x]=0;for(x=3825;x<=3829;x++)T[x]=0;for(x=3832;x<=3841;x++)T[x]=0;for(x=3844;x<=3852;x++)T[x]=0;for(x=3873;x<=3885;x++)T[x]=0;for(x=3890;x<=3893;x++)T[x]=0;for(x=3907;x<=3912;x++)T[x]=0;for(x=3942;x<=3950;x++)T[x]=0;for(x=3968;x<=3970;x++)T[x]=0;for(x=3973;x<=3976;x++)T[x]=0;for(x=3986;x<=3989;x++)T[x]=0;for(x=3994;x<=3997;x++)T[x]=0;for(x=4048;x<=4051;x++)T[x]=0;for(x=4056;x<=4063;x++)T[x]=0;for(x=4093;x<=4096;x++)T[x]=0;for(x=4390;x<=4398;x++)T[x]=0;for(x=4399;x<=4413;x++)T[x]=2;for(x=4418;x<=4433;x++)T[x]=2;for(x=4455;x<=4457;x++)T[x]=2;for(x=4484;x<=4489;x++)T[x]=0;for(x=4491;x<=4554;x++)T[x]=0;for(x=4568;x<=4589;x++)T[x]=0;for(x=4652;x<=4656;x++)T[x]=0;for(x=4766;x<=4800;x++)T[x]=0;for(x=5014;x<=5016;x++)T[x]=0;for(x=5069;x<=5072;x++)T[x]=0;for(x=5105;x<=5130;x++)T[x]=0;for(x=5173;x<=5188;x++)T[x]=0;for(x=5253;x<=5259;x++)T[x]=0;for(x=5269;x<=5275;x++)T[x]=0;for(x=5292;x<=5311;x++)T[x]=0;for(x=5329;x<=5331;x++)T[x]=0;for(x=5343;x<=5349;x++)T[x]=0;for(x=5355;x<=5357;x++)T[x]=0;for(x=5387;x<=5389;x++)T[x]=0;for(x=5459;x<=5463;x++)T[x]=0;for(x=5479;x<=5482;x++)T[x]=0;for(x=5518;x<=5520;x++)T[x]=0;for(x=5530;x<=5539;x++)T[x]=0;for(x=5550;x<=5552;x++)T[x]=0;for(x=5562;x<=5583;x++)T[x]=0;for(x=5623;x<=5625;x++)T[x]=2;for(x=5631;x<=5639;x++)T[x]=0;for(x=5649;x<=5653;x++)T[x]=0;for(x=5663;x<=5680;x++)T[x]=0;for(x=5682;x<=5685;x++)T[x]=0;for(x=5875;x<=5877;x++)T[x]=0;for(x=5896;x<=5899;x++)T[x]=0;for(x=5921;x<=5940;x++)T[x]=0;for(x=6050;x<=6125;x++)T[x]=0;for(x=6244;x<=6275;x++)T[x]=0;for(x=6328;x<=6348;x++)T[x]=0;for(x=6350;x<=6356;x++)T[x]=0;for(x=6366;x<=6372;x++)T[x]=0;for(x=6381;x<=6387;x++)T[x]=0;for(x=6393;x<=6404;x++)T[x]=0;for(x=6480;x<=6483;x++)T[x]=0;for(x=6511;x<=6514;x++)T[x]=0;for(x=6579;x<=6581;x++)T[x]=0;for(x=6619;x<=6624;x++)T[x]=0;for(x=6625;x<=6627;x++)T[x]=2;for(x=6628;x<=6632;x++)T[x]=0;for(x=6634;x<=6637;x++)T[x]=0;for(x=6669;x<=6692;x++)T[x]=0;for(x=6707;x<=6709;x++)T[x]=0;for(x=6720;x<=6723;x++)T[x]=0;for(x=6732;x<=6738;x++)T[x]=0;for(x=6931;x<=6933;x++)T[x]=0;for(x=6956;x<=6959;x++)T[x]=0;for(x=7005;x<=7007;x++)T[x]=0;for(x=7057;x<=7070;x++)T[x]=2;for(x=7074;x<=7082;x++)T[x]=0;for(x=7109;x<=7118;x++)T[x]=0;for(x=7119;x<=7127;x++)T[x]=1;for(x=7374;x<=7376;x++)T[x]=0;for(x=7528;x<=7586;x++)T[x]=0;for(x=7587;x<=7645;x++)T[x]=2;for(x=7692;x<=7696;x++)T[x]=0;for(x=7755;x<=7787;x++)T[x]=0;for(x=7791;x<=7795;x++)T[x]=0;for(x=7799;x<=7801;x++)T[x]=0;for(x=7803;x<=7805;x++)T[x]=0;for(x=7825;x<=7831;x++)T[x]=0;for(x=7845;x<=7859;x++)T[x]=0;for(x=8013;x<=8032;x++)T[x]=0;for(x=8065;x<=8068;x++)T[x]=1;for(x=8518;x<=8529;x++)T[x]=2;for(x=8533;x<=8536;x++)T[x]=2;for(x=8538;x<=8540;x++)T[x]=2;for(x=8677;x<=8679;x++)T[x]=0;for(x=8836;x<=8840;x++)T[x]=0;for(x=8857;x<=8859;x++)T[x]=0;for(x=8908;x<=8910;x++)T[x]=0;for(x=9154;x<=9159;x++)T[x]=0;for(x=9205;x<=9218;x++)T[x]=0;for(x=9271;x<=9273;x++)T[x]=0;for(x=9295;x<=9297;x++)T[x]=0;for(x=9356;x<=9360;x++)T[x]=0;for(x=9404;x<=9407;x++)T[x]=0;for(x=9476;x<=9482;x++)T[x]=0;for(x=9487;x<=9494;x++)T[x]=0;for(x=9697;x<=9699;x++)T[x]=0;for(x=20002;x<=20032;x++)T[x]=0;for(x=20062;x<=20092;x++)T[x]=0;for(x=20135;x<=20138;x++)T[x]=0;for(x=20248;x<=20258;x++)T[x]=0;for(x=20348;x<=20358;x++)T[x]=0;for(x=20436;x<=20440;x++)T[x]=0;for(x=20822;x<=20824;x++)T[x]=0;for(x=20904;x<=20932;x++)T[x]=0;for(x=20934;x<=20936;x++)T[x]=0;for(x=21004;x<=21032;x++)T[x]=0;for(x=21035;x<=21037;x++)T[x]=0;for(x=21095;x<=21097;x++)T[x]=0;for(x=21148;x<=21150;x++)T[x]=0;for(x=21207;x<=21264;x++)T[x]=0;for(x=21307;x<=21364;x++)T[x]=0;for(x=21413;x<=21423;x++)T[x]=0;for(x=21453;x<=21463;x++)T[x]=0;for(x=21473;x<=21483;x++)T[x]=0;for(x=21780;x<=21782;x++)T[x]=0;for(x=21891;x<=21894;x++)T[x]=0;for(x=21896;x<=21899;x++)T[x]=0;for(x=22171;x<=22177;x++)T[x]=0;for(x=22181;x<=22187;x++)T[x]=0;for(x=22191;x<=22197;x++)T[x]=0;for(x=22234;x<=22236;x++)T[x]=0;for(x=22521;x<=22525;x++)T[x]=0;for(x=22991;x<=22994;x++)T[x]=0;for(x=23028;x<=23038;x++)T[x]=0;for(x=23830;x<=23853;x++)T[x]=0;for(x=23866;x<=23872;x++)T[x]=0;for(x=23877;x<=23884;x++)T[x]=0;for(x=23886;x<=23894;x++)T[x]=0;for(x=23946;x<=23948;x++)T[x]=0;for(x=24311;x<=24313;x++)T[x]=0;for(x=24342;x<=24347;x++)T[x]=0;for(x=24370;x<=24374;x++)T[x]=10;for(x=24375;x<=24381;x++)T[x]=0;for(x=24718;x<=24721;x++)T[x]=0;for(x=24817;x<=24821;x++)T[x]=0;for(x=24877;x<=24882;x++)T[x]=0;for(x=24891;x<=24893;x++)T[x]=0;for(x=25391;x<=25395;x++)T[x]=0;for(x=25828;x<=25838;x++)T[x]=0;for(x=26191;x<=26195;x++)T[x]=0;for(x=26391;x<=26393;x++)T[x]=0;for(x=26701;x<=26722;x++)T[x]=0;for(x=26729;x<=26799;x++)T[x]=2;for(x=26801;x<=26803;x++)T[x]=2;for(x=26811;x<=26813;x++)T[x]=2;for(x=26847;x<=26870;x++)T[x]=2;for(x=26891;x<=26899;x++)T[x]=0;for(x=26901;x<=26923;x++)T[x]=0;for(x=26929;x<=26946;x++)T[x]=0;for(x=26948;x<=26998;x++)T[x]=0;for(x=27037;x<=27040;x++)T[x]=0;for(x=27205;x<=27232;x++)T[x]=0;for(x=27258;x<=27260;x++)T[x]=0;for(x=27391;x<=27398;x++)T[x]=0;for(x=27561;x<=27564;x++)T[x]=0;for(x=27571;x<=27574;x++)T[x]=0;for(x=27581;x<=27584;x++)T[x]=0;for(x=27591;x<=27594;x++)T[x]=0;for(x=28191;x<=28193;x++)T[x]=0;for(x=28348;x<=28358;x++)T[x]=0;for(x=28402;x<=28432;x++)T[x]=0;for(x=28462;x<=28492;x++)T[x]=0;for(x=29118;x<=29122;x++)T[x]=0;for(x=29168;x<=29172;x++)T[x]=0;for(x=29177;x<=29185;x++)T[x]=0;for(x=29187;x<=29195;x++)T[x]=0;for(x=29900;x<=29903;x++)T[x]=0;for(x=30161;x<=30179;x++)T[x]=0;for(x=30491;x<=30494;x++)T[x]=0;for(x=30729;x<=30732;x++)T[x]=0;for(x=31251;x<=31259;x++)T[x]=0;for(x=31265;x<=31268;x++)T[x]=0;for(x=31275;x<=31279;x++)T[x]=0;for(x=31281;x<=31297;x++)T[x]=0;for(x=31461;x<=31469;x++)T[x]=0;for(x=31491;x<=31495;x++)T[x]=0;for(x=31917;x<=31922;x++)T[x]=0;for(x=31965;x<=32e3;x++)T[x]=0;for(x=32001;x<=32003;x++)T[x]=2;for(x=32005;x<=32031;x++)T[x]=2;for(x=32033;x<=32060;x++)T[x]=2;for(x=32064;x<=32067;x++)T[x]=2;for(x=32074;x<=32077;x++)T[x]=2;for(x=32081;x<=32086;x++)T[x]=0;for(x=32107;x<=32130;x++)T[x]=0;for(x=32133;x<=32158;x++)T[x]=0;for(x=32164;x<=32167;x++)T[x]=2;for(x=32180;x<=32199;x++)T[x]=0;for(x=32201;x<=32260;x++)T[x]=0;for(x=32301;x<=32360;x++)T[x]=0;for(x=32601;x<=32662;x++)T[x]=0;for(x=32664;x<=32667;x++)T[x]=2;for(x=32701;x<=32761;x++)T[x]=0;for(x=53001;x<=53004;x++)T[x]=0;for(x=53008;x<=53019;x++)T[x]=0;for(x=53021;x<=53032;x++)T[x]=0;for(x=53034;x<=53037;x++)T[x]=0;for(x=53042;x<=53046;x++)T[x]=0;for(x=53074;x<=53080;x++)T[x]=0;for(x=54001;x<=54004;x++)T[x]=0;for(x=54008;x<=54019;x++)T[x]=0;for(x=54021;x<=54032;x++)T[x]=0;for(x=54034;x<=54037;x++)T[x]=0;for(x=54042;x<=54046;x++)T[x]=0;for(x=54048;x<=54053;x++)T[x]=0;for(x=54074;x<=54080;x++)T[x]=0;for(x=54098;x<=54101;x++)T[x]=0;for(x=102001;x<=102040;x++)T[x]=0;for(x=102042;x<=102063;x++)T[x]=0;for(x=102065;x<=102067;x++)T[x]=0;for(x=102070;x<=102117;x++)T[x]=0;for(x=102122;x<=102216;x++)T[x]=0;for(x=102221;x<=102377;x++)T[x]=0;for(x=102382;x<=102388;x++)T[x]=0;for(x=102389;x<=102398;x++)T[x]=2;for(x=102399;x<=102444;x++)T[x]=0;for(x=102445;x<=102447;x++)T[x]=2;for(x=102448;x<=102458;x++)T[x]=0;for(x=102459;x<=102468;x++)T[x]=2;for(x=102469;x<=102499;x++)T[x]=0;for(x=102500;x<=102519;x++)T[x]=1;for(x=102520;x<=102524;x++)T[x]=0;for(x=102525;x<=102529;x++)T[x]=2;for(x=102530;x<=102588;x++)T[x]=0;for(x=102590;x<=102598;x++)T[x]=0;for(x=102601;x<=102603;x++)T[x]=0;for(x=102605;x<=102628;x++)T[x]=0;for(x=102629;x<=102646;x++)T[x]=2;for(x=102648;x<=102700;x++)T[x]=2;for(x=102701;x<=102703;x++)T[x]=0;for(x=102707;x<=102730;x++)T[x]=2;for(x=102733;x<=102758;x++)T[x]=2;for(x=102767;x<=102900;x++)T[x]=0;for(x=102901;x<=102933;x++)T[x]=2;for(x=102934;x<=102950;x++)T[x]=13;for(x=102951;x<=102960;x++)T[x]=0;for(x=102965;x<=102969;x++)T[x]=0;for(x=102971;x<=102973;x++)T[x]=0;for(x=102975;x<=102989;x++)T[x]=0;for(x=102990;x<=102992;x++)T[x]=1;for(x=102997;x<=103002;x++)T[x]=0;for(x=103003;x<=103008;x++)T[x]=2;for(x=103009;x<=103011;x++)T[x]=0;for(x=103012;x<=103014;x++)T[x]=2;for(x=103019;x<=103021;x++)T[x]=0;for(x=103022;x<=103024;x++)T[x]=2;for(x=103029;x<=103031;x++)T[x]=0;for(x=103032;x<=103034;x++)T[x]=2;for(x=103065;x<=103068;x++)T[x]=0;for(x=103074;x<=103076;x++)T[x]=0;for(x=103077;x<=103079;x++)T[x]=1;for(x=103080;x<=103082;x++)T[x]=0;for(x=103083;x<=103085;x++)T[x]=2;for(x=103090;x<=103093;x++)T[x]=0;for(x=103097;x<=103099;x++)T[x]=0;for(x=103100;x<=103102;x++)T[x]=2;for(x=103107;x<=103109;x++)T[x]=0;for(x=103110;x<=103112;x++)T[x]=2;for(x=103113;x<=103116;x++)T[x]=0;for(x=103117;x<=103120;x++)T[x]=2;for(x=103153;x<=103157;x++)T[x]=0;for(x=103158;x<=103162;x++)T[x]=2;for(x=103163;x<=103165;x++)T[x]=0;for(x=103166;x<=103168;x++)T[x]=1;for(x=103169;x<=103171;x++)T[x]=2;for(x=103186;x<=103188;x++)T[x]=0;for(x=103189;x<=103191;x++)T[x]=2;for(x=103192;x<=103195;x++)T[x]=0;for(x=103196;x<=103199;x++)T[x]=2;for(x=103200;x<=103224;x++)T[x]=0;for(x=103225;x<=103227;x++)T[x]=1;for(x=103232;x<=103237;x++)T[x]=0;for(x=103238;x<=103243;x++)T[x]=2;for(x=103244;x<=103246;x++)T[x]=0;for(x=103247;x<=103249;x++)T[x]=2;for(x=103254;x<=103256;x++)T[x]=0;for(x=103257;x<=103259;x++)T[x]=2;for(x=103264;x<=103266;x++)T[x]=0;for(x=103267;x<=103269;x++)T[x]=2;for(x=103300;x<=103375;x++)T[x]=0;for(x=103381;x<=103383;x++)T[x]=0;for(x=103384;x<=103386;x++)T[x]=1;for(x=103387;x<=103389;x++)T[x]=0;for(x=103390;x<=103392;x++)T[x]=2;for(x=103397;x<=103399;x++)T[x]=0;for(x=103400;x<=103471;x++)T[x]=2;for(x=103476;x<=103478;x++)T[x]=0;for(x=103479;x<=103481;x++)T[x]=2;for(x=103486;x<=103488;x++)T[x]=0;for(x=103489;x<=103491;x++)T[x]=2;for(x=103492;x<=103495;x++)T[x]=0;for(x=103496;x<=103499;x++)T[x]=2;for(x=103528;x<=103543;x++)T[x]=0;for(x=103544;x<=103548;x++)T[x]=2;for(x=103549;x<=103551;x++)T[x]=0;for(x=103552;x<=103554;x++)T[x]=1;for(x=103555;x<=103557;x++)T[x]=2;for(x=103558;x<=103560;x++)T[x]=0;for(x=103571;x<=103573;x++)T[x]=0;for(x=103574;x<=103576;x++)T[x]=2;for(x=103577;x<=103580;x++)T[x]=0;for(x=103581;x<=103583;x++)T[x]=2;for(x=103595;x<=103694;x++)T[x]=0;for(x=103696;x<=103699;x++)T[x]=0;for(x=103700;x<=103793;x++)T[x]=2;for(x=103794;x<=103872;x++)T[x]=0;for(x=103900;x<=103971;x++)T[x]=2},5548:(ut,Oe,C)=>{"use strict";C.d(Oe,{Gv:()=>Te,Ue:()=>te,cS:()=>he,fS:()=>rt,TC:()=>B,pp:()=>Z,JR:()=>xe,al:()=>oe,t8:()=>ce,Tn:()=>Me,op:()=>fe,dp:()=>de});var x=C(62208);function te(Ae=Ye){return[Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5]]}function oe(Ae,Qe,Je,re,Ee,$e,tt=te()){return tt[0]=Ae,tt[1]=Qe,tt[2]=Je,tt[3]=re,tt[4]=Ee,tt[5]=$e,tt}function B(Ae,Qe){Ae[0]=Math.min(Ae[0],Qe[0]),Ae[1]=Math.min(Ae[1],Qe[1]),Ae[2]=Math.min(Ae[2],Qe[2]),Ae[3]=Math.max(Ae[3],Qe[3]),Ae[4]=Math.max(Ae[4],Qe[4]),Ae[5]=Math.max(Ae[5],Qe[5])}function Z(Ae,Qe){Ae[0]=Math.min(Ae[0],Qe[0]),Ae[1]=Math.min(Ae[1],Qe[1]),Ae[2]=Math.min(Ae[2],Qe[2]),Ae[3]=Math.max(Ae[3],Qe[0]),Ae[4]=Math.max(Ae[4],Qe[1]),Ae[5]=Math.max(Ae[5],Qe[2])}function de(Ae,Qe=[0,0,0]){return Qe[0]=function P(Ae){return Ae[0]>=Ae[3]?0:Ae[3]-Ae[0]}(Ae),Qe[1]=function F(Ae){return Ae[1]>=Ae[4]?0:Ae[4]-Ae[1]}(Ae),Qe[2]=function $(Ae){return Ae[2]>=Ae[5]?0:Ae[5]-Ae[2]}(Ae),Qe}function fe(Ae,Qe,Je=Ae){return Je[0]=Qe[0],Je[1]=Qe[1],Je[2]=Qe[2],Je!==Ae&&(Je[3]=Ae[3],Je[4]=Ae[4],Je[5]=Ae[5]),Je}function Me(Ae,Qe,Je=Ae){return Je[3]=Qe[0],Je[4]=Qe[1],Je[5]=Qe[2],Je!==Ae&&(Je[0]=Ae[0],Je[1]=Ae[1],Je[2]=Ae[2]),Ae}function ce(Ae,Qe){return Ae[0]=Qe[0],Ae[1]=Qe[1],Ae[2]=Qe[2],Ae[3]=Qe[3],Ae[4]=Qe[4],Ae[5]=Qe[5],Ae}function he(Ae){return Ae?ce(Ae,Te):te(Te)}function xe(Ae,Qe){return Ae[0]=Qe[0],Ae[1]=Qe[1],Ae[2]=Number.NEGATIVE_INFINITY,Ae[3]=Qe[2],Ae[4]=Qe[3],Ae[5]=Number.POSITIVE_INFINITY,Ae}function Pe(Ae){return 6===Ae.length}function rt(Ae,Qe,Je){if((0,x.Wi)(Ae)||(0,x.Wi)(Qe))return Ae===Qe;if(!Pe(Ae)||!Pe(Qe))return!1;if(Je){for(let re=0;re<Ae.length;re++)if(!Je(Ae[re],Qe[re]))return!1}else for(let re=0;re<Ae.length;re++)if(Ae[re]!==Qe[re])return!1;return!0}C(2004),C(65401);const Te=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Ye=[0,0,0,0,0,0];te()},65401:(ut,Oe,C)=>{"use strict";C.d(Oe,{Gv:()=>Pe,SO:()=>F,d9:()=>Y,r3:()=>ge,Zm:()=>ye,Ue:()=>oe,Ho:()=>Z,oJ:()=>B,al:()=>L,Cb:()=>P,kK:()=>le,HH:()=>X,bf:()=>V}),C(8314),C(21286);var ne=C(62208),ie=C(2004);function oe(Le=je){return[Le[0],Le[1],Le[2],Le[3]]}function Y(Le){return[Le[0],Le[1],Le[2],Le[3]]}function L(Le,Ce,Te,Ye,ct=oe()){return ct[0]=Le,ct[1]=Ce,ct[2]=Te,ct[3]=Ye,ct}function B(Le,Ce=oe()){return Ce[0]=Le.xmin,Ce[1]=Le.ymin,Ce[2]=Le.xmax,Ce[3]=Le.ymax,Ce}function X(Le,Ce){return new ie.Z({xmin:Le[0],ymin:Le[1],xmax:Le[2],ymax:Le[3],spatialReference:Ce})}function Z(Le,Ce){Ce[0]<Le[0]&&(Le[0]=Ce[0]),Ce[0]>Le[2]&&(Le[2]=Ce[0]),Ce[1]<Le[1]&&(Le[1]=Ce[1]),Ce[1]>Le[3]&&(Le[3]=Ce[1])}function V(Le){return(0,ne.Wi)(Le)||Le[0]>=Le[2]?0:Le[2]-Le[0]}function P(Le){return Le[1]>=Le[3]?0:Le[3]-Le[1]}function F(Le){return V(Le)*P(Le)}function ye(Le,Ce,Te){return Ce[0]>=Le[0]-Te&&Ce[1]>=Le[1]-Te&&Ce[0]<=Le[2]+Te&&Ce[1]<=Le[3]+Te}function le(Le,Ce){return Math.max(Ce[0],Le[0])<=Math.min(Ce[2],Le[2])&&Math.max(Ce[1],Le[1])<=Math.min(Ce[3],Le[3])}function ge(Le,Ce){return Ce[0]>=Le[0]&&Ce[2]<=Le[2]&&Ce[1]>=Le[1]&&Ce[3]<=Le[3]}const Pe=[1/0,1/0,-1/0,-1/0],je=[0,0,0,0]},32442:(ut,Oe,C)=>{"use strict";function x(V){return void 0!==V.xmin&&void 0!==V.ymin&&void 0!==V.xmax&&void 0!==V.ymax}function T(V){return void 0!==V.points}function ne(V){return void 0!==V.x&&void 0!==V.y}function ie(V){return void 0!==V.paths}function te(V){return void 0!==V.rings}function oe(V){return(P,F)=>null==P?F:null==F?P:V(P,F)}C.d(Oe,{$P:()=>L,Yg:()=>B,lC:()=>z,C6:()=>X});const Y=oe(Math.min),j=oe(Math.max);function L(V,P){return ie(P)?X(V,P.paths,!1,!1):te(P)?X(V,P.rings,!1,!1):T(P)?z(V,P.points,!1,!1,!1,!1):x(P)?Z(V,P):(ne(P)&&(V[0]=P.x,V[1]=P.y,V[2]=P.x,V[3]=P.y),V)}function B(V,P){return ie(P)?X(V,P.paths,!0,!1):te(P)?X(V,P.rings,!0,!1):T(P)?z(V,P.points,!0,!1,!0,!1):x(P)?Z(V,P,0,0,!0,!1):(ne(P)&&(V[0]=P.x,V[1]=P.y,V[2]=P.z,V[3]=P.x,V[4]=P.y,V[5]=P.z),V)}function X(V,P,F,$){const J=F?3:2;if(!P.length||!P[0].length)return null;let H,de,ee,ye,[le,ge]=P[0][0],[se,Q]=P[0][0];for(let pe=0;pe<P.length;pe++){const ue=P[pe];for(let me=0;me<ue.length;me++){const ve=ue[me],[fe,Me]=ve;if(le=Y(le,fe),ge=Y(ge,Me),se=j(se,fe),Q=j(Q,Me),F&&ve.length>2){const ce=ve[2];H=Y(H,ce),de=j(de,ce)}if($&&ve.length>J){const ce=ve[J];ee=Y(H,ce),ye=j(de,ce)}}}return F?$?(V[0]=le,V[1]=ge,V[2]=H,V[3]=ee,V[4]=se,V[5]=Q,V[6]=de,V[7]=ye,V.length=8,V):(V[0]=le,V[1]=ge,V[2]=H,V[3]=se,V[4]=Q,V[5]=de,V.length=6,V):$?(V[0]=le,V[1]=ge,V[2]=ee,V[3]=se,V[4]=Q,V[5]=ye,V.length=6,V):(V[0]=le,V[1]=ge,V[2]=se,V[3]=Q,V.length=4,V)}function Z(V,P,F,$,J,H){const de=P.xmin,ee=P.xmax,ye=P.ymin,le=P.ymax;let ge=P.zmin,se=P.zmax,Q=P.mmin,pe=P.mmax;return J?(ge=ge||0,se=se||0,H?(Q=Q||0,pe=pe||0,V[0]=de,V[1]=ye,V[2]=ge,V[3]=Q,V[4]=ee,V[5]=le,V[6]=se,V[7]=pe,V):(V[0]=de,V[1]=ye,V[2]=ge,V[3]=ee,V[4]=le,V[5]=se,V)):H?(Q=Q||0,pe=pe||0,V[0]=de,V[1]=ye,V[2]=Q,V[3]=ee,V[4]=le,V[5]=pe,V):(V[0]=de,V[1]=ye,V[2]=ee,V[3]=le,V)}function z(V,P,F,$,J,H){const de=F?3:2,ee=$&&H,ye=F&&J;if(!P.length||!P[0].length)return null;let le,ge,se,Q,[pe,ue]=P[0],[me,ve]=P[0];for(let fe=0;fe<P.length;fe++){const Me=P[fe],[ce,he]=Me;if(pe=Y(pe,ce),ue=Y(ue,he),me=j(me,ce),ve=j(ve,he),ye&&Me.length>2){const De=Me[2];le=Y(le,De),ge=j(ge,De)}if(ee&&Me.length>de){const De=Me[de];se=Y(le,De),Q=j(ge,De)}}return J?(le=le||0,ge=ge||0,H?(se=se||0,Q=Q||0,V[0]=pe,V[1]=ue,V[2]=le,V[3]=se,V[4]=me,V[5]=ve,V[6]=ge,V[7]=Q,V):(V[0]=pe,V[1]=ue,V[2]=le,V[3]=me,V[4]=ve,V[5]=ge,V)):H?(se=se||0,Q=Q||0,V[0]=pe,V[1]=ue,V[2]=se,V[3]=me,V[4]=ve,V[5]=Q,V):(V[0]=pe,V[1]=ue,V[2]=me,V[3]=ve,V)}},27105:(ut,Oe,C)=>{"use strict";C.d(Oe,{tO:()=>ne});var x=C(25748);function ne(Y){return Y?function ie(Y,j){if(!Y||!Y.length)return null;const L=[],B=[],X=j?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let Z=0,z=Y.length;Z<z;Z++){const ae=te(Y[Z],j,X);ae&&B.push(ae)}if(B.sort((Z,z)=>{let ae=Z[2]-z[2];return 0===ae&&j&&(ae=Z[4]-z[4]),ae}),B.length&&(L[0]=B[0][0],L[1]=B[0][1],j&&(L[2]=B[0][3]),(L[0]<X[0]||L[0]>X[1]||L[1]<X[2]||L[1]>X[3]||j&&(L[2]<X[4]||L[2]>X[5]))&&(L.length=0)),!L.length){const Z=Y[0]&&Y[0].length?function oe(Y,j){const L=j?[0,0,0]:[0,0],B=j?[0,0,0]:[0,0];let X=0,Z=0,z=0,ae=0;for(let K=0,V=Y.length;K<V-1;K++){const P=Y[K],F=Y[K+1];if(P&&F){L[0]=P[0],L[1]=P[1],B[0]=F[0],B[1]=F[1],j&&P.length>2&&F.length>2&&(L[2]=P[2],B[2]=F[2]);const $=(0,x.xA)(L,B);if($){X+=$;const J=(0,x.Gi)(P,F);Z+=$*J[0],z+=$*J[1],j&&J.length>2&&(ae+=$*J[2])}}}return X>0?j?[Z/X,z/X,ae/X]:[Z/X,z/X]:Y.length?Y[0]:null}(Y[0],j):null;if(!Z)return null;L[0]=Z[0],L[1]=Z[1],j&&Z.length>2&&(L[2]=Z[2])}return L}(Y.rings,Y.hasZ):null}function te(Y,j,L){let B=0,X=0,Z=0,z=0,ae=0;const K=Y.length?Y[0][0]:0,V=Y.length?Y[0][1]:0,P=Y.length&&j?Y[0][2]:0;for(let $=0;$<Y.length;$++){const J=Y[$],H=Y[($+1)%Y.length],[de,ee,ye]=J,le=de-K,ge=ee-V,se=j?ye-P:void 0,[Q,pe,ue]=H,me=Q-K,ve=pe-V,fe=j?ue-P:void 0,Me=le*ve-me*ge;if(z+=Me,B+=(le+me)*Me,X+=(ge+ve)*Me,j&&J.length>2&&H.length>2){const ce=le*fe-me*se;Z+=(se+fe)*ce,ae+=ce}de<L[0]&&(L[0]=de),de>L[1]&&(L[1]=de),ee<L[2]&&(L[2]=ee),ee>L[3]&&(L[3]=ee),j&&(ye<L[4]&&(L[4]=ye),ye>L[5]&&(L[5]=ye))}if(z>0&&(z*=-1),ae>0&&(ae*=-1),!z)return null;z*=.5,ae*=.5;const F=[B/(6*z)+K,X/(6*z)+V,z];return j&&(L[4]===L[5]||0===ae?(F[3]=(L[4]+L[5])/2,F[4]=0):(F[3]=Z/(6*ae)+P,F[4]=ae)),F}},33190:(ut,Oe,C)=>{"use strict";C.d(Oe,{OQ:()=>oe,Qg:()=>Y,uP:()=>te,lQ:()=>ie,aV:()=>ne,rM:()=>B,CI:()=>L});var x=C(62208);const T=[0,0];function ne(ae,K){return!!(0,x.pC)(K)&&j(ae,K.x,K.y,K.z)}function ie(ae,K){if(!K.points||K.points.length)return!1;for(const V of K.points)if(!oe(ae,V))return!1;return!0}function te(ae,K){const{xmin:V,ymin:P,zmin:F,xmax:$,ymax:J,zmax:H}=K;return ae.hasZ&&K.hasZ?j(ae,V,P,F)&&j(ae,V,J,F)&&j(ae,$,J,F)&&j(ae,$,P,F)&&j(ae,V,P,H)&&j(ae,V,J,H)&&j(ae,$,J,H)&&j(ae,$,P,H):j(ae,V,P)&&j(ae,V,J)&&j(ae,$,J)&&j(ae,$,P)}function oe(ae,K){return j(ae,K[0],K[1])}function Y(ae,K){return j(ae,K[0],K[1],K[2])}function j(ae,K,V,P){return K>=ae.xmin&&K<=ae.xmax&&V>=ae.ymin&&V<=ae.ymax&&(null==P||!ae.hasZ||P>=ae.zmin&&P<=ae.zmax)}function L(ae,K){return T[1]=K.y,T[0]=K.x,B(ae,T)}function B(ae,K){return function X(ae,K){if(!ae)return!1;if(function Z(ae){return!Array.isArray(ae[0][0])}(ae))return z(!1,ae,K);let V=!1;for(let P=0,F=ae.length;P<F;P++)V=z(V,ae[P],K);return V}(ae.rings,K)}function z(ae,K,V){const[P,F]=V;let $=ae,J=0;for(let H=0,de=K.length;H<de;H++){J++,J===de&&(J=0);const[ee,ye]=K[H],[le,ge]=K[J];(ye<F&&ge>=F||ge<F&&ye>=F)&&ee+(F-ye)/(ge-ye)*(le-ee)<P&&($=!$)}return $}},25748:(ut,Oe,C)=>{"use strict";function ne(V,P){const F=P[0]-V[0],$=P[1]-V[1];if(V.length>2&&P.length>2){const J=V[2]-P[2];return Math.sqrt(F*F+$*$+J*J)}return Math.sqrt(F*F+$*$)}function te(V,P,F,$){const[J,H]=P,[de,ee]=F[$],[ye,le]=F[$+1],ge=ye-de,se=le-ee,ue=Math.min(1,Math.max(0,((J-de)*ge+(H-ee)*se)/(ge*ge+se*se)));return V[0]=de+ge*ue,V[1]=ee+se*ue,V}function oe(V,P){return function ie(V,P,F){const $=V[0]+F*(P[0]-V[0]),J=V[1]+F*(P[1]-V[1]);return V.length>2&&P.length>2?[$,J,V[2]+F*(P[2]-V[2])]:[$,J]}(V,P,.5)}function L(V,P,F){const $=V.length;let J=0,H=0,de=0;for(let ee=0;ee<$;ee++){const ye=V[ee],le=V[(ee+1)%$];let ge=2;J+=ye[0]*le[1]-le[0]*ye[1],ye.length>2&&le.length>2&&F&&(H+=ye[0]*le[2]-le[0]*ye[2],ge=3),ye.length>ge&&le.length>ge&&P&&(de+=ye[0]*le[ge]-le[0]*ye[ge])}return J<=0&&H<=0&&de<=0}function B(V){if("rings"in V){for(const P of V.rings)P.length<3||P[0][0]===P[P.length-1][0]&&P[0][1]===P[P.length-1][1]||P.push([P[0][0],P[0][1]]);if(V.rings.length>0&&!L(V.rings[0],V.hasM,V.hasZ))for(let P=0;P<V.rings.length;++P)V.rings[P]=V.rings[P].reverse()}}C.d(Oe,{pW:()=>B,xA:()=>ne,Gi:()=>oe,bu:()=>L,Tx:()=>te}),C(37053)},15176:(ut,Oe,C)=>{"use strict";C.d(Oe,{aO:()=>z,_w:()=>V,Wn:()=>P});var x=C(32442);const Y=[];function j(F,$,J,H){return{xmin:F,ymin:$,xmax:J,ymax:H}}function L(F,$,J,H,de,ee){return{xmin:F,ymin:$,zmin:J,xmax:H,ymax:de,zmax:ee}}function B(F,$,J,H,de,ee){return{xmin:F,ymin:$,mmin:J,xmax:H,ymax:de,mmax:ee}}function X(F,$,J,H,de,ee,ye,le){return{xmin:F,ymin:$,zmin:J,mmin:H,xmax:de,ymax:ee,zmax:ye,mmax:le}}function Z(F,$=!1,J=!1){return $?J?X(F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7]):L(F[0],F[1],F[2],F[3],F[4],F[5]):J?B(F[0],F[1],F[2],F[3],F[4],F[5]):j(F[0],F[1],F[2],F[3])}function z(F){return F?function T(F){return void 0!==F.xmin&&void 0!==F.ymin&&void 0!==F.xmax&&void 0!==F.ymax}(F)?F:function ie(F){return void 0!==F.x&&void 0!==F.y}(F)?function K(F){const{x:$,y:J,z:H,m:de}=F,ee=null!=de;return null!=H?ee?X($,J,H,de,$,J,H,de):L($,J,H,$,J,H):ee?B($,J,de,$,J,de):j($,J,$,J)}(F):function oe(F){return void 0!==F.rings}(F)?V(F):function te(F){return void 0!==F.paths}(F)?P(F):function ne(F){return void 0!==F.points}(F)?function ae(F){const{hasZ:$,hasM:J,points:H}=F;return Z((0,x.lC)(Y,H,$,J),$,J)}(F):null:null}function V(F){const{hasZ:$,hasM:J,rings:H}=F,de=(0,x.C6)(Y,H,$,J);return de?Z(de,$,J):null}function P(F){const{hasZ:$,hasM:J,paths:H}=F,de=(0,x.C6)(Y,H,$,J);return de?Z(de,$,J):null}},11519:(ut,Oe,C)=>{"use strict";C.d(Oe,{h_:()=>ne,jQ:()=>Z,IY:()=>P,Ff:()=>ae,UT:()=>V});var x=C(33190);function T(F,$){return(0,x.aV)(F,$)}function ne(F,$){let H,de,ee;if(F.xmin<=$.xmin){if(H=$.xmin,F.xmax<H)return!1}else if(H=F.xmin,$.xmax<H)return!1;if(F.ymin<=$.ymin){if(de=$.ymin,F.ymax<de)return!1}else if(de=F.ymin,$.ymax<de)return!1;if(F.hasZ&&$.hasZ&&$.hasZ)if(F.zmin<=$.zmin){if(ee=$.zmin,F.zmax<ee)return!1}else if(ee=F.zmin,$.zmax<ee)return!1;return!0}function ie(F,$){const{points:J,hasZ:H}=$,de=H?x.Qg:x.OQ;for(const ee of J)if(de(F,ee))return!0;return!1}const te=[0,0],oe=[0,0],Y=[0,0],j=[0,0],L=[te,oe,Y,j],B=[[Y,te],[te,oe],[oe,j],[j,Y]];function X(F,$){te[0]=F.xmin,te[1]=F.ymax,oe[0]=F.xmax,oe[1]=F.ymax,Y[0]=F.xmin,Y[1]=F.ymin,j[0]=F.xmax,j[1]=F.ymin;for(const J of L)if((0,x.rM)($,J))return!0;for(const J of $.rings){if(!J.length)continue;let H=J[0];if((0,x.OQ)(F,H))return!0;for(let de=1;de<J.length;de++){const ee=J[de];if((0,x.OQ)(F,ee)||K(H,ee,B))return!0;H=ee}}return!1}function Z(F,$){te[0]=F.xmin,te[1]=F.ymax,oe[0]=F.xmax,oe[1]=F.ymax,Y[0]=F.xmin,Y[1]=F.ymin,j[0]=F.xmax,j[1]=F.ymin;const J=$.paths;for(const H of J){if(!J.length)continue;let de=H[0];if((0,x.OQ)(F,de))return!0;for(let ee=1;ee<H.length;ee++){const ye=H[ee];if((0,x.OQ)(F,ye)||K(de,ye,B))return!0;de=ye}}return!1}const z=[0,0];function ae(F){for(let $=0;$<F.length;$++){const J=F[$];for(let de=0;de<J.length-1;de++){const ee=J[de],ye=J[de+1];for(let le=$+1;le<F.length;le++)for(let ge=0;ge<F[le].length-1;ge++){const se=F[le][ge],Q=F[le][ge+1];if(V(ee,ye,se,Q,z)&&!(z[0]===ee[0]&&z[1]===ee[1]||z[0]===se[0]&&z[1]===se[1]||z[0]===ye[0]&&z[1]===ye[1]||z[0]===Q[0]&&z[1]===Q[1]))return!0}}const H=J.length;if(!(H<=4))for(let de=0;de<H-3;de++){let ee=H-1;0===de&&(ee=H-2);const ye=J[de],le=J[de+1];for(let ge=de+2;ge<ee;ge++){const se=J[ge],Q=J[ge+1];if(V(ye,le,se,Q,z)&&!(z[0]===ye[0]&&z[1]===ye[1]||z[0]===se[0]&&z[1]===se[1]||z[0]===le[0]&&z[1]===le[1]||z[0]===Q[0]&&z[1]===Q[1]))return!0}}}return!1}function K(F,$,J){for(let H=0;H<J.length;H++)if(V(F,$,J[H][0],J[H][1]))return!0;return!1}function V(F,$,J,H,de){const[ee,ye]=F,[le,ge]=$,[se,Q]=J,[pe,ue]=H,me=pe-se,ve=ee-se,fe=le-ee,Me=ue-Q,ce=ye-Q,he=ge-ye,De=Me*fe-me*he;if(0===De)return!1;const xe=(me*ce-Me*ve)/De,Pe=(fe*ce-he*ve)/De;return xe>=0&&xe<=1&&Pe>=0&&Pe<=1&&(de&&(de[0]=ee+xe*(le-ee),de[1]=ye+xe*(ge-ye)),!0)}function P(F){switch(F){case"esriGeometryEnvelope":case"extent":return ne;case"esriGeometryMultipoint":case"multipoint":return ie;case"esriGeometryPoint":case"point":return T;case"esriGeometryPolygon":case"polygon":return X;case"esriGeometryPolyline":case"polyline":return Z}}},91179:(ut,Oe,C)=>{"use strict";C.d(Oe,{im:()=>K,q9:()=>F,Ji:()=>V,YX:()=>L,aW:()=>B,wp:()=>X,oU:()=>z,l9:()=>Z});var x=C(62208),T=C(2004),ne=C(21674),ie=C(72854),te=C(49672),oe=C(37118),Y=C(55214);function L($){return void 0!==$.xmin&&void 0!==$.ymin&&void 0!==$.xmax&&void 0!==$.ymax}function B($){return void 0!==$.points}function X($){return void 0!==$.x&&void 0!==$.y}function Z($){return void 0!==$.paths}function z($){return void 0!==$.rings}function K($){return(0,x.Wi)($)?null:$ instanceof ne.Z?$:X($)?te.Z.fromJSON($):Z($)?Y.Z.fromJSON($):z($)?oe.Z.fromJSON($):B($)?ie.Z.fromJSON($):L($)?T.Z.fromJSON($):null}function V($){return $?X($)?"esriGeometryPoint":Z($)?"esriGeometryPolyline":z($)?"esriGeometryPolygon":L($)?"esriGeometryEnvelope":B($)?"esriGeometryMultipoint":null:null}const P={esriGeometryPoint:te.Z,esriGeometryPolyline:Y.Z,esriGeometryPolygon:oe.Z,esriGeometryEnvelope:T.Z,esriGeometryMultipoint:ie.Z};function F($){return $&&P[$]||null}},62825:(ut,Oe,C)=>{"use strict";C.d(Oe,{aX:()=>ue,or:()=>fe});var x=C(15861),T=C(59318),ne=C(26584),ie=C(63290),te=C(62208),oe=C(37118),Y=C(55214),j=C(74618),L=C(37053),B=C(46367),Z=(C(29132),C(84792)),z=C(21726),ae=C(91179);function K(Me,ce,he,De){return V.apply(this,arguments)}function V(){return(V=(0,x.Z)(function*(Me,ce,he,De){const xe="string"==typeof Me?(0,z.mN)(Me):Me,Pe=ce[0].spatialReference,je=nn(Ot({},De),{query:nn(Ot({},xe.query),{f:"json",sr:JSON.stringify(Pe),target:JSON.stringify({geometryType:(0,ae.Ji)(ce[0]),geometries:ce}),cutter:JSON.stringify(he)})}),rt=yield(0,Z.default)(xe.path+"/cut",je),{cutIndexes:Le,geometries:Ce=[]}=rt.data;return{cutIndexes:Le,geometries:Ce.map(Te=>{const Ye=(0,ae.im)(Te);return Ye.spatialReference=Pe,Ye})}})).apply(this,arguments)}function P(Me,ce,he){return F.apply(this,arguments)}function F(){return(F=(0,x.Z)(function*(Me,ce,he){const De="string"==typeof Me?(0,z.mN)(Me):Me,xe=ce[0].spatialReference,Pe=(0,ae.Ji)(ce[0]),je=nn(Ot({},he),{query:nn(Ot({},De.query),{f:"json",sr:xe.wkid?xe.wkid:JSON.stringify(xe),geometries:JSON.stringify($(ce))})});return J((yield(0,Z.default)(De.path+"/simplify",je)).data,Pe,xe)})).apply(this,arguments)}function $(Me){return{geometryType:(0,ae.Ji)(Me[0]),geometries:Me.map(ce=>ce.toJSON())}}function J(Me,ce,he){const De=(0,ae.q9)(ce);return Me.map(xe=>{const Pe=De.fromJSON(xe);return Pe.spatialReference=he,Pe})}const H=ie.Z.getLogger("esri.geometry.support.normalizeUtils");function ee(Me){return"polygon"===Me[0].type}function ye(Me){return"polyline"===Me[0].type}function se(Me,ce,he){if(ce){const De=function ge(Me,ce){if(!(Me instanceof Y.Z||Me instanceof oe.Z)){const xe="straightLineDensify: the input geometry is neither polyline nor polygon";throw H.error(xe),new ne.Z(xe)}const he=(0,j.x3)(Me),De=[];for(const xe of he){const Pe=[];De.push(Pe),Pe.push([xe[0][0],xe[0][1]]);for(let je=0;je<xe.length-1;je++){const rt=xe[je][0],Le=xe[je][1],Ce=xe[je+1][0],Te=xe[je+1][1],Ye=Math.sqrt((Ce-rt)*(Ce-rt)+(Te-Le)*(Te-Le)),ct=(Te-Le)/Ye,Ae=(Ce-rt)/Ye,Qe=Ye/ce;if(Qe>1){for(let $e=1;$e<=Qe-1;$e++){const tt=$e*ce;Pe.push([Ae*tt+rt,ct*tt+Le])}const Je=(Ye+Math.floor(Qe-1)*ce)/2;Pe.push([Ae*Je+rt,ct*Je+Le])}Pe.push([Ce,Te])}}return function de(Me){return"polygon"===Me.type}(Me)?new oe.Z({rings:De,spatialReference:Me.spatialReference}):new Y.Z({paths:De,spatialReference:Me.spatialReference})}(Me,1e6);Me=(0,B.Sx)(De,!0)}return he&&(Me=(0,j.Sy)(Me,he)),Me}function Q(Me,ce,he){if(Array.isArray(Me)){const De=Me[0];if(De>ce){const xe=(0,j.XZ)(De,ce);Me[0]=De+xe*(-2*ce)}else if(De<he){const xe=(0,j.XZ)(De,he);Me[0]=De+xe*(-2*he)}}else{const De=Me.x;if(De>ce){const xe=(0,j.XZ)(De,ce);Me=Me.clone().offset(xe*(-2*ce),0)}else if(De<he){const xe=(0,j.XZ)(De,he);Me=Me.clone().offset(xe*(-2*he),0)}}return Me}function pe(Me,ce){let he=-1;for(let De=0;De<ce.cutIndexes.length;De++){const xe=ce.cutIndexes[De],Pe=ce.geometries[De],je=(0,j.x3)(Pe);for(let rt=0;rt<je.length;rt++){const Le=je[rt];Le.some(Ce=>{if(Ce[0]<180)return!0;{let Te=0;for(let ct=0;ct<Le.length;ct++){const Ae=Le[ct][0];Te=Ae>Te?Ae:Te}Te=Number(Te.toFixed(9));const Ye=-360*(0,j.XZ)(Te,180);for(let ct=0;ct<Le.length;ct++){const Ae=Pe.getPoint(rt,ct);Pe.setPoint(rt,ct,Ae.clone().offset(Ye,0))}return!0}})}if(xe===he){if(ee(Me))for(const rt of(0,j.x3)(Pe))Me[xe]=Me[xe].addRing(rt);else if(ye(Me))for(const rt of(0,j.x3)(Pe))Me[xe]=Me[xe].addPath(rt)}else he=xe,Me[xe]=Pe}return Me}function ue(Me,ce,he){return me.apply(this,arguments)}function me(){return(me=(0,x.Z)(function*(Me,ce,he){var De;if(!Array.isArray(Me))return ue([Me],ce);const xe=null!=(De=null==ce?void 0:ce.url)?De:T.Z.geometryServiceUrl;let Pe,je,rt,Le,Ce,Te,Ye,ct,Ae=0;const Qe=[],Je=[];for(const mt of Me)if((0,te.Wi)(mt))Je.push(mt);else if(Pe||(Pe=mt.spatialReference,je=(0,L.C5)(Pe),rt=Pe.isWebMercator,Te=rt?102100:4326,Le=j.UZ[Te].maxX,Ce=j.UZ[Te].minX,Ye=j.UZ[Te].plus180Line,ct=j.UZ[Te].minus180Line),je)if("mesh"===mt.type)Je.push(mt);else if("point"===mt.type)Je.push(Q(mt.clone(),Le,Ce));else if("multipoint"===mt.type){const bt=mt.clone();bt.points=bt.points.map(yt=>Q(yt,Le,Ce)),Je.push(bt)}else if("extent"===mt.type){const bt=mt.clone()._normalize(!1,!1,je);Je.push(bt.rings?new oe.Z(bt):bt)}else if(mt.extent){const bt=mt.extent,yt=(0,j.XZ)(bt.xmin,Ce)*(2*Le);let at=0===yt?mt.clone():(0,j.Sy)(mt.clone(),yt);bt.offset(yt,0),bt.intersects(Ye)&&bt.xmax!==Le?(Ae=bt.xmax>Ae?bt.xmax:Ae,at=se(at,rt),Qe.push(at),Je.push("cut")):bt.intersects(ct)&&bt.xmin!==Ce?(Ae=bt.xmax*(2*Le)>Ae?bt.xmax*(2*Le):Ae,at=se(at,rt,360),Qe.push(at),Je.push("cut")):Je.push(at)}else Je.push(mt.clone());else Je.push(mt);let re=(0,j.XZ)(Ae,Le),Ee=-90;const $e=re,tt=new Y.Z;for(;re>0;){const mt=360*re-180;tt.addPath([[mt,Ee],[mt,-1*Ee]]),Ee*=-1,re--}if(Qe.length>0&&$e>0){const mt=pe(Qe,yield K(xe,Qe,tt,he)),bt=[],yt=[];for(let Pt=0;Pt<Je.length;Pt++){const Vt=Je[Pt];if("cut"!==Vt)yt.push(Vt);else{const Zt=mt.shift(),rr=Me[Pt];(0,te.pC)(rr)&&"polygon"===rr.type&&rr.rings&&rr.rings.length>1&&Zt.rings.length>=rr.rings.length?(bt.push(Zt),yt.push("simplify")):yt.push(rt?(0,B.$)(Zt):Zt)}}if(!bt.length)return yt;const at=yield P(xe,bt,he),Mt=[];for(let Pt=0;Pt<yt.length;Pt++){const Vt=yt[Pt];Mt.push("simplify"!==Vt?Vt:rt?(0,B.$)(at.shift()):at.shift())}return Mt}const pt=[];for(let mt=0;mt<Je.length;mt++){const bt=Je[mt];if("cut"!==bt)pt.push(bt);else{const yt=Qe.shift();pt.push(!0===rt?(0,B.$)(yt):yt)}}return Promise.resolve(pt)})).apply(this,arguments)}function fe(Me,ce){const he=(0,L.C5)(ce);if(he){const[De,xe]=he.valid,Pe=xe-De;if(Me<De)for(;Me<De;)Me+=Pe;if(Me>xe)for(;Me>xe;)Me-=Pe}return Me}},74618:(ut,Oe,C)=>{"use strict";C.d(Oe,{UZ:()=>ie,x3:()=>Y,uS:()=>j,XZ:()=>te,Sy:()=>oe});var x=C(55214),T=C(65234),ne=C(91179);const ie={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new x.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:T.Z.WebMercator}),minus180Line:new x.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:T.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new x.Z({paths:[[[180,-180],[180,180]]],spatialReference:T.Z.WGS84}),minus180Line:new x.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:T.Z.WGS84})}};function te(L,B){return Math.ceil((L-B)/(2*B))}function oe(L,B){const X=Y(L);for(const Z of X)for(const z of Z)z[0]+=B;return L}function Y(L){return(0,ne.oU)(L)?L.rings:L.paths}function j(L){const B=(null==L?void 0:L.isWebMercator)?102100:4326;return[ie[B].minX,ie[B].maxX]}},83137:(ut,Oe,C)=>{"use strict";C.d(Oe,{yZ:()=>ne});var x=C(16730);function ne(Y,j){const L=j||Y.extent,B=Y.width,X=(0,x.c9)(L&&L.spatialReference);return L&&B?L.width/B*X*x.hd*96:0}},37053:(ut,Oe,C)=>{"use strict";C.d(Oe,{WR:()=>ge,Zn:()=>ye,R_:()=>le,fS:()=>B,C5:()=>X,yW:()=>K,N$:()=>z,sT:()=>Z,BZ:()=>$,V2:()=>H,QM:()=>P,JY:()=>ee,oR:()=>ae,o$:()=>F,ME:()=>J,sS:()=>V,MP:()=>de});var x=C(62208),T=C(77275),ne=C(84029);const ie={102113:!0,102100:!0,3857:!0,3785:!0},te={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},oe='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',Y=[-20037508.342788905,20037508.342788905],j=[-20037508.342787,20037508.342787],L={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Y,origin:j,dx:1e-5},102100:{wkTemplate:oe,valid:Y,origin:j,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Y,origin:j,dx:1e-5},3857:{wkTemplate:oe,valid:Y,origin:j,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function B(se,Q){return!(0,x.Wi)(se)&&!(0,x.Wi)(Q)&&(se===Q||(null!=se.wkid||null!=Q.wkid?se.wkid===Q.wkid||V(se)&&V(Q)||null!=Q.latestWkid&&se.wkid===Q.latestWkid||null!=se.latestWkid&&Q.wkid===se.latestWkid:!(!se.wkt||!Q.wkt)&&se.wkt.toUpperCase()===Q.wkt.toUpperCase()))}function X(se){return ee(se)&&se.wkid?L[se.wkid]:null}function Z(se){return!!ee(se)&&(se.wkid?null==ne.Z[se.wkid]:!!se.wkt&&!!/^\s*GEOGCS/i.test(se.wkt))}function z(se){return!($(se)||H(se))}function ae(se){return ee(se)&&4326===se.wkid}function K(se){return ee(se)&&4490===se.wkid}function V(se){return ee(se)&&null!=se.wkid&&!0===ie[se.wkid]}function P(se){return ee(se)&&32662===se.wkid}function F(se){return 104971===se||104905===se}function $(se){return ee(se)&&null!=se.wkid&&F(se.wkid)}function J(se){return 104903===se}function H(se){return ee(se)&&null!=se.wkid&&J(se.wkid)}function de(se){return ee(se)&&null!=se.wkid&&!0===te[se.wkid]}function ee(se){return(0,x.pC)(se)&&(null!=se.wkid&&se.wkid>=2e3||null!=se.wkt)}const ye={wkid:4326,wkt:(0,T.gx)(L[4326].wkTemplate,{Central_Meridian:"0.0"})},le={wkid:102100,latestWkid:3857},ge={wkid:32662}},71774:(ut,Oe,C)=>{"use strict";C.d(Oe,{Mk:()=>ne,P$:()=>ie});var x=C(2076);const ne=(0,x.wY)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),ie=(0,x.wY)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},46367:(ut,Oe,C)=>{"use strict";C.d(Oe,{Q8:()=>K,$:()=>$,hG:()=>P,iV:()=>V,Sx:()=>J,R6:()=>F,mZ:()=>X});var x=C(58817),T=C(62208),ne=C(65234),ie=C(94425),te=C(37053);function j(H){return 57.29577951308232*H}function L(H){return.017453292519943*H}function X(H){return Math.PI/2-2*Math.atan(Math.exp(-H/ie.sv.radius))}function Z(H){return null!=H.wkid||null!=H.wkt}const z=[0,0];function ae(H,de,ee,ye,le){const ge=H,se=le;if(se.spatialReference=ee,"x"in ge&&"x"in se)[se.x,se.y]=de(ge.x,ge.y,z,ye);else if("xmin"in ge&&"xmin"in se)[se.xmin,se.ymin]=de(ge.xmin,ge.ymin,z,ye),[se.xmax,se.ymax]=de(ge.xmax,ge.ymax,z,ye);else if("paths"in ge&&"paths"in se||"rings"in ge&&"rings"in se){const Q="paths"in ge?ge.paths:ge.rings,pe=[];let ue;for(let me=0;me<Q.length;me++){const ve=Q[me];ue=[],pe.push(ue);for(let fe=0;fe<ve.length;fe++)ue.push(de(ve[fe][0],ve[fe][1],[0,0],ye)),ve[fe].length>2&&ue[fe].push(ve[fe][2]),ve[fe].length>3&&ue[fe].push(ve[fe][3])}"paths"in se?se.paths=pe:se.rings=pe}else if("points"in ge&&"points"in se){const Q=ge.points,pe=[];for(let ue=0;ue<Q.length;ue++)pe[ue]=de(Q[ue][0],Q[ue][1],[0,0],ye),Q[ue].length>2&&pe[ue].push(Q[ue][2]),Q[ue].length>3&&pe[ue].push(Q[ue][3]);se.points=pe}return le}function K(H,de){const ee=H&&(Z(H)?H:H.spatialReference),ye=de&&(Z(de)?de:de.spatialReference);return!(H&&"type"in H&&"mesh"===H.type||de&&"type"in de&&"mesh"===de.type||!ee||!ye)&&(!!(0,te.fS)(ye,ee)||(0,te.sS)(ye)&&(0,te.oR)(ee)||(0,te.sS)(ee)&&(0,te.oR)(ye))}function V(H,de){if((0,T.Wi)(H))return null;const ee=H.spatialReference,ye=de&&(Z(de)?de:de.spatialReference);return K(ee,ye)?(0,te.fS)(ee,ye)?(0,x.d9)(H):(0,te.sS)(ye)?ae(H,P,ne.Z.WebMercator,!1,(0,x.d9)(H)):(0,te.oR)(ye)?ae(H,F,ne.Z.WGS84,!1,(0,x.d9)(H)):null:null}function P(H,de,ee=[0,0]){de>89.99999?de=89.99999:de<-89.99999&&(de=-89.99999);const ye=L(de);return ee[0]=L(H)*ie.sv.radius,ee[1]=ie.sv.halfSemiMajorAxis*Math.log((1+Math.sin(ye))/(1-Math.sin(ye))),ee}function F(H,de,ee=[0,0],ye=!1){const le=j(H/ie.sv.radius);return ee[0]=ye?le:le-360*Math.floor((le+180)/360),ee[1]=j(Math.PI/2-2*Math.atan(Math.exp(-de/ie.sv.radius))),ee}function $(H,de=!1,ee=(0,x.d9)(H)){return ae(H,P,ne.Z.WebMercator,de,ee)}function J(H,de=!1,ee=(0,x.d9)(H)){return ae(H,F,ne.Z.WGS84,de,ee)}},18945:(ut,Oe,C)=>{"use strict";function x(T,ne,ie=!1){let{hasM:te,hasZ:oe}=T;Array.isArray(ne)?4!==ne.length||te||oe?3===ne.length&&ie&&!te?(oe=!0,te=!1):3===ne.length&&te&&oe&&(te=!1,oe=!1):(te=!0,oe=!0):(oe=!oe&&ne.hasZ&&(!te||ne.hasM),te=!te&&ne.hasM&&(!oe||ne.hasZ)),T.hasZ=oe,T.hasM=te}C.d(Oe,{l:()=>x})},33696:(ut,Oe,C)=>{"use strict";C.d(Oe,{k:()=>ie});var x=C(62208),T=C(16730),ne=C(37053);function ie(B,X,Z){if((0,x.Wi)(X)||(0,x.Wi)(Z)||Z.vcsWkid||(0,ne.fS)(X,Z))return null;const z=(0,T._R)(X)/(0,T._R)(Z);if(1===z)return null;switch(B){case"point":case"esriGeometryPoint":return ae=>function te(B,X){B&&null!=B.z&&(B.z*=X)}(ae,z);case"polyline":case"esriGeometryPolyline":return ae=>function Y(B,X){if(B)for(const Z of B.paths)for(const z of Z)z.length>2&&(z[2]*=X)}(ae,z);case"polygon":case"esriGeometryPolygon":return ae=>function oe(B,X){if(B)for(const Z of B.rings)for(const z of Z)z.length>2&&(z[2]*=X)}(ae,z);case"multipoint":case"esriGeometryMultipoint":return ae=>function j(B,X){if(B)for(const Z of B.points)Z.length>2&&(Z[2]*=X)}(ae,z);case"extent":case"esriGeometryExtent":return ae=>function L(B,X){B&&null!=B.zmin&&null!=B.zmax&&(B.zmin*=X,B.zmax*=X)}(ae,z);default:return null}}},52515:(ut,Oe,C)=>{"use strict";C(88411),C(15348),C(97059),C(56683);var te=C(41840),oe=C(15861),Y=C(84792),j=C(26584),L=C(62208);function X(){return(X=(0,oe.Z)(function*(F,$,J,H){const de=$.exec(J);if(!de)throw new j.Z("esri-intl:invalid-bundle",`Bundle id "${J}" is not compatible with the pattern "${$}"`);const ee=de[1]?`${de[1]}/`:"",ye=de[2],le=(0,te.Su)(H),ge=`${ee}${ye}.json`,se=le?`${ee}${ye}_${le}.json`:ge;let Q;try{Q=yield Z(F(se))}catch(pe){if(se===ge)throw new j.Z("intl:unknown-bundle",`Bundle "${J}" cannot be loaded`,{error:pe});try{Q=yield Z(F(ge))}catch(ue){throw new j.Z("intl:unknown-bundle",`Bundle "${J}" cannot be loaded`,{error:ue})}}return Q})).apply(this,arguments)}function Z(F){return z.apply(this,arguments)}function z(){return(z=(0,oe.Z)(function*(F){if((0,L.pC)(V.fetchBundleAsset))return V.fetchBundleAsset(F);const $=yield(0,Y.default)(F,{responseType:"text"});return JSON.parse($.data)})).apply(this,arguments)}class ae{constructor({base:$="",pattern:J,location:H=new URL(window.location.href)}){let de;de="string"==typeof H?ee=>new URL(ee,new URL(H,window.location.href)).href:H instanceof URL?ee=>new URL(ee,H).href:H,this.pattern="string"==typeof J?new RegExp(`^${J}`):J,this.getAssetUrl=de,$=$?$.endsWith("/")?$:$+"/":"",this.matcher=new RegExp(`^${$}(?:(.*)/)?(.*)$`)}fetchMessageBundle($,J){return function B(F,$,J,H){return X.apply(this,arguments)}(this.getAssetUrl,this.matcher,$,J)}}const V={};var P=C(54346);(0,te.tz)(function K(F){return new ae(F)}({pattern:"esri/",location:P.V}))},88411:(ut,Oe,C)=>{"use strict";C.d(Oe,{Ze:()=>F,p6:()=>$});var x=C(2076),T=C(56683);const ne={year:"numeric",month:"numeric",day:"numeric"},ie={year:"numeric",month:"long",day:"numeric"},te={year:"numeric",month:"short",day:"numeric"},oe={year:"numeric",month:"long",weekday:"long",day:"numeric"},Y={hour:"numeric",minute:"numeric"},j=nn(Ot({},Y),{second:"numeric"}),L={"short-date":ne,"short-date-short-time":Ot(Ot({},ne),Y),"short-date-short-time-24":nn(Ot(Ot({},ne),Y),{hour12:!1}),"short-date-long-time":Ot(Ot({},ne),j),"short-date-long-time-24":nn(Ot(Ot({},ne),j),{hour12:!1}),"short-date-le":ne,"short-date-le-short-time":Ot(Ot({},ne),Y),"short-date-le-short-time-24":nn(Ot(Ot({},ne),Y),{hour12:!1}),"short-date-le-long-time":Ot(Ot({},ne),j),"short-date-le-long-time-24":nn(Ot(Ot({},ne),j),{hour12:!1}),"long-month-day-year":ie,"long-month-day-year-short-time":Ot(Ot({},ie),Y),"long-month-day-year-short-time-24":nn(Ot(Ot({},ie),Y),{hour12:!1}),"long-month-day-year-long-time":Ot(Ot({},ie),j),"long-month-day-year-long-time-24":nn(Ot(Ot({},ie),j),{hour12:!1}),"day-short-month-year":te,"day-short-month-year-short-time":Ot(Ot({},te),Y),"day-short-month-year-short-time-24":nn(Ot(Ot({},te),Y),{hour12:!1}),"day-short-month-year-long-time":Ot(Ot({},te),j),"day-short-month-year-long-time-24":nn(Ot(Ot({},te),j),{hour12:!1}),"long-date":oe,"long-date-short-time":Ot(Ot({},oe),Y),"long-date-short-time-24":nn(Ot(Ot({},oe),Y),{hour12:!1}),"long-date-long-time":Ot(Ot({},oe),j),"long-date-long-time-24":nn(Ot(Ot({},oe),j),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Y,"long-time":j},B=(0,x.wY)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),ae=(B.toJSON.bind(B),B.fromJSON.bind(B),{ar:"ar-u-nu-latn-ca-gregory"});let K=new WeakMap,V=L["short-date-short-time"];function F(J){return L[J]||null}function $(J,H){return function P(J){const H=J||V;if(!K.has(H)){const de=(0,T.Kd)(),ee=ae[(0,T.Kd)()]||de;K.set(H,new Intl.DateTimeFormat(ee,H))}return K.get(H)}(H).format(J)}(0,T.Ze)(()=>{K=new WeakMap,V=L["short-date-short-time"]})},56683:(ut,Oe,C)=>{"use strict";var x,T,ne;let te;C.d(Oe,{Ze:()=>V,Kd:()=>j,qe:()=>ae});const oe=null!=(x=null==(T=globalThis.esriConfig)?void 0:T.locale)?x:null==(ne=globalThis.dojoConfig)?void 0:ne.locale;function Y(){var F,$;return null!=(F=null!=oe?oe:null==($=globalThis.navigator)?void 0:$.language)?F:"en"}function j(){return void 0===te&&(te=Y()),te}const z=[];function ae(F){return z.push(F),{remove(){z.splice(z.indexOf(F),1)}}}const K=[];function V(F){return K.push(F),{remove(){z.splice(K.indexOf(F),1)}}}null==globalThis.addEventListener||globalThis.addEventListener("languagechange",function P(){const $=null!=undefined?undefined:Y();te!==$&&(te=$,[...K].forEach(J=>{J.call(null,$)}),[...z].forEach(J=>{J.call(null,$)}))})},41840:(ut,Oe,C)=>{"use strict";C.d(Oe,{ME:()=>Z,Su:()=>ae,tz:()=>X});var x=C(15861),T=C(26584),ne=C(10699),ie=C(56683);const te=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,oe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function Y(J){var H;return null!=(H=oe[J])&&H}const j=[],L=new Map;function B(J){for(const H of L.keys())P(J.pattern,H)&&L.delete(H)}function X(J){return j.includes(J)||(B(J),j.unshift(J)),{remove(){const H=j.indexOf(J);H>-1&&(j.splice(H,1),B(J))}}}function Z(J){return z.apply(this,arguments)}function z(){return(z=(0,x.Z)(function*(J){const H=(0,ie.Kd)();L.has(J)||L.set(J,K(J,H));const de=L.get(J);return yield F.add(de),de})).apply(this,arguments)}function ae(J){if(!te.test(J))return null;const[,H,de]=te.exec(J),ee=H+(de?"-"+de.toUpperCase():"");return Y(ee)?ee:Y(H)?H:null}function K(J,H){return V.apply(this,arguments)}function V(){return(V=(0,x.Z)(function*(J,H){const de=[];for(const ee of j)if(P(ee.pattern,J))try{return yield ee.fetchMessageBundle(J,H)}catch(ye){de.push(ye)}throw de.length?new T.Z("intl:message-bundle-error",`Errors occurred while loading "${J}"`,{errors:de}):new T.Z("intl:no-message-bundle-loader",`No loader found for message bundle "${J}"`)})).apply(this,arguments)}function P(J,H){return"string"==typeof J?H.startsWith(J):J.test(H)}(0,ie.Ze)(()=>{L.clear()});const F=new class{constructor(){this._numLoading=0}waitForAll(){var J=this;return(0,x.Z)(function*(){J._dfd&&(yield J._dfd.promise)})()}add(J){return this._increase(),J.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,ne.dD)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},15348:(ut,Oe,C)=>{"use strict";C.d(Oe,{sh:()=>Y,uf:()=>j});var x=C(62208),T=C(56683);const ne={ar:"ar-u-nu-latn"};let ie=new WeakMap,te={};function Y(L={}){const B={};return null!=L.digitSeparator&&(B.useGrouping=L.digitSeparator),null!=L.places&&(B.minimumFractionDigits=B.maximumFractionDigits=L.places),B}function j(L,B){return function oe(L){const B=L||te;if(!ie.has(B)){const X=(0,T.Kd)(),Z=ne[(0,T.Kd)()]||X;ie.set(B,new Intl.NumberFormat(Z,L))}return(0,x.j0)(ie.get(B))}(B).format(L)}(0,T.Ze)(()=>{ie=new WeakMap,te={}})},97059:(ut,Oe,C)=>{"use strict";C.d(Oe,{n:()=>Y});var x=C(63290),T=C(94113),ne=C(77275),ie=C(88411),te=C(15348);const oe=x.Z.getLogger("esri.intl");function Y(Z,z,ae={}){const{format:K={}}=ae;return(0,ne.gx)(Z,V=>function j(Z,z,ae){let K,V;const P=Z.indexOf(":");if(-1===P?K=Z.trim():(K=Z.slice(0,P).trim(),V=Z.slice(P+1).trim()),!K)return"";const F=(0,T.hS)(K,z);if(null==F)return"";const $=ae[V]||ae[K];return $?function L(Z,z){switch(z.type){case"date":return(0,ie.p6)(Z,z.intlOptions);case"number":return(0,te.uf)(Z,z.intlOptions);default:return oe.warn("missing format descriptor for key {key}"),X(Z)}}(F,$):V?function B(Z,z){switch(z.toLowerCase()){case"dateformat":return(0,ie.p6)(Z);case"numberformat":return(0,te.uf)(Z);default:return oe.warn(`inline format is unsupported since 4.12: ${z}`),/^(dateformat|datestring)/i.test(z)?(0,ie.p6)(Z):/^numberformat/i.test(z)?(0,te.uf)(Z):X(Z)}}(F,V):X(F)}(V,z,K))}function X(Z){switch(typeof Z){case"string":return Z;case"number":return(0,te.uf)(Z);case"boolean":return""+Z;default:return Z instanceof Date?(0,ie.p6)(Z):""}}},24263:(ut,Oe,C)=>{"use strict";C.d(Oe,{Dp:()=>j,id:()=>oe,qh:()=>Y,i8:()=>ie,Nv:()=>te});var x=C(15861),T=C(8314),ne=C(21726);const ie="4.22",te={request:(L,B)=>(0,x.Z)(function*(){var X;const{default:Z}=yield Promise.resolve().then(C.bind(C,84792)),z=L.options,ae=z.responseType;z.signal=null==B?void 0:B.signal,z.responseType="native"===ae||"native-request-init"===ae?"native-request-init":["blob","json","text"].includes(ae)&&null!=(X=(0,ne.oh)(L.url))&&X.after?ae:"array-buffer";const K=yield Z(L.url,z),V={data:K.data,ssl:K.ssl};switch(K.requestOptions.responseType){case"native-request-init":return delete V.data.signal,V;case"blob":V.data=yield V.data.arrayBuffer();break;case"json":V.data=(new TextEncoder).encode(JSON.stringify(V.data)).buffer;break;case"text":V.data=(new TextEncoder).encode(V.data).buffer}return{result:V,transferList:[V.data]}})()};let oe;function Y(L){oe=L}function j(L){const B=oe&&oe.findCredential(L);return B&&B.token?(0,ne.ZN)(L,"token",B.token):L}(0,T.Z)("host-webworker")||((0,T.Z)("edge")||(0,T.Z)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},15382:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{default:()=>Ct});var x=C(15861),T=C(17626),ne=C(73281),L=(C(4832),C(49067),C(26284),C(54928),C(69357),C(40342)),B=C(14726),X=C(33474),Z=C(32088),z=C(84792),ae=C(65787),K=C(7093),V=C(26584),P=C(72392),F=C(8314),$=C(2076),J=C(63290),H=C(62208),de=C(99959),ee=C(94113),ye=C(10699);function ge(){return(ge=(0,x.Z)(function*(Ne,ke){const{WhereClause:ot}=yield C.e(410).then(C.bind(C,10410));return ot.create(Ne,ke)})).apply(this,arguments)}var xe,se=C(21726),Q=C(77712),ue=(C(85931),C(66656)),me=C(68653),ve=C(76898),fe=C(99433),Me=C(383),ce=C(86162),he=C(58817),De=C(90912);let Pe=xe=class extends ce.wq{constructor(Ne){super(Ne),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new xe({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],Pe.prototype,"expression",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],Pe.prototype,"name",void 0),(0,T._)([(0,Q.Cb)({type:["boolean"],json:{write:!0}})],Pe.prototype,"returnType",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],Pe.prototype,"title",void 0),Pe=xe=(0,T._)([(0,ve.j)("esri.form.ExpressionInfo")],Pe);const je=Pe;let rt=class extends ce.wq{constructor(Ne){super(Ne),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],rt.prototype,"description",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],rt.prototype,"label",void 0),(0,T._)([(0,Q.Cb)()],rt.prototype,"type",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],rt.prototype,"visibilityExpression",void 0),rt=(0,T._)([(0,ve.j)("esri.form.elements.Element")],rt);const Le=rt;var Ce;let Te=Ce=class extends ce.wq{constructor(Ne){super(Ne),this.type=null}clone(){return new Ce({type:this.type})}};(0,T._)([(0,Q.Cb)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Te.prototype,"type",void 0),Te=Ce=(0,T._)([(0,ve.j)("esri.form.elements.inputs.AttachmentInput")],Te);const Ye=Te;var ct;let Ae=ct=class extends Le{constructor(Ne){super(Ne),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new ct({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],Ae.prototype,"attachmentKeyword",void 0),(0,T._)([(0,Q.Cb)({type:Boolean,json:{write:!0}})],Ae.prototype,"editable",void 0),(0,T._)([(0,Q.Cb)({type:Ye,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ae.prototype,"input",void 0),(0,T._)([(0,Q.Cb)({type:["attachment"],json:{read:!1,write:!0}})],Ae.prototype,"type",void 0),Ae=ct=(0,T._)([(0,ve.j)("esri.form.elements.AttachmentElement")],Ae);const Qe=Ae;let Je=class extends ce.wq{constructor(Ne){super(Ne),this.type=null}};(0,T._)([(0,Q.Cb)()],Je.prototype,"type",void 0),Je=(0,T._)([(0,ve.j)("esri.form.elements.inputs.Input")],Je);const re=Je;let Ee=class extends re{constructor(Ne){super(Ne),this.maxLength=null,this.minLength=0}};(0,T._)([(0,Q.Cb)({type:Number,json:{write:!0}})],Ee.prototype,"maxLength",void 0),(0,T._)([(0,Q.Cb)({type:Number,json:{write:!0}})],Ee.prototype,"minLength",void 0),Ee=(0,T._)([(0,ve.j)("esri.form.elements.inputs.TextInput")],Ee);const $e=Ee;var tt;let pt=tt=class extends $e{constructor(Ne){super(Ne),this.type="barcode-scanner"}clone(){return new tt({maxLength:this.maxLength,minLength:this.minLength})}};(0,T._)([(0,Q.Cb)({type:["barcode-scanner"],json:{read:!1,write:!0}})],pt.prototype,"type",void 0),pt=tt=(0,T._)([(0,ve.j)("esri.form.elements.inputs.BarcodeScannerInput")],pt);const mt=pt;var bt;let yt=bt=class extends re{constructor(Ne){super(Ne),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new bt({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],yt.prototype,"noValueOptionLabel",void 0),(0,T._)([(0,Q.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"showNoValueOption",void 0),(0,T._)([(0,Q.Cb)({type:["combo-box"],json:{read:!1,write:!0}})],yt.prototype,"type",void 0),yt=bt=(0,T._)([(0,ve.j)("esri.form.elements.inputs.ComboBoxInput")],yt);const at=yt;var Mt;function Pt(Ne){return null!=Ne?new Date(Ne):null}function Vt(Ne){return Ne?Ne.getTime():null}let Zt=Mt=class extends re{constructor(Ne){super(Ne),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(Ne,ke){return Pt(ke.max)}writeMax(Ne,ke){ke.max=Vt(Ne)}readMin(Ne,ke){return Pt(ke.min)}writeMin(Ne,ke){ke.min=Vt(Ne)}clone(){return new Mt({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};(0,T._)([(0,Q.Cb)({type:Boolean,json:{write:!0}})],Zt.prototype,"includeTime",void 0),(0,T._)([(0,Q.Cb)({type:Date,json:{type:Number,write:!0}})],Zt.prototype,"max",void 0),(0,T._)([(0,me.r)("max")],Zt.prototype,"readMax",null),(0,T._)([(0,fe.c)("max")],Zt.prototype,"writeMax",null),(0,T._)([(0,Q.Cb)({type:Date,json:{type:Number,write:!0}})],Zt.prototype,"min",void 0),(0,T._)([(0,me.r)("min")],Zt.prototype,"readMin",null),(0,T._)([(0,fe.c)("min")],Zt.prototype,"writeMin",null),(0,T._)([(0,Q.Cb)({type:["datetime-picker"],json:{read:!1,write:!0}})],Zt.prototype,"type",void 0),Zt=Mt=(0,T._)([(0,ve.j)("esri.form.elements.inputs.DateTimePickerInput")],Zt);const rr=Zt;var vr;let yr=vr=class extends re{constructor(Ne){super(Ne),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new vr({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],yr.prototype,"noValueOptionLabel",void 0),(0,T._)([(0,Q.Cb)({type:Boolean,json:{write:!0}})],yr.prototype,"showNoValueOption",void 0),(0,T._)([(0,Q.Cb)({type:["radio-buttons"],json:{read:!1,write:!0}})],yr.prototype,"type",void 0),yr=vr=(0,T._)([(0,ve.j)("esri.form.elements.inputs.RadioButtonsInput")],yr);const gr=yr;var _t;let $t=_t=class extends re{constructor(Ne){super(Ne),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new _t({offValue:this.offValue,onValue:this.onValue})}};(0,T._)([(0,Q.Cb)({type:[String,Number],json:{write:!0}})],$t.prototype,"offValue",void 0),(0,T._)([(0,Q.Cb)({type:[String,Number],json:{write:!0}})],$t.prototype,"onValue",void 0),(0,T._)([(0,Q.Cb)({type:["switch"],json:{read:!1,write:!0}})],$t.prototype,"type",void 0),$t=_t=(0,T._)([(0,ve.j)("esri.form.elements.inputs.SwitchInput")],$t);const Ht=$t;var er;let lr=er=class extends $e{constructor(Ne){super(Ne),this.type="text-area"}clone(){return new er({maxLength:this.maxLength,minLength:this.minLength})}};(0,T._)([(0,Q.Cb)({type:["text-area"],json:{read:!1,write:!0}})],lr.prototype,"type",void 0),lr=er=(0,T._)([(0,ve.j)("esri.form.elements.inputs.TextAreaInput")],lr);const fr=lr;var ht;let St=ht=class extends $e{constructor(Ne){super(Ne),this.type="text-box"}clone(){return new ht({maxLength:this.maxLength,minLength:this.minLength})}};(0,T._)([(0,Q.Cb)({type:["text-box"],json:{read:!1,write:!0}})],St.prototype,"type",void 0),St=ht=(0,T._)([(0,ve.j)("esri.form.elements.inputs.TextBoxInput")],St);const Wt={base:re,key:"type",typeMap:{"barcode-scanner":mt,"combo-box":at,"datetime-picker":rr,"radio-buttons":gr,switch:Ht,"text-area":fr,"text-box":St}};var Kt,Qt=C(26141);let Ze=Kt=class extends Le{constructor(Ne){super(Ne),this.domain=null,this.editable=!0,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field"}clone(){return new Kt({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}};(0,T._)([(0,Q.Cb)({types:Qt.V5,json:{read:{reader:Qt.im},write:!0}})],Ze.prototype,"domain",void 0),(0,T._)([(0,Q.Cb)({type:Boolean,json:{write:!0}})],Ze.prototype,"editable",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],Ze.prototype,"fieldName",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],Ze.prototype,"hint",void 0),(0,T._)([(0,Q.Cb)({types:Wt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ze.prototype,"input",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],Ze.prototype,"requiredExpression",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{read:!1,write:!0}})],Ze.prototype,"type",void 0),Ze=Kt=(0,T._)([(0,ve.j)("esri.form.elements.FieldElement")],Ze);const st=Ze;var Xe,Ge=C(51686);let He=Xe=class extends Le{constructor(Ne){super(Ne),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Xe({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:(0,he.d9)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,T._)([(0,Q.Cb)({type:Number,json:{write:!0}})],He.prototype,"displayCount",void 0),(0,T._)([(0,Q.Cb)({type:["list"],json:{write:!0}})],He.prototype,"displayType",void 0),(0,T._)([(0,Q.Cb)({type:Boolean,json:{write:!0}})],He.prototype,"editable",void 0),(0,T._)([(0,Q.Cb)({type:[Ge.Z],json:{write:!0}})],He.prototype,"orderByFields",void 0),(0,T._)([(0,Q.Cb)({type:Number,json:{write:!0}})],He.prototype,"relationshipId",void 0),(0,T._)([(0,Q.Cb)({type:["relationship"],json:{read:!1,write:!0}})],He.prototype,"type",void 0),He=Xe=(0,T._)([(0,ve.j)("esri.form.elements.RelationshipElement")],He);const Ue=He;function it(Ne){return{typesWithGroup:{base:Le,key:"type",typeMap:{attachment:Qe,field:st,group:Ne,relationship:Ue}},typesWithoutGroup:{base:Le,key:"type",typeMap:{attachment:Qe,field:st,relationship:Ue}}}}function wt(Ne,ke,ot=!0){if(!Ne)return null;const Dt=ot?ke.typesWithGroup.typeMap:ke.typesWithoutGroup.typeMap;return Ne.filter(kt=>Dt[kt.type]).map(kt=>Dt[kt.type].fromJSON(kt))}function nr(Ne,ke,ot=!0){if(!Ne)return null;const Dt=ot?ke.typesWithGroup.typeMap:ke.typesWithoutGroup.typeMap;return Ne.filter(kt=>Dt[kt.type]).map(kt=>kt.toJSON())}function wr(Ne,ke,ot=!0){return Ne?Ne.map(Dt=>(0,De.N7)(ot?ke.typesWithGroup:ke.typesWithoutGroup,Dt)):null}var Dr;let kr=Dr=class extends Le{constructor(Ne){super(Ne),this.elements=null,this.initialState="expanded",this.type="group"}castElements(Ne){return wr(Ne,Wr,!1)}readElements(Ne,ke){return wt(ke.formElements,Wr,!1)}writeElements(Ne,ke){ke.formElements=nr(Ne,Wr,!1)}clone(){return new Dr({description:this.description,elements:(0,he.d9)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,T._)([(0,Q.Cb)({json:{write:!0}})],kr.prototype,"elements",void 0),(0,T._)([(0,ue.p)("elements")],kr.prototype,"castElements",null),(0,T._)([(0,me.r)("elements",["formElements"])],kr.prototype,"readElements",null),(0,T._)([(0,fe.c)("elements")],kr.prototype,"writeElements",null),(0,T._)([(0,Q.Cb)({type:["collapsed","expanded"],json:{write:!0}})],kr.prototype,"initialState",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{read:!1,write:!0}})],kr.prototype,"type",void 0),kr=Dr=(0,T._)([(0,ve.j)("esri.form.elements.GroupElement")],kr);const Wr=it(kr);var Kn;const $i=it(kr);let si=Kn=class extends ce.wq{constructor(Ne){super(Ne),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(Ne){return wr(Ne,$i)}readElements(Ne,ke){return wt(ke.formElements,$i)}writeElements(Ne,ke){ke.formElements=nr(Ne,$i)}clone(){return new Kn({description:this.description,expressionInfos:(0,he.d9)(this.expressionInfos),elements:(0,he.d9)(this.elements),title:this.title})}};(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],si.prototype,"description",void 0),(0,T._)([(0,Q.Cb)({json:{write:!0}})],si.prototype,"elements",void 0),(0,T._)([(0,ue.p)("elements")],si.prototype,"castElements",null),(0,T._)([(0,me.r)("elements",["formElements"])],si.prototype,"readElements",null),(0,T._)([(0,fe.c)("elements")],si.prototype,"writeElements",null),(0,T._)([(0,Q.Cb)({type:[je],json:{write:!0}})],si.prototype,"expressionInfos",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{write:!0}})],si.prototype,"title",void 0),si=Kn=(0,T._)([(0,ve.j)("esri.form.FormTemplate")],si);const co=si;var xo=C(2004),Yi=C(79334),qn=C(65234),mi=C(63602),Li=(C(29132),C(88879)),js=C(80542),ss=C(47996),Ea=C(60330),Do=C(59289),ms=C(61039),Bs=C(20514),Ji=C(61515),Nn=C(17253),So=C(37118),ei=C(71774);let Ve=0;const Yt=J.Z.getLogger("esri.layers.graphics.sources.MemorySource");let Ut=class extends(ss.Z.LoadableMixin((0,Ea.v)((0,js.p)(K.Z)))){constructor(Ne){super(Ne),this._idToClientGraphic=null,this.type="memory"}load(Ne){const ke=(0,H.pC)(Ne)?Ne.signal:null;return this.addResolvingPromise(this._startWorker(ke)),Promise.resolve(this)}destroy(){var Ne;null==(Ne=this._connection)||Ne.close(),this._connection=null}get workerGeometryType(){var Ne;const ke=null==(Ne=this.layer)?void 0:Ne.geometryType;return ke?this._geometryTypeRequiresClientGraphicMapping(ke)?"polygon":ke:null}applyEdits(Ne){return this.load().then(()=>this._applyEdits(Ne))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(Ne,ke={}){var ot=this;return(0,x.Z)(function*(){yield ot.load(ke);const Dt=yield ot._connection.invoke("queryFeatures",Ne?Ne.toJSON():null,ke);(0,Ji.p)(Ne,ot.layer.spatialReference,Dt);const kt=Nn.default.fromJSON(Dt);if(!ot._requiresClientGraphicMapping())return kt;const Jt=ot.layer.objectIdField;for(const ir of kt.features){const Zr=ot._idToClientGraphic.get(ir.attributes[Jt]);Zr&&(ir.geometry=Zr.geometry)}return kt.geometryType=ot.layer.geometryType,kt})()}queryFeaturesJSON(Ne,ke={}){var ot=this;return(0,x.Z)(function*(){if(ot._requiresClientGraphicMapping())throw new V.Z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");yield ot.load(ke);const Dt=yield ot._connection.invoke("queryFeatures",Ne?Ne.toJSON():null,ke);return(0,Ji.p)(Ne,ot.layer.spatialReference,Dt),Dt})()}queryFeatureCount(Ne,ke={}){return this.load(ke).then(()=>this._connection.invoke("queryFeatureCount",Ne?Ne.toJSON():null,ke))}queryObjectIds(Ne,ke={}){return this.load(ke).then(()=>this._connection.invoke("queryObjectIds",Ne?Ne.toJSON():null,ke))}queryExtent(Ne,ke={}){return this.load(ke).then(()=>this._connection.invoke("queryExtent",Ne?Ne.toJSON():null,ke)).then(ot=>({count:ot.count,extent:xo.Z.fromJSON(ot.extent)}))}querySnapping(Ne,ke={}){return this.load(ke).then(()=>this._connection.invoke("querySnapping",Ne,ke))}_applyEdits(Ne){var ke=this;return(0,x.Z)(function*(){if(!ke._connection)throw new V.Z("feature-layer-source:edit-failure","Memory source not loaded");const ot=ke.layer.objectIdField;let Dt=null;const kt=[],Jt=[];yield Promise.all([ke._prepareClientMapping(Ne.addFeatures,null),ke._prepareClientMapping(Ne.updateFeatures,null)]);const ir=Vn=>"objectId"in Vn&&null!=Vn.objectId?Vn.objectId:"attributes"in Vn&&null!=Vn.attributes[ot]?Vn.attributes[ot]:null;if(Ne.addFeatures&&(Dt=ke._prepareAddFeatures(Ne.addFeatures)),Ne.deleteFeatures)for(const Vn of Ne.deleteFeatures){const Di=ir(Vn);null!=Di&&kt.push(Di)}const Sr=Ne.updateFeatures&&ke._idToClientGraphic?new Map:null;if(Ne.updateFeatures)for(const Vn of Ne.updateFeatures)if(Jt.push(ke._serializeFeature(Vn)),Sr){const Di=ir(Vn);null!=Di&&Sr.set(Di,Vn)}(0,Bs.P)(Dt?Dt.features:null,Jt,ke.layer.spatialReference);const{fullExtent:Zr,featureEditResults:Fr}=yield ke._connection.invoke("applyEdits",{adds:Dt?Dt.features:[],updates:Jt,deletes:kt});return ke.fullExtent=Zr,Dt&&Dt.finish(Fr.uidToObjectId),ke._updateClientGraphicIds(Sr,Fr),ke._createEditsResult(Fr)})()}_prepareClientMapping(Ne,ke){var ot=this;return(0,x.Z)(function*(){if("mesh"!==ot.layerOrSourceGeometryType||(0,H.Wi)(Ne))return;const Dt=[];for(const{geometry:kt}of Ne)!(0,H.pC)(kt)||"mesh"!==kt.type||kt.hasExtent||kt.loaded||Dt.push(kt.load({signal:ke}));Dt.length&&(yield Promise.all(Dt))})()}_updateClientGraphicIds(Ne,ke){if(this._idToClientGraphic){if(Ne)for(const ot of ke.updateResults){if(!ot.success)continue;const Dt=Ne.get(ot.objectId);null!=Dt&&this._addIdToClientGraphic(Dt)}for(const ot of ke.deleteResults)ot.success&&this._idToClientGraphic.delete(ot.objectId)}}_createEditsResult(Ne){return{addFeatureResults:Ne.addResults?Ne.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:Ne.updateResults?Ne.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:Ne.deleteResults?Ne.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(Ne){const ke=!0===Ne.success?null:Ne.error||{code:void 0,description:void 0};return{objectId:Ne.objectId,globalId:Ne.globalId,error:ke?new V.Z("feature-layer-source:edit-failure",ke.description,{code:ke.code}):null}}_prepareAddFeatures(Ne){const ke=new Map,ot=new Array(Ne.length);let Dt=null;for(let Jt=0;Jt<Ne.length;Jt++){const ir=Ne[Jt],Sr=this._serializeFeature(ir);!Dt&&(0,H.pC)(ir.geometry)&&(Dt=ir.geometry.type),ot[Jt]=Sr,ke.set(`${Sr.uid}`,ir)}const kt=this;return{features:ot,inferredGeometryType:Dt,finish(Jt){const ir=kt.sourceJSON.objectIdField;for(const Sr in Jt){const Zr=Jt[Sr],Fr=ke.get(Sr);Fr&&(Fr.attributes||(Fr.attributes={}),-1===Zr?delete Fr.attributes[ir]:Fr.attributes[ir]=Zr,kt._addIdToClientGraphic(Fr))}}}}_addIdToClientGraphic(Ne){if(!this._idToClientGraphic)return;const ot=Ne.attributes&&Ne.attributes[this.sourceJSON.objectIdField];null!=ot&&this._idToClientGraphic.set(ot,Ne)}get layerOrSourceGeometryType(){var Ne,ke,ot;return null!=(Ne=null==(ke=this.layer)?void 0:ke.geometryType)?Ne:null==(ot=this.sourceJSON)?void 0:ot.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(Ne){return this._geometryTypeRequiresClientGraphicMapping(Ne.type)}_geometryTypeRequiresClientGraphicMapping(Ne){return"mesh"===Ne||"multipatch"===Ne||"extent"===Ne}_serializeFeature(Ne){const{attributes:ke}=Ne,ot=this._geometryForSerialization(Ne),Dt=(Ve++).toString();return ot?{uid:Dt,geometry:ot.toJSON(),attributes:ke}:{uid:Dt,attributes:ke}}_geometryForSerialization(Ne){const{geometry:ke}=Ne;return(0,H.Wi)(ke)?null:this._geometryRequiresClientGraphicMapping(ke)?ke.extent?So.Z.fromExtent(ke.extent):null:ke}_startWorker(Ne){var ke=this;return(0,x.Z)(function*(){ke._connection=yield(0,Do.bA)("MemorySourceWorker",{strategy:(0,F.Z)("feature-layers-workers")?"dedicated":"local",signal:Ne});const{fields:ot,spatialReference:Dt,objectIdField:kt,hasM:Jt,hasZ:ir,timeInfo:Sr}=ke.layer,Zr="defaults"===ke.layer.originOf("spatialReference");yield ke._prepareClientMapping(ke.items,Ne);const Fr=ke._prepareAddFeatures(ke.items);ke.handles.add(ke.on("before-changes",Cn=>{Yt.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),Cn.preventDefault()}));const Vn={features:Fr.features,fields:ot&&ot.map(Cn=>Cn.toJSON()),geometryType:ei.P$.toJSON(ke.workerGeometryType),hasM:"mesh"!==ke.layerOrSourceGeometryType&&Jt,hasZ:"mesh"===ke.layerOrSourceGeometryType||ir,objectIdField:kt,spatialReference:Zr?null:Dt&&Dt.toJSON(),timeInfo:Sr?Sr.toJSON():null},Di=yield ke._connection.invoke("load",Vn,{signal:Ne});for(const Cn of Di.warnings)Yt.warn(Cn.message,{layer:ke.layer,warning:Cn});Di.featureErrors.length&&Yt.warn(`Encountered ${Di.featureErrors.length} validation errors while loading features`,Di.featureErrors);const Ki=Di.layerDefinition;ke._geometryTypeRequiresClientGraphicMapping(Fr.inferredGeometryType)&&(Ki.geometryType=ei.P$.toJSON(Fr.inferredGeometryType)),ke.sourceJSON=Ki,ke._requiresClientGraphicMapping()&&(ke._idToClientGraphic=new Map),Fr.finish(Di.assignedObjectIds)})()}};(0,T._)([(0,ms.c)({Type:Li.Z,ensureType:(0,De.se)(Li.Z)})],Ut.prototype,"itemType",void 0),(0,T._)([(0,Q.Cb)()],Ut.prototype,"type",void 0),(0,T._)([(0,Q.Cb)({constructOnly:!0})],Ut.prototype,"layer",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0})],Ut.prototype,"workerGeometryType",null),(0,T._)([(0,Q.Cb)()],Ut.prototype,"sourceJSON",void 0),Ut=(0,T._)([(0,ve.j)("esri.layers.graphics.sources.MemorySource")],Ut);const Mr=Ut;var Kr,br=C(50085),Yr=C(65088),fn=C(552),Rr=C(50107),xr=C(35126),bn=C(49286),Pn=C(32629),zr=C(6647),qt=C(30346),Or=C(99555),Un=C(97941),ai=C(38305),Gn=C(13812);let ui=Kr=class extends ce.wq{constructor(Ne){super(Ne)}clone(){const{name:Ne,fields:ke,isAscending:ot,isUnique:Dt,description:kt}=this;return new Kr({name:Ne,fields:ke,isAscending:ot,isUnique:Dt,description:kt})}};(0,T._)([(0,Q.Cb)({constructOnly:!0})],ui.prototype,"name",void 0),(0,T._)([(0,Q.Cb)({constructOnly:!0})],ui.prototype,"fields",void 0),(0,T._)([(0,Q.Cb)({constructOnly:!0})],ui.prototype,"isAscending",void 0),(0,T._)([(0,Q.Cb)({constructOnly:!0})],ui.prototype,"isUnique",void 0),(0,T._)([(0,Q.Cb)({constructOnly:!0})],ui.prototype,"description",void 0),ui=Kr=(0,T._)([(0,ve.j)("esri.layers.support.FeatureIndex")],ui);var gs=C(2777),Xi=C(32777),Ni=C(41638),ho=C(55911),Oo=C(36630),ln=C(16730);let fo=class extends ce.wq{constructor(Ne){super(Ne),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,T._)([(0,Q.Cb)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],fo.prototype,"shapeAreaField",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],fo.prototype,"shapeLengthField",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{read:Ne=>ln.gV.read(Ne)||ln.Jo.read(Ne)}})],fo.prototype,"units",void 0),fo=(0,T._)([(0,ve.j)("esri.layers.support.GeometryFieldsInfo")],fo);const In=fo;var Us=C(170),Ii=C(62667),Qi=C(2430);const jn=new $.Xn({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Qn=new $.Xn({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Xr=class extends ce.wq{constructor(Ne){super(Ne),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,T._)([(0,Q.Cb)({json:{read:jn.read,write:jn.write}})],Xr.prototype,"cardinality",void 0),(0,T._)([(0,Q.Cb)({json:{read:!0,write:!0}})],Xr.prototype,"composite",void 0),(0,T._)([(0,Q.Cb)({json:{read:!0,write:!0}})],Xr.prototype,"id",void 0),(0,T._)([(0,Q.Cb)({json:{read:!0,write:!0}})],Xr.prototype,"keyField",void 0),(0,T._)([(0,Q.Cb)({json:{read:!0,write:!0}})],Xr.prototype,"keyFieldInRelationshipTable",void 0),(0,T._)([(0,Q.Cb)({json:{read:!0,write:!0}})],Xr.prototype,"name",void 0),(0,T._)([(0,Q.Cb)({json:{read:!0,write:!0}})],Xr.prototype,"relatedTableId",void 0),(0,T._)([(0,Q.Cb)({json:{read:!0,write:!0}})],Xr.prototype,"relationshipTableId",void 0),(0,T._)([(0,Q.Cb)({json:{read:Qn.read,write:Qn.write}})],Xr.prototype,"role",void 0),Xr=(0,T._)([(0,ve.j)("esri.layers.support.Relationship")],Xr);const Tn=Xr;var Vs=C(62708),ft=C(15283),xt=C(39683),vt=C(67736),Lt=C(84952),ar=C(67010),tr=C(6871),pr=C(49430);const or=new $.Xn({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Et={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},jt="FeatureLayer",zt=J.Z.getLogger("esri.layers.FeatureLayer");function mr(Ne){return Ne&&Ne instanceof K.Z}function Er(Ne,ke,ot){return!!(Ne&&Ne.hasOwnProperty(ke)?Ne[ke]:ot)}function hr(Ne,ke,ot){return Ne&&Ne.hasOwnProperty(ke)?Ne[ke]:ot}const on=(0,ho.v)();function yn(Ne,ke,ot){const Dt=!(null==ot||!ot.writeLayerSchema);return{enabled:Dt,ignoreOrigin:Dt}}let Be=class extends((0,xr.b)((0,fn.h)((0,Pn.c)((0,Un.n)((0,Or.M)((0,qt.Q)((0,Yr.Y)((0,bn.q)((0,zr.I)((0,de.R)((0,Rr.N)((0,br.V)(mi.Z))))))))))))){constructor(...Ne){super(...Ne),this._handles=new P.Z,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=qn.Z.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(K.Z.ofType(ui)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var Ne;null==(Ne=this.source)||Ne.destroy(),this._handles=(0,H.SC)(this._handles)}normalizeCtorArgs(Ne,ke){return"string"==typeof Ne?Ot({url:Ne},ke):Ne}load(Ne){var ke=this;const ot=(0,H.pC)(Ne)?Ne.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(ot).then(kt=>this._initLayerProperties(kt)));const Dt=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},Ne).catch(ye.r9).then((0,x.Z)(function*(){if(ke.url&&null==ke.layerId&&/FeatureServer|MapServer\/*$/i.test(ke.url)){const kt=yield ke._fetchFirstLayerId(ot);null!=kt&&(ke.layerId=kt)}if(!ke.url&&!ke._hasMemorySource())throw new V.Z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return ke._initLayerProperties(yield ke.createGraphicsSource(ot))})).then(()=>this.finishLoadEditablePortalLayer(Ne));return this.addResolvingPromise(Dt),Promise.resolve(this)}readCapabilities(Ne,ke){return{attachment:this._readAttachmentCapabilities((ke=ke.layerDefinition||ke).attachmentProperties),data:this._readDataCapabilities(ke),metadata:this._readMetadataCapabilities(ke),operations:this._readOperationsCapabilities(ke.capabilities||Ne,ke),query:this._readQueryCapabilities(ke),queryRelated:this._readQueryRelatedCapabilities(ke),editing:this._readEditingCapabilities(ke)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(Ne){null!=Ne?this._override("editingEnabled",Ne):this._clearOverride("editingEnabled")}readEditingEnabled(Ne,ke){return this._readEditingEnabled(ke,!1)}readEditingEnabledFromWebMap(Ne,ke,ot){return this._readEditingEnabled(ke,!0,ot)}writeEditingEnabled(Ne,ke){this._writeEditingEnabled(Ne,ke,!1)}writeEditingEnabledToWebMap(Ne,ke,ot,Dt){this._writeEditingEnabled(Ne,ke,!0,Dt)}readEditingInfo(Ne,ke){const{editingInfo:ot}=ke;return ot?{lastEditDate:null!=ot.lastEditDate?new Date(ot.lastEditDate):null}:null}readIsTable(Ne,ke){return"Table"===(ke=ke&&ke.layerDefinition||ke).type||!ke.geometryType}writeIsTable(Ne,ke,ot,Dt){null!=Dt&&Dt.writeLayerSchema&&(0,ee.RB)(ot,Ne?"Table":"Feature Layer",ke)}readMinScale(Ne,ke){return ke.effectiveMinScale||Ne||0}readMaxScale(Ne,ke){return ke.effectiveMaxScale||Ne||0}readGlobalIdFieldFromService(Ne,ke){if((ke=ke.layerDefinition||ke).globalIdField)return ke.globalIdField;if(ke.fields)for(const ot of ke.fields)if("esriFieldTypeGlobalID"===ot.type)return ot.name}readObjectIdFieldFromService(Ne,ke){if((ke=ke.layerDefinition||ke).objectIdField)return ke.objectIdField;if(ke.fields)for(const ot of ke.fields)if("esriFieldTypeOID"===ot.type)return ot.name}get parsedUrl(){const Ne=this.url?(0,se.mN)(this.url):null;return null!=Ne&&(null!=this.dynamicDataSource?Ne.path=(0,se.v_)(Ne.path,"dynamicLayer"):null!=this.layerId&&(Ne.path=(0,se.v_)(Ne.path,this.layerId.toString()))),Ne}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(Ne){(0,Oo.YN)(Ne,this.fieldsIndex),this._set("renderer",Ne)}readRenderer(Ne,ke,ot){const Dt=(ke=ke.layerDefinition||ke).drawingInfo&&ke.drawingInfo.renderer||void 0;if(Dt){const kt=(0,X.a)(Dt,ke,ot)||void 0;return kt||zt.error("Failed to create renderer",{rendererDefinition:ke.drawingInfo.renderer,layer:this,context:ot}),kt}if(ke.defaultSymbol)return ke.types&&ke.types.length?new B.Z({defaultSymbol:nt(ke.defaultSymbol,ke,ot),field:ke.typeIdField,uniqueValueInfos:ke.types.map(kt=>({id:kt.id,symbol:nt(kt.symbol,kt,ot)}))}):new L.Z({symbol:nt(ke.defaultSymbol,ke,ot)})}set source(Ne){const ke=this._get("source");ke!==Ne&&(mr(ke)&&this._resetMemorySource(ke),mr(Ne)&&this._initMemorySource(Ne),this._set("source",Ne))}castSource(Ne){return Ne?Array.isArray(Ne)||Ne instanceof K.Z?new Mr({layer:this,items:Ne}):Ne:null}readSource(Ne,ke){const ot=Nn.default.fromJSON(ke.featureSet);return new Mr({layer:this,items:ot&&ot.features||[]})}readServiceDefinitionExpression(Ne,ke){return ke.definitionQuery||ke.definitionExpression}readTemplates(Ne,ke){const ot=ke.editFieldsInfo,Dt=ot&&ot.creatorField,kt=ot&&ot.editorField;return Ne=Ne&&Ne.map(Jt=>Xi.Z.fromJSON(Jt)),this._fixTemplates(Ne,Dt),this._fixTemplates(Ne,kt),Ne}readTitle(Ne,ke){const ot=ke.layerDefinition&&ke.layerDefinition.name||ke.name,Dt=ke.title||ke.layerDefinition&&ke.layerDefinition.title;if(ot){const kt=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,ai.a7)(this.url,ot):ot;let Jt=ot;if(!Jt&&this.url){const ir=(0,ai.Qc)(this.url);(0,H.pC)(ir)&&(Jt=ir.title)}return Jt?("item-title-and-service-name"===this.sublayerTitleMode&&kt&&kt!==Jt&&(Jt=kt+" - "+Jt),(0,ai.ld)(Jt)):void 0}if("item-title"===this.sublayerTitleMode&&Dt)return Dt}readTitleFromWebMap(Ne,ke){return ke.title||ke.layerDefinition&&ke.layerDefinition.name}readTypeIdField(Ne,ke){let ot=(ke=ke.layerDefinition||ke).typeIdField;if(ot&&ke.fields){ot=ot.toLowerCase();const Dt=ke.fields.find(kt=>kt.name.toLowerCase()===ot);Dt&&(ot=Dt.name)}return ot}readTypes(Ne,ke){Ne=(ke=ke.layerDefinition||ke).types;const ot=ke.editFieldsInfo,Dt=ot&&ot.creatorField,kt=ot&&ot.editorField;return Ne&&Ne.map(Jt=>(Jt=Ni.Z.fromJSON(Jt),this._fixTemplates(Jt.templates,Dt),this._fixTemplates(Jt.templates,kt),Jt))}set url(Ne){const ke=(0,ai.XG)({layer:this,url:Ne,nonStandardUrlAllowed:!0,logger:zt});this._set("url",ke.url),null!=ke.layerId&&this._set("layerId",ke.layerId)}writeUrl(Ne,ke,ot,Dt){(0,ai.wH)(this,Ne,null,ke,Dt)}readVersion(Ne,ke){return ke.currentVersion?ke.currentVersion:ke.hasOwnProperty("capabilities")||ke.hasOwnProperty("drawingInfo")||ke.hasOwnProperty("hasAttachments")||ke.hasOwnProperty("htmlPopupType")||ke.hasOwnProperty("relationships")||ke.hasOwnProperty("timeInfo")||ke.hasOwnProperty("typeIdField")||ke.hasOwnProperty("types")?10:9.3}readVisible(Ne,ke){return ke.layerDefinition&&null!=ke.layerDefinition.defaultVisibility?!!ke.layerDefinition.defaultVisibility:null!=ke.visibility?!!ke.visibility:void 0}addAttachment(Ne,ke){return this.load().then(()=>this._checkAttachmentSupport(Ne)).then(()=>{if(!("addAttachment"in this.source))throw new V.Z(jt,"Layer source does not support addAttachment capability");return this.source.addAttachment(Ne,ke)})}updateAttachment(Ne,ke,ot){return this.load().then(()=>this._checkAttachmentSupport(Ne)).then(()=>{if(!("updateAttachment"in this.source))throw new V.Z(jt,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(Ne,ke,ot)})}applyEdits(Ne,ke){var ot=this;return(0,x.Z)(function*(){const Dt=yield C.e(1913).then(C.bind(C,81913));return yield ot.load(),Dt.applyEdits(ot,ot.source,Ne,ke)})()}on(Ne,ke){return super.on(Ne,ke)}createPopupTemplate(Ne){return(0,pr.eZ)(this,Ne)}createGraphicsSource(Ne){var ke=this;return(0,x.Z)(function*(){if(ke._hasMemorySource())return ke.source.load({signal:Ne});const{default:ot}=yield(0,ye.Hl)(C.e(5547).then(C.bind(C,45547)),Ne);return new ot({layer:ke}).load({signal:Ne})})()}createQuery(){const Ne=new Lt.Z,ke=this.get("capabilities.data");Ne.dynamicDataSource=this.dynamicDataSource,Ne.gdbVersion=this.gdbVersion,Ne.historicMoment=this.historicMoment,Ne.returnGeometry=!0,ke&&(ke.supportsZ&&null!=this.returnZ&&(Ne.returnZ=this.returnZ),ke.supportsM&&null!=this.returnM&&(Ne.returnM=this.returnM)),Ne.outFields=["*"],Ne.where=this.definitionExpression||"1=1";const{timeOffset:ot,timeExtent:Dt}=this;return Ne.timeExtent=null!=ot&&null!=Dt?Dt.offset(-ot.value,ot.unit):Dt||null,Ne.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,Ne}deleteAttachments(Ne,ke){return this.load().then(()=>this._checkAttachmentSupport(Ne)).then(()=>{if(!("deleteAttachments"in this.source))throw new V.Z(jt,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(Ne,ke)})}fetchRecomputedExtents(Ne){return this.load({signal:null==Ne?void 0:Ne.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(Ne);throw new V.Z(jt,"Layer source does not support fetchUpdates capability")})}getFeatureType(Ne){const{typeIdField:ke,types:ot}=this;if(!ke||!Ne)return null;const Dt=Ne.attributes?Ne.attributes[ke]:void 0;if(null==Dt)return null;let kt=null;return ot.some(Jt=>{const{id:ir}=Jt;return null!=ir&&(ir.toString()===Dt.toString()&&(kt=Jt),!!kt)}),kt}getFieldDomain(Ne,ke){const Dt=this.getFeatureType(ke&&ke.feature);if(Dt){const kt=Dt.domains&&Dt.domains[Ne];if(kt&&"inherited"!==kt.type)return kt}return this._getLayerDomain(Ne)}getField(Ne){return this.fieldsIndex.get(Ne)}queryAttachments(Ne,ke){return Ne=vt.Z.from(Ne),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new V.Z(jt,"this layer doesn't support attachments");const{attachmentTypes:ot,objectIds:Dt,globalIds:kt,num:Jt,size:ir,start:Sr,where:Zr}=Ne;if(!this.get("capabilities.operations.supportsQueryAttachments")){const Vn=ot&&ot.length,Di=kt&&kt.length,Ki=ir&&ir.length;if(Dt&&Dt.length>1||Vn||Di||Ki||Jt||Sr||Zr)throw new V.Z(jt,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",Ne)}if(!(Dt&&Dt.length||Zr))throw new V.Z(jt,"'objectIds' or 'where' are required to perform attachment query",Ne);if(!("queryAttachments"in this.source))throw new V.Z(jt,"Layer source does not support queryAttachments capability",Ne);return this.source.queryAttachments(Ne)})}queryFeatures(Ne,ke){return this.load().then(()=>this.source.queryFeatures(Lt.Z.from(Ne)||this.createQuery(),ke)).then(ot=>{if(null!=ot&&ot.features)for(const Dt of ot.features)Dt.layer=Dt.sourceLayer=this;return ot})}queryObjectIds(Ne,ke){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(Lt.Z.from(Ne)||this.createQuery(),ke);throw new V.Z(jt,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(Ne,ke){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(Lt.Z.from(Ne)||this.createQuery(),ke);throw new V.Z(jt,"Layer source does not support queryFeatureCount capability")})}queryExtent(Ne,ke){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(Lt.Z.from(Ne)||this.createQuery(),ke);throw new V.Z(jt,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(Ne,ke){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(ar.Z.from(Ne),ke);throw new V.Z(jt,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(Ne,ke){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(ar.Z.from(Ne),ke);throw new V.Z(jt,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(Ne,ke){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(tr.Z.from(Ne),ke).then(ot=>{if(null!=ot&&ot.features)for(const Dt of ot.features)Dt.layer=Dt.sourceLayer=this;return ot});throw new V.Z(jt,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(Ne,ke){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(tr.Z.from(Ne),ke);throw new V.Z(jt,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(Ne,ke){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(tr.Z.from(Ne),ke);throw new V.Z(jt,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(Ne,ke){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(tr.Z.from(Ne),ke);throw new V.Z(jt,"Layer source does not support queryFeatureCount capability")})}read(Ne,ke){const ot=Ne.featureCollection;if(ot){const Dt=ot.layers;Dt&&1===Dt.length&&(super.read(Dt[0],ke),null!=ot.showLegend&&super.read({showLegend:ot.showLegend},ke))}super.read(Ne,ke),ke&&"service"===ke.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(Ne,ke){var ot,Dt;const kt=(ke=nn(Ot({},ke),{writeLayerSchema:null!=(ot=null==(Dt=ke)?void 0:Dt.writeLayerSchema)?ot:this._hasMemorySource()})).origin,Jt=ke.layerContainerType,ir=ke.messages;if(this.isTable){if("web-scene"===kt||"web-map"===kt&&"tables"!==Jt)return ir&&ir.push(new V.Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return ir&&ir.push(new V.Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&"web-map"===kt&&"tables"===Jt)return ir&&ir.push(new V.Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(Ne,ke)}_readEditingEnabled(Ne,ke,ot){var Dt;let kt=null==(Dt=Ne.layerDefinition)?void 0:Dt.capabilities;return kt?this._hasEditingCapability(kt):(kt=Ne.capabilities,ke&&"web-map"===(null==ot?void 0:ot.origin)&&!this._hasMemorySource()&&kt?this._hasEditingCapability(kt):void 0)}_hasEditingCapability(Ne){return Ne.toLowerCase().split(",").map(ke=>ke.trim()).includes("editing")}_writeEditingEnabled(Ne,ke,ot,Dt){if(!Ne){var kt,Jt;const ir=null!=(kt=this.capabilities)&&null!=(Jt=kt.operations)&&Jt.supportsSync?"Query,Sync":"Query";(0,ee.RB)("layerDefinition.capabilities",ir,ke),!ot||null!=Dt&&Dt.writeLayerSchema||(ke.capabilities=ir)}}_checkAttachmentSupport(Ne){const{attributes:ke}=Ne,{objectIdField:ot}=this;return this.get("capabilities.data.supportsAttachment")?Ne?ke?ke[ot]?void 0:Promise.reject(new V.Z(jt,`feature is missing the identifying attribute ${ot}`)):Promise.reject(new V.Z(jt,"'attributes' are required on a feature to query attachments")):Promise.reject(new V.Z(jt,"A feature is required to add/delete/update attachments")):Promise.reject(new V.Z(jt,"this layer doesn't support attachments"))}_getLayerDomain(Ne){const ke=this.fieldsIndex.get(Ne);return ke?ke.domain:null}_fetchFirstLayerId(Ne){return(0,z.default)(this.url,{query:nn(Ot({f:"json"},this.customParameters),{token:this.apiKey}),responseType:"json",signal:Ne}).then(ke=>{const ot=ke.data;if(ot)return Array.isArray(ot.layers)&&ot.layers.length>0?ot.layers[0].id:Array.isArray(ot.tables)&&ot.tables.length>0?ot.tables[0].id:void 0})}_initLayerProperties(Ne){var ke=this;return(0,x.Z)(function*(){return ke._set("source",Ne),Ne.sourceJSON&&(ke.sourceJSON=Ne.sourceJSON,ke.read(Ne.sourceJSON,{origin:"service",url:ke.parsedUrl})),ke._verifySource(),ke._verifyFields(),(0,Oo.YN)(ke.renderer,ke.fieldsIndex),(0,Oo.UF)(ke.timeInfo,ke.fieldsIndex),(0,xt.y)(ke,{origin:"service"})})()}hasDataChanged(){var Ne=this;return(0,x.Z)(function*(){var ke;if(null!=(ke=Ne.source)&&ke.refresh)try{var ot;const{dataChanged:Dt,updates:kt}=yield null==(ot=Ne.source)?void 0:ot.refresh();if((0,H.pC)(kt)&&(Ne.sourceJSON=Ot(Ot({},Ne.sourceJSON),kt),Ne.read(kt,{origin:"service",url:Ne.parsedUrl})),Dt)return!0}catch(Dt){}if(Ne.definitionExpression)try{return(yield function le(Ne,ke){return ge.apply(this,arguments)}(Ne.definitionExpression,Ne.fieldsIndex)).hasDateFunctions}catch(Dt){}return!1})()}_verifyFields(){const Ne=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+Ne+")"),this.isTable||this._hasMemorySource()||-1!==Ne.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(ke){return"geometry"===ke.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+Ne+")")}_fixTemplates(Ne,ke){Ne&&Ne.forEach(ot=>{const Dt=ot.prototype&&ot.prototype.attributes;Dt&&ke&&delete Dt[ke]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new V.Z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new V.Z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(Ne){Ne.forEach(ke=>{ke.layer=this,ke.sourceLayer=this}),this._handles.add([Ne.on("after-add",ke=>{ke.item.layer=this,ke.item.sourceLayer=this}),Ne.on("after-remove",ke=>{ke.item.layer=null,ke.item.sourceLayer=null})],"fl-source")}_resetMemorySource(Ne){Ne.forEach(ke=>{ke.layer=null,ke.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(Ne){const ke={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return Ne&&Array.isArray(Ne)&&Ne.forEach(ot=>{const Dt=Et[ot.name];Dt&&(ke[Dt]=!!ot.isEnabled)}),ke}_readDataCapabilities(Ne){return{isVersioned:Er(Ne,"isDataVersioned",!1),supportsAttachment:Er(Ne,"hasAttachments",!1),supportsM:Er(Ne,"hasM",!1),supportsZ:Er(Ne,"hasZ",!1)}}_readMetadataCapabilities(Ne){return{supportsAdvancedFieldProperties:Er(Ne,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(Ne,ke){const ot=Ne?Ne.toLowerCase().split(",").map(Zr=>Zr.trim()):[],Dt=ot.includes("editing")&&!ke.datesInUnknownTimezone;let kt=Dt&&ot.includes("create"),Jt=Dt&&ot.includes("delete"),ir=Dt&&ot.includes("update");const Sr=ot.includes("changetracking");return Dt&&!(kt||Jt||ir)&&(kt=Jt=ir=!0),{supportsCalculate:Er(ke,"supportsCalculate",!1),supportsTruncate:Er(ke,"supportsTruncate",!1),supportsValidateSql:Er(ke,"supportsValidateSql",!1),supportsAdd:kt,supportsDelete:Jt,supportsEditing:Dt,supportsChangeTracking:Sr,supportsQuery:ot.includes("query"),supportsQueryAttachments:Er(ke.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Er(ke,"supportsAttachmentsResizing",!1),supportsSync:ot.includes("sync"),supportsUpdate:ir,supportsExceedsLimitStatistics:Er(ke,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(Ne){var ke;const ot=Ne.advancedQueryCapabilities,Dt=Ne.ownershipBasedAccessControlForFeatures,kt=Ne.archivingInfo,Jt=null==(ke=this.url)?void 0:ke.includes("MapServer"),ir=!(0,F.Z)("mapserver-pbf-enabled")&&Jt&&this.version<10.81,Sr=(Ne.supportedQueryFormats||"").split(",").reduce((Zr,Fr)=>{const Vn=Fr.toLowerCase().trim();return Vn&&Zr.add(Vn),Zr},new Set);return{supportsStatistics:Er(ot,"supportsStatistics",Ne.supportsStatistics),supportsPercentileStatistics:Er(ot,"supportsPercentileStatistics",!1),supportsCentroid:Er(ot,"supportsReturningGeometryCentroid",!1),supportsDistance:Er(ot,"supportsQueryWithDistance",!1),supportsDistinct:Er(ot,"supportsDistinct",Ne.supportsAdvancedQueries),supportsExtent:Er(ot,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Er(ot,"supportsReturningGeometryProperties",!1),supportsHavingClause:Er(ot,"supportsHavingClause",!1),supportsOrderBy:Er(ot,"supportsOrderBy",Ne.supportsAdvancedQueries),supportsPagination:Er(ot,"supportsPagination",!1),supportsQuantization:Er(Ne,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Er(Ne,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Er(Ne,"supportsReturningQueryGeometry",!1),supportsResultType:Er(ot,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Er(ot,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Er(ot,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Er(Ne,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Er(ot,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Er(Dt,"allowOthersToQuery",!0),supportsHistoricMoment:Er(kt,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!ir&&Sr.has("pbf"),supportsDisjointSpatialRelationship:Er(ot,"supportsDisjointSpatialRel",!1),supportsCacheHint:Er(ot,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:hr(Ne,"maxRecordCountFactor",void 0),maxRecordCount:hr(Ne,"maxRecordCount",void 0),standardMaxRecordCount:hr(Ne,"standardMaxRecordCount",void 0),tileMaxRecordCount:hr(Ne,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(Ne){const ke=Ne.advancedQueryCapabilities,ot=Er(ke,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Er(ke,"supportsQueryRelatedPagination",!1),supportsCount:ot,supportsOrderBy:ot}}_readEditingCapabilities(Ne){const ke=Ne.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Er(Ne,"allowGeometryUpdates",!0),supportsGlobalId:Er(Ne,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Er(Ne,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Er(Ne,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Er(Ne,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Er(Ne,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Er(ke,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Er(ke,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Er(ke,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Er(ke,"allowOthersToUpdate",!0)}}};(0,T._)([(0,Q.Cb)({readOnly:!0,json:{read:!1}})],Be.prototype,"capabilities",void 0),(0,T._)([(0,me.r)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Be.prototype,"readCapabilities",null),(0,T._)([(0,Q.Cb)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Be.prototype,"charts",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0})],Be.prototype,"createQueryVersion",null),(0,T._)([(0,Q.Cb)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Be.prototype,"copyright",void 0),(0,T._)([(0,Q.Cb)({type:Boolean})],Be.prototype,"datesInUnknownTimezone",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Be.prototype,"displayField",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Be.prototype,"definitionExpression",void 0),(0,T._)([(0,Q.Cb)({types:ae.LB,readOnly:!0})],Be.prototype,"defaultSymbol",void 0),(0,T._)([(0,Q.Cb)({type:ft.n})],Be.prototype,"dynamicDataSource",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0})],Be.prototype,"editFieldsInfo",void 0),(0,T._)([(0,Q.Cb)({type:Boolean})],Be.prototype,"editingEnabled",null),(0,T._)([(0,me.r)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Be.prototype,"readEditingEnabled",null),(0,T._)([(0,me.r)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Be.prototype,"readEditingEnabledFromWebMap",null),(0,T._)([(0,fe.c)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Be.prototype,"writeEditingEnabled",null),(0,T._)([(0,fe.c)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Be.prototype,"writeEditingEnabledToWebMap",null),(0,T._)([(0,Q.Cb)({readOnly:!0})],Be.prototype,"editingInfo",void 0),(0,T._)([(0,me.r)("editingInfo")],Be.prototype,"readEditingInfo",null),(0,T._)([(0,Q.Cb)(Gn.PV)],Be.prototype,"elevationInfo",void 0),(0,T._)([(0,Q.Cb)(gs.d)],Be.prototype,"featureReduction",void 0),(0,T._)([(0,Q.Cb)(nn(Ot({},on.fields),{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:yn}}}}}))],Be.prototype,"fields",void 0),(0,T._)([(0,Q.Cb)(on.fieldsIndex)],Be.prototype,"fieldsIndex",void 0),(0,T._)([(0,Q.Cb)({type:Qi.Z,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Be.prototype,"floorInfo",void 0),(0,T._)([(0,Q.Cb)({type:co,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Be.prototype,"formTemplate",void 0),(0,T._)([(0,Q.Cb)({type:xo.Z,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Be.prototype,"fullExtent",void 0),(0,T._)([(0,Q.Cb)()],Be.prototype,"gdbVersion",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0,type:In,json:{read:{source:"geometryProperties"}}})],Be.prototype,"geometryFieldsInfo",void 0),(0,T._)([(0,Q.Cb)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:or.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:yn,writer(Ne,ke,ot){const Dt=Ne?or.toJSON(Ne):null;Dt&&(0,ee.RB)(ot,Dt,ke)}}}},read:{source:"layerDefinition.geometryType",reader:or.read}}})],Be.prototype,"geometryType",void 0),(0,T._)([(0,Q.Cb)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Be.prototype,"hasM",void 0),(0,T._)([(0,Q.Cb)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Be.prototype,"hasZ",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0,type:Yi.Z})],Be.prototype,"heightModelInfo",void 0),(0,T._)([(0,Q.Cb)({type:Date})],Be.prototype,"historicMoment",void 0),(0,T._)([(0,Q.Cb)(Gn.id)],Be.prototype,"id",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Be.prototype,"infoFor3D",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Be.prototype,"isTable",void 0),(0,T._)([(0,me.r)("service","isTable",["type","geometryType"]),(0,me.r)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Be.prototype,"readIsTable",null),(0,T._)([(0,fe.c)("web-map","isTable")],Be.prototype,"writeIsTable",null),(0,T._)([(0,Q.Cb)(Gn.iR)],Be.prototype,"labelsVisible",void 0),(0,T._)([(0,Q.Cb)({type:[Us.Z],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Ii.r},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Ii.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Be.prototype,"labelingInfo",void 0),(0,T._)([(0,Q.Cb)(Gn.bT)],Be.prototype,"opacity",void 0),(0,T._)([(0,Q.Cb)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],Be.prototype,"layerId",void 0),(0,T._)([(0,Q.Cb)(Gn.rn)],Be.prototype,"legendEnabled",void 0),(0,T._)([(0,Q.Cb)({type:["show","hide"]})],Be.prototype,"listMode",void 0),(0,T._)([(0,Q.Cb)(Gn.rO)],Be.prototype,"minScale",void 0),(0,T._)([(0,me.r)("service","minScale",["minScale","effectiveMinScale"])],Be.prototype,"readMinScale",null),(0,T._)([(0,Q.Cb)(Gn.u1)],Be.prototype,"maxScale",void 0),(0,T._)([(0,me.r)("service","maxScale",["maxScale","effectiveMaxScale"])],Be.prototype,"readMaxScale",null),(0,T._)([(0,Q.Cb)({type:String})],Be.prototype,"globalIdField",void 0),(0,T._)([(0,me.r)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),(0,me.r)("service","globalIdField",["globalIdField","fields"])],Be.prototype,"readGlobalIdFieldFromService",null),(0,T._)([(0,Q.Cb)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:yn}}}}})],Be.prototype,"objectIdField",void 0),(0,T._)([(0,me.r)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),(0,me.r)("service","objectIdField",["objectIdField","fields"])],Be.prototype,"readObjectIdFieldFromService",null),(0,T._)([(0,Q.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Be.prototype,"operationalLayerType",void 0),(0,T._)([(0,Q.Cb)(on.outFields)],Be.prototype,"outFields",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0})],Be.prototype,"parsedUrl",null),(0,T._)([(0,Q.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Be.prototype,"path",void 0),(0,T._)([(0,Q.Cb)(Gn.C_)],Be.prototype,"popupEnabled",void 0),(0,T._)([(0,Q.Cb)({type:ne.Z,json:{name:"popupInfo",write:!0}})],Be.prototype,"popupTemplate",void 0),(0,T._)([(0,Q.Cb)({readOnly:!0})],Be.prototype,"defaultPopupTemplate",null),(0,T._)([(0,Q.Cb)({type:[Tn],readOnly:!0})],Be.prototype,"relationships",void 0),(0,T._)([(0,Q.Cb)({types:Z.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Z.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(Ne,ke,ot)=>({ignoreOrigin:null==ot?void 0:ot.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(Ne,ke,ot)=>({ignoreOrigin:null==ot?void 0:ot.writeLayerSchema})}}})],Be.prototype,"renderer",null),(0,T._)([(0,me.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,me.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Be.prototype,"readRenderer",null),(0,T._)([(0,Q.Cb)()],Be.prototype,"sourceJSON",void 0),(0,T._)([(0,Q.Cb)({type:Boolean})],Be.prototype,"returnM",void 0),(0,T._)([(0,Q.Cb)({type:Boolean})],Be.prototype,"returnZ",void 0),(0,T._)([(0,Q.Cb)(Gn.YI)],Be.prototype,"screenSizePerspectiveEnabled",void 0),(0,T._)([(0,Q.Cb)()],Be.prototype,"source",null),(0,T._)([(0,ue.p)("source")],Be.prototype,"castSource",null),(0,T._)([(0,me.r)("portal-item","source",["featureSet"]),(0,me.r)("web-map","source",["featureSet"])],Be.prototype,"readSource",null),(0,T._)([(0,Q.Cb)({readOnly:!0})],Be.prototype,"serviceDefinitionExpression",void 0),(0,T._)([(0,me.r)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Be.prototype,"readServiceDefinitionExpression",null),(0,T._)([(0,Q.Cb)({type:qn.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Be.prototype,"spatialReference",void 0),(0,T._)([(0,Q.Cb)({type:Number})],Be.prototype,"subtypeCode",void 0),(0,T._)([(0,Q.Cb)({type:[Xi.Z]})],Be.prototype,"templates",void 0),(0,T._)([(0,me.r)("templates",["editFieldsInfo","creatorField","editorField","templates"])],Be.prototype,"readTemplates",null),(0,T._)([(0,Q.Cb)({type:Vs.Z})],Be.prototype,"timeInfo",void 0),(0,T._)([(0,Q.Cb)()],Be.prototype,"title",void 0),(0,T._)([(0,me.r)("service","title",["name"]),(0,me.r)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Be.prototype,"readTitle",null),(0,T._)([(0,me.r)("web-map","title",["layerDefinition.name","title"])],Be.prototype,"readTitleFromWebMap",null),(0,T._)([(0,Q.Cb)({type:String})],Be.prototype,"sublayerTitleMode",void 0),(0,T._)([(0,Q.Cb)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Be.prototype,"trackIdField",void 0),(0,T._)([(0,Q.Cb)({json:{read:!1}})],Be.prototype,"type",void 0),(0,T._)([(0,Q.Cb)({type:String})],Be.prototype,"typeIdField",void 0),(0,T._)([(0,me.r)("service","typeIdField"),(0,me.r)("typeIdField",["layerDefinition.typeIdField"])],Be.prototype,"readTypeIdField",null),(0,T._)([(0,Q.Cb)({type:[Ni.Z]})],Be.prototype,"types",void 0),(0,T._)([(0,me.r)("service","types",["types"]),(0,me.r)("types",["layerDefinition.types"])],Be.prototype,"readTypes",null),(0,T._)([(0,Q.Cb)({readOnly:!0,json:{write:!1}})],Be.prototype,"serverGens",void 0),(0,T._)([(0,Q.Cb)({type:K.Z.ofType(ui),readOnly:!0})],Be.prototype,"indexes",void 0),(0,T._)([(0,Q.Cb)(Gn.HQ)],Be.prototype,"url",null),(0,T._)([(0,fe.c)("url")],Be.prototype,"writeUrl",null),(0,T._)([(0,Q.Cb)({readOnly:!0})],Be.prototype,"userIsAdmin",void 0),(0,T._)([(0,Q.Cb)({json:{origins:{service:{read:!0}},read:!1}})],Be.prototype,"version",void 0),(0,T._)([(0,me.r)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Be.prototype,"readVersion",null),(0,T._)([(0,Q.Cb)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Be.prototype,"visible",void 0),(0,T._)([(0,me.r)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Be.prototype,"readVisible",null),Be=(0,T._)([(0,ve.j)("esri.layers.FeatureLayer")],Be);const nt=(0,Me.d)({types:ae.QT}),Ct=Be},63602:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ee});var x=C(15861),T=C(17626),ne=C(59318),te=(C(29132),C(84792)),oe=C(26584),Y=C(61885),j=C(61996),L=C(47996),B=C(63290),X=C(10699),Z=C(21726),z=C(77712),P=(C(85931),C(8314),C(90912),C(76898)),F=C(2004),$=C(65234);let J=0;const H=B.Z.getLogger("esri.layers.Layer");let de=class extends(Y.Z.EventedMixin((0,j.I)(L.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new F.Z(-180,-90,180,90,$.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+J++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=$.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static fromArcGISServerUrl(ye){return(0,x.Z)(function*(){const le="string"==typeof ye?{url:ye}:ye,ge=yield C.e(4578).then(C.bind(C,24578));try{return yield ge.fromUrl(le)}catch(se){throw H.error("#fromArcGISServerUrl({ url: '"+le.url+"'})","Failed to create layer from arcgis server url",se),se}})()}static fromPortalItem(ye){return(0,x.Z)(function*(){const le="portalItem"in ye?ye:{portalItem:ye},ge=yield C.e(7534).then(C.bind(C,7534));try{return yield ge.fromItem(le)}catch(se){const Q=le&&le.portalItem;throw H.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(Q&&Q.portal&&Q.portal.url||ne.Z.portalUrl)+"', id: '"+(Q&&Q.id||"unset")+"')",se),se}})()}initialize(){this.when().catch(ye=>{var le,ge;(0,X.D_)(ye)||B.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(le=this.title)?le:"no title"}', id: '${null!=(ge=this.id)?ge:"no id"}')`,{error:ye})})}destroy(){if(this.parent){const ye=this,le=this.parent;"layers"in le&&le.layers.includes(ye)?le.layers.remove(ye):"tables"in le&&le.tables.includes(ye)?le.tables.remove(ye):"baseLayers"in le&&le.baseLayers.includes(ye)?le.baseLayers.remove(ye):"baseLayers"in le&&le.referenceLayers.includes(ye)&&le.referenceLayers.remove(ye)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const ye=this.url;return ye?(0,Z.mN)(ye):null}fetchAttributionData(){var ye=this;return(0,x.Z)(function*(){const le=ye.attributionDataUrl;if(ye.hasAttributionData&&le)return(yield(0,te.default)(le,{query:{f:"json"},responseType:"json"})).data;throw new oe.Z("layer:no-attribution-data","Layer does not have attribution data")})()}};(0,T._)([(0,z.Cb)({type:String})],de.prototype,"attributionDataUrl",void 0),(0,T._)([(0,z.Cb)({type:F.Z})],de.prototype,"fullExtent",void 0),(0,T._)([(0,z.Cb)({readOnly:!0})],de.prototype,"hasAttributionData",null),(0,T._)([(0,z.Cb)({type:String})],de.prototype,"id",void 0),(0,T._)([(0,z.Cb)({type:Boolean,nonNullable:!0})],de.prototype,"legendEnabled",void 0),(0,T._)([(0,z.Cb)({type:["show","hide","hide-children"]})],de.prototype,"listMode",void 0),(0,T._)([(0,z.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],de.prototype,"opacity",void 0),(0,T._)([(0,z.Cb)()],de.prototype,"parent",void 0),(0,T._)([(0,z.Cb)({readOnly:!0})],de.prototype,"parsedUrl",null),(0,T._)([(0,z.Cb)({type:Boolean})],de.prototype,"popupEnabled",void 0),(0,T._)([(0,z.Cb)({type:Boolean})],de.prototype,"attributionVisible",void 0),(0,T._)([(0,z.Cb)({type:$.Z})],de.prototype,"spatialReference",void 0),(0,T._)([(0,z.Cb)({type:String})],de.prototype,"title",void 0),(0,T._)([(0,z.Cb)({type:String,readOnly:!0,json:{read:!1}})],de.prototype,"type",void 0),(0,T._)([(0,z.Cb)()],de.prototype,"url",void 0),(0,T._)([(0,z.Cb)({type:Boolean,nonNullable:!0})],de.prototype,"visible",void 0),de=(0,T._)([(0,P.j)("esri.layers.Layer")],de);const ee=de},58141:(ut,Oe,C)=>{"use strict";C.d(Oe,{rk:()=>z,Tj:()=>ae,GI:()=>K,CE:()=>V,Tq:()=>P,Zx:()=>F,Ee:()=>H});var x=C(20414),T=C(23841),ne=C(55494),ie=C(28347);class z{constructor(ee,ye,le){this.strength=ee,this.radius=ye,this.threshold=le,this.type="bloom"}interpolate(ee,ye,le){this.strength=$(ee.strength,ye.strength,le),this.radius=$(ee.radius,ye.radius,le),this.threshold=$(ee.threshold,ye.threshold,le)}clone(){return new z(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:J(this.radius),strength:this.strength,threshold:this.threshold}}}class ae{constructor(ee){this.radius=ee,this.type="blur"}interpolate(ee,ye,le){this.radius=Math.round($(ee.radius,ye.radius,le))}clone(){return new ae(this.radius)}toJSON(){return{type:"blur",radius:J(this.radius)}}}class K{constructor(ee,ye){this.type=ee,this.amount=ye,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(ee,ye,le){this.amount=$(ee.amount,ye.amount,le),this._updateMatrix()}clone(){return new K(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const ee=this._colorMatrix||(0,ne.c)();switch(this.type){case"brightness":this._colorMatrix=((de,ee)=>{const ye=(0,ie.s)(de,ee,0,0,0,0,ee,0,0,0,0,ee,0,0,0,0,1);return(0,ie.t)(ye,ye)})(ee,this.amount);break;case"contrast":this._colorMatrix=((de,ee)=>{const ye=(0,ie.s)(de,ee,0,0,.5-.5*ee,0,ee,0,.5-.5*ee,0,0,ee,.5-.5*ee,0,0,0,1);return(0,ie.t)(ye,ye)})(ee,this.amount);break;case"grayscale":this._colorMatrix=((de,ee)=>{const ye=1-this.amount,le=(0,ie.s)(de,.2126+.7874*ye,.7152-.7152*ye,.0722-.0722*ye,0,.2126-.2126*ye,.7152+.2848*ye,.0722-.0722*ye,0,.2126-.2126*ye,.7152-.7152*ye,.0722+.9278*ye,0,0,0,0,1);return(0,ie.t)(le,le)})(ee);break;case"invert":this._colorMatrix=((de,ee)=>{const ye=1-2*ee,le=(0,ie.s)(de,ye,0,0,ee,0,ye,0,ee,0,0,ye,ee,0,0,0,1);return(0,ie.t)(le,le)})(ee,this.amount);break;case"saturate":this._colorMatrix=((de,ee)=>{const ye=(0,ie.s)(de,.213+.787*ee,.715-.715*ee,.072-.072*ee,0,.213-.213*ee,.715+.285*ee,.072-.072*ee,0,.213-.213*ee,.715-.715*ee,.072+.928*ee,0,0,0,0,1);return(0,ie.t)(ye,ye)})(ee,this.amount);break;case"sepia":this._colorMatrix=((de,ee)=>{const ye=1-this.amount,le=(0,ie.s)(de,.393+.607*ye,.769-.769*ye,.189-.189*ye,0,.349-.349*ye,.686+.314*ye,.168-.168*ye,0,.272-.272*ye,.534-.534*ye,.131+.869*ye,0,0,0,0,1);return(0,ie.t)(le,le)})(ee)}}}class V{constructor(ee,ye,le,ge){this.offsetX=ee,this.offsetY=ye,this.blurRadius=le,this.color=ge,this.type="drop-shadow"}interpolate(ee,ye,le){this.offsetX=$(ee.offsetX,ye.offsetX,le),this.offsetY=$(ee.offsetY,ye.offsetY,le),this.blurRadius=$(ee.blurRadius,ye.blurRadius,le),this.color[0]=Math.round($(ee.color[0],ye.color[0],le)),this.color[1]=Math.round($(ee.color[1],ye.color[1],le)),this.color[2]=Math.round($(ee.color[2],ye.color[2],le)),this.color[3]=$(ee.color[3],ye.color[3],le)}clone(){return new V(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const ee=[...this.color];return ee[3]*=255,{type:"drop-shadow",xoffset:J(this.offsetX),yoffset:J(this.offsetY),blurRadius:J(this.blurRadius),color:ee}}}class P{constructor(ee){this.angle=ee,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(ee,ye,le){this.angle=$(ee.angle,ye.angle,le),this._updateMatrix()}clone(){return new P(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const ee=this._colorMatrix||(0,ne.c)();this._colorMatrix=((de,ee)=>{const ye=Math.sin(ee*Math.PI/180),le=Math.cos(ee*Math.PI/180),ge=(0,ie.s)(de,.213+.787*le-.213*ye,.715-.715*le-.715*ye,.072-.072*le+.928*ye,0,.213-.213*le+.143*ye,.715+.285*le+.14*ye,.072-.072*le-.283*ye,0,.213-.213*le-.787*ye,.715-.715*le+.715*ye,.072+.928*le+.072*ye,0,0,0,0,1);return(0,ie.t)(ge,ge)})(ee,this.angle)}}class F{constructor(ee){this.amount=ee,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(ee,ye,le){this.amount=$(ee.amount,ye.amount,le)}clone(){return new F(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function $(de,ee,ye){return de+(ee-de)*ye}function J(de){return Math.round(1e3*(0,T.Wz)(de))/1e3}function H(de){switch(de.type){case"grayscale":case"sepia":case"invert":return new K(de.type,0);case"saturate":case"brightness":case"contrast":return new K(de.type,1);case"opacity":return new F(1);case"hue-rotate":return new P(0);case"blur":return new ae(0);case"drop-shadow":return new V(0,0,0,[...(0,x.h$)("transparent")]);case"bloom":return new z(0,0,1)}}},71149:(ut,Oe,C)=>{"use strict";C.d(Oe,{rM:()=>B,ij:()=>te,cW:()=>oe});var x=C(26584),T=C(94113),ne=C(29538),ie=C(53390);function te(z,ae,K){try{return function j(z){if(!z||0===z.length)return null;if(function L(z){const ae=z[0];return!!ae&&"scale"in ae}(z)){const ae=[];for(const K of z)ae.push({scale:K.scale,value:B(K.value)});return ae}return B(z)}(z)}catch(P){var V;null==K||null==(V=K.messages)||V.push(P)}return null}function oe(z,ae,K,V){try{const P=function Y(z){const ae=(0,ne.Q)(z);return ae?(0,ie.Cb)(ae)?ae.map(K=>K.toJSON()):ae.map(({scale:K,effects:V})=>({scale:K,value:V.map(P=>P.toJSON())})):null}(z);(0,T.RB)(K,P,ae)}catch(P){V.messages&&V.messages.push(P)}}function B(z){if(!z||!z.length)return"";const ae=[];for(const K of z){let V=[];switch(K.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":V=[X(K,"amount")];break;case"blur":V=[X(K,"radius","pt")];break;case"hue-rotate":V=[X(K,"angle","deg")];break;case"drop-shadow":V=[X(K,"xoffset","pt"),X(K,"yoffset","pt"),X(K,"blurRadius","pt"),Z(K,"color")];break;case"bloom":V=[X(K,"strength"),X(K,"radius","pt"),X(K,"threshold")]}const P=`${K.type}(${V.filter(Boolean).join(" ")})`;(0,ne.Q)(P),ae.push(P)}return ae.join(" ")}function X(z,ae,K){if(null==z[ae])throw new x.Z("effect:missing-parameter",`Missing parameter '${ae}' in ${z.type} effect`,{effect:z});return K?z[ae]+K:""+z[ae]}function Z(z,ae){if(null==z[ae])throw new x.Z("effect:missing-parameter",`Missing parameter '${ae}' in ${z.type} effect`,{effect:z});const K=z[ae];return`rgba(${K[0]||0}, ${K[1]||0}, ${K[2]||0}, ${K[3]/255||0})`}},29538:(ut,Oe,C)=>{"use strict";C.d(Oe,{Q:()=>L});var oe,x=C(20414),T=C(26584),ne=C(58141),te=(C(1719),C(53390)),j={exports:{}};function L(he){if(!he||0===he.length)return null;if("string"==typeof he){const xe=B(he);return xe&&0!==xe.length?xe:null}const De=he.map(xe=>{if(!Number.isFinite(xe.scale)||xe.scale<=0)throw new T.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:xe});return{scale:xe.scale,effects:B(xe.value)}});De.sort((xe,Pe)=>Pe.effects.length-xe.effects.length);for(let xe=0;xe<De.length-1;xe++){if(!(0,te.AS)(De[xe].effects,De[xe+1].effects))throw new T.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:De[xe].effects,b:De[xe+1].effects});(0,te.uF)(De[xe].effects,De[xe+1].effects)}return De.sort((xe,Pe)=>Pe.scale-xe.scale),De}function B(he){let De;if(!he)return[];try{De=j.exports.parse(he)}catch(xe){throw new T.Z("effect:invalid-syntax","Invalid effect syntax",{value:he,error:xe})}return De.map(xe=>function X(he){try{switch(he.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function Z(he){let De=1;return F(he.parameters,1),1===he.parameters.length&&(De=se(he.parameters[0])),new ne.GI(he.name,De)}(he);case"opacity":return function z(he){let De=1;return F(he.parameters,1),1===he.parameters.length&&(De=se(he.parameters[0])),new ne.Zx(De)}(he);case"hue-rotate":return function ae(he){let De=0;return F(he.parameters,1),1===he.parameters.length&&(De=function pe(he){return function ye(he){if("quantity"!==he.type||!(0===he.value&&null===he.unit||he.unit&&null!=ee[he.unit]))throw new T.Z("effect:type-error",`Expected <angle>, Actual: ${$(he)}`,{term:he})}(he),he.value*ee[he.unit]||0}(he.parameters[0])),new ne.Tq(De)}(he);case"blur":return function K(he){let De=0;return F(he.parameters,1),1===he.parameters.length&&(De=ue(he.parameters[0]),J(De,he.parameters[0])),new ne.Tj(De)}(he);case"drop-shadow":return function V(he){const De=[];let xe=null;for(const Pe of he.parameters)if("color"===Pe.type){if(De.length&&Object.freeze(De),xe)throw new T.Z("effect:type-error","Accepts only one color",{});xe=me(Pe)}else{const je=ue(Pe);if(Object.isFrozen(De))throw new T.Z("effect:type-error","<length> parameters not consecutive",{lengths:De});De.push(je),3===De.length&&J(je,Pe)}if(De.length<2||De.length>3)throw new T.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${De.length}}`,{lengths:De});return new ne.CE(De[0],De[1],De[2]||0,xe||ve("black"))}(he);case"bloom":return function P(he){let De=1,xe=0,Pe=0;return F(he.parameters,3),he.parameters[0]&&(De=se(he.parameters[0])),he.parameters[1]&&(xe=ue(he.parameters[1]),J(xe,he.parameters[1])),he.parameters[2]&&(Pe=se(he.parameters[2])),new ne.rk(De,xe,Pe)}(he)}}catch(De){throw De.details.filter=he,De}throw new T.Z("effect:unknown-effect",`Effect '${he.name}' is not supported`,{effect:he})}(xe))}function F(he,De){if(he.length>De)throw new T.Z("effect:type-error",`Function supports up to ${De} parameters, Actual: ${he.length}`,{parameters:he})}function $(he){if("color"===he.type)return"<color>";if(he.unit){if(le[he.unit])return"<length>";if(ee[he.unit])return"<angle>";if("%"===he.unit)return"<percentage>"}return"<double>"}function J(he,De){if(he<0)throw new T.Z("effect:type-error",`Negative values are not allowed, Actual: ${he}`,{term:De})}(oe=j).exports&&(oe.exports=function(){function De(je,rt,Le,Ce){var Te=Error.call(this,je);return Object.setPrototypeOf&&Object.setPrototypeOf(Te,De.prototype),Te.expected=rt,Te.found=Le,Te.location=Ce,Te.name="SyntaxError",Te}function xe(je,rt,Le){return Le=Le||" ",je.length>rt?je:je+(Le+=Le.repeat(rt-=je.length)).slice(0,rt)}return function he(je,rt){function Le(){this.constructor=je}Le.prototype=rt.prototype,je.prototype=new Le}(De,Error),De.prototype.format=function(je){var rt="Error: "+this.message;if(this.location){var Le,Ce=null;for(Le=0;Le<je.length;Le++)if(je[Le].source===this.location.source){Ce=je[Le].text.split(/\r\n|\n|\r/g);break}var Te=this.location.start,Ye=this.location.source+":"+Te.line+":"+Te.column;if(Ce){var ct=this.location.end,Ae=xe("",Te.line.toString().length),Qe=Ce[Te.line-1],Je=Te.line===ct.line?ct.column:Qe.length+1;rt+="\n --\x3e "+Ye+"\n"+Ae+" |\n"+Te.line+" | "+Qe+"\n"+Ae+" | "+xe("",Te.column-1)+xe("",Je-Te.column,"^")}else rt+="\n at "+Ye}return rt},De.buildMessage=function(je,rt){var Le={literal:function(Je){return'"'+Te(Je.text)+'"'},class:function(Je){var re=Je.parts.map(function(Ee){return Array.isArray(Ee)?Ye(Ee[0])+"-"+Ye(Ee[1]):Ye(Ee)});return"["+(Je.inverted?"^":"")+re+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(Je){return Je.description}};function Ce(Je){return Je.charCodeAt(0).toString(16).toUpperCase()}function Te(Je){return Je.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(re){return"\\x0"+Ce(re)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(re){return"\\x"+Ce(re)})}function Ye(Je){return Je.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(re){return"\\x0"+Ce(re)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(re){return"\\x"+Ce(re)})}function ct(Je){return Le[Je.type](Je)}return"Expected "+function Ae(Je){var re,Ee,$e=Je.map(ct);if($e.sort(),$e.length>0){for(re=1,Ee=1;re<$e.length;re++)$e[re-1]!==$e[re]&&($e[Ee]=$e[re],Ee++);$e.length=Ee}switch($e.length){case 1:return $e[0];case 2:return $e[0]+" or "+$e[1];default:return $e.slice(0,-1).join(", ")+", or "+$e[$e.length-1]}}(je)+" but "+function Qe(Je){return Je?'"'+Te(Je)+'"':"end of input"}(rt)+" found."},{SyntaxError:De,parse:function Pe(je,rt){var Le,Ce={},Te=(rt=void 0!==rt?rt:{}).grammarSource,Ye={start:In},ct=In,yr=/^[ \t\n\r]/,gr=/^[a-z\-]/,_t=/^[0-9a-fA-F]/,$t=/^[+\-]/,Ht=/^[0-9]/,er=Ni("none"),lr=Bn("none",!1),fr=Bn(")",!1),ht=Bn(",",!1),St=Ni("whitespace"),Nt=gs([" ","\t","\n","\r"],!1,!1),Wt=Ni("function"),Qt=Bn("(",!1),Kt=Ni("identifier"),Ze=gs([["a","z"],"-"],!1,!1),st=Ni("percentage"),Ge=Bn("%",!1),Xe=Ni("length"),He=Bn("px",!1),Ue=Bn("cm",!1),it=Bn("mm",!1),wt=Bn("in",!1),nr=Bn("pt",!1),wr=Bn("pc",!1),Dr=Ni("angle"),kr=Bn("deg",!1),Wr=Bn("rad",!1),cn=Bn("grad",!1),Kn=Bn("turn",!1),$i=Ni("number"),si=Ni("color"),co=Bn("#",!1),xo=gs([["0","9"],["a","f"],["A","F"]],!1,!1),Yi=gs(["+","-"],!1,!1),qn=gs([["0","9"]],!1,!1),mi=Bn(".",!1),Fn=Bn("e",!1),qt=0,Or=0,Un=[{line:1,column:1}],ai=0,Gn=[],Kr=0;if("startRule"in rt){if(!(rt.startRule in Ye))throw new Error("Can't start parsing from rule \""+rt.startRule+'".');ct=Ye[rt.startRule]}function ui(){return je.substring(Or,qt)}function Bn(Et,jt){return{type:"literal",text:Et,ignoreCase:jt}}function gs(Et,jt,zt){return{type:"class",parts:Et,inverted:jt,ignoreCase:zt}}function Ni(Et){return{type:"other",description:Et}}function ho(Et){var jt,zt=Un[Et];if(zt)return zt;for(jt=Et-1;!Un[jt];)jt--;for(zt={line:(zt=Un[jt]).line,column:zt.column};jt<Et;)10===je.charCodeAt(jt)?(zt.line++,zt.column=1):zt.column++,jt++;return Un[Et]=zt,zt}function ln(Et){qt<ai||(qt>ai&&(ai=qt,Gn=[]),Gn.push(Et))}function In(){var Et;return(Et=function Us(){var Et,jt;return Kr++,Et=qt,Xr(),"none"===je.substr(qt,4)?(jt="none",qt+=4):(jt=Ce,0===Kr&&ln(lr)),jt!==Ce?(Xr(),Or=Et,Et=[]):(qt=Et,Et=Ce),Kr--,Et===Ce&&0===Kr&&ln(er),Et}())===Ce&&(Et=function Ii(){var Et,jt;if(Et=[],(jt=Qi())!==Ce)for(;jt!==Ce;)Et.push(jt),jt=Qi();else Et=Ce;return Et}()),Et}function Qi(){var Et,jt,zt,mr;return Et=qt,Xr(),(jt=function Tn(){var Et,jt,zt;return Kr++,Et=qt,(jt=Vs())!==Ce?(40===je.charCodeAt(qt)?(zt="(",qt++):(zt=Ce,0===Kr&&ln(Qt)),zt!==Ce?(Or=Et,Et=jt):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Kr--,Et===Ce&&(jt=Ce,0===Kr&&ln(Wt)),Et}())!==Ce?(Xr(),(zt=function jn(){var Et,jt,zt,mr,Er,hr,on,yn;if(Et=qt,(jt=Qn())!==Ce){for(zt=[],mr=qt,Er=Xr(),44===je.charCodeAt(qt)?(hr=",",qt++):(hr=Ce,0===Kr&&ln(ht)),hr===Ce&&(hr=null),on=Xr(),(yn=Qn())!==Ce?mr=Er=[Er,hr,on,yn]:(qt=mr,mr=Ce);mr!==Ce;)zt.push(mr),mr=qt,Er=Xr(),44===je.charCodeAt(qt)?(hr=",",qt++):(hr=Ce,0===Kr&&ln(ht)),hr===Ce&&(hr=null),on=Xr(),(yn=Qn())!==Ce?mr=Er=[Er,hr,on,yn]:(qt=mr,mr=Ce);Or=Et,Et=function(Et,jt){return jt.length>0?function or(Et,jt,zt){return[Et].concat(function pr(Et,jt){return Et.map(function(zt){return zt[jt]})}(jt,zt))}(Et,jt,3):[Et]}(jt,zt)}else qt=Et,Et=Ce;return Et}())===Ce&&(zt=null),Xr(),41===je.charCodeAt(qt)?(mr=")",qt++):(mr=Ce,0===Kr&&ln(fr)),mr!==Ce?(Xr(),Or=Et,Et=function(Et,jt){return{type:"function",name:Et,parameters:jt||[]}}(jt,zt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et}function Qn(){var Et,jt;return Et=qt,(jt=function ft(){var Et,jt,zt;return Kr++,Et=qt,Xr(),(jt=tr())!==Ce?(37===je.charCodeAt(qt)?(zt="%",qt++):(zt=Ce,0===Kr&&ln(Ge)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"%"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Kr--,Et===Ce&&0===Kr&&ln(st),Et}())===Ce&&(jt=function xt(){var Et,jt,zt;return Kr++,Et=qt,Xr(),(jt=tr())!==Ce?("px"===je.substr(qt,2)?(zt="px",qt+=2):(zt=Ce,0===Kr&&ln(He)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"px"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et===Ce&&(Et=qt,Xr(),(jt=tr())!==Ce?("cm"===je.substr(qt,2)?(zt="cm",qt+=2):(zt=Ce,0===Kr&&ln(Ue)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"cm"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et===Ce&&(Et=qt,Xr(),(jt=tr())!==Ce?("mm"===je.substr(qt,2)?(zt="mm",qt+=2):(zt=Ce,0===Kr&&ln(it)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"mm"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et===Ce&&(Et=qt,Xr(),(jt=tr())!==Ce?("in"===je.substr(qt,2)?(zt="in",qt+=2):(zt=Ce,0===Kr&&ln(wt)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"in"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et===Ce&&(Et=qt,Xr(),(jt=tr())!==Ce?("pt"===je.substr(qt,2)?(zt="pt",qt+=2):(zt=Ce,0===Kr&&ln(nr)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"pt"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et===Ce&&(Et=qt,Xr(),(jt=tr())!==Ce?("pc"===je.substr(qt,2)?(zt="pc",qt+=2):(zt=Ce,0===Kr&&ln(wr)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"pc"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce)))))),Kr--,Et===Ce&&0===Kr&&ln(Xe),Et}())===Ce&&(jt=function vt(){var Et,jt,zt;return Kr++,Et=qt,(jt=tr())!==Ce?("deg"===je.substr(qt,3)?(zt="deg",qt+=3):(zt=Ce,0===Kr&&ln(kr)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"deg"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et===Ce&&(Et=qt,(jt=tr())!==Ce?("rad"===je.substr(qt,3)?(zt="rad",qt+=3):(zt=Ce,0===Kr&&ln(Wr)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"rad"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et===Ce&&(Et=qt,(jt=tr())!==Ce?("grad"===je.substr(qt,4)?(zt="grad",qt+=4):(zt=Ce,0===Kr&&ln(cn)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"grad"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce),Et===Ce&&(Et=qt,(jt=tr())!==Ce?("turn"===je.substr(qt,4)?(zt="turn",qt+=4):(zt=Ce,0===Kr&&ln(Kn)),zt!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:"turn"}}(jt)):(qt=Et,Et=Ce)):(qt=Et,Et=Ce)))),Kr--,Et===Ce&&(jt=Ce,0===Kr&&ln(Dr)),Et}())===Ce&&(jt=function Lt(){var Et,jt;return Kr++,Et=qt,Xr(),(jt=tr())!==Ce?(Or=Et,Et=function(Et){return{value:Et,unit:null}}(jt)):(qt=Et,Et=Ce),Kr--,Et===Ce&&0===Kr&&ln($i),Et}()),jt!==Ce&&(Or=Et,jt=function(Et){return{type:"quantity",value:Et.value,unit:Et.unit}}(jt)),(Et=jt)===Ce&&(Et=qt,(jt=function ar(){var Et,jt,zt,mr;if(Kr++,Et=qt,35===je.charCodeAt(qt)?(jt="#",qt++):(jt=Ce,0===Kr&&ln(co)),jt!==Ce){if(zt=[],_t.test(je.charAt(qt))?(mr=je.charAt(qt),qt++):(mr=Ce,0===Kr&&ln(xo)),mr!==Ce)for(;mr!==Ce;)zt.push(mr),_t.test(je.charAt(qt))?(mr=je.charAt(qt),qt++):(mr=Ce,0===Kr&&ln(xo));else zt=Ce;zt!==Ce?(Or=Et,Et={type:"hex",value:ui()}):(qt=Et,Et=Ce)}else qt=Et,Et=Ce;return Et===Ce&&(Et=qt,(jt=Qi())!==Ce&&(Or=Et,jt=function(Et){return{type:"function",value:Et}}(jt)),(Et=jt)===Ce&&(Et=qt,(jt=Vs())!==Ce&&(Or=Et,jt={type:"named",value:ui()}),Et=jt)),Kr--,Et===Ce&&(jt=Ce,0===Kr&&ln(si)),Et}())!==Ce&&(Or=Et,jt=function(Et){return{type:"color",colorType:Et.type,value:Et.value}}(jt)),Et=jt),Et}function Xr(){var Et,jt;for(Kr++,Et=[],yr.test(je.charAt(qt))?(jt=je.charAt(qt),qt++):(jt=Ce,0===Kr&&ln(Nt));jt!==Ce;)Et.push(jt),yr.test(je.charAt(qt))?(jt=je.charAt(qt),qt++):(jt=Ce,0===Kr&&ln(Nt));return Kr--,jt=Ce,0===Kr&&ln(St),Et}function Vs(){var Et,jt,zt;if(Kr++,Et=qt,jt=[],gr.test(je.charAt(qt))?(zt=je.charAt(qt),qt++):(zt=Ce,0===Kr&&ln(Ze)),zt!==Ce)for(;zt!==Ce;)jt.push(zt),gr.test(je.charAt(qt))?(zt=je.charAt(qt),qt++):(zt=Ce,0===Kr&&ln(Ze));else jt=Ce;return jt!==Ce&&(Or=Et,jt=ui()),Kr--,(Et=jt)===Ce&&(jt=Ce,0===Kr&&ln(Kt)),Et}function tr(){var Et,jt,zt,mr,Er,hr,on;for(Et=qt,$t.test(je.charAt(qt))?(je.charAt(qt),qt++):0===Kr&&ln(Yi),jt=qt,zt=[],Ht.test(je.charAt(qt))?(mr=je.charAt(qt),qt++):(mr=Ce,0===Kr&&ln(qn));mr!==Ce;)zt.push(mr),Ht.test(je.charAt(qt))?(mr=je.charAt(qt),qt++):(mr=Ce,0===Kr&&ln(qn));if(46===je.charCodeAt(qt)?(mr=".",qt++):(mr=Ce,0===Kr&&ln(mi)),mr!==Ce){if(Er=[],Ht.test(je.charAt(qt))?(hr=je.charAt(qt),qt++):(hr=Ce,0===Kr&&ln(qn)),hr!==Ce)for(;hr!==Ce;)Er.push(hr),Ht.test(je.charAt(qt))?(hr=je.charAt(qt),qt++):(hr=Ce,0===Kr&&ln(qn));else Er=Ce;Er!==Ce?jt=zt=[zt,mr,Er]:(qt=jt,jt=Ce)}else qt=jt,jt=Ce;if(jt===Ce)if(jt=[],Ht.test(je.charAt(qt))?(zt=je.charAt(qt),qt++):(zt=Ce,0===Kr&&ln(qn)),zt!==Ce)for(;zt!==Ce;)jt.push(zt),Ht.test(je.charAt(qt))?(zt=je.charAt(qt),qt++):(zt=Ce,0===Kr&&ln(qn));else jt=Ce;if(jt!==Ce){if(zt=qt,101===je.charCodeAt(qt)?(mr="e",qt++):(mr=Ce,0===Kr&&ln(Fn)),mr!==Ce){if($t.test(je.charAt(qt))?(Er=je.charAt(qt),qt++):(Er=Ce,0===Kr&&ln(Yi)),Er===Ce&&(Er=null),hr=[],Ht.test(je.charAt(qt))?(on=je.charAt(qt),qt++):(on=Ce,0===Kr&&ln(qn)),on!==Ce)for(;on!==Ce;)hr.push(on),Ht.test(je.charAt(qt))?(on=je.charAt(qt),qt++):(on=Ce,0===Kr&&ln(qn));else hr=Ce;hr!==Ce?zt=mr=[mr,Er,hr]:(qt=zt,zt=Ce)}else qt=zt,zt=Ce;zt===Ce&&(zt=null),Or=Et,Et=parseFloat(ui())}else qt=Et,Et=Ce;return Et}if((Le=ct())!==Ce&&qt===je.length)return Le;throw Le!==Ce&&qt<je.length&&ln({type:"end"}),function fo(Et,jt,zt){return new De(De.buildMessage(Et,jt),Et,jt,zt)}(Gn,ai<je.length?je.charAt(ai):null,function Oo(Et,jt){var zt=ho(Et),mr=ho(jt);return{source:Te,start:{offset:Et,line:zt.line,column:zt.column},end:{offset:jt,line:mr.line,column:mr.column}}}(ai,ai<je.length?ai+1:ai))}}}());const ee={deg:1,grad:.9,rad:180/Math.PI,turn:360},le={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function se(he){!function de(he){if("quantity"!==he.type||null!==he.unit&&"%"!==he.unit)throw new T.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${$(he)}`,{term:he})}(he);const De=he.value;return J(De,he),"%"===he.unit?.01*De:De}function ue(he){return function ge(he){if("quantity"!==he.type||!(0===he.value&&null===he.unit||he.unit&&null!=le[he.unit]))throw new T.Z("effect:type-error",`Expected <length>, Actual: ${$(he)}`,{term:he})}(he),he.value*le[he.unit]||0}function me(he){switch(he.colorType){case"hex":return(0,x.rW)(he.value);case"named":return ve(he.value);case"function":return function ce(he){if(F(he.parameters,4),fe.test(he.name))return[se(he.parameters[0]),se(he.parameters[1]),se(he.parameters[2]),he.parameters[3]?se(he.parameters[3]):1];if(Me.test(he.name))return(0,x.B7)(function Q(he){return function H(he){if("quantity"!==he.type||null!==he.unit)throw new T.Z("effect:type-error",`Expected <double>, Actual: ${$(he)}`,{term:he})}(he),J(he.value,he),he.value}(he.parameters[0]),se(he.parameters[1]),se(he.parameters[2]),he.parameters[3]?se(he.parameters[3]):1);throw new T.Z("effect:syntax-error",`Invalid color function '${he.name}'`,{colorFunction:he})}(he.value)}}function ve(he){if(!(0,x.St)(he))throw new T.Z("effect:unknown-color",`color '${he}' isn't valid`,{namedColor:he});return(0,x.VL)(he)}const fe=/^rgba?/i,Me=/^hsla?/i},53390:(ut,Oe,C)=>{"use strict";C.d(Oe,{AS:()=>T,Cb:()=>ie,uF:()=>ne});var x=C(58141);function T(te,oe){const Y=te.length>oe.length?te:oe;return(te.length>oe.length?oe:te).every((j,L)=>j.type===Y[L].type)}function ne(te,oe){const Y=te.length>oe.length?te:oe,j=te.length>oe.length?oe:te;for(let L=j.length;L<Y.length;L++)j.push((0,x.Ee)(Y[L]))}function ie(te){const oe=te[0];return!!oe&&"type"in oe}},66385:(ut,Oe,C)=>{"use strict";C.d(Oe,{nd:()=>ie,ZP:()=>T,S6:()=>ne});var x=C(62208);class T{constructor(oe=null,Y={},j,L){this.geometry=oe,this.attributes=Y,this.centroid=j,this.objectId=L,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const oe=new T(this.geometry,this.attributes,this.centroid,this.objectId);return oe.displayId=this.displayId,oe.geohashX=this.geohashX,oe.geohashY=this.geohashY,oe}}function ne(te){return!((0,x.Wi)(te.geometry)||!te.geometry.coords||!te.geometry.coords.length)}class ie extends T{}},95786:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>x});class x{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const ne=new x;return ne.objectIdFieldName=this.objectIdFieldName,ne.globalIdFieldName=this.globalIdFieldName,ne.geohashFieldName=this.geohashFieldName,ne.geometryProperties=this.geometryProperties,ne.geometryType=this.geometryType,ne.spatialReference=this.spatialReference,ne.hasZ=this.hasZ,ne.hasM=this.hasM,ne.features=this.features,ne.fields=this.fields,ne.transform=this.transform,ne.exceededTransferLimit=this.exceededTransferLimit,ne.uniqueIdField=this.uniqueIdField,ne.queryGeometry=this.queryGeometry,ne.queryGeometryType=this.queryGeometryType,ne}}},88071:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>x});class x{constructor(ne=[],ie=[],te=!1){this.lengths=null!=ne?ne:[],this.coords=null!=ie?ie:[],this.hasIndeterminateRingOrder=te}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((ne,ie)=>ne+ie)}forEachVertex(ne){let ie=0;this.lengths.length||ne(this.coords[0],this.coords[1]);for(let te=0;te<this.lengths.length;te++){const oe=this.lengths[te];for(let Y=0;Y<oe;Y++)ne(this.coords[2*(Y+ie)],this.coords[2*(Y+ie)+1]);ie+=oe}}clone(ne){return ne?(ne.set(this.coords),new x(this.lengths.slice(),ne,this.hasIndeterminateRingOrder)):new x(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},82054:(ut,Oe,C)=>{"use strict";C.d(Oe,{XA:()=>Qe,h_:()=>yt,Yn:()=>Je,GH:()=>$e,E7:()=>re,ks:()=>Ye,Uy:()=>Te,u0:()=>je,EI:()=>Ee,cn:()=>bt,di:()=>tt,Iv:()=>Me,fQ:()=>J,eG:()=>Le,J6:()=>xe,oB:()=>fr,zj:()=>Vt,$:()=>vr,lz:()=>er,RZ:()=>Mt,Nh:()=>Pt,Jd:()=>V,IN:()=>P,hY:()=>_t,lM:()=>at,$g:()=>gr});var x=C(26584),T=C(63290),ne=C(62208),ie=C(91179),te=C(66385),oe=C(95786),Y=C(88071);function j(ht,St){return ht?St?4:3:St?3:2}const L=T.Z.getLogger("esri.tasks.support.optimizedFeatureSet"),B={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},X=(ht,St,Nt,Wt,Qt,Kt)=>{ht[Nt]=Qt,ht[Nt+1]=Kt},Z=(ht,St,Nt,Wt,Qt,Kt)=>{ht[Nt]=Qt,ht[Nt+1]=Kt,ht[Nt+2]=St[Wt+2]},z=(ht,St,Nt,Wt,Qt,Kt)=>{ht[Nt]=Qt,ht[Nt+1]=Kt,ht[Nt+2]=St[Wt+3]},ae=(ht,St,Nt,Wt,Qt,Kt)=>{ht[Nt]=Qt,ht[Nt+1]=Kt,ht[Nt+2]=St[Wt+2],ht[Nt+3]=St[Wt+3]};function K(ht,St,Nt,Wt){if(ht){if(Nt)return St&&Wt?ae:Z;if(St&&Wt)return z}else if(St&&Wt)return Z;return X}function V({scale:ht,translate:St},Nt){return Math.round((Nt-St[0])/ht[0])}function P({scale:ht,translate:St},Nt){return Math.round((St[1]-Nt)/ht[1])}function F({scale:ht,translate:St},Nt){return Nt*ht[0]+St[0]}function $({scale:ht,translate:St},Nt){return St[1]-Nt*ht[1]}function J(ht,St,Nt){return ht?St?Nt?se(ht):ee(ht):Nt?le(ht):H(ht):null}function H(ht){const St=ht.coords;return{x:St[0],y:St[1]}}function de(ht,St){return ht.coords[0]=St.x,ht.coords[1]=St.y,ht}function ee(ht){const St=ht.coords;return{x:St[0],y:St[1],z:St[2]}}function ye(ht,St){return ht.coords[0]=St.x,ht.coords[1]=St.y,ht.coords[2]=St.z,ht}function le(ht){const St=ht.coords;return{x:St[0],y:St[1],m:St[2]}}function ge(ht,St){return ht.coords[0]=St.x,ht.coords[1]=St.y,ht.coords[2]=St.m,ht}function se(ht){const St=ht.coords;return{x:St[0],y:St[1],z:St[2],m:St[3]}}function Q(ht,St){return ht.coords[0]=St.x,ht.coords[1]=St.y,ht.coords[2]=St.z,ht.coords[3]=St.m,ht}function ue(ht,St){return ht&&St?Q:ht?ye:St?ge:de}function me(ht,St,Nt,Wt,Qt){const Kt=ue(Nt,Wt);for(const Ze of St){const{geometry:st,attributes:Ge}=Ze;let Xe;st&&(Xe=Kt(new Y.Z,st)),ht.push(new te.ZP(Xe,Ge,null,Ge[Qt]))}return ht}function Me(ht,St,Nt){if((0,ne.Wi)(ht))return null;const Wt=j(St,Nt),Qt=[];for(let Kt=0;Kt<ht.coords.length;Kt+=Wt){const Ze=[];for(let st=0;st<Wt;st++)Ze.push(ht.coords[Kt+st]);Qt.push(Ze)}return St?Nt?{points:Qt,hasZ:St,hasM:Nt}:{points:Qt,hasZ:St}:Nt?{points:Qt,hasM:Nt}:{points:Qt}}function ce(ht,St,Nt,Wt,Qt){const Kt=j(Nt,Wt);for(const Ze of St){const st=Ze.geometry,Ge=Ze.attributes;let Xe;st&&(Xe=he(new Y.Z,st,Kt)),ht.push(new te.ZP(Xe,Ge,null,Ge[Qt]))}return ht}function he(ht,St,Nt=j(St.hasZ,St.hasM)){ht.lengths[0]=St.points.length;const Wt=ht.coords;let Qt=0;for(const Kt of St.points)for(let Ze=0;Ze<Nt;Ze++)Wt[Qt++]=Kt[Ze];return ht}function xe(ht,St,Nt){if(!ht)return null;const Wt=j(St,Nt),{coords:Qt,lengths:Kt}=ht,Ze=[];let st=0;for(const Ge of Kt){const Xe=[];for(let He=0;He<Ge;He++){const Ue=[];for(let it=0;it<Wt;it++)Ue.push(Qt[st++]);Xe.push(Ue)}Ze.push(Xe)}return St?Nt?{paths:Ze,hasZ:St,hasM:Nt}:{paths:Ze,hasZ:St}:Nt?{paths:Ze,hasM:Nt}:{paths:Ze}}function Pe(ht,St,Nt,Wt,Qt){const Kt=j(Nt,Wt);for(const Ze of St){const st=Ze.geometry,Ge=Ze.attributes;let Xe;st&&(Xe=je(new Y.Z,st,Kt)),ht.push(new te.ZP(Xe,Ge,null,Ge[Qt]))}return ht}function je(ht,St,Nt=j(St.hasZ,St.hasM)){const{lengths:Wt,coords:Qt}=ht;let Kt=0;for(const Ze of St.paths){for(const st of Ze)for(let Ge=0;Ge<Nt;Ge++)Qt[Kt++]=st[Ge];Wt.push(Ze.length)}return ht}function Le(ht,St,Nt){if(!ht)return null;const Wt=j(St,Nt),{coords:Qt,lengths:Kt}=ht,Ze=[];let st=0;for(const Ge of Kt){const Xe=[];for(let He=0;He<Ge;He++){const Ue=[];for(let it=0;it<Wt;it++)Ue.push(Qt[st++]);Xe.push(Ue)}Ze.push(Xe)}return St?Nt?{rings:Ze,hasZ:St,hasM:Nt}:{rings:Ze,hasZ:St}:Nt?{rings:Ze,hasM:Nt}:{rings:Ze}}function Ce(ht,St,Nt,Wt,Qt){for(const Kt of St){const Ze=Kt.geometry,st=Kt.centroid,Ge=Kt.attributes;let Xe;Ze&&(Xe=Te(new Y.Z,Ze,Nt,Wt)),(0,ne.pC)(st)?ht.push(new te.ZP(Xe,Ge,de(new Y.Z,st),Ge[Qt])):ht.push(new te.ZP(Xe,Ge,null,Ge[Qt]))}return ht}function Te(ht,St,Nt=St.hasZ,Wt=St.hasM){return Ye(ht,St.rings,Nt,Wt),ht}function Ye(ht,St,Nt,Wt){const Qt=j(Nt,Wt),{lengths:Kt,coords:Ze}=ht;let st=0;Kt.length=Ze.length=0;for(const Ge of St){for(const Xe of Ge)for(let He=0;He<Qt;He++)Ze[st++]=Xe[He];Kt.push(Ge.length)}return ht}const ct=[],Ae=[];function Qe(ht,St,Nt,Wt,Qt){ct[0]=ht;const[Kt]=Je(Ae,ct,St,Nt,Wt,Qt);return ct.length=Ae.length=0,Kt}function Je(ht,St,Nt,Wt,Qt,Kt){if(ht.length=0,!Nt){for(const Ze of St)ht.push(new te.ZP(null,Ze.attributes,null,Ze.attributes[Kt]));return ht}switch(Nt){case"esriGeometryPoint":return me(ht,St,Wt,Qt,Kt);case"esriGeometryMultipoint":return ce(ht,St,Wt,Qt,Kt);case"esriGeometryPolyline":return Pe(ht,St,Wt,Qt,Kt);case"esriGeometryPolygon":return Ce(ht,St,Wt,Qt,Kt);default:L.error("convertToFeatureSet:unknown-geometry",new x.Z(`Unable to parse unknown geometry type '${Nt}'`)),ht.length=0}return ht}function re(ht,St,Nt,Wt,Qt,Kt){const Ze=ht.length;switch(Nt){case"esriGeometryPoint":me(ht,St,Wt,Qt,Kt);break;case"esriGeometryMultipoint":ce(ht,St,Wt,Qt,Kt);break;case"esriGeometryPolyline":Pe(ht,St,Wt,Qt,Kt);break;case"esriGeometryPolygon":Ce(ht,St,Wt,Qt,Kt);break;default:L.error("convertToFeatureSet:unknown-geometry",new x.Z(`Unable to parse unknown geometry type '${Nt}'`))}for(let st=0;st<St.length;st++)ht[st+Ze].geometryType=Nt,ht[st+Ze].insertAfter=St[st].insertAfter,ht[st+Ze].groupId=St[st].groupId;return ht}function Ee(ht,St,Nt,Wt){Ae[0]=ht,mt(ct,Ae,St,Nt,Wt);const Qt=ct[0];return ct.length=Ae.length=0,Qt}function $e(ht,St,Nt){if((0,ne.Wi)(ht))return null;const Wt=new Y.Z;return"hasZ"in ht&&null==St&&(St=ht.hasZ),"hasM"in ht&&null==Nt&&(Nt=ht.hasM),(0,ie.wp)(ht)?ue(null!=St?St:null!=ht.z,null!=Nt?Nt:null!=ht.m)(Wt,ht):(0,ie.oU)(ht)?Te(Wt,ht,St,Nt):(0,ie.l9)(ht)?je(Wt,ht,j(St,Nt)):(0,ie.aW)(ht)?he(Wt,ht,j(St,Nt)):void L.error("convertFromGeometry:unknown-geometry",new x.Z(`Unable to parse unknown geometry type '${ht}'`))}function tt(ht,St,Nt,Wt){const Qt=ht&&("coords"in ht?ht:ht.geometry);if((0,ne.Wi)(Qt))return null;switch(St){case"esriGeometryPoint":{let Kt=H;return Nt&&Wt?Kt=se:Nt?Kt=ee:Wt&&(Kt=le),Kt(Qt)}case"esriGeometryMultipoint":return Me(Qt,Nt,Wt);case"esriGeometryPolyline":return xe(Qt,Nt,Wt);case"esriGeometryPolygon":return Le(Qt,Nt,Wt);default:return void L.error("convertToGeometry:unknown-geometry",new x.Z(`Unable to parse unknown geometry type '${St}'`))}}function mt(ht,St,Nt,Wt,Qt){if(ht.length=0,(0,ne.Wi)(Nt))return function pt(ht,St){for(const Nt of St)ht.push({attributes:Nt.attributes});return ht}(ht,St);switch(Nt){case"esriGeometryPoint":return function pe(ht,St,Nt,Wt){let Qt=H;Nt&&Wt?Qt=se:Nt?Qt=ee:Wt&&(Qt=le);for(const Kt of St){const{geometry:Ze,attributes:st}=Kt,Ge=(0,ne.pC)(Ze)?Qt(Ze):null;ht.push({attributes:st,geometry:Ge})}return ht}(ht,St,Wt,Qt);case"esriGeometryMultipoint":return function fe(ht,St,Nt,Wt){for(const Qt of St){const{geometry:Kt,attributes:Ze}=Qt;let st;Kt&&(st=Me(Kt,Nt,Wt)),ht.push({attributes:Ze,geometry:st})}return ht}(ht,St,Wt,Qt);case"esriGeometryPolyline":return function De(ht,St,Nt,Wt){for(const Qt of St){const{geometry:Kt,attributes:Ze}=Qt;let st;(0,ne.pC)(Kt)&&(st=xe(Kt,Nt,Wt)),ht.push({attributes:Ze,geometry:st})}return ht}(ht,St,Wt,Qt);case"esriGeometryPolygon":return function rt(ht,St,Nt,Wt){for(const Qt of St){const{geometry:Kt,attributes:Ze,centroid:st}=Qt;let Ge;if((0,ne.pC)(Kt)&&(Ge=Le(Kt,Nt,Wt)),st){const Xe=H(st);ht.push({attributes:Ze,centroid:Xe,geometry:Ge})}else ht.push({attributes:Ze,geometry:Ge})}return ht}(ht,St,Wt,Qt);default:L.error("convertToFeatureSet:unknown-geometry",new x.Z(`Unable to parse unknown geometry type '${Nt}'`))}return ht}function bt(ht){const{objectIdFieldName:St,spatialReference:Nt,transform:Wt,fields:Qt,hasM:Kt,hasZ:Ze,features:st,geometryType:Ge,exceededTransferLimit:Xe,uniqueIdField:He,queryGeometry:Ue,queryGeometryType:it}=ht,wt={features:mt([],st,Ge,Ze,Kt),fields:Qt,geometryType:Ge,objectIdFieldName:St,spatialReference:Nt,uniqueIdField:He,queryGeometry:tt(Ue,it,!1,!1)};return Wt&&(wt.transform=Wt),Xe&&(wt.exceededTransferLimit=Xe),Kt&&(wt.hasM=Kt),Ze&&(wt.hasZ=Ze),wt}function yt(ht,St){const Nt=new oe.Z,{hasM:Wt,hasZ:Qt,features:Kt,objectIdFieldName:Ze,spatialReference:st,geometryType:Ge,exceededTransferLimit:Xe,transform:He,fields:Ue}=ht;return Ue&&(Nt.fields=Ue),Nt.geometryType=Ge,Nt.objectIdFieldName=Ze||St,Nt.spatialReference=st,Nt.objectIdFieldName?(Kt&&Je(Nt.features,Kt,Ge,Qt,Wt,Nt.objectIdFieldName),Xe&&(Nt.exceededTransferLimit=Xe),Wt&&(Nt.hasM=Wt),Qt&&(Nt.hasZ=Qt),He&&(Nt.transform=He),Nt):(L.error(new x.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Nt)}function at(ht){const{transform:St,features:Nt,hasM:Wt,hasZ:Qt}=ht;if(!St)return ht;for(const Kt of Nt)(0,ne.pC)(Kt.geometry)&&gr(Kt.geometry,Kt.geometry,Wt,Qt,St),Kt.centroid&&gr(Kt.centroid,Kt.centroid,Wt,Qt,St);return ht.transform=null,ht}function Mt(ht,St){const{geometryType:Nt,features:Wt,hasM:Qt,hasZ:Kt}=St;if(!ht)return St;for(let Ze=0;Ze<Wt.length;Ze++){const st=Wt[Ze],Ge=st.weakClone();Ge.geometry=new Y.Z,Pt(Ge.geometry,st.geometry,Qt,Kt,Nt,ht),st.centroid&&(Ge.centroid=new Y.Z,Pt(Ge.centroid,st.centroid,Qt,Kt,"esriGeometryPoint",ht)),Wt[Ze]=Ge}return St.transform=ht,St}function Pt(ht,St,Nt,Wt,Qt,Kt,Ze=Nt,st=Wt){if(ht.lengths.length&&(ht.lengths.length=0),ht.coords.length&&(ht.coords.length=0),(0,ne.Wi)(St)||!St.coords.length)return null;const Ge=B[Qt],{coords:Xe,lengths:He}=St,Ue=j(Nt,Wt),it=j(Nt&&Ze,Wt&&st),wt=K(Nt,Wt,Ze,st);if(!He.length)return wt(ht.coords,Xe,0,0,V(Kt,Xe[0]),P(Kt,Xe[1])),ht.lengths.length&&(ht.lengths.length=0),ht.coords.length=Ue,ht;let nr,wr,Dr,kr,Wr=0,cn=0,Kn=cn;for(const $i of He){if($i<Ge)continue;let si=0;cn=Kn,Dr=nr=V(Kt,Xe[Wr]),kr=wr=P(Kt,Xe[Wr+1]),wt(ht.coords,Xe,cn,Wr,Dr,kr),si++,Wr+=Ue,cn+=it;for(let co=1;co<$i;co++,Wr+=Ue)Dr=V(Kt,Xe[Wr]),kr=P(Kt,Xe[Wr+1]),Dr===nr&&kr===wr||(wt(ht.coords,Xe,cn,Wr,Dr-nr,kr-wr),cn+=it,si++,nr=Dr,wr=kr);si>=Ge&&(ht.lengths.push(si),Kn=cn)}return ht.coords.length=Kn,ht.coords.length?ht:null}function Vt(ht,St,Nt,Wt,Qt,Kt,Ze=Nt,st=Wt){if(ht.lengths.length&&(ht.lengths.length=0),ht.coords.length&&(ht.coords.length=0),!St||!St.coords.length)return null;const Ge=B[Qt],{coords:Xe,lengths:He}=St,Ue=j(Nt,Wt),it=j(Nt&&Ze,Wt&&st),wt=K(Nt,Wt,Ze,st);if(!He.length)return wt(ht.coords,Xe,0,0,Xe[0],Xe[1]),ht.lengths.length&&(ht.lengths.length=0),ht.coords.length=Ue,ht;let nr=0;const wr=Kt*Kt;for(const Dr of He){if(Dr<Ge){nr+=Dr*Ue;continue}const kr=ht.coords.length/it,Wr=nr,cn=nr+(Dr-1)*Ue;wt(ht.coords,Xe,ht.coords.length,Wr,Xe[Wr],Xe[Wr+1]),rr(ht.coords,Xe,Ue,wr,wt,Wr,cn),wt(ht.coords,Xe,ht.coords.length,cn,Xe[cn],Xe[cn+1]);const Kn=ht.coords.length/it-kr;Kn>=Ge?ht.lengths.push(Kn):ht.coords.length=kr*it,nr+=Dr*Ue}return ht.coords.length?ht:null}function Zt(ht,St,Nt,Wt){const Qt=ht[St],Kt=ht[St+1],Ge=ht[Wt],Xe=ht[Wt+1];let He=ht[Nt],Ue=ht[Nt+1],it=Ge-He,wt=Xe-Ue;if(0!==it||0!==wt){const nr=((Qt-He)*it+(Kt-Ue)*wt)/(it*it+wt*wt);nr>1?(He=Ge,Ue=Xe):nr>0&&(He+=it*nr,Ue+=wt*nr)}return it=Qt-He,wt=Kt-Ue,it*it+wt*wt}function rr(ht,St,Nt,Wt,Qt,Kt,Ze){let st,Ge=Wt,Xe=0;for(let He=Kt+Nt;He<Ze;He+=Nt)st=Zt(St,He,Kt,Ze),st>Ge&&(Xe=He,Ge=st);Ge>Wt&&(Xe-Kt>Nt&&rr(ht,St,Nt,Wt,Qt,Kt,Xe),Qt(ht,St,ht.length,Xe,St[Xe],St[Xe+1]),Ze-Xe>Nt&&rr(ht,St,Nt,Wt,Qt,Xe,Ze))}function vr(ht,St,Nt,Wt){if((0,ne.Wi)(St)||!St.coords||!St.coords.length)return null;const Qt=j(Nt,Wt);let Kt=Number.POSITIVE_INFINITY,Ze=Number.POSITIVE_INFINITY,st=Number.NEGATIVE_INFINITY,Ge=Number.NEGATIVE_INFINITY;if(St&&St.coords){const Xe=St.coords;for(let He=0;He<Xe.length;He+=Qt){const Ue=Xe[He],it=Xe[He+1];Kt=Math.min(Kt,Ue),st=Math.max(st,Ue),Ze=Math.min(Ze,it),Ge=Math.max(Ge,it)}}return ht[0]=Kt,ht[1]=Ze,ht[2]=st,ht[3]=Ge,ht}function gr(ht,St,Nt,Wt,Qt){const{coords:Kt,lengths:Ze}=St,st=Nt?Wt?ae:Z:Wt?Z:X,Ge=j(Nt,Wt);if(!Kt.length)return ht!==St&&(ht.lengths.length=0,ht.coords.length=0),ht;if(!Ze.length)return st(ht.coords,Kt,0,0,F(Qt,Kt[0]),$(Qt,Kt[1])),ht!==St&&(ht.lengths.length=0,ht.coords.length=Ge),ht;const[Xe,He]=Qt.scale;let Ue=0;for(let it=0;it<Ze.length;it++){const wt=Ze[it];ht.lengths[it]=wt;let nr=F(Qt,Kt[Ue]),wr=$(Qt,Kt[Ue+1]);st(ht.coords,Kt,Ue,Ue,nr,wr),Ue+=Ge;for(let Dr=1;Dr<wt;Dr++,Ue+=Ge)nr+=Kt[Ue]*Xe,wr-=Kt[Ue+1]*He,st(ht.coords,Kt,Ue,Ue,nr,wr)}return ht!==St&&(ht.lengths.length=Ze.length,ht.coords.length=Kt.length),ht}function _t(ht,St,Nt,Wt,Qt,Kt){const Ze=j(Nt,Wt),st=K(Nt,Wt,Qt,Kt),Ge=St.coords;ht.coords.length=0,ht.lengths.length=0,ht.lengths.push(...St.lengths);for(let Xe=0;Xe<Ge.length;Xe+=Ze)st(ht.coords,Ge,ht.coords.length,Xe,Ge[Xe],Ge[Xe+1]);return ht}function Ht(ht,St,Nt,Wt){let Qt=0,Kt=ht[Wt*St],Ze=ht[Wt*(St+1)];for(let st=1;st<Nt;st++){const Ge=Kt+ht[Wt*(St+st)],Xe=Ze+ht[Wt*(St+st)+1],He=(Ge-Kt)*(Xe+Ze);Kt=Ge,Ze=Xe,Qt+=He}return.5*Qt}function er(ht,St){const{coords:Nt,lengths:Wt}=ht;let Qt=0,Kt=0;for(let Ze=0;Ze<Wt.length;Ze++)Kt+=Ht(Nt,Qt,Wt[Ze],St),Qt+=Ze;return Math.abs(Kt)}function fr(ht,St){if((0,ne.Wi)(ht))return null;const Nt=ht.clone(),Wt=ht.coords,Qt=ht.lengths;let Kt=0;for(let Ze=0;Ze<Qt.length;Ze++){const st=Qt[Ze];let Ge=Wt[St*Kt],Xe=Wt[St*Kt+1];for(let He=1;He<st;He++){const Ue=Ge+Wt[St*(Kt+He)],it=Xe+Wt[St*(Kt+He)+1];Nt.coords[St*(Kt+He)]=Ue,Nt.coords[St*(Kt+He)+1]=it,Ge=Ue,Xe=it}Kt+=st}return Nt}},50085:(ut,Oe,C)=>{"use strict";C.d(Oe,{V:()=>j});var x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898));const j=L=>{let B=class extends L{get apiKey(){var X;return this._isOverridden("apiKey")?this._get("apiKey"):function Y(L){return"portalItem"in L}(this)?null==(X=this.portalItem)?void 0:X.apiKey:null}set apiKey(X){null!=X?this._override("apiKey",X):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,x._)([(0,T.Cb)({type:String})],B.prototype,"apiKey",null),B=(0,x._)([(0,oe.j)("esri.layers.mixins.APIKeyMixin")],B),B}},65088:(ut,Oe,C)=>{"use strict";C.d(Oe,{Y:()=>B});var x=C(17626),T=C(63290),ne=C(62208),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898)),L=C(38305);const B=X=>{let Z=class extends X{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const z=(0,L.Qc)(this.url);if((0,ne.pC)(z)&&z.title)return z.title}return this._get("title")||""}set title(z){this._set("title",z)}set url(z){this._set("url",(0,L.Nm)(z,T.Z.getLogger(this.declaredClass)))}};return(0,x._)([(0,ie.Cb)()],Z.prototype,"title",null),(0,x._)([(0,ie.Cb)({type:String})],Z.prototype,"url",null),Z=(0,x._)([(0,j.j)("esri.layers.mixins.ArcGISService")],Z),Z}},552:(ut,Oe,C)=>{"use strict";C.d(Oe,{h:()=>j});var x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(71149);const j=L=>{let B=class extends L{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,x._)([(0,T.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],B.prototype,"blendMode",void 0),(0,x._)([(0,T.Cb)({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:Y.ij},write:{allowNull:!0,writer:Y.cW}}}}})],B.prototype,"effect",void 0),B=(0,x._)([(0,oe.j)("esri.layers.mixins.BlendLayer")],B),B}},50107:(ut,Oe,C)=>{"use strict";C.d(Oe,{N:()=>Y});var x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898));const Y=j=>{let L=class extends j{constructor(){super(...arguments),this.customParameters=null}};return(0,x._)([(0,T.Cb)({type:Object,json:{write:{overridePolicy:B=>({enabled:!!(B&&Object.keys(B).length>0)})}}})],L.prototype,"customParameters",void 0),L=(0,x._)([(0,oe.j)("esri.layers.mixins.CustomParametersMixin")],L),L}},35126:(ut,Oe,C)=>{"use strict";C.d(Oe,{b:()=>j});var x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(2319);const j=L=>{let B=class extends L{constructor(){super(...arguments),this.featureEffect=null}};return(0,x._)([(0,T.Cb)({type:Y.Z,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],B.prototype,"featureEffect",void 0),B=(0,x._)([(0,oe.j)("esri.layers.mixins.FeatureEffectLayer")],B),B}},49286:(ut,Oe,C)=>{"use strict";C.d(Oe,{q:()=>ae});var x=C(17626),T=C(26584),ne=C(21726),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898)),L=C(99433),B=C(29338),X=C(36054);const Z={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!1},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var z=C(13812);const ae=V=>{let P=class extends V{constructor(){super(...arguments),this.title=null}writeListMode(F,$,J,H){(H&&"ground"===H.layerContainerType||F&&(0,X.df)(this,J,{},H))&&($[J]=F)}writeOperationalLayerType(F,$,J,H){!F||H&&"tables"===H.layerContainerType||($.layerType=F)}writeTitle(F,$){$.title=F||"Layer"}read(F,$){$&&($.layer=this),(0,B.$Z)(this,F,J=>super.read(F,J),$)}write(F,$){if(null!=$&&$.origin){const ye=`${$.origin}/${$.layerContainerType||"operational-layers"}`,le=Z[ye];let ge=le&&le[this.operationalLayerType];var J;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===ye&&(ge=!1),!ge)return null==(J=$.messages)||J.push(new T.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${ye}'`,{layer:this})),null}const H=super.write(F,nn(Ot({},$),{layer:this})),de=!!$&&!!$.messages&&!!$.messages.filter(ye=>ye instanceof T.Z&&"web-document-write:property-required"===ye.name).length;var ee;return(0,ne.jc)(null==H?void 0:H.url)?(null==$||null==(ee=$.messages)||ee.push(new T.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&de?null:H}beforeSave(){}};return(0,x._)([(0,ie.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],P.prototype,"id",void 0),(0,x._)([(0,ie.Cb)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],P.prototype,"listMode",void 0),(0,x._)([(0,L.c)("listMode")],P.prototype,"writeListMode",null),(0,x._)([(0,ie.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],P.prototype,"operationalLayerType",void 0),(0,x._)([(0,L.c)("operationalLayerType")],P.prototype,"writeOperationalLayerType",null),(0,x._)([(0,ie.Cb)(z.Oh)],P.prototype,"opacity",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],P.prototype,"title",void 0),(0,x._)([(0,L.c)("title")],P.prototype,"writeTitle",null),(0,x._)([(0,ie.Cb)({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],P.prototype,"visible",void 0),P=(0,x._)([(0,j.j)("esri.layers.mixins.OperationalLayer")],P),P}},32629:(ut,Oe,C)=>{"use strict";C.d(Oe,{c:()=>P});var B,x=C(17626),T=C(94113),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(2076),L=C(86162);const X=new j.Xn({asc:"ascending",desc:"descending"});let Z=B=class extends L.wq{constructor(F){super(F),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new B({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],Z.prototype,"field",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],Z.prototype,"valueExpression",void 0),(0,x._)([(0,ne.Cb)({type:X.apiValues,json:{read:X.read,write:X.write}})],Z.prototype,"order",void 0),Z=B=(0,x._)([(0,Y.j)("esri.layers.support.OrderByInfo")],Z);const z=Z;function K(F,$,J){if(!F)return null;const H=F.find(ee=>!!ee.field);if(!H)return null;const de=new z;return de.read(H,J),[de]}function V(F,$,J,H){const de=F.find(ee=>!!ee.field);de&&(0,T.RB)(J,[de.toJSON()],$)}const P=F=>{let $=class extends F{constructor(){super(...arguments),this.orderBy=null}};return(0,x._)([(0,ne.Cb)({type:[z],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:K},write:{target:"layerDefinition.orderBy",writer:V}}})],$.prototype,"orderBy",void 0),$=(0,x._)([(0,Y.j)("esri.layers.mixins.OrderedLayer")],$),$}},6647:(ut,Oe,C)=>{"use strict";C.d(Oe,{I:()=>de});var x=C(15861),T=C(17626),ne=C(24263),ie=C(84792),te=C(59213),oe=C(26584),Y=C(63290),j=C(62208),L=C(10699),B=C(21726),X=C(77712),K=(C(85931),C(8314),C(90912),C(68653)),V=C(76898),P=C(99433),F=C(84687),$=C(55463),J=C(94508);const H=Y.Z.getLogger("esri.layers.mixins.PortalLayer"),de=ye=>{let le=class extends ye{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var ge;null==(ge=this.portalItem)||ge.destroy(),this.portalItem=null}set portalItem(ge){ge!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",ge))}readPortalItem(ge,se,Q){if(se.itemId)return new $.default({id:se.itemId,portal:Q&&Q.portal})}writePortalItem(ge,se){ge&&ge.id&&(se.itemId=ge.id)}loadFromPortal(ge,se){var Q=this;return(0,x.Z)(function*(){if(Q.portalItem&&Q.portalItem.id)try{const pe=yield C.e(3705).then(C.bind(C,83705));return(0,L.k_)(se),yield pe.load({instance:Q,supportedTypes:ge.supportedTypes,validateItem:ge.validateItem,supportsData:ge.supportsData},se)}catch(pe){throw(0,L.D_)(pe)||H.warn(`Failed to load layer (${Q.title}, ${Q.id}) portal item (${Q.portalItem.id})\n  ${pe}`),pe}})()}finishLoadEditablePortalLayer(ge){var se=this;return(0,x.Z)(function*(){se._set("userHasEditingPrivileges",yield se.fetchUserHasEditingPrivileges(ge).catch(Q=>((0,L.r9)(Q),!0)))})()}fetchUserHasEditingPrivileges(ge){var se=this;return(0,x.Z)(function*(){const Q=se.url?null==ne.id?void 0:ne.id.findCredential(se.url):null;if(!Q)return!0;const pe=ee.credential===Q?ee.user:yield se.fetchEditingUser(ge);return ee.credential=Q,ee.user=pe,(0,j.Wi)(pe)||null==pe.privileges||pe.privileges.includes("features:user:edit")})()}fetchEditingUser(ge){var se=this;return(0,x.Z)(function*(){var Q,pe;const ue=null==(Q=se.portalItem)||null==(pe=Q.portal)?void 0:pe.user;if(ue)return ue;const me=ne.id.findServerInfo(se.url);if(null==me||!me.owningSystemUrl)return null;const ve=`${me.owningSystemUrl}/sharing/rest`,fe=F.Z.getDefault();if(fe&&fe.loaded&&(0,B.Fv)(fe.restUrl)===(0,B.Fv)(ve))return fe.user;const Me=`${ve}/community/self`,ce=(0,j.pC)(ge)?ge.signal:null,he=yield(0,te.q6)((0,ie.default)(Me,{authMode:"no-prompt",query:{f:"json"},signal:ce}));return he.ok?J.default.fromJSON(he.value.data):null})()}read(ge,se){se&&(se.layer=this),super.read(ge,se)}write(ge,se){const Q=se&&se.portal,pe=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||F.Z.getDefault());return Q&&pe&&!(0,B.tm)(pe.restUrl,Q.restUrl)?(se.messages&&se.messages.push(new oe.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(ge,nn(Ot({},se),{layer:this}))}};return(0,T._)([(0,X.Cb)({type:$.default})],le.prototype,"portalItem",null),(0,T._)([(0,K.r)("web-document","portalItem",["itemId"])],le.prototype,"readPortalItem",null),(0,T._)([(0,P.c)("web-document","portalItem",{itemId:{type:String}})],le.prototype,"writePortalItem",null),(0,T._)([(0,X.Cb)()],le.prototype,"resourceReferences",void 0),(0,T._)([(0,X.Cb)({readOnly:!0})],le.prototype,"userHasEditingPrivileges",void 0),le=(0,T._)([(0,V.j)("esri.layers.mixins.PortalLayer")],le),le},ee={credential:null,user:null}},30346:(ut,Oe,C)=>{"use strict";C.d(Oe,{Q:()=>ye});var x=C(15861),T=C(17626),ne=C(63290),ie=C(10699),te=C(77712),L=(C(85931),C(8314),C(90912),C(76898)),B=C(7093),Z=(C(45262),C(21352));const z=new B.Z,ae=new WeakMap;function P(le){return le&&"object"==typeof le&&"refreshInterval"in le&&"refresh"in le}function F(le,ge){return Number.isFinite(le)&&Number.isFinite(ge)?ge<=0?le:F(ge,le%ge):0}let $=0,J=0;function H(){const le=Date.now();for(const se of z)if(se.refreshInterval){var ge;le-(null!=(ge=ae.get(se))?ge:0)+5>=6e4*se.refreshInterval&&(ae.set(se,le),se.refresh(le))}}(0,Z.EH)(()=>{const le=Date.now();let ge=0;for(const se of z)ge=F(Math.round(6e4*se.refreshInterval),ge),se.refreshInterval?ae.get(se)||ae.set(se,le):ae.delete(se);if(ge!==J){if(J=ge,clearInterval($),0===J)return void($=0);$=setInterval(H,J)}});const ye=le=>{let ge=class extends le{constructor(...se){super(...se),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,ie.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{!function K(le){P(le)&&z.push(le)}(this)},()=>{})}destroy(){!function V(le){P(le)&&z.includes(le)&&z.remove(le)}(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(se=Date.now()){(0,ie.R8)(this._debounceHasDataChanged()).then(Q=>{Q&&this._set("refreshTimestamp",se),this.emit("refresh",{dataChanged:Q})},Q=>{ne.Z.getLogger(this.declaredClass).error(Q),this.emit("refresh",{dataChanged:!1,error:Q})})}hasDataChanged(){return(0,x.Z)(function*(){return!0})()}};return(0,T._)([(0,te.Cb)({type:Number,cast:se=>se>=.1?se:se<=0?0:.1,json:{write:!0}})],ge.prototype,"refreshInterval",void 0),(0,T._)([(0,te.Cb)({readOnly:!0})],ge.prototype,"refreshTimestamp",void 0),(0,T._)([(0,te.Cb)()],ge.prototype,"refreshParameters",null),ge=(0,T._)([(0,L.j)("esri.layers.mixins.RefreshableLayer")],ge),ge}},99555:(ut,Oe,C)=>{"use strict";C.d(Oe,{M:()=>Y});var x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898));const Y=j=>{let L=class extends j{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get scaleRangeId(){return`${this.minScale},${this.maxScale}`}};return(0,x._)([(0,T.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],L.prototype,"minScale",void 0),(0,x._)([(0,T.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],L.prototype,"maxScale",void 0),(0,x._)([(0,T.Cb)({readOnly:!0})],L.prototype,"scaleRangeId",null),L=(0,x._)([(0,oe.j)("esri.layers.mixins.ScaleRangeLayer")],L),L}},97941:(ut,Oe,C)=>{"use strict";C.d(Oe,{n:()=>ae});var x=C(17626),T=C(97478),ne=C(20849),ie=C(77712),j=(C(85931),C(8314),C(90912),C(68653)),L=C(76898),B=C(62708),X=C(36630),Z=C(58926);const ae=K=>{let V=class extends K{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(P,F){const $=F.timeInfo.exportOptions;if(!$)return null;const J=$.timeOffset,H=Z.v.fromJSON($.timeOffsetUnits);return J&&H?new ne.Z({value:J,unit:H}):null}set timeInfo(P){(0,X.UF)(P,this.fieldsIndex),this._set("timeInfo",P)}};return(0,x._)([(0,ie.Cb)({type:T.Z,json:{write:!1}})],V.prototype,"timeExtent",void 0),(0,x._)([(0,ie.Cb)({type:ne.Z})],V.prototype,"timeOffset",void 0),(0,x._)([(0,j.r)("service","timeOffset",["timeInfo.exportOptions"])],V.prototype,"readOffset",null),(0,x._)([(0,ie.Cb)({value:null,type:B.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],V.prototype,"timeInfo",null),(0,x._)([(0,ie.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],V.prototype,"useViewTime",void 0),V=(0,x._)([(0,L.j)("esri.layers.mixins.TemporalLayer")],V),V}},2319:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var z,x=C(17626),T=C(26584),ne=C(86162),ie=C(62208),te=C(94113),oe=C(77712),B=(C(85931),C(8314),C(90912),C(76898)),X=C(71149),Z=C(98624);let ae=z=class extends ne.wq{constructor(V){super(V),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(V,P){const F=super.write(V,P);if(null!=P&&P.origin){if(F.filter){const H=Object.keys(F.filter);var $;if(H.length>1||"where"!==H[0])return null==($=P.messages)||$.push(new T.Z("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:P.layer,effect:this})),null}var J;if("showExcludedLabels"in F)return null==(J=P.messages)||J.push(new T.Z("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:P.layer,effect:this})),null}return F}clone(){return new z({filter:(0,ie.pC)(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,x._)([(0,oe.Cb)({type:Z.Z,json:{write:{allowNull:!0,writer(V,P,F,$){const J=null==V?void 0:V.write({},$);J&&0!==Object.keys(J).length?(0,te.RB)(F,J,P):(0,te.RB)(F,null,P)}}}})],ae.prototype,"filter",void 0),(0,x._)([(0,oe.Cb)({json:{write:!0,origins:{"web-map":{read:{reader:X.ij},write:{writer:X.cW,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}}}}})],ae.prototype,"includedEffect",void 0),(0,x._)([(0,oe.Cb)({json:{write:!0,origins:{"web-map":{read:{reader:X.ij},write:{writer:X.cW,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}}}}})],ae.prototype,"excludedEffect",void 0),(0,x._)([(0,oe.Cb)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":{name:"showExcludedLabels",default:!0}}}})],ae.prototype,"excludedLabelsVisible",void 0),ae=z=(0,x._)([(0,B.j)("esri.layers.support.FeatureEffect")],ae);const K=ae},98624:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>V});var Z,x=C(17626),T=C(29132),ne=C(97478),ie=C(2076),te=C(86162),oe=C(58817),Y=C(62208),j=C(77712),B=(C(90912),C(76898)),X=C(84952);const z=new ie.Xn({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),ae=new ie.Xn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let K=Z=class extends te.wq{constructor(P){super(P),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(P={}){const{where:F,geometry:$,spatialRelationship:J,timeExtent:H,objectIds:de,units:ee,distance:ye}=this;return new X.Z(Ot({geometry:(0,oe.d9)($),objectIds:(0,oe.d9)(de),spatialRelationship:J,timeExtent:(0,oe.d9)(H),where:F,units:ee,distance:ye},P))}clone(){const{where:P,geometry:F,spatialRelationship:$,timeExtent:J,objectIds:H,units:de,distance:ee}=this;return new Z({geometry:(0,oe.d9)(F),objectIds:(0,oe.d9)(H),spatialRelationship:$,timeExtent:(0,oe.d9)(J),where:P,units:de,distance:ee})}};(0,x._)([(0,j.Cb)({type:String,json:{write:!0}})],K.prototype,"where",void 0),(0,x._)([(0,j.Cb)({types:T.qM,json:{write:!0}})],K.prototype,"geometry",void 0),(0,x._)([(0,j.Cb)({type:z.apiValues,json:{name:"spatialRel",read:{reader:z.read},write:{allowNull:!1,writer:z.write,overridePolicy(){return{enabled:(0,Y.pC)(this.geometry)}}}}})],K.prototype,"spatialRelationship",void 0),(0,x._)([(0,j.Cb)({type:Number,json:{write:{overridePolicy(P){return{enabled:null!=P&&null!=this.geometry}}}}})],K.prototype,"distance",void 0),(0,x._)([(0,j.Cb)({type:[Number],json:{write:!0}})],K.prototype,"objectIds",void 0),(0,x._)([(0,j.Cb)({type:ae.apiValues,json:{read:ae.read,write:{writer:ae.write,overridePolicy(P){return{enabled:null!=P&&null!=this.geometry}}}}})],K.prototype,"units",void 0),(0,x._)([(0,j.Cb)({type:ne.Z,json:{write:!0}})],K.prototype,"timeExtent",void 0),K=Z=(0,x._)([(0,B.j)("esri.layers.support.FeatureFilter")],K);const V=K},83989:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>L});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let j=class extends T.wq{constructor(){super(...arguments),this.type=null}};(0,x._)([(0,ne.Cb)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],j.prototype,"type",void 0),j=(0,x._)([(0,Y.j)("esri.layers.support.FeatureReduction")],j);const L=j},47058:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(83989);let L=j=class extends Y.Z{constructor(X){super(X),this.type="selection"}clone(){return new j}};(0,x._)([(0,T.Cb)({type:["selection"]})],L.prototype,"type",void 0),L=j=(0,x._)([(0,oe.j)("esri.layers.support.FeatureReductionSelection")],L);const B=L},32777:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var x=C(17626),T=C(2076),ne=C(86162),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898));const L=new T.Xn({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let B=class extends ne.wq{constructor(Z){super(Z),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,x._)([(0,ie.Cb)({json:{write:!0}})],B.prototype,"name",void 0),(0,x._)([(0,ie.Cb)({json:{write:!0}})],B.prototype,"description",void 0),(0,x._)([(0,ie.Cb)({json:{read:L.read,write:L.write}})],B.prototype,"drawingTool",void 0),(0,x._)([(0,ie.Cb)({json:{write:!0}})],B.prototype,"prototype",void 0),(0,x._)([(0,ie.Cb)({json:{write:!0}})],B.prototype,"thumbnail",void 0),B=(0,x._)([(0,j.j)("esri.layers.support.FeatureTemplate")],B);const X=B},41638:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>z});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(68653)),j=C(76898),L=C(99433),B=C(26141),X=C(32777);let Z=class extends T.wq{constructor(ae){super(ae),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(ae){const K={};for(const V of Object.keys(ae))K[V]=(0,B.im)(ae[V]);return K}writeDomains(ae,K){const V={};for(const F of Object.keys(ae)){var P;ae[F]&&(V[F]=null==(P=ae[F])?void 0:P.toJSON())}K.domains=V}};(0,x._)([(0,ne.Cb)({json:{write:!0}})],Z.prototype,"id",void 0),(0,x._)([(0,ne.Cb)({json:{write:!0}})],Z.prototype,"name",void 0),(0,x._)([(0,ne.Cb)({json:{write:!0}})],Z.prototype,"domains",void 0),(0,x._)([(0,Y.r)("domains")],Z.prototype,"readDomains",null),(0,x._)([(0,L.c)("domains")],Z.prototype,"writeDomains",null),(0,x._)([(0,ne.Cb)({type:[X.Z],json:{write:!0}})],Z.prototype,"templates",void 0),Z=(0,x._)([(0,j.j)("esri.layers.support.FeatureType")],Z);const z=Z},36255:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>V});var z,x=C(17626),T=C(2076),ne=C(86162),ie=C(77712),Y=(C(85931),C(8314),C(90912)),j=C(55342),L=C(68653),B=C(76898),X=C(26141),Z=C(85);const ae=new T.Xn({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let K=z=class extends ne.wq{constructor(P){super(P),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(P,{description:F}){let $;try{$=JSON.parse(F)}catch(J){}return $?$.value:null}readValueType(P,{description:F}){let $;try{$=JSON.parse(F)}catch(J){}return $?ae.fromJSON($.fieldValueType):null}clone(){return new z({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],K.prototype,"alias",void 0),(0,x._)([(0,ie.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],K.prototype,"defaultValue",void 0),(0,x._)([(0,ie.Cb)()],K.prototype,"description",void 0),(0,x._)([(0,L.r)("description")],K.prototype,"readDescription",null),(0,x._)([(0,ie.Cb)({types:X.V5,json:{read:{reader:X.im},write:!0}})],K.prototype,"domain",void 0),(0,x._)([(0,ie.Cb)({type:Boolean,json:{write:!0}})],K.prototype,"editable",void 0),(0,x._)([(0,ie.Cb)({type:Y.z8,json:{write:!0}})],K.prototype,"length",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],K.prototype,"name",void 0),(0,x._)([(0,ie.Cb)({type:Boolean,json:{write:!0}})],K.prototype,"nullable",void 0),(0,x._)([(0,j.J)(Z.v)],K.prototype,"type",void 0),(0,x._)([(0,ie.Cb)()],K.prototype,"valueType",void 0),(0,x._)([(0,L.r)("valueType",["description"])],K.prototype,"readValueType",null),K=z=(0,x._)([(0,B.j)("esri.layers.support.Field")],K);const V=K},60466:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>te});var x=C(36630);function ne(Y){return"oid"===Y.type||"esriFieldTypeOID"===Y.type}function ie(Y){return"global-id"===Y.type||"esriFieldTypeGlobalID"===Y.type}class te{constructor(j){if(this.fields=j,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!j)return;const L=[];for(const B of j){const X=B&&B.name;if(X){const Z=oe(X);this._fieldsMap.set(X,B),this._fieldsMap.set(Z,B),L.push(Z),"date"===(Y=B).type||"esriFieldTypeDate"===Y.type?(this.dateFields.push(B),this._dateFieldsSet.add(B)):(0,x.H7)(B)&&(this._numericFieldsSet.add(B),this.numericFields.push(B)),ne(B)||ie(B)||(B.editable=null==B.editable||!!B.editable,B.nullable=null==B.nullable||!!B.nullable)}}var Y;L.sort(),this.uid=L.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const j of this.fields)ne(j)||ie(j)||j.nullable||void 0!==(0,x.os)(j)||this._requiredFields.push(j)}return this._requiredFields}has(j){return null!=this.get(j)}get(j){return null!=j?this._fieldsMap.get(j)||this._fieldsMap.get(oe(j)):void 0}isDateField(j){return this._dateFieldsSet.has(this.get(j))}isNumericField(j){return this._numericFieldsSet.has(this.get(j))}normalizeFieldName(j){const L=this.get(j);if(L)return L.name}}function oe(Y){return Y.toLowerCase().trim()}},72258:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(86162),ne=C(77712),oe=(C(85931),C(8314),C(90912)),Y=C(76898);let L=j=class extends T.wq{constructor(X){super(X),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new j({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,x._)([(0,ne.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],L.prototype,"cols",void 0),(0,x._)([(0,ne.Cb)({type:oe.z8,json:{write:!0}})],L.prototype,"level",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],L.prototype,"levelValue",void 0),(0,x._)([(0,ne.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],L.prototype,"origin",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],L.prototype,"resolution",void 0),(0,x._)([(0,ne.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],L.prototype,"rows",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],L.prototype,"scale",void 0),L=j=(0,x._)([(0,Y.j)("esri.layers.support.LOD")],L);const B=L},170:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>se});var K,x=C(17626),T=C(65787),ne=C(2076),ie=C(86162),te=C(58817),oe=C(23841),Y=C(77712),L=(C(90912),C(68653)),B=C(76898),X=C(99433),ae=(C(85931),C(8314),C(86793));let V=K=class extends ie.wq{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(Q,pe){return pe.value?(0,ae.dI)(pe.value):Q}writeExpression(Q,pe,ue){null!=this.value&&(Q=(0,ae.dI)(this.value)),null!=Q&&(pe[ue]=Q)}clone(){return new K({expression:this.expression,title:this.title,value:this.value})}};(0,x._)([(0,Y.Cb)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],V.prototype,"expression",void 0),(0,x._)([(0,L.r)("expression",["expression","value"])],V.prototype,"readExpression",null),(0,x._)([(0,X.c)("expression")],V.prototype,"writeExpression",null),(0,x._)([(0,Y.Cb)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],V.prototype,"title",void 0),(0,x._)([(0,Y.Cb)({json:{read:!1,write:!1}})],V.prototype,"value",void 0),V=K=(0,x._)([(0,B.j)("esri.layers.support.LabelExpressionInfo")],V);const P=V;var J,F=C(8080),$=C(65270);const H=new ne.Xn({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function de(Q){return!Q||"service"!==Q.origin&&!ee(Q.layer)}function ee(Q){return"map-image"===(null==Q?void 0:Q.type)}function ye(Q){var pe,ue;return!!ee(Q)&&!(null==(pe=Q.capabilities)||null==(ue=pe.exportMap)||!ue.supportsArcadeExpressionForLabeling)}let ge=J=class extends ie.wq{constructor(Q){super(Q),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=F.Rz,this.useCodedValues=void 0,this.where=null}static evaluateWhere(Q,pe){const ue=function(me,ve,fe){switch(ve){case"=":return me==fe;case"<>":return me!=fe;case">":return me>fe;case">=":return me>=fe;case"<":return me<fe;case"<=":return me<=fe}return!1};try{if(null==Q)return!0;const me=Q.split(" ");if(3===me.length)return ue(pe[me[0]],me[1],me[2]);if(7===me.length){const ve=ue(pe[me[0]],me[1],me[2]),fe=me[3],Me=ue(pe[me[4]],me[5],me[6]);switch(fe){case"AND":return ve&&Me;case"OR":return ve||Me}}return!1}catch(me){console.log("Error.: can't parse = "+Q)}}readLabelExpression(Q,pe){const ue=pe.labelExpressionInfo;if(!ue||!ue.value&&!ue.expression)return Q}writeLabelExpression(Q,pe,ue){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)Q=(0,ae.z7)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const me=(0,ae.el)(this.labelExpressionInfo.expression);me&&(Q="["+me+"]")}null!=Q&&(pe[ue]=Q)}writeLabelExpressionInfo(Q,pe,ue,me){if(null==Q&&null!=this.labelExpression&&de(me))Q=new P({expression:this.getLabelExpressionArcade()});else if(!Q)return;const ve=Q.toJSON(me);ve.expression&&(pe[ue]=ve)}writeMaxScale(Q,pe){(Q||this.minScale)&&(pe.maxScale=Q)}writeMinScale(Q,pe){(Q||this.maxScale)&&(pe.minScale=Q)}getLabelExpression(){return(0,ae.hV)(this)}getLabelExpressionArcade(){return(0,ae.YI)(this)}getLabelExpressionSingleField(){return(0,ae.UO)(this)}hash(){return JSON.stringify(this)}clone(){return new J({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,te.d9)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,te.d9)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,x._)([(0,Y.Cb)({type:String,json:{write:!0}})],ge.prototype,"name",void 0),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ge.prototype,"allowOverrun",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],ge.prototype,"deconflictionStrategy",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{write:{overridePolicy(Q,pe,ue){return this.labelExpressionInfo&&"service"===(null==ue?void 0:ue.origin)&&ye(ue.layer)?{enabled:!1}:{allowNull:!0}}}}})],ge.prototype,"labelExpression",void 0),(0,x._)([(0,L.r)("labelExpression")],ge.prototype,"readLabelExpression",null),(0,x._)([(0,X.c)("labelExpression")],ge.prototype,"writeLabelExpression",null),(0,x._)([(0,Y.Cb)({type:P,json:{write:{overridePolicy:(Q,pe,ue)=>function le(Q){return de(Q)||ye(Q.layer)}(ue)?{allowNull:!0}:{enabled:!1}}}})],ge.prototype,"labelExpressionInfo",void 0),(0,x._)([(0,X.c)("labelExpressionInfo")],ge.prototype,"writeLabelExpressionInfo",null),(0,x._)([(0,Y.Cb)({type:H.apiValues,json:{type:H.jsonValues,read:H.read,write:H.write}})],ge.prototype,"labelPlacement",void 0),(0,x._)([(0,Y.Cb)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ge.prototype,"labelPosition",void 0),(0,x._)([(0,Y.Cb)({type:Number})],ge.prototype,"maxScale",void 0),(0,x._)([(0,X.c)("maxScale")],ge.prototype,"writeMaxScale",null),(0,x._)([(0,Y.Cb)({type:Number})],ge.prototype,"minScale",void 0),(0,x._)([(0,X.c)("minScale")],ge.prototype,"writeMinScale",null),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],ge.prototype,"repeatLabel",void 0),(0,x._)([(0,Y.Cb)({type:Number,cast:oe.t_,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ge.prototype,"repeatLabelDistance",void 0),(0,x._)([(0,Y.Cb)({types:T.yK,json:{origins:{"web-scene":{types:T.S6,write:$.c,default:null}},write:$.c,default:null}})],ge.prototype,"symbol",void 0),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:!0}})],ge.prototype,"useCodedValues",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{write:!0}})],ge.prototype,"where",void 0),ge=J=(0,x._)([(0,B.j)("esri.layers.support.LabelClass")],ge);const se=ge},2430:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(7093),ne=C(86162),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898));let B=L=class extends ne.wq{constructor(Z){super(Z),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new T.Z}clone(){return new L({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],B.prototype,"floorField",void 0),(0,x._)([(0,ie.Cb)({json:{read:!1,write:!1}})],B.prototype,"viewAllMode",void 0),(0,x._)([(0,ie.Cb)({json:{read:!1,write:!1}})],B.prototype,"viewAllLevelIds",void 0),B=L=(0,x._)([(0,j.j)("esri.layers.support.LayerFloorInfo")],B);const X=B},2584:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>de});var $,x=C(17626),T=C(2076),ne=C(86162),ie=C(62208),te=C(16730),oe=C(77712),L=(C(85931),C(8314),C(90912)),B=C(68653),X=C(76898),Z=C(99433),z=C(49672),ae=C(65234),K=C(65401),V=C(37053),P=C(46367),F=C(72258);const J=new T.Xn({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let H=$=class extends ne.wq{constructor(ee){super(ee),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(ee={}){const{resolutionFactor:ye=1,scales:le,size:ge=256,spatialReference:se=ae.Z.WebMercator,numLODs:Q=24}=ee;if(!(0,V.JY)(se)){const Me=[];if(le)for(let ce=0;ce<le.length;ce++){const he=le[ce];Me.push({level:ce,scale:he,resolution:he})}else{let ce=5e-4;for(let he=Q-1;he>=0;he--)Me.unshift({level:he,scale:ce,resolution:ce}),ce*=2}return new $({dpi:96,lods:Me,origin:new z.Z(0,0,se),size:[ge,ge],spatialReference:se})}const pe=(0,V.C5)(se),ue=new z.Z(ee.origin?{x:ee.origin.x,y:ee.origin.y,spatialReference:se}:pe?{x:pe.origin[0],y:pe.origin[1],spatialReference:se}:{x:0,y:0,spatialReference:se}),ve=1/(39.37*(0,te.c9)(se)*96),fe=[];if(le)for(let Me=0;Me<le.length;Me++){const ce=le[Me];fe.push({level:Me,scale:ce,resolution:ce*ve})}else{let Me=(0,V.sT)(se)?512/ge*591657527.5917094:256/ge*591657527.591555;const ce=Math.ceil(Q/ye);fe.push({level:0,scale:Me,resolution:Me*ve});for(let he=1;he<ce;he++){const De=Me/2**ye;fe.push({level:he,scale:De,resolution:De*ve}),Me=De}}return new $({dpi:96,lods:fe,origin:ue,size:[ge,ge],spatialReference:se})}get isWrappable(){const{spatialReference:ee,origin:ye}=this;if(ee&&ye){const le=(0,V.C5)(ee);return ee.isWrappable&&Math.abs(le.origin[0]-ye.x)<=le.dx}return!1}readOrigin(ee,ye){return z.Z.fromJSON(Ot({spatialReference:ye.spatialReference},ee))}set lods(ee){let ye=0,le=0;const ge=[];this._levelToLOD={},ee&&(ye=-1/0,le=1/0,ee.forEach(se=>{ge.push(se.scale),ye=se.scale>ye?se.scale:ye,le=se.scale<le?se.scale:le,this._levelToLOD[se.level]=se})),this._set("scales",ge),this._set("minScale",ye),this._set("maxScale",le),this._set("lods",ee),this._initializeUpsampleLevels()}readSize(ee,ye){return[ye.cols,ye.rows]}writeSize(ee,ye){ye.cols=ee[0],ye.rows=ee[1]}zoomToScale(ee){const ye=this.scales;if(ee<=0)return ye[0];if(ee>=ye.length-1)return ye[ye.length-1];{const le=Math.floor(ee);return ye[le]/(ye[le]/ye[le+1])**(ee-le)}}scaleToZoom(ee){const ye=this.scales,le=ye.length-1;let ge=0;for(;ge<le;ge++){const se=ye[ge],Q=ye[ge+1];if(se<=ee)return ge;if(Q===ee)return ge+1;if(se>ee&&Q<ee)return ge+Math.log(se/ee)/Math.log(se/Q)}return ge}snapScale(ee,ye=.95){const le=this.scaleToZoom(ee);return le%Math.floor(le)>=ye?this.zoomToScale(Math.ceil(le)):this.zoomToScale(Math.floor(le))}tileAt(ee,ye,le,ge){const se=this.lodAt(ee);if(!se)return null;let Q,pe;if("number"==typeof ye)Q=ye,pe=le;else if((0,V.fS)(ye.spatialReference,this.spatialReference))Q=ye.x,pe=ye.y,ge=le;else{const ve=(0,P.iV)(ye,this.spatialReference);if((0,ie.Wi)(ve))return null;Q=ve.x,pe=ve.y,ge=le}const ue=se.resolution*this.size[0],me=se.resolution*this.size[1];return ge||(ge={id:null,level:0,row:0,col:0,extent:(0,K.Ue)()}),ge.level=ee,ge.row=Math.floor((this.origin.y-pe)/me+.001),ge.col=Math.floor((Q-this.origin.x)/ue+.001),this.updateTileInfo(ge),ge}updateTileInfo(ee,ye=0){let le=this.lodAt(ee.level);if(!le&&1===ye){const pe=this.lods[this.lods.length-1];pe.level<ee.level&&(le=pe)}if(!le)return;const ge=ee.level-le.level,se=le.resolution*this.size[0]/2**ge,Q=le.resolution*this.size[1]/2**ge;ee.id=`${ee.level}/${ee.row}/${ee.col}`,ee.extent||(ee.extent=(0,K.Ue)()),ee.extent[0]=this.origin.x+ee.col*se,ee.extent[1]=this.origin.y-(ee.row+1)*Q,ee.extent[2]=ee.extent[0]+se,ee.extent[3]=ee.extent[1]+Q}upsampleTile(ee){const ye=this._upsampleLevels[ee.level];return!(!ye||-1===ye.parentLevel||(ee.level=ye.parentLevel,ee.row=Math.floor(ee.row/ye.factor+.001),ee.col=Math.floor(ee.col/ye.factor+.001),this.updateTileInfo(ee),0))}getTileBounds(ee,ye){const{resolution:le}=this.lodAt(ye.level),ge=le*this.size[0],se=le*this.size[1];return ee[0]=this.origin.x+ye.col*ge,ee[1]=this.origin.y-(ye.row+1)*se,ee[2]=ee[0]+ge,ee[3]=ee[1]+se,ee}lodAt(ee){return this._levelToLOD&&this._levelToLOD[ee]||null}clone(){return $.fromJSON(this.write({}))}_initializeUpsampleLevels(){const ee=this.lods;this._upsampleLevels=[];let ye=null;for(let le=0;le<ee.length;le++){const ge=ee[le];this._upsampleLevels[ge.level]={parentLevel:ye?ye.level:-1,factor:ye?ye.resolution/ge.resolution:0},ye=ge}}};(0,x._)([(0,oe.Cb)({type:Number,json:{write:!0}})],H.prototype,"compressionQuality",void 0),(0,x._)([(0,oe.Cb)({type:Number,json:{write:!0}})],H.prototype,"dpi",void 0),(0,x._)([(0,oe.Cb)({type:String,json:{read:J.read,write:J.write,origins:{"web-scene":{read:!1,write:!1}}}})],H.prototype,"format",void 0),(0,x._)([(0,oe.Cb)({readOnly:!0})],H.prototype,"isWrappable",null),(0,x._)([(0,oe.Cb)({type:z.Z,json:{write:!0}})],H.prototype,"origin",void 0),(0,x._)([(0,B.r)("origin")],H.prototype,"readOrigin",null),(0,x._)([(0,oe.Cb)({type:[F.Z],value:null,json:{write:!0}})],H.prototype,"lods",null),(0,x._)([(0,oe.Cb)({readOnly:!0})],H.prototype,"minScale",void 0),(0,x._)([(0,oe.Cb)({readOnly:!0})],H.prototype,"maxScale",void 0),(0,x._)([(0,oe.Cb)({readOnly:!0})],H.prototype,"scales",void 0),(0,x._)([(0,oe.Cb)({cast:ee=>Array.isArray(ee)?ee:"number"==typeof ee?[ee,ee]:[256,256]})],H.prototype,"size",void 0),(0,x._)([(0,B.r)("size",["rows","cols"])],H.prototype,"readSize",null),(0,x._)([(0,Z.c)("size",{cols:{type:L.z8},rows:{type:L.z8}})],H.prototype,"writeSize",null),(0,x._)([(0,oe.Cb)({type:ae.Z,json:{write:!0}})],H.prototype,"spatialReference",void 0),H=$=(0,x._)([(0,X.j)("esri.layers.support.TileInfo")],H);const de=H},62708:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>J});var ae,x=C(17626),T=C(97478),ne=C(20849),ie=C(86162),te=C(58817),oe=C(62208),Y=C(77712),L=(C(90912),C(68653)),B=C(76898),X=C(99433);C(85931),C(8314);let K=ae=class extends ie.wq{constructor(H){super(H),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(H,de){return void 0!==de.respectsDaylightSaving?de.respectsDaylightSaving:void 0!==de.respectDaylightSaving&&de.respectDaylightSaving}clone(){const{respectsDaylightSaving:H,timezone:de}=this;return new ae({respectsDaylightSaving:H,timezone:de})}};(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:!0}})],K.prototype,"respectsDaylightSaving",void 0),(0,x._)([(0,L.r)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],K.prototype,"readRespectsDaylightSaving",null),(0,x._)([(0,Y.Cb)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],K.prototype,"timezone",void 0),K=ae=(0,x._)([(0,B.j)("esri.layers.support.TimeReference")],K);const V=K;var F,P=C(58926);let $=F=class extends ie.wq{constructor(H){super(H),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(H,de){if(!de.timeExtent||!Array.isArray(de.timeExtent)||2!==de.timeExtent.length)return null;const ee=new Date(de.timeExtent[0]),ye=new Date(de.timeExtent[1]);return new T.Z({start:ee,end:ye})}writeFullTimeExtent(H,de){de.timeExtent=H&&(0,oe.pC)(H.start)&&(0,oe.pC)(H.end)?[H.start.getTime(),H.end.getTime()]:null}readInterval(H,de){return de.timeInterval&&de.timeIntervalUnits?new ne.Z({value:de.timeInterval,unit:P.v.fromJSON(de.timeIntervalUnits)}):de.defaultTimeInterval&&de.defaultTimeIntervalUnits?new ne.Z({value:de.defaultTimeInterval,unit:P.v.fromJSON(de.defaultTimeIntervalUnits)}):null}writeInterval(H,de){if(H){const ee=H.toJSON();de.timeInterval=ee.value,de.timeIntervalUnits=ee.unit}else de.timeInterval=null,de.timeIntervalUnits=null}clone(){const{cumulative:H,endField:de,hasLiveData:ee,interval:ye,startField:le,timeReference:ge,fullTimeExtent:se,trackIdField:Q,useTime:pe}=this;return new F({cumulative:H,endField:de,hasLiveData:ee,interval:ye,startField:le,timeReference:(0,te.d9)(ge),fullTimeExtent:(0,te.d9)(se),trackIdField:Q,useTime:pe})}};(0,x._)([(0,Y.Cb)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],$.prototype,"cumulative",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],$.prototype,"endField",void 0),(0,x._)([(0,Y.Cb)({type:T.Z,json:{write:{enabled:!0,allowNull:!0}}})],$.prototype,"fullTimeExtent",void 0),(0,x._)([(0,L.r)("fullTimeExtent",["timeExtent"])],$.prototype,"readFullTimeExtent",null),(0,x._)([(0,X.c)("fullTimeExtent")],$.prototype,"writeFullTimeExtent",null),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:!0}})],$.prototype,"hasLiveData",void 0),(0,x._)([(0,Y.Cb)({type:ne.Z,json:{write:{enabled:!0,allowNull:!0}}})],$.prototype,"interval",void 0),(0,x._)([(0,L.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],$.prototype,"readInterval",null),(0,x._)([(0,X.c)("interval")],$.prototype,"writeInterval",null),(0,x._)([(0,Y.Cb)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],$.prototype,"startField",void 0),(0,x._)([(0,Y.Cb)({type:V,json:{write:{enabled:!0,allowNull:!0}}})],$.prototype,"timeReference",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],$.prototype,"trackIdField",void 0),(0,x._)([(0,Y.Cb)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],$.prototype,"useTime",void 0),$=F=(0,x._)([(0,B.j)("esri.layers.support.TimeInfo")],$);const J=$},38305:(ut,Oe,C)=>{"use strict";C.d(Oe,{ld:()=>Z,B5:()=>L,M8:()=>ae,h3:()=>J,G:()=>$,Qc:()=>B,DR:()=>X,Nm:()=>V,XG:()=>P,a7:()=>z,wH:()=>F});var x=C(62208),T=C(21726),ne=C(29840);const ie={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},te=Object.values(ie),oe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${te.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Y=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${te.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),j=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function L(de){return!!oe.test(de)}function B(de){const ee=(0,T.mN)(de),ye=ee.path.match(oe)||ee.path.match(Y);if(!ye)return null;const[,le,ge,se,Q]=ye,pe=ge.indexOf("/");return{title:Z(-1!==pe?ge.slice(pe+1):ge),serverType:ie[se.toLowerCase()],sublayer:null!=Q&&""!==Q?parseInt(Q,10):null,url:{path:le}}}function X(de){const ee=(0,T.mN)(de).path.match(j);return ee?{serviceUrl:ee[1],sublayerId:Number(ee[2])}:null}function Z(de){return(de=de.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+de.slice(1)}function z(de,ee){const ye=[];if(de){const le=B(de);(0,x.pC)(le)&&le.title&&ye.push(le.title)}if(ee){const le=Z(ee);ye.push(le)}if(2===ye.length){if(-1!==ye[0].toLowerCase().indexOf(ye[1].toLowerCase()))return ye[0];if(-1!==ye[1].toLowerCase().indexOf(ye[0].toLowerCase()))return ye[1]}return ye.join(" - ")}function ae(de){if(!de)return!1;const se=-1!==(de=de.toLowerCase()).indexOf(".arcgis.com/"),Q=-1!==de.indexOf("//services")||-1!==de.indexOf("//tiles")||-1!==de.indexOf("//features");return se&&Q}function V(de,ee){return de&&(0,T.Qj)((0,T.Hu)(de,ee))}function P(de){let{url:ee}=de;if(!ee)return{url:ee};ee=(0,T.Hu)(ee,de.logger);const ye=(0,T.mN)(ee),le=B(ye.path);let ge;if((0,x.pC)(le))null!=le.sublayer&&null==de.layer.layerId&&(ge=le.sublayer),ee=le.url.path;else if(de.nonStandardUrlAllowed){const se=X(ye.path);(0,x.pC)(se)&&(ee=se.serviceUrl,ge=se.sublayerId)}return{url:(0,T.Qj)(ee),layerId:ge}}function F(de,ee,ye,le,ge){(0,ne.w)(ee,le,"url",ge),le.url&&null!=de.layerId&&(le.url=(0,T.v_)(le.url,ye,de.layerId.toString()))}function $(de){if(!de)return!1;const ee=de.toLowerCase(),ye=-1!==ee.indexOf("/services/"),le=-1!==ee.indexOf("/mapserver/wmsserver"),ge=-1!==ee.indexOf("/imageserver/wmsserver"),se=-1!==ee.indexOf("/wmsserver");return ye&&(le||ge||se)}function J(de){if(!de)return!1;const ee=new T.R9((0,T.hF)(de)).authority.toLowerCase();return"server.arcgisonline.com"===ee||"services.arcgisonline.com"===ee}},13812:(ut,Oe,C)=>{"use strict";C.d(Oe,{qG:()=>ge,PV:()=>de,id:()=>Q,iR:()=>$,rn:()=>H,u1:()=>ue,rO:()=>pe,Oh:()=>ye,bT:()=>le,C_:()=>F,Lx:()=>ee,vg:()=>se,YI:()=>P,HQ:()=>J});var x=C(97478),T=C(2004),ne=C(65234),ie=C(29840),te=C(62208),Y=(C(10699),C(28170)),K=C(26540),V=C(92236);const P={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},F={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(me,ve)=>!ve.disablePopup},write:{enabled:!0,writer(me,ve,fe){ve[fe]=!me}}}},$={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},J={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:ie.w}}},H={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},de={value:null,type:K.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function ee(me){return{type:me,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const ye={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},le=nn(Ot({},ye),{json:nn(Ot({},ye.json),{origins:{"web-document":nn(Ot({},ye.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(me,ve,fe)=>fe&&"service"!==fe.origin||!ve.drawingInfo||void 0===ve.drawingInfo.transparency?ve.layerDefinition&&ve.layerDefinition.drawingInfo&&void 0!==ve.layerDefinition.drawingInfo.transparency?(0,V.b)(ve.layerDefinition.drawingInfo.transparency):void 0:(0,V.b)(ve.drawingInfo.transparency)}})}),ge={type:x.Z,readOnly:!0,get(){var me,ve;if(null==(me=this.layer)||!me.timeInfo)return null;const{datesInUnknownTimezone:fe,timeOffset:Me,useViewTime:ce}=this.layer,he=null==(ve=this.view)?void 0:ve.timeExtent;let De=this.layer.timeExtent;fe&&(De=function ae(me){if(!me)return me;const{start:ve,end:fe}=me;return new x.Z({start:(0,te.pC)(ve)?(0,Y.Nm)(ve,ve.getTimezoneOffset(),"minutes"):ve,end:(0,te.pC)(fe)?(0,Y.Nm)(fe,fe.getTimezoneOffset(),"minutes"):fe})}(De));let xe=ce?he&&De?he.intersection(De):he||De:De;if(!xe||xe.isEmpty||xe.isAllTime)return xe;Me&&(xe=xe.offset(-Me.value,Me.unit)),fe&&(xe=function z(me){if(!me)return me;const{start:ve,end:fe}=me;return new x.Z({start:(0,te.pC)(ve)?(0,Y.Nm)(ve,-ve.getTimezoneOffset(),"minutes"):ve,end:(0,te.pC)(fe)?(0,Y.Nm)(fe,-fe.getTimezoneOffset(),"minutes"):fe})}(xe));const Pe=this._get("timeExtent");return xe.equals(Pe)?Pe:xe}},se={type:T.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(me,ve)=>{const fe=T.Z.fromJSON(me);return null!=ve.spatialReference&&"object"==typeof ve.spatialReference&&(fe.spatialReference=ne.Z.fromJSON(ve.spatialReference)),fe}}}},read:!1}},Q={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},pe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},ue={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}}},26141:(ut,Oe,C)=>{"use strict";C.d(Oe,{im:()=>pe,V5:()=>Q}),C(8314);var B,T=C(17626),ne=C(58817),ie=C(77712),oe=(C(90912),C(55342)),Y=C(76898),j=C(86162);C(85931);let X=B=class extends j.wq{constructor(ue){super(ue),this.name=null,this.code=null}clone(){return new B({name:this.name,code:this.code})}};(0,T._)([(0,ie.Cb)({type:String,json:{write:!0}})],X.prototype,"name",void 0),(0,T._)([(0,ie.Cb)({type:[String,Number],json:{write:!0}})],X.prototype,"code",void 0),X=B=(0,T._)([(0,Y.j)("esri.layers.support.CodedValue")],X);const Z=X,ae=new(C(2076).Xn)({inherited:"inherited",codedValue:"coded-value",range:"range"});let K=class extends j.wq{constructor(ue){super(ue),this.name=null,this.type=null}};(0,T._)([(0,ie.Cb)({type:String,json:{write:!0}})],K.prototype,"name",void 0),(0,T._)([(0,oe.J)(ae)],K.prototype,"type",void 0),K=(0,T._)([(0,Y.j)("esri.layers.support.Domain")],K);const V=K;var P;let F=P=class extends V{constructor(ue){super(ue),this.codedValues=null,this.type="coded-value"}getName(ue){let me=null;if(this.codedValues){const ve=String(ue);this.codedValues.some(fe=>(String(fe.code)===ve&&(me=fe.name),!!me))}return me}clone(){return new P({codedValues:(0,ne.d9)(this.codedValues),name:this.name})}};(0,T._)([(0,ie.Cb)({type:[Z],json:{write:!0}})],F.prototype,"codedValues",void 0),(0,T._)([(0,oe.J)({codedValue:"coded-value"})],F.prototype,"type",void 0),F=P=(0,T._)([(0,Y.j)("esri.layers.support.CodedValueDomain")],F);const $=F;var de;C(63290),C(82255);let ee=de=class extends V{constructor(ue){super(ue),this.type="inherited"}clone(){return new de}};(0,T._)([(0,oe.J)({inherited:"inherited"})],ee.prototype,"type",void 0),ee=de=(0,T._)([(0,Y.j)("esri.layers.support.InheritedDomain")],ee);const ye=ee;var le;let ge=le=class extends V{constructor(ue){super(ue),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new le({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,T._)([(0,ie.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(ue,me)=>me.range&&me.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(ue,me,ve){me[ve]=[this.minValue||0,ue]}}}})],ge.prototype,"maxValue",void 0),(0,T._)([(0,ie.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(ue,me)=>me.range&&me.range[0]},write:{target:"range",writer(ue,me,ve){me[ve]=[ue,this.maxValue||0]}}}})],ge.prototype,"minValue",void 0),(0,T._)([(0,oe.J)({range:"range"})],ge.prototype,"type",void 0),ge=le=(0,T._)([(0,Y.j)("esri.layers.support.RangeDomain")],ge);const se=ge,Q={key:"type",base:V,typeMap:{range:ge,"coded-value":$,inherited:ye}};function pe(ue){if(!ue||!ue.type)return null;switch(ue.type){case"range":return se.fromJSON(ue);case"codedValue":return $.fromJSON(ue);case"inherited":return ye.fromJSON(ue)}return null}},2777:(ut,Oe,C)=>{"use strict";C.d(Oe,{d:()=>le});var z,x=C(83989),T=C(17626),ne=C(73281),ie=C(65787),te=C(86162),oe=C(58817),Y=C(23841),j=C(77712),B=(C(90912),C(76898));C(85931),C(8314);let ae=z=class extends te.wq{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new z({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],ae.prototype,"statisticType",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],ae.prototype,"onStatisticField",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],ae.prototype,"onStatisticValueExpression",void 0),ae=z=(0,T._)([(0,B.j)("esri.layers.support.OutStatistic")],ae);const K=ae;var V;let P=V=class extends te.wq{constructor(){super(...arguments),this.name=null}clone(){return new V({name:this.name,outStatistic:this.outStatistic.clone()})}};(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],P.prototype,"name",void 0),(0,T._)([(0,j.Cb)({type:K,json:{write:!0}})],P.prototype,"outStatistic",void 0),P=V=(0,T._)([(0,B.j)("esri.layers.support.AggregateField")],P);const F=P;var H,$=C(13812),J=C(170);let de=H=class extends te.wq{constructor(ge){super(ge),this.type="cluster",this.clusterRadius=(0,Y.t_)("80px"),this.clusterMinSize=(0,Y.t_)("12px"),this.clusterMaxSize=(0,Y.t_)("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new H({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,oe.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,oe.d9)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:(0,oe.d9)(this.popupTemplate)})}};(0,T._)([(0,j.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],de.prototype,"type",void 0),(0,T._)([(0,j.Cb)({type:Number,cast:ge=>"auto"===ge?ge:(0,Y.t_)(ge),json:{write:!0}})],de.prototype,"clusterRadius",void 0),(0,T._)([(0,j.Cb)({type:Number,cast:Y.t_,json:{write:!0}})],de.prototype,"clusterMinSize",void 0),(0,T._)([(0,j.Cb)({type:Number,cast:Y.t_,json:{write:!0}})],de.prototype,"clusterMaxSize",void 0),(0,T._)([(0,j.Cb)($.C_)],de.prototype,"popupEnabled",void 0),(0,T._)([(0,j.Cb)({type:ne.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],de.prototype,"popupTemplate",void 0),(0,T._)([(0,j.Cb)({types:ie.AH})],de.prototype,"symbol",void 0),(0,T._)([(0,j.Cb)({type:[J.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],de.prototype,"labelingInfo",void 0),(0,T._)([(0,j.Cb)($.iR)],de.prototype,"labelsVisible",void 0),(0,T._)([(0,j.Cb)({type:[F],json:{write:!0}})],de.prototype,"fields",void 0),de=H=(0,T._)([(0,B.j)("esri.layers.support.FeatureReductionCluster")],de);const ee=de;var ye=C(47058);const le={types:{key:"type",base:x.Z,typeMap:{selection:ye.Z,cluster:ee}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:x.Z,typeMap:{selection:ee}}},"web-scene":{types:{key:"type",base:x.Z,typeMap:{selection:ye.Z}}}}}}},55911:(ut,Oe,C)=>{"use strict";C.d(Oe,{v:()=>oe});var x=C(63290),T=C(36255),ne=C(60466),ie=C(36630);const te=x.Z.getLogger("esri.layers.support.fieldProperties");function oe(){return{fields:{type:[T.Z],value:null},fieldsIndex:{readOnly:!0,get(){return new ne.Z(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(Y){this._userOutFields=Y,this.notifyChange("outFields")},get:function(){const Y=this._userOutFields;if(!Y||!Y.length)return null;if(Y.includes("*"))return["*"];if(!this.fields)return Y;for(const j of Y)this.fieldsIndex.has(j)||te.error("field-attributes-layer:invalid-field",`Invalid field ${j} found in outFields`,{layer:this,outFields:Y});return(0,ie.Q0)(this.fieldsIndex,Y)}}}}},85:(ut,Oe,C)=>{"use strict";C.d(Oe,{v:()=>T});const T=new(C(2076).Xn)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},36630:(ut,Oe,C)=>{"use strict";C.d(Oe,{io:()=>H,vl:()=>ue,ZV:()=>Me,AB:()=>F,gd:()=>P,Ll:()=>he,Mu:()=>Qe,Qj:()=>xe,R9:()=>st,Q0:()=>V,YN:()=>Z,UF:()=>ae,O5:()=>le,CH:()=>Te,os:()=>$e,H7:()=>rr,qN:()=>vr,Pz:()=>Ht,Lk:()=>$,Qc:()=>er,vP:()=>Ze});var te,Ue,x=C(15861),T=C(26584),ne=C(62208),ie=C(94113);(Ue=te||(te={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",Ue.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var L=C(46679);const B=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],X=["field","normalizationField"];function Z(Ue,it){if(null!=Ue&&null!=it)for(const wt of Array.isArray(Ue)?Ue:[Ue])if(z(B,wt,it),"visualVariables"in wt&&wt.visualVariables)for(const nr of wt.visualVariables)z(X,nr,it)}function z(Ue,it,wt){if(Ue)for(const nr of Ue){const wr=(0,ie.hS)(nr,it),Dr=wr&&"function"!=typeof wr&&wt.get(wr);Dr&&(0,ie.RB)(nr,Dr.name,it)}}function ae(Ue,it){if(null!=Ue&&null!=it&&it.fields.length)if("startField"in Ue){const wt=it.get(Ue.startField),nr=it.get(Ue.endField);Ue.startField=wt&&wt.name||null,Ue.endField=nr&&nr.name||null}else{const wt=it.get(Ue.startTimeField),nr=it.get(Ue.endTimeField);Ue.startTimeField=wt&&wt.name||null,Ue.endTimeField=nr&&nr.name||null}}const K=new Set;function V(Ue,it){return Ue&&it?(K.clear(),P(K,Ue,it),Array.from(K).sort()):[]}function P(Ue,it,wt){var nr;if(wt)if(null!=it&&null!=(nr=it.fields)&&nr.length)if(wt.includes("*"))for(const{name:wr}of it.fields)Ue.add(wr);else for(const wr of wt)F(Ue,it,wr);else{if(wt.includes("*"))return Ue.clear(),void Ue.add("*");for(const wr of wt)Ue.add(wr)}}function F(Ue,it,wt){if("string"==typeof wt)if(it){const nr=it.get(wt);nr&&Ue.add(nr.name)}else Ue.add(wt)}function $(Ue,it){return(0,ne.Wi)(it)||(0,ne.Wi)(Ue)?[]:it.includes("*")?Ue.fields.map(wt=>wt.name):it}function H(Ue,it,wt){return de.apply(this,arguments)}function de(){return de=(0,x.Z)(function*(Ue,it,wt){var nr;if(!wt)return;const{arcadeUtils:wr}=yield(0,L.LC)(),Dr=wr.extractFieldNames(wt,null==it||null==(nr=it.fields)?void 0:nr.map(kr=>kr.name));for(const kr of Dr)F(Ue,it,kr)}),de.apply(this,arguments)}function ee(Ue,it,wt){return ye.apply(this,arguments)}function ye(){return ye=(0,x.Z)(function*(Ue,it,wt){if(wt&&"1=1"!==wt){const nr=(yield C.e(410).then(C.bind(C,10410))).WhereClause.create(wt,it);if(!nr.isStandardized)throw new T.Z("fieldUtils:collectFilterFields","Where clause is not standardized");P(Ue,it,nr.fieldNames)}}),ye.apply(this,arguments)}function le({displayField:Ue,fields:it}){return Ue||(it&&it.length?se(it,"name-or-title")||se(it,"unique-identifier")||se(it,"type-or-category")||function ge(Ue){for(const it of Ue){if(!it||!it.name)continue;const wt=it.name.toLowerCase();if(wt.indexOf("name")>-1||wt.indexOf("title")>-1)return it.name}return null}(it):null)}function se(Ue,it){for(const wt of Ue)if(wt&&wt.valueType&&wt.valueType===it)return wt.name;return null}function ue(Ue,it){return me.apply(this,arguments)}function me(){return me=(0,x.Z)(function*(Ue,it){if(!it)return;const wt=(0,ie.hS)("elevationInfo.featureExpressionInfo",it);return wt?wt.collectRequiredFields(Ue,it.fieldsIndex):void 0}),me.apply(this,arguments)}function ve(Ue,it,wt){return fe.apply(this,arguments)}function fe(){return fe=(0,x.Z)(function*(Ue,it,wt){wt.outStatistic.onStatisticValueExpression?H(Ue,it,wt.outStatistic.onStatisticValueExpression):Ue.add(wt.outStatistic.onStatisticField)}),fe.apply(this,arguments)}function Me(Ue,it,wt){return ce.apply(this,arguments)}function ce(){return ce=(0,x.Z)(function*(Ue,it,wt){var nr,wr;if(!it||!wt||"cluster"!==wt.type)return;const Dr=[];if(null!=(nr=wt.popupTemplate)&&nr.expressionInfos&&Dr.push(...wt.popupTemplate.expressionInfos.map(kr=>H(Ue,it.fieldsIndex,kr.expression))),Array.isArray(null==(wr=wt.popupTemplate)?void 0:wr.content)){const kr=wt.popupTemplate.content;for(const Wr of kr)"expression"===Wr.type&&Wr.expressionInfo&&Dr.push(H(Ue,it.fieldsIndex,Wr.expressionInfo.expression))}wt.fields&&Dr.push(...wt.fields.map(kr=>ve(Ue,it.fieldsIndex,kr))),yield Promise.all(Dr)}),ce.apply(this,arguments)}function he(Ue,it,wt){return De.apply(this,arguments)}function De(){return De=(0,x.Z)(function*(Ue,it,wt){it&&(it.timeInfo&&(0,ne.pC)(wt)&&wt.timeExtent&&P(Ue,it.fieldsIndex,[it.timeInfo.startField,it.timeInfo.endField]),it.floorInfo&&P(Ue,it.fieldsIndex,[it.floorInfo.floorField]),(0,ne.pC)(wt)&&(0,ne.pC)(wt.where)&&(yield ee(Ue,it.fieldsIndex,wt.where)))}),De.apply(this,arguments)}function xe(Ue,it,wt){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,x.Z)(function*(Ue,it,wt){it&&wt&&(yield Promise.all(wt.map(nr=>je(Ue,it,nr))))}),Pe.apply(this,arguments)}function je(Ue,it,wt){return rt.apply(this,arguments)}function rt(){return rt=(0,x.Z)(function*(Ue,it,wt){it&&wt&&(wt.valueExpression?yield H(Ue,it.fieldsIndex,wt.valueExpression):wt.field&&F(Ue,it.fieldsIndex,wt.field))}),rt.apply(this,arguments)}function Te(Ue){if(!Ue)return[];const it="editFieldsInfo"in Ue&&Ue.editFieldsInfo;return it?V(Ue.fieldsIndex,[it&&it.creatorField,it&&it.creationDateField,it&&it.editorField,it&&it.editDateField]):[]}function Qe(Ue,it){return Je.apply(this,arguments)}function Je(){return Je=(0,x.Z)(function*(Ue,it){const{labelingInfo:wt,fieldsIndex:nr}=it;wt&&wt.length&&(yield Promise.all(wt.map(wr=>re(Ue,nr,wr))))}),Je.apply(this,arguments)}function re(Ue,it,wt){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,x.Z)(function*(Ue,it,wt){if(!wt)return;const nr=wt.getLabelExpression(),wr=wt.where;if("arcade"===nr.type)yield H(Ue,it,nr.expression);else{const Dr=nr.expression.match(/{[^}]*}/g);Dr&&Dr.forEach(kr=>{F(Ue,it,kr.slice(1,-1))})}yield ee(Ue,it,wr)}),Ee.apply(this,arguments)}function $e(Ue){const it=Ue.defaultValue;return void 0!==it&&Pt(Ue,it)?it:Ue.nullable?null:void 0}function tt(Ue){return"number"==typeof Ue&&!isNaN(Ue)&&isFinite(Ue)}function pt(Ue){return null===Ue||tt(Ue)}const mt="isInteger"in Number?Number.isInteger:Ue=>"number"==typeof Ue&&isFinite(Ue)&&Math.floor(Ue)===Ue;function bt(Ue){return null===Ue||mt(Ue)}function yt(Ue){return null!=Ue&&"string"==typeof Ue}function at(Ue){return null===Ue||yt(Ue)}function Mt(){return!0}function Pt(Ue,it){let wt;switch(Ue.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":wt=Ue.nullable?bt:mt;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":wt=Ue.nullable?pt:tt;break;case"string":case"esriFieldTypeString":wt=Ue.nullable?at:yt;break;default:wt=Mt}return 1===arguments.length?wt:wt(it)}const Zt=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function rr(Ue){return null!=Ue&&Zt.has(Ue.type)}function vr(Ue){return null!=Ue&&("string"===Ue.type||"esriFieldTypeString"===Ue.type)}var _t,$t;function Ht(Ue){return null==Ue||"number"==typeof Ue&&isNaN(Ue)?null:Ue}function er(Ue,it){return Ue.nullable&&null===it?null:rr(Ue)&&!function lr(Ue,it){const wt="string"==typeof Ue?ht(Ue):Ue;return!!wt&&(wt.isInteger?mt(it)&&it>=wt.min&&it<=wt.max:it>=wt.min&&it<=wt.max)}(Ue.type,Number(it))?_t.OUT_OF_RANGE:Pt(Ue,it)?Ue.domain?function Y(Ue,it){switch(Ue.type){case"range":{const nr="range"in Ue?Ue.range[1]:Ue.maxValue;if(+it<("range"in Ue?Ue.range[0]:Ue.minValue)||+it>nr)return te.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==Ue.codedValues||Ue.codedValues.every(wt=>null==wt||wt.code!==it))return te.INVALID_CODED_VALUE}return null}(Ue.domain,it):null:$t.INVALID_TYPE}function ht(Ue){switch(Ue){case"esriFieldTypeSmallInteger":case"small-integer":return Nt;case"esriFieldTypeInteger":case"integer":return Wt;case"esriFieldTypeSingle":case"single":return Qt;case"esriFieldTypeDouble":case"double":return Kt}}(function(Ue){Ue.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(_t||(_t={})),function(Ue){Ue.INVALID_TYPE="type-validation-error::invalid-type"}($t||($t={}));const Nt={min:-32768,max:32767,isInteger:!0},Wt={min:-2147483648,max:2147483647,isInteger:!0},Qt={min:-34e37,max:12e37,isInteger:!1},Kt={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Ze(Ue,it,wt){switch(Ue){case te.INVALID_CODED_VALUE:return`Value ${wt} is not in the coded domain - field: ${it.name}, domain: ${JSON.stringify(it.domain)}`;case te.VALUE_OUT_OF_RANGE:return`Value ${wt} is out of the range of valid values - field: ${it.name}, domain: ${JSON.stringify(it.domain)}`;case $t.INVALID_TYPE:return`Value ${wt} is not a valid value for the field type - field: ${it.name}, type: ${it.type}, nullable: ${it.nullable}`;case _t.OUT_OF_RANGE:{const{min:nr,max:wr}=ht(it.type);return`Value ${wt} is out of range for the number type - field: ${it.name}, type: ${it.type}, value range is ${nr} to ${wr}`}}}function st(Ue,it){return!function Ge(Ue,it,wt){if(!it||!it.attributes||!Ue){if((0,ne.pC)(wt))for(const Dr of Ue)wt.add(Dr);return!0}const nr=it.attributes;let wr=!1;for(const Dr of Ue)if(!(Dr in nr)){if(wr=!0,!(0,ne.pC)(wt))break;wt.add(Dr)}return wr}(Ue,it,null)}},86793:(ut,Oe,C)=>{"use strict";C.d(Oe,{dI:()=>V,hV:()=>z,YI:()=>ae,UO:()=>K,el:()=>de,z7:()=>Z});var x=C(77275);const T="__begin__",ne="__end__",ie=new RegExp(T,"ig"),te=new RegExp(ne,"ig"),oe=new RegExp("^"+T,"i"),Y=new RegExp(ne+"$","i");function Z(ee){return ee.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function z(ee){const ye={expression:"",type:"none"};return ee.labelExpressionInfo?ee.labelExpressionInfo.value?(ye.expression=ee.labelExpressionInfo.value,ye.type="conventional"):ee.labelExpressionInfo.expression&&(ye.expression=ee.labelExpressionInfo.expression,ye.type="arcade"):null!=ee.labelExpression&&(ye.expression=function X(ee){return ee.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(ee.labelExpression),ye.type="conventional"),ye}function ae(ee){const ye=z(ee);if(!ye)return null;switch(ye.type){case"conventional":return V(ye.expression);case"arcade":return ye.expression}return null}function K(ee){const ye=z(ee);if(!ye)return null;switch(ye.type){case"conventional":return function F(ee){const ye=ee.match(P);return ye&&ye[1].trim()||null}(ye.expression);case"arcade":return de(ye.expression)}return null}function V(ee){let ye;return ee?(ye=(0,x.gx)(ee,le=>T+'$feature["'+le+'"]'+ne),ye=oe.test(ye)?ye.replace(oe,""):'"'+ye,ye=Y.test(ye)?ye.replace(Y,""):ye+'"',ye=ye.replace(ie,'" + ').replace(te,' + "')):ye='""',ye}const P=/^\s*\{([^}]+)\}\s*$/i,$=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,J=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,H=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function de(ee){if(!ee)return null;let ye=$.exec(ee)||J.exec(ee);return ye?ye[1]||ye[3]:(ye=H.exec(ee),ye?ye[2]:null)}},62667:(ut,Oe,C)=>{"use strict";C.d(Oe,{r:()=>ne});var x=C(170);const T=/\[([^\[\]]+)\]/gi;function ne(te,oe,Y){return te?te.map(j=>{const L=new x.Z;if(L.read(j,Y),L.labelExpression){const B=oe.fields||oe.layerDefinition&&oe.layerDefinition.fields||this.fields;L.labelExpression=L.labelExpression.replace(T,(X,Z)=>`[${function ie(te,oe){if(!oe)return te;const Y=te.toLowerCase();for(let j=0;j<oe.length;j++){const L=oe[j].name;if(L.toLowerCase()===Y)return L}return te}(Z,B)}]`)}return L}):null}},15283:(ut,Oe,C)=>{"use strict";C.d(Oe,{n:()=>fe});var F,x=C(17626),T=C(2076),ne=C(86162),ie=C(77712),Y=(C(85931),C(8314),C(66656)),j=C(55342),L=C(68653),B=C(76898),X=C(90912),Z=C(383),z=C(36255),ae=C(48370),V=(C(29132),C(65234)),P=C(71774);let $=F=class extends ne.wq{constructor(Me){super(Me),this.type="query-table"}clone(){var Me;const{workspaceId:ce,query:he,oidFields:De,spatialReference:xe,geometryType:Pe}=this,je={workspaceId:ce,query:he,oidFields:De,spatialReference:null!=(Me=null==xe?void 0:xe.clone())?Me:void 0,geometryType:Pe};return new F(je)}};var J;(0,x._)([(0,j.J)({queryTable:"query-table"})],$.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],$.prototype,"workspaceId",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],$.prototype,"query",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],$.prototype,"oidFields",void 0),(0,x._)([(0,ie.Cb)({type:V.Z,json:{write:!0}})],$.prototype,"spatialReference",void 0),(0,x._)([(0,j.J)(P.Mk)],$.prototype,"geometryType",void 0),$=F=(0,x._)([(0,B.j)("esri.layers.support.source.QueryTableDataSource")],$);let H=J=class extends ne.wq{constructor(Me){super(Me),this.type="raster"}clone(){const{workspaceId:Me,dataSourceName:ce}=this;return new J({workspaceId:Me,dataSourceName:ce})}};var de;(0,x._)([(0,j.J)({raster:"raster"})],H.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],H.prototype,"dataSourceName",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],H.prototype,"workspaceId",void 0),H=J=(0,x._)([(0,B.j)("esri.layers.support.source.RasterDataSource")],H);let ee=de=class extends ne.wq{constructor(Me){super(Me),this.type="table"}clone(){const{workspaceId:Me,gdbVersion:ce,dataSourceName:he}=this;return new de({workspaceId:Me,gdbVersion:ce,dataSourceName:he})}};var ye,le;(0,x._)([(0,j.J)({table:"table"})],ee.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],ee.prototype,"workspaceId",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],ee.prototype,"gdbVersion",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],ee.prototype,"dataSourceName",void 0),ee=de=(0,x._)([(0,B.j)("esri.layers.support.source.TableDataSource")],ee);const ge=(0,T.wY)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let se=ye=class extends ne.wq{constructor(Me){super(Me),this.type="join-table"}readLeftTableSource(Me,ce,he){return pe()(Me,ce,he)}castLeftTableSource(Me){return(0,X.N7)(me(),Me)}readRightTableSource(Me,ce,he){return pe()(Me,ce,he)}castRightTableSource(Me){return(0,X.N7)(me(),Me)}clone(){var Me,ce;const{leftTableKey:he,rightTableKey:De,leftTableSource:xe,rightTableSource:Pe,joinType:je}=this,rt={leftTableKey:he,rightTableKey:De,leftTableSource:null!=(Me=null==xe?void 0:xe.clone())?Me:void 0,rightTableSource:null!=(ce=null==Pe?void 0:Pe.clone())?ce:void 0,joinType:je};return new ye(rt)}};(0,x._)([(0,j.J)({joinTable:"join-table"})],se.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],se.prototype,"leftTableKey",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],se.prototype,"rightTableKey",void 0),(0,x._)([(0,ie.Cb)({json:{write:!0}})],se.prototype,"leftTableSource",void 0),(0,x._)([(0,L.r)("leftTableSource")],se.prototype,"readLeftTableSource",null),(0,x._)([(0,Y.p)("leftTableSource")],se.prototype,"castLeftTableSource",null),(0,x._)([(0,ie.Cb)({json:{write:!0}})],se.prototype,"rightTableSource",void 0),(0,x._)([(0,L.r)("rightTableSource")],se.prototype,"readRightTableSource",null),(0,x._)([(0,Y.p)("rightTableSource")],se.prototype,"castRightTableSource",null),(0,x._)([(0,j.J)(ge)],se.prototype,"joinType",void 0),se=ye=(0,x._)([(0,B.j)("esri.layers.support.source.JoinTableDataSource")],se);let Q=null;function pe(){return Q||(Q=(0,Z.d)({types:me()})),Q}let ue=null;function me(){return ue||(ue={key:"type",base:null,typeMap:{"data-layer":fe,"map-layer":ae.R}}),ue}const ve={key:"type",base:null,typeMap:{"join-table":se,"query-table":$,raster:H,table:ee}};let fe=le=class extends ne.wq{constructor(Me){super(Me),this.type="data-layer"}clone(){const{fields:Me,dataSource:ce}=this;return new le({fields:Me,dataSource:ce})}};(0,x._)([(0,j.J)({dataLayer:"data-layer"})],fe.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:[z.Z],json:{write:!0}})],fe.prototype,"fields",void 0),(0,x._)([(0,ie.Cb)({types:ve,json:{write:!0}})],fe.prototype,"dataSource",void 0),fe=le=(0,x._)([(0,B.j)("esri.layers.support.source.DataLayerSource")],fe),fe.from=(0,X.se)(fe)},48370:(ut,Oe,C)=>{"use strict";C.d(Oe,{R:()=>B});var L,x=C(17626),T=C(86162),ne=C(77712),oe=(C(85931),C(8314),C(90912)),Y=C(55342),j=C(76898);let B=L=class extends T.wq{constructor(X){super(X),this.type="map-layer"}clone(){const{mapLayerId:X,gdbVersion:Z}=this;return new L({mapLayerId:X,gdbVersion:Z})}};(0,x._)([(0,Y.J)({mapLayer:"map-layer"})],B.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({type:oe.z8,json:{write:!0}})],B.prototype,"mapLayerId",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],B.prototype,"gdbVersion",void 0),B=L=(0,x._)([(0,j.j)("esri.layers.support.source.MapLayerSource")],B)},39605:(ut,Oe,C)=>{"use strict";C.d(Oe,{W:()=>ne,v:()=>ie});var x=C(50645);const T={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(te,oe,Y)=>{"-"===oe.charAt(0)?te.style.setProperty(oe,Y):te.style[oe]=Y}};let ne=te=>(0,x.l7)(T,te),ie={create:(te,oe)=>(oe=ne(oe),(0,x.WV)(te,document.createElement("div"),void 0,oe),(0,x.UQ)(te,oe)),append:(te,oe,Y)=>(Y=ne(Y),(0,x.WV)(oe,te,void 0,Y),(0,x.UQ)(oe,Y)),insertBefore:(te,oe,Y)=>(Y=ne(Y),(0,x.WV)(oe,te.parentNode,te,Y),(0,x.UQ)(oe,Y)),merge:(te,oe,Y)=>(Y=ne(Y),oe.domNode=te,(0,x.Yj)(te,oe,Y),(0,x.UQ)(oe,Y)),replace:(te,oe,Y)=>(Y=ne(Y),(0,x.WV)(oe,te.parentNode,te,Y),te.parentNode.removeChild(te),(0,x.UQ)(oe,Y))}},50645:(ut,Oe,C)=>{"use strict";C.d(Oe,{WV:()=>de,UQ:()=>ge,l7:()=>Y,Yj:()=>H});var x=C(38570);const T="http://www.w3.org/",ne=`${T}2000/svg`,ie=`${T}1999/xlink`;let te,oe=[],Y=(se,Q)=>{let pe={};return Object.keys(se).forEach(ue=>{pe[ue]=se[ue]}),Q&&Object.keys(Q).forEach(ue=>{pe[ue]=Q[ue]}),pe},j=(se,Q)=>se.vnodeSelector===Q.vnodeSelector&&(se.properties&&Q.properties?se.properties.key===Q.properties.key&&se.properties.bind===Q.properties.bind:!se.properties&&!Q.properties),L=se=>{if("string"!=typeof se)throw new Error("Style values must be strings")},B=(se,Q,pe)=>{if(""!==Q.vnodeSelector)for(let ue=pe;ue<se.length;ue++)if(j(se[ue],Q))return ue;return-1},X=(se,Q,pe,ue)=>{let me=se[Q];if(""===me.vnodeSelector)return;let ve=me.properties;if(!(ve?void 0===ve.key?ve.bind:ve.key:void 0))for(let fe=0;fe<se.length;fe++)if(fe!==Q&&j(se[fe],me))throw new Error(`${pe.vnodeSelector} had a ${me.vnodeSelector} child ${"added"===ue?ue:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)},Z=se=>{if(se.properties){let Q=se.properties.enterAnimation;Q&&Q(se.domNode,se.properties)}},z=[],ae=!1,K=se=>{(se.children||[]).forEach(K),se.properties&&se.properties.afterRemoved&&se.properties.afterRemoved.apply(se.properties.bind||se.properties,[se.domNode])},V=()=>{ae=!1,z.forEach(K),z.length=0},P=se=>{z.push(se),ae||(ae=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(V,{timeout:16}):setTimeout(V,16))},F=se=>{let Q=se.domNode;if(se.properties){let pe=se.properties.exitAnimation;if(pe)return Q.style.pointerEvents="none",void pe(Q,()=>{Q.parentNode&&(Q.parentNode.removeChild(Q),P(se))},se.properties)}Q.parentNode&&(Q.parentNode.removeChild(Q),P(se))},$=(se,Q,pe)=>{if(!Q)return;let ue=pe.eventHandlerInterceptor,me=Object.keys(Q),ve=me.length;for(let fe=0;fe<ve;fe++){let Me=me[fe],ce=Q[Me];if("className"===Me)throw new Error('Property "className" is not supported, use "class".');if("class"===Me)ee(se,ce,!0);else if("classes"===Me){let he=Object.keys(ce),De=he.length;for(let xe=0;xe<De;xe++){let Pe=he[xe];ce[Pe]&&se.classList.add(Pe)}}else if("styles"===Me){let he=Object.keys(ce),De=he.length;for(let xe=0;xe<De;xe++){let Pe=he[xe],je=ce[Pe];je&&(L(je),pe.styleApplyer(se,Pe,je))}}else if("key"!==Me&&null!=ce){let he=typeof ce;"function"===he?(0===Me.lastIndexOf("on",0)&&(ue&&(ce=ue(Me,ce,se,Q)),"oninput"===Me&&function(){let De=ce;ce=function(xe){De.apply(this,[xe]),xe.target["oninput-value"]=xe.target.value}}()),se[Me]=ce):pe.namespace===ne?"href"===Me?se.setAttributeNS(ie,Me,ce):se.setAttribute(Me,ce):"string"===he&&"value"!==Me?"innerHTML"===Me?se[Me]=x.w3.sanitize(ce):se.setAttribute(Me,ce):se[Me]=ce}}},H=(se,Q,pe)=>{((se,Q,pe)=>{if(Q)for(let ue of Q)de(ue,se,void 0,pe)})(se,Q.children,pe),Q.text&&(se.textContent=Q.text),$(se,Q.properties,pe),Q.properties&&Q.properties.afterCreate&&Q.properties.afterCreate.apply(Q.properties.bind||Q.properties,[se,pe,Q.vnodeSelector,Q.properties,Q.children])},de=(se,Q,pe,ue)=>{let me,ve=0,fe=se.vnodeSelector,Me=Q.ownerDocument;if(""===fe)me=se.domNode=Me.createTextNode(se.text),void 0!==pe?Q.insertBefore(me,pe):Q.appendChild(me);else{for(let ce=0;ce<=fe.length;++ce){let he=fe.charAt(ce);if(ce===fe.length||"."===he||"#"===he){let De=fe.charAt(ve-1),xe=fe.slice(ve,ce);"."===De?me.classList.add(xe):"#"===De?me.id=xe:("svg"===xe&&(ue=Y(ue,{namespace:ne})),void 0!==ue.namespace?me=se.domNode=Me.createElementNS(ue.namespace,xe):(me=se.domNode=se.domNode||Me.createElement(xe),"input"===xe&&se.properties&&void 0!==se.properties.type&&me.setAttribute("type",se.properties.type)),void 0!==pe?Q.insertBefore(me,pe):me.parentNode!==Q&&Q.appendChild(me)),ve=ce+1}}H(me,se,ue)}},ee=(se,Q,pe)=>{Q&&Q.split(" ").forEach(ue=>{ue&&se.classList.toggle(ue,pe)})};te=(se,Q,pe)=>{let ue=se.domNode,me=!1;if(se===Q)return!1;let ve=!1;if(""===Q.vnodeSelector){if(Q.text!==se.text){let fe=ue.ownerDocument.createTextNode(Q.text);return ue.parentNode.replaceChild(fe,ue),Q.domNode=fe,me=!0,me}Q.domNode=ue}else 0===Q.vnodeSelector.lastIndexOf("svg",0)&&(pe=Y(pe,{namespace:ne})),se.text!==Q.text&&(ve=!0,void 0===Q.text?ue.removeChild(ue.firstChild):ue.textContent=Q.text),Q.domNode=ue,ve=((se,Q,pe,ue,me)=>{if(pe===ue)return!1;let ve,fe=(pe=pe||oe).length,Me=(ue=ue||oe).length,ce=0,he=0,De=!1;for(;he<Me;){let xe=ce<fe?pe[ce]:void 0,Pe=ue[he];if(void 0!==xe&&j(xe,Pe))De=te(xe,Pe,me)||De,ce++;else{let je=B(pe,Pe,ce+1);if(je>=0){for(ve=ce;ve<je;ve++)F(pe[ve]),X(pe,ve,se,"removed");De=te(pe[je],Pe,me)||De,ce=je+1}else de(Pe,Q,ce<fe?pe[ce].domNode:void 0,me),Z(Pe),X(ue,he,se,"added")}he++}if(fe>ce)for(ve=ce;ve<fe;ve++)F(pe[ve]),X(pe,ve,se,"removed");return De})(Q,ue,se.children,Q.children,pe)||ve,ve=((se,Q,pe,ue)=>{if(!pe)return;let me=!1,ve=Object.keys(pe),fe=ve.length;for(let Me=0;Me<fe;Me++){let ce=ve[Me],he=pe[ce],De=Q[ce];if("class"===ce)De!==he&&(ee(se,De,!1),ee(se,he,!0));else if("classes"===ce){let xe=se.classList,Pe=Object.keys(he),je=Pe.length;for(let rt=0;rt<je;rt++){let Le=Pe[rt],Ce=!!he[Le];Ce!==!!De[Le]&&(me=!0,Ce?xe.add(Le):xe.remove(Le))}}else if("styles"===ce){let xe=Object.keys(he),Pe=xe.length;for(let je=0;je<Pe;je++){let rt=xe[je],Le=he[rt];Le!==De[rt]&&(me=!0,Le?(L(Le),ue.styleApplyer(se,rt,Le)):ue.styleApplyer(se,rt,""))}}else if(he||"string"!=typeof De||(he=""),"value"===ce){let xe=se[ce];xe!==he&&(se["oninput-value"]?xe===se["oninput-value"]:he!==De)&&(se[ce]=he,se["oninput-value"]=void 0),he!==De&&(me=!0)}else if(he!==De){let xe=typeof he;"function"===xe&&ue.eventHandlerInterceptor||(ue.namespace===ne?"href"===ce?se.setAttributeNS(ie,ce,he):se.setAttribute(ce,he):"string"===xe?"innerHTML"===ce?se[ce]=x.w3.sanitize(he):"role"===ce&&""===he?se.removeAttribute(ce):se.setAttribute(ce,he):se[ce]!==he&&(se[ce]=he),me=!0)}}return me})(ue,se.properties,Q.properties,pe)||ve,Q.properties&&Q.properties.afterUpdate&&Q.properties.afterUpdate.apply(Q.properties.bind||Q.properties,[ue,pe,Q.vnodeSelector,Q.properties,Q.children]);return ve&&Q.properties&&Q.properties.updateAnimation&&Q.properties.updateAnimation(ue,Q.properties,se.properties),me};let ge=(se,Q)=>({getLastRender:()=>se,update:pe=>{if(se.vnodeSelector!==pe.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let ue=se;se=pe,te(ue,pe,Q)},domNode:se.domNode})},62996:(ut,Oe,C)=>{"use strict";C.d(Oe,{E:()=>oe});var x=C(39605);let T,ne=(Y,j)=>{let L=[];for(;Y&&Y!==j;)L.push(Y),Y=Y.parentNode;return L};T=Array.prototype.find?(Y,j)=>Y.find(j):(Y,j)=>Y.filter(j)[0];let ie=(Y,j)=>{let L=Y;return j.forEach(B=>{L=L&&L.children?T(L.children,X=>X.domNode===B):void 0}),L},te=(Y,j,L)=>{let B=function(X){L("domEvent",X);let Z=j(),z=ne(X.currentTarget,Z.domNode);z.reverse();let ae,K=ie(Z.getLastRender(),z);return Y.scheduleRender(),K&&(ae=K.properties[`on${X.type}`].apply(K.properties.bind||this,arguments)),L("domEventProcessed",X),ae};return(X,Z,z,ae)=>B},oe=Y=>{let j,L,B=(0,x.W)(Y),X=B.performanceLogger,Z=!0,z=!1,ae=[],K=[],V=(F,$,J)=>{let H;B.eventHandlerInterceptor=te(j,()=>H,X),H=F($,J(),B),ae.push(H),K.push(J)},P=()=>{if(L=void 0,Z){Z=!1,X("renderStart",void 0);for(let F=0;F<ae.length;F++){let $=K[F]();X("rendered",void 0),ae[F].update($),X("patched",void 0)}X("renderDone",void 0),Z=!0}};return j={renderNow:P,scheduleRender:()=>{L||z||(L=requestAnimationFrame(P))},stop:()=>{L&&(cancelAnimationFrame(L),L=void 0),z=!0},resume:()=>{z=!1,Z=!0,j.scheduleRender()},append:(F,$)=>{V(x.v.append,F,$)},insertBefore:(F,$)=>{V(x.v.insertBefore,F,$)},merge:(F,$)=>{V(x.v.merge,F,$)},replace:(F,$)=>{V(x.v.replace,F,$)},detach:F=>{for(let $=0;$<K.length;$++)if(K[$]===F)return K.splice($,1),ae.splice($,1)[0];throw new Error("renderFunction was not found")}},j}},38159:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let L=j=class extends T.wq{constructor(X){super(X),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new j({title:this.title,expression:this.expression})}};(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],L.prototype,"title",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],L.prototype,"expression",void 0),(0,x._)([(0,ne.Cb)({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"returnType",void 0),L=j=(0,x._)([(0,Y.j)("esri.popup.ElementExpressionInfo")],L);const B=L},38439:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let L=j=class extends T.wq{constructor(X){super(X),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new j({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],L.prototype,"name",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],L.prototype,"title",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],L.prototype,"expression",void 0),(0,x._)([(0,ne.Cb)({type:["string","number"],json:{write:!0}})],L.prototype,"returnType",void 0),L=j=(0,x._)([(0,Y.j)("esri.popup.ExpressionInfo")],L);const B=L},25621:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Z});var B,x=C(17626),T=C(2076),ne=C(86162),ie=C(58817),te=C(77712),Y=(C(90912),C(55342)),j=C(76898),L=C(66845);let X=B=class extends ne.wq{constructor(z){super(z),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new B({fieldName:this.fieldName,format:this.format?(0,ie.d9)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],X.prototype,"fieldName",void 0),(0,x._)([(0,te.Cb)({type:L.Z,json:{write:!0}})],X.prototype,"format",void 0),(0,x._)([(0,te.Cb)({type:Boolean,json:{write:!0,default:!1}})],X.prototype,"isEditable",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],X.prototype,"label",void 0),(0,x._)([(0,Y.J)(new T.Xn({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],X.prototype,"stringFieldOption",void 0),(0,x._)([(0,te.Cb)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],X.prototype,"statisticType",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],X.prototype,"tooltip",void 0),(0,x._)([(0,te.Cb)({type:Boolean,json:{write:!0}})],X.prototype,"visible",void 0),X=B=(0,x._)([(0,j.j)("esri.popup.FieldInfo")],X);const Z=X},55664:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(55013);let L=j=class extends Y.Z{constructor(X){super(X),this.description=null,this.displayType=null,this.title=null,this.type="attachments"}clone(){return new j({description:this.description,displayType:this.displayType,title:this.title})}};(0,x._)([(0,T.Cb)({type:String,json:{write:!0}})],L.prototype,"description",void 0),(0,x._)([(0,T.Cb)({type:["auto","preview","list"],json:{write:!0}})],L.prototype,"displayType",void 0),(0,x._)([(0,T.Cb)({type:String,json:{write:!0}})],L.prototype,"title",void 0),(0,x._)([(0,T.Cb)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=j=(0,x._)([(0,oe.j)("esri.popup.content.AttachmentsContent")],L);const B=L},89594:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(85812),j=C(82657);let B=L=class extends Y.Z{constructor(Z){super(Z),this.type="bar-chart"}clone(){return new L({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,x._)([(0,T.Cb)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:j.l.write}})],B.prototype,"type",void 0),B=L=(0,x._)([(0,oe.j)("esri.popup.content.BarChartMediaInfo")],B);const X=B},81590:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(85812),j=C(82657);let B=L=class extends Y.Z{constructor(Z){super(Z),this.type="column-chart"}clone(){return new L({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,x._)([(0,T.Cb)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:j.l.write}})],B.prototype,"type",void 0),B=L=(0,x._)([(0,oe.j)("esri.popup.content.ColumnChartMediaInfo")],B);const X=B},55013:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>L});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let j=class extends T.wq{constructor(B){super(B),this.type=null}};(0,x._)([(0,ne.Cb)({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],j.prototype,"type",void 0),j=(0,x._)([(0,Y.j)("esri.popup.content.Content")],j);const L=j},16615:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>L});var Y,x=C(17626),T=C(58817),ne=C(77712),te=(C(90912),C(76898)),oe=C(55013);let j=Y=class extends oe.Z{constructor(B){super(B),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Y({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?(0,T.d9)(this.outFields):null})}};(0,x._)([(0,ne.Cb)()],j.prototype,"creator",void 0),(0,x._)([(0,ne.Cb)()],j.prototype,"destroyer",void 0),(0,x._)([(0,ne.Cb)()],j.prototype,"outFields",void 0),(0,x._)([(0,ne.Cb)({type:["custom"],readOnly:!0})],j.prototype,"type",void 0),j=Y=(0,x._)([(0,te.j)("esri.popup.content.CustomContent")],j);const L=j},82561:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(38159),j=C(55013);let B=L=class extends j.Z{constructor(Z){super(Z),this.expressionInfo=null,this.type="expression"}clone(){var Z;return new L({expressionInfo:null==(Z=this.expressionInfo)?void 0:Z.clone()})}};(0,x._)([(0,T.Cb)({type:Y.Z,json:{write:!0}})],B.prototype,"expressionInfo",void 0),(0,x._)([(0,T.Cb)({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],B.prototype,"type",void 0),B=L=(0,x._)([(0,oe.j)("esri.popup.content.ExpressionContent")],B);const X=B},75484:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(58817),ne=C(77712),te=(C(90912),C(76898)),oe=C(99433),Y=C(25621),j=C(55013);let B=L=class extends j.Z{constructor(Z){super(Z),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(Z,z){z.fieldInfos=Z&&Z.map(ae=>ae.toJSON())}clone(){return new L((0,T.d9)({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};(0,x._)([(0,ne.Cb)({type:Object,json:{write:!0}})],B.prototype,"attributes",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],B.prototype,"description",void 0),(0,x._)([(0,ne.Cb)({type:[Y.Z]})],B.prototype,"fieldInfos",void 0),(0,x._)([(0,oe.c)("fieldInfos")],B.prototype,"writeFieldInfos",null),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],B.prototype,"title",void 0),(0,x._)([(0,ne.Cb)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],B.prototype,"type",void 0),B=L=(0,x._)([(0,te.j)("esri.popup.content.FieldsContent")],B);const X=B},49455:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ae});var L,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(78297),j=C(86162);let B=L=class extends j.wq{constructor(K){super(K),this.linkURL=null,this.sourceURL=null}clone(){return new L({linkURL:this.linkURL,sourceURL:this.sourceURL})}};(0,x._)([(0,T.Cb)({type:String,json:{write:!0}})],B.prototype,"linkURL",void 0),(0,x._)([(0,T.Cb)({type:String,json:{write:!0}})],B.prototype,"sourceURL",void 0),B=L=(0,x._)([(0,oe.j)("esri.popup.content.support.ImageMediaInfoValue")],B);const X=B;var Z;let z=Z=class extends Y.Z{constructor(K){super(K),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new Z({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};(0,x._)([(0,T.Cb)({type:Number,json:{write:!0}})],z.prototype,"refreshInterval",void 0),(0,x._)([(0,T.Cb)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0),(0,x._)([(0,T.Cb)({type:X,json:{write:!0}})],z.prototype,"value",void 0),z=Z=(0,x._)([(0,oe.j)("esri.popup.content.ImageMediaInfo")],z);const ae=z},71981:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(85812),j=C(82657);let B=L=class extends Y.Z{constructor(Z){super(Z),this.type="line-chart"}clone(){return new L({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,x._)([(0,T.Cb)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:j.l.write}})],B.prototype,"type",void 0),B=L=(0,x._)([(0,oe.j)("esri.popup.content.LineChartMediaInfo")],B);const X=B},64531:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>P});var K,x=C(17626),T=C(58817),ne=C(77712),te=(C(90912),C(68653)),oe=C(76898),Y=C(99433),j=C(89594),L=C(81590),B=C(55013),X=C(49455),Z=C(71981),z=C(52023),ae=C(65560);let V=K=class extends B.Z{constructor(F){super(F),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(F){return F&&F.map($=>"image"===$.type?X.Z.fromJSON($):"barchart"===$.type?j.Z.fromJSON($):"columnchart"===$.type?L.Z.fromJSON($):"linechart"===$.type?Z.Z.fromJSON($):"piechart"===$.type?z.Z.fromJSON($):void 0).filter(Boolean)}writeMediaInfos(F,$){$.mediaInfos=F&&F.map(J=>J.toJSON())}clone(){return new K((0,T.d9)({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};(0,x._)([(0,ne.Cb)()],V.prototype,"activeMediaInfoIndex",void 0),(0,x._)([(0,ne.Cb)({type:Object,json:{write:!0}})],V.prototype,"attributes",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],V.prototype,"description",void 0),(0,x._)([(0,ne.Cb)({types:[ae.V]})],V.prototype,"mediaInfos",void 0),(0,x._)([(0,te.r)("mediaInfos")],V.prototype,"readMediaInfos",null),(0,x._)([(0,Y.c)("mediaInfos")],V.prototype,"writeMediaInfos",null),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],V.prototype,"title",void 0),(0,x._)([(0,ne.Cb)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],V.prototype,"type",void 0),V=K=(0,x._)([(0,oe.j)("esri.popup.content.MediaContent")],V);const P=V},52023:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(85812),j=C(82657);let B=L=class extends Y.Z{constructor(Z){super(Z),this.type="pie-chart"}clone(){return new L({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,x._)([(0,T.Cb)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:j.l.write}})],B.prototype,"type",void 0),B=L=(0,x._)([(0,oe.j)("esri.popup.content.PieChartMediaInfo")],B);const X=B},501:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(55013);let L=j=class extends Y.Z{constructor(X){super(X),this.text=null,this.type="text"}clone(){return new j({text:this.text})}};(0,x._)([(0,T.Cb)({type:String,json:{write:!0}})],L.prototype,"text",void 0),(0,x._)([(0,T.Cb)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=j=(0,x._)([(0,oe.j)("esri.popup.content.TextContent")],L);const B=L},85812:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var X,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(78297),j=C(86162),L=C(58817),B=C(77891);let Z=X=class extends j.wq{constructor(V){super(V),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new X({fields:(0,L.d9)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};(0,x._)([(0,T.Cb)({type:[String],json:{write:!0}})],Z.prototype,"fields",void 0),(0,x._)([(0,T.Cb)({type:String,json:{write:!0}})],Z.prototype,"normalizeField",void 0),(0,x._)([(0,T.Cb)({type:[B.Z],json:{read:!1}})],Z.prototype,"series",void 0),(0,x._)([(0,T.Cb)({type:String,json:{write:!0}})],Z.prototype,"tooltipField",void 0),Z=X=(0,x._)([(0,oe.j)("esri.popup.content.support.ChartMediaInfoValue")],Z);const z=Z;let ae=class extends Y.Z{constructor(V){super(V),this.type=null,this.value=null}};(0,x._)([(0,T.Cb)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ae.prototype,"type",void 0),(0,x._)([(0,T.Cb)({type:z,json:{write:!0}})],ae.prototype,"value",void 0),ae=(0,x._)([(0,oe.j)("esri.popup.content.mixins.ChartMediaInfo")],ae);const K=ae},78297:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>L});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let j=class extends T.wq{constructor(B){super(B),this.altText=null,this.caption="",this.title="",this.type=null}};(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],j.prototype,"altText",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],j.prototype,"caption",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],j.prototype,"title",void 0),(0,x._)([(0,ne.Cb)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],j.prototype,"type",void 0),j=(0,x._)([(0,Y.j)("esri.popup.content.mixins.MediaInfo")],j);const L=j},77891:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(14517),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let L=j=class extends T.Z{constructor(X){super(X),this.tooltip=null,this.value=null}clone(){return new j({tooltip:this.tooltip,value:this.value})}};(0,x._)([(0,ne.Cb)()],L.prototype,"tooltip",void 0),(0,x._)([(0,ne.Cb)()],L.prototype,"value",void 0),L=j=(0,x._)([(0,Y.j)("esri.popup.content.support.ChartMediaInfoValueSeries")],L);const B=L},82657:(ut,Oe,C)=>{"use strict";C.d(Oe,{l:()=>T});const T=(0,C(2076).wY)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})},65560:(ut,Oe,C)=>{"use strict";C.d(Oe,{V:()=>Y});var x=C(89594),T=C(81590),ne=C(49455),ie=C(71981),te=C(52023);const Y={base:C(78297).Z,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":x.Z,"column-chart":T.Z,"line-chart":ie.Z,"pie-chart":te.Z,image:ne.Z}}},66845:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>$});var x=C(17626);const ie=(0,C(2076).wY)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});ie.toJSON.bind(ie),ie.fromJSON.bind(ie);var P,j=C(86162),L=C(77712),Z=(C(85931),C(8314),C(90912)),z=C(55342),ae=C(76898),K=C(88411),V=C(15348);let F=P=class extends j.wq{constructor(J){super(J),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new P({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(J){return this.dateFormat?(0,K.p6)(J,Ot(Ot({},(0,K.Ze)(this.dateFormat)),this.dateTimeFormatOptions)):(0,V.uf)(J,(0,V.sh)(this))}};(0,x._)([(0,z.J)(ie)],F.prototype,"dateFormat",void 0),(0,x._)([(0,L.Cb)({type:Object,json:{read:!1}})],F.prototype,"dateTimeFormatOptions",void 0),(0,x._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"digitSeparator",void 0),(0,x._)([(0,L.Cb)({type:Z.z8,json:{write:!0}})],F.prototype,"places",void 0),F=P=(0,x._)([(0,ae.j)("esri.popup.support.FieldInfoFormat")],F);const $=F},51686:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let L=j=class extends T.wq{constructor(X){super(X),this.field=null,this.order=null}clone(){return new j({field:this.field,order:this.order})}};(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],L.prototype,"field",void 0),(0,x._)([(0,ne.Cb)({type:["asc","desc"],json:{write:!0}})],L.prototype,"order",void 0),L=j=(0,x._)([(0,Y.j)("esri.popup.support.RelatedRecordsInfoFieldOrder")],L);const B=L},84687:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>me});var x=C(15861),T=C(17626),ne=C(59318),ie=C(24263),te=C(84792),oe=C(55538),Y=C(26584),j=C(86162),L=C(47996),B=C(63290),X=C(62208),Z=C(10699),z=C(77712),V=(C(85931),C(8314),C(90912)),P=C(68653),F=C(76898),$=C(2004),J=C(56683),H=C(6278),de=C(14517);let ee=class extends de.Z{constructor(ve){super(ve),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};(0,T._)([(0,z.Cb)()],ee.prototype,"nextQueryParams",void 0),(0,T._)([(0,z.Cb)()],ee.prototype,"queryParams",void 0),(0,T._)([(0,z.Cb)()],ee.prototype,"results",void 0),(0,T._)([(0,z.Cb)()],ee.prototype,"total",void 0),ee=(0,T._)([(0,F.j)("esri.portal.PortalQueryResult")],ee);const ye=ee;var se,le=C(94508),ge=C(12680);let Q;const pe={PortalGroup:()=>Promise.resolve().then(C.bind(C,96245)),PortalItem:()=>Promise.resolve().then(C.bind(C,55463)),PortalUser:()=>Promise.resolve().then(C.bind(C,94508))};let ue=se=class extends((0,j.eC)(L.Z)){constructor(ve){super(ve),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=ne.Z.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(ve){return"string"==typeof ve?{url:ve}:ve}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(ve){if(ve)for(const fe of ve)-1===ne.Z.request.trustedServers.indexOf(fe)&&ne.Z.request.trustedServers.push(fe);return ve}readDefaultBasemap(ve){return this._readBasemap(ve)}readDefaultDevBasemap(ve){return this._readBasemap(ve)}readDefaultVectorBasemap(ve){return this._readBasemap(ve)}get extraQuery(){return this.id&&this.user&&this.user.orgId&&!this.canSearchPublic?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let ve=this.url;if(ve){const fe=ve.indexOf("/sharing");ve=fe>0?ve.substring(0,fe):this.url.replace(/\/+$/,""),ve+="/sharing/rest"}return ve}get stylesGroupQuery(){return(0,oe.Mr)(B.Z.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const ve=this.restUrl,fe=this.thumbnail;return ve&&fe?this._normalizeSSL(ve+"/portals/self/resources/"+fe):null}readUrlKey(ve){return ve&&ve.toLowerCase()}readUser(ve){let fe=null;return ve&&(fe=le.default.fromJSON(ve),fe.portal=this),fe}load(ve){const fe=Promise.resolve().then(C.bind(C,73386)).then(({default:Me})=>{(0,Z.k_)(ve),Q=Me}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,ve)).then(Me=>{if(ie.id){const ce=ie.id;this.credential=ce.findCredential(this.restUrl),this.credential||this.authMode!==se.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=ce.on("credential-create",()=>{ce.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=Me,this.read(Me)});return this.addResolvingPromise(fe),Promise.resolve(this)}createClosestFacilityTask(){var ve=this;return(0,x.Z)(function*(){(0,oe.XV)(B.Z.getLogger(ve.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),yield ve.load();const fe=ve._getHelperServiceUrl("closestFacility");return new((yield Promise.all([C.e(8083),C.e(6359)]).then(C.bind(C,36359))).default)(fe)})()}createElevationLayers(){var ve=this;return(0,x.Z)(function*(){yield ve.load();const fe=ve._getHelperService("defaultElevationLayers"),Me=(yield Promise.all([C.e(8592),C.e(5227)]).then(C.bind(C,25227))).default;return fe?fe.map(ce=>new Me({id:ce.id,url:ce.url})):[]})()}createGeometryService(){var ve=this;return(0,x.Z)(function*(){(0,oe.XV)(B.Z.getLogger(ve.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),yield ve.load();const fe=ve._getHelperServiceUrl("geometry");return new((yield C.e(633).then(C.bind(C,20633))).default)({url:fe})})()}createPrintTask(){var ve=this;return(0,x.Z)(function*(){(0,oe.XV)(B.Z.getLogger(ve.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),yield ve.load();const fe=ve._getHelperServiceUrl("printTask");return new((yield C.e(3436).then(C.bind(C,33436))).default)(fe)})()}createRouteTask(){var ve=this;return(0,x.Z)(function*(){(0,oe.XV)(B.Z.getLogger(ve.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),yield ve.load();const fe=ve._getHelperServiceUrl("route");return new((yield Promise.all([C.e(8083),C.e(2394)]).then(C.bind(C,68773))).default)(fe)})()}createServiceAreaTask(){var ve=this;return(0,x.Z)(function*(){(0,oe.XV)(B.Z.getLogger(ve.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),yield ve.load();const fe=ve._getHelperServiceUrl("serviceArea");return new((yield Promise.all([C.e(8083),C.e(5349)]).then(C.bind(C,65349))).default)(fe)})()}fetchBasemaps(ve,fe){const Me=new H.Z;return Me.query=ve||(ne.Z.apiKey&&(0,ge.r)(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),Me.disableExtraQuery=!0,this.queryGroups(Me,fe).then(ce=>{if(Me.num=100,Me.query='type:"Web Map" -type:"Web Application"',ce.total){const he=ce.results[0];return Me.sortField=he.sortField||"name",Me.sortOrder=he.sortOrder||"desc",he.queryItems(Me,fe)}return null}).then(ce=>{let he;return he=ce&&ce.total?ce.results.filter(De=>"Web Map"===De.type).map(De=>new Q({portalItem:De})):[],he})}fetchCategorySchema(ve){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",ve).then(fe=>fe.categorySchema):(0,Z.Hc)(ve)?Promise.reject((0,Z.zE)()):Promise.resolve([])}fetchFeaturedGroups(ve){const fe=this.featuredGroups,Me=new H.Z;if(Me.num=100,Me.sortField="title",fe&&fe.length){const ce=[];for(const he of fe)ce.push(`(title:"${he.title}" AND owner:${he.owner})`);return Me.query=ce.join(" OR "),this.queryGroups(Me,ve).then(he=>he.results)}return(0,Z.Hc)(ve)?Promise.reject((0,Z.zE)()):Promise.resolve([])}fetchRegions(ve){const fe=this.user&&this.user.culture||this.culture||(0,J.Kd)();return this._request(this.restUrl+"/portals/regions",nn(Ot({},ve),{query:{culture:fe}}))}static getDefault(){return se._default&&!se._default.destroyed||(se._default=new se),se._default}queryGroups(ve,fe){return this._queryPortal("/community/groups",ve,"PortalGroup",fe)}queryItems(ve,fe){return this._queryPortal("/search",ve,"PortalItem",fe)}queryUsers(ve,fe){return ve.sortField||(ve.sortField="username"),this._queryPortal("/community/users",ve,"PortalUser",fe)}toJSON(){throw new Y.Z("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(ve){if(!ve)return null;if(ve.declaredClass)throw new Error("JSON object is already hydrated");return new se({sourceJSON:ve})}_getHelperService(ve){const fe=this.helperServices&&this.helperServices[ve];if(!fe)throw new Y.Z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${ve}"`);return fe}_getHelperServiceUrl(ve){const fe=this._getHelperService(ve);if(!fe.url)throw new Y.Z("portal:service-url-not-found",`The \`helperServices\` entry "${ve}" does not include a \`url\` value`);return fe.url}_fetchSelf(ve=this.authMode,fe=!1,Me){const ce=this.restUrl+"/portals/self",he=Ot({authMode:ve,query:{culture:(0,J.Kd)().toLowerCase()}},Me);return"auto"===he.authMode&&(he.authMode="no-prompt"),fe&&(he.query.default=!0),this._request(ce,he)}_queryPortal(ve,fe,Me,ce){const he=(0,V.se)(H.Z,fe),De=xe=>this._request(this.restUrl+ve,Ot(Ot({},he.toRequestOptions(this)),ce)).then(Pe=>{const je=he.clone();return je.start=Pe.nextStart,new ye({nextQueryParams:je,queryParams:he,total:Pe.total,results:se._resultsToTypedArray(xe,{portal:this},Pe,ce)})}).then(Pe=>Promise.all(Pe.results.map(je=>"function"==typeof je.when?je.when():Pe)).then(()=>Pe,je=>((0,Z.r9)(je),Pe)));return Me&&pe[Me]?pe[Me]().then(({default:xe})=>((0,Z.k_)(ce),De(xe))):De()}_signIn(){if(this.authMode===se.AUTH_MODE_ANONYMOUS)return Promise.reject(new Y.Z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const ve=fe=>Promise.resolve().then(()=>"not-loaded"===this.loadStatus?(fe||(this.authMode="immediate"),this.load().then(()=>null)):"loading"===this.loadStatus?this.load().then(()=>this.credential?null:(this.credential=fe,this._fetchSelf("immediate"))):this.user&&this.credential===fe?null:(this.credential=fe,this._fetchSelf("immediate"))).then(Me=>{Me&&(this.sourceJSON=Me,this.read(Me))});return ie.id?ie.id.getCredential(this.restUrl).then(fe=>ve(fe)):ve(this.credential)}_normalizeSSL(ve){return ve.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(ve){const fe=this.credential&&this.credential.token;return this._normalizeSSL(fe?ve+(ve.indexOf("?")>-1?"&":"?")+"token="+fe:ve)}_requestToTypedArray(ve,fe,Me){return this._request(ve,fe).then(ce=>{const he=se._resultsToTypedArray(Me,{portal:this},ce);return Promise.all(he.map(De=>"function"==typeof De.when?De.when():ce)).then(()=>he,()=>he)})}_readBasemap(ve){if(ve){const fe=Q.fromJSON(ve);return fe.portalItem={portal:this},fe}return null}_request(ve,fe={}){const Me=Ot({f:"json"},fe.query),{authMode:ce=(this.authMode===se.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:he=null,cacheBust:De=!1,method:xe="auto",responseType:Pe="json",signal:je}=fe,rt={authMode:ce,body:he,cacheBust:De,method:xe,query:Me,responseType:Pe,timeout:0,signal:je};return(0,te.default)(this._normalizeSSL(ve),rt).then(Le=>Le.data)}static _resultsToTypedArray(ve,fe,Me,ce){let he;if(Me){const De=(0,X.pC)(ce)?ce.signal:null;he=Me.listings||Me.notifications||Me.userInvitations||Me.tags||Me.items||Me.groups||Me.comments||Me.provisions||Me.results||Me.relatedItems||Me,(ve||fe)&&(he=he.map(xe=>{const Pe=Object.assign(ve?ve.fromJSON(xe):xe,fe);return"function"==typeof Pe.load&&Pe.load(De),Pe}))}else he=[];return he}};ue.AUTH_MODE_ANONYMOUS="anonymous",ue.AUTH_MODE_AUTO="auto",ue.AUTH_MODE_IMMEDIATE="immediate",(0,T._)([(0,z.Cb)()],ue.prototype,"access",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"allSSL",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"authMode",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"authorizedCrossOriginDomains",void 0),(0,T._)([(0,P.r)("authorizedCrossOriginDomains")],ue.prototype,"readAuthorizedCrossOriginDomains",null),(0,T._)([(0,z.Cb)()],ue.prototype,"basemapGalleryGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"bingKey",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canListApps",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canListData",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canListPreProvisionedItems",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canProvisionDirectPurchase",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canSearchPublic",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canShareBingPublic",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canSharePublic",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canSignInArcGIS",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"canSignInIDP",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"colorSetsGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"commentsEnabled",void 0),(0,T._)([(0,z.Cb)({type:Date})],ue.prototype,"created",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"credential",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"culture",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"currentVersion",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"customBaseUrl",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"defaultBasemap",void 0),(0,T._)([(0,P.r)("defaultBasemap")],ue.prototype,"readDefaultBasemap",null),(0,T._)([(0,z.Cb)()],ue.prototype,"defaultDevBasemap",void 0),(0,T._)([(0,P.r)("defaultDevBasemap")],ue.prototype,"readDefaultDevBasemap",null),(0,T._)([(0,z.Cb)({type:$.Z})],ue.prototype,"defaultExtent",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"defaultVectorBasemap",void 0),(0,T._)([(0,P.r)("defaultVectorBasemap")],ue.prototype,"readDefaultVectorBasemap",null),(0,T._)([(0,z.Cb)()],ue.prototype,"description",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"devBasemapGalleryGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"eueiEnabled",void 0),(0,T._)([(0,z.Cb)({readOnly:!0})],ue.prototype,"extraQuery",null),(0,T._)([(0,z.Cb)()],ue.prototype,"featuredGroups",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"featuredItemsGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"galleryTemplatesGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"livingAtlasGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"hasCategorySchema",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"helpBase",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"helperServices",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"helpMap",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"homePageFeaturedContent",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"homePageFeaturedContentCount",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"httpPort",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"httpsPort",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"id",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"ipCntryCode",void 0),(0,T._)([(0,z.Cb)({readOnly:!0})],ue.prototype,"isOrganization",null),(0,T._)([(0,z.Cb)()],ue.prototype,"isPortal",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"isReadOnly",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"layerTemplatesGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"maxTokenExpirationMinutes",void 0),(0,T._)([(0,z.Cb)({type:Date})],ue.prototype,"modified",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"name",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"portalHostname",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"portalMode",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"portalProperties",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"region",void 0),(0,T._)([(0,z.Cb)({readOnly:!0})],ue.prototype,"restUrl",null),(0,T._)([(0,z.Cb)()],ue.prototype,"rotatorPanels",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"showHomePageDescription",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"sourceJSON",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"staticImagesUrl",void 0),(0,T._)([(0,z.Cb)({readOnly:!0,json:{read:!1}})],ue.prototype,"stylesGroupQuery",null),(0,T._)([(0,z.Cb)({json:{name:"2DStylesGroupQuery"}})],ue.prototype,"stylesGroupQuery2d",void 0),(0,T._)([(0,z.Cb)({json:{name:"stylesGroupQuery"}})],ue.prototype,"stylesGroupQuery3d",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"supportsHostedServices",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"symbolSetsGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"templatesGroupQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"thumbnail",void 0),(0,T._)([(0,z.Cb)({readOnly:!0})],ue.prototype,"thumbnailUrl",null),(0,T._)([(0,z.Cb)()],ue.prototype,"units",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"url",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"urlKey",void 0),(0,T._)([(0,P.r)("urlKey")],ue.prototype,"readUrlKey",null),(0,T._)([(0,z.Cb)()],ue.prototype,"user",void 0),(0,T._)([(0,P.r)("user")],ue.prototype,"readUser",null),(0,T._)([(0,z.Cb)()],ue.prototype,"useStandardizedQuery",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"useVectorBasemaps",void 0),(0,T._)([(0,z.Cb)()],ue.prototype,"vectorBasemapGalleryGroupQuery",void 0),ue=se=(0,T._)([(0,F.j)("esri.portal.Portal")],ue);const me=ue},96245:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{default:()=>X});var x=C(17626),T=C(26584),ne=C(86162),ie=C(77712),Y=(C(85931),C(8314),C(90912)),j=C(76898),L=C(6278);let B=class extends ne.wq{constructor(Z){super(Z),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const Z=this.url,z=this.thumbnail;return Z&&z?this.portal._normalizeUrl(`${Z}/info/${z}?f=json`):null}get url(){const Z=this.get("portal.restUrl");return Z?Z+"/community/groups/"+this.id:null}fetchCategorySchema(Z){return this.portal._request(this.url+"/categorySchema",Z).then(z=>{const ae=z.categorySchema||[];return ae.some(K=>"contentCategorySetsGroupQuery.LivingAtlas"===K.source)?this._fetchCategorySchemaSet("LivingAtlas",Z):ae})}fetchMembers(Z){return this.portal._request(this.url+"/users",Z)}getThumbnailUrl(Z){let z=this.thumbnailUrl;return z&&Z&&(z+=`&w=${Z}`),z}toJSON(){throw new T.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(Z,z){let ae=(0,Y.se)(L.Z,Z);return parseFloat(this.portal.currentVersion)>5?(ae=ae||new L.Z,this.portal._queryPortal(`/content/groups/${this.id}/search`,ae,"PortalItem",z)):(ae=ae?ae.clone():new L.Z,ae.query="group:"+this.id+(ae.query?" "+ae.query:""),this.portal.queryItems(ae,z))}_fetchCategorySchemaSet(Z,z){return this.portal._fetchSelf(this.portal.authMode,!0,z).then(ae=>{const K=ae.contentCategorySetsGroupQuery;if(K){const V=new L.Z;return V.disableExtraQuery=!0,V.num=1,V.query=K,this.portal.queryGroups(V,z)}throw new T.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(ae=>{if(ae.total){const K=ae.results[0],V=new L.Z;return V.num=1,V.query=`typekeywords:"${Z}"`,K.queryItems(V,z)}throw new T.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(ae=>ae.total?ae.results[0].fetchData("json",z).then(K=>{const V=K&&K.categorySchema;return V&&V.length?V:[]}):[])}};(0,x._)([(0,ie.Cb)()],B.prototype,"access",void 0),(0,x._)([(0,ie.Cb)({type:Date})],B.prototype,"created",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"description",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"id",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"isInvitationOnly",void 0),(0,x._)([(0,ie.Cb)({type:Date})],B.prototype,"modified",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"owner",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"portal",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"snippet",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"sortField",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"sortOrder",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"tags",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"thumbnail",void 0),(0,x._)([(0,ie.Cb)({readOnly:!0})],B.prototype,"thumbnailUrl",null),(0,x._)([(0,ie.Cb)()],B.prototype,"title",void 0),(0,x._)([(0,ie.Cb)({readOnly:!0})],B.prototype,"url",null),B=(0,x._)([(0,j.j)("esri.portal.PortalGroup")],B);const X=B},55463:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{default:()=>Q});var x=C(15861),T=C(17626),ne=C(54346),ie=C(26584),te=C(86162),oe=C(58817),Y=C(47996),j=C(62208),L=C(21726),B=C(77712),X=C(90912),Z=C(68653),z=C(76898),ae=C(2004),K=C(84687),V=C(14517),P=C(63290),J=(C(85931),C(8314),C(66656));const H=P.Z.getLogger("esri.portal.PortalItemResource");let de=class extends V.Z{constructor(pe){super(pe),this.portalItem=null}normalizeCtorArgs(pe){return pe&&pe.portalItem&&pe.path?nn(Ot({},pe),{path:this.normalizePath(pe.path,pe.portalItem)}):pe}set path(pe){(0,j.pC)(pe)&&(0,L.YP)(pe)?H.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",pe)}_castPath(pe){return this.normalizePath(pe,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(pe="json",ue){const me=this.url;if((0,j.Wi)(me))throw new ie.Z("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(me,{responseType:pe,query:{token:this.portalItem.apiKey},signal:(0,j.U2)(ue,"signal")})}update(pe,ue){var me=this;return(0,x.Z)(function*(){return(yield C.e(587).then(C.bind(C,10587))).addOrUpdateResource(me,"update",pe,ue)})()}hasPath(){return(0,j.pC)(this.path)}normalizePath(pe,ue){return(0,j.Wi)(pe)?pe:(pe=pe.replace(/^\/+/,""),(0,j.pC)(ue)&&(0,L.YP)(pe)&&(pe=(0,L.PF)(pe,ue.itemUrl)),pe.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};(0,T._)([(0,B.Cb)()],de.prototype,"portalItem",void 0),(0,T._)([(0,B.Cb)({type:String,value:null})],de.prototype,"path",null),(0,T._)([(0,J.p)("path")],de.prototype,"_castPath",null),(0,T._)([(0,B.Cb)({type:String,readOnly:!0})],de.prototype,"url",null),(0,T._)([(0,B.Cb)({type:String,readOnly:!0})],de.prototype,"itemRelativeUrl",null),de=(0,T._)([(0,z.j)("esri.portal.PortalItemResource")],de);const ee=de;let ye=class extends V.Z{constructor(pe){super(pe),this.created=null,this.rating=null}};(0,T._)([(0,B.Cb)()],ye.prototype,"created",void 0),(0,T._)([(0,B.Cb)()],ye.prototype,"rating",void 0),ye=(0,T._)([(0,z.j)("esri.portal.PortalRating")],ye);const le=ye;var ge;let se=ge=class extends((0,te.eC)(Y.Z)){constructor(pe){super(pe),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(pe){return(0,X.TJ)(ge,pe)}destroy(){this.portal=null}get displayName(){const pe=this.type,ue=this.typeKeywords||[];let me=pe;return"Feature Service"===pe||"Feature Collection"===pe?me=ue.indexOf("Table")>-1?"Table":ue.indexOf("Route Layer")>-1?"Route Layer":ue.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===pe?me=ue.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":ue.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===pe?me="Scene Layer":"Scene Package"===pe?me="Scene Layer Package":"Stream Service"===pe?me="Feature Layer":"Geoprocessing Service"===pe&&this.portal&&this.portal.isPortal?me=ue.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===pe?me="Locator":"Geoenrichment Service"===pe?me="GeoEnrichment Service":"Microsoft Powerpoint"===pe?me="Microsoft PowerPoint":"GeoJson"===pe?me="GeoJSON":"Globe Service"===pe?me="Globe Layer":"Vector Tile Service"===pe?me="Tile Layer":"netCDF"===pe?me="NetCDF":"Map Service"===pe?me=-1===ue.indexOf("Spatiotemporal")&&(ue.indexOf("Hosted Service")>-1||ue.indexOf("Tiled")>-1)&&-1===ue.indexOf("Relational")?"Tile Layer":"Map Image Layer":pe&&pe.toLowerCase().indexOf("add in")>-1?me=pe.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===pe?me="Big Data File Share":"Compact Tile Package"===pe?me="Tile Package (tpkx)":"OGCFeatureServer"===pe?me="OGC Feature Layer":"web mapping application"===pe&&ue.indexOf("configurableApp")>-1&&(me="Instant App"),me}readExtent(pe){return pe&&pe.length?new ae.Z(pe[0][0],pe[0][1],pe[1][0],pe[1][1]):null}get iconUrl(){const pe=this.type&&this.type.toLowerCase()||"",ue=this.typeKeywords||[];let fe,Me=!1,ce=!1,he=!1,De=!1,xe=!1,Pe=!1;return pe.indexOf("service")>0||"feature collection"===pe||"kml"===pe||"wms"===pe||"wmts"===pe||"wfs"===pe?(Me=ue.indexOf("Hosted Service")>-1,"feature service"===pe||"feature collection"===pe||"kml"===pe||"wfs"===pe?(ce=ue.indexOf("Table")>-1,he=ue.indexOf("Route Layer")>-1,De=ue.indexOf("Markup")>-1,xe=-1!==ue.indexOf("Spatiotemporal"),Pe=-1!==ue.indexOf("UtilityNetwork"),fe=xe&&ce?"spatiotemporaltable":ce?"table":he?"routelayer":De?"markup":xe?"spatiotemporal":Me?"featureshosted":Pe?"utilitynetwork":"features"):fe="map service"===pe||"wms"===pe||"wmts"===pe?Me||ue.indexOf("Tiled")>-1||"wmts"===pe?"maptiles":"mapimages":"scene service"===pe?ue.indexOf("Line")>-1?"sceneweblayerline":ue.indexOf("3DObject")>-1?"sceneweblayermultipatch":ue.indexOf("Point")>-1?"sceneweblayerpoint":ue.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":ue.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":ue.indexOf("Polygon")>-1?"sceneweblayerpolygon":ue.indexOf("Building")>-1?"sceneweblayerbuilding":ue.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===pe?ue.indexOf("Elevation 3D Layer")>-1?"elevationlayer":ue.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===pe?"streamlayer":"vector tile service"===pe?"vectortile":"datastore catalog service"===pe?"datastorecollection":"geocoding service"===pe?"geocodeservice":"geoprocessing service"===pe&&ue.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):fe="web map"===pe||"cityengine web scene"===pe?"maps":"web scene"===pe?ue.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===pe&&ue.indexOf("configurableApp")>-1?"instantapps":"web mapping application"===pe||"mobile application"===pe||"application"===pe||"operation view"===pe||"desktop application"===pe?"apps":"map document"===pe||"map package"===pe||"published map"===pe||"scene document"===pe||"globe document"===pe||"basemap package"===pe||"mobile basemap package"===pe||"mobile map package"===pe||"project package"===pe||"project template"===pe||"pro map"===pe||"layout"===pe||"layer"===pe&&ue.indexOf("ArcGIS Pro")>-1||"explorer map"===pe&&ue.indexOf("Explorer Document")?"mapsgray":"service definition"===pe||"csv"===pe||"shapefile"===pe||"cad drawing"===pe||"geojson"===pe||"360 vr experience"===pe||"netcdf"===pe||"administrative report"===pe?"datafiles":"explorer add in"===pe||"desktop add in"===pe||"windows viewer add in"===pe||"windows viewer configuration"===pe?"appsgray":"arcgis pro add in"===pe||"arcgis pro configuration"===pe?"addindesktop":"rule package"===pe||"file geodatabase"===pe||"sqlite geodatabase"===pe||"csv collection"===pe||"kml collection"===pe||"windows mobile package"===pe||"map template"===pe||"desktop application template"===pe||"gml"===pe||"arcpad package"===pe||"code sample"===pe||"form"===pe||"document link"===pe||"earth configuration"===pe||"operations dashboard add in"===pe||"rules package"===pe||"image"===pe||"workflow manager package"===pe||"explorer map"===pe&&ue.indexOf("Explorer Mapping Application")>-1||ue.indexOf("Document")>-1?"datafilesgray":"network analysis service"===pe||"geoprocessing service"===pe||"geodata service"===pe||"geometry service"===pe||"geoprocessing package"===pe||"locator package"===pe||"geoprocessing sample"===pe||"workflow manager service"===pe?"toolsgray":"layer"===pe||"layer package"===pe||"explorer layer"===pe?"layersgray":"scene package"===pe?"scenepackage":"mobile scene package"===pe?"mobilescenepackage":"tile package"===pe||"compact tile package"===pe?"tilepackage":"task file"===pe?"taskfile":"report template"===pe?"report-template":"statistical data collection"===pe?"statisticaldatacollection":"insights workbook"===pe?"workbook":"insights model"===pe?"insightsmodel":"insights page"===pe?"insightspage":"insights theme"===pe?"insightstheme":"hub initiative"===pe?"hubinitiative":"hubpage"===pe?"hubpage":"hub event"===pe?"hubevent":"hub site application"===pe?"hubsite":"relational database connection"===pe?"relationaldatabaseconnection":"big data file share"===pe?"datastorecollection":"image collection"===pe?"imagecollection":"style"===pe?"style":"desktop style"===pe?"desktopstyle":"dashboard"===pe?"dashboard":"raster function template"===pe?"rasterprocessingtemplate":"vector tile package"===pe?"vectortilepackage":"ortho mapping project"===pe?"orthomappingproject":"ortho mapping template"===pe?"orthomappingtemplate":"solution"===pe?"solutions":"geopackage"===pe?"geopackage":"deep learning package"===pe?"deeplearningpackage":"real time analytic"===pe?"realtimeanalytics":"big data analytic"===pe?"bigdataanalytics":"feed"===pe?"feed":"excalibur imagery project"===pe?"excaliburimageryproject":"notebook"===pe?"notebook":"storymap"===pe?"storymap":"survey123 add in"===pe?"survey123addin":"mission"===pe?"mission":"mission report"===pe?"missionreport":"quickcapture project"===pe?"quickcaptureproject":"pro report"===pe?"proreport":"urban model"===pe?"urbanmodel":"web experience"===pe?"experiencebuilder":"web experience template"===pe?"webexperiencetemplate":"workflow"===pe?"workflow":"insights script"===pe?"insightsscript":"kernel gateway connection"===pe?"kernelgatewayconnection":"hub initiative template"===pe?"hubinitiativetemplate":"storymap theme"===pe?"storymaptheme":"knowledge graph"===pe?"knowledgegraph":"native application"===pe?"nativeapp":"native application installer"===pe?"nativeappinstaller":"link chart"===pe?"linkchart":"investigation"===pe?"investigation":"ogcfeatureserver"===pe?"features":"pro project"===pe?"proproject":"insights workbook package"===pe?"insightsworkbookpackage":"apache parquet"===pe?"apacheparquet":"maps",fe?(0,ne.V)("esri/images/portal/"+fe+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const pe=this.get("portal.restUrl");return pe?pe+"/content/items/"+this.id:null}get thumbnailUrl(){const pe=this.itemUrl,ue=this.thumbnail;return pe&&ue?this.portal._normalizeUrl(`${pe}/info/${ue}?f=json`):null}get userItemUrl(){const pe=this.get("portal.restUrl");if(!pe)return null;const ue=this.owner||this.get("portal.user.username");return ue?`${pe}/content/users/${this.ownerFolder?`${ue}/${this.ownerFolder}`:ue}/items/${this.id}`:null}load(pe){this.portal||(this.portal=K.Z.getDefault());const ue=this.portal.load(pe).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:(0,j.pC)(pe)?pe.signal:null,query:{token:this.apiKey}}):{}).then(me=>{this.sourceJSON=me,this.read(me)});return this.addResolvingPromise(ue),Promise.resolve(this)}addRating(pe){const ue={method:"post",query:{}};return pe instanceof le&&(pe=pe.rating),isNaN(pe)||"number"!=typeof pe||(ue.query.rating=pe),this.portal._request(this.itemUrl+"/addRating",ue).then(()=>new le({rating:pe,created:new Date}))}clone(){const pe={access:this.access,accessInformation:this.accessInformation,applicationProxies:(0,oe.d9)(this.applicationProxies),avgRating:this.avgRating,categories:(0,oe.d9)(this.categories),created:(0,oe.d9)(this.created),culture:this.culture,description:this.description,extent:(0,oe.d9)(this.extent),groupCategories:(0,oe.d9)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:(0,oe.d9)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:(0,oe.d9)(this.screenshots),size:this.size,snippet:this.snippet,tags:(0,oe.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,oe.d9)(this.typeKeywords),url:this.url};return this.loaded&&(pe.loadStatus="loaded"),new ge({sourceJSON:this.sourceJSON}).set(pe)}createPostQuery(){const pe=this.toJSON();for(const ue in pe)"tags"===ue&&null!==pe[ue]&&(pe[ue]=pe[ue].join(", ")),"typeKeywords"===ue&&null!==pe[ue]&&(pe[ue]=pe[ue].join(", ")),"extent"===ue&&pe[ue]&&(pe[ue]=JSON.stringify(pe[ue]));return pe}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(pe="json",ue){return this.portal._request(this.itemUrl+"/data",nn(Ot({responseType:pe},ue),{query:{token:this.apiKey}}))}fetchRating(pe){return this.portal._request(this.itemUrl+"/rating",Ot({query:{token:this.apiKey}},pe)).then(ue=>null!=ue.rating?(ue.created=new Date(ue.created),new le(ue)):null)}fetchRelatedItems(pe,ue){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",Ot({query:nn(Ot({},pe),{token:this.apiKey})},ue),ge)}getThumbnailUrl(pe){let ue=this.thumbnailUrl;return ue&&pe&&(ue+=`&w=${pe}`),ue}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(pe=>(this.sourceJSON=pe,this.read(pe),this))}update(pe){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const ue=pe&&pe.data,me={method:"post"};me.query=this.createPostQuery();for(const ve in me.query)null===me.query[ve]&&(me.query[ve]="");return me.query.clearEmptyFields=!0,null!=ue&&("string"==typeof ue?me.query.text=ue:"object"==typeof ue&&(me.query.text=JSON.stringify(ue))),this.portal._request(`${this.userItemUrl}/update`,me).then(()=>this.reload())}):Promise.reject(new ie.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(pe){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const ue=pe.thumbnail,me=pe.filename,ve={method:"post"};if("string"==typeof ue)ve.query=(0,L.HK)(ue)?{data:ue}:{url:(0,L.hF)(ue)},(0,j.pC)(me)&&(ve.query.filename=me);else{const fe=new FormData;(0,j.pC)(me)?fe.append("file",ue,me):fe.append("file",ue),ve.body=fe}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,ve).then(()=>this.reload())}):Promise.reject(new ie.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}fetchResources(pe={},ue){var me=this;return(0,x.Z)(function*(){return(yield C.e(587).then(C.bind(C,10587))).fetchResources(me,pe,ue)})()}addResource(pe,ue,me){var ve=this;return(0,x.Z)(function*(){const fe=yield C.e(587).then(C.bind(C,10587));return pe.portalItem=ve,fe.addOrUpdateResource(pe,"add",ue,me)})()}removeResource(pe,ue){var me=this;return(0,x.Z)(function*(){const ve=yield C.e(587).then(C.bind(C,10587));if(pe.portalItem&&pe.portalItem.itemUrl!==me.itemUrl)throw new ie.Z("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return ve.removeResource(me,pe,ue)})()}removeAllResources(pe){var ue=this;return(0,x.Z)(function*(){return(yield C.e(587).then(C.bind(C,10587))).removeAllResources(ue,pe)})()}resourceFromPath(pe){return new ee({portalItem:this,path:pe})}toJSON(){const pe=this.extent,ue={created:this.created&&this.created.getTime(),description:this.description,extent:pe&&[[pe.xmin,pe.ymin],[pe.xmax,pe.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return(0,oe.yd)(ue)}static fromJSON(pe){if(!pe)return null;if(pe.declaredClass)throw new Error("JSON object is already hydrated");return new ge({sourceJSON:pe})}_getPostQuery(){const pe=this.toJSON();for(const ue in pe)"tags"===ue&&null!==pe[ue]&&(pe[ue]=pe[ue].join(", ")),"typeKeywords"===ue&&null!==pe[ue]&&(pe[ue]=pe[ue].join(", ")),"extent"===ue&&pe[ue]&&(pe[ue]=JSON.stringify(pe[ue]));return pe}};(0,T._)([(0,B.Cb)({type:["private","shared","org","public"]})],se.prototype,"access",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"accessInformation",void 0),(0,T._)([(0,B.Cb)({type:String})],se.prototype,"apiKey",void 0),(0,T._)([(0,B.Cb)({json:{read:{source:"appProxies"}}})],se.prototype,"applicationProxies",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"avgRating",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"categories",void 0),(0,T._)([(0,B.Cb)({type:Date})],se.prototype,"created",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"culture",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"description",void 0),(0,T._)([(0,B.Cb)({readOnly:!0})],se.prototype,"displayName",null),(0,T._)([(0,B.Cb)({type:ae.Z})],se.prototype,"extent",void 0),(0,T._)([(0,Z.r)("extent")],se.prototype,"readExtent",null),(0,T._)([(0,B.Cb)()],se.prototype,"groupCategories",void 0),(0,T._)([(0,B.Cb)({readOnly:!0})],se.prototype,"iconUrl",null),(0,T._)([(0,B.Cb)()],se.prototype,"id",void 0),(0,T._)([(0,B.Cb)({readOnly:!0})],se.prototype,"isLayer",null),(0,T._)([(0,B.Cb)()],se.prototype,"itemControl",void 0),(0,T._)([(0,B.Cb)({readOnly:!0})],se.prototype,"itemUrl",null),(0,T._)([(0,B.Cb)()],se.prototype,"licenseInfo",void 0),(0,T._)([(0,B.Cb)({type:Date})],se.prototype,"modified",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"name",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"numComments",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"numRatings",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"numViews",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"owner",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"ownerFolder",void 0),(0,T._)([(0,B.Cb)({type:K.Z})],se.prototype,"portal",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"screenshots",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"size",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"snippet",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"sourceJSON",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"tags",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"thumbnail",void 0),(0,T._)([(0,B.Cb)({readOnly:!0})],se.prototype,"thumbnailUrl",null),(0,T._)([(0,B.Cb)()],se.prototype,"title",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"type",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"typeKeywords",void 0),(0,T._)([(0,B.Cb)()],se.prototype,"url",void 0),(0,T._)([(0,B.Cb)({readOnly:!0})],se.prototype,"userItemUrl",null),se=ge=(0,T._)([(0,z.j)("esri.portal.PortalItem")],se);const Q=se},6278:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var Z,x=C(17626),T=C(14517),ne=C(2076),ie=C(58817),te=C(62208),oe=C(77712),j=(C(90912),C(76898)),L=C(2004),B=C(65234),X=C(46367);const z=new ne.Xn({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let ae=Z=class extends T.Z{constructor(V){super(V),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(V){"asc"!==V&&"desc"!==V||this._set("sortOrder",V)}clone(){return new Z({categories:this.categories?(0,ie.d9)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(V,P){let F,$;if(this.categories&&(F=this.categories.map(de=>Array.isArray(de)?JSON.stringify(de):de)),this.extent){const de=(0,X.iV)(this.extent,B.Z.WGS84);(0,te.pC)(de)&&($=`${de.xmin},${de.ymin},${de.xmax},${de.ymax}`)}let J=this.query;!this.disableExtraQuery&&V.extraQuery&&(J="("+J+")"+V.extraQuery);const H={categories:F,bbox:$,q:J,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(H.sortField=this.sortField.split(",").map(de=>z.toJSON(de.trim())).join(","),H.sortOrder=this.sortOrder),{query:Ot(Ot({},P),H)}}};(0,x._)([(0,oe.Cb)()],ae.prototype,"categories",void 0),(0,x._)([(0,oe.Cb)()],ae.prototype,"disableExtraQuery",void 0),(0,x._)([(0,oe.Cb)({type:L.Z})],ae.prototype,"extent",void 0),(0,x._)([(0,oe.Cb)()],ae.prototype,"filter",void 0),(0,x._)([(0,oe.Cb)()],ae.prototype,"num",void 0),(0,x._)([(0,oe.Cb)()],ae.prototype,"query",void 0),(0,x._)([(0,oe.Cb)()],ae.prototype,"sortField",void 0),(0,x._)([(0,oe.Cb)()],ae.prototype,"sortOrder",null),(0,x._)([(0,oe.Cb)()],ae.prototype,"start",void 0),ae=Z=(0,x._)([(0,j.j)("esri.portal.PortalQueryParams")],ae);const K=ae},94508:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{default:()=>ae});var x=C(17626),T=C(26584),ne=C(86162),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898));let L=class extends ne.wq{constructor(K){super(K),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const K=this.get("portal.restUrl");return K?`${K}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new T.Z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};(0,x._)([(0,ie.Cb)({type:Date})],L.prototype,"created",void 0),(0,x._)([(0,ie.Cb)()],L.prototype,"id",void 0),(0,x._)([(0,ie.Cb)()],L.prototype,"portal",void 0),(0,x._)([(0,ie.Cb)()],L.prototype,"title",void 0),(0,x._)([(0,ie.Cb)({readOnly:!0})],L.prototype,"url",null),(0,x._)([(0,ie.Cb)()],L.prototype,"username",void 0),L=(0,x._)([(0,j.j)("esri.portal.PortalFolder")],L);const B=L;var Z,X=C(96245);let z=Z=class extends ne.wq{constructor(...K){super(...K),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const K=this.url,V=this.thumbnail;return K&&V?this.portal._normalizeUrl(`${K}/info/${V}?f=json`):null}get userContentUrl(){const K=this.get("portal.restUrl");return K?`${K}/content/users/${this.username}`:null}get url(){const K=this.get("portal.restUrl");return K?`${K}/community/users/${this.username}`:null}addItem(K){const V=K&&K.item,P=K&&K.data,F=K&&K.folder,$={method:"post"};V&&($.query=V.createPostQuery(),null!=P&&("string"==typeof P?$.query.text=P:"object"==typeof P&&($.query.text=JSON.stringify(P))));let J=this.userContentUrl;return F&&(J+="/"+("string"==typeof F?F:F.id)),this.portal._request(J+"/addItem",$).then(H=>(V.id=H.id,V.portal=this.portal,V.loaded?V.reload():V.load()))}deleteItem(K){let V=this.userContentUrl;return K.ownerFolder&&(V+="/"+K.ownerFolder),this.portal._request(V+`/items/${K.id}/delete`,{method:"post"}).then(()=>{K.id=null,K.portal=null})}deleteItems(K){const V=this.userContentUrl+"/deleteItems",P=K.map(F=>F.id);if(P.length){const F={method:"post",query:{items:P.join(",")}};return this.portal._request(V,F).then(()=>{K.forEach($=>{$.id=null,$.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(V=>{let P;return P=V&&V.folders?V.folders.map(F=>{const $=B.fromJSON(F);return $.portal=this.portal,$}):[],P})}fetchGroups(){return this.portal._request(this.url).then(K=>{let V;return V=K&&K.groups?K.groups.map(P=>{const F=X.default.fromJSON(P);return F.portal=this.portal,F}):[],V})}fetchItems(K){K||(K={});let V,P=this.userContentUrl;return K.folder&&(P+="/"+K.folder.id),Promise.resolve().then(C.bind(C,55463)).then(({default:F})=>(V=F,this.portal._request(P,{query:{folders:!1,num:K.num||10,start:K.start||1,sortField:K.sortField||"created",sortOrder:K.sortOrder||"asc"}}))).then(F=>{let $;return F&&F.items?($=F.items.map(J=>{const H=V.fromJSON(J);return H.portal=this.portal,H}),Promise.all($.map(J=>J.load())).catch(J=>J).then(()=>({items:$,nextStart:F.nextStart,total:F.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(K=>K.tags)}getThumbnailUrl(K){let V=this.thumbnailUrl;return V&&K&&(V+=`&w=${K}`),V}queryFavorites(K){return this.favGroupId?(this._favGroup||(this._favGroup=new X.default({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(K)):Promise.reject(new T.Z("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new T.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(K){if(!K)return null;if(K.declaredClass)throw new Error("JSON object is already hydrated");const V=new Z;return V.sourceJSON=K,V.read(K),V}};(0,x._)([(0,ie.Cb)()],z.prototype,"access",void 0),(0,x._)([(0,ie.Cb)({type:Date})],z.prototype,"created",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"culture",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"description",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"email",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"favGroupId",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"fullName",void 0),(0,x._)([(0,ie.Cb)({type:Date})],z.prototype,"modified",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"orgId",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"portal",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"preferredView",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"privileges",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"region",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"role",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"roleId",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"sourceJSON",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"thumbnail",void 0),(0,x._)([(0,ie.Cb)({readOnly:!0})],z.prototype,"thumbnailUrl",null),(0,x._)([(0,ie.Cb)()],z.prototype,"units",void 0),(0,x._)([(0,ie.Cb)({readOnly:!0})],z.prototype,"userContentUrl",null),(0,x._)([(0,ie.Cb)({readOnly:!0})],z.prototype,"url",null),(0,x._)([(0,ie.Cb)()],z.prototype,"username",void 0),(0,x._)([(0,ie.Cb)()],z.prototype,"userType",void 0),z=Z=(0,x._)([(0,j.j)("esri.portal.PortalUser")],z);const ae=z},37281:(ut,Oe,C)=>{"use strict";function x(ie,te){if(!T(ie,te)){const oe=ie.typeKeywords;oe?oe.push(te):ie.typeKeywords=[te]}}function T(ie,te){return!!ie.typeKeywords&&ie.typeKeywords.indexOf(te)>-1}function ne(ie,te){const oe=ie.typeKeywords;if(oe){const Y=oe.indexOf(te);Y>-1&&oe.splice(Y,1)}}C.d(Oe,{qj:()=>x,_$:()=>T,ck:()=>ne})},58926:(ut,Oe,C)=>{"use strict";C.d(Oe,{v:()=>T});const T=(0,C(2076).wY)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},4832:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ue});var de,x=C(15861),T=C(17626),ne=C(65787),ie=C(2076),te=C(58817),oe=C(63290),Y=C(62208),j=C(77712),L=C(66656),B=C(55342),X=C(68653),Z=C(76898),z=C(99433),ae=C(90912),K=C(36630),V=C(69357),P=C(2432),F=C(74400),$=C(76457),J=C(10914),H=C(46679);const ee=oe.Z.getLogger("esri.renderers.ClassBreaksRenderer"),le="percent-of-total",ge="field",se=new ie.Xn({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:le,esriNormalizeByField:ge}),Q=(0,ae.se)(F.Z);let pe=de=class extends((0,P.W)(V.Z)){constructor(me){super(me),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(me,ve,fe){if(!Array.isArray(me))return;let Me=ve.minValue;return me.map(ce=>{const he=new F.Z;return he.read(ce,fe),null==he.minValue&&(he.minValue=Me),null==he.maxValue&&(he.maxValue=he.minValue),Me=he.maxValue,he})}writeClassBreakInfos(me,ve,fe,Me){const ce=me.map(he=>he.write({},Me));this._areClassBreaksConsecutive()&&ce.forEach(he=>delete he.classMinValue),ve[fe]=ce}castField(me){return null==me?me:"function"==typeof me?(ee.error(".field: field must be a string value"),null):(0,ae.Zs)(me)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let me=this._get("normalizationType");const ve=!!this.normalizationField,fe=null!=this.normalizationTotal;return ve||fe?(me=(ve?ge:fe&&le)||null,ve&&fe&&ee.warn("warning: both normalizationField and normalizationTotal are set!")):me!==ge&&me!==le||(me=null),me}set normalizationType(me){this._set("normalizationType",me)}addClassBreakInfo(me,ve,fe){let Me=null;Me="number"==typeof me?new F.Z({minValue:me,maxValue:ve,symbol:(0,ne.se)(fe)}):Q((0,te.d9)(me)),this.classBreakInfos.push(Me),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(me,ve){const fe=this.classBreakInfos.length;for(let Me=0;Me<fe;Me++){const ce=[this.classBreakInfos[Me].minValue,this.classBreakInfos[Me].maxValue];if(ce[0]===me&&ce[1]===ve){this.classBreakInfos.splice(Me,1);break}}}getBreakIndex(me,ve){return this.valueExpression&&((0,Y.Wi)(ve)||(0,Y.Wi)(ve.arcade))&&ee.warn(""),this.valueExpression?this._getBreakIndexForExpression(me,ve):this._getBreakIndexForField(me)}getClassBreakInfo(me,ve){var fe=this;return(0,x.Z)(function*(){let Me=ve;fe.valueExpression&&((0,Y.Wi)(ve)||(0,Y.Wi)(ve.arcade))&&(Me=nn(Ot({},Me),{arcade:yield(0,H.LC)()}));const ce=fe.getBreakIndex(me,Me);return-1!==ce?fe.classBreakInfos[ce]:null})()}getSymbol(me,ve){if(this.valueExpression&&((0,Y.Wi)(ve)||(0,Y.Wi)(ve.arcade)))return void ee.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const fe=this.getBreakIndex(me,ve);return fe>-1?this.classBreakInfos[fe].symbol:this.defaultSymbol}getSymbolAsync(me,ve){var fe=this;return(0,x.Z)(function*(){let Me=ve;if(fe.valueExpression&&((0,Y.Wi)(ve)||(0,Y.Wi)(ve.arcade))){const he=yield(0,H.LC)(),{arcadeUtils:De}=he;De.hasGeometryOperations(fe.valueExpression)&&(yield De.enableGeometryOperations()),Me=nn(Ot({},Me),{arcade:he})}const ce=fe.getBreakIndex(me,Me);return ce>-1?fe.classBreakInfos[ce].symbol:fe.defaultSymbol})()}getSymbols(){const me=[];return this.classBreakInfos.forEach(ve=>{ve.symbol&&me.push(ve.symbol)}),this.defaultSymbol&&me.push(this.defaultSymbol),me}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((me,ve)=>me+ve.getAttributeHash(),"")}getMeshHash(){const me=JSON.stringify(this.backgroundFillSymbol),ve=JSON.stringify(this.defaultSymbol),fe=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${me}.${ve}.${this.classBreakInfos.reduce((Me,ce)=>Me+ce.getMeshHash(),"")}.${fe}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new de({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,te.d9)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,te.d9)(this.visualVariables),legendOptions:(0,te.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}collectRequiredFields(me,ve){var fe=this;return(0,x.Z)(function*(){const Me=[fe.collectVVRequiredFields(me,ve),fe.collectSymbolFields(me,ve)];yield Promise.all(Me)})()}collectSymbolFields(me,ve){var fe=this;return(0,x.Z)(function*(){const Me=[...fe.getSymbols().map(ce=>ce.collectRequiredFields(me,ve)),(0,K.io)(me,ve,fe.valueExpression)];(0,K.AB)(me,ve,fe.field),(0,K.AB)(me,ve,fe.normalizationField),yield Promise.all(Me)})()}_getBreakIndexForExpression(me,ve){const{viewingMode:fe,scale:Me,spatialReference:ce,arcade:he}=(0,Y.Pt)(ve,{});let De=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const xe=(0,Y.Wg)(he).arcadeUtils;if(!De){const je=xe.createSyntaxTree(this.valueExpression);De=xe.createFunction(je),this._compiledValueExpression.compiledFunction=De}this._compiledValueExpression.valueExpression=this.valueExpression;const Pe=xe.executeFunction(De,xe.createExecContext(me,xe.getViewInfo({viewingMode:fe,scale:Me,spatialReference:ce})));return this._getBreakIndexfromInfos(Pe)}_getBreakIndexForField(me){const fe=me.attributes,Me=this.normalizationType;let ce=parseFloat(fe[this.field]);if(Me){const he=this.normalizationTotal,De=parseFloat(fe[this.normalizationField]);if("log"===Me)ce=Math.log(ce)*Math.LOG10E;else if(Me!==le||isNaN(he)){if(Me===ge&&!isNaN(De)){if(isNaN(ce)||isNaN(De))return-1;ce/=De}}else ce=ce/he*100}return this._getBreakIndexfromInfos(ce)}_getBreakIndexfromInfos(me){const ve=this.isMaxInclusive;if(null!=me&&"number"==typeof me&&!isNaN(me))for(let fe=0;fe<this.classBreakInfos.length;fe++){const Me=[this.classBreakInfos[fe].minValue,this.classBreakInfos[fe].maxValue];if(Me[0]<=me&&(ve?me<=Me[1]:me<Me[1]))return fe}return-1}_areClassBreaksConsecutive(){const me=this.classBreakInfos,ve=me.length;for(let fe=1;fe<ve;fe++)if(me[fe-1].maxValue!==me[fe].minValue)return!1;return!0}};(0,T._)([(0,j.Cb)($.K)],pe.prototype,"backgroundFillSymbol",void 0),(0,T._)([(0,j.Cb)({type:[F.Z]})],pe.prototype,"classBreakInfos",void 0),(0,T._)([(0,X.r)("classBreakInfos")],pe.prototype,"readClassBreakInfos",null),(0,T._)([(0,z.c)("classBreakInfos")],pe.prototype,"writeClassBreakInfos",null),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],pe.prototype,"defaultLabel",void 0),(0,T._)([(0,j.Cb)($.G)],pe.prototype,"defaultSymbol",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],pe.prototype,"field",void 0),(0,T._)([(0,L.p)("field")],pe.prototype,"castField",null),(0,T._)([(0,j.Cb)({type:Boolean})],pe.prototype,"isMaxInclusive",void 0),(0,T._)([(0,j.Cb)({type:J.Z,json:{write:!0}})],pe.prototype,"legendOptions",void 0),(0,T._)([(0,j.Cb)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],pe.prototype,"minValue",null),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],pe.prototype,"normalizationField",void 0),(0,T._)([(0,j.Cb)({type:Number,cast:me=>(0,ae.q9)(me),json:{write:!0}})],pe.prototype,"normalizationTotal",void 0),(0,T._)([(0,j.Cb)({type:se.apiValues,value:null,json:{type:se.jsonValues,read:se.read,write:se.write}})],pe.prototype,"normalizationType",null),(0,T._)([(0,B.J)({classBreaks:"class-breaks"})],pe.prototype,"type",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],pe.prototype,"valueExpression",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],pe.prototype,"valueExpressionTitle",void 0),pe=de=(0,T._)([(0,Z.j)("esri.renderers.ClassBreaksRenderer")],pe);const ue=pe},49067:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{default:()=>le});var H,x=C(15861),T=C(17626),ne=C(91558),ie=C(84792),te=C(26584),oe=C(58817),Y=C(63290),j=C(93961),L=C(62208),B=C(10699),X=C(77275),Z=C(77712),ae=(C(90912),C(76898)),K=C(99433),V=C(36630),P=C(69357),F=C(2432),$=C(46679),J=C(94398);const de=Y.Z.getLogger("esri.renderers.DictionaryRenderer"),ee={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let ye=H=class extends((0,F.W)(P.Z)){constructor(ge){super(ge),this._ongoingRequests=new Map,this._symbolCache=new j.Z(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}writeData(ge,se){ge&&(se.scalingExpressionInfo={expression:ge,returnType:"number"})}writeVisualVariables(ge,se,Q,pe){null!=pe&&pe.origin||super.writeVisualVariables(ge,se,Q,pe)}clone(){return new H({config:(0,oe.d9)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,oe.d9)(this.fieldMap),url:(0,oe.d9)(this.url),visualVariables:(0,oe.d9)(this.visualVariables)})}getSymbolAsync(ge,se){var Q=this;return(0,x.Z)(function*(){let pe;Q._dictionaryPromise||(Q._dictionaryPromise=Q.fetchResources(se));try{pe=yield Q._dictionaryPromise}catch(Pe){if((0,B.D_)(Pe))return Q._dictionaryPromise=null,null}const ue={};if(Q.fieldMap)for(const Pe of Q._symbolFields){const je=Q.fieldMap[Pe];ue[Pe]=je&&null!=ge.attributes[je]?""+ge.attributes[je]:""}const me=pe(ue,se);if(!me||"string"!=typeof me)return null;const ve=(0,X.hP)(me).toString(),fe=Q._symbolCache.get(ve);if(fe)return fe.catch(()=>{Q._symbolCache.pop(ve)}),fe;const Me=me.split(";"),ce=[],he=[];for(const Pe of Me)if(Pe&&0!==Pe.length)if(-1===Pe.indexOf("po:"))if(-1!==Pe.indexOf("|")){for(const je of Pe.split("|"))if(Q._itemNames.has(je)){ce.push(je);break}}else Q._itemNames.has(Pe)&&ce.push(Pe);else{const je=Pe.substr(3).split("|");if(3===je.length){const rt=je[0],Le=je[1];let Ce=je[2];if("DashTemplate"===Le)Ce=Ce.split(" ").map(Te=>Number(Te));else if("Color"===Le){const Te=new ne.Z(Ce).toRgba();Ce=[Te[0],Te[1],Te[2],255*Te[3]]}else Ce=Number(Ce);he.push({primitiveName:rt,propertyName:Le,value:Ce})}}const De=!(0,L.pC)(ge.geometry)||!ge.geometry.hasZ&&"point"===ge.geometry.type,xe=Q._cimPartsToCIMSymbol(ce,he,De,se);return Q._symbolCache.put(ve,xe,1),xe})()}collectRequiredFields(ge,se){var Q=this;return(0,x.Z)(function*(){yield Q.collectVVRequiredFields(ge,se),Q.scaleExpression&&(yield(0,V.io)(ge,se,Q.scaleExpression));for(const pe in Q.fieldMap){const ue=Q.fieldMap[pe];se.has(ue)&&ge.add(ue)}})()}get arcadeRequired(){return!0}fetchResources(ge){var se=this;return(0,x.Z)(function*(){if(se._dictionaryPromise)return se._dictionaryPromise;if(!se.url)return void de.error("no valid URL!");const Q=(0,L.pC)(ge)?ge.abortOptions:null,pe=(0,ie.default)(se.url+"/resources/styles/dictionary-info.json",Ot({responseType:"json",query:{f:"json"}},Q)),[{data:ue}]=yield Promise.all([pe,(0,$.LC)()]);if(!ue)throw se._dictionaryPromise=null,new te.Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");const me=ue.expression,ve=ue.authoringInfo;se._refSymbolUrlTemplate=se.url+"/"+ue.cimRefTemplateUrl,se._itemNames=new Set(ue.itemsNames),se._symbolFields=ve.symbol;const fe={};if(se.config){const ce=se.config;for(const he in ce)fe[he]=ce[he]}if(ve.configuration)for(const ce of ve.configuration)fe.hasOwnProperty(ce.name)||(fe[ce.name]=ce.value);const Me=[];if((0,L.pC)(ge)&&ge.fields&&se.fieldMap)for(const ce of se._symbolFields){const he=se.fieldMap[ce],De=ge.fields.filter(xe=>xe.name===he);De.length>0&&Me.push(nn(Ot({},De[0]),{name:ce}))}return se._dictionaryPromise=(0,$.pp)(me,(0,L.pC)(ge)?ge.spatialReference:null,Me,fe).then(ce=>{const he={scale:0};return(De,xe)=>{const Pe=ce.repurposeFeature({geometry:null,attributes:De});return he.scale=(0,L.pC)(xe)?xe.scale:void 0,ce.evaluate({$feature:Pe,$view:he})}}).catch(ce=>(de.error("Creating dictinoary expression failed:",ce),null)),se._dictionaryPromise})()}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((ge,se)=>ge+se.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._symbolFields}_getSymbolPart(ge,se){var Q=this;return(0,x.Z)(function*(){if(Q._ongoingRequests.has(ge))return Q._ongoingRequests.get(ge).then(me=>me.data);const pe=Q._refSymbolUrlTemplate.replace(/\{itemName\}/gi,ge),ue=(0,ie.default)(pe,Ot({responseType:"json",query:{f:"json"}},se));Q._ongoingRequests.set(ge,ue);try{return(yield ue).data}catch(me){return Q._ongoingRequests.delete(ge),Promise.reject(me)}})()}_combineSymbolParts(ge,se,Q){if(!ge||0===ge.length)return null;const pe=Ot({},ge[0]);if(ge.length>1){pe.symbolLayers=[];for(const ue of ge)pe.symbolLayers.unshift(...ue.symbolLayers)}return Q&&(pe.callout=ee),{type:"CIMSymbolReference",symbol:pe,primitiveOverrides:se}}_cimPartsToCIMSymbol(ge,se,Q,pe){var ue=this;return(0,x.Z)(function*(){const me=new Array(ge.length);for(let fe=0;fe<ge.length;fe++)me[fe]=ue._getSymbolPart(ge[fe],pe);const ve=yield Promise.all(me);return new J.Z({data:ue._combineSymbolParts(ve,se,Q)})})()}};(0,T._)([(0,Z.Cb)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],ye.prototype,"config",void 0),(0,T._)([(0,Z.Cb)({type:Object,json:{write:!0}})],ye.prototype,"fieldMap",void 0),(0,T._)([(0,Z.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],ye.prototype,"scaleExpression",void 0),(0,T._)([(0,K.c)("scaleExpression")],ye.prototype,"writeData",null),(0,T._)([(0,Z.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(ge){return{enabled:!!ge&&!!this.scaleExpression}}}}})],ye.prototype,"scaleExpressionTitle",void 0),(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],ye.prototype,"url",void 0),(0,T._)([(0,K.c)("visualVariables")],ye.prototype,"writeVisualVariables",null),ye=H=(0,T._)([(0,ae.j)("esri.renderers.DictionaryRenderer")],ye);const le=ye},26284:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>pe});var F,x=C(15861),T=C(17626),ne=C(91558),ie=C(58817),te=C(83960),oe=C(90912),Y=C(55342),j=C(77712),L=C(76898),B=C(36630),X=C(69357),Z=C(2432),z=C(86162),ae=C(63290),P=(C(85931),C(8314),C(66656));const $=ae.Z.getLogger("esri.renderers.support.AttributeColorInfo");let J=F=class extends z.wq{constructor(ue){super(ue),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(ue){return null==ue?ue:"function"==typeof ue?($.error(".field: field must be a string value"),null):(0,oe.Zs)(ue)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new F({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,T._)([(0,j.Cb)({type:ne.Z,json:{type:[Number],write:!0}})],J.prototype,"color",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],J.prototype,"field",void 0),(0,T._)([(0,P.p)("field")],J.prototype,"castField",null),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],J.prototype,"label",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],J.prototype,"valueExpression",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],J.prototype,"valueExpressionTitle",void 0),J=F=(0,T._)([(0,L.j)("esri.renderers.support.AttributeColorInfo")],J);const H=J;var de;let ee=de=class extends z.wq{constructor(){super(...arguments),this.unit=null}clone(){return new de({unit:this.unit})}};(0,T._)([(0,j.Cb)({type:String,json:{write:!0}})],ee.prototype,"unit",void 0),ee=de=(0,T._)([(0,L.j)("esri.renderers.support.DotDensityLegendOptions")],ee);const ye=ee;var se,le=C(88493),ge=C(52068);let Q=se=class extends((0,Z.W)(X.Z)){constructor(ue){super(ue),this.attributes=null,this.backgroundColor=new ne.Z([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ge.Z,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(ue){if(null==this.referenceScale)return this.dotValue;const me=ue/this.referenceScale*this.dotValue;return me<1?1:me}getSymbol(){return new le.Z({outline:this.outline})}getSymbolAsync(){var ue=this;return(0,x.Z)(function*(){return ue.getSymbol()})()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((ue,me)=>ue+me.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new se({attributes:(0,ie.d9)(this.attributes),backgroundColor:(0,ie.d9)(this.backgroundColor),dotBlendingEnabled:(0,ie.d9)(this.dotBlendingEnabled),dotShape:(0,ie.d9)(this.dotShape),dotSize:(0,ie.d9)(this.dotSize),dotValue:(0,ie.d9)(this.dotValue),legendOptions:(0,ie.d9)(this.legendOptions),outline:(0,ie.d9)(this.outline),referenceScale:(0,ie.d9)(this.referenceScale),visualVariables:(0,ie.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(ue=>ue.field||ue.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}collectRequiredFields(ue,me){var ve=this;return(0,x.Z)(function*(){yield ve.collectVVRequiredFields(ue,me);for(const fe of ve.attributes)fe.valueExpression&&(yield(0,B.io)(ue,me,fe.valueExpression)),fe.field&&ue.add(fe.field)})()}};(0,T._)([(0,j.Cb)({type:[H],json:{write:!0}})],Q.prototype,"attributes",void 0),(0,T._)([(0,j.Cb)({type:ne.Z,json:{write:!0}})],Q.prototype,"backgroundColor",void 0),(0,T._)([(0,j.Cb)({type:Boolean}),(0,te.B)("dotBlendingEnabled")],Q.prototype,"blendDots",void 0),(0,T._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],Q.prototype,"dotBlendingEnabled",void 0),(0,T._)([(0,j.Cb)({type:String,json:{write:!1}})],Q.prototype,"dotShape",void 0),(0,T._)([(0,j.Cb)({type:Number,json:{write:!1}})],Q.prototype,"dotSize",void 0),(0,T._)([(0,j.Cb)({type:ye,json:{write:!0}})],Q.prototype,"legendOptions",void 0),(0,T._)([(0,j.Cb)({type:ge.Z,json:{default:null,write:!0}})],Q.prototype,"outline",void 0),(0,T._)([(0,j.Cb)({type:Number,json:{write:!0}})],Q.prototype,"dotValue",void 0),(0,T._)([(0,j.Cb)({type:Number}),(0,te.B)("dotValue")],Q.prototype,"referenceDotValue",void 0),(0,T._)([(0,j.Cb)({type:Number,json:{write:!0}})],Q.prototype,"referenceScale",void 0),(0,T._)([(0,j.Cb)({type:Number,json:{write:!0}})],Q.prototype,"seed",void 0),(0,T._)([(0,Y.J)({dotDensity:"dot-density"})],Q.prototype,"type",void 0),Q=se=(0,T._)([(0,L.j)("esri.renderers.DotDensityRenderer")],Q);const pe=Q},54928:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>$});var ae,x=C(15861),T=C(17626),ne=C(91558),ie=C(58817),te=C(77712),Y=(C(90912),C(55342)),j=C(76898),L=C(36630),B=C(69357),X=C(86162);C(85931),C(8314);let K=ae=class extends X.wq{constructor(J){super(J),this.color=null,this.ratio=null}clone(){return new ae({color:this.color,ratio:this.ratio})}};(0,T._)([(0,te.Cb)({type:ne.Z,json:{write:!0}})],K.prototype,"color",void 0),(0,T._)([(0,te.Cb)({type:Number,json:{write:!0}})],K.prototype,"ratio",void 0),K=ae=(0,T._)([(0,j.j)("esri.renderers.support.HeatmapColorStop")],K);const V=K;var P;let F=P=class extends B.Z{constructor(J){super(J),this.blurRadius=10,this.colorStops=[new V({ratio:0,color:new ne.Z("rgba(255, 140, 0, 0)")}),new V({ratio:.75,color:new ne.Z("rgba(255, 140, 0, 1)")}),new V({ratio:.9,color:new ne.Z("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}collectRequiredFields(J,H){var de=this;return(0,x.Z)(function*(){const ee=de.field;ee&&"string"==typeof ee&&(0,L.AB)(J,H,ee)})()}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new P({blurRadius:this.blurRadius,colorStops:(0,ie.d9)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};(0,T._)([(0,te.Cb)({type:Number,json:{write:!0}})],F.prototype,"blurRadius",void 0),(0,T._)([(0,te.Cb)({type:[V],json:{write:!0}})],F.prototype,"colorStops",void 0),(0,T._)([(0,te.Cb)({type:String,json:{write:!0}})],F.prototype,"field",void 0),(0,T._)([(0,te.Cb)({type:Number,json:{write:{overridePolicy:(J,H,de)=>({enabled:null==de})}}})],F.prototype,"fieldOffset",void 0),(0,T._)([(0,te.Cb)({type:Number,json:{write:!0}})],F.prototype,"maxPixelIntensity",void 0),(0,T._)([(0,te.Cb)({type:Number,json:{write:!0}})],F.prototype,"minPixelIntensity",void 0),(0,T._)([(0,Y.J)({heatmap:"heatmap"})],F.prototype,"type",void 0),F=P=(0,T._)([(0,j.j)("esri.renderers.HeatmapRenderer")],F);const $=F},69357:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>z});var x=C(15861),T=C(17626),ne=C(2076),ie=C(86162),te=C(77712),L=(C(85931),C(8314),C(90912),C(76898)),B=C(15312);const X=new ne.Xn({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let Z=class extends ie.wq{constructor(ae){super(ae),this.authoringInfo=null,this.type=null}getRequiredFields(ae){var K=this;return(0,x.Z)(function*(){if(!K.collectRequiredFields)return[];const V=new Set;return yield K.collectRequiredFields(V,ae),Array.from(V).sort()})()}getSymbol(ae,K){}getSymbolAsync(ae,K){return(0,x.Z)(function*(){})()}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,T._)([(0,te.Cb)({type:B.Z,json:{write:!0}})],Z.prototype,"authoringInfo",void 0),(0,T._)([(0,te.Cb)({type:X.apiValues,readOnly:!0,json:{type:X.jsonValues,read:!1,write:{writer:X.write,ignoreOrigin:!0}}})],Z.prototype,"type",void 0),Z=(0,T._)([(0,L.j)("esri.renderers.Renderer")],Z);const z=Z},40342:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>z});var X,x=C(15861),T=C(17626),ne=C(58817),ie=C(77712),oe=(C(90912),C(55342)),Y=C(76898),j=C(69357),L=C(2432),B=C(76457);let Z=X=class extends((0,L.W)(j.Z)){constructor(ae){super(ae),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(ae,K){var V=this;return(0,x.Z)(function*(){yield Promise.all([V.collectSymbolFields(ae,K),V.collectVVRequiredFields(ae,K)])})()}collectSymbolFields(ae,K){var V=this;return(0,x.Z)(function*(){yield Promise.all(V.getSymbols().map(P=>P.collectRequiredFields(ae,K)))})()}getSymbol(ae,K){return this.symbol}getSymbolAsync(ae,K){var V=this;return(0,x.Z)(function*(){return V.symbol})()}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((ae,K)=>ae+K.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((ae,K)=>ae+JSON.stringify(K),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new X({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,ne.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,T._)([(0,ie.Cb)({type:String,json:{write:!0}})],Z.prototype,"description",void 0),(0,T._)([(0,ie.Cb)({type:String,json:{write:!0}})],Z.prototype,"label",void 0),(0,T._)([(0,ie.Cb)(B.G)],Z.prototype,"symbol",void 0),(0,T._)([(0,oe.J)({simple:"simple"})],Z.prototype,"type",void 0),Z=X=(0,T._)([(0,Y.j)("esri.renderers.SimpleRenderer")],Z);const z=Z},14726:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ve});var Q,x=C(15861),T=C(17626),ne=C(65787),ie=C(26584),te=C(58817),oe=C(63290),Y=C(62208),j=C(94113),L=C(77712),B=C(66656),X=C(55342),Z=C(68653),z=C(76898),ae=C(99433),K=C(84682),V=C(90912),P=C(36630),F=C(84687),$=C(69357),J=C(2432),H=C(76457),de=C(10914),ee=C(87266),ye=C(46679),le=C(29840),ge=C(78241),se=C(12874);const pe=oe.Z.getLogger("esri.renderers.UniqueValueRenderer"),ue=(0,V.se)(ee.Z);let me=Q=class extends((0,J.W)($.Z)){constructor(fe){super(fe),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(Me,ce){if(!Me&&!ce)return;if(!Me||!ce)return{type:"complete",oldValue:Me,newValue:ce};let he=!1;const De={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let xe=0;xe<ce.length;xe++){const Pe=Me.find(je=>je.value===ce[xe].value);Pe?(0,K.Hg)(Pe,ce[xe])?(De.changed.push({type:"complete",oldValue:Pe,newValue:ce[xe]}),he=!0):De.unchanged.push({oldValue:Pe,newValue:ce[xe]}):(De.added.push(ce[xe]),he=!0)}for(let xe=0;xe<Me.length;xe++)ce.find(Pe=>Pe.value===Me[xe].value)||(De.removed.push(Me[xe]),he=!0);return he?De:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(fe){return null==fe||"function"==typeof fe?fe:(0,V.Zs)(fe)}writeField(fe,Me,ce,he){"string"==typeof fe?Me[ce]=fe:he&&he.messages?he.messages.push(new ie.Z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):pe.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(fe){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",fe)}readPortal(fe,Me,ce){return ce.portal||F.Z.getDefault()}readStyleOrigin(fe,Me,ce){if(Me.styleName)return Object.freeze({styleName:Me.styleName});if(Me.styleUrl){const he=(0,le.f)(Me.styleUrl,ce);return Object.freeze({styleUrl:he})}}writeStyleOrigin(fe,Me,ce,he){fe.styleName?Me.styleName=fe.styleName:fe.styleUrl&&(Me.styleUrl=(0,le.t)(fe.styleUrl,he))}set uniqueValueInfos(fe){this.styleOrigin?pe.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",fe),this._updateValueInfoMap())}addUniqueValueInfo(fe,Me){if(this.styleOrigin)return void pe.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let ce;ce="object"==typeof fe?ue(fe):new ee.Z({value:fe,symbol:(0,ne.se)(Me)}),this.uniqueValueInfos.push(ce),this._valueInfoMap[ce.value]=ce}removeUniqueValueInfo(fe){if(this.styleOrigin)pe.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let Me=0;Me<this.uniqueValueInfos.length;Me++)if(this.uniqueValueInfos[Me].value===fe+""){delete this._valueInfoMap[fe],this.uniqueValueInfos.splice(Me,1);break}}getUniqueValueInfo(fe,Me){var ce=this;return(0,x.Z)(function*(){let he=Me;return ce.valueExpression&&((0,Y.Wi)(Me)||(0,Y.Wi)(Me.arcade))&&(he=nn(Ot({},he),{arcade:yield(0,ye.LC)()})),ce._getUniqueValueInfo(fe,he)})()}getSymbol(fe,Me){if(this.valueExpression&&((0,Y.Wi)(Me)||(0,Y.Wi)(Me.arcade)))return void pe.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const ce=this._getUniqueValueInfo(fe,Me);return ce&&ce.symbol||this.defaultSymbol}getSymbolAsync(fe,Me){var ce=this;return(0,x.Z)(function*(){let he=Me;if(ce.valueExpression&&((0,Y.Wi)(he)||(0,Y.Wi)(he.arcade))){const xe=yield(0,ye.LC)(),{arcadeUtils:Pe}=xe;Pe.hasGeometryOperations(ce.valueExpression)&&(yield Pe.enableGeometryOperations()),he=nn(Ot({},he),{arcade:xe})}const De=ce._getUniqueValueInfo(fe,he);return De&&De.symbol||ce.defaultSymbol})()}getSymbols(){const fe=[];for(const Me of this.uniqueValueInfos)Me.symbol&&fe.push(Me.symbol);return this.defaultSymbol&&fe.push(this.defaultSymbol),fe}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((fe,Me)=>fe+Me.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((fe,Me)=>fe+Me.getMeshHash(),"")}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const fe=new Q({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,te.d9)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,te.d9)(this.visualVariables),legendOptions:(0,te.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,te.d9)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(fe._isDefaultSymbolDerived=!0),fe._set("portal",this.portal);const Me=(0,te.d9)(this.uniqueValueInfos);return this.styleOrigin&&(fe._set("styleOrigin",Object.freeze((0,te.d9)(this.styleOrigin))),Object.freeze(Me)),fe._set("uniqueValueInfos",Me),fe._updateValueInfoMap(),fe}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}collectRequiredFields(fe,Me){var ce=this;return(0,x.Z)(function*(){const he=[ce.collectVVRequiredFields(fe,Me),ce.collectSymbolFields(fe,Me)];yield Promise.all(he)})()}collectSymbolFields(fe,Me){var ce=this;return(0,x.Z)(function*(){const he=[...ce.getSymbols().map(De=>De.collectRequiredFields(fe,Me)),(0,P.io)(fe,Me,ce.valueExpression)];(0,P.AB)(fe,Me,ce.field),(0,P.AB)(fe,Me,ce.field2),(0,P.AB)(fe,Me,ce.field3),yield Promise.all(he)})()}populateFromStyle(){return(0,ge.n2)(this.styleOrigin,{portal:this.portal}).then(fe=>{const Me=[];return this._valueInfoMap={},fe&&fe.data&&Array.isArray(fe.data.items)&&fe.data.items.forEach(ce=>{const he=new se.Z({styleUrl:fe.styleUrl,styleName:fe.styleName,portal:this.portal,name:ce.name});this.defaultSymbol||ce.name!==fe.data.defaultItem||(this.defaultSymbol=he,this._isDefaultSymbolDerived=!0);const De=new ee.Z({value:ce.name,symbol:he});Me.push(De),this._valueInfoMap[ce.name]=De}),this._set("uniqueValueInfos",Object.freeze(Me)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(fe=>this._valueInfoMap[fe.value+""]=fe)}_getUniqueValueInfo(fe,Me){return this.valueExpression?this._getUnqiueValueInfoForExpression(fe,Me):this._getUnqiueValueInfoForFields(fe)}_getUnqiueValueInfoForExpression(fe,Me){const{viewingMode:ce,scale:he,spatialReference:De,arcade:xe}=(0,Y.Pt)(Me,{});let Pe=this._cache.compiledFunc;const je=(0,Y.Wg)(xe).arcadeUtils;if(!Pe){const Le=je.createSyntaxTree(this.valueExpression);Pe=je.createFunction(Le),this._cache.compiledFunc=Pe}const rt=je.executeFunction(Pe,je.createExecContext(fe,je.getViewInfo({viewingMode:ce,scale:he,spatialReference:De})));return this._valueInfoMap[rt+""]}_getUnqiueValueInfoForFields(fe){const Me=this.field,ce=fe.attributes;let he;if("function"!=typeof Me&&this.field2){const De=this.field2,xe=this.field3,Pe=[];Me&&Pe.push(ce[Me]),De&&Pe.push(ce[De]),xe&&Pe.push(ce[xe]),he=Pe.join(this.fieldDelimiter||"")}else"function"==typeof Me?he=Me(fe):Me&&(he=ce[Me]);return this._valueInfoMap[he+""]}static fromPortalStyle(fe,Me){const ce=new Q(Me&&Me.properties);ce._set("styleOrigin",Object.freeze({styleName:fe})),ce._set("portal",Me&&Me.portal||F.Z.getDefault());const he=ce.populateFromStyle();return he.catch(De=>{pe.error(`#fromPortalStyle('${fe}'[, ...])`,"Failed to create unique value renderer from style name",De)}),he}static fromStyleUrl(fe,Me){const ce=new Q(Me&&Me.properties);ce._set("styleOrigin",Object.freeze({styleUrl:fe}));const he=ce.populateFromStyle();return he.catch(De=>{pe.error(`#fromStyleUrl('${fe}'[, ...])`,"Failed to create unique value renderer from style URL",De)}),he}};(0,T._)([(0,L.Cb)({readOnly:!0})],me.prototype,"_cache",null),(0,T._)([(0,X.J)({uniqueValue:"unique-value"})],me.prototype,"type",void 0),(0,T._)([(0,L.Cb)(H.K)],me.prototype,"backgroundFillSymbol",void 0),(0,T._)([(0,L.Cb)({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],me.prototype,"field",void 0),(0,T._)([(0,B.p)("field")],me.prototype,"castField",null),(0,T._)([(0,ae.c)("field")],me.prototype,"writeField",null),(0,T._)([(0,L.Cb)({type:String,json:{write:!0}})],me.prototype,"field2",void 0),(0,T._)([(0,L.Cb)({type:String,json:{write:!0}})],me.prototype,"field3",void 0),(0,T._)([(0,L.Cb)({type:String,json:{write:!0}})],me.prototype,"valueExpression",void 0),(0,T._)([(0,L.Cb)({type:String,json:{write:!0}})],me.prototype,"valueExpressionTitle",void 0),(0,T._)([(0,L.Cb)({type:de.Z,json:{write:!0}})],me.prototype,"legendOptions",void 0),(0,T._)([(0,L.Cb)({type:String,json:{write:!0}})],me.prototype,"defaultLabel",void 0),(0,T._)([(0,L.Cb)((0,j.RH)(Ot({},H.G),{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],me.prototype,"defaultSymbol",null),(0,T._)([(0,L.Cb)({type:String,json:{write:!0}})],me.prototype,"fieldDelimiter",void 0),(0,T._)([(0,L.Cb)({type:F.Z,readOnly:!0})],me.prototype,"portal",void 0),(0,T._)([(0,Z.r)("portal",["styleName"])],me.prototype,"readPortal",null),(0,T._)([(0,L.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],me.prototype,"styleOrigin",void 0),(0,T._)([(0,Z.r)("styleOrigin",["styleName","styleUrl"])],me.prototype,"readStyleOrigin",null),(0,T._)([(0,ae.c)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],me.prototype,"writeStyleOrigin",null),(0,T._)([(0,L.Cb)({type:[ee.Z],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],me.prototype,"uniqueValueInfos",null),me=Q=(0,T._)([(0,z.j)("esri.renderers.UniqueValueRenderer")],me);const ve=me},2432:(ut,Oe,C)=>{"use strict";C.d(Oe,{W:()=>De});var z,x=C(15861),T=C(17626),ne=C(77712),oe=(C(85931),C(8314),C(90912)),Y=C(68653),j=C(76898),L=C(99433),B=C(36630),X=C(17977),Z=C(8029);let ae=z=class extends X.Z{constructor(xe){super(xe),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(xe){xe&&Array.isArray(xe)&&(xe=xe.filter(Pe=>!!Pe)).sort((Pe,je)=>Pe.value-je.value),this._set("stops",xe)}clone(){return new z({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(xe=>xe.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(xe=>xe.value||0)}};(0,T._)([(0,ne.Cb)({readOnly:!0})],ae.prototype,"cache",null),(0,T._)([(0,ne.Cb)({type:["color"],json:{type:["colorInfo"]}})],ae.prototype,"type",void 0),(0,T._)([(0,ne.Cb)({type:String,json:{write:!0}})],ae.prototype,"normalizationField",void 0),(0,T._)([(0,ne.Cb)({type:[Z.Z],json:{write:!0}})],ae.prototype,"stops",null),ae=z=(0,T._)([(0,j.j)("esri.renderers.visualVariables.ColorVariable")],ae);const K=ae;var F,V=C(86162),P=C(92236);let $=F=class extends V.wq{constructor(xe){super(xe),this.label=null,this.opacity=null,this.value=null}readOpacity(xe,Pe){return(0,P.b)(Pe.transparency)}writeOpacity(xe,Pe,je){Pe[je]=(0,P.a)(xe)}clone(){return new F({label:this.label,opacity:this.opacity,value:this.value})}};(0,T._)([(0,ne.Cb)({type:String,json:{write:!0}})],$.prototype,"label",void 0),(0,T._)([(0,ne.Cb)({type:Number,json:{type:oe.z8,write:{target:"transparency"}}})],$.prototype,"opacity",void 0),(0,T._)([(0,Y.r)("opacity",["transparency"])],$.prototype,"readOpacity",null),(0,T._)([(0,L.c)("opacity")],$.prototype,"writeOpacity",null),(0,T._)([(0,ne.Cb)({type:Number,json:{write:!0}})],$.prototype,"value",void 0),$=F=(0,T._)([(0,j.j)("esri.renderers.visualVariables.support.OpacityStop")],$);const J=$;var H;let de=H=class extends X.Z{constructor(xe){super(xe),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(xe){xe&&Array.isArray(xe)&&(xe=xe.filter(Pe=>!!Pe)).sort((Pe,je)=>Pe.value-je.value),this._set("stops",xe)}clone(){return new H({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(xe=>xe.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(xe=>xe.value||0)}};(0,T._)([(0,ne.Cb)({readOnly:!0})],de.prototype,"cache",null),(0,T._)([(0,ne.Cb)({type:["opacity"],json:{type:["transparencyInfo"]}})],de.prototype,"type",void 0),(0,T._)([(0,ne.Cb)({type:String,json:{write:!0}})],de.prototype,"normalizationField",void 0),(0,T._)([(0,ne.Cb)({type:[J],json:{write:!0}})],de.prototype,"stops",null),de=H=(0,T._)([(0,j.j)("esri.renderers.visualVariables.OpacityVariable")],de);const ee=de;var ye=C(13398),le=C(68598),ge=C(14517),se=C(2076),Q=C(63290),pe=C(14889);const ue=Q.Z.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),me={color:K,size:le.Z,opacity:ee,rotation:ye.Z},ve=new se.Xn({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),fe=/^\[([^\]]+)\]$/i;let Me=class extends ge.Z{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(xe){if(this._resetVariables(),(xe=xe&&xe.filter(Pe=>!!Pe))&&xe.length){for(const Pe of xe)switch(Pe.type){case"color":this.colorVariables.push(Pe);break;case"opacity":this.opacityVariables.push(Pe);break;case"rotation":this.rotationVariables.push(Pe);break;case"size":this.sizeVariables.push(Pe)}this.sizeVariables.length&&this.sizeVariables.some(Pe=>!!Pe.target)&&xe.sort((Pe,je)=>{let rt=null;return rt=Pe.target===je.target?0:Pe.target?1:-1,rt});for(let Pe=0;Pe<xe.length;Pe++)xe[Pe].index=Pe;this._set("visualVariables",xe)}else this._set("visualVariables",xe)}readVariables(xe,Pe,je){const{rotationExpression:rt,rotationType:Le}=Pe,Ce=rt&&rt.match(fe),Te=Ce&&Ce[1];if(Te&&(xe||(xe=[]),xe.push({type:"rotationInfo",rotationType:Le,field:Te})),xe)return xe.map(Ye=>{const ct=ve.read(Ye.type),Ae=me[ct];Ae||(ue.warn(`Unknown variable type: ${ct}`),je&&je.messages&&je.messages.push(new pe.Z("visual-variable:unsupported",`visualVariable of type '${ct}' is not supported`,{definition:Ye,context:je})));const Qe=new Ae;return Qe.read(Ye,je),Qe})}writeVariables(xe,Pe){const je=[];for(const rt of xe){const Le=rt.toJSON(Pe);Le&&je.push(Le)}return je}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,T._)([(0,ne.Cb)()],Me.prototype,"visualVariables",null),Me=(0,T._)([(0,j.j)("esri.renderers.visualVariables.VisualVariableFactory")],Me);const ce=Me,he={base:X.Z,key:"type",typeMap:{opacity:ee,color:K,rotation:ye.Z,size:le.Z}},De=xe=>{let Pe=class extends xe{constructor(){super(...arguments),this._vvFactory=new ce}set visualVariables(je){this._vvFactory.visualVariables=je,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(je,rt,Le){return this._vvFactory.readVariables(je,rt,Le)}writeVisualVariables(je,rt,Le,Ce){rt[Le]=this._vvFactory.writeVariables(je,Ce)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const je of this.visualVariables)if(je.arcadeRequired)return!0;return!1}hasVisualVariables(je,rt){return je?this.getVisualVariablesForType(je,rt).length>0:this.getVisualVariablesForType("size",rt).length>0||this.getVisualVariablesForType("color",rt).length>0||this.getVisualVariablesForType("opacity",rt).length>0||this.getVisualVariablesForType("rotation",rt).length>0}getVisualVariablesForType(je,rt){const Le=this.visualVariables;return Le?Le.filter(Ce=>Ce.type===je&&("string"==typeof rt?Ce.target===rt:!1!==rt||!Ce.target)):[]}collectVVRequiredFields(je,rt){var Le=this;return(0,x.Z)(function*(){let Ce=[];Le.visualVariables&&(Ce=Ce.concat(Le.visualVariables));for(const Te of Ce)Te&&(Te.field&&(0,B.AB)(je,rt,Te.field),Te.normalizationField&&(0,B.AB)(je,rt,Te.normalizationField),Te.valueExpression&&(yield(0,B.io)(je,rt,Te.valueExpression)))})()}};return(0,T._)([(0,ne.Cb)({types:[he],value:null,json:{write:!0}})],Pe.prototype,"visualVariables",null),(0,T._)([(0,Y.r)("visualVariables",["visualVariables","rotationType","rotationExpression"])],Pe.prototype,"readVisualVariables",null),(0,T._)([(0,L.c)("visualVariables")],Pe.prototype,"writeVisualVariables",null),Pe=(0,T._)([(0,j.j)("esri.renderers.mixins.VisualVariablesMixin")],Pe),Pe}},15312:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ce});var X,x=C(17626),T=C(2076),ne=C(86162),ie=C(58817),te=C(77712),oe=C(90912),Y=C(68653),j=C(76898);C(85931),C(8314);let Z=X=class extends ne.wq{constructor(he){super(he),this.minValue=0,this.maxValue=0}clone(){return new X({minValue:this.minValue,maxValue:this.maxValue})}};(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],Z.prototype,"minValue",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],Z.prototype,"maxValue",void 0),Z=X=(0,x._)([(0,j.j)("esri.renderer.support.AuthoringInfoClassBreakInfo")],Z);const z=Z;var ae;let K=ae=class extends ne.wq{constructor(he){super(he),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new ae({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,ie.d9)(this.classBreakInfos)})}};(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],K.prototype,"field",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],K.prototype,"normalizationField",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],K.prototype,"label",void 0),(0,x._)([(0,te.Cb)({type:[z],json:{write:!0}})],K.prototype,"classBreakInfos",void 0),K=ae=(0,x._)([(0,j.j)("esri.renderers.support.AuthoringInfoFieldInfo")],K);const V=K;var F,P=C(66656);const $=new T.Xn({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),J=new T.Xn({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),H={key:he=>"number"==typeof he?"number":"string",typeMap:{number:Number,string:String},base:null},de=["high-to-low","above-and-below","centered-on","extremes"],ee=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],ye=["seconds","minutes","hours","days","months","years"];let le=F=class extends ne.wq{constructor(he){super(he),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(he){return"string"==typeof he||"number"==typeof he?he:null}castStartTime(he){return"string"==typeof he||"number"==typeof he?he:null}get style(){return"color"===this.type?this._get("style"):null}set style(he){this._set("style",he)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(he){this._set("theme",he)}clone(){return new F({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,x._)([(0,te.Cb)({types:H,json:{write:!0}})],le.prototype,"endTime",void 0),(0,x._)([(0,P.p)("endTime")],le.prototype,"castEndTime",null),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],le.prototype,"field",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],le.prototype,"maxSliderValue",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],le.prototype,"minSliderValue",void 0),(0,x._)([(0,te.Cb)({types:H,json:{write:!0}})],le.prototype,"startTime",void 0),(0,x._)([(0,P.p)("startTime")],le.prototype,"castStartTime",null),(0,x._)([(0,te.Cb)({type:$.apiValues,value:null,json:{type:$.jsonValues,read:$.read,write:$.write}})],le.prototype,"style",null),(0,x._)([(0,te.Cb)({type:ee,value:null,json:{type:ee,origins:{"web-scene":{type:de,write:{writer:(he,De)=>{de.indexOf(he)>-1&&(De.theme=he)}}}},write:!0}})],le.prototype,"theme",null),(0,x._)([(0,te.Cb)({type:J.apiValues,json:{type:J.jsonValues,read:J.read,write:J.write}})],le.prototype,"type",void 0),(0,x._)([(0,te.Cb)({type:ye,json:{type:ye,write:!0}})],le.prototype,"units",void 0),le=F=(0,x._)([(0,j.j)("esri.renderers.support.AuthoringInfoVisualVariable")],le);const ge=le;var Q,se=C(79023);const pe=new T.Xn({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),ue=new T.Xn({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),me=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let Me=Q=class extends ne.wq{constructor(he){super(he),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const he=this._get("classificationMethod"),De=this.type;return De&&"relationship"!==De?"class-breaks-size"===De||"class-breaks-color"===De?he||"manual":null:he}set classificationMethod(he){this._set("classificationMethod",he)}readColorRamp(he){if(he)return(0,se.i)(he)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(he){this._set("fields",he)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(he){this._set("field1",he)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(he){this._set("field2",he)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(he){this._set("focus",he)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(he){this._set("numClasses",he)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(he){this._set("statistics",he)}get standardDeviationInterval(){const he=this.type;return he&&"relationship"!==he&&"class-breaks-size"!==he&&"class-breaks-color"!==he||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(he){this._set("standardDeviationInterval",he)}get type(){return this._get("type")}set type(he){let De=he;"classed-size"===he?De="class-breaks-size":"classed-color"===he&&(De="class-breaks-color"),this._set("type",De)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(he){this._set("univariateSymbolStyle",he)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(he){this._set("univariateTheme",he)}clone(){return new Q({classificationMethod:this.classificationMethod,colorRamp:(0,ie.d9)(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:(0,ie.d9)(this.field1),field2:(0,ie.d9)(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(he=>he.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})}};(0,x._)([(0,te.Cb)({type:pe.apiValues,value:null,json:{type:pe.jsonValues,read:pe.read,write:pe.write,origins:{"web-document":{default:"manual",type:pe.jsonValues,read:pe.read,write:pe.write}}}})],Me.prototype,"classificationMethod",null),(0,x._)([(0,te.Cb)({types:se.V,json:{write:!0}})],Me.prototype,"colorRamp",void 0),(0,x._)([(0,Y.r)("colorRamp")],Me.prototype,"readColorRamp",null),(0,x._)([(0,te.Cb)({type:[String],value:null,json:{write:!0}})],Me.prototype,"fields",null),(0,x._)([(0,te.Cb)({type:V,value:null,json:{write:!0}})],Me.prototype,"field1",null),(0,x._)([(0,te.Cb)({type:V,value:null,json:{write:!0}})],Me.prototype,"field2",null),(0,x._)([(0,te.Cb)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Me.prototype,"focus",null),(0,x._)([(0,te.Cb)({type:Number,value:null,json:{type:oe.z8,write:!0}})],Me.prototype,"numClasses",null),(0,x._)([(0,te.Cb)({type:me,json:{type:me,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Me.prototype,"lengthUnit",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Me.prototype,"maxSliderValue",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Me.prototype,"minSliderValue",void 0),(0,x._)([(0,te.Cb)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Me.prototype,"statistics",null),(0,x._)([(0,te.Cb)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Me.prototype,"standardDeviationInterval",null),(0,x._)([(0,te.Cb)({type:ue.apiValues,value:null,json:{type:ue.jsonValues,read:ue.read,write:ue.write}})],Me.prototype,"type",null),(0,x._)([(0,te.Cb)({type:[ge],json:{write:!0}})],Me.prototype,"visualVariables",void 0),(0,x._)([(0,te.Cb)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Me.prototype,"univariateSymbolStyle",null),(0,x._)([(0,te.Cb)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Me.prototype,"univariateTheme",null),Me=Q=(0,x._)([(0,j.j)("esri.renderers.support.AuthoringInfo")],Me);const ce=Me},74400:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(76457);let B=L=class extends T.wq{constructor(Z){super(Z),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new L({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const Z=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${Z}`}};(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],B.prototype,"description",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],B.prototype,"label",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],B.prototype,"minValue",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],B.prototype,"maxValue",void 0),(0,x._)([(0,ne.Cb)(j.G)],B.prototype,"symbol",void 0),B=L=(0,x._)([(0,Y.j)("esri.renderers.support.ClassBreakInfo")],B);const X=B},10914:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let L=j=class extends T.wq{constructor(){super(...arguments),this.title=null}clone(){return new j({title:this.title})}};(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],L.prototype,"title",void 0),L=j=(0,x._)([(0,Y.j)("esri.renderers.support.LegendOptions")],L);const B=L},87266:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(76457);let B=L=class extends T.wq{constructor(Z){super(Z),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new L({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const Z=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${Z}`}};(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],B.prototype,"description",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],B.prototype,"label",void 0),(0,x._)([(0,ne.Cb)(j.G)],B.prototype,"symbol",void 0),(0,x._)([(0,ne.Cb)({type:[String,Number],json:{type:String,write:{writer:(Z,z)=>{z.value=null==Z?void 0:Z.toString()}}}})],B.prototype,"value",void 0),B=L=(0,x._)([(0,Y.j)("esri.renderers.support.UniqueValueInfo")],B);const X=B},76457:(ut,Oe,C)=>{"use strict";C.d(Oe,{K:()=>Y,G:()=>oe});var x=C(65787),T=C(383),ne=C(65270),ie=C(10012),te=C(89673);const oe={types:x.QT,json:{write:{writer:ne.c},origins:{"web-scene":{types:x.f_,write:{writer:ne.c},read:{reader:(0,T.d)({types:x.f_})}}}}},Y={types:{base:ie.Z,key:"type",typeMap:{"simple-fill":x.LB.typeMap["simple-fill"],"picture-fill":x.LB.typeMap["picture-fill"],"polygon-3d":x.LB.typeMap["polygon-3d"]}},json:{write:{writer:ne.c},origins:{"web-scene":{type:te.Z,write:{writer:ne.c}}}}}},33474:(ut,Oe,C)=>{"use strict";C.d(Oe,{i:()=>ie,a:()=>oe});var x=C(14889),T=C(383),ne=C(32088);function ie(Y,j){return oe(Y,null,j)}const te=(0,T.d)({types:ne.A});function oe(Y,j,L){return Y?Y&&(Y.styleName||Y.styleUrl)&&"uniqueValue"!==Y.type?(L&&L.messages&&L.messages.push(new x.Z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+Y.type+"'",{definition:Y,context:L})),null):te(Y,j,L):null}},21254:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>ne});var x=C(16730),T=C(94425);const ne={inches:(0,x.En)(1,"meters","inches"),feet:(0,x.En)(1,"meters","feet"),"us-feet":(0,x.En)(1,"meters","us-feet"),yards:(0,x.En)(1,"meters","yards"),miles:(0,x.En)(1,"meters","miles"),"nautical-miles":(0,x.En)(1,"meters","nautical-miles"),millimeters:(0,x.En)(1,"meters","millimeters"),centimeters:(0,x.En)(1,"meters","centimeters"),decimeters:(0,x.En)(1,"meters","decimeters"),meters:(0,x.En)(1,"meters","meters"),kilometers:(0,x.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,x.ty)(1,"meters",T.sv.radius)}},39683:(ut,Oe,C)=>{"use strict";C.d(Oe,{y:()=>te});var x=C(15861),T=C(59213),ne=C(10699),ie=C(14889);function te(Y,j,L){return oe.apply(this,arguments)}function oe(){return(oe=(0,x.Z)(function*(Y,j,L){const B=Y&&Y.getAtOrigin&&Y.getAtOrigin("renderer",j.origin);if(B&&"unique-value"===B.type&&B.styleOrigin){const X=yield(0,T.q6)(B.populateFromStyle());if((0,ne.k_)(L),!1===X.ok){const Z=X.error;j&&j.messages&&j.messages.push(new ie.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${Z.message}`,{error:Z,context:j})),Y.clear("renderer",j.origin)}}})).apply(this,arguments)}},32088:(ut,Oe,C)=>{"use strict";C.d(Oe,{A:()=>j,o:()=>L});var x=C(4832),T=C(49067),ne=C(26284),ie=C(54928),te=C(69357),oe=C(40342),Y=C(14726);const j={key:"type",base:te.Z,typeMap:{heatmap:ie.Z,simple:oe.Z,"unique-value":Y.Z,"class-breaks":x.Z,"dot-density":ne.Z,dictionary:T.default},errorContext:"renderer"},L={key:"type",base:te.Z,typeMap:{simple:oe.Z,"unique-value":Y.Z,"class-breaks":x.Z},errorContext:"renderer"}},13398:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Z});var B,x=C(17626),T=C(26584),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(99433),L=C(17977);let X=B=class extends L.Z{constructor(z){super(z),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(z,ae,K,V){V&&V.messages&&V.messages.push(new T.Z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:`visualVariables[${this.index}].valueExpressionTitle`,context:V}))}clone(){return new B({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};(0,x._)([(0,ne.Cb)({readOnly:!0})],X.prototype,"cache",null),(0,x._)([(0,ne.Cb)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],X.prototype,"axis",void 0),(0,x._)([(0,ne.Cb)({type:["rotation"],json:{type:["rotationInfo"]}})],X.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],X.prototype,"rotationType",void 0),(0,x._)([(0,ne.Cb)({type:String,json:{write:!0}})],X.prototype,"valueExpressionTitle",void 0),(0,x._)([(0,j.c)("web-scene","valueExpressionTitle")],X.prototype,"writeValueExpressionTitleWebScene",null),X=B=(0,x._)([(0,Y.j)("esri.renderers.visualVariables.RotationVariable")],X);const Z=X},68598:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>pe});var P,x=C(17626),T=C(26584),ne=C(2076),ie=C(63290),te=C(23841),oe=C(77712),L=(C(85931),C(8314),C(66656)),B=C(68653),X=C(76898),Z=C(99433),z=C(17977),ae=C(64902),V=(C(90912),C(11333));let F=P=class extends V.Z{constructor(){super(...arguments),this.customValues=null}clone(){return new P({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};(0,x._)([(0,oe.Cb)({type:[Number],json:{write:!0}})],F.prototype,"customValues",void 0),F=P=(0,x._)([(0,X.j)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],F);const $=F;var de,J=C(86971),H=C(81808);const ee=ie.Z.getLogger("esri.renderers.visualVariables.SizeVariable"),ye=new ne.Xn({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),le=new ne.Xn({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function ge(ue){if(null!=ue)return"string"==typeof ue||"number"==typeof ue?(0,te.t_)(ue):"size"===ue.type?(0,J.iY)(ue)?ue:(delete(ue=Ot({},ue)).type,new Q(ue)):void 0}function se(ue,me,ve){if("object"!=typeof ue)return ue;const fe=new Q;return fe.read(ue,ve),fe}let Q=de=class extends z.Z{constructor(ue){super(ue),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:H.viewScaleRE.test(this.valueExpression)}}set expression(ue){ee.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===ue?(this.valueExpression="$view.scale",this._set("expression",ue)):this._set("expression",null)}set index(ue){(0,J.iY)(this.maxSize)&&(this.maxSize.index=`visualVariables[${ue}].maxSize`),(0,J.iY)(this.minSize)&&(this.minSize.index=`visualVariables[${ue}].minSize`),this._set("index",ue)}get inputValueType(){return(0,J.PS)(this)}set maxDataValue(ue){ue&&this.stops&&(ee.warn("cannot set maxDataValue when stops is not null."),ue=null),this._set("maxDataValue",ue)}set maxSize(ue){ue&&this.stops&&(ee.warn("cannot set maxSize when stops is not null."),ue=null),this._set("maxSize",ue)}castMaxSize(ue){return ge(ue)}readMaxSize(ue,me,ve){return se(ue,0,ve)}set minDataValue(ue){ue&&this.stops&&(ee.warn("cannot set minDataValue when stops is not null."),ue=null),this._set("minDataValue",ue)}set minSize(ue){ue&&this.stops&&(ee.warn("cannot set minSize when stops is not null."),ue=null),this._set("minSize",ue)}castMinSize(ue){return ge(ue)}readMinSize(ue,me,ve){return se(ue,0,ve)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(ue){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?ue&&Array.isArray(ue)&&(ue=ue.filter(me=>!!me)).sort((me,ve)=>me.value-ve.value):ue&&(ee.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),ue=null),this._set("stops",ue)}get transformationType(){return(0,J.QW)(this,this.inputValueType)}readValueExpression(ue,me){return ue||me.expression&&"$view.scale"}writeValueExpressionWebScene(ue,me,ve,fe){if("$view.scale"===ue){if(fe&&fe.messages){const Me=this.index;fe.messages.push(new T.Z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof Me?Me:`visualVariables[${Me}]`)+".valueExpression",context:fe}))}}else me[ve]=ue}readValueUnit(ue){return ue?le.read(ue):null}clone(){return new de({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,J.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,J.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(ue=>ue.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if("clamped-linear"===this.transformationType){const{minSize:ue,maxSize:me}=this;return this.minSize=me,this.maxSize=ue,this}if("stops"===this.transformationType){const ue=this.stops,me=ue.map(fe=>fe.size).reverse(),ve=ue.length;for(let fe=0;fe<ve;fe++)ue[fe].size=me[fe];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(ue=>ue.value||0)}};(0,x._)([(0,oe.Cb)({readOnly:!0})],Q.prototype,"cache",null),(0,x._)([(0,oe.Cb)({type:ye.apiValues,json:{type:ye.jsonValues,origins:{"web-map":{read:!1}},read:ye.read,write:ye.write}})],Q.prototype,"axis",void 0),(0,x._)([(0,oe.Cb)({type:String,value:null,json:{read:!1}})],Q.prototype,"expression",null),(0,x._)([(0,oe.Cb)()],Q.prototype,"index",null),(0,x._)([(0,oe.Cb)({type:String,readOnly:!0})],Q.prototype,"inputValueType",null),(0,x._)([(0,oe.Cb)({type:$,json:{write:!0}})],Q.prototype,"legendOptions",void 0),(0,x._)([(0,oe.Cb)({type:Number,value:null,json:{write:!0}})],Q.prototype,"maxDataValue",null),(0,x._)([(0,oe.Cb)({type:Number,value:null,json:{write:!0}})],Q.prototype,"maxSize",null),(0,x._)([(0,L.p)("maxSize")],Q.prototype,"castMaxSize",null),(0,x._)([(0,B.r)("maxSize")],Q.prototype,"readMaxSize",null),(0,x._)([(0,oe.Cb)({type:Number,value:null,json:{write:!0}})],Q.prototype,"minDataValue",null),(0,x._)([(0,oe.Cb)({type:Number,value:null,json:{write:!0}})],Q.prototype,"minSize",null),(0,x._)([(0,L.p)("minSize")],Q.prototype,"castMinSize",null),(0,x._)([(0,B.r)("minSize")],Q.prototype,"readMinSize",null),(0,x._)([(0,oe.Cb)({type:String,json:{write:!0}})],Q.prototype,"normalizationField",void 0),(0,x._)([(0,oe.Cb)({readOnly:!0})],Q.prototype,"arcadeRequired",null),(0,x._)([(0,oe.Cb)({type:String})],Q.prototype,"scaleBy",void 0),(0,x._)([(0,oe.Cb)({type:[ae.Z],value:null,json:{write:!0}})],Q.prototype,"stops",null),(0,x._)([(0,oe.Cb)({type:["outline"],json:{write:!0}})],Q.prototype,"target",void 0),(0,x._)([(0,oe.Cb)({type:String,readOnly:!0})],Q.prototype,"transformationType",null),(0,x._)([(0,oe.Cb)({type:["size"],json:{type:["sizeInfo"]}})],Q.prototype,"type",void 0),(0,x._)([(0,oe.Cb)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Q.prototype,"useSymbolValue",void 0),(0,x._)([(0,oe.Cb)({type:String,json:{write:!0}})],Q.prototype,"valueExpression",void 0),(0,x._)([(0,B.r)("valueExpression",["valueExpression","expression"])],Q.prototype,"readValueExpression",null),(0,x._)([(0,Z.c)("web-scene","valueExpression")],Q.prototype,"writeValueExpressionWebScene",null),(0,x._)([(0,oe.Cb)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Q.prototype,"valueRepresentation",void 0),(0,x._)([(0,oe.Cb)({type:le.apiValues,json:{write:le.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],Q.prototype,"valueUnit",void 0),(0,x._)([(0,B.r)("valueUnit")],Q.prototype,"readValueUnit",null),Q=de=(0,x._)([(0,X.j)("esri.renderers.visualVariables.SizeVariable")],Q);const pe=Q},17977:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var x=C(17626),T=C(2076),ne=C(86162),ie=C(63290),te=C(77712),j=(C(85931),C(8314),C(66656)),L=C(76898),B=C(90912),X=C(11333);const Z=ie.Z.getLogger("esri.renderers.visualVariables.VisualVariable"),z=new T.Xn({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ae=class extends ne.wq{constructor(V){super(V),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(V){return null==V?V:"function"==typeof V?(Z.error(".field: field must be a string value"),null):(0,B.Zs)(V)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,x._)([(0,te.Cb)()],ae.prototype,"index",void 0),(0,x._)([(0,te.Cb)({type:z.apiValues,readOnly:!0,json:{read:z.read,write:z.write}})],ae.prototype,"type",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],ae.prototype,"field",void 0),(0,x._)([(0,j.p)("field")],ae.prototype,"castField",null),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],ae.prototype,"valueExpression",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],ae.prototype,"valueExpressionTitle",void 0),(0,x._)([(0,te.Cb)({readOnly:!0})],ae.prototype,"arcadeRequired",null),(0,x._)([(0,te.Cb)({type:X.Z,json:{write:!0}})],ae.prototype,"legendOptions",void 0),ae=(0,x._)([(0,L.j)("esri.renderers.visualVariables.VisualVariable")],ae);const K=ae},8029:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Z});var B,x=C(17626),T=C(91558),ne=C(86162),ie=C(77712),Y=(C(85931),C(8314),C(90912)),j=C(76898),L=C(99433);let X=B=class extends ne.wq{constructor(z){super(z),this.color=null,this.label=null,this.value=null}writeValue(z,ae,K){ae[K]=null==z?0:z}clone(){return new B({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,x._)([(0,ie.Cb)({type:T.Z,json:{type:[Y.z8],write:!0}})],X.prototype,"color",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],X.prototype,"label",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],X.prototype,"value",void 0),(0,x._)([(0,L.c)("value")],X.prototype,"writeValue",null),X=B=(0,x._)([(0,j.j)("esri.renderers.visualVariables.support.ColorStop")],X);const Z=X},64902:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(86162),ne=C(23841),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898));let B=L=class extends T.wq{constructor(Z){super(Z),this.label=null,this.size=null,this.value=null}clone(){return new L({label:this.label,size:this.size,value:this.value})}};(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],B.prototype,"label",void 0),(0,x._)([(0,ie.Cb)({type:Number,cast:ne.t_,json:{write:!0}})],B.prototype,"size",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0}})],B.prototype,"value",void 0),B=L=(0,x._)([(0,j.j)("esri.renderers.visualVariables.support.SizeStop")],B);const X=B},11333:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(10914);let L=j=class extends Y.Z{constructor(){super(...arguments),this.showLegend=null}clone(){return new j({title:this.title,showLegend:this.showLegend})}};(0,x._)([(0,T.Cb)({type:Boolean,json:{write:!0}})],L.prototype,"showLegend",void 0),L=j=(0,x._)([(0,oe.j)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],L);const B=L},86971:(ut,Oe,C)=>{"use strict";function x(te){return te&&"esri.renderers.visualVariables.SizeVariable"===te.declaredClass}function T(te){return null!=te&&!isNaN(te)&&isFinite(te)}function ne(te){return te.valueExpression?"expression":te.field&&"string"==typeof te.field?"field":"unknown"}function ie(te,oe){return"unknown"===(oe||ne(te))?"constant":te.stops?"stops":null!=te.minSize&&null!=te.maxSize&&null!=te.minDataValue&&null!=te.maxDataValue?"clamped-linear":"unknown"===(te.valueUnit||"unknown")?null!=te.minSize&&null!=te.minDataValue?te.minSize&&te.minDataValue?"proportional":"additive":"identity":"real-world-size"}C.d(Oe,{PS:()=>ne,QW:()=>ie,iY:()=>x,qh:()=>T})},81808:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{getAllSizes:()=>me,getColor:()=>Z,getOpacity:()=>z,getRotationAngle:()=>ae,getSize:()=>P,getSizeForValue:()=>se,getSizeFromNumberOrVariable:()=>F,getSizeRangeAtScale:()=>Q,getVisualVariableValues:()=>pe,viewScaleRE:()=>X});var x=C(91558),T=C(88879),ne=C(94573),ie=C(63290),te=C(62208),oe=C(21254),Y=C(86971);const j=ie.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),L=new T.Z,B=Math.PI,X=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function Z(ve,fe,Me){const ce="visualVariables"in ve&&ve.visualVariables?ve.visualVariables.filter(ct=>"color"===ct.type)[0]:ve;if(!ce)return;if("esri.renderers.visualVariables.ColorVariable"!==ce.declaredClass)return void j.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const he="number"==typeof fe,De=he?null:fe,xe=De&&De.attributes;let Pe=he?fe:null;const je=ce.field,{ipData:rt,hasExpression:Le}=ce.cache;let Ce=ce.cache.compiledFunc;if(!je&&!Le){const ct=ce.stops;return ct&&ct[0]&&ct[0].color}if("number"!=typeof Pe)if(Le){if(!(0,te.pC)(Me)||!(0,te.pC)(Me.arcade))return void j.error("Use of arcade expressions requires an arcade context");const Ae=Me.arcade.arcadeUtils,Qe=Ae.getViewInfo({viewingMode:Me.viewingMode,scale:Me.scale,spatialReference:Me.spatialReference}),Je=Ae.createExecContext(De,Qe);if(!Ce){const re=Ae.createSyntaxTree(ce.valueExpression);Ce=Ae.createFunction(re),ce.cache.compiledFunc=Ce}Pe=Ae.executeFunction(Ce,Je)}else xe&&(Pe=xe[je]);const Te=ce.normalizationField,Ye=xe?parseFloat(xe[Te]):void 0;if(null!=Pe&&(!Te||he||!isNaN(Ye)&&0!==Ye)){isNaN(Ye)||he||(Pe/=Ye);const ct=ue(Pe,rt);if(ct){const Ae=ct[0],Qe=ct[1],Je=Ae===Qe?ce.stops[Ae].color:x.Z.blendColors(ce.stops[Ae].color,ce.stops[Qe].color,ct[2],(0,te.pC)(Me)?Me.color:void 0);return new x.Z(Je)}}}function z(ve,fe,Me){const ce="visualVariables"in ve&&ve.visualVariables?ve.visualVariables.filter(ct=>"opacity"===ct.type)[0]:ve;if(!ce)return;if("esri.renderers.visualVariables.OpacityVariable"!==ce.declaredClass)return void j.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const he="number"==typeof fe,De=he?null:fe,xe=De&&De.attributes;let Pe=he?fe:null;const je=ce.field,{ipData:rt,hasExpression:Le}=ce.cache;let Ce=ce.cache.compiledFunc;if(!je&&!Le){const ct=ce.stops;return ct&&ct[0]&&ct[0].opacity}if("number"!=typeof Pe)if(Le){if((0,te.Wi)(Me)||(0,te.Wi)(Me.arcade))return void j.error("Use of arcade expressions requires an arcade context");const Ae=Me.arcade.arcadeUtils,Qe=Ae.getViewInfo({viewingMode:Me.viewingMode,scale:Me.scale,spatialReference:Me.spatialReference}),Je=Ae.createExecContext(De,Qe);if(!Ce){const re=Ae.createSyntaxTree(ce.valueExpression);Ce=Ae.createFunction(re),ce.cache.compiledFunc=Ce}Pe=Ae.executeFunction(Ce,Je)}else xe&&(Pe=xe[je]);const Te=ce.normalizationField,Ye=xe?parseFloat(xe[Te]):void 0;if(null!=Pe&&(!Te||he||!isNaN(Ye)&&0!==Ye)){isNaN(Ye)||he||(Pe/=Ye);const ct=ue(Pe,rt);if(ct){const Ae=ct[0],Qe=ct[1];if(Ae===Qe)return ce.stops[Ae].opacity;{const Je=ce.stops[Ae].opacity;return Je+(ce.stops[Qe].opacity-Je)*ct[2]}}}}function ae(ve,fe,Me){const ce="visualVariables"in ve&&ve.visualVariables?ve.visualVariables.filter(Ye=>"rotation"===Ye.type)[0]:ve;if(!ce)return;if("esri.renderers.visualVariables.RotationVariable"!==ce.declaredClass)return void j.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const he=ce.axis||"heading",De="heading"===he&&"arithmetic"===ce.rotationType?90:0,xe="heading"===he&&"arithmetic"===ce.rotationType?-1:1,Pe="number"==typeof fe?null:fe,je=Pe&&Pe.attributes,rt=ce.field,{hasExpression:Le}=ce.cache;let Ce=ce.cache.compiledFunc,Te=0;if(!rt&&!Le)return Te;if(Le){if((0,te.Wi)(Me)||(0,te.Wi)(Me.arcade))return void j.error("Use of arcade expressions requires an arcade context");const ct=Me.arcade.arcadeUtils,Ae=ct.getViewInfo({viewingMode:Me.viewingMode,scale:Me.scale,spatialReference:Me.spatialReference}),Qe=ct.createExecContext(Pe,Ae);if(!Ce){const Je=ct.createSyntaxTree(ce.valueExpression);Ce=ct.createFunction(Je),ce.cache.compiledFunc=Ce}Te=ct.executeFunction(Ce,Qe)}else je&&(Te=je[rt]||0);return Te="number"!=typeof Te||isNaN(Te)?null:De+xe*Te,Te}function P(ve,fe,Me){const ce="visualVariables"in ve&&ve.visualVariables?ve.visualVariables.filter(De=>"size"===De.type)[0]:ve;if(!ce)return;if("esri.renderers.visualVariables.SizeVariable"!==ce.declaredClass)return void j.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const he=se(function K(ve,fe,Me){const ce="number"==typeof fe,he=ce?null:fe,De=he&&he.attributes;let xe=ce?fe:null;const{isScaleDriven:Pe}=ve.cache;let je=ve.cache.compiledFunc;if(Pe){const Le=(0,te.pC)(Me)?Me.scale:void 0,Ce=(0,te.pC)(Me)?Me.view:void 0;xe=null==Le||"3d"===Ce?function V(ve){let fe=null,Me=null;const ce=ve.stops;return ce?(fe=ce[0].value,Me=ce[ce.length-1].value):(fe=ve.minDataValue||0,Me=ve.maxDataValue||0),(fe+Me)/2}(ve):Le}else if(!ce)switch(ve.inputValueType){case"expression":{if((0,te.Wi)(Me)||(0,te.Wi)(Me.arcade))return void j.error("Use of arcade expressions requires an arcade context");const Ce=Me.arcade.arcadeUtils,Te=Ce.getViewInfo({viewingMode:Me.viewingMode,scale:Me.scale,spatialReference:Me.spatialReference}),Ye=Ce.createExecContext(he,Te);if(!je){const ct=Ce.createSyntaxTree(ve.valueExpression);je=Ce.createFunction(ct),ve.cache.compiledFunc=je}xe=Ce.executeFunction(je,Ye);break}case"field":De&&(xe=De[ve.field]);break;case"unknown":xe=null}if(!(0,Y.qh)(xe))return null;if(ce||!ve.normalizationField)return xe;const rt=De?parseFloat(De[ve.normalizationField]):null;return(0,Y.qh)(rt)&&0!==rt?xe/rt:null}(ce,fe,Me),ce,fe,Me,ce.cache.ipData);return null==he||isNaN(he)?0:he}function F(ve,fe,Me){return null==ve?null:(0,Y.iY)(ve)?P(ve,fe,Me):(0,Y.qh)(ve)?ve:null}function $(ve,fe,Me){return(0,Y.qh)(Me)&&ve>Me?Me:(0,Y.qh)(fe)&&ve<fe?fe:ve}function se(ve,fe,Me,ce,he){switch(fe.transformationType){case"additive":return function J(ve,fe,Me,ce){return ve+(F(fe.minSize,Me,ce)||fe.minDataValue)}(ve,fe,Me,ce);case"constant":return function H(ve,fe,Me){const ce=ve.stops;let he=ce&&ce.length&&ce[0].size;return null==he&&(he=ve.minSize),F(he,fe,Me)}(fe,Me,ce);case"clamped-linear":return function de(ve,fe,Me,ce){const he=(ve-fe.minDataValue)/(fe.maxDataValue-fe.minDataValue),De=F(fe.minSize,Me,ce),xe=F(fe.maxSize,Me,ce),Pe=(0,te.pC)(ce)?ce.shape:void 0;if(ve<=fe.minDataValue)return De;if(ve>=fe.maxDataValue)return xe;if("area"===fe.scaleBy&&Pe){const je="circle"===Pe,rt=je?B*(De/2)**2:De*De,Le=rt+he*((je?B*(xe/2)**2:xe*xe)-rt);return je?2*Math.sqrt(Le/B):Math.sqrt(Le)}return De+he*(xe-De)}(ve,fe,Me,ce);case"proportional":return function ee(ve,fe,Me,ce){const he=(0,te.pC)(ce)?ce.shape:void 0,De=ve/fe.minDataValue,xe=F(fe.minSize,Me,ce),Pe=F(fe.maxSize,Me,ce);let je=null;return je="circle"===he?2*Math.sqrt(De*(xe/2)**2):"square"===he||"diamond"===he||"image"===he?Math.sqrt(De*xe**2):De*xe,$(je,xe,Pe)}(ve,fe,Me,ce);case"stops":return function ye(ve,fe,Me,ce,he){const[De,xe,Pe]=ue(ve,he);if(De===xe)return F(fe.stops[De].size,Me,ce);{const je=F(fe.stops[De].size,Me,ce);return je+(F(fe.stops[xe].size,Me,ce)-je)*Pe}}(ve,fe,Me,ce,he);case"real-world-size":return function le(ve,fe,Me,ce){const he=((0,te.pC)(ce)&&ce.resolution?ce.resolution:1)*oe.a[fe.valueUnit],De=F(fe.minSize,Me,ce),xe=F(fe.maxSize,Me,ce),{valueRepresentation:Pe}=fe;let je=null;return je="area"===Pe?2*Math.sqrt(ve/B)/he:"radius"===Pe||"distance"===Pe?2*ve/he:ve/he,$(je,De,xe)}(ve,fe,Me,ce);case"identity":return ve;case"unknown":return null}}function Q(ve,fe,Me){const{isScaleDriven:ce}=ve.cache;if(!(ce&&"3d"===Me||fe))return null;const he={scale:fe,view:Me};let De=F(ve.minSize,L,he),xe=F(ve.maxSize,L,he);if(null!=De||null!=xe){if(De>xe){const Pe=xe;xe=De,De=Pe}return{minSize:De,maxSize:xe}}}function pe(ve,fe,Me){if(!ve.visualVariables)return;const ce=[],he=[],De=[],xe=[],Pe=[];for(const je of ve.visualVariables)switch(je.type){case"color":he.push(je);break;case"opacity":De.push(je);break;case"rotation":Pe.push(je);break;case"size":xe.push(je)}return he.forEach(je=>{const rt=Z(je,fe,Me);ce.push({variable:je,value:rt})}),De.forEach(je=>{const rt=z(je,fe,Me);ce.push({variable:je,value:rt})}),Pe.forEach(je=>{const rt=ae(je,fe,Me);ce.push({variable:je,value:rt})}),xe.forEach(je=>{const rt=P(je,fe,Me);ce.push({variable:je,value:rt})}),ce.filter(je=>null!=je.value)}function ue(ve,fe){if(!fe)return;let Me=0,ce=fe.length-1;return fe.some((he,De)=>ve<he?(ce=De,!0):(Me=De,!1)),[Me,ce,(ve-fe[Me])/(fe[ce]-fe[Me])]}function me(ve,fe,Me){const ce=["proportional","proportional","proportional"];for(const he of ve){const De=he.useSymbolValue?"symbol-value":P(he,fe,Me);switch(he.axis){case"width":ce[0]=De;break;case"depth":ce[1]=De;break;case"height":ce[2]=De;break;case"width-and-depth":ce[0]=De,ce[1]=De;break;case"all":case void 0:case null:ce[0]=De,ce[1]=De,ce[2]=De;break;default:(0,ne.Bg)(he.axis)}}return ce}},84792:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{default:()=>Z});var x=C(15861),T=C(59318),ne=C(24263),ie=C(26584),te=C(8314),oe=C(58817),Y=C(62208),j=C(10699),L=C(21726),B=C(12680),X=C(33899);function Z(Ce,Te){return z.apply(this,arguments)}function z(){return(z=(0,x.Z)(function*(Ce,Te){var Ye;const ct=(0,L.HK)(Ce),Ae=(0,L.jc)(Ce);Ae||ct||(Ce=(0,L.Fv)(Ce));const Qe={url:Ce,requestOptions:Ot({},(0,Y.Wg)(Te))};let Je=(0,L.oh)(Ce);if(Je){const tt=yield Me(Je,Qe);if(null!=tt)return{data:tt,getHeader:J,requestOptions:Qe.requestOptions,url:Qe.url};Je.after||Je.error||(Je=null)}if(Ce=Qe.url,"image"===(Te=Qe.requestOptions).responseType){if((0,te.Z)("host-webworker")||(0,te.Z)("host-node"))throw ye("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),Qe)}else if(ct)throw ye("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+Te.responseType),Qe);if("head"===Te.method){if(Te.body)throw ye("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),Qe);if(ct||Ae)throw ye("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),Qe)}if(yield le(),ae)return ae.execute(Ce,Te);const re=new AbortController;(0,j.fu)(Te,()=>re.abort());const Ee={controller:re,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:Je,params:Qe,redoRequest:!1,useIdentity:K.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},$e=yield xe(Ee);return null==(Ye=Je)||null==Ye.after||Ye.after($e),$e})).apply(this,arguments)}let ae;const K=T.Z.request,V="FormData"in globalThis,P=[499,498,403,401],F=["COM_0056","COM_0057","SB_0008"],$=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],J=()=>null,H=Symbol();function de(Ce){const Te=(0,L.P$)(Ce);Te&&!Z._corsServers.includes(Te)&&Z._corsServers.push(Te)}function ee(Ce){const Te=(0,L.P$)(Ce);return!Te||Te.endsWith(".arcgis.com")||Z._corsServers.includes(Te)||(0,L.kl)(Te)}function ye(Ce,Te,Ye,ct){let Ae="Error";const Qe={url:Ye.url,requestOptions:Ye.requestOptions,getHeader:J,ssl:!1};if(Te instanceof ie.Z)return Te.details?(Te.details=(0,oe.d9)(Te.details),Te.details.url=Ye.url,Te.details.requestOptions=Ye.requestOptions):Te.details=Qe,Te;if(Te){const Je=ct&&($e=>ct.headers.get($e)),re=ct&&ct.status,Ee=Te.message;Ee&&(Ae=Ee),Je&&(Qe.getHeader=Je),Qe.httpStatus=(null!=Te.httpCode?Te.httpCode:Te.code)||re||0,Qe.subCode=Te.subcode,Qe.messageCode=Te.messageCode,Qe.messages="string"==typeof Te.details?[Te.details]:Te.details,Qe.raw=H in Te?Te[H]:Te}return(0,j.D_)(Te)?(0,j.zE)():new ie.Z(Ce,Ae,Qe)}function le(){return ge.apply(this,arguments)}function ge(){return(ge=(0,x.Z)(function*(){(0,te.Z)("host-webworker")?ae||(ae=yield C.e(3358).then(C.bind(C,23358))):Z._abortableFetch||(Z._abortableFetch=globalThis.fetch.bind(globalThis))})).apply(this,arguments)}function se(){return Q.apply(this,arguments)}function Q(){return(Q=(0,x.Z)(function*(){ne.id||(yield C.e(9058).then(C.bind(C,59058)))})).apply(this,arguments)}function pe(Ce){return ue.apply(this,arguments)}function ue(){return(ue=(0,x.Z)(function*(Ce){const Te=Ce.params.url,Ye=Ce.params.requestOptions,ct=Ce.controller.signal,Ae=Ye.body;let Qe=null,Je=null,re=null;if(V&&"HTMLFormElement"in globalThis&&(Ae instanceof FormData?Qe=Ae:Ae instanceof HTMLFormElement&&(Je=Ae,Qe=new FormData(Je))),"string"==typeof Ae&&(re=Ae),Ce.fetchOptions={cache:Ye.cacheBust&&!Z._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:Ye.headers||{},method:"head"===Ye.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:ct},(Qe||re)&&(Ce.fetchOptions.body=Qe||re),"anonymous"===Ye.authMode&&(Ce.useIdentity=!1),Ce.hasToken=!!(/token=/i.test(Te)||Ye.query&&Ye.query.token||Qe&&Qe.get&&Qe.get("token")||Je&&Je.elements.token),!Ce.hasToken&&T.Z.apiKey&&(0,B.r)(Te)&&(Ye.query||(Ye.query={}),Ye.query.token=T.Z.apiKey,Ce.hasToken=!0),Ce.useIdentity&&!Ce.hasToken&&!Ce.credentialToken&&!me(Te)&&!(0,j.Hc)(ct)){let Ee;"immediate"===Ye.authMode?(yield se(),Ee=yield ne.id.getCredential(Te,{signal:ct}),Ce.credential=Ee):"no-prompt"===Ye.authMode?(yield se(),Ee=yield ne.id.getCredential(Te,{prompt:!1,signal:ct}).catch(()=>{}),Ce.credential=Ee):ne.id&&(Ee=ne.id.findCredential(Te)),Ee&&(Ce.credentialToken=Ee.token,Ce.useSSL=!!Ee.ssl)}})).apply(this,arguments)}function me(Ce){return $.some(Te=>Te.test(Ce))}function ve(Ce){return fe.apply(this,arguments)}function fe(){return(fe=(0,x.Z)(function*(Ce){let Te=Ce.params.url;const Ye=Ce.params.requestOptions,ct=Ce.fetchOptions,Ae=(0,L.jc)(Te)||(0,L.HK)(Te),Qe=Ye.responseType||"json",Je=Ae?0:null!=Ye.timeout?Ye.timeout:K.timeout;let re=!1;if(!Ae){Ce.useSSL&&(Te=(0,L.hO)(Te)),Ye.cacheBust&&"default"===ct.cache&&(Te=(0,L.ZN)(Te,"request.preventCache",Date.now()));let mt=Ot({},Ye.query);Ce.credentialToken&&(mt.token=Ce.credentialToken);let bt=(0,L.B7)(mt);(0,te.Z)("esri-url-encodes-apostrophe")&&(bt=bt.replace(/'/g,"%27"));const yt=Te.length+1+bt.length;let at;re="delete"===Ye.method||"post"===Ye.method||"put"===Ye.method||!!Ye.body||yt>K.maxUrlLength;const Mt=Ye.useProxy||!!(0,L.ed)(Te);if(Mt){const Pt=(0,L.b7)(Te);at=Pt.path,!re&&at.length+1+yt>K.maxUrlLength&&(re=!0),Pt.query&&(mt=Ot(Ot({},Pt.query),mt))}if("HEAD"===ct.method&&(re||Mt)){if(re)throw ye("request:invalid-parameters",yt>K.maxUrlLength?new Error("URL exceeds maximum length"):new Error("cannot use POST request when method is 'head'"),Ce.params);if(Mt)throw ye("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),Ce.params)}if(re?(ct.method="delete"===Ye.method?"DELETE":"put"===Ye.method?"PUT":"POST",Ye.body?Te=(0,L.fl)(Te,mt):(ct.body=(0,L.B7)(mt),ct.headers["Content-Type"]="application/x-www-form-urlencoded")):Te=(0,L.fl)(Te,mt),Mt&&(Ce.useProxy=!0,Te=`${at}?${Te}`),mt.token&&V&&ct.body instanceof FormData){const Pt=ct.body;Pt.set?Pt.set("token",mt.token):Pt.append("token",mt.token)}if(Ye.hasOwnProperty("withCredentials"))Ce.withCredentials=Ye.withCredentials;else if(!(0,L.D6)(Te,L.Gd))if((0,L.kl)(Te))Ce.withCredentials=!0;else if(ne.id){const Pt=ne.id.findServerInfo(Te);Pt&&Pt.webTierAuth&&(Ce.withCredentials=!0)}Ce.withCredentials&&(ct.credentials="include")}let Ee,$e,tt=0,pt=!1;Je>0&&(tt=setTimeout(()=>{pt=!0,Ce.controller.abort()},Je));try{if("native-request-init"===Ye.responseType)$e=ct,$e.url=Te;else if("image"!==Ye.responseType||"default"!==ct.cache||"GET"!==ct.method||re||he(Ye.headers)||!Ae&&!Ce.useProxy&&K.proxyUrl&&!ee(Te)){if(Ee=yield Z._abortableFetch(Te,ct),Ce.useProxy||de(Te),"native"===Ye.responseType)$e=Ee;else if("HEAD"!==ct.method)if(Ee.ok){switch(Qe){case"array-buffer":$e=yield Ee.arrayBuffer();break;case"blob":case"image":$e=yield Ee.blob();break;default:$e=yield Ee.text()}if(tt&&(clearTimeout(tt),tt=0),"json"===Qe||"xml"===Qe||"document"===Qe)if($e)switch(Qe){case"json":$e=JSON.parse($e);break;case"xml":$e=De($e,"application/xml");break;case"document":$e=De($e,"text/html")}else $e=null;if($e){if("array-buffer"===Qe||"blob"===Qe){const mt=Ee.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(mt)&&$e["blob"===Qe?"size":"byteLength"]<=750)try{const bt=yield new Response($e).json();bt.error&&($e=bt)}catch(bt){}}"image"===Qe&&$e instanceof Blob&&($e=yield Le(URL.createObjectURL($e),Ce,!0))}}else $e=yield Ee.text()}else $e=yield Le(Te,Ce)}catch(mt){if("AbortError"===mt.name)throw pt?new Error("Timeout exceeded"):(0,j.zE)("Request canceled");if(!(!Ee&&mt instanceof TypeError&&K.proxyUrl)||Ye.body||"delete"===Ye.method||"head"===Ye.method||"post"===Ye.method||"put"===Ye.method||Ce.useProxy||ee(Te))throw mt;Ce.redoRequest=!0,(0,L.tD)({proxyUrl:K.proxyUrl,urlPrefix:(0,L.P$)(Te)})}finally{tt&&clearTimeout(tt)}return[Ee,$e]})).apply(this,arguments)}function Me(Ce,Te){return ce.apply(this,arguments)}function ce(){return(ce=(0,x.Z)(function*(Ce,Te){if(null!=Ce.responseData)return Ce.responseData;if(Ce.headers&&(Te.requestOptions.headers=Ot(Ot({},Te.requestOptions.headers),Ce.headers)),Ce.query&&(Te.requestOptions.query=Ot(Ot({},Te.requestOptions.query),Ce.query)),Ce.before){let Ye,ct;try{ct=yield Ce.before(Te)}catch(Ae){Ye=ye("request:interceptor",Ae,Te)}if((ct instanceof Error||ct instanceof ie.Z)&&(Ye=ye("request:interceptor",ct,Te)),Ye)throw Ce.error&&Ce.error(Ye),Ye;return ct}})).apply(this,arguments)}function he(Ce){if(Ce)for(const Te of Object.getOwnPropertyNames(Ce))if(Ce[Te])return!0;return!1}function De(Ce,Te){let Ye;try{Ye=(new DOMParser).parseFromString(Ce,Te)}catch(ct){}if(!Ye||Ye.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return Ye}function xe(Ce){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,x.Z)(function*(Ce){var Te,Ye;let ct,Ae;yield pe(Ce);try{do{[ct,Ae]=yield ve(Ce)}while(!(yield je(Ce,ct,Ae)))}catch(re){const Ee=ye("request:server",re,Ce.params,ct);throw Ee.details.ssl=Ce.useSSL,Ce.interceptor&&Ce.interceptor.error&&Ce.interceptor.error(Ee),Ee}const Qe=Ce.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(Qe)&&!Ce.hasToken&&!Ce.credentialToken&&null!=(Te=Ae)&&null!=(Ye=Te.user)&&Ye.username&&!(0,L.kl)(Qe)){const re=(0,L.P$)(Qe,!0);re&&K.trustedServers.push(re)}const Je=Ce.credential;if(Je&&ne.id){const re=ne.id.findServerInfo(Je.server);let Ee=re&&re.owningSystemUrl;if(Ee){Ee=Ee.replace(/\/?$/,"/sharing");const $e=ne.id.findCredential(Ee,Je.userId);$e&&-1===ne.id._getIdenticalSvcIdx(Ee,$e)&&$e.resources.unshift(Ee)}}return{data:Ae,getHeader:ct?re=>ct.headers.get(re):J,requestOptions:Ce.params.requestOptions,ssl:Ce.useSSL,url:Ce.params.url}})).apply(this,arguments)}function je(Ce,Te,Ye){return rt.apply(this,arguments)}function rt(){return(rt=(0,x.Z)(function*(Ce,Te,Ye){if(Ce.redoRequest)return Ce.redoRequest=!1,!1;const ct=Ce.params.requestOptions;if(!Te||"native"===ct.responseType||"native-request-init"===ct.responseType)return!0;let Ae,Qe,Je,re;if(!Te.ok)throw Ae=new Error(`Unable to load ${Te.url} status: ${Te.status}`),Ae[H]=Ye,Ae;null!=Ye&&Ye.error&&(Ae=Ye.error),Ae&&(Qe=Number(Ae.code),Je=Ae.hasOwnProperty("subcode")?Number(Ae.subcode):null,re=Ae.messageCode,re=re&&re.toUpperCase());const Ee=ct.authMode;if(403===Qe&&(4===Je||Ae.message&&Ae.message.toLowerCase().indexOf("ssl")>-1&&-1===Ae.message.toLowerCase().indexOf("permission"))){if(!Ce.useSSL)return Ce.useSSL=!0,!1}else if(!Ce.hasToken&&Ce.useIdentity&&("no-prompt"!==Ee||498===Qe)&&-1!==P.indexOf(Qe)&&!me(Ce.params.url)&&(403!==Qe||-1===F.indexOf(re)&&(null==Je||2===Je&&Ce.credentialToken))){yield se();try{const $e=yield ne.id.getCredential(Ce.params.url,{error:ye("request:server",Ae,Ce.params),prompt:"no-prompt"!==Ee,signal:Ce.controller.signal,token:Ce.credentialToken});return Ce.credential=$e,Ce.credentialToken=$e.token,Ce.useSSL=Ce.useSSL||$e.ssl,!1}catch($e){if("no-prompt"===Ee)return Ce.credential=null,Ce.credentialToken=null,!1;Ae=$e}}if(Ae)throw Ae;return!0})).apply(this,arguments)}function Le(Ce,Te,Ye=!1){const ct=Te.controller.signal,Ae=new Image;return Ae.crossOrigin=Te.withCredentials?"use-credentials":"anonymous",Ae.alt="",Ae.src=Ce,(0,X.f)(Ae,Ce,Ye,ct)}Z._abortableFetch=null,Z._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"]},39636:(ut,Oe,C)=>{"use strict";C.d(Oe,{i:()=>L});var x=C(15861),T=C(84792),ne=C(90912),ie=C(91179),te=C(2618),oe=C(10920),Y=C(77294);const j=(0,ne.se)(Y.Z);function L(X,Z,z){return B.apply(this,arguments)}function B(){return(B=(0,x.Z)(function*(X,Z,z){Z=j(Z);const ae=(0,te.en)(X),K=Ot(nn(Ot({},ae.query),{f:"json"}),Z.toJSON()),V=Z.outSpatialReference,P=(0,ie.Ji)(Z.geometries[0]),F=(0,te.lA)(K,z);return(0,T.default)(ae.path+"/project",F).then(({data:{geometries:$}})=>(0,oe.o)($,P,V))})).apply(this,arguments)}},10920:(ut,Oe,C)=>{"use strict";C.d(Oe,{o:()=>ne,F:()=>T});var x=C(91179);function T(ie){return{geometryType:(0,x.Ji)(ie[0]),geometries:ie.map(te=>te.toJSON())}}function ne(ie,te,oe){const Y=(0,x.q9)(te);return ie.map(j=>{const L=Y.fromJSON(j);return L.spatialReference=oe,L})}},90463:(ut,Oe,C)=>{"use strict";C.d(Oe,{P:()=>te});var x=C(15861),T=C(2618),ne=C(20477),ie=C(84952);function te(Y,j,L){return oe.apply(this,arguments)}function oe(){return(oe=(0,x.Z)(function*(Y,j,L){const B=(0,T.en)(Y);return(0,ne.executeQueryForCount)(B,ie.Z.from(j),Ot({},L)).then(X=>X.data.count)})).apply(this,arguments)}},24865:(ut,Oe,C)=>{"use strict";C.d(Oe,{G:()=>te});var x=C(15861),T=C(2618),ne=C(20477),ie=C(84952);function te(Y,j,L){return oe.apply(this,arguments)}function oe(){return(oe=(0,x.Z)(function*(Y,j,L){const B=(0,T.en)(Y);return(0,ne.executeQueryForIds)(B,ie.Z.from(j),Ot({},L)).then(X=>X.data.objectIds)})).apply(this,arguments)}},2865:(ut,Oe,C)=>{"use strict";C.d(Oe,{e:()=>oe,F:()=>j});var x=C(15861),T=C(2618),ne=C(20477),ie=C(17253),te=C(84952);function oe(B,X,Z){return Y.apply(this,arguments)}function Y(){return(Y=(0,x.Z)(function*(B,X,Z){const z=yield j(B,X,Z);return ie.default.fromJSON(z)})).apply(this,arguments)}function j(B,X,Z){return L.apply(this,arguments)}function L(){return(L=(0,x.Z)(function*(B,X,Z){const z=(0,T.en)(B),ae=Ot({},Z),K=te.Z.from(X),{data:V}=yield(0,ne.executeQuery)(z,K,K.sourceSpatialReference,ae);return V})).apply(this,arguments)}},20514:(ut,Oe,C)=>{"use strict";C.d(Oe,{P:()=>te});var x=C(62208),T=C(16730),ne=C(37053);function ie(j,L,B){if(null==j.hasM||j.hasZ)for(const X of L)for(const Z of X)Z.length>2&&(Z[2]*=B)}function te(j,L,B){if(!j&&!L||!B)return;const X=(0,T._R)(B);oe(j,B,X),oe(L,B,X)}function oe(j,L,B){if(j)for(const X of j)Y(X.geometry,L,B)}function Y(j,L,B){if((0,x.Wi)(j)||!j.spatialReference||(0,ne.fS)(j.spatialReference,L))return;const X=(0,T._R)(j.spatialReference)/B;if(1!==X)if("x"in j)null!=j.z&&(j.z*=X);else if("rings"in j)ie(j,j.rings,X);else if("paths"in j)ie(j,j.paths,X);else if("points"in j&&(null==j.hasM||j.hasZ))for(const Z of j.points)Z.length>2&&(Z[2]*=X)}},71260:(ut,Oe,C)=>{"use strict";C.d(Oe,{K9:()=>se,O7:()=>L,G$:()=>de});var x=C(26584),T=C(62208),ne=C(24192),ie=C(88071),te=C(98558);const oe=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],Y=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],j=["upperLeft","lowerLeft"];function L(Q){return Q>=oe.length?null:oe[Q]}function B(Q){return Q>=Y.length?null:Y[Q]}function X(Q){return Q>=j.length?null:j[Q]}function Z(Q,pe){return pe>=Q.geometryTypes.length?null:Q.geometryTypes[pe]}function z(Q,pe,ue){const ve=pe.createPointGeometry(ue);for(;Q.next();)switch(Q.tag()){case 3:{const fe=Q.getUInt32(),Me=Q.pos()+fe;let ce=0;for(;Q.pos()<Me;)pe.addCoordinatePoint(ve,Q.getSInt64(),ce++);break}default:Q.skip()}return ve}function ae(Q,pe,ue){const fe=pe.createGeometry(ue),Me=2+(ue.hasZ?1:0)+(ue.hasM?1:0);for(;Q.next();)switch(Q.tag()){case 2:{const ce=Q.getUInt32(),he=Q.pos()+ce;let De=0;for(;Q.pos()<he;)pe.addLength(fe,Q.getUInt32(),De++);break}case 3:{const ce=Q.getUInt32(),he=Q.pos()+ce;let De=0;for(pe.allocateCoordinates(fe);Q.pos()<he;)pe.addCoordinate(fe,Q.getSInt64(),De),De++,De===Me&&(De=0);break}default:Q.skip()}return fe}function K(Q){const ve=new ie.Z;let fe="esriGeometryPoint";for(;Q.next();)switch(Q.tag()){case 2:{const Me=Q.getUInt32(),ce=Q.pos()+Me;for(;Q.pos()<ce;)ve.lengths.push(Q.getUInt32());break}case 3:{const Me=Q.getUInt32(),ce=Q.pos()+Me;for(;Q.pos()<ce;)ve.coords.push(Q.getSInt64());break}case 1:fe=te.A[Q.getEnum()];break;default:Q.skip()}return{queryGeometry:ve,queryGeometryType:fe}}function V(Q){for(;Q.next();)switch(Q.tag()){case 1:return Q.getString();case 2:return Q.getFloat();case 3:return Q.getDouble();case 4:return Q.getSInt32();case 5:return Q.getUInt32();case 6:return Q.getInt64();case 7:return Q.getUInt64();case 8:return Q.getSInt64();case 9:return Q.getBool();default:return Q.skip(),null}return null}function P(Q){const ce={type:L(0)};for(;Q.next();)switch(Q.tag()){case 1:ce.name=Q.getString();break;case 2:ce.type=L(Q.getEnum());break;case 3:ce.alias=Q.getString();break;case 4:ce.sqlType=B(Q.getEnum());break;case 5:default:Q.skip();break;case 6:ce.defaultValue=Q.getString()}return ce}function F(Q){const me={};for(;Q.next();)switch(Q.tag()){case 1:me.name=Q.getString();break;case 2:me.isSystemMaintained=Q.getBool();break;default:Q.skip()}return me}function $(Q,pe,ue,me){const ce=pe.createFeature(ue);let he=0;for(;Q.next();)switch(Q.tag()){case 1:{const De=me[he++].name;ce.attributes[De]=Q.processMessage(V);break}case 2:ce.geometry=Q.processMessageWithArgs(ae,pe,ue);break;case 4:ce.centroid=Q.processMessageWithArgs(z,pe,ue);break;default:Q.skip()}return ce}function J(Q){const fe=[1,1,1,1];for(;Q.next();)switch(Q.tag()){case 1:fe[0]=Q.getDouble();break;case 2:fe[1]=Q.getDouble();break;case 4:fe[2]=Q.getDouble();break;case 3:fe[3]=Q.getDouble();break;default:Q.skip()}return fe}function H(Q){const fe=[0,0,0,0];for(;Q.next();)switch(Q.tag()){case 1:fe[0]=Q.getDouble();break;case 2:fe[1]=Q.getDouble();break;case 4:fe[2]=Q.getDouble();break;case 3:fe[3]=Q.getDouble();break;default:Q.skip()}return fe}function de(Q){const ve={originPosition:X(0)};for(;Q.next();)switch(Q.tag()){case 1:ve.originPosition=X(Q.getEnum());break;case 2:ve.scale=Q.processMessage(J);break;case 3:ve.translate=Q.processMessage(H);break;default:Q.skip()}return ve}function ee(Q){const ve={};for(;Q.next();)switch(Q.tag()){case 1:ve.shapeAreaFieldName=Q.getString();break;case 2:ve.shapeLengthFieldName=Q.getString();break;case 3:ve.units=Q.getString();break;default:Q.skip()}return ve}function ye(Q,pe){const ce=pe.createSpatialReference();for(;Q.next();)switch(Q.tag()){case 1:ce.wkid=Q.getUInt32();break;case 5:ce.wkt=Q.getString();break;case 2:ce.latestWkid=Q.getUInt32();break;case 3:ce.vcsWkid=Q.getUInt32();break;case 4:ce.latestVcsWkid=Q.getUInt32();break;default:Q.skip()}return ce}function le(Q,pe){const Ce=pe.createFeatureResult();Ce.geometryType=Z(pe,0);let Te=!1;for(;Q.next();)switch(Q.tag()){case 1:Ce.objectIdFieldName=Q.getString();break;case 3:Ce.globalIdFieldName=Q.getString();break;case 4:Ce.geohashFieldName=Q.getString();break;case 5:Ce.geometryProperties=Q.processMessage(ee);break;case 7:Ce.geometryType=Z(pe,Q.getEnum());break;case 8:Ce.spatialReference=Q.processMessageWithArgs(ye,pe);break;case 10:Ce.hasZ=Q.getBool();break;case 11:Ce.hasM=Q.getBool();break;case 12:Ce.transform=Q.processMessage(de);break;case 9:{const Ye=Q.getBool();Ce.exceededTransferLimit=Ye;break}case 13:pe.addField(Ce,Q.processMessage(P));break;case 15:Te||(pe.prepareFeatures(Ce),Te=!0),pe.addFeature(Ce,Q.processMessageWithArgs($,pe,Ce,Ce.fields));break;case 2:Ce.uniqueIdField=Q.processMessage(F);break;default:Q.skip()}return pe.finishFeatureResult(Ce),Ce}function ge(Q,pe){const ve={};let fe=null;for(;Q.next();)switch(Q.tag()){case 4:fe=Q.processMessageWithArgs(K);break;case 1:ve.featureResult=Q.processMessageWithArgs(le,pe);break;default:Q.skip()}return(0,T.pC)(fe)&&ve.featureResult&&pe.addQueryGeometry(ve,fe),ve}function se(Q,pe){try{const me=new ne.Z(new Uint8Array(Q),new DataView(Q)),ve={};for(;me.next();)2===me.tag()?ve.queryResult=me.processMessageWithArgs(ge,pe):me.skip();return ve}catch(ue){throw new x.Z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:ue})}}},98558:(ut,Oe,C)=>{"use strict";C.d(Oe,{A:()=>oe,J:()=>Y});var x=C(16730),T=C(37053),ne=C(66385),ie=C(95786),te=C(88071);const oe=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Y{constructor(L){this.options=L,this.geometryTypes=oe,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new ie.Z}prepareFeatures(L){this._vertexDimension=2,L.hasZ&&this._vertexDimension++,L.hasM&&this._vertexDimension++}finishFeatureResult(L){if(!L||!L.features||!L.hasZ||!this.options.sourceSpatialReference||!L.spatialReference||(0,T.fS)(L.spatialReference,this.options.sourceSpatialReference)||L.spatialReference.vcsWkid)return;const B=(0,x._R)(this.options.sourceSpatialReference)/(0,x._R)(L.spatialReference);if(1!==B)for(const X of L.features){if(!(0,ne.S6)(X))continue;const Z=X.geometry.coords;for(let z=2;z<Z.length;z+=3)Z[z]*=B}}addFeature(L,B){L.features.push(B)}createFeature(){return new ne.ZP}createSpatialReference(){return{wkid:0}}createGeometry(){return new te.Z}addField(L,B){L.fields.push(B)}allocateCoordinates(L){L.coords.length=L.lengths.reduce((B,X)=>B+X,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(L,B){L.coords[this._coordinatePtr++]=B}addCoordinatePoint(L,B){L.coords.push(B)}addLength(L,B){L.lengths.push(B)}addQueryGeometry(L,B){L.queryGeometry=B.queryGeometry,L.queryGeometryType=B.queryGeometryType}createPointGeometry(){return new te.Z}}},85262:(ut,Oe,C)=>{"use strict";C.d(Oe,{C:()=>T});var x=C(71260);function T(ne,ie){const te=(0,x.K9)(ne,ie),oe=te.queryResult.featureResult,Y=te.queryResult.queryGeometry,j=te.queryResult.queryGeometryType;if(oe&&oe.features&&oe.features.length&&oe.objectIdFieldName){const L=oe.objectIdFieldName;for(const B of oe.features)B.attributes&&(B.objectId=B.attributes[L])}return oe&&(oe.queryGeometry=Y,oe.queryGeometryType=j),oe}},20477:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{executeQuery:()=>z,executeQueryForCount:()=>$,executeQueryForExtent:()=>J,executeQueryForIds:()=>F,executeQueryPBF:()=>K,executeQueryPBFBuffer:()=>P,queryToQueryStringParameters:()=>Z,runQuery:()=>H});var x=C(15861),T=C(84792),ne=C(62208),ie=C(21726),te=C(91179),oe=C(62825),Y=C(38305),j=C(85262),L=C(61515),B=C(33022);const X="Layer does not support extent calculation.";function Z(de,ee,ye=!1){const le=de.geometry,ge=de.toJSON(),se=ge,Q=de.outSpatialReference;let pe,ue;if((0,ne.pC)(le)){if(pe=le.spatialReference,ue=le.spatialReference.wkid||JSON.stringify(le.spatialReference),se.geometryType=(0,te.Ji)(le),ye&&"extent"===le.type)se.geometry=`${le.xmin},${le.ymin},${le.xmax},${le.ymax}`;else if(ye&&"point"===le.type)se.geometry=`${le.x},${le.y}`;else{const me=le.toJSON();delete me.spatialReference,se.geometry=JSON.stringify(me)}se.inSR=ue}if(pe||(pe=Q),ge.groupByFieldsForStatistics&&(se.groupByFieldsForStatistics=ge.groupByFieldsForStatistics.join(",")),ge.objectIds&&(se.objectIds=ge.objectIds.join(",")),ge.orderByFields&&(se.orderByFields=ge.orderByFields.join(",")),!ge.outFields||!ge.returnDistinctValues&&(null!=ee&&ee.returnCountOnly||null!=ee&&ee.returnExtentOnly||null!=ee&&ee.returnIdsOnly)?delete se.outFields:se.outFields=-1!==ge.outFields.indexOf("*")?"*":ge.outFields.join(","),ge.outSR?se.outSR=ge.outSR.wkid||JSON.stringify(ge.outSR):le&&(ge.returnGeometry||ge.returnCentroid)&&(se.outSR=se.inSR),ge.returnGeometry&&delete ge.returnGeometry,ge.outStatistics&&(se.outStatistics=JSON.stringify(ge.outStatistics)),ge.pixelSize&&(se.pixelSize=JSON.stringify(ge.pixelSize)),ge.quantizationParameters&&(ye&&(0,ne.pC)(pe)&&(0,ne.pC)(de.quantizationParameters)&&(0,ne.pC)(de.quantizationParameters.extent)&&pe.equals(de.quantizationParameters.extent.spatialReference)&&delete ge.quantizationParameters.extent.spatialReference,se.quantizationParameters=JSON.stringify(ge.quantizationParameters)),ge.parameterValues&&(se.parameterValues=JSON.stringify(ge.parameterValues)),ge.rangeValues&&(se.rangeValues=JSON.stringify(ge.rangeValues)),ge.dynamicDataSource&&(se.layer=JSON.stringify({source:ge.dynamicDataSource}),delete ge.dynamicDataSource),ge.timeExtent){const me=ge.timeExtent,{start:ve,end:fe}=me;null==ve&&null==fe||(se.time=ve===fe?ve:`${null==ve?"null":ve},${null==fe?"null":fe}`),delete ge.timeExtent}return se}function z(de,ee,ye,le){return ae.apply(this,arguments)}function ae(){return(ae=(0,x.Z)(function*(de,ee,ye,le){const ge=(0,ne.pC)(ee.timeExtent)&&ee.timeExtent.isEmpty?{data:{features:[]}}:yield H(de,ee,"json",le);return(0,L.p)(ee,ye,ge.data),ge})).apply(this,arguments)}function K(de,ee,ye,le){return V.apply(this,arguments)}function V(){return(V=(0,x.Z)(function*(de,ee,ye,le){if((0,ne.pC)(ee.timeExtent)&&ee.timeExtent.isEmpty)return Promise.resolve({data:ye.createFeatureResult()});const ge=yield P(de,ee,le),se=ge;return se.data=(0,j.C)(ge.data,ye),se})).apply(this,arguments)}function P(de,ee,ye){return H(de,ee,"pbf",ye)}function F(de,ee,ye){return(0,ne.pC)(ee.timeExtent)&&ee.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):H(de,ee,"json",ye,{returnIdsOnly:!0})}function $(de,ee,ye){return(0,ne.pC)(ee.timeExtent)&&ee.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):H(de,ee,"json",ye,{returnIdsOnly:!0,returnCountOnly:!0})}function J(de,ee,ye){return(0,ne.pC)(ee.timeExtent)&&ee.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):H(de,ee,"json",ye,{returnExtentOnly:!0,returnCountOnly:!0}).then(le=>{const ge=le.data;if(ge.hasOwnProperty("extent"))return le;if(ge.features)throw new Error(X);if(ge.hasOwnProperty("count"))throw new Error(X);return le})}function H(de,ee,ye,le={},ge={}){const se="string"==typeof de?(0,ie.mN)(de):de,Q=ee.geometry?[ee.geometry]:[];return le.responseType="pbf"===ye?"array-buffer":"json",(0,oe.aX)(Q,null,le).then(pe=>{const ue=pe&&pe[0];(0,ne.pC)(ue)&&((ee=ee.clone()).geometry=ue);const me=(0,Y.M8)(se.path),ve=(0,B.A)(Ot(Ot(nn(Ot({},se.query),{f:ye}),ge),Z(ee,ge,me)));return(0,T.default)((0,ie.v_)(se.path,"query"),nn(Ot({},le),{query:Ot(Ot({},ve),le.query)}))})}},85531:(ut,Oe,C)=>{"use strict";C.d(Oe,{X:()=>j,O:()=>Y});var x=C(24263),T=C(84792),ne=C(21726),ie=C(87183),te=C(33022);function oe(L){const B=L.toJSON();return B.attachmentTypes&&(B.attachmentTypes=B.attachmentTypes.join(",")),B.keywords&&(B.keywords=B.keywords.join(",")),B.globalIds&&(B.globalIds=B.globalIds.join(",")),B.objectIds&&(B.objectIds=B.objectIds.join(",")),B.size&&(B.size=B.size.join(",")),B}function Y(L,B){const X={};for(const Z of L){const{parentObjectId:z,parentGlobalId:ae,attachmentInfos:K}=Z;for(const V of K){const{id:P}=V,F=(0,ne.qg)((0,x.Dp)(`${B}/${z}/attachments/${P}`)),$=ie.Z.fromJSON(V);$.set({url:F,parentObjectId:z,parentGlobalId:ae}),X[z]?X[z].push($):X[z]=[$]}}return X}function j(L,B,X){let Z={query:(0,te.A)(Ot(nn(Ot({},L.query),{f:"json"}),oe(B)))};return X&&(Z=nn(Ot(Ot({},X),Z),{query:Ot(Ot({},X.query),Z.query)})),(0,T.default)(L.path+"/queryAttachments",Z)}},61515:(ut,Oe,C)=>{"use strict";C.d(Oe,{p:()=>ne});var x=C(62208),T=C(33696);function ne(ie,te,oe){if(!oe||!oe.features||!oe.hasZ)return;const Y=(0,T.k)(oe.geometryType,te,ie.outSpatialReference);if(!(0,x.Wi)(Y))for(const j of oe.features)Y(j.geometry)}},87183:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>z});var B,x=C(17626),T=C(86162),ne=C(77712),oe=(C(85931),C(8314),C(90912)),Y=C(76898);const X={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Z=B=class extends T.wq{constructor(ae){super(ae),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:ae}=this,K=function j(ae){const{exifInfo:K,exifName:V,tagName:P}=ae;if(!K||!V||!P)return null;const F=K.find($=>$.name===V);return F?function L(ae){const{tagName:K,tags:V}=ae;if(!V||!K)return null;const P=V.find(F=>F.name===K);return P&&P.value||null}({tagName:P,tags:F.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:ae});return X[K]||null}clone(){return new B({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};(0,x._)([(0,ne.Cb)({type:String})],Z.prototype,"contentType",void 0),(0,x._)([(0,ne.Cb)()],Z.prototype,"exifInfo",void 0),(0,x._)([(0,ne.Cb)({readOnly:!0})],Z.prototype,"orientationInfo",null),(0,x._)([(0,ne.Cb)({type:oe.z8})],Z.prototype,"id",void 0),(0,x._)([(0,ne.Cb)({type:String})],Z.prototype,"globalId",void 0),(0,x._)([(0,ne.Cb)({type:String})],Z.prototype,"keywords",void 0),(0,x._)([(0,ne.Cb)({type:String})],Z.prototype,"name",void 0),(0,x._)([(0,ne.Cb)({json:{read:!1}})],Z.prototype,"parentGlobalId",void 0),(0,x._)([(0,ne.Cb)({json:{read:!1}})],Z.prototype,"parentObjectId",void 0),(0,x._)([(0,ne.Cb)({type:oe.z8})],Z.prototype,"size",void 0),(0,x._)([(0,ne.Cb)({json:{read:!1}})],Z.prototype,"url",void 0),Z=B=(0,x._)([(0,Y.j)("esri.layers.support.AttachmentInfo")],Z);const z=Z},40251:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(91558),ne=C(58817),ie=C(77712),te=C(90912),oe=C(55342),Y=C(76898),j=C(61661);let B=L=class extends j.Z{constructor(Z){super(Z),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new L({fromColor:(0,ne.d9)(this.fromColor),toColor:(0,ne.d9)(this.toColor),algorithm:this.algorithm})}};(0,x._)([(0,oe.J)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],B.prototype,"algorithm",void 0),(0,x._)([(0,ie.Cb)({type:T.Z,json:{type:[te.z8],write:!0}})],B.prototype,"fromColor",void 0),(0,x._)([(0,ie.Cb)({type:T.Z,json:{type:[te.z8],write:!0}})],B.prototype,"toColor",void 0),(0,x._)([(0,ie.Cb)({type:["algorithmic"]})],B.prototype,"type",void 0),B=L=(0,x._)([(0,Y.j)("esri.rest.support.AlgorithmicColorRamp")],B);const X=B},67736:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(86162),ne=C(58817),ie=C(77712),te=C(90912),oe=C(76898),Y=C(99433);let L=j=class extends T.wq{constructor(X){super(X),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(X,Z){Z.resultOffset=this.start,Z.resultRecordCount=this.num||10}clone(){return new j((0,ne.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,x._)([(0,ie.Cb)({type:[String],json:{write:!0}})],L.prototype,"attachmentTypes",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],L.prototype,"attachmentsWhere",void 0),(0,x._)([(0,ie.Cb)({type:[String],json:{write:!0}})],L.prototype,"keywords",void 0),(0,x._)([(0,ie.Cb)({type:[Number],json:{write:!0}})],L.prototype,"globalIds",void 0),(0,x._)([(0,ie.Cb)({json:{write:!0}})],L.prototype,"name",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],L.prototype,"num",void 0),(0,x._)([(0,ie.Cb)({type:[Number],json:{write:!0}})],L.prototype,"objectIds",void 0),(0,x._)([(0,ie.Cb)({type:Boolean,json:{default:!1,write:!0}})],L.prototype,"returnMetadata",void 0),(0,x._)([(0,ie.Cb)({type:[Number],json:{write:!0}})],L.prototype,"size",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],L.prototype,"start",void 0),(0,x._)([(0,Y.c)("start"),(0,Y.c)("num")],L.prototype,"writeStart",null),(0,x._)([(0,ie.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],L.prototype,"where",void 0),L=j=(0,x._)([(0,oe.j)("esri.rest.support.AttachmentQuery")],L),L.from=(0,te.se)(L);const B=L},61661:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>L});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let j=class extends T.wq{constructor(B){super(B),this.type=null}};(0,x._)([(0,ne.Cb)({readOnly:!0,json:{read:!1,write:!0}})],j.prototype,"type",void 0),j=(0,x._)([(0,Y.j)("esri.rest.support.ColorRamp")],j);const L=j},17253:(ut,Oe,C)=>{"use strict";C.r(Oe),C.d(Oe,{default:()=>$});var x=C(17626),T=C(29132),ne=C(88879),ie=C(2076),te=C(86162),oe=C(62208),Y=C(77712),X=(C(85931),C(8314),C(90912),C(68653)),Z=C(76898),z=C(99433),ae=C(65234),K=C(91179),V=C(36255);const P=new ie.Xn({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let F=class extends te.wq{constructor(J){super(J),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(J,H){const de=ae.Z.fromJSON(H.spatialReference),ee=[];for(let ye=0;ye<J.length;ye++){const le=J[ye],ge=ne.Z.fromJSON(le),se=le.geometry&&le.geometry.spatialReference;(0,oe.pC)(ge.geometry)&&!se&&(ge.geometry.spatialReference=de),ee.push(ge)}return ee}writeGeometryType(J,H,de,ee){if(J)return void P.write(J,H,de,ee);const{features:ye}=this;if(ye)for(const le of ye)if(le&&(0,oe.pC)(le.geometry))return void P.write(le.geometry.type,H,de,ee)}readQueryGeometry(J,H){if(!J)return null;const de=!!J.spatialReference,ee=(0,K.im)(J);return!de&&H.spatialReference&&(ee.spatialReference=ae.Z.fromJSON(H.spatialReference)),ee}writeSpatialReference(J,H){if(J)return void(H.spatialReference=J.toJSON());const{features:de}=this;if(de)for(const ee of de)if(ee&&(0,oe.pC)(ee.geometry)&&ee.geometry.spatialReference)return void(H.spatialReference=ee.geometry.spatialReference.toJSON())}toJSON(J){const H=this.write();if(H.features&&Array.isArray(J)&&J.length>0)for(let de=0;de<H.features.length;de++){const ee=H.features[de];if(ee.geometry){const ye=J&&J[de];ee.geometry=ye&&ye.toJSON()||ee.geometry}}return H}quantize(J){const{scale:[H,de],translate:[ee,ye]}=J,se=this.features,Q=this._getQuantizationFunction(this.geometryType,pe=>Math.round((pe-ee)/H),pe=>Math.round((ye-pe)/de));for(let pe=0,ue=se.length;pe<ue;pe++)Q((0,oe.Wg)(se[pe].geometry))||(se.splice(pe,1),pe--,ue--);return this.transform=J,this}unquantize(){const{geometryType:J,features:H,transform:de}=this;if(!de)return this;const{translate:[ee,ye],scale:[le,ge]}=de,pe=this._getHydrationFunction(J,ue=>ue*le+ee,ue=>ye-ue*ge);for(const{geometry:ue}of H)(0,oe.pC)(ue)&&pe(ue);return this.transform=null,this}_quantizePoints(J,H,de){let ee,ye;const le=[];for(let ge=0,se=J.length;ge<se;ge++){const Q=J[ge];if(ge>0){const pe=H(Q[0]),ue=de(Q[1]);pe===ee&&ue===ye||(le.push([pe-ee,ue-ye]),ee=pe,ye=ue)}else ee=H(Q[0]),ye=de(Q[1]),le.push([ee,ye])}return le.length>0?le:null}_getQuantizationFunction(J,H,de){return"point"===J?ee=>(ee.x=H(ee.x),ee.y=de(ee.y),ee):"polyline"===J||"polygon"===J?ee=>{const ye=(0,K.oU)(ee)?ee.rings:ee.paths,le=[];for(let ge=0,se=ye.length;ge<se;ge++){const pe=this._quantizePoints(ye[ge],H,de);pe&&le.push(pe)}return le.length>0?((0,K.oU)(ee)?ee.rings=le:ee.paths=le,ee):null}:"multipoint"===J?ee=>{const ye=this._quantizePoints(ee.points,H,de);return ye.length>0?(ee.points=ye,ee):null}:"extent"===J?ee=>ee:null}_getHydrationFunction(J,H,de){return"point"===J?ee=>{ee.x=H(ee.x),ee.y=de(ee.y)}:"polyline"===J||"polygon"===J?ee=>{const ye=(0,K.oU)(ee)?ee.rings:ee.paths;let le,ge;for(let se=0,Q=ye.length;se<Q;se++){const pe=ye[se];for(let ue=0,me=pe.length;ue<me;ue++){const ve=pe[ue];ue>0?(le+=ve[0],ge+=ve[1]):(le=ve[0],ge=ve[1]),ve[0]=H(le),ve[1]=de(ge)}}}:"extent"===J?ee=>{ee.xmin=H(ee.xmin),ee.ymin=de(ee.ymin),ee.xmax=H(ee.xmax),ee.ymax=de(ee.ymax)}:"multipoint"===J?ee=>{const ye=ee.points;let le,ge;for(let se=0,Q=ye.length;se<Q;se++){const pe=ye[se];se>0?(le+=pe[0],ge+=pe[1]):(le=pe[0],ge=pe[1]),pe[0]=H(le),pe[1]=de(ge)}}:void 0}};(0,x._)([(0,Y.Cb)({type:String,json:{write:!0}})],F.prototype,"displayFieldName",void 0),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:{overridePolicy:J=>({enabled:J})}}})],F.prototype,"exceededTransferLimit",void 0),(0,x._)([(0,Y.Cb)({type:[ne.Z],json:{write:!0}})],F.prototype,"features",void 0),(0,x._)([(0,X.r)("features")],F.prototype,"readFeatures",null),(0,x._)([(0,Y.Cb)({type:[V.Z],json:{write:!0}})],F.prototype,"fields",void 0),(0,x._)([(0,Y.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:P.read}}})],F.prototype,"geometryType",void 0),(0,x._)([(0,z.c)("geometryType")],F.prototype,"writeGeometryType",null),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:{overridePolicy:J=>({enabled:J})}}})],F.prototype,"hasM",void 0),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:{overridePolicy:J=>({enabled:J})}}})],F.prototype,"hasZ",void 0),(0,x._)([(0,Y.Cb)({types:T.qM,json:{write:!0}})],F.prototype,"queryGeometry",void 0),(0,x._)([(0,X.r)("queryGeometry")],F.prototype,"readQueryGeometry",null),(0,x._)([(0,Y.Cb)({type:ae.Z,json:{write:!0}})],F.prototype,"spatialReference",void 0),(0,x._)([(0,z.c)("spatialReference")],F.prototype,"writeSpatialReference",null),(0,x._)([(0,Y.Cb)({json:{write:!0}})],F.prototype,"transform",void 0),F=(0,x._)([(0,Z.j)("esri.rest.support.FeatureSet")],F),F.prototype.toJSON.isDefaultToJSON=!0;const $=F},75414:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(58817),ne=C(77712),te=(C(90912),C(76898)),oe=C(40251),Y=C(61661);let L=j=class extends Y.Z{constructor(X){super(X),this.colorRamps=null,this.type="multipart"}clone(){return new j({colorRamps:(0,T.d9)(this.colorRamps)})}};(0,x._)([(0,ne.Cb)({type:[oe.Z],json:{write:!0}})],L.prototype,"colorRamps",void 0),(0,x._)([(0,ne.Cb)({type:["multipart"]})],L.prototype,"type",void 0),L=j=(0,x._)([(0,te.j)("esri.rest.support.MultipartColorRamp")],L);const B=L},77294:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(91179);let L=class extends T.wq{constructor(X){super(X),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const X=this.geometries.map(function(ae){return ae.toJSON()}),Z=this.geometries[0],z={};return z.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),z.inSR=Z.spatialReference.wkid||JSON.stringify(Z.spatialReference.toJSON()),z.geometries=JSON.stringify({geometryType:(0,j.Ji)(Z),geometries:X}),this.transformation&&(z.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(z.transformForward=this.transformForward),z}};(0,x._)([(0,ne.Cb)()],L.prototype,"geometries",void 0),(0,x._)([(0,ne.Cb)({json:{read:{source:"outSR"}}})],L.prototype,"outSpatialReference",void 0),(0,x._)([(0,ne.Cb)()],L.prototype,"transformation",void 0),(0,x._)([(0,ne.Cb)()],L.prototype,"transformForward",void 0),L=(0,x._)([(0,Y.j)("esri.rest.support.ProjectParameters")],L);const B=L},89621:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>z});var B,x=C(17626),ne=(C(29132),C(2076)),ie=C(86162),te=C(58817),oe=C(77712),j=(C(90912),C(76898)),L=C(2004);const X=new ne.Xn({upperLeft:"upper-left",lowerLeft:"lower-left"});let Z=B=class extends ie.wq{constructor(ae){super(ae),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new B((0,te.d9)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,x._)([(0,oe.Cb)({type:L.Z,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],Z.prototype,"extent",void 0),(0,x._)([(0,oe.Cb)({type:["view","edit"],json:{write:!0}})],Z.prototype,"mode",void 0),(0,x._)([(0,oe.Cb)({type:String,json:{read:X.read,write:X.write}})],Z.prototype,"originPosition",void 0),(0,x._)([(0,oe.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],Z.prototype,"tolerance",void 0),Z=B=(0,x._)([(0,j.j)("esri.rest.support.QuantizationParameters")],Z);const z=Z},84952:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ye});var J,x=C(17626),T=C(29132),ne=C(97478),ie=C(2076),te=C(86162),oe=C(58817),Y=C(62208),j=C(77712),L=C(66656),B=C(55342),X=C(76898),Z=C(99433),z=C(90912),ae=C(91179),K=C(15283),V=C(89621),P=C(60776),F=C(65234),$=C(49672);const H=new ie.Xn({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),de=new ie.Xn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ee=J=class extends te.wq{constructor(le){super(le),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(le){return(0,z.TJ)(J,le)}castDatumTransformation(le){return"number"==typeof le||"object"==typeof le?le:null}writeHistoricMoment(le,ge){ge.historicMoment=le&&le.getTime()}writeParameterValues(le,ge){if(le){const se={};for(const Q in le){const pe=le[Q];se[Q]=Array.isArray(pe)?pe.map(ue=>ue instanceof Date?ue.getTime():ue):pe instanceof Date?pe.getTime():pe}ge.parameterValues=se}}writeStart(le,ge){ge.resultOffset=this.start,ge.resultRecordCount=this.num||10,ge.where="1=1"}writeWhere(le,ge){ge.where=le||"1=1"}clone(){return new J((0,oe.d9)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:(0,Y.pC)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ee.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,x._)([(0,j.Cb)({json:{write:!0}})],ee.prototype,"aggregateIds",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],ee.prototype,"cacheHint",void 0),(0,x._)([(0,j.Cb)({json:{write:!0}})],ee.prototype,"datumTransformation",void 0),(0,x._)([(0,L.p)("datumTransformation")],ee.prototype,"castDatumTransformation",null),(0,x._)([(0,j.Cb)({type:Number,json:{write:{overridePolicy:le=>({enabled:le>0})}}})],ee.prototype,"distance",void 0),(0,x._)([(0,j.Cb)({type:K.n,json:{write:!0}})],ee.prototype,"dynamicDataSource",void 0),(0,x._)([(0,j.Cb)({type:String,json:{write:!0}})],ee.prototype,"formatOf3DObjects",void 0),(0,x._)([(0,j.Cb)({type:String,json:{write:!0}})],ee.prototype,"gdbVersion",void 0),(0,x._)([(0,j.Cb)({types:T.qM,json:{read:ae.im,write:!0}})],ee.prototype,"geometry",void 0),(0,x._)([(0,j.Cb)({type:Number,json:{write:!0}})],ee.prototype,"geometryPrecision",void 0),(0,x._)([(0,j.Cb)({type:[String],json:{write:!0}})],ee.prototype,"groupByFieldsForStatistics",void 0),(0,x._)([(0,j.Cb)({type:String,json:{write:!0}})],ee.prototype,"having",void 0),(0,x._)([(0,j.Cb)({type:Date})],ee.prototype,"historicMoment",void 0),(0,x._)([(0,Z.c)("historicMoment")],ee.prototype,"writeHistoricMoment",null),(0,x._)([(0,j.Cb)({type:Number,json:{write:!0}})],ee.prototype,"maxAllowableOffset",void 0),(0,x._)([(0,j.Cb)({type:Number,cast:le=>le<1?1:le>J.MAX_MAX_RECORD_COUNT_FACTOR?J.MAX_MAX_RECORD_COUNT_FACTOR:le,json:{write:{overridePolicy:le=>({enabled:le>1})}}})],ee.prototype,"maxRecordCountFactor",void 0),(0,x._)([(0,j.Cb)({type:["xyFootprint"],json:{write:!0}})],ee.prototype,"multipatchOption",void 0),(0,x._)([(0,j.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],ee.prototype,"num",void 0),(0,x._)([(0,j.Cb)({json:{write:!0}})],ee.prototype,"objectIds",void 0),(0,x._)([(0,j.Cb)({type:[String],json:{write:!0}})],ee.prototype,"orderByFields",void 0),(0,x._)([(0,j.Cb)({type:[String],json:{write:!0}})],ee.prototype,"outFields",void 0),(0,x._)([(0,j.Cb)({type:F.Z,json:{name:"outSR",write:!0}})],ee.prototype,"outSpatialReference",void 0),(0,x._)([(0,j.Cb)({type:[P.Z],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,Y.pC)(this.outStatistics)&&this.outStatistics.length>0}}}}})],ee.prototype,"outStatistics",void 0),(0,x._)([(0,j.Cb)({json:{write:!0}})],ee.prototype,"parameterValues",void 0),(0,x._)([(0,Z.c)("parameterValues")],ee.prototype,"writeParameterValues",null),(0,x._)([(0,j.Cb)({type:$.Z,json:{write:!0}})],ee.prototype,"pixelSize",void 0),(0,x._)([(0,j.Cb)({type:V.Z,json:{write:!0}})],ee.prototype,"quantizationParameters",void 0),(0,x._)([(0,j.Cb)({type:[Object],json:{write:!0}})],ee.prototype,"rangeValues",void 0),(0,x._)([(0,j.Cb)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],ee.prototype,"relationParameter",void 0),(0,x._)([(0,j.Cb)({type:String,json:{write:!0}})],ee.prototype,"resultType",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{default:!1,write:!0}})],ee.prototype,"returnCentroid",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{default:!1,write:!0}})],ee.prototype,"returnDistinctValues",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{default:!0,write:!0}})],ee.prototype,"returnExceededLimitFeatures",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],ee.prototype,"returnGeometry",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{default:!1,write:!0}})],ee.prototype,"returnQueryGeometry",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{default:!1,write:!0}})],ee.prototype,"returnM",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{write:{overridePolicy:le=>({enabled:le})}}})],ee.prototype,"returnZ",void 0),(0,x._)([(0,j.Cb)({type:F.Z,json:{write:!0}})],ee.prototype,"sourceSpatialReference",void 0),(0,x._)([(0,B.J)(H,{ignoreUnknown:!1,name:"spatialRel"})],ee.prototype,"spatialRelationship",void 0),(0,x._)([(0,j.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],ee.prototype,"start",void 0),(0,x._)([(0,Z.c)("start"),(0,Z.c)("num")],ee.prototype,"writeStart",null),(0,x._)([(0,j.Cb)({type:String,json:{write:!0}})],ee.prototype,"sqlFormat",void 0),(0,x._)([(0,j.Cb)({type:String,json:{write:!0}})],ee.prototype,"text",void 0),(0,x._)([(0,j.Cb)({type:ne.Z,json:{write:!0}})],ee.prototype,"timeExtent",void 0),(0,x._)([(0,j.Cb)({type:Boolean,json:{default:!1,write:!0}})],ee.prototype,"timeReferenceUnknownClient",void 0),(0,x._)([(0,B.J)(de,{ignoreUnknown:!1}),(0,j.Cb)({json:{write:{overridePolicy(le){return{enabled:le&&this.distance>0}}}}})],ee.prototype,"units",void 0),(0,x._)([(0,j.Cb)({type:String,json:{write:{overridePolicy(le){return{enabled:null!=le||this.start>0}}}}})],ee.prototype,"where",void 0),(0,x._)([(0,Z.c)("where")],ee.prototype,"writeWhere",null),ee=J=(0,x._)([(0,X.j)("esri.rest.support.Query")],ee);const ye=ee},67010:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>z});var X,x=C(17626),ne=(C(29132),C(86162)),ie=C(58817),te=C(77712),oe=C(90912),Y=C(76898),j=C(99433),L=C(15283),B=C(65234);let Z=X=class extends ne.wq{constructor(ae){super(ae),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(ae,K){K.historicMoment=ae&&ae.getTime()}writeStart(ae,K){K.resultOffset=this.start,K.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(K.definitionExpression="1=1")}clone(){return new X((0,ie.d9)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,x._)([(0,te.Cb)({type:L.n,json:{write:!0}})],Z.prototype,"dynamicDataSource",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],Z.prototype,"gdbVersion",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],Z.prototype,"geometryPrecision",void 0),(0,x._)([(0,te.Cb)({type:Date})],Z.prototype,"historicMoment",void 0),(0,x._)([(0,j.c)("historicMoment")],Z.prototype,"_writeHistoricMoment",null),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],Z.prototype,"maxAllowableOffset",void 0),(0,x._)([(0,te.Cb)({type:[Number],json:{write:!0}})],Z.prototype,"objectIds",void 0),(0,x._)([(0,te.Cb)({type:[String],json:{write:!0}})],Z.prototype,"orderByFields",void 0),(0,x._)([(0,te.Cb)({type:[String],json:{write:!0}})],Z.prototype,"outFields",void 0),(0,x._)([(0,te.Cb)({type:B.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Z.prototype,"outSpatialReference",void 0),(0,x._)([(0,te.Cb)({json:{write:!0}})],Z.prototype,"relationshipId",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],Z.prototype,"start",void 0),(0,x._)([(0,j.c)("start"),(0,j.c)("num")],Z.prototype,"writeStart",null),(0,x._)([(0,te.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],Z.prototype,"num",void 0),(0,x._)([(0,te.Cb)({json:{write:!0}})],Z.prototype,"returnGeometry",void 0),(0,x._)([(0,te.Cb)({type:Boolean,json:{write:{overridePolicy:ae=>({enabled:ae})}}})],Z.prototype,"returnM",void 0),(0,x._)([(0,te.Cb)({type:Boolean,json:{write:{overridePolicy:ae=>({enabled:ae})}}})],Z.prototype,"returnZ",void 0),(0,x._)([(0,te.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Z.prototype,"where",void 0),Z=X=(0,x._)([(0,Y.j)("esri.rest.support.RelationshipQuery")],Z),Z.from=(0,oe.se)(Z);const z=Z},60776:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Z});var L,x=C(17626),T=C(2076),ne=C(86162),ie=C(58817),te=C(77712),Y=(C(90912),C(76898)),j=C(99433);const B=new T.Xn({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let X=L=class extends ne.wq{constructor(z){super(z),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(z,ae){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(ae.statisticParameters=(0,ie.d9)(z))}clone(){return new L({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,ie.d9)(this.statisticParameters)})}};(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],X.prototype,"maxPointCount",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],X.prototype,"maxRecordCount",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],X.prototype,"maxVertexCount",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],X.prototype,"onStatisticField",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],X.prototype,"outStatisticFieldName",void 0),(0,x._)([(0,te.Cb)({type:String,json:{read:{source:"statisticType",reader:B.read},write:{target:"statisticType",writer:B.write}}})],X.prototype,"statisticType",void 0),(0,x._)([(0,te.Cb)({type:Object})],X.prototype,"statisticParameters",void 0),(0,x._)([(0,j.c)("statisticParameters")],X.prototype,"writeStatisticParameters",null),X=L=(0,x._)([(0,Y.j)("esri.rest.support.StatisticDefinition")],X);const Z=X},6871:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>de});var ae,x=C(17626),T=C(29132),ne=C(97478),ie=C(2076),te=C(86162),oe=C(58817),Y=C(77712),j=C(90912),L=C(76898),B=C(99433),X=C(91179);C(85931),C(8314);let K=ae=class extends te.wq{constructor(ee){super(ee),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new ae({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,x._)([(0,Y.Cb)({type:[String],json:{write:!0}})],K.prototype,"groupByFields",void 0),(0,x._)([(0,Y.Cb)({type:Number,json:{write:!0}})],K.prototype,"topCount",void 0),(0,x._)([(0,Y.Cb)({type:[String],json:{write:!0}})],K.prototype,"orderByFields",void 0),K=ae=(0,x._)([(0,L.j)("esri.rest.support.TopFilter")],K);const V=K;var F,P=C(65234);const $=new ie.Xn({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),J=new ie.Xn({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let H=F=class extends te.wq{constructor(ee){super(ee),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(ee,ye){ye.resultOffset=this.start,ye.resultRecordCount=this.num||10}clone(){return new F((0,oe.d9)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:!0}})],H.prototype,"cacheHint",void 0),(0,x._)([(0,Y.Cb)({type:Number,json:{write:{overridePolicy:ee=>({enabled:ee>0})}}})],H.prototype,"distance",void 0),(0,x._)([(0,Y.Cb)({types:T.qM,json:{read:X.im,write:!0}})],H.prototype,"geometry",void 0),(0,x._)([(0,Y.Cb)({type:Number,json:{write:!0}})],H.prototype,"geometryPrecision",void 0),(0,x._)([(0,Y.Cb)({type:Number,json:{write:!0}})],H.prototype,"maxAllowableOffset",void 0),(0,x._)([(0,Y.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],H.prototype,"num",void 0),(0,x._)([(0,Y.Cb)({json:{write:!0}})],H.prototype,"objectIds",void 0),(0,x._)([(0,Y.Cb)({type:[String],json:{write:!0}})],H.prototype,"orderByFields",void 0),(0,x._)([(0,Y.Cb)({type:[String],json:{write:!0}})],H.prototype,"outFields",void 0),(0,x._)([(0,Y.Cb)({type:P.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],H.prototype,"outSpatialReference",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{write:!0}})],H.prototype,"resultType",void 0),(0,x._)([(0,Y.Cb)({json:{write:!0}})],H.prototype,"returnGeometry",void 0),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:{overridePolicy:ee=>({enabled:ee})}}})],H.prototype,"returnM",void 0),(0,x._)([(0,Y.Cb)({type:Boolean,json:{write:{overridePolicy:ee=>({enabled:ee})}}})],H.prototype,"returnZ",void 0),(0,x._)([(0,Y.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],H.prototype,"start",void 0),(0,x._)([(0,B.c)("start"),(0,B.c)("num")],H.prototype,"writeStart",null),(0,x._)([(0,Y.Cb)({type:String,json:{read:{source:"spatialRel",reader:$.read},write:{target:"spatialRel",writer:$.write}}})],H.prototype,"spatialRelationship",void 0),(0,x._)([(0,Y.Cb)({type:ne.Z,json:{write:!0}})],H.prototype,"timeExtent",void 0),(0,x._)([(0,Y.Cb)({type:V,json:{write:!0}})],H.prototype,"topFilter",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{read:J.read,write:{writer:J.write,overridePolicy(ee){return{enabled:ee&&this.distance>0}}}}})],H.prototype,"units",void 0),(0,x._)([(0,Y.Cb)({type:String,json:{write:!0}})],H.prototype,"where",void 0),H=F=(0,x._)([(0,L.j)("esri.rest.support.TopFeaturesQuery")],H),H.from=(0,j.se)(H);const de=H},79023:(ut,Oe,C)=>{"use strict";C.d(Oe,{i:()=>te,V:()=>ie});var x=C(40251),T=C(61661),ne=C(75414);const ie={key:"type",base:T.Z,typeMap:{algorithmic:x.Z,multipart:ne.Z}};function te(oe){return oe&&oe.type?"algorithmic"===oe.type?x.Z.fromJSON(oe):"multipart"===oe.type?ne.Z.fromJSON(oe):null:null}},2618:(ut,Oe,C)=>{"use strict";C.d(Oe,{lA:()=>ne,cv:()=>te,en:()=>ie});var x=C(21726);function ne(j,L){return L?nn(Ot({},L),{query:Ot(Ot({},j),L.query)}):{query:j}}function ie(j){return"string"==typeof j?(0,x.mN)(j):j}function te(j,L,B){const X={};for(const Z in j){if("declaredClass"===Z)continue;const z=j[Z];if(null!=z&&"function"!=typeof z)if(Array.isArray(z)){X[Z]=[];for(let ae=0;ae<z.length;ae++)X[Z][ae]=te(z[ae])}else if("object"==typeof z)if(z.toJSON){const ae=z.toJSON(B&&B[Z]);X[Z]=L?ae:JSON.stringify(ae)}else X[Z]=L?z:JSON.stringify(z);else X[Z]=z}return X}C(83137)},51815:(ut,Oe,C)=>{"use strict";C.d(Oe,{J:()=>X});var x=C(17626),T=C(88879),ie=(C(63290),C(90912)),j=(C(85931),C(8314),C(82255),C(61039)),L=C(76898),B=C(28705);let X=class extends B.a{_own(Z){Z.layer&&"remove"in Z.layer&&Z.layer!==this.owner&&Z.layer.remove(Z),Z.layer=this.owner}_release(Z){Z.layer===this.owner&&(Z.layer=null)}};(0,x._)([(0,j.c)({Type:T.Z,ensureType:(0,ie.se)(T.Z)})],X.prototype,"itemType",void 0),X=(0,x._)([(0,L.j)("esri.support.GraphicsCollection")],X)},6432:(ut,Oe,C)=>{"use strict";C.d(Oe,{K:()=>K});var x=C(17626),T=C(7093),ne=C(89726),ie=C(63290),te=C(10699),oe=C(77712),B=(C(85931),C(8314),C(90912),C(76898)),X=C(63602);function Z(V){return V&&"group"===V.type}function z(V,P,F){let $,J;if(V)for(let H=0,de=V.length;H<de;H++){if($=V.getItemAt(H),$[P]===F)return $;if(Z($)&&(J=z($.layers,P,F),J))return J}}const ae=ie.Z.getLogger("esri.support.LayersMixin"),K=V=>{let P=class extends V{constructor(...F){super(...F),this.layers=new T.Z;const J=de=>{de.parent=this,this.layerAdded(de),"elevation"!==de.type&&"base-elevation"!==de.type||ae.error(`Layer 'title:${de.title}, id:${de.id}' of type '${de.type}' is not supported as an operational layer and will therefore be ignored.`)},H=de=>{de.parent=null,this.layerRemoved(de)};this.layers.on("before-add",de=>(de=>{de.parent&&"remove"in de.parent&&de.parent.remove(de)})(de.item)),this.layers.on("after-add",de=>J(de.item)),this.layers.on("after-remove",de=>H(de.item))}destroy(){const F=this.layers.removeAll();for(const $ of F)this.layerRemoved($),$.destroy();this.layers.destroy()}set layers(F){this._set("layers",(0,ne.Z)(F,this._get("layers")))}add(F,$){const J=this.layers;if($=J.getNextIndex($),F instanceof X.Z){const H=F;H.parent===this?this.reorder(H,$):J.add(H,$)}else(0,te.y8)(F)?F.then(H=>{this.destroyed||this.add(H,$)}):ae.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(F,$){const J=this.layers;$=J.getNextIndex($),F.slice().forEach(H=>{H.parent!==this?(J.add(H,$),$+=1):this.reorder(H,$)})}findLayerById(F){return z(this.layers,"id",F)}findLayerByUid(F){return z(this.layers,"uid",F)}remove(F){return this.layers.remove(F)}removeMany(F){return this.layers.removeMany(F)}removeAll(){return this.layers.removeAll()}reorder(F,$){return this.layers.reorder(F,$)}layerAdded(F){}layerRemoved(F){}};return(0,x._)([(0,oe.Cb)()],P.prototype,"layers",null),P=(0,x._)([(0,B.j)("esri.support.LayersMixin")],P),P}},6119:(ut,Oe,C)=>{"use strict";C.d(Oe,{Q:()=>ae});var x=C(17626),T=C(7093),ne=C(89726),ie=C(63290),te=C(77712),L=(C(85931),C(8314),C(90912),C(76898));const B="esri.support.TablesMixin",X=ie.Z.getLogger(B);function Z(K){return K&&"group"===K.type}function z(K,V,P){if(K)for(let F=0,$=K.length;F<$;F++){const J=K.getItemAt(F);if(J[V]===P)return J;if(Z(J)){const H=z(J.tables,V,P);if(H)return H}}}const ae=K=>{let V=class extends K{constructor(...P){super(...P),this.tables=new T.Z,this.tables.on("after-add",F=>{const $=F.item;$.parent&&$.parent!==this&&"tables"in $.parent&&$.parent.tables.remove($),$.parent=this,"feature"!==$.type&&X.error(`Layer 'title:${$.title}, id:${$.id}' of type '${$.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",F=>{F.item.parent=null})}destroy(){const P=this.tables.removeAll();for(const F of P)F.destroy();this.tables.destroy()}set tables(P){this._set("tables",(0,ne.Z)(P,this._get("tables")))}findTableById(P){return z(this.tables,"id",P)}findTableByUid(P){return z(this.tables,"uid",P)}};return(0,x._)([(0,te.Cb)()],V.prototype,"tables",null),V=(0,x._)([(0,L.j)(B)],V),V}},59397:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(14517),ne=C(61996),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898));let B=L=class extends((0,ne.I)(T.Z)){constructor(Z){super(Z),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new L({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,x._)([(0,ie.Cb)()],B.prototype,"active",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"className",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"disabled",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"id",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"indicator",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"title",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"type",void 0),(0,x._)([(0,ie.Cb)()],B.prototype,"visible",void 0),B=L=(0,x._)([(0,j.j)("esri.support.actions.ActionBase")],B);const X=B},48753:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(59397);let L=j=class extends Y.Z{constructor(X){super(X),this.image=null,this.type="button"}clone(){return new j({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,x._)([(0,T.Cb)()],L.prototype,"image",void 0),L=j=(0,x._)([(0,oe.j)("esri.support.Action.ActionButton")],L);const B=L},10671:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(59397);let L=j=class extends Y.Z{constructor(X){super(X),this.image=null,this.type="toggle",this.value=!1}clone(){return new j({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,x._)([(0,T.Cb)()],L.prototype,"image",void 0),(0,x._)([(0,T.Cb)()],L.prototype,"value",void 0),L=j=(0,x._)([(0,oe.j)("esri.support.Action.ActionToggle")],L);const B=L},12680:(ut,Oe,C)=>{"use strict";C.d(Oe,{r:()=>ie});var x=C(21726);const T=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function ie(te){const oe=(0,x.P$)(te,!0);return oe&&oe.endsWith(".arcgis.com")&&!T.includes(oe)&&!te.endsWith("/sharing/rest/generateToken")}},46679:(ut,Oe,C)=>{"use strict";C.d(Oe,{mz:()=>X,pp:()=>B,WW:()=>Y,Yi:()=>j,LC:()=>oe});var x=C(15861),ne=(C(29132),C(62208)),ie=C(65234);let te;function oe(){return te||(te=(0,x.Z)(function*(){const Z=yield C.e(5068).then(C.bind(C,75068));return{arcade:Z.arcade,arcadeUtils:Z,Dictionary:Z.Dictionary,Feature:Z.arcadeFeature}})()),te}const Y=(Z,z,ae)=>X.create(Z,z,ae,null,["$feature"]),j=(Z,z,ae)=>X.create(Z,z,ae,null,["$feature","$view"]),B=(Z,z,ae,K)=>X.create(Z,z,ae,K,["$feature","$view"]);class X{constructor(z,ae,K,V,P,F,$,J){this.script=z,this.evaluate=P;const H=Array.isArray($)?$:$.fields;this.fields=H,this._syntaxTree=V,this._arcade=ae,this._arcadeDictionary=K,this._arcadeFeature=F,this._spatialReference=J,this._referencesGeometry=ae.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static create(z,ae,K,V,P,F){return(0,x.Z)(function*(){const{arcade:$,Feature:J,Dictionary:H}=yield oe(),de=ie.Z.fromJSON(ae),ee=$.parseScript(z,F),ye=P.reduce((fe,Me)=>nn(Ot({},fe),{[Me]:null}),{});let le=null;(0,ne.pC)(V)&&(le=new H(V),le.immutable=!0,ye.$config=null);const ge=$.scriptUsesGeometryEngine(ee)&&$.enableGeometrySupport(),se=$.scriptUsesFeatureSet(ee)&&$.enableFeatureSetSupport(),Q=$.scriptIsAsync(ee)&&$.enableAsyncSupport(),pe={vars:ye,spatialReference:de,useAsync:!!Q},ue=new H;ue.immutable=!1,ue.setField("scale",0);const me=$.compileScript(ee,pe);return yield Promise.all([ge,se,Q]),new X(z,$,H,ee,fe=>("$view"in fe&&fe.$view&&(ue.setField("scale",fe.$view.scale),fe.$view=ue),le&&(fe.$config=le),me({vars:fe,spatialReference:de})),new J,K,de)})()}repurposeFeature(z){return z.geometry&&!z.geometry.spatialReference&&(z.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(z.geometry,z.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(z){return this._arcadeFeature.repurposeFromAdapter(z,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(z){return this._arcade.referencesMember(this._syntaxTree,z)}referencesFunction(z){return this._arcade.referencesFunction(this._syntaxTree,z)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},33954:(ut,Oe,C)=>{"use strict";C.d(Oe,{s:()=>oe,g:()=>ie});var x=C(15861),T=C(54346),ne=C(41840);function ie(Y){return te.apply(this,arguments)}function te(){return(te=(0,x.Z)(function*(Y){if(!Y)return;const j=Y.indexOf("-vector")>-1?Y.slice(0,Y.indexOf("-vector")):Y,L=yield(0,ne.ME)("esri/t9n/basemaps");return L[Y]||L[j]})).apply(this,arguments)}const oe={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},49430:(ut,Oe,C)=>{"use strict";C.d(Oe,{eZ:()=>ae});var x=C(73281),T=C(36630),ne=C(55664),Y=(C(55013),C(16615),C(82561),C(75484)),B=(C(64531),C(501),C(25621)),X=C(66845);const Z=["oid","global-id"],z=["oid","global-id","guid"];function ae({displayField:Q,editFieldsInfo:pe,fields:ue,objectIdField:me,title:ve},fe){if(!ue)return null;const Me=function de({editFieldsInfo:Q,fields:pe,objectIdField:ue},me){return function P(Q,pe){const ue=Q;return pe&&(Q=Q.filter(me=>-1===pe.indexOf(me.type))),Q===ue&&(Q=Q.slice()),Q.sort(F),Q}(pe,(null==me?void 0:me.ignoreFieldTypes)||se).map(ve=>new B.Z({fieldName:ve.name,isEditable:J(ve,Q),label:ve.alias,format:ee(ve),visible:V(ve,{editFieldsInfo:Q,objectIdField:ue,visibleFieldNames:null==me?void 0:me.visibleFieldNames})}))}({editFieldsInfo:pe,fields:ue,objectIdField:me},fe);if(!Me.length)return null;const ce=function le(Q){const pe=(0,T.O5)(Q),{titleBase:ue}=Q;return pe?`${ue}: {${pe.trim()}}`:ue}({titleBase:ve,fields:ue,displayField:Q}),he=function ye(){return[new Y.Z,new ne.Z]}();return new x.Z({title:ce,content:he,fieldInfos:Me})}const K=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],V=(Q,{editFieldsInfo:pe,objectIdField:ue,visibleFieldNames:me})=>me?me.has(Q.name):!($(Q.name,pe)||ue&&Q.name===ue||Z.indexOf(Q.type)>-1||K.some(ve=>ve.test(Q.name)));function F(Q,pe){return"oid"===Q.type?-1:"oid"===pe.type?1:ge(Q)?-1:ge(pe)?1:(Q.alias||Q.name).toLocaleLowerCase().localeCompare((pe.alias||pe.name).toLocaleLowerCase())}function $(Q,pe){if(!Q||!pe)return!1;const{creationDateField:ue,creatorField:me,editDateField:ve,editorField:fe}=pe;return-1!==[ue&&ue.toLowerCase(),me&&me.toLowerCase(),ve&&ve.toLowerCase(),fe&&fe.toLowerCase()].indexOf(Q.toLowerCase())}function J(Q,pe){return Q.editable&&-1===z.indexOf(Q.type)&&!$(Q.name,pe)}function ee(Q){switch(Q.type){case"small-integer":case"integer":case"single":return new X.Z({digitSeparator:!0,places:0});case"double":return new X.Z({digitSeparator:!0,places:2});case"date":return new X.Z({dateFormat:"long-month-day-year"});default:return null}}function ge(Q){return"name"===(Q.name&&Q.name.toLowerCase())||"name"===(Q.alias&&Q.alias.toLowerCase())||void 0}const se=["geometry","blob","raster","guid","xml"]},33899:(ut,Oe,C)=>{"use strict";C.d(Oe,{f:()=>ie});var x=C(8314),T=C(62208),ne=C(10699);function ie(oe,Y,j=!1,L){return new Promise((B,X)=>{if((0,ne.Hc)(L))return void X(te());let Z=()=>{K(),X(new Error(`Unable to load ${Y}`))},z=()=>{const V=oe;K(),B(V)},ae=()=>{if(!oe)return;const V=oe;K(),V.src="",X(te())};const K=()=>{(0,x.Z)("esri-image-decode")||(oe.removeEventListener("error",Z),oe.removeEventListener("load",z)),Z=null,z=null,oe=null,(0,T.pC)(L)&&L.removeEventListener("abort",ae),ae=null,j&&URL.revokeObjectURL(Y)};(0,T.pC)(L)&&L.addEventListener("abort",ae),(0,x.Z)("esri-image-decode")?oe.decode().then(z,Z):(oe.addEventListener("error",Z),oe.addEventListener("load",z))})}function te(){try{return new DOMException("Aborted","AbortError")}catch(oe){const Y=new Error;return Y.name="AbortError",Y}}},38365:(ut,Oe,C)=>{"use strict";C.d(Oe,{r:()=>x,$:()=>T});const x="20211215",T="ad43611b413b1d0a625293a3ce87543dde5c1fa2"},65787:(ut,Oe,C)=>{"use strict";C.d(Oe,{se:()=>yt,cT:()=>Ae,dU:()=>Qe,S9:()=>Ee,LB:()=>Je,AH:()=>re,yK:()=>tt,S6:()=>bt,QT:()=>$e,f_:()=>mt});var J,x=C(90912),T=C(383),ne=C(94398),te=(C(65499),C(48575)),oe=C(9260),L=(C(11472),C(26531),C(22490)),B=C(40445),z=(C(12236),C(46735),C(17626)),ae=C(7093),K=C(58817),V=C(77712),P=C(55342),F=C(76898),$=C(39368);const H=ae.Z.ofType({base:null,key:"type",typeMap:{fill:oe.Z}});let de=J=class extends $.Z{constructor(at){super(at),this.symbolLayers=new H,this.type="mesh-3d"}clone(){return new J({styleOrigin:(0,K.d9)(this.styleOrigin),symbolLayers:(0,K.d9)(this.symbolLayers),thumbnail:(0,K.d9)(this.thumbnail)})}};(0,z._)([(0,V.Cb)({type:H})],de.prototype,"symbolLayers",void 0),(0,z._)([(0,P.J)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],de.prototype,"type",void 0),de=J=(0,z._)([(0,F.j)("esri.symbols.MeshSymbol3D")],de);const ee=de;C(2066),C(69147);var Q,ge=C(23841),se=C(69738);let pe=Q=class extends te.Z{constructor(...at){super(...at),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(at,Mt,Pt,Vt){if(at&&"string"!=typeof at&&null==at.imageData)return at;const Zt={};return at&&(Zt.url=at),Mt&&(Zt.outline=Mt),null!=Pt&&(Zt.width=(0,ge.t_)(Pt)),null!=Vt&&(Zt.height=(0,ge.t_)(Vt)),Zt}clone(){const at=new Q({color:(0,K.d9)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return at._set("source",(0,K.d9)(this.source)),at}hash(){var at;return`${super.hash()}.${null==(at=this.color)?void 0:at.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};(0,z._)([(0,P.J)({esriPFS:"picture-fill"},{readOnly:!0})],pe.prototype,"type",void 0),(0,z._)([(0,V.Cb)(se.KA)],pe.prototype,"url",void 0),(0,z._)([(0,V.Cb)({type:Number,json:{write:!0}})],pe.prototype,"xscale",void 0),(0,z._)([(0,V.Cb)({type:Number,json:{write:!0}})],pe.prototype,"yscale",void 0),(0,z._)([(0,V.Cb)({type:Number,cast:ge.t_,json:{write:!0}})],pe.prototype,"width",void 0),(0,z._)([(0,V.Cb)({type:Number,cast:ge.t_,json:{write:!0}})],pe.prototype,"height",void 0),(0,z._)([(0,V.Cb)({type:Number,cast:ge.t_,json:{write:!0}})],pe.prototype,"xoffset",void 0),(0,z._)([(0,V.Cb)({type:Number,cast:ge.t_,json:{write:!0}})],pe.prototype,"yoffset",void 0),(0,z._)([(0,V.Cb)(se.Ds)],pe.prototype,"source",void 0),pe=Q=(0,z._)([(0,F.j)("esri.symbols.PictureFillSymbol")],pe);const ue=pe;var me=C(13546),ve=C(69852),fe=C(89673),Me=C(88493),ce=C(52068),he=C(57213),De=C(10012),Pe=(C(97665),C(35540)),Le=(C(37771),C(72622),C(12874));function Ae(at){if(!at)return!1;switch(at.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Qe(at){if(!at)return!1;switch(at.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}C(17497),C(71530),C(97595);const Je={base:De.Z,key:"type",typeMap:{"simple-fill":Me.Z,"picture-fill":ue,"picture-marker":me.Z,"simple-line":ce.Z,"simple-marker":he.Z,text:Pe.Z,"label-3d":L.Z,"line-3d":B.Z,"mesh-3d":ee,"point-3d":ve.Z,"polygon-3d":fe.Z,"web-style":Le.Z,cim:ne.Z},errorContext:"symbol"},re={base:De.Z,key:"type",typeMap:{"picture-marker":me.Z,"simple-marker":he.Z,text:Pe.Z,"web-style":Le.Z,cim:ne.Z},errorContext:"symbol"},Ee=(0,T.d)({types:Je}),$e={base:De.Z,key:"type",typeMap:{"simple-fill":Me.Z,"picture-fill":ue,"picture-marker":me.Z,"simple-line":ce.Z,"simple-marker":he.Z,text:Pe.Z,"line-3d":B.Z,"mesh-3d":ee,"point-3d":ve.Z,"polygon-3d":fe.Z,"web-style":Le.Z,cim:ne.Z},errorContext:"symbol"},tt={base:De.Z,key:"type",typeMap:{text:Pe.Z,"label-3d":L.Z},errorContext:"symbol"},mt={base:De.Z,key:"type",typeMap:{"line-3d":B.Z,"mesh-3d":ee,"point-3d":ve.Z,"polygon-3d":fe.Z,"web-style":Le.Z,cim:ne.Z},errorContext:"symbol"},bt={base:De.Z,key:"type",typeMap:{"label-3d":L.Z},errorContext:"symbol"},yt=(0,x.N7)(Je)},94398:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var z,x=C(15861),T=C(17626),ne=C(58817),ie=C(77275),te=C(77712),Y=(C(90912),C(55342)),j=C(68653),L=C(76898),B=C(99433),X=C(36630),Z=C(10012);let ae=z=class extends Z.Z{constructor(V){super(V),this.data=null,this.type="cim"}readData(V,P){return P}writeData(V,P){if(V)for(const F in V)P[F]=V[F]}collectRequiredFields(V,P){var F=this;return(0,x.Z)(function*(){if("CIMSymbolReference"===F.data.type){const $=F.data.primitiveOverrides;if($){const J=$.map(H=>(0,X.io)(V,P,H.valueExpressionInfo.expression));yield Promise.all(J)}}})()}clone(){return new z({data:(0,ne.d9)(this.data)})}hash(){return(0,ie.hP)(JSON.stringify(this.data)).toString()}};(0,T._)([(0,te.Cb)({json:{write:!1}})],ae.prototype,"color",void 0),(0,T._)([(0,te.Cb)({json:{write:!0}})],ae.prototype,"data",void 0),(0,T._)([(0,j.r)("data",["symbol"])],ae.prototype,"readData",null),(0,T._)([(0,B.c)("data",{})],ae.prototype,"writeData",null),(0,T._)([(0,Y.J)({CIMSymbolReference:"cim"},{readOnly:!0})],ae.prototype,"type",void 0),ae=z=(0,T._)([(0,L.j)("esri.symbols.CIMSymbol")],ae);const K=ae},65499:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ae});var Z,x=C(17626),T=C(62208),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(55342)),j=C(76898),L=C(97665),B=C(89441),X=C(64830);let z=Z=class extends L.Z{constructor(K){super(K),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Z({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:(0,T.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};(0,x._)([(0,Y.J)({Extrude:"extrude"},{readOnly:!0})],z.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],z.prototype,"size",void 0),(0,x._)([(0,ne.Cb)({type:X.Z,json:{write:!0}})],z.prototype,"material",void 0),(0,x._)([(0,ne.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],z.prototype,"castShadows",void 0),(0,x._)([(0,ne.Cb)(B.Z)],z.prototype,"edges",void 0),z=Z=(0,x._)([(0,j.j)("esri.symbols.ExtrudeSymbol3DLayer")],z);const ae=z},48575:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(52068),j=C(10012);let L=class extends j.Z{constructor(X){super(X),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};(0,x._)([(0,T.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Y.Z}},json:{default:null,write:!0}})],L.prototype,"outline",void 0),(0,x._)([(0,T.Cb)({type:["simple-fill","picture-fill"],readOnly:!0})],L.prototype,"type",void 0),L=(0,x._)([(0,oe.j)("esri.symbols.FillSymbol")],L);const B=L},9260:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>me});var F,x=C(17626),T=C(62208),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(55342)),j=C(76898),L=C(97665),B=C(89441),X=C(63743),Z=C(153),z=C(99255),ae=C(12948),P=(C(63290),C(82255),C(64830));let $=F=class extends P.b{constructor(ve){super(ve),this.colorMixMode=null}clone(){const ve={color:(0,T.pC)(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new F(ve)}};(0,x._)([(0,Y.J)({multiply:"multiply",replace:"replace",tint:"tint"})],$.prototype,"colorMixMode",void 0),$=F=(0,x._)([(0,j.j)("esri.symbols.support.Symbol3DFillMaterial")],$);var ge,H=C(91558),de=C(86162),ee=C(23841),ye=C(60958),le=C(43652);let se=ge=class extends de.wq{constructor(ve){super(ve),this.color=new H.Z([0,0,0,1]),this.size=(0,ee.Wz)(1),this.pattern=null,this.patternCap="butt"}clone(){const ve={color:(0,T.pC)(this.color)?this.color.clone():null,size:this.size,pattern:(0,T.pC)(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new ge(ve)}};(0,x._)([(0,ne.Cb)(ye.a)],se.prototype,"color",void 0),(0,x._)([(0,ne.Cb)(ye.y)],se.prototype,"size",void 0),(0,x._)([(0,ne.Cb)(z.D)],se.prototype,"pattern",void 0),(0,x._)([(0,ne.Cb)({type:le.Hc,json:{default:"butt",write:{overridePolicy(){return{enabled:(0,T.pC)(this.pattern)}}}}})],se.prototype,"patternCap",void 0),se=ge=(0,x._)([(0,j.j)("esri.symbols.support.Symbol3DOutline")],se);const Q=se;var pe;let ue=pe=class extends L.Z{constructor(ve){super(ve),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const ve={edges:(0,T.pC)(this.edges)?this.edges.clone():null,enabled:this.enabled,material:(0,T.pC)(this.material)?this.material.clone():null,pattern:(0,T.pC)(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:(0,T.pC)(this.outline)?this.outline.clone():null};return new pe(ve)}static fromSimpleFillSymbol(ve){var fe,Me,ce,he,De,xe;const Pe=ve.outline&&ve.outline.style&&"inside-frame"!==ve.outline.style&&"solid"!==ve.outline.style?new X.Z({style:ve.outline.style}):null,je={size:null!=(fe=null==(Me=ve.outline)?void 0:Me.width)?fe:0,color:(null!=(ce=null==(he=ve.outline)?void 0:he.color)?ce:ae.ix).clone(),pattern:Pe};return Pe&&null!=(De=ve.outline)&&De.cap&&(je.patternCap=ve.outline.cap),new pe({material:new $({color:(null!=(xe=ve.color)?xe:ae.l9).clone()}),pattern:ve.style&&"solid"!==ve.style?new Z.Z({style:ve.style}):null,outline:je})}};(0,x._)([(0,Y.J)({Fill:"fill"},{readOnly:!0})],ue.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({type:$,json:{write:!0}})],ue.prototype,"material",void 0),(0,x._)([(0,ne.Cb)(z.q)],ue.prototype,"pattern",void 0),(0,x._)([(0,ne.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ue.prototype,"castShadows",void 0),(0,x._)([(0,ne.Cb)({type:Q,json:{write:!0}})],ue.prototype,"outline",void 0),(0,x._)([(0,ne.Cb)(B.Z)],ue.prototype,"edges",void 0),ue=pe=(0,x._)([(0,j.j)("esri.symbols.FillSymbol3DLayer")],ue);const me=ue},11472:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(86162),ne=C(23841),ie=C(77712),Y=(C(85931),C(8314),C(66656)),j=C(76898);let B=L=class extends T.wq{constructor(Z){super(Z),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(Z){return(0,ne.t_)(Z)}clone(){return new L({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};(0,x._)([(0,ie.Cb)({type:["underline","line-through","none"],json:{default:"none",write:!0}})],B.prototype,"decoration",void 0),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],B.prototype,"family",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:{overridePolicy:(Z,z,ae)=>({enabled:!ae||!ae.textSymbol3D})}}})],B.prototype,"size",void 0),(0,x._)([(0,Y.p)("size")],B.prototype,"castSize",null),(0,x._)([(0,ie.Cb)({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],B.prototype,"style",void 0),(0,x._)([(0,ie.Cb)({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],B.prototype,"weight",void 0),B=L=(0,x._)([(0,j.j)("esri.symbols.Font")],B);const X=B},26531:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ue});var $,x=C(17626),T=C(63290),ne=C(62208),ie=C(21726),te=C(77712),L=(C(85931),C(8314),C(90912),C(55342)),B=C(76898),X=C(97665),Z=C(12948),z=C(33215),ae=C(60958),K=C(37519),V=C(91558),P=C(86162),F=C(23841);let J=$=class extends P.wq{constructor(me){super(me),this.color=new V.Z([0,0,0,1]),this.size=(0,F.Wz)(1)}clone(){const me={color:(0,ne.pC)(this.color)?this.color.clone():null,size:this.size};return new $(me)}};(0,x._)([(0,te.Cb)(ae.a)],J.prototype,"color",void 0),(0,x._)([(0,te.Cb)(ae.y)],J.prototype,"size",void 0),J=$=(0,x._)([(0,B.j)("esri.symbols.support.Symbol3DIconOutline")],J);const H=J;var ee,de=C(64830);const ye=T.Z.getLogger("esri.symbols.IconSymbol3DLayer");let le=ee=class extends X.Z{constructor(me){super(me),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new ee({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:(0,ne.pC)(this.material)?this.material.clone():null,outline:(0,ne.pC)(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(me){const ve=me.color||Z.ix,fe=ge(me),Me=me.outline&&me.outline.width>0?{size:me.outline.width,color:(me.outline.color||Z.ix).clone()}:null;return new ee({size:me.size,resource:{primitive:pe(me.style)},material:{color:ve},outline:Me,anchor:fe?"relative":void 0,anchorPosition:fe})}static fromPictureMarkerSymbol(me){const ve=!me.color||(0,Z.rx)(me.color)?Z.ix:me.color,fe=ge(me);return new ee({size:me.width<=me.height?me.height:me.width,resource:{href:me.url},material:{color:ve.clone()},anchor:fe?"relative":void 0,anchorPosition:fe})}static fromCIMSymbol(me){return new ee({resource:{href:(0,ie._l)({mediaType:"application/json",data:JSON.stringify(me.data)})}})}};function ge(me){const ve="width"in me?me.width:me.size,fe="height"in me?me.height:me.size,Me=se(me.xoffset),ce=se(me.yoffset);return(Me||ce)&&ve&&fe?{x:-Me/ve,y:ce/fe}:null}function se(me){return isFinite(me)?me:0}(0,x._)([(0,te.Cb)({type:de.Z,json:{write:!0}})],le.prototype,"material",void 0),(0,x._)([(0,te.Cb)({type:z.ZP,json:{write:!0}})],le.prototype,"resource",void 0),(0,x._)([(0,L.J)({Icon:"icon"},{readOnly:!0})],le.prototype,"type",void 0),(0,x._)([(0,te.Cb)(ae.y)],le.prototype,"size",void 0),(0,x._)([(0,L.J)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),(0,te.Cb)({json:{default:"center"}})],le.prototype,"anchor",void 0),(0,x._)([(0,te.Cb)({type:K.e,json:{type:[Number],read:{reader:me=>new K.e({x:me[0],y:me[1]})},write:{writer:(me,ve)=>{ve.anchorPosition=[me.x,me.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],le.prototype,"anchorPosition",void 0),(0,x._)([(0,te.Cb)({type:H,json:{write:!0}})],le.prototype,"outline",void 0),le=ee=(0,x._)([(0,B.j)("esri.symbols.IconSymbol3DLayer")],le);const Q={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function pe(me){return Q[me]||(ye.warn(`${me} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const ue=le},22490:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var Z,x=C(17626),T=C(7093),ne=C(58817),ie=C(77712),oe=(C(90912),C(55342)),Y=C(76898),j=C(39368),L=C(37771),B=C(9824),X=C(97595);const z=T.Z.ofType({base:null,key:"type",typeMap:{text:L.Z}});let ae=Z=class extends j.Z{constructor(V){super(V),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new z,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return(0,B.gv)(this)}hasVisibleVerticalOffset(){return(0,B.Uy)(this)}clone(){return new Z({styleOrigin:(0,ne.d9)(this.styleOrigin),symbolLayers:(0,ne.d9)(this.symbolLayers),thumbnail:(0,ne.d9)(this.thumbnail),callout:(0,ne.d9)(this.callout),verticalOffset:(0,ne.d9)(this.verticalOffset)})}static fromTextSymbol(V){return new Z({symbolLayers:[L.Z.fromTextSymbol(V)]})}};(0,x._)([(0,ie.Cb)({type:X.Z,json:{write:!0}})],ae.prototype,"verticalOffset",void 0),(0,x._)([(0,ie.Cb)(B.Y2)],ae.prototype,"callout",void 0),(0,x._)([(0,ie.Cb)({json:{read:!1,write:!1}})],ae.prototype,"styleOrigin",void 0),(0,x._)([(0,ie.Cb)({type:z})],ae.prototype,"symbolLayers",void 0),(0,x._)([(0,oe.J)({LabelSymbol3D:"label-3d"},{readOnly:!0})],ae.prototype,"type",void 0),ae=Z=(0,x._)([(0,Y.j)("esri.symbols.LabelSymbol3D")],ae);const K=ae},40445:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var X,x=C(17626),T=C(7093),ne=C(58817),ie=C(77712),oe=(C(90912),C(55342)),Y=C(76898),j=C(12236),L=C(69147),B=C(39368);const Z=T.Z.ofType({base:null,key:"type",typeMap:{line:j.Z,path:L.Z}}),z=T.Z.ofType({base:null,key:"type",typeMap:{line:j.Z,path:L.Z}});let ae=X=class extends B.Z{constructor(V){super(V),this.symbolLayers=new Z,this.type="line-3d"}clone(){return new X({styleOrigin:(0,ne.d9)(this.styleOrigin),symbolLayers:(0,ne.d9)(this.symbolLayers),thumbnail:(0,ne.d9)(this.thumbnail)})}static fromSimpleLineSymbol(V){return new X({symbolLayers:[j.Z.fromSimpleLineSymbol(V)]})}};(0,x._)([(0,ie.Cb)({type:Z,json:{type:z}})],ae.prototype,"symbolLayers",void 0),(0,x._)([(0,oe.J)({LineSymbol3D:"line-3d"},{readOnly:!0})],ae.prototype,"type",void 0),ae=X=(0,x._)([(0,Y.j)("esri.symbols.LineSymbol3D")],ae);const K=ae},12236:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>$});var P,x=C(17626),T=C(62208),ne=C(23841),ie=C(77712),j=(C(85931),C(8314),C(90912),C(55342)),L=C(76898),B=C(97665),X=C(63743),Z=C(99255),z=C(12948),ae=C(60958),K=C(64830),V=C(43652);let F=P=class extends B.Z{constructor(J){super(J),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=(0,ne.Wz)(1),this.pattern=null}clone(){const J={enabled:this.enabled,material:(0,T.pC)(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:(0,T.pC)(this.pattern)?this.pattern.clone():null};return new P(J)}static fromSimpleLineSymbol(J){const H={enabled:!0,size:J.width||1,cap:J.cap||"butt",join:J.join||"miter",pattern:J.style&&"inside-frame"!==J.style?new X.Z({style:J.style}):null,material:new K.b({color:(J.color||z.ix).clone()})};return new P(H)}};(0,x._)([(0,ie.Cb)({type:K.b,json:{write:!0}})],F.prototype,"material",void 0),(0,x._)([(0,j.J)({Line:"line"},{readOnly:!0})],F.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:V.w2,json:{write:!0,default:"miter"}})],F.prototype,"join",void 0),(0,x._)([(0,ie.Cb)({type:V.Hc,json:{write:!0,default:"butt"}})],F.prototype,"cap",void 0),(0,x._)([(0,ie.Cb)(ae.y)],F.prototype,"size",void 0),(0,x._)([(0,ie.Cb)(Z.D)],F.prototype,"pattern",void 0),F=P=(0,x._)([(0,L.j)("esri.symbols.LineSymbol3DLayer")],F);const $=F},46735:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var x=C(17626),T=C(23841),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(10012);let L=class extends j.Z{constructor(X){super(X),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};(0,x._)([(0,ne.Cb)({type:Number,json:{read:X=>X&&-1*X,write:(X,Z)=>Z.angle=X&&-1*X}})],L.prototype,"angle",void 0),(0,x._)([(0,ne.Cb)({type:["simple-marker","picture-marker"],readOnly:!0})],L.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({type:Number,cast:T.t_,json:{write:!0}})],L.prototype,"xoffset",void 0),(0,x._)([(0,ne.Cb)({type:Number,cast:T.t_,json:{write:!0}})],L.prototype,"yoffset",void 0),(0,x._)([(0,ne.Cb)({type:Number,cast:X=>"auto"===X?X:(0,T.t_)(X),json:{write:!0}})],L.prototype,"size",void 0),L=(0,x._)([(0,Y.j)("esri.symbols.MarkerSymbol")],L);const B=L},2066:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>F});var Z,x=C(17626),T=C(62208),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(55342)),j=C(76898),L=C(97665),B=C(48521),X=C(14517);let z=Z=class extends X.Z{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new Z({x:this.x,y:this.y,z:this.z})}};(0,x._)([(0,ne.Cb)({type:Number})],z.prototype,"x",void 0),(0,x._)([(0,ne.Cb)({type:Number})],z.prototype,"y",void 0),(0,x._)([(0,ne.Cb)({type:Number})],z.prototype,"z",void 0),z=Z=(0,x._)([(0,j.j)("esri.symbols.support.Symbol3DAnchorPosition3D")],z);var V,K=C(64830);let P=V=class extends L.Z{constructor($){super($),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new V({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:(0,T.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};(0,x._)([(0,ne.Cb)({type:K.Z,json:{write:!0}})],P.prototype,"material",void 0),(0,x._)([(0,ne.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],P.prototype,"castShadows",void 0),(0,x._)([(0,ne.Cb)({type:B.ZP,json:{write:!0}})],P.prototype,"resource",void 0),(0,x._)([(0,Y.J)({Object:"object"},{readOnly:!0})],P.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],P.prototype,"width",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],P.prototype,"height",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],P.prototype,"depth",void 0),(0,x._)([(0,Y.J)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),(0,ne.Cb)({json:{default:"origin"}})],P.prototype,"anchor",void 0),(0,x._)([(0,ne.Cb)({type:z,json:{type:[Number],read:{reader:$=>new z({x:$[0],y:$[1],z:$[2]})},write:{writer:($,J)=>{J.anchorPosition=[$.x,$.y,$.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],P.prototype,"anchorPosition",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],P.prototype,"heading",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],P.prototype,"tilt",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],P.prototype,"roll",void 0),(0,x._)([(0,ne.Cb)({readOnly:!0})],P.prototype,"isPrimitive",null),P=V=(0,x._)([(0,j.j)("esri.symbols.ObjectSymbol3DLayer")],P);const F=P},69147:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var z,x=C(17626),T=C(62208),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(55342)),j=C(68653),L=C(76898),B=C(97665),X=C(64830),Z=C(43652);let ae=z=class extends B.Z{constructor(V){super(V),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(V,P){return null!=V?V:null==P.height&&null!=P.size?P.size:void 0}readHeight(V,P){return null!=V?V:null==P.width&&null!=P.size?P.size:void 0}clone(){return new z({enabled:this.enabled,material:(0,T.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};(0,x._)([(0,ne.Cb)({type:X.Z,json:{write:!0}})],ae.prototype,"material",void 0),(0,x._)([(0,ne.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ae.prototype,"castShadows",void 0),(0,x._)([(0,Y.J)({Path:"path"},{readOnly:!0})],ae.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({type:["circle","quad"],json:{write:!0,default:"circle"}})],ae.prototype,"profile",void 0),(0,x._)([(0,ne.Cb)({type:Z.w2,json:{write:!0,default:"miter"}})],ae.prototype,"join",void 0),(0,x._)([(0,ne.Cb)({type:Z.KW,json:{write:!0,default:"butt"}})],ae.prototype,"cap",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ae.prototype,"width",void 0),(0,x._)([(0,j.r)("width",["width","size","height"])],ae.prototype,"readWidth",null),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],ae.prototype,"height",void 0),(0,x._)([(0,j.r)("height",["height","size","width"])],ae.prototype,"readHeight",null),(0,x._)([(0,ne.Cb)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],ae.prototype,"anchor",void 0),(0,x._)([(0,ne.Cb)({type:["heading","all"],json:{write:!0,default:"all"}})],ae.prototype,"profileRotation",void 0),ae=z=(0,x._)([(0,L.j)("esri.symbols.PathSymbol3DLayer")],ae);const K=ae},13546:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>z});var X,x=C(17626),T=C(58817),ne=C(23841),ie=C(77712),oe=(C(90912),C(55342)),Y=C(68653),j=C(76898),L=C(46735),B=C(69738);let Z=X=class extends L.Z{constructor(...ae){super(...ae),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(ae,K,V){if(ae&&"string"!=typeof ae&&null==ae.imageData)return ae;const P={};return ae&&(P.url=ae),null!=K&&(P.width=(0,ne.t_)(K)),null!=V&&(P.height=(0,ne.t_)(V)),P}readHeight(ae,K){return K.size||ae}readWidth(ae,K){return K.size||ae}clone(){const ae=new X({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return ae._set("source",(0,T.d9)(this.source)),ae}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,x._)([(0,ie.Cb)({json:{write:!1}})],Z.prototype,"color",void 0),(0,x._)([(0,oe.J)({esriPMS:"picture-marker"},{readOnly:!0})],Z.prototype,"type",void 0),(0,x._)([(0,ie.Cb)(B.KA)],Z.prototype,"url",void 0),(0,x._)([(0,ie.Cb)(B.Ds)],Z.prototype,"source",void 0),(0,x._)([(0,ie.Cb)({type:Number,cast:ne.t_,json:{write:!0}})],Z.prototype,"height",void 0),(0,x._)([(0,Y.r)("height",["height","size"])],Z.prototype,"readHeight",null),(0,x._)([(0,ie.Cb)({type:Number,cast:ne.t_,json:{write:!0}})],Z.prototype,"width",void 0),(0,x._)([(0,ie.Cb)({json:{write:!1}})],Z.prototype,"size",void 0),Z=X=(0,x._)([(0,j.j)("esri.symbols.PictureMarkerSymbol")],Z);const z=Z},69852:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>J});var V,x=C(17626),T=C(7093),ne=C(26584),ie=C(58817),te=C(77712),Y=(C(90912),C(55342)),j=C(76898),L=C(99433),B=C(26531),X=C(2066),Z=C(39368),z=C(37771),ae=C(9824),K=C(97595);const P=T.Z.ofType({base:null,key:"type",typeMap:{icon:B.Z,object:X.Z,text:z.Z}}),F=T.Z.ofType({base:null,key:"type",typeMap:{icon:B.Z,object:X.Z}});let $=V=class extends Z.Z{constructor(H){super(H),this.verticalOffset=null,this.callout=null,this.symbolLayers=new P,this.type="point-3d"}writeSymbolLayers(H,de,ee,ye){const le=H.filter(ge=>"text"!==ge.type);if(ye&&ye.messages&&le.length<H.length){const ge=H.find(se=>"text"===se.type);ye.messages.push(new ne.Z("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:ge}))}de[ee]=le.map(ge=>ge.write({},ye)).toArray()}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const H of this.symbolLayers.items)switch(H.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return(0,ae.gv)(this)}hasVisibleVerticalOffset(){return(0,ae.Uy)(this)}clone(){return new V({verticalOffset:(0,ie.d9)(this.verticalOffset),callout:(0,ie.d9)(this.callout),styleOrigin:(0,ie.d9)(this.styleOrigin),symbolLayers:(0,ie.d9)(this.symbolLayers),thumbnail:(0,ie.d9)(this.thumbnail)})}static fromSimpleMarkerSymbol(H){return new V({symbolLayers:[B.Z.fromSimpleMarkerSymbol(H)]})}static fromPictureMarkerSymbol(H){return new V({symbolLayers:[B.Z.fromPictureMarkerSymbol(H)]})}static fromCIMSymbol(H){var de,ee;return"CIMPointSymbol"!==(null==(de=H.data)||null==(ee=de.symbol)?void 0:ee.type)?null:new V(H.data.symbol.callout?{symbolLayers:[B.Z.fromCIMSymbol(H)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[B.Z.fromCIMSymbol(H)]})}static fromTextSymbol(H){return new V({symbolLayers:[z.Z.fromTextSymbol(H)]})}};(0,x._)([(0,te.Cb)({type:K.Z,json:{write:!0}})],$.prototype,"verticalOffset",void 0),(0,x._)([(0,te.Cb)(ae.Y2)],$.prototype,"callout",void 0),(0,x._)([(0,te.Cb)({type:P,json:{type:F,origins:{"web-scene":{type:F}}}})],$.prototype,"symbolLayers",void 0),(0,x._)([(0,L.c)("web-scene","symbolLayers")],$.prototype,"writeSymbolLayers",null),(0,x._)([(0,Y.J)({PointSymbol3D:"point-3d"},{readOnly:!0})],$.prototype,"type",void 0),$=V=(0,x._)([(0,j.j)("esri.symbols.PointSymbol3D")],$);const J=$},89673:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ee});var $,x=C(17626),T=C(7093),ne=C(26584),ie=C(58817),te=C(62208),oe=C(77712),j=(C(90912),C(55342)),L=C(76898),B=C(99433),X=C(65499),Z=C(9260),z=C(26531),ae=C(12236),K=C(2066),V=C(39368),P=C(37771),F=C(72622);const J=T.Z.ofType({base:null,key:"type",typeMap:{extrude:X.Z,fill:Z.Z,icon:z.Z,line:ae.Z,object:K.Z,text:P.Z,water:F.Z}}),H=T.Z.ofType({base:null,key:"type",typeMap:{extrude:X.Z,fill:Z.Z,icon:z.Z,line:ae.Z,object:K.Z,water:F.Z}});let de=$=class extends V.Z{constructor(ye){super(ye),this.symbolLayers=new J,this.type="polygon-3d"}writeSymbolLayers(ye,le,ge,se){const Q=ye.filter(pe=>"text"!==pe.type);if(se&&se.messages&&Q.length<ye.length){const pe=ye.find(ue=>"text"===ue.type);se.messages.push(new ne.Z("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:pe}))}le[ge]=Q.map(pe=>pe.write({},se)).toArray()}clone(){return new $({styleOrigin:(0,ie.d9)(this.styleOrigin),symbolLayers:(0,ie.d9)(this.symbolLayers),thumbnail:(0,ie.d9)(this.thumbnail)})}static fromJSON(ye){const le=new $;if(le.read(ye),2===le.symbolLayers.length&&"fill"===le.symbolLayers.getItemAt(0).type&&"line"===le.symbolLayers.getItemAt(1).type){const ge=le.symbolLayers.getItemAt(0),se=le.symbolLayers.getItemAt(1);!se.enabled||ye.symbolLayers&&ye.symbolLayers[1]&&!1===ye.symbolLayers[1].enable||(ge.outline={size:se.size,color:(0,te.pC)(se.material)?se.material.color:null}),le.symbolLayers.removeAt(1)}return le}static fromSimpleFillSymbol(ye){return new $({symbolLayers:[Z.Z.fromSimpleFillSymbol(ye)]})}};(0,x._)([(0,oe.Cb)({type:J,json:{type:H}})],de.prototype,"symbolLayers",void 0),(0,x._)([(0,B.c)("web-scene","symbolLayers")],de.prototype,"writeSymbolLayers",null),(0,x._)([(0,j.J)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],de.prototype,"type",void 0),de=$=(0,x._)([(0,L.j)("esri.symbols.PolygonSymbol3D")],de);const ee=de},88493:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ae});var X,x=C(17626),T=C(91558),ne=C(2076),ie=C(58817),te=C(77712),Y=(C(90912),C(55342)),j=C(76898),L=C(48575),B=C(52068);const Z=new ne.Xn({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let z=X=class extends L.Z{constructor(...K){super(...K),this.color=new T.Z([0,0,0,.25]),this.outline=new B.Z,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(K,V,P){if(K&&"string"!=typeof K)return K;const F={};return K&&(F.style=K),V&&(F.outline=V),P&&(F.color=P),F}clone(){return new X({color:(0,ie.d9)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};(0,x._)([(0,te.Cb)()],z.prototype,"color",void 0),(0,x._)([(0,te.Cb)()],z.prototype,"outline",void 0),(0,x._)([(0,Y.J)({esriSFS:"simple-fill"},{readOnly:!0})],z.prototype,"type",void 0),(0,x._)([(0,te.Cb)({type:Z.apiValues,json:{read:Z.read,write:Z.write}})],z.prototype,"style",void 0),z=X=(0,x._)([(0,j.j)("esri.symbols.SimpleFillSymbol")],z);const ae=z},52068:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ye});var x=C(17626),T=C(2076),ne=C(58817),ie=C(23841),te=C(77712),Y=(C(90912),C(55342)),j=C(76898),X=(C(85931),C(8314),C(10012));let Z=class extends X.Z{constructor(le){super(le),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};(0,x._)([(0,Y.J)({esriSLS:"simple-line"},{readOnly:!0})],Z.prototype,"type",void 0),(0,x._)([(0,te.Cb)({type:Number,cast:ie.t_,json:{write:!0}})],Z.prototype,"width",void 0),Z=(0,x._)([(0,j.j)("esri.symbols.LineSymbol")],Z);const z=Z;var F,ae=C(91558),K=C(86162),V=C(68653),P=C(99433);let $=F=class extends K.wq{constructor(le){super(le),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(le,ge,se,Q){ge[se]="web-map"===(null==Q?void 0:Q.origin)?"arrow":le}set color(le){this._set("color",le)}readColor(le){return le&&null!=le[0]?[le[0],le[1],le[2],le[3]/255]:le}writeColor(le,ge,se,Q){"web-map"===(null==Q?void 0:Q.origin)||(ge[se]=le)}clone(){return new F({color:(0,ne.d9)(this.color),placement:this.placement,style:this.style})}hash(){var le;return`${this.placement}.${null==(le=this.color)?void 0:le.hash()}.${this.style}`}};(0,x._)([(0,te.Cb)({type:["begin","end","begin-end"],json:{write:!0}})],$.prototype,"placement",void 0),(0,x._)([(0,Y.J)({"line-marker":"line-marker"},{readOnly:!0}),(0,te.Cb)({json:{origins:{"web-map":{write:!1}}}})],$.prototype,"type",void 0),(0,x._)([(0,te.Cb)({type:["arrow","circle","square","diamond","cross","x"]})],$.prototype,"style",void 0),(0,x._)([(0,P.c)("style")],$.prototype,"writeStyle",null),(0,x._)([(0,te.Cb)({type:ae.Z,value:null,json:{write:{allowNull:!0}}})],$.prototype,"color",null),(0,x._)([(0,V.r)("color")],$.prototype,"readColor",null),(0,x._)([(0,P.c)("color")],$.prototype,"writeColor",null),$=F=(0,x._)([(0,j.j)("esri.symbols.LineSymbolMarker")],$);const J=$;var H;const de=new T.Xn({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ee=H=class extends z{constructor(...le){super(...le),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(le,ge,se,Q,pe,ue){if(le&&"string"!=typeof le)return le;const me={};return null!=le&&(me.style=le),null!=ge&&(me.color=ge),null!=se&&(me.width=(0,ie.t_)(se)),null!=Q&&(me.cap=Q),null!=pe&&(me.join=pe),null!=ue&&(me.miterLimit=(0,ie.t_)(ue)),me}clone(){var le;return new H({color:(0,ne.d9)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(le=this.marker)?void 0:le.clone()})}hash(){var le,ge;return`${super.hash()}.${null==(le=this.color)?void 0:le.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(ge=this.marker)?void 0:ge.hash()}`}};(0,x._)([(0,Y.J)({esriSLS:"simple-line"},{readOnly:!0})],ee.prototype,"type",void 0),(0,x._)([(0,te.Cb)({type:de.apiValues,json:{read:de.read,write:de.write}})],ee.prototype,"style",void 0),(0,x._)([(0,te.Cb)({type:["butt","round","square"],json:{write:{overridePolicy:(le,ge,se)=>({enabled:"round"!==le&&(null==se||null==se.origin)})}}})],ee.prototype,"cap",void 0),(0,x._)([(0,te.Cb)({type:["miter","round","bevel"],json:{write:{overridePolicy:(le,ge,se)=>({enabled:"round"!==le&&(null==se||null==se.origin)})}}})],ee.prototype,"join",void 0),(0,x._)([(0,te.Cb)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":J}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ee.prototype,"marker",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{read:!1,write:!1}})],ee.prototype,"miterLimit",void 0),ee=H=(0,x._)([(0,j.j)("esri.symbols.SimpleLineSymbol")],ee);const ye=ee},57213:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>V});var z,x=C(17626),T=C(91558),ne=C(2076),ie=C(58817),te=C(23841),oe=C(77712),j=(C(90912),C(55342)),L=C(76898),B=C(99433),X=C(46735),Z=C(52068);const ae=new ne.Xn({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let K=z=class extends X.Z{constructor(...P){super(...P),this.color=new T.Z([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Z.Z}normalizeCtorArgs(P,F,$,J){if(P&&"string"!=typeof P)return P;const H={};return P&&(H.style=P),null!=F&&(H.size=(0,te.t_)(F)),$&&(H.outline=$),J&&(H.color=J),H}writeColor(P,F){P&&"x"!==this.style&&"cross"!==this.style&&(F.color=P.toJSON()),null===P&&(F.color=null)}set path(P){this.style="path",this._set("path",P)}clone(){return new z({angle:this.angle,color:(0,ie.d9)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var P;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(P=this.outline)?void 0:P.hash()}`}};(0,x._)([(0,oe.Cb)()],K.prototype,"color",void 0),(0,x._)([(0,B.c)("color")],K.prototype,"writeColor",null),(0,x._)([(0,j.J)({esriSMS:"simple-marker"},{readOnly:!0})],K.prototype,"type",void 0),(0,x._)([(0,oe.Cb)()],K.prototype,"size",void 0),(0,x._)([(0,oe.Cb)({type:ae.apiValues,json:{read:ae.read,write:ae.write}})],K.prototype,"style",void 0),(0,x._)([(0,oe.Cb)({type:String,json:{write:!0}})],K.prototype,"path",null),(0,x._)([(0,oe.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Z.Z}},json:{default:null,write:!0}})],K.prototype,"outline",void 0),K=z=(0,x._)([(0,L.j)("esri.symbols.SimpleMarkerSymbol")],K);const V=K},10012:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var x=C(15861),T=C(17626),ne=C(91558),ie=C(2076),te=C(86162),oe=C(77712),B=(C(85931),C(8314),C(90912),C(68653)),X=C(76898);const Z=new ie.Xn({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let z=0,ae=class extends te.wq{constructor(V){super(V),this.id="sym"+z++,this.type=null}set color(V){this._set("color",V)}readColor(V){return V&&null!=V[0]?[V[0],V[1],V[2],V[3]/255]:V}collectRequiredFields(V,P){return(0,x.Z)(function*(){})()}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,T._)([(0,oe.Cb)({type:Z.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Z.write}}})],ae.prototype,"type",void 0),(0,T._)([(0,oe.Cb)({type:ne.Z,value:new ne.Z([0,0,0,1]),json:{write:{allowNull:!0}}})],ae.prototype,"color",null),(0,T._)([(0,B.r)("color")],ae.prototype,"readColor",null),ae=(0,T._)([(0,X.j)("esri.symbols.Symbol")],ae);const K=ae},39368:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ve});var x=C(17626),T=C(7093),ne=C(89726),ie=C(63290),te=C(21726),oe=C(14889),Y=C(77712),B=(C(85931),C(8314),C(66656)),X=C(68653),Z=C(76898),z=C(99433),ae=C(84687),K=C(29840),V=C(65499),P=C(9260),F=C(26531),$=C(12236),J=C(2066),H=C(69147),de=C(10012),ee=C(97665),ye=C(37771),le=C(72622),ge=C(77345),se=C(96296);const Q={icon:F.Z,object:J.Z,line:$.Z,path:H.Z,fill:P.Z,extrude:V.Z,text:ye.Z,water:le.Z},pe=T.Z.ofType({base:ee.Z,key:"type",typeMap:Q,errorContext:"symbol-layer"}),ue=ie.Z.getLogger("esri.symbols.Symbol3D");let me=class extends de.Z{constructor(fe){super(fe),this.styleOrigin=null,this.thumbnail=null,this.type=null;const Me=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers;this._set("symbolLayers",new(Me&&Me.type||T.Z))}get color(){return null}set color(fe){ue.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(fe){(0,ne.Z)(fe,this._get("symbolLayers"))}readStyleOrigin(fe,Me,ce){if(fe.styleUrl&&fe.name){const he=(0,K.f)(fe.styleUrl,ce);return new ge.Z({styleUrl:he,name:fe.name})}if(fe.styleName&&fe.name)return new ge.Z({portal:ce&&ce.portal||ae.Z.getDefault(),styleName:fe.styleName,name:fe.name});ce&&ce.messages&&ce.messages.push(new oe.Z("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:ce,definition:fe}))}writeStyleOrigin(fe,Me,ce,he){if(fe.styleUrl&&fe.name){let De=(0,K.t)(fe.styleUrl,he);(0,te.YP)(De)&&(De=(0,te.Fv)(De)),Me.styleOrigin={styleUrl:De,name:fe.name}}else fe.styleName&&fe.name&&(fe.portal&&he&&he.portal&&!(0,te.tm)(fe.portal.restUrl,he.portal.restUrl)?he&&he.messages&&he.messages.push(new oe.Z("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):Me.styleOrigin={styleName:fe.styleName,name:fe.name})}normalizeCtorArgs(fe){return fe instanceof ee.Z||fe&&Q[fe.type]?{symbolLayers:[fe]}:Array.isArray(fe)?{symbolLayers:fe}:fe}};(0,x._)([(0,Y.Cb)({json:{read:!1,write:!1}})],me.prototype,"color",null),(0,x._)([(0,Y.Cb)({type:pe,nonNullable:!0,json:{write:!0}}),(0,B.p)(ne.R)],me.prototype,"symbolLayers",null),(0,x._)([(0,Y.Cb)({type:ge.Z})],me.prototype,"styleOrigin",void 0),(0,x._)([(0,X.r)("styleOrigin")],me.prototype,"readStyleOrigin",null),(0,x._)([(0,z.c)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],me.prototype,"writeStyleOrigin",null),(0,x._)([(0,Y.Cb)({type:se.Z,json:{read:!1}})],me.prototype,"thumbnail",void 0),(0,x._)([(0,Y.Cb)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],me.prototype,"type",void 0),me=(0,x._)([(0,Z.j)("esri.symbols.Symbol3D")],me);const ve=me},97665:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(99433);let L=class extends T.wq{constructor(X){super(X),this.enabled=!0,this.type=null}writeEnabled(X,Z,z){X||(Z[z]=X)}};(0,x._)([(0,ne.Cb)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],L.prototype,"enabled",void 0),(0,x._)([(0,j.c)("enabled")],L.prototype,"writeEnabled",null),(0,x._)([(0,ne.Cb)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],L.prototype,"type",void 0),L=(0,x._)([(0,Y.j)("esri.symbols.Symbol3DLayer")],L);const B=L},35540:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ae});var Z,x=C(17626),T=C(91558),ne=C(58817),ie=C(23841),te=C(77712),oe=C(66656),Y=C(55342),j=C(76898),L=C(99433),B=C(11472),X=C(10012);let z=Z=class extends X.Z{constructor(...K){super(...K),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new B.Z,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment=null,this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(K,V,P){if(K&&"string"!=typeof K)return K;const F={};return K&&(F.text=K),V&&(F.font=V),P&&(F.color=P),F}writeLineWidth(K,V,P,F){F&&"string"!=typeof F||(V[P]=K)}castLineWidth(K){return(0,ie.t_)(K)}writeLineHeight(K,V,P,F){F&&"string"!=typeof F||(V[P]=K)}clone(){return new Z({angle:this.angle,backgroundColor:(0,ne.d9)(this.backgroundColor),borderLineColor:(0,ne.d9)(this.borderLineColor),borderLineSize:this.borderLineSize,color:(0,ne.d9)(this.color),font:this.font&&this.font.clone(),haloColor:(0,ne.d9)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};(0,x._)([(0,te.Cb)({type:T.Z,json:{write:!0}})],z.prototype,"backgroundColor",void 0),(0,x._)([(0,te.Cb)({type:T.Z,json:{write:!0}})],z.prototype,"borderLineColor",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],z.prototype,"borderLineSize",void 0),(0,x._)([(0,te.Cb)({type:B.Z,json:{write:!0}})],z.prototype,"font",void 0),(0,x._)([(0,te.Cb)({type:["left","right","center","justify"],json:{write:!0}})],z.prototype,"horizontalAlignment",void 0),(0,x._)([(0,te.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"kerning",void 0),(0,x._)([(0,te.Cb)({type:T.Z,json:{write:!0}})],z.prototype,"haloColor",void 0),(0,x._)([(0,te.Cb)({type:Number,cast:ie.t_,json:{write:!0}})],z.prototype,"haloSize",void 0),(0,x._)([(0,te.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"rightToLeft",void 0),(0,x._)([(0,te.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"rotated",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],z.prototype,"text",void 0),(0,x._)([(0,Y.J)({esriTS:"text"},{readOnly:!0})],z.prototype,"type",void 0),(0,x._)([(0,te.Cb)({type:["baseline","top","middle","bottom"],json:{write:!0}})],z.prototype,"verticalAlignment",void 0),(0,x._)([(0,te.Cb)({type:Number,cast:ie.t_,json:{write:!0}})],z.prototype,"xoffset",void 0),(0,x._)([(0,te.Cb)({type:Number,cast:ie.t_,json:{write:!0}})],z.prototype,"yoffset",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{read:K=>K&&-1*K,write:(K,V)=>V.angle=K&&-1*K}})],z.prototype,"angle",void 0),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],z.prototype,"width",void 0),(0,x._)([(0,te.Cb)({type:Number})],z.prototype,"lineWidth",void 0),(0,x._)([(0,L.c)("lineWidth")],z.prototype,"writeLineWidth",null),(0,x._)([(0,oe.p)("lineWidth")],z.prototype,"castLineWidth",null),(0,x._)([(0,te.Cb)({type:Number})],z.prototype,"lineHeight",void 0),(0,x._)([(0,L.c)("lineHeight")],z.prototype,"writeLineHeight",null),z=Z=(0,x._)([(0,j.j)("esri.symbols.TextSymbol")],z);const ae=z},37771:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>H});var ae,x=C(17626),T=C(58817),ne=C(62208),ie=C(77712),oe=(C(90912),C(55342)),Y=C(76898),j=C(99433),L=C(11472),B=C(97665),X=C(60958),Z=C(91558),z=C(86162);let K=ae=class extends z.wq{constructor(){super(...arguments),this.color=new Z.Z([0,0,0,1]),this.size=0}clone(){return new ae({color:(0,T.d9)(this.color),size:this.size})}};(0,x._)([(0,ie.Cb)(X.a)],K.prototype,"color",void 0),(0,x._)([(0,ie.Cb)(X.y)],K.prototype,"size",void 0),K=ae=(0,x._)([(0,Y.j)("esri.symbols.support.Symbol3DHalo")],K);const V=K;var F,P=C(64830);let $=F=class extends B.Z{constructor(de){super(de),this._userSize=void 0,this.halo=null,this.material=null,this.text=void 0,this.type="text"}get font(){return this._get("font")||null}set font(de){de&&this._userSize&&(de.size=this._userSize),this._set("font",de)}writeFont(de,ee,ye,le){const ge=nn(Ot({},le),{textSymbol3D:!0});ee.font=de.write({},ge),delete ee.font.size}get size(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9}set size(de){this._userSize=de,this.font&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){return new F({enabled:this.enabled,font:this.font&&(0,T.d9)(this.font),halo:this.halo&&(0,T.d9)(this.halo),material:(0,ne.pC)(this.material)?this.material.clone():null,size:this.size,text:this.text})}static fromTextSymbol(de){const ee=function J(de,ee){return de&&ee>0?{color:(0,T.d9)(de),size:ee}:null}(de.haloColor,de.haloSize),ye=de.font?de.font.clone():new L.Z;return new F({size:ye.size,font:ye,halo:ee,material:de.color?{color:de.color.clone()}:null,text:de.text})}};(0,x._)([(0,ie.Cb)({type:L.Z,json:{write:!0}})],$.prototype,"font",null),(0,x._)([(0,j.c)("font")],$.prototype,"writeFont",null),(0,x._)([(0,ie.Cb)({type:V,json:{write:!0}})],$.prototype,"halo",void 0),(0,x._)([(0,ie.Cb)({type:P.Z,json:{write:!0}})],$.prototype,"material",void 0),(0,x._)([(0,ie.Cb)(X.y),(0,ie.Cb)()],$.prototype,"size",null),(0,x._)([(0,ie.Cb)({type:String,json:{write:!0}})],$.prototype,"text",void 0),(0,x._)([(0,oe.J)({Text:"text"},{readOnly:!0})],$.prototype,"type",void 0),$=F=(0,x._)([(0,Y.j)("esri.symbols.TextSymbol3DLayer")],$);const H=$},72622:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Z});var L,x=C(17626),T=C(91558),ne=C(58817),ie=C(77712),te=C(90912),oe=C(55342),Y=C(76898),j=C(97665);let B=L=class extends j.Z{constructor(z){super(z),this.color=X.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new L({color:(0,ne.d9)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};(0,x._)([(0,ie.Cb)({type:T.Z,nonNullable:!0,json:{type:[te.z8],write:(z,ae,K)=>ae[K]=z.toArray(1),default:()=>X.clone(),defaultEquals:z=>z.toCss(!0)===X.toCss(!0)}})],B.prototype,"color",void 0),(0,x._)([(0,oe.J)({Water:"water"},{readOnly:!0})],B.prototype,"type",void 0),(0,x._)([(0,ie.Cb)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],B.prototype,"waterbodySize",void 0),(0,x._)([(0,ie.Cb)({type:Number,json:{write:!0,default:null}})],B.prototype,"waveDirection",void 0),(0,x._)([(0,ie.Cb)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],B.prototype,"waveStrength",void 0),B=L=(0,x._)([(0,Y.j)("esri.symbols.WaterSymbol3DLayer")],B);const X=new T.Z([0,119,190]),Z=B},12874:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>$});var K,x=C(15861),T=C(17626),ne=C(63290),ie=C(10699),te=C(77712),L=(C(85931),C(8314),C(90912),C(55342)),B=C(76898),X=C(84687),Z=C(29840),z=C(10012),ae=C(96296);const V=ne.Z.getLogger("esri.symbols.WebStyleSymbol");let P=K=class extends z.Z{constructor(J){super(J),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(J,H){this.portal=H?H.portal:void 0,super.read(J,H)}clone(){return new K({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(J){return this._fetchSymbol("webRef",J)}fetchCIMSymbol(J){return this._fetchSymbol("cimRef",J)}_fetchSymbol(J,H){var de=this;return(0,x.Z)(function*(){const ee=yield function F(){return Promise.all([C.e(8592),C.e(3100)]).then(C.bind(C,50998))}();(0,ie.k_)(H);const ye=ee.resolveWebStyleSymbol(de,{portal:de.portal},J,H);return ye.catch(le=>{V.error("#fetchSymbol()","Failed to create symbol from style",le)}),ye})()}};(0,T._)([(0,te.Cb)({json:{write:!1}})],P.prototype,"color",void 0),(0,T._)([(0,te.Cb)({type:String,json:{write:!0}})],P.prototype,"styleName",void 0),(0,T._)([(0,te.Cb)({type:X.Z,json:{write:!1}})],P.prototype,"portal",void 0),(0,T._)([(0,te.Cb)({type:String,json:{read:Z.r,write:Z.w}})],P.prototype,"styleUrl",void 0),(0,T._)([(0,te.Cb)({type:ae.Z,json:{read:!1}})],P.prototype,"thumbnail",void 0),(0,T._)([(0,te.Cb)({type:String,json:{write:!0}})],P.prototype,"name",void 0),(0,T._)([(0,L.J)({styleSymbolReference:"web-style"},{readOnly:!0})],P.prototype,"type",void 0),P=K=(0,T._)([(0,B.j)("esri.symbols.WebStyleSymbol")],P);const $=P},21779:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>L});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let j=class extends T.wq{constructor(B){super(B),this.visible=!0}clone(){}};(0,x._)([(0,ne.Cb)({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],j.prototype,"type",void 0),(0,x._)([(0,ne.Cb)({readOnly:!0})],j.prototype,"visible",void 0),j=(0,x._)([(0,Y.j)("esri.symbols.callouts.Callout3D")],j);const L=j},17497:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var z,x=C(17626),T=C(91558),ne=C(58817),ie=C(62208),te=C(23841),oe=C(77712),j=(C(90912),C(55342)),L=C(76898),B=C(21779),X=C(71530),Z=C(60958);let ae=z=class extends B.Z{constructor(V){super(V),this.type="line",this.color=new T.Z([0,0,0,1]),this.size=(0,te.Wz)(1),this.border=null}get visible(){return this.size>0&&(0,ie.pC)(this.color)&&this.color.a>0}clone(){return new z({color:(0,ne.d9)(this.color),size:this.size,border:(0,ne.d9)(this.border)})}};(0,x._)([(0,j.J)({line:"line"},{readOnly:!0})],ae.prototype,"type",void 0),(0,x._)([(0,oe.Cb)(Z.a)],ae.prototype,"color",void 0),(0,x._)([(0,oe.Cb)(Z.y)],ae.prototype,"size",void 0),(0,x._)([(0,oe.Cb)({type:X.a,json:{write:!0}})],ae.prototype,"border",void 0),(0,x._)([(0,oe.Cb)({readOnly:!0})],ae.prototype,"visible",null),ae=z=(0,x._)([(0,L.j)("esri.symbols.callouts.LineCallout3D")],ae);const K=ae},9824:(ut,Oe,C)=>{"use strict";C.d(Oe,{Y2:()=>oe,gv:()=>ie,Uy:()=>ne});var x=C(21779),T=C(17497);function ne(Y){if(!Y)return!1;const j=Y.verticalOffset;return!!j&&!(j.screenLength<=0||j.maxWorldLength<=0)}function ie(Y){if(!Y||!Y.supportsCallout||!Y.supportsCallout())return!1;const j=Y.callout;return!!j&&!!j.visible&&!!ne(Y)}const oe={types:{key:"type",base:x.Z,typeMap:{line:T.Z}},json:{write:!0}}},80991:(ut,Oe,C)=>{"use strict";function T(K,V,P,F){return function x(K){return"function"==typeof K}(K)?K(V,P,F):K}function ne(K){return[K.r,K.g,K.b,K.a]}function ie(K,V,P){const $=ee=>{let ye=ee.length;for(;ye--;)if(-1===" /-,\n".indexOf(ee.charAt(ye)))return!1;return!0},J=[];let H=0,de=-1;do{if(de=V.indexOf("[",H),de>=H){if(de>H){const ee=V.substr(H,de-H);J.push([ee,null,$(ee)])}if(H=de+1,de=V.indexOf("]",H),de>=H){if(de>H){const ee=K[V.substr(H,de-H)];ee&&J.push([null,ee,!1])}H=de+1}}}while(-1!==de);if(H<V.length-1){const ee=V.substr(H);J.push([ee,null,$(ee)])}return ee=>{let ye="",le=null;for(const ge of J){const[se,Q,pe]=ge;if(se)pe?le=se:(le&&(ye+=le,le=null),ye+=se);else{const ue=ee.attributes[Q];ue&&(le&&(ye+=le,le=null),ye+=ue)}}return te(ye,P)}}function te(K,V){switch("string"!=typeof K&&(K=String(K)),V){case"LowerCase":return K.toLowerCase();case"Allcaps":return K.toUpperCase();default:return K}}function oe(K,V,P,F,$,J,H=!0){const de=V/$,ee=P/J,ye=Math.ceil(de/2),le=Math.ceil(ee/2);for(let ge=0;ge<J;ge++)for(let se=0;se<$;se++){const Q=4*(se+(H?J-ge-1:ge)*$);let pe=0,ue=0,me=0,ve=0,fe=0,Me=0,ce=0;const he=(ge+.5)*ee;for(let De=Math.floor(ge*ee);De<(ge+1)*ee;De++){const xe=Math.abs(he-(De+.5))/le,Pe=(se+.5)*de,je=xe*xe;for(let rt=Math.floor(se*de);rt<(se+1)*de;rt++){let Le=Math.abs(Pe-(rt+.5))/ye;const Ce=Math.sqrt(je+Le*Le);Ce>=-1&&Ce<=1&&(pe=2*Ce*Ce*Ce-3*Ce*Ce+1,pe>0&&(Le=4*(rt+De*V),ce+=pe*K[Le+3],me+=pe,K[Le+3]<255&&(pe=pe*K[Le+3]/250),ve+=pe*K[Le],fe+=pe*K[Le+1],Me+=pe*K[Le+2],ue+=pe))}}F[Q]=ve/ue,F[Q+1]=fe/ue,F[Q+2]=Me/ue,F[Q+3]=ce/me}}function Y(K){return K?{r:K[0],g:K[1],b:K[2],a:K[3]/255}:{r:0,g:0,b:0,a:0}}function j(K){var V;return null==(V=K.data)?void 0:V.symbol}function L(K){return"CIMVectorMarker"===K.type||"CIMPictureMarker"===K.type||"CIMBarChartMarker"===K.type||"CIMCharacterMarker"===K.type||"CIMPieChartMarker"===K.type||"CIMStackedBarChartMarker"===K.type}function B(K){return"CIMGradientStroke"===K.type||"CIMPictureStroke"===K.type||"CIMSolidStroke"===K.type}function X(K){return"CIMGradientFill"===K.type||"CIMHatchFill"===K.type||"CIMPictureFill"===K.type||"CIMSolidFill"===K.type||"CIMWaterFill"===K.type}function Z(K){return"CIMMarkerPlacementAlongLineRandomSize"===K.type||"CIMMarkerPlacementAlongLineSameSize"===K.type||"CIMMarkerPlacementAlongLineVariableSize"===K.type||"CIMMarkerPlacementAtExtremities"===K.type||"CIMMarkerPlacementAtMeasuredUnits"===K.type||"CIMMarkerPlacementAtRatioPositions"===K.type||"CIMMarkerPlacementOnLine"===K.type||"CIMMarkerPlacementOnVertices"===K.type}C.d(Oe,{X3:()=>te,nn:()=>ne,Qs:()=>ie,hf:()=>T,NO:()=>Y,NA:()=>ae,k5:()=>X,zL:()=>L,gJ:()=>Z,yL:()=>B,TT:()=>oe,be:()=>j,mA:()=>z});const z=K=>K&&K.toLowerCase().replace(/\s+/g,"-"),ae=K=>isNaN(K)||!K?0:K},89441:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ee});var x=C(17626),T=C(91558),ne=C(86162),ie=C(58817),te=C(23841),oe=C(77712),j=(C(90912),C(76898)),L=C(60958);let B=class extends ne.wq{constructor(ye){super(ye),this.color=new T.Z([0,0,0,1]),this.extensionLength=0,this.size=(0,te.Wz)(1)}clone(){}cloneProperties(){return{color:(0,ie.d9)(this.color),size:this.size,extensionLength:this.extensionLength}}};(0,x._)([(0,oe.Cb)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],B.prototype,"type",void 0),(0,x._)([(0,oe.Cb)(L.a)],B.prototype,"color",void 0),(0,x._)([(0,oe.Cb)(nn(Ot({},L.y),{json:{write:{overridePolicy:ye=>({enabled:!!ye})}}}))],B.prototype,"extensionLength",void 0),(0,x._)([(0,oe.Cb)(L.y)],B.prototype,"size",void 0),B=(0,x._)([(0,j.j)("esri.symbols.edges.Edges3D")],B);const X=B;C(63290),C(85931),C(8314),C(82255);var P,V=C(55342);let F=P=class extends X{constructor(ye){super(ye),this.type="sketch"}clone(){return new P(this.cloneProperties())}};(0,x._)([(0,V.J)({sketch:"sketch"},{readOnly:!0})],F.prototype,"type",void 0),F=P=(0,x._)([(0,j.j)("esri.symbols.edges.SketchEdges3D")],F);const $=F;var J;let H=J=class extends X{constructor(ye){super(ye),this.type="solid"}clone(){return new J(this.cloneProperties())}};(0,x._)([(0,V.J)({solid:"solid"},{readOnly:!0})],H.prototype,"type",void 0),H=J=(0,x._)([(0,j.j)("esri.symbols.support.SolidEdges3D")],H);const ee={types:{key:"type",base:X,typeMap:{solid:H,sketch:$}},json:{write:!0}}},38861:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>L});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let j=class extends T.wq{constructor(B){super(B)}clone(){}};(0,x._)([(0,ne.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],j.prototype,"type",void 0),j=(0,x._)([(0,Y.j)("esri.symbols.patterns.LinePattern3D")],j);const L=j},63743:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ae});var X,x=C(17626),T=C(2076),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(55342)),j=C(76898),L=C(38861);const Z=(0,T.wY)()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let z=X=class extends L.Z{constructor(K){super(K),this.type="style",this.style="solid"}clone(){return new X({style:this.style})}};(0,x._)([(0,ne.Cb)({type:["style"]})],z.prototype,"type",void 0),(0,x._)([(0,Y.J)(Z),(0,ne.Cb)({type:["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"]})],z.prototype,"style",void 0),z=X=(0,x._)([(0,j.j)("esri.symbols.patterns.LineStylePattern3D")],z);const ae=z},40249:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>L});var x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let j=class extends T.wq{constructor(B){super(B)}clone(){}};(0,x._)([(0,ne.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],j.prototype,"type",void 0),j=(0,x._)([(0,Y.j)("esri.symbols.patterns.Pattern3D")],j);const L=j},153:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(77712),oe=(C(85931),C(8314),C(90912),C(76898)),Y=C(40249);let B=L=class extends Y.Z{constructor(Z){super(Z),this.type="style",this.style="solid"}clone(){return new L({style:this.style})}};(0,x._)([(0,T.Cb)({type:["style"]})],B.prototype,"type",void 0),(0,x._)([(0,T.Cb)({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],B.prototype,"style",void 0),B=L=(0,x._)([(0,oe.j)("esri.symbols.patterns.StylePattern3D")],B);const X=B},99255:(ut,Oe,C)=>{"use strict";C.d(Oe,{D:()=>oe,q:()=>te});var x=C(38861),T=C(63743),ne=C(40249),ie=C(153);const te={types:{key:"type",base:ne.Z,typeMap:{style:ie.Z}},json:{write:!0}},oe={types:{key:"type",base:x.Z,typeMap:{style:T.Z}},json:{write:!0}}},26540:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ge});var ae,x=C(17626),T=C(2076),ne=C(86162),ie=C(62208),te=C(77712),L=(C(85931),C(8314),C(90912),C(68653)),B=C(76898),X=C(99433),Z=C(15861),z=C(36630);let K=ae=class extends ne.wq{collectRequiredFields(se,Q){var pe=this;return(0,Z.Z)(function*(){return(0,z.io)(se,Q,pe.expression)})()}clone(){return new ae({expression:this.expression,title:this.title})}};(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],K.prototype,"expression",void 0),(0,x._)([(0,te.Cb)({type:String,json:{write:!0}})],K.prototype,"title",void 0),K=ae=(0,x._)([(0,B.j)("esri.layers.support.FeatureExpressionInfo")],K);const V=K;var P=C(21254);const H=function J(){const se=Object.keys(P.a);return se.sort(),se}();var de;const ee=(0,T.wY)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),ye=new T.Xn({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let le=de=class extends ne.wq{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(se,Q){return null!=se?se:Q.featureExpression&&0===Q.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(se,Q,pe,ue){Q[pe]=se.write({},ue),"0"===se.expression&&(Q.featureExpression={value:0})}get mode(){const{offset:se,featureExpressionInfo:Q}=this;return this._isOverridden("mode")?this._get("mode"):(0,ie.pC)(se)||Q?"relative-to-ground":"on-the-ground"}set mode(se){this._override("mode",se)}set unit(se){this._set("unit",se)}write(se,Q){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(se,Q):null}clone(){return new de({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};(0,x._)([(0,te.Cb)({type:V,json:{write:!0}})],le.prototype,"featureExpressionInfo",void 0),(0,x._)([(0,L.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],le.prototype,"readFeatureExpressionInfo",null),(0,x._)([(0,X.c)("featureExpressionInfo",{featureExpressionInfo:{type:V},"featureExpression.value":{type:[0]}})],le.prototype,"writeFeatureExpressionInfo",null),(0,x._)([(0,te.Cb)({type:ee.apiValues,nonNullable:!0,json:{type:ee.jsonValues,read:ee.read,write:{writer:ee.write,isRequired:!0}}})],le.prototype,"mode",null),(0,x._)([(0,te.Cb)({type:Number,json:{write:!0}})],le.prototype,"offset",void 0),(0,x._)([(0,te.Cb)({type:H,json:{type:String,read:ye.read,write:ye.write}})],le.prototype,"unit",null),le=de=(0,x._)([(0,B.j)("esri.layers.support.ElevationInfo")],le);const ge=le},33215:(ut,Oe,C)=>{"use strict";C.d(Oe,{ZP:()=>F,SI:()=>P});var ae,x=C(17626),T=C(2076),ne=C(86162),ie=C(21726),te=C(77712),L=(C(85931),C(8314),C(90912),C(55342)),B=C(68653),X=C(76898),Z=C(99433),z=C(29840);const K=(0,T.wY)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let V=ae=class extends ne.wq{constructor($){super($)}readHref($,J,H){return $?(0,z.f)($,H):J.dataURI}writeHref($,J,H,de){$&&((0,ie.HK)($)?J.dataURI=$:(J.href=(0,z.t)($,de),(0,ie.YP)(J.href)&&(J.href=(0,ie.Fv)(J.href))))}clone(){return new ae({href:this.href,primitive:this.primitive})}};(0,x._)([(0,te.Cb)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],V.prototype,"href",void 0),(0,x._)([(0,B.r)("href")],V.prototype,"readHref",null),(0,x._)([(0,Z.c)("href",{href:{type:String},dataURI:{type:String}})],V.prototype,"writeHref",null),(0,x._)([(0,L.J)(K)],V.prototype,"primitive",void 0),V=ae=(0,x._)([(0,X.j)("esri.symbols.support.IconSymbol3DLayerResource")],V);const P="circle",F=V},48521:(ut,Oe,C)=>{"use strict";C.d(Oe,{ZP:()=>K,SI:()=>ae});var X,x=C(17626),T=C(2076),ne=C(86162),ie=C(77712),j=(C(85931),C(8314),C(90912),C(55342)),L=C(76898),B=C(29840);const Z=(0,T.wY)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let z=X=class extends ne.wq{clone(){return new X({href:this.href,primitive:this.primitive})}};(0,x._)([(0,ie.Cb)({type:String,json:{read:B.r,write:B.w}})],z.prototype,"href",void 0),(0,x._)([(0,j.J)(Z)],z.prototype,"primitive",void 0),z=X=(0,x._)([(0,L.j)("esri.symbols.support.ObjectSymbol3DLayerResource")],z);const ae="sphere",K=z},77345:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(14517),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(84687);let B=L=class extends T.Z{constructor(){super(...arguments),this.portal=null}clone(){return new L({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};(0,x._)([(0,ne.Cb)({type:String})],B.prototype,"name",void 0),(0,x._)([(0,ne.Cb)({type:String})],B.prototype,"styleUrl",void 0),(0,x._)([(0,ne.Cb)({type:String})],B.prototype,"styleName",void 0),(0,x._)([(0,ne.Cb)({type:j.Z})],B.prototype,"portal",void 0),B=L=(0,x._)([(0,Y.j)("esri.symbols.support.StyleOrigin")],B);const X=B},37519:(ut,Oe,C)=>{"use strict";C.d(Oe,{e:()=>L,Z:()=>B});var j,x=C(17626),T=C(14517),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let L=j=class extends T.Z{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new j({x:this.x,y:this.y})}};(0,x._)([(0,ne.Cb)({type:Number})],L.prototype,"x",void 0),(0,x._)([(0,ne.Cb)({type:Number})],L.prototype,"y",void 0),L=j=(0,x._)([(0,Y.j)("esri.symbols.support.Symbol3DAnchorPosition2D")],L);const B=L},64830:(ut,Oe,C)=>{"use strict";C.d(Oe,{b:()=>X,Z:()=>Z});var B,x=C(17626),T=C(86162),ne=C(62208),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898)),L=C(60958);let X=B=class extends T.wq{constructor(z){super(z),this.color=null}clone(){const z={color:(0,ne.pC)(this.color)?this.color.clone():null};return new B(z)}};(0,x._)([(0,ie.Cb)(L.a)],X.prototype,"color",void 0),X=B=(0,x._)([(0,j.j)("esri.symbols.support.Symbol3DMaterial")],X);const Z=X},97595:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var L,x=C(17626),T=C(86162),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(60958);let B=L=class extends T.wq{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new L({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};(0,x._)([(0,ne.Cb)(j.y)],B.prototype,"screenLength",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0,default:0}})],B.prototype,"minWorldLength",void 0),(0,x._)([(0,ne.Cb)({type:Number,json:{write:!0}})],B.prototype,"maxWorldLength",void 0),B=L=(0,x._)([(0,Y.j)("esri.symbols.support.Symbol3DVerticalOffset")],B);const X=B},96296:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var j,x=C(17626),T=C(14517),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898));let L=j=class extends T.Z{clone(){return new j({url:this.url})}};(0,x._)([(0,ne.Cb)({type:String})],L.prototype,"url",void 0),L=j=(0,x._)([(0,Y.j)("esri.symbols.support.Thumbnail")],L);const B=L},56445:(ut,Oe,C)=>{"use strict";C.d(Oe,{iW:()=>B,kW:()=>ne,FW:()=>Y,PI:()=>ie});var x=C(91558),T=C(80991);function ne(P){const F=(0,T.be)(P);if("CIMTextSymbol"===F.type)return F.height;let $=0;if(F.symbolLayers)for(const J of F.symbolLayers)(0,T.zL)(J)&&J.size>$?$=J.size:(0,T.yL)(J)&&J.width>$?$=J.width:(0,T.k5)(J);return $}function ie(P,F,$){const J=(0,T.be)(P),H=ne(P);0!==H?oe(J,F/H,!1,$):function te(P,F){if("CIMTextSymbol"!==P.type){if(P.symbolLayers)for(const $ of P.symbolLayers)switch($.type){case"CIMPictureMarker":case"CIMVectorMarker":$.size=F;break;case"CIMPictureStroke":case"CIMSolidStroke":$.width=F}}else P.height=F}(J,F)}function oe(P,F,$,J){if("CIMTextSymbol"!==P.type){if($&&P.effects)for(const H of P.effects)L(H,F);if(P.symbolLayers)for(const H of P.symbolLayers)switch(H.type){case"CIMPictureMarker":case"CIMVectorMarker":Y(H,F,J);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=J&&J.preserveOutlineWidth||(H.width*=F);break;case"CIMPictureFill":H.height*=F,H.offsetX*=F,H.offsetY*=F;break;case"CIMHatchFill":oe(H.lineSymbol,F,!0,nn(Ot({},J),{preserveOutlineWidth:!1})),H.offsetX*=F,H.offsetY*=F,H.separation*=F}}else P.height*=F}function Y(P,F,$){if(P.markerPlacement&&function j(P,F){switch((0,T.gJ)(P)&&(P.offset*=F),P.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(P.customEndingOffset*=F,P.offsetAlongLine*=F,P.placementTemplate&&P.placementTemplate.length){const $=P.placementTemplate.map(J=>J*F);P.placementTemplate=$}break;case"CIMMarkerPlacementAlongLineVariableSize":if(P.maxRandomOffset*=F,P.placementTemplate&&P.placementTemplate.length){const $=P.placementTemplate.map(J=>J*F);P.placementTemplate=$}break;case"CIMMarkerPlacementOnLine":P.startPointOffset*=F;break;case"CIMMarkerPlacementAtExtremities":P.offsetAlongLine*=F;break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":P.beginPosition*=F,P.endPosition*=F;break;case"CIMMarkerPlacementPolygonCenter":P.offsetX*=F,P.offsetY*=F;break;case"CIMMarkerPlacementInsidePolygon":P.offsetX*=F,P.offsetY*=F,P.stepX*=F,P.stepY*=F}}(P.markerPlacement,F),P.offsetX*=F,P.offsetY*=F,P.anchorPoint&&"Absolute"===P.anchorPointUnits&&(P.anchorPoint={x:P.anchorPoint.x*F,y:P.anchorPoint.y*F}),P.size*=F,"CIMVectorMarker"===P.type&&P.markerGraphics)for(const J of P.markerGraphics)P.scaleSymbolsProportionally||oe(J.symbol,F,!0,$)}function L(P,F){switch(P.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":P.width*=F;break;case"CIMGeometricEffectBuffer":P.size*=F;break;case"CIMGeometricEffectCut":P.beginCut*=F,P.endCut*=F,P.middleCut*=F;break;case"CIMGeometricEffectDashes":if(P.customEndingOffset*=F,P.offsetAlongLine*=F,P.dashTemplate&&P.dashTemplate.length){const $=P.dashTemplate.map(J=>J*F);P.dashTemplate=$}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":P.length*=F;break;case"CIMGeometricEffectMove":P.offsetX*=F,P.offsetY*=F;break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":P.offset*=F;break;case"CIMGeometricEffectRegularPolygon":P.radius*=F;break;case"CIMGeometricEffectTaperedPolygon":P.fromWidth*=F,P.length*=F,P.toWidth*=F;break;case"CIMGeometricEffectWave":P.amplitude*=F,P.period*=F}}function B(P){const F=[];return X((0,T.be)(P),F),F.length?new x.Z((0,T.NO)(F[0])):null}function X(P,F){let $;$="CIMTextSymbol"===P.type?P.symbol:P;const J="CIMPolygonSymbol"===P.type;if($.symbolLayers)for(const H of $.symbolLayers)if(!(H.colorLocked||J&&((0,T.yL)(H)||(0,T.zL)(H)&&H.markerPlacement&&(0,T.gJ)(H.markerPlacement))))switch(H.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":break;case"CIMVectorMarker":H.markerGraphics.forEach(de=>{X(de.symbol,F)});break;case"CIMSolidStroke":case"CIMSolidFill":Z(F,H.color);break;case"CIMHatchFill":X(H.lineSymbol,F)}}function Z(P,F){for(const $ of P)if($.join(".")===F.join("."))return;P.push(F)}},12948:(ut,Oe,C)=>{"use strict";C.d(Oe,{rx:()=>te,l9:()=>ie,ix:()=>T});var x=C(91558);const T=new x.Z("white"),ie=(new x.Z("black"),new x.Z([255,255,255,0]));function te(oe){return 0===oe.r&&0===oe.g&&0===oe.b}},8080:(ut,Oe,C)=>{"use strict";C.d(Oe,{Rz:()=>B,G:()=>Z,kD:()=>ae,mW:()=>z}),C(8314);var T=C(88493),ne=C(52068),ie=C(57213),te=C(35540),oe=C(24837);ie.Z.fromJSON(oe.I4),ne.Z.fromJSON(oe.ET),T.Z.fromJSON(oe.lF);const B=te.Z.fromJSON(oe.qP),Z=ie.Z.fromJSON(oe.eG),z=ne.Z.fromJSON(oe.wW),ae=T.Z.fromJSON(oe.lj)},24837:(ut,Oe,C)=>{"use strict";C.d(Oe,{I4:()=>ne,lF:()=>te,ET:()=>ie,qP:()=>oe,eG:()=>Y,lj:()=>L,wW:()=>j});const x=[252,146,31,255],ne={type:"esriSMS",style:"esriSMSCircle",size:6,color:x,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},ie={type:"esriSLS",style:"esriSLSSolid",width:.75,color:x},te={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},oe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Y={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},j={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},L={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},74741:(ut,Oe,C)=>{"use strict";C.d(Oe,{Ne:()=>ee,Sp:()=>de,_M:()=>$,Od:()=>J,mx:()=>H});var x=C(54346),T=C(91558),ne=C(84792),ie=C(78498),te=C(23841),oe=C(56445);const Y="picture-fill",j="simple-fill",B="simple-marker",K=new ie.Z(1e3);function $(ye){const le=ye.style;let ge=null;if(ye)switch(ye.type){case B:"cross"!==le&&"x"!==le&&(ge=ye.color);break;case j:"solid"===le?ge=ye.color:"none"!==le&&(ge={type:"pattern",x:0,y:0,src:(0,x.V)(`esri/symbols/patterns/${le}.png`),width:5,height:5});break;case Y:ge={type:"pattern",src:ye.url,width:(0,te.F2)(ye.width)*ye.xscale,height:(0,te.F2)(ye.height)*ye.yscale,x:(0,te.F2)(ye.xoffset),y:(0,te.F2)(ye.yoffset)};break;case"text":ge=ye.color;break;case"cim":ge=(0,oe.iW)(ye)}return ge}function J(ye,le){const ge=ye+"-"+le;return void 0!==K.get(ge)?Promise.resolve(K.get(ge)):(0,ne.default)(ye,{responseType:"image"}).then(se=>{const Q=se.data,pe=Q.naturalWidth,ue=Q.naturalHeight,me=document.createElement("canvas");me.width=pe,me.height=ue;const ve=me.getContext("2d");ve.fillStyle=le,ve.fillRect(0,0,pe,ue),ve.globalCompositeOperation="destination-in",ve.drawImage(Q,0,0);const fe=me.toDataURL();return K.put(ge,fe),fe})}function H(ye){if(!ye)return null;let le;switch(ye.type){case j:case Y:case B:le=H(ye.outline);break;case"simple-line":{const ge=(0,te.F2)(ye.width);"none"!==ye.style&&0!==ge&&(le={color:ye.color,style:de(ye.style),width:ge,cap:ye.cap,join:"miter"===ye.join?(0,te.F2)(ye.miterLimit):ye.join});break}default:le=null}return le}const de=function(){const ye={};return function(le){if(ye[le])return ye[le];const ge=le.replace(/-/g,"");return ye[le]=ge,ge}}(),ee=new T.Z([128,128,128])},65270:(ut,Oe,C)=>{"use strict";C.d(Oe,{i:()=>$,c:()=>P});var x=C(65787),T=C(26584),ne=C(62208),ie=C(39368),te=C(12874),oe=C(69852),Y=C(52068),j=C(40445),L=C(57213),B=C(13546),X=C(88493),Z=C(89673),z=C(35540),ae=C(22490);const K={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function P(J,H,de,ee){const ye=function F(J,H,de){if(!J)return null;if(de&&"web-scene"===de.origin&&!(J instanceof ie.Z)&&!(J instanceof te.Z)){const ee=function V(J,H=K){if(!J)return{symbol:null};const{retainId:de=K.retainId,ignoreDrivers:ee=K.ignoreDrivers,hasLabelingContext:ye=K.hasLabelingContext,retainCIM:le=K.retainCIM}=H;let ge;if((0,x.dU)(J)||J instanceof te.Z)ge=J.clone();else if("cim"===J.type){var se,Q;const pe=null==(se=J.data)||null==(Q=se.symbol)?void 0:Q.type;if("CIMPointSymbol"!==pe)return{error:new T.Z("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${pe||"unknown"}' is unsupported in 3D`,{symbol:J})};ge=le?J.clone():oe.Z.fromCIMSymbol(J)}else if(J instanceof Y.Z)ge=j.Z.fromSimpleLineSymbol(J);else if(J instanceof L.Z)ge=oe.Z.fromSimpleMarkerSymbol(J);else if(J instanceof B.Z)ge=oe.Z.fromPictureMarkerSymbol(J);else if(J instanceof X.Z)ge=Z.Z.fromSimpleFillSymbol(J);else{if(!(J instanceof z.Z))return{error:new T.Z("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${J.type||J.declaredClass}' is unsupported in 3D`,{symbol:J})};ge=ye?ae.Z.fromTextSymbol(J):oe.Z.fromTextSymbol(J)}if(de&&"cim"!==ge.type&&(ge.id=J.id),ee&&(0,x.dU)(ge))for(let pe=0;pe<ge.symbolLayers.length;++pe)ge.symbolLayers.getItemAt(pe)._ignoreDrivers=!0;return{symbol:ge}}(J,{retainCIM:!0});return(0,ne.pC)(ee.symbol)?ee.symbol.write(H,de):(de.messages&&de.messages.push(new T.Z("symbol:unsupported",`Symbols of type '${J.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:J,context:de,error:ee.error})),null)}return de&&"web-map"===de.origin&&"web-style"===J.type?(de.messages&&de.messages.push(new T.Z("symbol:unsupported",`Symbols of type '${J.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:J,context:de})),null):J.write(H,de)}(J,{},ee);ye&&(H[de]=ye)}function $(J,H){return(0,x.S9)(J,null,H)}},60958:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>Y,y:()=>j});var x=C(91558),T=C(23841),ne=C(90912),ie=C(92236);const Y={type:x.Z,json:{type:[ne.z8],default:null,read:{source:["color","transparency"],reader:function te(L,B){const X=null!=B.transparency?(0,ie.b)(B.transparency):1,Z=B.color;return Z&&Array.isArray(Z)?new x.Z([Z[0]||0,Z[1]||0,Z[2]||0,X]):null}},write:{target:{color:{type:[ne.z8]},transparency:{type:ne.z8}},writer:function oe(L,B){B.color=L.toJSON().slice(0,3);const X=(0,ie.a)(L.a);0!==X&&(B.transparency=X)}}}},j={type:Number,cast:T.t_,json:{write:!0}}},78241:(ut,Oe,C)=>{"use strict";C.d(Oe,{wm:()=>ye,n2:()=>P,KV:()=>F,EJ:()=>H,v9:()=>$});var x=C(15861),T=C(84792),ne=C(26584),ie=C(10699),te=C(21726),oe=C(84687),Y=C(6278),j=C(8314);const Z={};function ae(){return(ae=(0,x.Z)(function*(le,ge){try{return{data:(yield H(le,ge)).data,baseUrl:(0,te.Yd)(le),styleUrl:le}}catch(se){return(0,ie.r9)(se),null}})).apply(this,arguments)}function P(le,ge,se){return le.styleUrl?function z(le,ge){return ae.apply(this,arguments)}(le.styleUrl,se):le.styleName?function K(le,ge,se){const Q=ge&&ge.portal||oe.Z.getDefault();let pe;const ue=`${Q.url} - ${Q.user&&Q.user.username} - ${le}`;return Z[ue]||(Z[ue]=function V(le,ge,se){return ge.load(se).then(()=>{const Q=new Y.Z({disableExtraQuery:!0,query:`owner:${de} AND type:${ee} AND typekeywords:"${le}"`});return ge.queryItems(Q,se)}).then(({results:Q})=>{let pe=null;const ue=le.toLowerCase();if(Q&&Array.isArray(Q))for(const me of Q)if(me.typeKeywords.some(ve=>ve.toLowerCase()===ue)&&me.type===ee&&me.owner===de){pe=me;break}if(!pe)throw new ne.Z("symbolstyleutils:style-not-found",`The style '${le}' could not be found`,{styleName:le});return pe.load(se)})}(le,Q,se).then(me=>(pe=me,me.fetchData())).then(me=>({data:me,baseUrl:pe.itemUrl,styleName:le}))),Z[ue]}(le.styleName,ge,se):Promise.reject(new ne.Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function F(le){return null===le||"CIMSymbolReference"===le.type?le:{type:"CIMSymbolReference",symbol:le}}function $(le,ge){if("cimRef"===ge)return le.cimRef;if(le.formatInfos&&!(0,j.Z)("enable-feature:force-wosr"))for(const se of le.formatInfos)if("gltf"===se.type)return se.href;return le.webRef}function H(le,ge){const se=Ot({responseType:"json",query:{f:"json"}},ge);return(0,T.default)((0,te.Fv)(le),se)}const de="esri_en",ee="Style",ye="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},43652:(ut,Oe,C)=>{"use strict";C.d(Oe,{Hc:()=>L,w2:()=>X,Uz:()=>j,$K:()=>ie,KW:()=>B}),C(8314);var T=C(28093),ne=C(5548);function ie(Z,{isPrimitive:z,width:ae,depth:K,height:V}){const P=z?10:1;if(null==ae&&null==V&&null==K)return[P*Z[0],P*Z[1],P*Z[2]];const F=(0,T.f)(ae,K,V);let $;for(let J=0;J<3;J++){const H=F[J];if(null!=H){$=H/Z[J];break}}for(let J=0;J<3;J++)null==F[J]&&(F[J]=Z[J]*$);return F}const te=(0,ne.al)(-.5,-.5,-.5,.5,.5,.5),oe=(0,ne.al)(-.5,-.5,0,.5,.5,1),Y=(0,ne.al)(-.5,-.5,0,.5,.5,.5);function j(Z){switch(Z){case"sphere":case"cube":case"diamond":return te;case"cylinder":case"cone":case"inverted-cone":return oe;case"tetrahedron":return Y;default:return}}const L=["butt","square","round"],B=[...L,"none"],X=["miter","bevel","round"]},69738:(ut,Oe,C)=>{"use strict";C.d(Oe,{Ds:()=>Y,KA:()=>oe});var x=C(21726),T=C(29840);function ie(L,B){return function j(L){return L&&("service"===L.origin||"portal-item"===L.origin)&&L.layer&&("feature"===L.layer.type||"stream"===L.layer.type)}(B)&&!(0,x.YP)(L)&&B.layer.parsedUrl?(0,x.v_)(B.layer.parsedUrl.path,"images",L):(0,T.f)(L,B)}const oe={json:{read:{source:["imageData","url"],reader:function ne(L,B,X){return B.imageData?(0,x._l)({mediaType:B.contentType||"image/png",isBase64:!0,data:B.imageData}):ie(B.url,X)}},write:{writer(L,B,X,Z){!function te(L,B,X,Z){if((0,x.HK)(L)){const z=(0,x.sJ)(L);B.contentType=z.mediaType,B.imageData=z.data,X&&X.imageData===B.imageData&&X.url&&(0,T.w)(X.url,B,"url",Z)}else(0,T.w)(L,B,"url",Z)}(L,B,this.source,Z)}}}},Y={readOnly:!0,json:{read:{source:["imageData","url"],reader(L,B,X){const Z={};return B.imageData&&(Z.imageData=B.imageData),B.contentType&&(Z.contentType=B.contentType),B.url&&(Z.url=ie(B.url,X)),Z}}}}},86606:(ut,Oe,C)=>{"use strict";C.d(Oe,{tb:()=>de,BR:()=>je,e3:()=>xe,wJ:()=>rt,nf:()=>V,YW:()=>K});var x=C(15861),T=C(91558),ne=C(65787),ie=C(59213),te=C(8314),oe=C(62208),Y=C(28093),j=C(71149),B=(C(74741),C(64830));const X=/\/resource\/(.*?)\.svg$/,Z=new T.Z("white");function K(Le){if((0,oe.Wi)(Le)||!("symbolLayers"in Le)||(0,oe.Wi)(Le.symbolLayers))return!1;switch(Le.type){case"point-3d":return Le.symbolLayers.some(Ce=>"object"===Ce.type);case"line-3d":return Le.symbolLayers.some(Ce=>"path"===Ce.type);case"polygon-3d":return Le.symbolLayers.some(Ce=>"object"===Ce.type||"extrude"===Ce.type);default:return!1}}function V(Le,Ce){const Te=Ce.resource.href;return!(0,te.Z)("esri-canvas-svg-support")&&Le.styleOrigin&&X.test(Te)?Te.replace(X,"/resource/png/$1.png"):Te}function $(Le,Ce){if(null==Ce)return Le;const Te=Le.toRgba();return Te[3]=Te[3]*Ce,new T.Z(Te)}function de(Le,Ce,Te){Le&&(Ce||null!=Te)&&(Ce&&(Ce=new T.Z(Ce)),(0,ne.dU)(Le)?function J(Le,Ce,Te){const Ye=Le.symbolLayers;if(!Ye)return;const ct=Ae=>{const Qe=(0,oe.pC)(Ae)?Ae:null;return $(Ce=Ce||Qe||null!=Te&&Z,Te)};Ye.forEach(Ae=>{if("object"!==Ae.type||null==Ae.resource.href||Ce)if("water"===Ae.type)Ae.color=ct(Ae.color);else{const Qe=(0,oe.pC)(Ae.material)?Ae.material.color:null,Je=ct(Qe);(0,oe.Wi)(Ae.material)?Ae.material=new B.Z({color:Je}):Ae.material.color=Je,null!=Te&&"outline"in Ae&&(0,oe.pC)(Ae.outline)&&(0,oe.pC)(Ae.outline.color)&&(Ae.outline.color=$(Ae.outline.color,Te))}})}(Le,Ce,Te):(0,ne.cT)(Le)&&function H(Le,Ce,Te){(Ce=Ce||Le.color)&&(Le.color=$(Ce,Te)),null!=Te&&"outline"in Le&&Le.outline&&Le.outline.color&&(Le.outline.color=$(Le.outline.color,Te))}(Le,Ce,Te))}function ee(Le,Ce){return ye.apply(this,arguments)}function ye(){return ye=(0,x.Z)(function*(Le,Ce){const Te=Le.symbolLayers;Te&&(yield(0,ie.Ed)(Te,function(){var Ye=(0,x.Z)(function*(ct){return le(ct,Ce)});return function(ct){return Ye.apply(this,arguments)}}()))}),ye.apply(this,arguments)}function le(Le,Ce){return ge.apply(this,arguments)}function ge(){return(ge=(0,x.Z)(function*(Le,Ce){switch(Le.type){case"extrude":pe(Le,Ce);break;case"icon":case"line":case"text":se(Le,Ce);break;case"path":ve(Le,Ce);break;case"object":yield ue(Le,Ce)}})).apply(this,arguments)}function se(Le,Ce){const Te=Q(Ce);(0,oe.pC)(Te)&&(Le.size=Te)}function Q(Le){for(const Ce of Le)if("number"==typeof Ce)return Ce;return null}function pe(Le,Ce){Le.size="number"==typeof Ce[2]?Ce[2]:0}function ue(Le,Ce){return me.apply(this,arguments)}function me(){return(me=(0,x.Z)(function*(Le,Ce){const{resourceSize:Te,symbolSize:Ye}=yield Me(Le),ct=fe(Ce,Te,Ye);Le.width=he(Ce[0],Ye[0],Te[0],ct),Le.depth=he(Ce[1],Ye[1],Te[1],ct),Le.height=he(Ce[2],Ye[2],Te[2],ct)})).apply(this,arguments)}function ve(Le,Ce){const Te=fe(Ce,Y.O,[Le.width,void 0,Le.height]);Le.width=he(Ce[0],Le.width,1,Te),Le.height=he(Ce[2],Le.height,1,Te)}function fe(Le,Ce,Te){for(let Ye=0;Ye<3;Ye++){const ct=Le[Ye];switch(ct){case"symbol-value":return null!=Te[Ye]?Te[Ye]/Ce[Ye]:1;case"proportional":break;default:if(ct&&Ce[Ye])return ct/Ce[Ye]}}return 1}function Me(Le){return ce.apply(this,arguments)}function ce(){return(ce=(0,x.Z)(function*(Le){const Ce=yield C.e(1831).then(C.bind(C,91831)),Te=yield Ce.computeObjectLayerResourceSize(Le,10),{width:Ye,height:ct,depth:Ae}=Le,Qe=[Ye,Ae,ct];let Je=1;for(let re=0;re<3;re++)if(null!=Qe[re]){Je=Qe[re]/Te[re];break}for(let re=0;re<3;re++)null==Qe[re]&&(Qe[re]=Te[re]*Je);return{resourceSize:Te,symbolSize:Qe}})).apply(this,arguments)}function he(Le,Ce,Te,Ye){switch(Le){case"proportional":return Te*Ye;case"symbol-value":return null!=Ce?Ce:Te;default:return Le}}function De(Le,Ce){const Te=Q(Ce);if(!(0,oe.Wi)(Te))switch(Le.type){case"simple-marker":Le.size=Te;break;case"picture-marker":{const Ye=Le.width/Le.height;Ye>1?(Le.width=Te,Le.height=Te*Ye):(Le.width=Te*Ye,Le.height=Te);break}case"simple-line":Le.width=Te;break;case"text":Le.font.size=Te}}function xe(Le,Ce){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,x.Z)(function*(Le,Ce){if(Le&&Ce)return(0,ne.dU)(Le)?ee(Le,Ce):void((0,ne.cT)(Le)&&De(Le,Ce))})).apply(this,arguments)}function je(Le,Ce,Te){if(Le&&null!=Ce)if((0,ne.dU)(Le)){const Ye=Le.symbolLayers;Ye&&Ye.forEach(ct=>{if(ct&&"object"===ct.type)switch(Te){case"tilt":ct.tilt=Ce;break;case"roll":ct.roll=Ce;break;default:ct.heading=Ce}})}else(0,ne.cT)(Le)&&("simple-marker"!==Le.type&&"picture-marker"!==Le.type&&"text"!==Le.type||(Le.angle=Ce))}function rt(Le){if(!Le)return null;const Ce=Le.effects.filter(Te=>"bloom"!==Te.type).map(Te=>Te.toJSON());return(0,j.rM)(Ce)}},4728:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Ge});var x=C(15861),T=C(17626),ne=C(26584),ie=C(8314),te=C(62208),oe=C(10699),Y=C(77712),B=(C(85931),C(90912),C(76898)),X=C(15283),Z=C(2618),z=C(85531),ae=C(67736);function V(){return(V=(0,x.Z)(function*(Xe,He,Ue){const it=(0,Z.en)(Xe);return(0,z.X)(it,ae.Z.from(He),Ot({},Ue)).then(wt=>(0,z.O)(wt.data.attachmentGroups,it.path))})).apply(this,arguments)}var P=C(90463),$=(C(29132),C(20477)),J=C(84952),H=C(2004);function ee(){return(ee=(0,x.Z)(function*(Xe,He,Ue){const it=(0,Z.en)(Xe);return(0,$.executeQueryForExtent)(it,J.Z.from(He),Ot({},Ue)).then(wt=>({count:wt.data.count,extent:H.Z.fromJSON(wt.data.extent)}))})).apply(this,arguments)}var ye=C(24865),le=C(2865),ge=C(94573),se=C(33696),Q=C(82054);function pe(Xe,He){return He}function ue(Xe,He,Ue,it){switch(Ue){case 0:return Me(Xe,He+it,0);case 1:return"lowerLeft"===Xe.originPosition?Me(Xe,He+it,1):function ce({translate:Xe,scale:He},Ue,it){return Xe[it]-Ue*He[it]}(Xe,He+it,1)}}function me(Xe,He,Ue,it){return 2===Ue?Me(Xe,He,2):ue(Xe,He,Ue,it)}function ve(Xe,He,Ue,it){return 2===Ue?Me(Xe,He,3):ue(Xe,He,Ue,it)}function fe(Xe,He,Ue,it){return 3===Ue?Me(Xe,He,3):me(Xe,He,Ue,it)}function Me({translate:Xe,scale:He},Ue,it){return Xe[it]+Ue*He[it]}class he{constructor(He){this.options=He,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=pe,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(He){if(this.options.applyTransform&&(He.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!He.hasZ)return;const Ue=(0,se.k)(He.geometryType,this.options.sourceSpatialReference,He.spatialReference);if(!(0,te.Wi)(Ue))for(const it of He.features)Ue(it.geometry)}createSpatialReference(){return{}}addField(He,Ue){He.fields.push(Ue);const it=He.fields.map(wt=>wt.name);this.AttributesConstructor=function(){for(const wt of it)this[wt]=null}}addFeature(He,Ue){He.features.push(Ue)}prepareFeatures(He){switch(this.transform=He.transform,this.options.applyTransform&&He.transform&&(this.applyTransform=this.deriveApplyTransform(He)),this.vertexDimension=2,He.hasZ&&this.vertexDimension++,He.hasM&&this.vertexDimension++,He.geometryType){case"esriGeometryPoint":this.addCoordinate=(Ue,it,wt)=>this.addCoordinatePoint(Ue,it,wt),this.createGeometry=Ue=>this.createPointGeometry(Ue);break;case"esriGeometryPolygon":this.addCoordinate=(Ue,it,wt)=>this.addCoordinatePolygon(Ue,it,wt),this.createGeometry=Ue=>this.createPolygonGeometry(Ue);break;case"esriGeometryPolyline":this.addCoordinate=(Ue,it,wt)=>this.addCoordinatePolyline(Ue,it,wt),this.createGeometry=Ue=>this.createPolylineGeometry(Ue);break;case"esriGeometryMultipoint":this.addCoordinate=(Ue,it,wt)=>this.addCoordinateMultipoint(Ue,it,wt),this.createGeometry=Ue=>this.createMultipointGeometry(Ue);break;default:(0,ge.Bg)(He.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}allocateCoordinates(){}addLength(He,Ue,it){0===this.lengths.length&&(this.toAddInCurrentPath=Ue),this.lengths.push(Ue)}addQueryGeometry(He,Ue){const{queryGeometry:it,queryGeometryType:wt}=Ue,nr=(0,Q.$g)(it.clone(),it,!1,!1,this.transform),wr=(0,Q.di)(nr,wt,!1,!1);He.queryGeometryType=wt,He.queryGeometry=Ot({},wr)}createPointGeometry(He){const Ue={x:0,y:0,spatialReference:He.spatialReference};return He.hasZ&&(Ue.z=0),He.hasM&&(Ue.m=0),Ue}addCoordinatePoint(He,Ue,it){switch(Ue=this.applyTransform(this.transform,Ue,it,0),it){case 0:He.x=Ue;break;case 1:He.y=Ue;break;case 2:"z"in He?He.z=Ue:He.m=Ue;break;case 3:He.m=Ue}}transformPathLikeValue(He,Ue){let it=0;return Ue<=1&&(it=this.previousCoordinate[Ue],this.previousCoordinate[Ue]+=He),this.applyTransform(this.transform,He,Ue,it)}addCoordinatePolyline(He,Ue,it){this.dehydratedAddPointsCoordinate(He.paths,Ue,it)}addCoordinatePolygon(He,Ue,it){this.dehydratedAddPointsCoordinate(He.rings,Ue,it)}addCoordinateMultipoint(He,Ue,it){0===it&&He.points.push([]);const wt=this.transformPathLikeValue(Ue,it);He.points[He.points.length-1].push(wt)}createPolygonGeometry(He){return{rings:[[]],spatialReference:He.spatialReference,hasZ:!!He.hasZ,hasM:!!He.hasM}}createPolylineGeometry(He){return{paths:[[]],spatialReference:He.spatialReference,hasZ:!!He.hasZ,hasM:!!He.hasM}}createMultipointGeometry(He){return{points:[],spatialReference:He.spatialReference,hasZ:!!He.hasZ,hasM:!!He.hasM}}dehydratedAddPointsCoordinate(He,Ue,it){0===it&&0==this.toAddInCurrentPath--&&(He.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const wt=this.transformPathLikeValue(Ue,it),nr=He[He.length-1];0===it&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),nr.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=wt}deriveApplyTransform(He){const{hasZ:Ue,hasM:it}=He;return Ue&&it?fe:Ue?me:it?ve:ue}}var De=C(17253);function rt(){return(rt=(0,x.Z)(function*(Xe,He,Ue){const it=(0,Z.en)(Xe),wt=Ot({},Ue),nr=J.Z.from(He),wr=!nr.quantizationParameters,{data:Dr}=yield(0,$.executeQueryPBF)(it,nr,new he({sourceSpatialReference:nr.sourceSpatialReference,applyTransform:wr}),wt);return Dr})).apply(this,arguments)}var Le=C(84792),Ce=C(33022);function Te(Xe,He){const Ue=Xe.toJSON();return Ue.objectIds&&(Ue.objectIds=Ue.objectIds.join(",")),Ue.orderByFields&&(Ue.orderByFields=Ue.orderByFields.join(",")),!Ue.outFields||null!=He&&He.returnCountOnly?delete Ue.outFields:Ue.outFields=-1!==Ue.outFields.indexOf("*")?"*":Ue.outFields.join(","),Ue.outSpatialReference&&(Ue.outSR=Ue.outSR.wkid||JSON.stringify(Ue.outSR.toJSON()),delete Ue.outSpatialReference),Ue.dynamicDataSource&&(Ue.layer=JSON.stringify({source:Ue.dynamicDataSource}),delete Ue.dynamicDataSource),Ue}function Ye(Xe,He,Ue){return ct.apply(this,arguments)}function ct(){return(ct=(0,x.Z)(function*(Xe,He,Ue){const it=yield Je(Xe,He,Ue),wt=it.data,nr=wt.geometryType,wr=wt.spatialReference,Dr={};for(const kr of wt.relatedRecordGroups){const Wr={fields:void 0,objectIdFieldName:void 0,geometryType:nr,spatialReference:wr,hasZ:!!wt.hasZ,hasM:!!wt.hasM,features:kr.relatedRecords};if(null!=kr.objectId)Dr[kr.objectId]=Wr;else for(const cn in kr)kr.hasOwnProperty(cn)&&"relatedRecords"!==cn&&(Dr[kr[cn]]=Wr)}return nn(Ot({},it),{data:Dr})})).apply(this,arguments)}function Ae(Xe,He,Ue){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,x.Z)(function*(Xe,He,Ue){const it=yield Je(Xe,He,Ue,{returnCountOnly:!0}),wt=it.data,nr={};for(const wr of wt.relatedRecordGroups)null!=wr.objectId&&(nr[wr.objectId]=wr.count);return nn(Ot({},it),{data:nr})})).apply(this,arguments)}function Je(Xe,He){return re.apply(this,arguments)}function re(){return(re=(0,x.Z)(function*(Xe,He,Ue={},it){const wt=(0,Ce.A)(Ot(Ot(nn(Ot({},Xe.query),{f:"json"}),it),Te(He,it)));return(0,Le.default)(Xe.path+"/queryRelatedRecords",nn(Ot({},Ue),{query:Ot(Ot({},Ue.query),wt)}))})).apply(this,arguments)}var Ee=C(67010);function tt(){return(tt=(0,x.Z)(function*(Xe,He,Ue){return He=Ee.Z.from(He),Ye((0,Z.en)(Xe),He,Ue).then(wt=>{const nr=wt.data,wr={};return Object.keys(nr).forEach(Dr=>wr[Dr]=De.default.fromJSON(nr[Dr])),wr})})).apply(this,arguments)}function mt(){return(mt=(0,x.Z)(function*(Xe,He,Ue){return He=Ee.Z.from(He),Ae((0,Z.en)(Xe),He,Ot({},Ue)).then(wt=>wt.data)})).apply(this,arguments)}var bt=C(21726),yt=C(91179),at=C(62825),Mt=C(61515);const Pt="Layer does not support extent calculation.";function Zt(Xe,He,Ue,it){return rr.apply(this,arguments)}function rr(){return(rr=(0,x.Z)(function*(Xe,He,Ue,it){const wt=yield Ht(Xe,He,"json",it);return(0,Mt.p)(He,Ue,wt.data),wt})).apply(this,arguments)}function vr(Xe,He,Ue){return yr.apply(this,arguments)}function yr(){return(yr=(0,x.Z)(function*(Xe,He,Ue){return(0,te.pC)(He.timeExtent)&&He.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Ht(Xe,He,"json",Ue,{returnIdsOnly:!0})})).apply(this,arguments)}function gr(Xe,He,Ue){return _t.apply(this,arguments)}function _t(){return(_t=(0,x.Z)(function*(Xe,He,Ue){return(0,te.pC)(He.timeExtent)&&He.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Ht(Xe,He,"json",Ue,{returnExtentOnly:!0,returnCountOnly:!0}).then(it=>{const wt=it.data;if(wt.hasOwnProperty("extent"))return it;if(wt.features)throw new Error(Pt);if(wt.hasOwnProperty("count"))throw new Error(Pt);return it})})).apply(this,arguments)}function $t(Xe,He,Ue){return(0,te.pC)(He.timeExtent)&&He.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Ht(Xe,He,"json",Ue,{returnIdsOnly:!0,returnCountOnly:!0})}function Ht(Xe,He,Ue,it={},wt={}){const nr="string"==typeof Xe?(0,bt.mN)(Xe):Xe,wr=He.geometry?[He.geometry]:[];return it.responseType="pbf"===Ue?"array-buffer":"json",(0,at.aX)(wr,null,it).then(Dr=>{const kr=Dr&&Dr[0];(0,te.pC)(kr)&&((He=He.clone()).geometry=kr);const Wr=(0,Ce.A)(Ot(Ot(nn(Ot({},nr.query),{f:Ue}),wt),function Vt(Xe,He){var Ue,it;const wt=Xe.geometry,nr=Xe.toJSON(),wr=nr;if((0,te.pC)(wt)&&(wr.geometry=JSON.stringify(wt),wr.geometryType=(0,yt.Ji)(wt),wr.inSR=wt.spatialReference.wkid||JSON.stringify(wt.spatialReference)),null!=(Ue=nr.topFilter)&&Ue.groupByFields&&(wr.topFilter.groupByFields=nr.topFilter.groupByFields.join(",")),null!=(it=nr.topFilter)&&it.orderByFields&&(wr.topFilter.orderByFields=nr.topFilter.orderByFields.join(",")),nr.topFilter&&(wr.topFilter=JSON.stringify(wr.topFilter)),nr.objectIds&&(wr.objectIds=nr.objectIds.join(",")),nr.orderByFields&&(wr.orderByFields=nr.orderByFields.join(",")),nr.outFields&&!(null!=He&&He.returnCountOnly||null!=He&&He.returnExtentOnly||null!=He&&He.returnIdsOnly)?wr.outFields=-1!==nr.outFields.indexOf("*")?"*":nr.outFields.join(","):delete wr.outFields,nr.outSR?wr.outSR=nr.outSR.wkid||JSON.stringify(nr.outSR):wt&&nr.returnGeometry&&(wr.outSR=wr.inSR),nr.returnGeometry&&delete nr.returnGeometry,nr.timeExtent){const Dr=nr.timeExtent,{start:kr,end:Wr}=Dr;null==kr&&null==Wr||(wr.time=kr===Wr?kr:`${null==kr?"null":kr},${null==Wr?"null":Wr}`),delete nr.timeExtent}return wr}(He,wt)));return(0,Le.default)((0,bt.v_)(nr.path,"queryTopFeatures"),nn(Ot({},it),{query:Ot(Ot({},Wr),it.query)}))})}var er=C(6871);function fr(){return(fr=(0,x.Z)(function*(Xe,He,Ue,it){const wt=(0,Z.en)(Xe),nr=Ot({},it),{data:wr}=yield Zt(wt,er.Z.from(He),Ue,nr);return De.default.fromJSON(wr)})).apply(this,arguments)}function St(){return(St=(0,x.Z)(function*(Xe,He,Ue){const it=(0,Z.en)(Xe);return(yield vr(it,er.Z.from(He),Ot({},Ue))).data.objectIds})).apply(this,arguments)}function Wt(){return(Wt=(0,x.Z)(function*(Xe,He,Ue){const it=(0,Z.en)(Xe),wt=yield gr(it,er.Z.from(He),Ot({},Ue));return{count:wt.data.count,extent:H.Z.fromJSON(wt.data.extent)}})).apply(this,arguments)}function Kt(){return(Kt=(0,x.Z)(function*(Xe,He,Ue){const it=(0,Z.en)(Xe);return(yield $t(it,er.Z.from(He),Ot({},Ue))).data.count})).apply(this,arguments)}var Ze=C(79308);let st=class extends Ze.Z{constructor(Xe){super(Xe),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(Xe,He){return this.executeJSON(Xe,He).then(Ue=>this.featureSetFromJSON(Xe,Ue,He))}executeJSON(Xe,He){var Ue=this;return(0,x.Z)(function*(){var it;const wt=Ot(Ot({},Ue.requestOptions),He),nr=Ue._normalizeQuery(Xe),wr=null!=(null==(it=Xe.outStatistics)?void 0:it[0]),Dr=(0,ie.Z)("featurelayer-pbf-statistics"),kr=!wr||Dr;let Wr;if("pbf"===Ue.format&&kr)try{Wr=yield function je(Xe,He,Ue){return rt.apply(this,arguments)}(Ue.url,nr,wt)}catch(cn){if("query:parsing-pbf"!==cn.name)throw cn;Ue.format="json"}return"json"!==Ue.format&&kr||(Wr=yield(0,le.F)(Ue.url,nr,wt)),Ue._normalizeFields(Wr.fields),Wr})()}featureSetFromJSON(Xe,He,Ue){var it=this;return(0,x.Z)(function*(){if(!(it._queryIs3DObjectFormat(Xe)&&(0,te.pC)(it.infoFor3D)&&He.features&&He.features.length))return De.default.fromJSON(He);const{meshFeatureSetFromJSON:wt}=yield(0,oe.Hl)(Promise.all([C.e(479),C.e(853),C.e(8592),C.e(582)]).then(C.bind(C,10582)),Ue);return wt(Xe,it.infoFor3D,He)})()}executeForCount(Xe,He){const Ue=Ot(Ot({},this.requestOptions),He),it=this._normalizeQuery(Xe);return(0,P.P)(this.url,it,Ue)}executeForExtent(Xe,He){const Ue=Ot(Ot({},this.requestOptions),He),it=this._normalizeQuery(Xe);return function de(Xe,He,Ue){return ee.apply(this,arguments)}(this.url,it,Ue)}executeForIds(Xe,He){const Ue=Ot(Ot({},this.requestOptions),He),it=this._normalizeQuery(Xe);return(0,ye.G)(this.url,it,Ue)}executeRelationshipQuery(Xe,He){Xe=Ee.Z.from(Xe);const Ue=Ot(Ot({},this.requestOptions),He);return(this.gdbVersion||this.dynamicDataSource)&&((Xe=Xe.clone()).gdbVersion=Xe.gdbVersion||this.gdbVersion,Xe.dynamicDataSource=Xe.dynamicDataSource||this.dynamicDataSource),function $e(Xe,He,Ue){return tt.apply(this,arguments)}(this.url,Xe,Ue)}executeRelationshipQueryForCount(Xe,He){Xe=Ee.Z.from(Xe);const Ue=Ot(Ot({},this.requestOptions),He);return(this.gdbVersion||this.dynamicDataSource)&&((Xe=Xe.clone()).gdbVersion=Xe.gdbVersion||this.gdbVersion,Xe.dynamicDataSource=Xe.dynamicDataSource||this.dynamicDataSource),function pt(Xe,He,Ue){return mt.apply(this,arguments)}(this.url,Xe,Ue)}executeAttachmentQuery(Xe,He){const Ue=Ot(Ot({},this.requestOptions),He);return function K(Xe,He,Ue){return V.apply(this,arguments)}(this.url,Xe,Ue)}executeTopFeaturesQuery(Xe,He){const Ue=Ot(Ot({},this.requestOptions),He);return function lr(Xe,He,Ue,it){return fr.apply(this,arguments)}(this.parsedUrl,Xe,this.sourceSpatialReference,Ue)}executeForTopIds(Xe,He){const Ue=Ot(Ot({},this.requestOptions),He);return function ht(Xe,He,Ue){return St.apply(this,arguments)}(this.parsedUrl,Xe,Ue)}executeForTopExtents(Xe,He){const Ue=Ot(Ot({},this.requestOptions),He);return function Nt(Xe,He,Ue){return Wt.apply(this,arguments)}(this.parsedUrl,Xe,Ue)}executeForTopCount(Xe,He){const Ue=Ot(Ot({},this.requestOptions),He);return function Qt(Xe,He,Ue){return Kt.apply(this,arguments)}(this.parsedUrl,Xe,Ue)}_normalizeQuery(Xe){let He=J.Z.from(Xe);if(He.sourceSpatialReference=He.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(He=He===Xe?He.clone():He,He.gdbVersion=Xe.gdbVersion||this.gdbVersion,He.dynamicDataSource=Xe.dynamicDataSource?X.n.from(Xe.dynamicDataSource):this.dynamicDataSource),(0,te.pC)(this.infoFor3D)&&this._queryIs3DObjectFormat(Xe)){He=He===Xe?He.clone():He,He.formatOf3DObjects=null;for(const Ue of this.infoFor3D.queryFormats){if("3D_glb"===Ue.id){He.formatOf3DObjects=Ue.id;break}"3D_gltf"!==Ue.id||He.formatOf3DObjects||(He.formatOf3DObjects=Ue.id)}if(!He.formatOf3DObjects)throw new ne.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if((0,te.Wi)(He.outFields)||!He.outFields.includes("*")){He=He===Xe?He.clone():He,(0,te.Wi)(He.outFields)&&(He.outFields=[]);const{originX:Ue,originY:it,originZ:wt,translationX:nr,translationY:wr,translationZ:Dr,scaleX:kr,scaleY:Wr,scaleZ:cn,rotationX:Kn,rotationY:$i,rotationZ:si,rotationDeg:co}=this.infoFor3D.transformFieldRoles;He.outFields.push(Ue,it,wt,nr,wr,Dr,kr,Wr,cn,Kn,$i,si,co)}}return He}_normalizeFields(Xe){if((0,te.pC)(this.fieldsIndex)&&(0,te.pC)(Xe))for(const He of Xe){const Ue=this.fieldsIndex.get(He.name);Ue&&Object.assign(He,Ue.toJSON())}}_queryIs3DObjectFormat(Xe){return(0,te.pC)(this.infoFor3D)&&Xe.returnGeometry&&"xyFootprint"!==Xe.multipatchOption&&!Xe.outStatistics}};(0,T._)([(0,Y.Cb)({type:X.n})],st.prototype,"dynamicDataSource",void 0),(0,T._)([(0,Y.Cb)()],st.prototype,"fieldsIndex",void 0),(0,T._)([(0,Y.Cb)()],st.prototype,"format",void 0),(0,T._)([(0,Y.Cb)()],st.prototype,"gdbVersion",void 0),(0,T._)([(0,Y.Cb)()],st.prototype,"infoFor3D",void 0),(0,T._)([(0,Y.Cb)()],st.prototype,"sourceSpatialReference",void 0),st=(0,T._)([(0,B.j)("esri.tasks.QueryTask")],st);const Ge=st},79308:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var x=C(17626),T=C(14517),ne=C(21726),ie=C(77712),j=(C(85931),C(8314),C(90912),C(76898));let L=class extends T.Z{constructor(...X){super(...X),this.requestOptions=null,this.url=null}normalizeCtorArgs(X,Z){return"string"!=typeof X?X:Ot({url:X},Z)}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(X){return X?(0,ne.mN)(X):null}_encode(X,Z,z){const ae={};for(const K in X){if("declaredClass"===K)continue;const V=X[K];if(null!=V&&"function"!=typeof V)if(Array.isArray(V)){ae[K]=[];for(let P=0;P<V.length;P++)ae[K][P]=this._encode(V[P])}else if("object"==typeof V)if(V.toJSON){const P=V.toJSON(z&&z[K]);ae[K]=Z?P:JSON.stringify(P)}else ae[K]=Z?V:JSON.stringify(V);else ae[K]=V}return ae}};(0,x._)([(0,ie.Cb)({readOnly:!0})],L.prototype,"parsedUrl",null),(0,x._)([(0,ie.Cb)()],L.prototype,"requestOptions",void 0),(0,x._)([(0,ie.Cb)({type:String})],L.prototype,"url",void 0),L=(0,x._)([(0,j.j)("esri.tasks.Task")],L);const B=L},33022:(ut,Oe,C)=>{"use strict";function x(T){const ne={};for(const ie in T){if("declaredClass"===ie)continue;const te=T[ie];if(null!=te&&"function"!=typeof te)if(Array.isArray(te)){ne[ie]=[];for(let oe=0;oe<te.length;oe++)ne[ie][oe]=x(te[oe])}else"object"==typeof te?te.toJSON&&(ne[ie]=JSON.stringify(te)):ne[ie]=te}return ne}C.d(Oe,{A:()=>x})},81340:(ut,Oe,C)=>{"use strict";C.d(Oe,{n:()=>oe});var x=C(35575),T=C(2004),ne=C(65401),ie=C(89621),te=C(58098);class oe{constructor(j,L){this.key=new te.Z(0,0,0,0),this.bounds=(0,ne.Ue)(),this.objectIds=new Set,this.key.set(L);const B=j.getLODInfoAt(this.key);this.tileInfoView=j,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=B.resolution,this.scale=B.scale,this.level=B.level}get id(){return this.key.id}get extent(){return T.Z.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const j=this.key.getChildKeys(),L=x.Z.acquire();for(let B=0;B<j.length;B++)L[B]=new oe(this.tileInfoView,j[B]);return L}getQuantizationParameters(){return ie.Z.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}},56656:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>B});var x=C(61885),T=C(8314),ne=C(76279),ie=C(81340),te=C(84378),oe=C(58098);const Y={added:[],removed:[]},j=new Set,L=new oe.Z(0,0,0,0);class B extends x.Z{constructor(Z){super(),this._tiles=new Map,this._index=(0,ne.r)(9,(0,T.Z)("esri-csp-restrictions")?z=>({minX:z.bounds[0],minY:z.bounds[1],maxX:z.bounds[2],maxY:z.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=Z}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(Z){return this._tiles.has(Z)}get(Z){return this._tiles.get(Z)}boundsIntersections(Z){return this._index.search({minX:Z[0],minY:Z[1],maxX:Z[2],maxY:Z[3]})}updateTiles(Z){const z={added:[],removed:[]};for(const ae of Z.added)if(!this.has(ae)){const K=new ie.n(this.tileScheme,ae);this._tiles.set(ae,K),this._index.insert(K),z.added.push(K)}for(const ae of Z.removed)if(this.has(ae)){const K=this.get(ae);this._tiles.delete(ae),this._index.remove(K),z.removed.push(K)}this.tiles.length=0,this._tiles.forEach(ae=>this.tiles.push(ae)),(z.added.length||z.removed.length)&&this.emit("update",z)}setViewState(Z){const z=this.tileScheme.getTileCoverage(Z,0);if(!z)return;const{spans:ae,lodInfo:K}=z,{level:V}=K;if(ae.length>0)for(const{row:P,colFrom:F,colTo:$}of ae)for(let J=F;J<=$;J++){const H=L.set(V,P,K.normalizeCol(J),K.getWorldForColumn(J)).id;if(j.add(H),!this.has(H)){const de=new ie.n(this.tileScheme,H);this._tiles.set(H,de),this._index.insert(de),this.tiles.push(de),Y.added.push(de)}}for(let P=this.tiles.length-1;P>=0;P--){const F=this.tiles[P];j.has(F.id)||(this._tiles.delete(F.id),this.tiles.splice(P,1),this._index.remove(F),Y.removed.push(F))}(Y.added.length||Y.removed.length)&&this.emit("update",Y),te.Z.pool.release(z),j.clear(),Y.added.length=0,Y.removed.length=0}}},33412:(ut,Oe,C)=>{"use strict";C.d(Oe,{T:()=>T});class T{constructor(){this._names=new Map}begin(ie){this._names.has(ie)||(this._names.set(ie,!1),-1!==ie.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${ie}.Start`))}end(ie){this._names.has(ie)&&!this._names.get(ie)&&(this._names.set(ie,!0),performance.mark(`Esri.${ie}.End`))}record(ie){this._names.has(ie)||(this._names.set(ie,!0),performance.mark(`Esri.${ie}`))}}},17083:(ut,Oe,C)=>{"use strict";var x=C(17626),T=C(14517),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(67831),L=C(71251);const X=new Set,Z=[],z=new Map,ae=[0,0];let K=class extends T.Z{constructor(P){super(P),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:P,process:F}=this;this._queue=new L.e({concurrency:P,process:($,J)=>{const H=this._keyToItem.get($);return F(H,{signal:J})},peeker:$=>$.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(P){this._queue.abort("string"==typeof P?P:P.id)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(P){return this._keyToItem.has("string"==typeof P?P:P.id)}isOngoing(P){const F="string"==typeof P?P:P.id;return this.has(F)&&this._queue.isOngoing(F)}pause(){this._queue.pause()}push(P,F){const $=P.key.id+"-"+F;if(this.has($))return this.get($);const J=this._queue.push($),H=()=>{this._keyToItem.delete($),this.notifyChange("updating")};return this._keyToItem.set($,P),J.then(H,H),this.notifyChange("updating"),J}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(P){if(!this.state)return P.values().next().value;const F=this.tileInfoView;let $=Number.NEGATIVE_INFINITY,J=Number.POSITIVE_INFINITY;P.forEach(ge=>{const se=this._keyToItem.get(ge),Q=this.tileInfoView.getTileScale(se.key);z.has(Q)||(z.set(Q,[]),$=Math.max(Q,$),J=Math.min(Q,J)),z.get(Q).push(se.key),X.add(Q)});let H=this.state.scale;z.has(H)||(function B(P,F){P.length=0,F.forEach($=>P.push($))}(Z,X),Z.sort((ge,se)=>ge-se),H=Z.reduce((ge,se)=>Math.abs(se-H)<Math.abs(ge-H)?se:ge,Z[0])),H=Math.min(H,$),H=Math.max(H,J);const de=z.get(H),ee=F.getClosestInfoForScale(H),ye=ee.getColumnForX(this.state.center[0]),le=ee.getRowForY(this.state.center[1]);return de.sort((ge,se)=>{const Q=ee.denormalizeCol(ge.col,ge.world),pe=ee.denormalizeCol(se.col,se.world);return Math.sqrt((ye-Q)*(ye-Q)+(le-ge.row)*(le-ge.row))-Math.sqrt((ye-pe)*(ye-pe)+(le-se.row)*(le-se.row))}),X.clear(),z.clear(),de[0].id}_peekByCenterFirst(P){if(!this.state)return P.values().next().value;const F=this.tileInfoView,$=this.state.center;let J=Number.POSITIVE_INFINITY,H=null;return P.forEach(de=>{const ee=this._keyToItem.get(de);F.getTileCoords(ae,ee.key);const ye=(0,j.b)(ae,$);ye<J&&(J=ye,H=ee.key)}),H.id}};(0,x._)([(0,ne.Cb)({constructOnly:!0})],K.prototype,"concurrency",void 0),(0,x._)([(0,ne.Cb)({constructOnly:!0})],K.prototype,"process",void 0),(0,x._)([(0,ne.Cb)()],K.prototype,"state",void 0),(0,x._)([(0,ne.Cb)({constructOnly:!0})],K.prototype,"strategy",void 0),(0,x._)([(0,ne.Cb)({constructOnly:!0})],K.prototype,"tileInfoView",void 0),(0,x._)([(0,ne.Cb)({readOnly:!0})],K.prototype,"updating",null),K=(0,x._)([(0,Y.j)("esri.views.2d.tiling.PagedTileQueue")],K)},84378:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>T});var x=C(27899);class T{constructor(){this.spans=[]}acquire(ie){this.lodInfo=ie}release(){this.lodInfo=null,this.spans.length=0}forEach(ie,te){const{spans:oe,lodInfo:Y}=this,{level:j}=Y;if(0!==oe.length)for(const{row:L,colFrom:B,colTo:X}of oe)for(let Z=B;Z<=X;Z++)ie.call(te,j,L,Y.normalizeCol(Z),Y.getWorldForColumn(Z))}}T.pool=new x.Z(T)},9598:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>K});var x=C(37053),T=C(62208),ne=C(58098);function ie(V,P){return[V,P]}function te(V,P,F){return V[0]=P,V[1]=F,V}const Y=new ne.Z("0/0/0/0");class j{constructor(P,F,$,J,H,de,ee,ye,le,ge,se,Q){this.level=P,this.resolution=F,this.scale=$,this.origin=J,this.first=H,this.last=de,this.size=ee,this.norm=ye,this.worldStart=le,this.worldEnd=ge,this.worldSize=se,this.wrap=Q}static create(P,F,$=null){const J=(0,x.C5)(P.spatialReference),H=F.origin||ie(P.origin.x,P.origin.y),de=ie(P.size[0]*F.resolution,P.size[1]*F.resolution),ee=ie(-1/0,-1/0),ye=ie(1/0,1/0),le=ie(1/0,1/0);(0,T.pC)($)&&(te(ee,Math.max(0,Math.floor(($.xmin-H[0])/de[0])),Math.max(0,Math.floor((H[1]-$.ymax)/de[1]))),te(ye,Math.max(0,Math.floor(($.xmax-H[0])/de[0])),Math.max(0,Math.floor((H[1]-$.ymin)/de[1]))),te(le,ye[0]-ee[0]+1,ye[1]-ee[1]+1));const{cols:ge,rows:se}=F;let Q,pe,ue,me;return!$&&ge&&se&&(te(ee,ge[0],se[0]),te(ye,ge[1],se[1]),te(le,ge[1]-ge[0]+1,se[1]-se[0]+1)),P.isWrappable?(Q=ie(Math.ceil(Math.round((J.valid[1]-J.valid[0])/F.resolution)/P.size[0]),le[1]),pe=ie(Math.floor((J.origin[0]-H[0])/de[0]),ee[1]),ue=ie(Q[0]+pe[0]-1,ye[1]),me=!0):(pe=ee,ue=ye,Q=le,me=!1),new j(F.level,F.resolution,F.scale,H,ee,ye,le,de,pe,ue,Q,me)}normalizeCol(P){if(!this.wrap)return P;const F=this.worldSize[0];return P<0?F-1-Math.abs((P+1)%F):P%F}denormalizeCol(P,F){return this.wrap?this.worldSize[0]*F+P:P}getWorldForColumn(P){return this.wrap?Math.floor(P/this.worldSize[0]):0}getFirstColumnForWorld(P){return P*this.worldSize[0]+this.first[0]}getLastColumnForWorld(P){return P*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(P){return(P-this.origin[0])/this.norm[0]}getXForColumn(P){return this.origin[0]+P*this.norm[0]}getRowForY(P){return(this.origin[1]-P)/this.norm[1]}getYForRow(P){return this.origin[1]-P*this.norm[1]}getTileBounds(P,F,$=!1){Y.set(F);const J=$?Y.col:this.denormalizeCol(Y.col,Y.world),H=Y.row;return function oe(V,P,F,$,J){V[0]=P,V[1]=F,V[2]=$,V[3]=J}(P,this.getXForColumn(J),this.getYForRow(H+1),this.getXForColumn(J+1),this.getYForRow(H)),P}getTileCoords(P,F,$=!1){Y.set(F);const J=$?Y.col:this.denormalizeCol(Y.col,Y.world);return Array.isArray(P)?te(P,this.getXForColumn(J),this.getYForRow(Y.row)):(P.x=this.getXForColumn(J),P.y=this.getYForRow(Y.row)),P}}var L=C(84378);class B{constructor(P,F,$){this.row=P,this.colFrom=F,this.colTo=$}}const X=new ne.Z("0/0/0/0");class Z{constructor(P,F,$,J,H,de,ee,ye){this.x=P,this.ymin=F,this.ymax=$,this.invM=J,this.leftAdjust=H,this.rightAdjust=de,this.leftBound=ee,this.rightBound=ye}static create(P,F){P[1]>F[1]&&([P,F]=[F,P]);const[$,J]=P,[H,de]=F,ee=H-$,ye=de-J,le=0!==ye?ee/ye:0,ge=(Math.ceil(J)-J)*le,se=(Math.floor(J)-J)*le;return new Z($,Math.floor(J),Math.ceil(de),le,ee<0?ge:se,ee<0?se:ge,ee<0?H:$,ee<0?$:H)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const z=[[0,0],[0,0],[0,0],[0,0]];class K{constructor(P,F=null){this.tileInfo=P,this.fullExtent=F,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const $=P.lods.slice();$.sort(function(H,de){return de.scale-H.scale});const J=this._lodInfos=$.map(H=>j.create(P,H,F));$.forEach((H,de)=>{this._infoByLevel[H.level]=J[de],this._infoByScale[H.scale]=J[de],this.scales[de]=H.scale},this),this._wrap=P.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(P){return this._infoByLevel["number"==typeof P?P:P.level]}getTileBounds(P,F,$=!1){X.set(F);const J=this._infoByLevel[X.level];return J?J.getTileBounds(P,X,$):P}getTileCoords(P,F,$=!1){X.set(F);const J=this._infoByLevel[X.level];return J?J.getTileCoords(P,X,$):P}getTileCoverage(P,F=192,$="closest"){const J="closest"===$?this.getClosestInfoForScale(P.scale):this.getSmallestInfoForScale(P.scale),H=L.Z.pool.acquire(J),de=this._wrap;let ee,ye,le,ge=1/0,se=-1/0;const Q=H.spans;z[0][0]=z[0][1]=z[1][1]=z[3][0]=-F,z[1][0]=z[2][0]=P.size[0]+F,z[2][1]=z[3][1]=P.size[1]+F;for(const ve of z)P.toMap(ve,ve),ve[0]=J.getColumnForX(ve[0]),ve[1]=J.getRowForY(ve[1]);const pe=[];let ue=3;for(let ve=0;ve<4;ve++){if(z[ve][1]===z[ue][1]){ue=ve;continue}const fe=Z.create(z[ve],z[ue]);ge=Math.min(fe.ymin,ge),se=Math.max(fe.ymax,se),void 0===pe[fe.ymin]&&(pe[fe.ymin]=[]),pe[fe.ymin].push(fe),ue=ve}if(null==ge||null==se||se-ge>100)return null;let me=[];for(ee=ge;ee<se;){null!=pe[ee]&&(me=me.concat(pe[ee])),ye=1/0,le=-1/0;for(let ve=me.length-1;ve>=0;ve--){const fe=me[ve];ye=Math.min(ye,fe.getLeftCol()),le=Math.max(le,fe.getRightCol())}if(ye=Math.floor(ye),le=Math.floor(le),ee>=J.first[1]&&ee<=J.last[1])if(de)if(J.size[0]<J.worldSize[0]){const ve=Math.floor(le/J.worldSize[0]);for(let fe=Math.floor(ye/J.worldSize[0]);fe<=ve;fe++)Q.push(new B(ee,Math.max(J.getFirstColumnForWorld(fe),ye),Math.min(J.getLastColumnForWorld(fe),le)))}else Q.push(new B(ee,ye,le));else ye>J.last[0]||le<J.first[0]||(ye=Math.max(ye,J.first[0]),le=Math.min(le,J.last[0]),Q.push(new B(ee,ye,le)));ee+=1;for(let ve=me.length-1;ve>=0;ve--){const fe=me[ve];fe.ymax>=ee?fe.incrRow():me.splice(ve,1)}}return H}getTileParentId(P){X.set(P);const $=this._lodInfos.indexOf(this._infoByLevel[X.level])-1;return $<0?null:(this._getTileIdAtLOD(X,this._lodInfos[$],X),X.id)}getTileResolution(P){const F=this._infoByLevel["object"==typeof P?P.level:P];return F?F.resolution:-1}getTileScale(P){const F=this._infoByLevel[P.level];return F?F.scale:-1}intersects(P,F){X.set(F);const $=this._infoByLevel[X.level],J=P.lodInfo;if(J.resolution>$.resolution){this._getTileIdAtLOD(X,J,X);const de=J.denormalizeCol(X.col,X.world);for(const ee of P.spans)if(ee.row===X.row&&ee.colFrom<=de&&ee.colTo>=de)return!0}if(J.resolution<$.resolution){const[de,ee,ye,le]=P.spans.reduce((me,ve)=>(me[0]=Math.min(me[0],ve.row),me[1]=Math.max(me[1],ve.row),me[2]=Math.min(me[2],ve.colFrom),me[3]=Math.max(me[3],ve.colTo),me),[1/0,-1/0,1/0,-1/0]),ge=$.denormalizeCol(X.col,X.world),se=J.getColumnForX($.getXForColumn(ge)),Q=J.getRowForY($.getYForRow(X.row)),pe=J.getColumnForX($.getXForColumn(ge+1))-1,ue=J.getRowForY($.getYForRow(X.row+1))-1;return!(se>le||pe<ye||Q>ee||ue<de)}const H=J.denormalizeCol(X.col,X.world);return P.spans.some(de=>de.row===X.row&&de.colFrom<=H&&de.colTo>=H)}normalizeBounds(P,F,$){if(P[0]=F[0],P[1]=F[1],P[2]=F[2],P[3]=F[3],this._wrap){const J=(0,x.C5)(this.tileInfo.spatialReference),H=-$*(J.valid[1]-J.valid[0]);P[0]+=H,P[2]+=H}return P}getSmallestInfoForScale(P){const F=this.scales;if(this._infoByScale[P])return this._infoByScale[P];if(P>F[0])return this._infoByScale[F[0]];for(let $=1;$<F.length-1;$++)if(P>F[$]+1e-6)return this._infoByScale[F[$-1]];return this._infoByScale[F[F.length-1]]}getClosestInfoForScale(P){const F=this.scales;return this._infoByScale[P]||(P=F.reduce(($,J)=>Math.abs(J-P)<Math.abs($-P)?J:$,F[0])),this._infoByScale[P]}scaleToLevel(P){const F=this.scales;if(this._infoByScale[P])return this._infoByScale[P].level;for(let $=F.length-1;$>=0;$--)if(P<F[$])return $===F.length-1?this._infoByScale[F[F.length-1]].level:this._infoByScale[F[$]].level+(F[$]-P)/(F[$]-F[$+1]);return this._infoByScale[F[0]].level}scaleToZoom(P){return this.tileInfo.scaleToZoom(P)}_getTileIdAtLOD(P,F,$){const J=this._infoByLevel[$.level];return P.set($),F.resolution<J.resolution?null:(F.resolution===J.resolution||(P.level=F.level,P.col=Math.floor($.col*J.resolution/F.resolution+.01),P.row=Math.floor($.row*J.resolution/F.resolution+.01)),P)}}},58098:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>T});var x=C(27899);class T{constructor(ie,te,oe,Y){this.set(ie,te,oe,Y)}static getId(ie,te,oe,Y){return"object"==typeof ie?`${ie.level}/${ie.row}/${ie.col}/${ie.world}`:`${ie}/${te}/${oe}/${Y}`}get key(){return this}get id(){return this.toString()}set id(ie){this.set(ie)}get hash(){return(3&this.world)<<30|(4095&this.col)<<22|(4095&this.row)<<8|63&this.level}acquire(ie,te,oe,Y){this.set(ie,te,oe,Y)}contains(ie){const te=ie.level-this.level;return this.row===ie.row>>te&&this.col===ie.col>>te&&this.world===ie.world}equals(ie){return this.level===ie.level&&this.row===ie.row&&this.col===ie.col&&this.world===ie.world}clone(){return new T(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(ie,te,oe,Y){if(null==ie)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof ie)this.level=ie.level||0,this.row=ie.row||0,this.col=ie.col||0,this.world=ie.world||0;else if("string"==typeof ie){const[j,L,B,X]=ie.split("/");this.level=parseFloat(j),this.row=parseFloat(L),this.col=parseFloat(B),this.world=parseFloat(X)}else this.level=+ie,this.row=+te,this.col=+oe,this.world=+Y||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new T(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const ie=this.level+1,te=this.row<<1,oe=this.col<<1,Y=this.world;return[new T(ie,te,oe,Y),new T(ie,te,oe+1,Y),new T(ie,te+1,oe,Y),new T(ie,te+1,oe+1,Y)]}compareRowMajor(ie){return this.row<ie.row?-1:this.row>ie.row?1:this.col<ie.col?-1:this.col>ie.col?1:0}}T.pool=new x.Z(T,null,null,25,50)},8480:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>V});var x=C(17626),T=C(14517),ne=C(77712),Y=(C(85931),C(8314),C(90912),C(76898)),j=C(67831),L=C(71251);const X=new Set,Z=[],z=new Map,ae=[0,0];let K=class extends T.Z{constructor(P){super(P),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:P,process:F,strategy:$}=this;this._queue=new L.e({concurrency:P,process:(J,H)=>{const de=this._keyToItem.get(J);return F(de,{signal:H})},peeker:"scale-first"===$?J=>this._peekByScaleFirst(J):J=>this._peekByCenterFirst(J)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(P){this._queue.abort("string"==typeof P?P:P.id)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(P){return this._keyToItem.has("string"==typeof P?P:P.id)}isOngoing(P){const F="string"==typeof P?P:P.id;return this.has(F)&&this._queue.isOngoing(F)}pause(){this._queue.pause()}push(P){const F=P.key.id;if(this._queue.has(F))return this._queue.get(F);const $=this._queue.push(F),J=()=>{this._keyToItem.delete(F),this.notifyChange("updating")};return this._keyToItem.set(F,P),$.then(J,J),this.notifyChange("updating"),$}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(P){if(!this.state)return P.values().next().value;const F=this.tileInfoView;let $=Number.NEGATIVE_INFINITY,J=Number.POSITIVE_INFINITY;P.forEach(ge=>{const se=this._keyToItem.get(ge),Q=this.tileInfoView.getTileScale(se.key);z.has(Q)||(z.set(Q,[]),$=Math.max(Q,$),J=Math.min(Q,J)),z.get(Q).push(se.key),X.add(Q)});let H=this.state.scale;z.has(H)||(function B(P,F){P.length=0,F.forEach($=>P.push($))}(Z,X),Z.sort((ge,se)=>ge-se),H=Z.reduce((ge,se)=>Math.abs(se-H)<Math.abs(ge-H)?se:ge,Z[0])),H=Math.min(H,$),H=Math.max(H,J);const de=z.get(H),ee=F.getClosestInfoForScale(H),ye=ee.getColumnForX(this.state.center[0]),le=ee.getRowForY(this.state.center[1]);return de.sort((ge,se)=>{const Q=ee.denormalizeCol(ge.col,ge.world),pe=ee.denormalizeCol(se.col,se.world);return Math.sqrt((ye-Q)*(ye-Q)+(le-ge.row)*(le-ge.row))-Math.sqrt((ye-pe)*(ye-pe)+(le-se.row)*(le-se.row))}),X.clear(),z.clear(),de[0].id}_peekByCenterFirst(P){if(!this.state)return P.values().next().value;const F=this.tileInfoView,$=this.state.center;let J=Number.POSITIVE_INFINITY,H=null;return P.forEach(de=>{const ee=this._keyToItem.get(de);F.getTileCoords(ae,ee.key);const ye=(0,j.b)(ae,$);ye<J&&(J=ye,H=ee.key)}),H.id}};(0,x._)([(0,ne.Cb)({constructOnly:!0})],K.prototype,"concurrency",void 0),(0,x._)([(0,ne.Cb)({constructOnly:!0})],K.prototype,"process",void 0),(0,x._)([(0,ne.Cb)()],K.prototype,"state",void 0),(0,x._)([(0,ne.Cb)({constructOnly:!0})],K.prototype,"strategy",void 0),(0,x._)([(0,ne.Cb)({constructOnly:!0})],K.prototype,"tileInfoView",void 0),(0,x._)([(0,ne.Cb)({readOnly:!0})],K.prototype,"updating",null),K=(0,x._)([(0,Y.j)("esri.views.2d.tiling.TileQueue")],K);const V=K},79527:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>X});var x=C(65401),T=C(67831);class ne{constructor(z,ae,K){this.maxSize=z,this.tileInfoView=ae,this.removedFunc=K,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(z){return this._tilePerId.has(z)}get(z){return this._tilePerId.get(z)}pop(z){const ae=this._tilePerId.get(z);if(!ae)return null;const V=this._tileKeysPerLevel[ae.key.level];ie(this._tilePerId,z);for(let P=0;P<V.length;P++)if(V[P].id===z){V.splice(P,1);break}return ae.visible=!0,ae}add(z){z.visible=!1;const ae=z.key,K=ae.id;if(this._tilePerId.has(K))return;this._tilePerId.set(K,z);const V=ae.level;this._tileKeysPerLevel[V]||(this._tileKeysPerLevel[V]=[]),this._tileKeysPerLevel[V].push(ae)}prune(z,ae,K){let V=this._tilePerId.size;if(V<=this.maxSize)return;let P=this._tileKeysPerLevel.length-1;for(;V>this.maxSize&&P>=0;)P!==z&&(V=this._pruneAroundCenterTile(V,ae,K,P)),P--;V>this.maxSize&&(V=this._pruneAroundCenterTile(V,ae,K,z))}_pruneAroundCenterTile(z,ae,K,V){const P=this._tileKeysPerLevel[V];if(!P||0===P.length)return z;const{size:F,origin:$}=this.tileInfoView.tileInfo,J=K*F[0],H=K*F[1],de=[0,0],ee=[0,0];for(P.sort((ye,le)=>(de[0]=$.x+J*(ye.col+.5),de[1]=$.y-H*(ye.row+.5),ee[0]=$.x+J*(le.col+.5),ee[1]=$.y-H*(le.row+.5),(0,T.a)(de,ae)-(0,T.a)(ee,ae)));P.length>0;){const ye=P.pop();if(this._removeTile(ye.id),--z===this.maxSize)break}return z}_removeTile(z){const ae=this._tilePerId.get(z);this.removedFunc&&this.removedFunc(ae),ie(this._tilePerId,z)}}function ie(Z,z){Z.delete(z)}var te=C(84378);const Y=new(C(58098).Z)(0,0,0,0),j=new Map,L=[],B=[];class X{constructor(z){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=z.acquireTile,this.releaseTile=z.releaseTile,this.tileInfoView=z.tileInfoView,this.resampling=null==z.resampling||!!z.resampling,z.cachePolicy&&(this.cachePolicy=z.cachePolicy),z.coveragePolicy&&(this.coveragePolicy=z.coveragePolicy),null!=z.buffer&&(this.buffer=z.buffer),z.cacheSize&&(this._tileCache=new ne(z.cacheSize,this.tileInfoView,ae=>{this.releaseTile(ae)}))}destroy(){this.tileIndex.clear()}update(z){const{resampling:ae,tileIndex:K}=this,V=this.tileInfoView.getTileCoverage(z.state,this.buffer,this.coveragePolicy);if(B.length=0,L.length=0,j.clear(),!V)return;const{minScale:P,maxScale:F}=this.tileInfoView.tileInfo,{spans:$,lodInfo:J}=V,{level:H}=J,{scale:de,center:ee,resolution:ye}=z.state,le=!z.stationary&&de>this._previousScale;if(this._previousScale=de,this.tiles.length=0,!ae&&(de>P||de<F))return this.tiles.length=0,j.clear(),K.forEach(pe=>{this.releaseTile(pe)}),K.clear(),B.length=0,L.length=0,j.clear(),te.Z.pool.release(V),!0;K.forEach(pe=>pe.visible=!0);let ge=0,se=0;if($.length>0)for(const{row:pe,colFrom:ue,colTo:me}of $)for(let ve=ue;ve<=me;ve++){ge++;const fe=Y.set(H,pe,J.normalizeCol(ve),J.getWorldForColumn(ve)).id;if(K.has(fe)){const Me=K.get(fe);Me.isReady?(j.set(fe,Me),se++):le||this._addParentTile(fe,j)}else{let Me;if(this._tileCache&&this._tileCache.has(fe)){if(Me=this._tileCache.pop(fe),this.tileIndex.set(fe,Me),Me.isReady){j.set(fe,Me),se++;continue}}else Me=this.acquireTile(Y),this.tileIndex.set(fe,Me);le||this._addParentTile(fe,j)}}const Q=se===ge;K.forEach((pe,ue)=>{if(Y.set(ue),j.has(ue))return;const me=this.tileInfoView.intersects(V,Y),ve="purge"===this.cachePolicy?Y.level!==H:Y.level>H;!me||!le&&Q?!ve&&me||L.push(ue):pe.isReady?ve&&"purge"===this.cachePolicy&&this._hasReadyAncestor(Y,H)?L.push(ue):B.push(ue):ve&&L.push(ue)});for(const pe of B){const ue=K.get(pe);ue&&ue.isReady&&j.set(pe,ue)}for(const pe of L){const ue=K.get(pe);this._tileCache?this._tileCache.add(ue):this.releaseTile(ue),K.delete(pe)}return j.forEach(pe=>this.tiles.push(pe)),K.forEach(pe=>{j.has(pe.key.id)||(pe.visible=!1)}),this._tileCache&&this._tileCache.prune(H,ee,ye),te.Z.pool.release(V),j.clear(),Q}clear(z=!0){const{tileIndex:ae}=this;z&&ae.forEach(K=>{this.releaseTile(K)}),ae.clear()}updateCacheSize(z){this._tileCache&&(this._tileCache.maxSize=z)}_addParentTile(z,ae){let K=z,V=null;for(;K=this.tileInfoView.getTileParentId(K),K;)if(this.tileIndex.has(K)){if(V=this.tileIndex.get(K),V&&V.isReady){ae.has(V.key.id)||ae.set(V.key.id,V);break}}else if(this._tileCache&&this._tileCache.has(K)&&(V=this._tileCache.pop(K),this.tileIndex.set(K,V),V&&V.isReady)){ae.has(V.key.id)||ae.set(V.key.id,V);break}}_hasReadyAncestor(z,ae){const K=(0,x.Ue)();this.tileInfoView.getTileBounds(K,z,!0);for(const V of this.tileIndex.values())if(V.isReady&&V.key.level>=ae&&V.key.level<z.level){const P=(0,x.Ue)();if(this.tileInfoView.getTileBounds(P,V.key,!0),(0,x.r3)(P,K))return!0}return!1}}},78041:(ut,Oe,C)=>{"use strict";function x(te,oe,Y,j){const L=3*te,B=3*(Y-te)-L,X=1-L-B,Z=3*oe,z=3*(j-oe)-Z,ae=1-Z-z;function K($){return((X*$+B)*$+L)*$}function P($){return(3*X*$+2*B)*$+L}return function($,J=1e-6){return function V($){return((ae*$+z)*$+Z)*$}(function F($,J){let H,de,ee,ye,le,ge;for(ee=$,ge=0;ge<8;ge++){if(ye=K(ee)-$,Math.abs(ye)<J)return ee;if(le=P(ee),Math.abs(le)<1e-6)break;ee-=ye/le}if(H=0,de=1,ee=$,ee<H)return H;if(ee>de)return de;for(;H<de;){if(ye=K(ee),Math.abs(ye-$)<J)return ee;$>ye?H=ee:de=ee,ee=.5*(de-H)+H}return ee}($,J))}}C.d(Oe,{LI:()=>ne,Qc:()=>ie,n_:()=>x});const T=/^cubic-bezier\((.*)\)/,ne={};function ie(te){let oe=ne[te]||null;if(!oe){const Y=T.exec(te);if(Y){const j=Y[1].split(",").map(L=>parseFloat(L.trim()));4!==j.length||j.some(L=>isNaN(L))||(oe=x.apply(x,j))}}return oe}ne.ease=x(.25,.1,.25,1),ne.linear=x(0,0,1,1),ne.easeIn=ne["ease-in"]=x(.42,0,1,1),ne.easeOut=ne["ease-out"]=x(0,0,.58,1),ne.easeInOut=ne["ease-in-out"]=x(.42,0,.58,1)},24926:(ut,Oe,C)=>{"use strict";C.d(Oe,{H4:()=>tt,dI:()=>$e,o2:()=>mt,JG:()=>ve,km:()=>Ee,EK:()=>ge,ni:()=>fe,bk:()=>Me,Rb:()=>ct,Dq:()=>xe,uG:()=>je,Ck:()=>Ae,Jp:()=>Qe,L2:()=>re,ut:()=>Je,gG:()=>rr,SI:()=>yt,$H:()=>at,YQ:()=>Mt,UZ:()=>Zt,Hy:()=>Vt,qf:()=>ce,Rx:()=>gr});var x=C(15861),T=C(76687),ne=C(7093),ie=C(62208),te=C(16730),oe=C(39863),Y=C(31478),j=C(46342),L=C(67831),B=C(99770),X=C(2004),Z=C(21674),z=C(49672),ae=C(65234),K=C(94425),V=C(37053),P=C(46367);const $=180/Math.PI;function de(_t,$t,Ht,er){return er&&Ht&&!er.equals(Ht)&&(0,P.Q8)(er,Ht)&&er.isWebMercator?er.isWebMercator?function H(_t,$t){let Ht=$t[1];return Ht>89.99999?Ht=89.99999:Ht<-89.99999&&(Ht=-89.99999),Ht=Math.sin((0,oe.t)(Ht)),(0,L.s)(_t,(0,oe.t)($t[0])*K.sv.radius,.5*K.sv.radius*Math.log((1+Ht)/(1-Ht)))}(_t,$t):function J(_t,$t,Ht){const er=(0,oe.a)($t[0]/K.sv.radius);return(0,L.s)(_t,Ht?er:er-360*Math.floor((er+180)/360),(0,oe.a)(.5*Math.PI-2*Math.atan(Math.exp(-$t[1]/K.sv.radius))))}(_t,$t):(0,L.c)(_t,$t)}function ee(_t){return _t.wkid?_t:_t.spatialReference||ae.Z.WGS84}function ye(_t,$t){return $t.type?(0,L.s)(_t,$t.x,$t.y):(0,L.c)(_t,$t)}function le(_t){return(0,te.c9)(_t)}function ge(_t,$t){return Math.max(_t.width/$t[0],_t.height/$t[1])*function Ce(_t){return(0,V.JY)(_t)?39.37*le(_t)*96:1}(_t.spatialReference)}function se(_t,$t,Ht,er){return Q.apply(this,arguments)}function Q(){return(Q=(0,x.Z)(function*(_t,$t,Ht,er){let lr,fr;if(!_t||Array.isArray(_t)&&!_t.length)return null;if(ne.Z.isCollection(_t)&&(_t=_t.toArray()),Array.isArray(_t)&&_t.length&&"object"==typeof _t[0]){const St=_t.every(Qt=>"attributes"in Qt),Nt=_t.some(Qt=>!Qt.geometry);let Wt=_t;if(St&&Nt&&$t&&$t.allLayerViews){const Qt=new Map;for(const Ge of _t){const Xe=Ge.layer,He=Qt.get(Xe)||[],Ue=Ge.attributes[Xe.objectIdField];null!=Ue&&He.push(Ue),Qt.set(Xe,He)}const Kt=[];Qt.forEach((Ge,Xe)=>{const He=$t.allLayerViews.find(Ue=>Ue.layer.id===Xe.id);if("queryFeatures"in He){const Ue=Xe.createQuery();Ue.objectIds=Ge,Ue.returnGeometry=!0,Kt.push(He.queryFeatures(Ue))}});const Ze=yield Promise.all(Kt),st=[];for(const Ge of Ze)if(Ge&&Ge.features&&Ge.features.length)for(const Xe of Ge.features)(0,ie.pC)(Xe.geometry)&&st.push(Xe.geometry);Wt=st}for(const Qt of Wt)er=yield se(Qt,$t,Ht,er);return er}if(Array.isArray(_t)&&2===_t.length&&"number"==typeof _t[0]&&"number"==typeof _t[1])lr=new z.Z(_t);else if(_t instanceof Z.Z)lr=_t;else if("geometry"in _t)if(_t.geometry)lr=_t.geometry;else if(_t.layer){const St=_t.layer,Nt=$t.allLayerViews.find(Wt=>Wt.layer.id===St.id);if("queryFeatures"in Nt){const Wt=St.createQuery();Wt.objectIds=[_t.attributes[St.objectIdField]],Wt.returnGeometry=!0;const Qt=yield Nt.queryFeatures(Wt);lr=(0,ie.U2)(Qt,"features",0,"geometry")}}if((0,ie.Wi)(lr)||(fr="point"===lr.type?new X.Z({xmin:lr.x,ymin:lr.y,xmax:lr.x,ymax:lr.y,spatialReference:lr.spatialReference}):lr.extent,!fr))return null;const ht=(0,P.iV)(fr,Ht);return(0,ie.Wi)(ht)?null:er=er?er.union(ht):ht})).apply(this,arguments)}function pe(_t){if(_t&&(!Array.isArray(_t)||"number"!=typeof _t[0])&&("object"==typeof _t||Array.isArray(_t)&&"object"==typeof _t[0])){if("layer"in _t&&_t.layer&&_t.layer.minScale&&_t.layer.maxScale){const $t=_t.layer;return{min:$t.minScale,max:$t.maxScale}}if(Array.isArray(_t)&&_t.length&&_t.every($t=>"layer"in $t)){let $t=0,Ht=0;for(const er of _t){const lr=er.layer;lr&&lr.minScale&&lr.maxScale&&($t=lr.minScale<$t?lr.minScale:$t,Ht=lr.maxScale>Ht?lr.maxScale:Ht)}return $t&&Ht?{min:$t,max:Ht}:null}}}function me(){return(me=(0,x.Z)(function*(_t,$t){if(!_t||!$t)return new T.Z({targetGeometry:new z.Z,scale:0,rotation:0});let Ht=$t.spatialReference;const{constraints:er,padding:lr,viewpoint:fr,size:ht}=$t,St=[lr?ht[0]-lr.left-lr.right:ht[0],lr?ht[1]-lr.top-lr.bottom:ht[1]];let Nt=null;_t instanceof T.Z?Nt=_t:_t.viewpoint?Nt=_t.viewpoint:_t.target&&"esri.Viewpoint"===_t.target.declaredClass&&(Nt=_t.target);let Wt=null;Nt&&Nt.targetGeometry?Wt=Nt.targetGeometry:_t instanceof X.Z?Wt=_t:(_t||_t&&("center"in _t||"extent"in _t||"target"in _t))&&(Wt=(yield se(_t.center,$t,Ht))||(yield se(_t.extent,$t,Ht))||(yield se(_t.target,$t,Ht))||(yield se(_t,$t,Ht))),!Wt&&fr&&fr.targetGeometry?Wt=fr.targetGeometry:!Wt&&$t.extent&&(Wt=$t.extent);const Qt=ee(Wt);if(Ht||(Ht=ee($t.spatialReference||$t.extent||Wt)),!(0,P.Q8)(Wt,Ht)&&Qt&&!Qt.equals(Ht))return null;const Kt=ye((0,B.a)(),Wt.center?Wt.center:Wt),Ze=new z.Z(de(Kt,Kt,Qt,Ht),Ht);let st=null;if(Nt&&(0,ie.pC)(Nt.targetGeometry)&&"point"===Nt.targetGeometry.type)st=Nt.scale;else if(_t.hasOwnProperty("scale")&&_t.scale)st=_t.scale;else if(_t.hasOwnProperty("zoom")&&-1!==_t.zoom&&er&&er.effectiveLODs)st=er.zoomToScale(_t.zoom);else if(Array.isArray(Wt)||"point"===Wt.type||"extent"===Wt.type&&0===Wt.width&&0===Wt.height){const Ue=(0,P.iV)($t.extent,Ht);st=(0,ie.pC)(Ue)?ge(Ue,St):$t.extent?ge($t.extent,St):fr.scale}else st=(0,P.Q8)(Wt.extent,Ht)?ge((0,P.iV)(Wt.extent,Ht),St):ge(Wt.extent,St);const Ge=pe(_t);Ge&&(Ge.min&&Ge.min>st?st=Ge.min:Ge.max&&Ge.max<st&&(st=Ge.max));let Xe=0;Nt?Xe=Nt.rotation:_t.hasOwnProperty("rotation")?Xe=_t.rotation:fr&&(Xe=fr.rotation);let He=new T.Z({targetGeometry:Ze,scale:st,rotation:Xe});return er&&(He=er.fit(He),er.constrainByGeometry(He),er.rotationEnabled||(He.rotation=Xe)),He})).apply(this,arguments)}function ve(_t,$t){const Ht=_t.targetGeometry,er=$t.targetGeometry;return Ht.x=er.x,Ht.y=er.y,Ht.spatialReference=er.spatialReference,_t.scale=$t.scale,_t.rotation=$t.rotation,_t}function fe(_t,$t,Ht){return Ht?(0,L.s)(_t,.5*($t[0]-Ht.right+Ht.left),.5*($t[1]-Ht.bottom+Ht.top)):(0,L.g)(_t,$t,.5)}const Me=function(){const _t=(0,B.a)();return function($t,Ht,er){const lr=Ht.targetGeometry;ye(_t,lr);const fr=.5*je(Ht);return $t.xmin=_t[0]-fr*er[0],$t.ymin=_t[1]-fr*er[1],$t.xmax=_t[0]+fr*er[0],$t.ymax=_t[1]+fr*er[1],$t.spatialReference=lr.spatialReference,$t}}();function ce(_t,$t,Ht,er,lr){return mt(_t,$t,Ht.center),_t.scale=ge(Ht,er),lr&&lr.constraints&&lr.constraints.constrain(_t),_t}const xe=function(){const _t=(0,B.a)();return function($t,Ht,er){return(0,L.h)($t,function Te(_t,$t){return(0,L.g)(_t,$t,.5)}($t,Ht),fe(_t,Ht,er))}}(),Pe=function(){const _t=(0,j.c)(),$t=(0,B.a)();return function(Ht,er,lr,fr){const ht=je(er),St=Le(er);return(0,L.s)($t,ht,ht),(0,Y.f)(_t,$t),(0,Y.r)(_t,_t,St),(0,Y.t)(_t,_t,xe($t,lr,fr)),(0,Y.t)(_t,_t,[0,fr.top-fr.bottom]),(0,L.s)(Ht,_t[4],_t[5])}}();function je(_t){return _t.scale*function rt(_t){return(0,ie.pC)(_t)&&(0,V.JY)(_t.spatialReference)?1/(39.37*le(_t.spatialReference)*96):1}(_t.targetGeometry)}function Le(_t){return(0,oe.t)(_t.rotation)||0}const ct=function(){const _t=(0,B.a)(),$t=(0,B.a)(),Ht=(0,B.a)();return function(er,lr,fr,ht,St,Nt){return(0,L.n)(_t,lr),(0,L.g)($t,fr,.5*Nt),(0,L.s)(Ht,1/ht*Nt,-1/ht*Nt),(0,Y.i)(er),(0,Y.t)(er,er,$t),St&&(0,Y.r)(er,er,St),(0,Y.s)(er,er,Ht),(0,Y.t)(er,er,_t),er}}(),Ae=function(){const _t=(0,B.a)();return function($t,Ht,er,lr){const fr=je(Ht),ht=Le(Ht);return ye(_t,Ht.targetGeometry),ct($t,_t,er,fr,ht,lr)}}(),Qe=function(){const _t=(0,B.a)();return function($t,Ht,er,lr){const fr=je(Ht);return ye(_t,Ht.targetGeometry),ct($t,_t,er,fr,0,lr)}}();function Je(_t){if(_t.isWrappable){const $t=(0,V.C5)(_t);return $t.valid[1]-$t.valid[0]}return 0}function re(_t,$t){return Math.round(Je(_t)/$t)}function Ee(_t,$t){return function ue(_t,$t){return me.apply(this,arguments)}(_t,$t)}const $e=function(){const _t=(0,B.a)(),$t=(0,B.a)(),Ht=[0,0,0];return function(er,lr,fr){(0,L.f)(_t,er,lr),(0,L.i)(_t,_t),(0,L.f)($t,er,fr),(0,L.i)($t,$t),(0,L.j)(Ht,_t,$t);let ht=Math.acos((0,L.k)(_t,$t)/((0,L.l)(_t)*(0,L.l)($t)))*$;return Ht[2]<0&&(ht=-ht),isNaN(ht)&&(ht=0),ht}}(),tt=function(){const _t=(0,B.a)();return function($t,Ht,er,lr){const fr=$t.targetGeometry;return ve($t,Ht),Pe(_t,Ht,er,lr),fr.x+=_t[0],fr.y+=_t[1],$t}}(),mt=((0,B.a)(),function(){const _t=(0,B.a)();return function($t,Ht,er){ve($t,Ht);const lr=$t.targetGeometry,fr=ee(er),ht=ee(lr);return ye(_t,er),de(_t,_t,fr,ht),lr.x=_t[0],lr.y=_t[1],$t}}()),yt=function(){const _t=(0,B.a)();return function($t,Ht,er,lr,fr){fr||(fr="center"),(0,L.h)(_t,er,lr),(0,L.g)(_t,_t,.5);const ht=_t[0],St=_t[1];switch(fr){case"center":(0,L.s)(_t,0,0);break;case"left":(0,L.s)(_t,-ht,0);break;case"top":(0,L.s)(_t,0,St);break;case"right":(0,L.s)(_t,ht,0);break;case"bottom":(0,L.s)(_t,0,-St);break;case"top-left":(0,L.s)(_t,-ht,St);break;case"bottom-left":(0,L.s)(_t,-ht,-St);break;case"top-right":(0,L.s)(_t,ht,St);break;case"bottom-right":(0,L.s)(_t,ht,-St)}return gr($t,Ht,_t),$t}}();function at(_t,$t,Ht){return ve(_t,$t),_t.rotation+=Ht,_t}function Mt(_t,$t,Ht){return ve(_t,$t),_t.rotation=Ht,_t}const Pt=function(){const _t=(0,B.a)();return function($t,Ht,er,lr,fr){return ve($t,Ht),isNaN(er)||0===er||(vr(_t,lr,Ht,fr),$t.scale=Ht.scale*er,yr(_t,_t,$t,fr),gr($t,$t,(0,L.s)(_t,_t[0]-lr[0],lr[1]-_t[1]))),$t}}();function Vt(_t,$t,Ht){return ve(_t,$t),_t.scale=Ht,_t}const Zt=function(){const _t=(0,B.a)();return function($t,Ht,er,lr,fr,ht){return ve($t,Ht),isNaN(er)||0===er||(vr(_t,fr,Ht,ht),$t.scale=Ht.scale*er,$t.rotation+=lr,yr(_t,_t,$t,ht),gr($t,$t,(0,L.s)(_t,_t[0]-fr[0],fr[1]-_t[1]))),$t}}(),rr=function(){const _t=(0,B.a)(),$t=(0,B.a)();return function(Ht,er,lr,fr,ht,St,Nt){return xe($t,St,Nt),(0,L.m)(_t,ht,$t),fr?Zt(Ht,er,lr,fr,_t,St):Pt(Ht,er,lr,_t,St)}}(),vr=function(){const _t=(0,j.c)();return function($t,Ht,er,lr){return(0,L.t)($t,Ht,function he(_t,$t,Ht,er){return Ae(_t,$t,Ht,er),(0,Y.a)(_t,_t)}(_t,er,lr,1))}}(),yr=function(){const _t=(0,j.c)();return function($t,Ht,er,lr){return(0,L.t)($t,Ht,Ae(_t,er,lr,1))}}(),gr=function(){const _t=(0,B.a)(),$t=(0,j.c)();return function(Ht,er,lr){ve(Ht,er);const fr=je(er),ht=Ht.targetGeometry;return(0,Y.b)($t,Le(er)),(0,Y.s)($t,$t,(0,B.f)(fr,fr)),(0,L.t)(_t,lr,$t),ht.x+=_t[0],ht.y+=_t[1],Ht}}()},35216:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>ie});var x=C(63290);class T{constructor(j,L=[]){this.eventType=j,this.keyModifiers=L}matches(j){if(j.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const L=j.modifiers;for(const B of this.keyModifiers)if(!L.has(B))return!1;return!0}}const ne=x.Z.getLogger("esri.views.input.InputHandler");class ie{constructor(j){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=j}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const j in this._incoming){const L=this._incoming[j];for(const B of L)this._incomingEventMatches.push(B.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(j=>j.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(j){this._manager?ne.error("This InputHandler has already been registered with an InputManager"):(j.setEventCallback(L=>this._handleEvent(L)),j.setUninstallCallback(()=>this._onUninstall()),this._manager=j)}onUninstall(){}registerIncoming(j,L,B){let X;"function"==typeof L?(B=L,X=[]):X=L||[];const Z="string"==typeof j?new T(j,X):j,z=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},ae=P=>{const F=this._incoming[P.match.eventType];if(F){const $=F.indexOf(P);F.splice($,1),z(),this._manager&&this._manager.updateDependencies()}},K=new te(Z,B,{onPause:ae,onRemove:ae,onResume:P=>{const F=this._incoming[P.match.eventType];F&&-1===F.indexOf(P)&&(F.push(P),z(),this._manager&&this._manager.updateDependencies())}});let V=this._incoming[Z.eventType];return V||(V=[],this._incoming[Z.eventType]=V),V.push(K),z(),this._manager&&this._manager.updateDependencies(),K}registerOutgoing(j){if(this._outgoing[j])throw Error("There is already a callback registered for this outgoing InputEvent: "+j);const L=new oe(j,{onEmit:(B,X,Z,z)=>{this._manager.emit(B.eventType,X,Z,z)},onRemove:B=>{delete this._outgoing[B.eventType],this._manager.updateDependencies()}});return this._outgoing[j]=L,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),L}startCapturingPointer(j){this._manager.setPointerCapture(j,!0)}stopCapturingPointer(j){this._manager.setPointerCapture(j,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):ne.error("This InputHandler is not registered with an InputManager")}_handleEvent(j){const L=this._incoming[j.type];if(L)for(const B of L)if(B.match.matches(j)&&(B.callback(j),j.shouldStopPropagation()))break}}class te{constructor(j,L,B){this.match=j,this._callback=L,this._handler=B}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class oe{constructor(j,L){this.eventType=j,this._removed=!1,this._handler=L}emit(j,L,B){this._removed||this._handler.onEmit(this,j,L,B)}remove(){this._removed=!0,this._handler.onRemove(this)}}},58677:(ut,Oe,C)=>{"use strict";C.d(Oe,{$:()=>ae,f:()=>V});var x=C(17626),T=C(14517),ne=C(63290),ie=C(35133),te=C(77712),L=(C(85931),C(8314),C(90912),C(76898)),B=C(25441),X=C(35216);class Z extends X.a{constructor(F){super(!0),this._onChange=F,this._value="mouse",this.registerIncoming("pointer-down",$=>{this._setValue("touch"===$.data.native.pointerType?"touch":"mouse")}),this._moveHandler=this.registerIncoming("pointer-move",$=>{this._setValue("touch"===$.data.native.pointerType?"touch":"mouse")}),this._moveHandler.pause()}_setValue(F){F!==this._value&&("touch"===F?this._moveHandler.resume():this._moveHandler.pause(),this._value=F,this._onChange(F))}}const z=ne.Z.getLogger("esri.views.input.InputManager");let ae=class extends T.Z{constructor(P){super(P),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=B.CK,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const P=Object.keys(this._nameToGroup);for(const F of P)this.uninstallHandlers(F);this.eventSource=null,this._currentPropagation=null}get hasPendingInputs(){return this._handlers.some(P=>P.handler.hasPendingInputs)}installHandlers(P,F,$=V.INTERNAL){if(this._nameToGroup[P])return void z.error("There is already an InputHandler group registered under the name `"+P+"`");if(0===F.length)return void z.error("Can't register a group of zero handlers");const J={name:P,handlers:F.map(H=>({handler:H,active:!0,removed:!1,priorityIndex:0,groupPriority:$,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[P]=J;for(let H=J.handlers.length-1;H>=0;H--){const de=J.handlers[H];this._handlers.push(de),de.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(ee,ye,le,ge,se)=>{this._emitInputEvent(de.priorityIndex+1,ee,ye,le,se,ge)},setPointerCapture:(ee,ye)=>{this._setPointerCapture(J,de,ee,ye)},setEventCallback:ee=>{de.eventCallback=ee},setUninstallCallback:ee=>{de.uninstallCallback=ee},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(P){const F=this._nameToGroup[P];F?(F.handlers.forEach($=>{$.removed=!0,$.uninstallCallback()}),delete this._nameToGroup[P],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):z.error("There is no InputHandler group registered under the name `"+P+"`")}hasHandlers(P){return void 0!==this._nameToGroup[P]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const P=new Set,F=new Set;this._handlersPriority=[];for(let $=this._handlers.length-1;$>=0;$--){const J=this._handlers[$];J.priorityIndex=$,this._handlersPriority.push(J)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let $=this._handlersPriority.length-1;$>=0;$--){const J=this._handlersPriority[$];J.priorityIndex=$;let H=J.handler.hasSideEffects;if(!H)for(const de of J.handler.outgoingEventTypes)if(P.has(de)){H=!0;break}if(H)for(const de of J.handler.incomingEventMatches){P.add(de.eventType);for(const ee of de.keyModifiers)(0,B.wj)(ee)||F.add(ee)}J.active=H}this._sourceEvents=P,this._keyModifiers=F,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointerType(P){this._set("latestPointerType",P)}_onEventReceived(P,F){"pointer-capture-lost"===P&&this._pointerCaptures.delete(F.native.pointerId),this._updateKeyModifiers(P,F),this._emitInputEventFromSource(P,F,null!=this.test.timestamp?this.test.timestamp:F.native?F.native.timestamp:void 0,F.native?F.native.cancelable:void 0)}_updateKeyModifiers(P,F){if(!F)return;let $=!1;const J=()=>{if(!$){const ee=new Set;this._activeKeyModifiers.forEach(ye=>{ee.add(ye)}),this._activeKeyModifiers=ee,$=!0}},H=(ee,ye)=>{ye&&!this._activeKeyModifiers.has(ee)?(J(),this._activeKeyModifiers.add(ee)):!ye&&this._activeKeyModifiers.has(ee)&&(J(),this._activeKeyModifiers.delete(ee))};if("key-down"===P||"key-up"===P){const ee=F.key;this._keyModifiers.has(ee)&&H(ee,"key-down"===P)}const de=F.native;H("Alt",!(!de||!de.altKey)),H("Ctrl",!(!de||!de.ctrlKey)),H("Shift",!(!de||!de.shiftKey)),H("Meta",!(!de||!de.metaKey)),H("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerTypeHandler=new Z(P=>this._setLatestPointerType(P)),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,V.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],V.INTERNAL)}_setPointerCapture(P,F,$,J){const H=P.name+"-"+F.priorityIndex,de=this._pointerCaptures.get($.pointerId)||new Set;this._pointerCaptures.set($.pointerId,de),J?(de.add(H),1===de.size&&this.eventSource&&this.eventSource.setPointerCapture($,!0)):de.has(H)&&(de.delete(H),0===de.size&&(this._pointerCaptures.delete($.pointerId),this.eventSource&&this.eventSource.setPointerCapture($,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(P=>!P.removed),this.updateDependencies()}_emitInputEventFromSource(P,F,$,J){this._emitInputEvent(0,P,F,$,J)}_emitInputEvent(P,F,$,J,H,de){const ee=void 0!==J?J:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),le={event:new K(F,$,ee,de||this._activeKeyModifiers,void 0!==H&&H),priorityIndex:P};this._currentPropagation?this._currentPropagation.events.push(le):this._doNewPropagation(le)}_doNewPropagation(P){this._currentPropagation={events:new ie.Z,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:P.event.timestamp},this._currentPropagation.events.push(P),this._continuePropagation()}_continuePropagation(){const P=this._currentPropagation;if(P){for(;this._currentPropagation.events.length>0;){const{event:F,priorityIndex:$}=this._currentPropagation.events.pop(),J=F.data&&F.data.eventId;if(null==J||!this._stoppedPropagationEventIds.has(J))for(P.currentHandler=this._handlersPriority[$];P.currentHandler;){if(P.currentHandler.removed)P.needsHandlerGarbageCollect=!0;else{if(P.currentHandler.active&&!F.shouldStopPropagation()&&P.currentHandler.eventCallback(F),F.shouldStopPropagation()){null!=J&&this._stoppedPropagationEventIds.add(J);break}if(F.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:F,priorityIndex:P.currentHandler.priorityIndex+1})}P.currentHandler=this._handlersPriority[P.currentHandler.priorityIndex+1]}}P.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(P){const F=new ie.Z;for(F.push(P);this._currentPropagation.events.length;)F.push(this._currentPropagation.events.pop());this._currentPropagation.events=F,this._currentPropagation.currentHandler=null}_compareHandlerPriority(P,F){if(P.handler.hasSideEffects!==F.handler.hasSideEffects)return P.handler.hasSideEffects?1:-1;if(P.groupPriority!==F.groupPriority)return P.groupPriority>F.groupPriority?-1:1;for(const $ of P.handler.incomingEventMatches)for(const J of F.handler.incomingEventMatches){if($.eventType!==J.eventType)continue;const H=$.keyModifiers.filter(de=>-1!==J.keyModifiers.indexOf(de));if(H.length===$.keyModifiers.length!=(H.length===J.keyModifiers.length))return $.keyModifiers.length>J.keyModifiers.length?-1:1}return P.priorityIndex>F.priorityIndex?-1:1}_sortHandlersPriority(P){const F=[];for(const $ of P){let J=0;for(;J<F.length&&this._compareHandlerPriority($,F[J])>=0;)J++;F.splice(J,0,$)}return F}get debug(){const P=F=>{const $=this._setPointerCapture;this._setPointerCapture=()=>{},F(),this._setPointerCapture=$};return{injectEvent:(F,$)=>{P(()=>{this._onEventReceived(F,$)})},disablePointerCapture:P}}};(0,x._)([(0,te.Cb)({readOnly:!0})],ae.prototype,"hasPendingInputs",null),(0,x._)([(0,te.Cb)()],ae.prototype,"eventSource",void 0),(0,x._)([(0,te.Cb)()],ae.prototype,"recognizers",void 0),(0,x._)([(0,te.Cb)({readOnly:!0})],ae.prototype,"latestPointerType",void 0),ae=(0,x._)([(0,L.j)("esri.views.input.InputManager")],ae);class K{constructor(F,$,J,H,de){this.type=F,this.data=$,this.timestamp=J,this.modifiers=H,this.cancelable=de,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return 0!=(1&this._propagationState)}async(F){this._propagationState|=2;const $=(J,H)=>{this._propagationState&=-3;const de=this._resumeCallback;if(this._resumeCallback=null,de&&de(),H)throw J;return J};return("function"==typeof F?F():F).then(J=>$(J,!1),J=>$(J,!0))}shouldPausePropagation(F){return!!(2&this._propagationState)&&(this._resumeCallback=F,!0)}preventDefault(){this.data.native.preventDefault()}}const V={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3}},25441:(ut,Oe,C)=>{"use strict";C.d(Oe,{kK:()=>te,wj:()=>oe,CK:()=>ne});var x=C(17770);const ne=(0,C(8314).Z)("mac")?"Meta":"Ctrl",ie={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let Y=48;Y<58;Y++)ie[Y]=String.fromCharCode(Y);for(let Y=1;Y<25;Y++)ie[111+Y]=`F${Y}`;for(let Y=65;Y<91;Y++)ie[Y]=[String.fromCharCode(Y+32),String.fromCharCode(Y)];function te(Y){if(void 0!==Y.key)return(0,x.kK)(Y);const j=ie[Y.keyCode];return Array.isArray(j)?Y.shiftKey?j[1]:j[0]:j}function oe(Y){switch(Y){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}},71251:(ut,Oe,C)=>{"use strict";C.d(Oe,{e:()=>oe});var x=C(62208),T=C(10699),ne=C(35133),ie=C(50618);class te{constructor(j,L){this.item=j,this.controller=L,this.promise=null}}class oe{constructor(j){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,j.concurrency&&(this.concurrency=j.concurrency),this._queue=new ne.Z(j.peeker),this.process=j.process;const L=j.scheduler;j.priority&&(0,x.pC)(L)&&(this._task=L.registerTask(j.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(j){const L=this._controllers.get(j);L&&L.abort()}clear(){this._queue.clear();const j=[];this._controllers.forEach(L=>j.push(L)),this._controllers.clear(),j.forEach(L=>L.abort()),this._processingItems.clear(),this._cancelNext()}forEach(j){this._deferreds.forEach((L,B)=>j(B))}get(j){const L=this._deferreds.get(j);return L?L.promise:void 0}isOngoing(j){return this._processingItems.has(j)}has(j){return this._deferreds.has(j)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(j,L){const B=this.get(j);if(B)return B;const X=new AbortController;let Z=null;L&&(Z=(0,T.fu)(L,()=>X.abort()));const ae=()=>{K.remove(),(0,x.pC)(Z)&&Z.remove(),this._deferreds.delete(j),this._controllers.delete(j),this._queue.remove(j),this._processingItems.delete(j),this._scheduleNext()},K=(0,T.$F)(X.signal,()=>{const P=this._processingItems.get(j);P&&P.controller.abort(),ae(),V.reject((0,T.zE)())}),V=(0,T.dD)();return this._deferreds.set(j,V),this._controllers.set(j,X),V.promise.then(ae,ae),this._queue.push(j),this._scheduleNext(),V.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const j=[];this._processingItems.forEach(L=>j.push(L)),this._processingItems.clear();for(const L of j)this._queue.push(L.item),L.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const j=[];for(;this._queue.length;)j.push(this._queue.pop());return this.clear(),j}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(j){for(;!j.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),j.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=(0,ie.Os)(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(j,L){this._canProcessFulfillment(j)&&(this._scheduleNext(),this._deferreds.get(j.item).resolve(L))}_processError(j,L){this._canProcessFulfillment(j)&&(this._scheduleNext(),this._deferreds.get(j.item).reject(L))}_canProcessFulfillment(j){return!!this._deferreds.get(j.item)&&this._processingItems.get(j.item)===j}_process(j){if((0,x.Wi)(j))return;let L;const B=new AbortController,X=new te(j,B);this._processingItems.set(j,X);try{L=this.process(j,B.signal)}catch(Z){this._processError(X,Z)}(0,T.y8)(L)?(X.promise=L,L.then(Z=>this._processResult(X,Z),Z=>this._processError(X,Z))):this._processResult(X,L)}get test(){return{update:j=>this.runTask(j)}}}},74447:(ut,Oe,C)=>{"use strict";C.d(Oe,{sq:()=>De,T8:()=>ee,G5:()=>ce});var x=C(17626),T=C(14517),ne=C(72392),ie=C(63290),te=C(62208),oe=C(73362),Y=C(77029),j=C(10699),L=C(32917),B=C(27422),X=C(27e3),Z=C(77712),V=(C(85931),C(8314),C(90912),C(76898));let P=class extends T.Z{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(Pe){for(;!Pe.done&&this._process(Pe);)Pe.madeProgress()}push(Pe,je,rt){return this.running=!0,new Promise((Le,Ce)=>this._tasks.push(new F(Le,Ce,Pe,je,rt)))}unshift(Pe,je,rt){return this.running=!0,new Promise((Le,Ce)=>this._tasks.unshift(new F(Le,Ce,Pe,je,rt)))}_process(Pe){if(0===this._tasks.length)return!1;const je=this._tasks.shift();try{const rt=(0,j.Hc)(je.signal);if(rt&&!je.abortCallback)je.reject((0,j.zE)());else{const Le=rt?je.abortCallback((0,j.zE)()):je.callback(Pe);(0,j.tI)(Le)?Le.then(je.resolve,je.reject):je.resolve(Le)}}catch(rt){je.reject(rt)}return this.running=this._tasks.length>0,!0}cancelAll(){const Pe=(0,j.zE)();for(const je of this._tasks)if(je.abortCallback){const rt=je.abortCallback(Pe);je.resolve(rt)}else je.reject(Pe);this._tasks.length=0,this.running=!1}};(0,x._)([(0,Z.Cb)()],P.prototype,"running",void 0),P=(0,x._)([(0,V.j)("esri.layers.support.PromiseQueue")],P);class F{constructor(je,rt,Le,Ce,Te){this.resolve=je,this.reject=rt,this.callback=Le,this.signal=Ce,this.abortCallback=Te}}let $=class extends T.Z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,x._)([(0,Z.Cb)()],$.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,x._)([(0,Z.Cb)()],$.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),$=(0,x._)([(0,V.j)("esri.views.support.DebugFlags")],$);const J=new $,H=ie.Z.getLogger("esri.views.support.Scheduler");var ee,Pe;(Pe=ee||(ee={})).RESOURCE_CONTROLLER="schedule",Pe.SLIDE="slide",Pe.STREAM_DATA_LOADER="stream loader",Pe.ELEVATION_QUERY="elevation query",Pe.TERRAIN_SURFACE="terrain",Pe.SURFACE_GEOMETRY_UPDATES="surface geometry updates",Pe.GRAPHICS_CORE="Graphics3D",Pe.I3S_CONTROLLER="I3S",Pe.POINT_CLOUD_LAYER="point cloud",Pe.FEATURE_TILE_FETCHER="feature fetcher",Pe.OVERLAY="overlay",Pe.STAGE="stage",Pe.GRAPHICS_DECONFLICTOR="graphics deconflictor",Pe.FILTER_VISIBILITY="Graphics3D filter visibility",Pe.SCALE_VISIBILITY="Graphics3D scale visibility",Pe.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",Pe.POINT_OF_INTEREST_FREQUENT="POI frequent",Pe.POINT_OF_INTEREST_INFREQUENT="POI infrequent",Pe.LABELER="labeler",Pe.FEATURE_QUERY_ENGINE="feature query",Pe.FEATURE_TILE_TREE="feature tile tree",Pe.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",Pe.ELEVATION_ALIGNMENT="elevation alignment",Pe.TEXT_TEXTURE_ATLAS="text texture atlas",Pe.TEXTURE_UNLOAD="texture unload",Pe.LINE_OF_SIGHT_TOOL="line of sight tool",Pe.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",Pe.ELEVATION_PROFILE="elevation profile",Pe.SNAPPING="snapping",Pe.SHADOW_ACCUMULATOR="shadow accumulator",Pe.CLOUDS_GENERATOR="cloud generator",Pe[Pe.TEST_PRIO=1]="TEST_PRIO";const le=new Map([[ee.RESOURCE_CONTROLLER,0],[ee.SLIDE,0],[ee.STREAM_DATA_LOADER,0],[ee.ELEVATION_QUERY,0],[ee.TERRAIN_SURFACE,1],[ee.SURFACE_GEOMETRY_UPDATES,1],[ee.GRAPHICS_CORE,2],[ee.I3S_CONTROLLER,2],[ee.POINT_CLOUD_LAYER,2],[ee.FEATURE_TILE_FETCHER,2],[ee.OVERLAY,4],[ee.STAGE,4],[ee.GRAPHICS_DECONFLICTOR,4],[ee.FILTER_VISIBILITY,4],[ee.SCALE_VISIBILITY,4],[ee.FRUSTUM_VISIBILITY,4],[ee.POINT_OF_INTEREST_FREQUENT,6],[ee.POINT_OF_INTEREST_INFREQUENT,30],[ee.LABELER,8],[ee.FEATURE_QUERY_ENGINE,8],[ee.FEATURE_TILE_TREE,16],[ee.FEATURE_TILE_TREE_ACTIVE,0],[ee.ELEVATION_ALIGNMENT,12],[ee.TEXT_TEXTURE_ATLAS,12],[ee.CLOUDS_GENERATOR,12],[ee.TEXTURE_UNLOAD,12],[ee.LINE_OF_SIGHT_TOOL,16],[ee.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[ee.SNAPPING,0],[ee.SHADOW_ACCUMULATOR,30]]);function ge(Pe){return le.has(Pe)?le.get(Pe):"number"==typeof Pe?Pe:1}const se=(0,B.HA)(6.5),Q=(0,B.HA)(1),pe=(0,B.HA)(30),ue=(0,B.HA)(1e3/30),me=(0,B.HA)(100);var fe,Me;(function(Pe){let je=class extends T.Z{constructor(Ce){super(Ce),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new oe.Z("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=1,this._tasks=new Y.Z,this._runQueue=new Y.Z,this._load=0,this._idleStateCallbacks=new Y.Z,this._idleUpdatesStartFired=!1,this._maxReschedule=xe,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,X.S1)(J,"SCHEDULER_LOG_SLOW_TASKS",ct=>this._debug=ct),this._budget=new Le(Ce.nowFunc);for(const ct of Object.keys(ee))this.performanceInfo.tasks.set(ee[ct],new oe.Z(ee[ct]));let Te;const Ye=this;this._test={get state(){return(0,te.Pt)(Te,Ye._state)},set state(ct){Te=ct},FRAME_SAFETY_BUDGET:se,INTERACTING_BUDGET:ue,IDLE_BUDGET:me,get budget(){return Ye._budget.budget},usedBudget:0,setBudget:ct=>Ye._budget=ct,updateTask:ct=>this._updateTask(ct),getState:ct=>this._getState(ct),getRuntime:ct=>this._getRuntime(ct),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._debugHandle&&this._debugHandle.remove(),this._microTaskQueued=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=xe,this._schedule(),this.frame()))}))}registerTask(Ce,Te){const Ye=ge(Ce),ct=new rt(this,Ce,Te,Ye);return this._tasks.push(ct),this.performanceInfo.tasks.has(Ce)||this.performanceInfo.tasks.set(Ce,new oe.Z(Ce)),ct}registerIdleStateCallbacks(Ce,Te){const Ye={idleBegin:Ce,idleEnd:Te};this._idleStateCallbacks.push(Ye),2===this.state&&this._idleUpdatesStartFired&&Ye.idleBegin();const ct=this;return{remove:()=>this._removeIdleStateCallbacks(Ye),set idleBegin(Ae){ct._idleUpdatesStartFired&&(Ye.idleEnd(),2===ct._state&&Ae()),Ye.idleBegin=Ae},set idleEnd(Ae){Ye.idleEnd=Ae}}}get now(){return this.nowFunc()}get load(){return this._load}set state(Ce){this._state!==Ce&&(this._state=Ce,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(Te=>Te.idleEnd())))}get state(){return(0,te.Wi)(this._test.state)?this._state:this._test.state}updateBudget(Ce){this._test.usedBudget=0;let Te=se,Ye=Ce.frameDuration,ct=Q;switch(this.state){case 2:Te=(0,B.HA)(0),Ye=(0,B.HA)(Math.max(me,Ce.frameDuration)),ct=pe;break;case 1:Ye=(0,B.HA)(Math.max(ue,Ce.frameDuration))}return Ye=(0,B.HA)(Ye-Ce.elapsedFrameTime-Te),2!==this.state&&Ye<Q&&!this._forceTask?(this._forceTask=!0,!1):(Ye=(0,B.HA)(Math.max(Ye,ct)),this._budget.reset(Ye,this.state),this._maxReschedule=xe,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(Ce=>Ce.idleBegin())),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset((0,B.HA)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(Ce){this._idleUpdatesStartFired&&Ce.idleEnd(),this._idleStateCallbacks.removeUnordered(Ce)}removeTask(Ce){this._tasks.removeUnordered(Ce),this._runQueue.removeUnordered(Ce)}_updateTask(Ce){this._tasks.forAll(Te=>{Te.name===Ce&&Te.setPriority(Ce)})}_getState(Ce){if(this._runQueue.some(Ye=>Ye.name===Ce))return Me.SCHEDULED;let Te=Me.IDLE;return this._tasks.forAll(Ye=>{Ye.name===Ce&&Ye.needsUpdate&&(Ye.schedulePriority<=1?Te=Me.READY:Te!==Me.READY&&(Te=Me.WAITING))}),Te}_getRuntime(Ce){let Te=0;return this._tasks.forAll(Ye=>{Ye.name===Ce&&(Te+=Ye.runtime)}),Te}_resetRuntimes(){this._tasks.forAll(Ce=>Ce.runtime=0)}_getRunning(){const Ce=new Map;if(this._tasks.forAll(Ye=>{Ye.needsUpdate&&Ce.set(Ye.name,(Ce.get(Ye.name)||0)+1)}),0===Ce.size)return null;let Te="";return Ce.forEach((Ye,ct)=>{Te+=Ye>1?` ${Ye}x ${ct}`:` ${ct}`}),Te}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const Ce=this._tasks.reduce((Te,Ye)=>Ye.needsUpdate?++Te:Te,0);this._load=.9*this._load+Ce*(1-.9)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(Ce=>!!Ce.needsUpdate||(Ce.schedulePriority=Ce.basePriority,!1)),this._tasks.forAll(Ce=>{0===Ce.basePriority&&Ce.needsUpdate&&!this._runQueue.some(Te=>Te===Ce)&&this._runQueue.unshift(Ce)});0===this._runQueue.length;){let Ce=!1,Te=0;if(this._tasks.forAll(Ye=>{Ye.needsUpdate&&0!==Ye.schedulePriority&&0!==Ye.basePriority&&(Ce=!0,Te=Math.max(Te,Ye.basePriority),1===Ye.schedulePriority?(Ye.schedulePriority=0,this._runQueue.push(Ye)):--Ye.schedulePriority)}),!Ce)return this.updating=!1,!1;this._maxReschedule===xe&&(this._maxReschedule=Te),--this._maxReschedule}return this.updating=!0,!0}_run(){const Ce=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const Te=this._budget.now(),Ye=this._runQueue.pop();this._budget.resetProgress();try{Ye.task.runTask(this._budget)}catch(Ae){H.error(`Exception in task "${Ye.name}"`,Ae)}Ye.schedulePriority=Ye.basePriority;const ct=this._budget.now()-Te;if(Ye.runtime+=ct,this._frameTaskTimes.set(Ye.priority,this._frameTaskTimes.get(Ye.priority)+ct),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",Ye.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(this._budget.now()-Ce)}}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-Ce)}_startFrameTaskTimes(){for(const Ce of Object.keys(ee))this._frameTaskTimes.set(ee[Ce],0)}_recordFrameTaskTimes(Ce){this._frameTaskTimes.forEach((Te,Ye)=>this.performanceInfo.tasks.get(Ye).record(Te)),this.performanceInfo.total.record(Ce)}get test(){return this._test}};(0,x._)([(0,Z.Cb)()],je.prototype,"updating",void 0),(0,x._)([(0,Z.Cb)()],je.prototype,"nowFunc",void 0),je=(0,x._)([(0,V.j)("esri.views.support.Scheduler")],je),Pe.Scheduler=je;let rt=class extends T.Z{constructor(Ce,Te,Ye,ct){super({}),this._scheduler=Ce,this.name=Te,this._basePriority=ct,this.runtime=0,this._queue=new P,this._handles=new ne.Z,this.schedulePriority=this._basePriority,this.task=(0,te.pC)(Ye)?Ye:this._queue,this._handles.add((0,L.zF)(()=>this.task.running,()=>Ce.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(ce),this._scheduler.removeTask(this),this.schedule=De.schedule,this.reschedule=De.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(Ce){this.name=Ce;const Te=ge(Ce);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=Te),this._basePriority=Te}get priority(){return this.name}set priority(Ce){this.setPriority(Ce)}get needsUpdate(){return this.updating||this.task.running}schedule(Ce,Te,Ye){return this._queue.push(Ce,Te,Ye)}reschedule(Ce,Te,Ye){return this._queue.unshift(Ce,Te,Ye)}processQueue(Ce){this._queue.runTask(Ce)}};(0,x._)([(0,Z.Cb)({constructOnly:!0})],rt.prototype,"task",void 0),(0,x._)([(0,Z.Cb)({readOnly:!0})],rt.prototype,"updating",null),rt=(0,x._)([(0,V.j)("esri.views.support.SchedulerTask")],rt);class Le{constructor(Te){this.now=Te,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0}run(Te){return!this.done&&(!0===Te()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(Te){this._enabled=Te}reset(Te,Ye){this._begin=this.now(),this._budget=Te,this._state=Ye,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}Pe.Budget=Le})(fe||(fe={})),function(Pe){Pe.SCHEDULED="s",Pe.READY="r",Pe.WAITING="w",Pe.IDLE="i"}(Me||(Me={}));const ce=(()=>{const Pe=new fe.Budget(()=>performance.now());return Pe.enabled=!1,Pe})(),De=new class he{remove(){}processQueue(){}schedule(je,rt,Le){try{if((0,j.Hc)(rt)){const Ce=(0,j.zE)();return Le?Promise.resolve(Le(Ce)):Promise.reject(Ce)}return(0,j.gx)(je(ce))}catch(Ce){return Promise.reject(Ce)}}reschedule(je,rt,Le){return this.schedule(je,rt,Le)}},xe=Number.MAX_SAFE_INTEGER},70257:(ut,Oe,C)=>{"use strict";C.d(Oe,{t:()=>X});var x=C(17626),T=C(14517),ne=C(72392),ie=C(62208),te=C(32917),oe=C(50618),Y=C(27e3),j=C(34595),L=C(77712),B=C(76898);let X=class extends T.Z{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new ne.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(z,ae,K,V=0){const P=0!=(1&V),F=++this.handleId;P||this.installSyncUpdatingWatch(z,ae,F);const $=0!=(2&V)?(0,Y.S1)(z,ae,K,P):z.watch(ae,K,P);return this.handles.add($,F),{remove:()=>this.handles.remove(F)}}addOnCollectionPropertyChange(z,ae,K,V=0){const P=0!=(2&V),F=++this.handleId;return this.handles.add([(0,Y.on)(z,ae,"after-changes",this.createSyncUpdatingCallback()),(0,Y.on)(z,ae,"change",K,P?$=>{K({added:$.items,removed:[],moved:[],target:$})}:void 0)],F),{remove:()=>{this.handles.remove(F)}}}addOnCollectionChange(z,ae,K=0){const V=0!=(2&K),P=++this.handleId;return this.handles.add([z.on("after-changes",this.createSyncUpdatingCallback()),z.on("change",ae)],P),V&&ae({added:z.items,removed:[],moved:[],target:z}),{remove:()=>{this.handles.remove(P)}}}addPromise(z){if((0,ie.Wi)(z))return z;const ae=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(z)&&(0!==this.pendingPromises.size||this.handles.has(Z)||this._set("updating",!1))}},ae),this.pendingPromises.add(z),this._set("updating",!0);const K=()=>this.handles.remove(ae);return z.then(K,K),z}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(z,ae,K){const V=this.createSyncUpdatingCallback(),P=(0,te.Ym)(()=>(0,j.$z)(z,ae),V,{sync:!0,equals:()=>!1});return this.handles.add(P,K),P}createSyncUpdatingCallback(){return()=>{this.handles.remove(Z),++this.scheduleHandleId;const z=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,oe.Os)(()=>{z===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(Z))}),Z)}}};(0,x._)([(0,L.Cb)({readOnly:!0})],X.prototype,"updating",void 0),X=(0,x._)([(0,B.j)("esri.views.support.WatchUpdatingTracking")],X);const Z=-42},18605:(ut,Oe,C)=>{"use strict";C.d(Oe,{r7:()=>Z,gH:()=>j,LI:()=>B,RZ:()=>X,TT:()=>ae,Jl:()=>z}),C(8314);var T=C(21286);function j(fe,Me,ce,he){he.premultipliedAlpha&&function se(fe){const Me=fe.data,ce=Me.length;for(let he=0;he<ce;he+=4){const De=Me[he+3];if(De>0){const xe=De/255;Me[he+0]=Me[he+0]/xe,Me[he+1]=Me[he+1]/xe,Me[he+2]=Me[he+2]/xe}}}(fe),ce.width=fe.width,ce.height=fe.height;const De=ce.getContext("2d");De.putImageData(fe,0,0),he.flipY&&function ge(fe){fe.save(),fe.globalCompositeOperation="copy",fe.scale(1,-1),fe.translate(0,-fe.canvas.height),fe.drawImage(fe.canvas,0,0),fe.restore()}(De);const xe=De.getImageData(0,0,fe.width,fe.height),Pe=function L(fe,Me){return fe.toDataURL(Q[Me.format],Me.quality/100)}(ce,Me);return ce.width=0,ce.height=0,{dataUrl:Pe,data:xe}}function B(fe,Me){const ce=function le(fe){switch(fe){case"png":case"jpg":case"jpeg":return fe;default:return ue}}(fe);return{format:ce,quality:(0,T.uZ)(null!=Me?Me:me[ce],0,100)}}function X(fe,Me){return Me/Math.max(fe[0],fe[1])}function Z(fe,Me,ce){if(!fe||!Me)throw new Error("Cannot construct image data without dimensions");if(F)try{return new ImageData(fe,Me)}catch(he){F=!1}return V(fe,Me,ce)}function z(fe,Me,ce,he){if(!Me||!ce)throw new Error("Cannot construct image data without dimensions");if(F)try{return new ImageData(fe,Me,ce)}catch(xe){F=!1}const De=V(Me,ce,he);return De.data.set(fe,0),De}function ae(fe,Me,ce,he=0,De=0,xe=fe.width-he,Pe=fe.height-De,je=!1){const{data:rt}=fe,{width:Le,height:Ce,data:Te}=Me,Ye=xe/Le,ct=Pe/Ce,Ae=Math.ceil(Ye/2),Qe=Math.ceil(ct/2),Je=fe.width;for(let re=0;re<Ce;re++)for(let Ee=0;Ee<Le;Ee++){const $e=4*(Ee+(je?Ce-re-1:re)*Le);let tt=0,pt=0,mt=0,bt=0,yt=0,at=0;const Mt=(re+.5)*ct;for(let Pt=Math.floor(re*ct);Pt<(re+1)*ct;Pt++){const Vt=Math.abs(Mt-(Pt+.5))/Qe,Zt=(Ee+.5)*Ye,rr=Vt*Vt;for(let vr=Math.floor(Ee*Ye);vr<(Ee+1)*Ye;vr++){const yr=Math.abs(Zt-(vr+.5))/Ae,gr=Math.sqrt(rr+yr*yr);if(gr>=1)continue;let _t=2*gr*gr*gr-3*gr*gr+1;const $t=4*(he+vr+(De+Pt)*Je);at+=_t*rt[$t+3],pt+=_t,!ce&&rt[$t+3]<255&&(_t=_t*rt[$t+3]/255),mt+=_t*rt[$t],bt+=_t*rt[$t+1],yt+=_t*rt[$t+2],tt+=_t}}Te[$e]=mt/tt,Te[$e+1]=bt/tt,Te[$e+2]=yt/tt,Te[$e+3]=at/pt}return Me}function V(fe,Me,ce){return ce||(ce=function $(){return P||(P=document.createElement("canvas"),P.width=1,P.height=1),P}()),ce.getContext("2d").createImageData(fe,Me)}let P=null,F=!0;const Q={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},ue="png",me={png:100,jpg:98,jpeg:98}},31637:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>ie});var x=C(62208),T=C(57596);let ne;function ie(){return ne||(ne=function te(){const Y={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(void 0===typeof WebGLRenderingContext)return Y;const j=document.createElement("canvas");if(!j)return Y;let L=(0,T.k)(j,1,{failIfMajorPerformanceCaveat:!0});if((0,x.Wi)(L)&&(L=(0,T.k)(j,1),(0,x.pC)(L)&&(Y.majorPerformanceCaveat=!0)),(0,x.Wi)(L))return Y;const B=L.getParameter(L.VERSION);if(!B)return Y;const X=B.match(/^WebGL\s+([\d.]*)/);if(X){const Z=parseFloat(X[1]);Y.available=Z>=.94;const z=L.getShaderPrecisionFormat(L.FRAGMENT_SHADER,L.HIGH_FLOAT);z&&(Y.supportsHighPrecisionFragment=z.precision>0),Y.supportsVertexShaderSamplers=L.getParameter(L.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,Y.supportsElementIndexUint=null!==L.getExtension("OES_element_index_uint"),Y.supportsStandardDerivatives=null!==L.getExtension("OES_standard_derivatives"),Y.supportsInstancedArrays=null!==L.getExtension("ANGLE_instanced_arrays"),Y.supportsTextureFloat=null!==L.getExtension("OES_texture_float"),Y.supportsColorBufferFloat=null!==L.getExtension("WEBGL_color_buffer_float")&&null!==L.getExtension("EXT_float_blend")}return Y.maxTextureSize=L.getParameter(L.MAX_TEXTURE_SIZE),Y.version=function oe(){if(void 0===typeof WebGL2RenderingContext)return!1;const Y=document.createElement("canvas");if(!Y)return!1;const j=(0,T.k)(Y,2);return!!(0,x.pC)(j)}()?2:1,Y}()),ne}},57596:(ut,Oe,C)=>{"use strict";C.d(Oe,{k:()=>ne,s:()=>T});var x=C(62208);function T(Y,j,L={}){if(!window.WebGLRenderingContext)return ie(Y,te),null;const B=ne(Y,j,L);return(0,x.Wi)(B)&&ie(Y,oe),B}function ne(Y,j,L={}){const B=1===j?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let X=null;for(const Z of B){try{X=Y.getContext(Z,L)}catch(z){}if(X)break}return X}function ie(Y,j){const L=Y.parentNode;L&&(L.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+j+"</div></div></td></tr></table>")}const te='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',oe='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},92236:(ut,Oe,C)=>{"use strict";C.d(Oe,{a:()=>T,b:()=>ne});var x=C(90912);function T(ie){const te=(0,x.vU)(100*(1-ie));return Math.max(0,Math.min(te,100))}function ne(ie){return Math.max(0,Math.min(1-ie/100,1))}},32584:(ut,Oe,C)=>{"use strict";C.d(Oe,{Nw:()=>V});var x=C(26584),T=C(58817),ne=C(62208),ie=C(94113),te=C(23025);const oe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Y=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function X(P){return!("feature"!==P.type||P.url||!P.source||"memory"!==P.source.type)}function ae(P,F){"maxScale"in P&&(F.maxScale=(0,te.k)(P.maxScale)),"minScale"in P&&(F.minScale=(0,te.k)(P.minScale))}function V(P,F,$){if(!("write"in P)||!P.write)return $&&$.messages&&$.messages.push(new x.Z("layer:unsupported",`Layers (${P.title}, ${P.id}) of type '${P.declaredClass}' cannot be persisted`,{layer:P})),null;if(function Z(P,F){if(F.restrictedWebMapWriting){const $=function B(P){return"basemap"===P.layerContainerType?oe:"operational-layers"===P.layerContainerType?Y:null}(F);return!(0,ne.pC)($)||$.has(P.type)&&!X(P)}return!0}(P,$)){const J={};return P.write(J,$)?J:null}return(0,ne.pC)(F)&&function K(P,F){if(function z(P,F){if(X(P)){const $=(0,ie.hS)("featureCollection.layers",F),J=$&&$[0]&&$[0].layerDefinition;J&&ae(P,J)}else"stream"===P.type?ae(P,F.layerDefinition=F.layerDefinition||{}):"group"!==P.type&&ae(P,F)}(P,F),"blendMode"in P&&(F.blendMode=P.blendMode,"normal"===F.blendMode&&delete F.blendMode),F.opacity=(0,te.k)(P.opacity),F.title=P.title||"Layer",F.visibility=P.visible,"legendEnabled"in P&&"wmts"!==P.type)if(X(P)){const $=F.featureCollection;$&&($.showLegend=P.legendEnabled)}else F.showLegend=P.legendEnabled}(P,F=(0,T.d9)(F)),F}},6785:(ut,Oe,C)=>{"use strict";C.d(Oe,{Z:()=>Qe});var x=C(15861),T=C(17626),ie=(C(52515),C(55538)),te=C(40764),oe=C(61885),Y=C(72392),L=(C(8314),C(58817)),B=C(63290),X=C(62208),Z=C(60330),z=C(10699),ae=C(35948),K=C(27e3),V=C(77712),P=C(66656),F=C(76898),$=C(36082),J=C(819),H=C(39605);C(62996);const ee={handleInterceptedEvent:(Je,re,Ee,$e)=>(Je.scheduleRender(),re.properties[`on${$e.type}`].apply(re.properties.bind||Ee,[$e]))},ye={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(Je,re,Ee)=>{Je.style[re]=Ee}},Q=(Je,re,Ee=!1)=>{let $e=Je;return re.forEach((tt,pt)=>{var mt;const bt=null!=(mt=$e)&&mt.children?((Je,re)=>Je.find(yt=>yt.domNode===tt))($e.children):void 0;Ee&&!bt&&pt!==re.length-1||($e=bt)}),$e};var ue=C(76210),me=C(54346),ve=C(21726);let fe;fe="components/assets";var ce=C(81431),he=C(38570),De=C(56683),xe=C(41840);const Pe="esri.widgets.Widget",je=B.Z.getLogger(Pe);let rt=0;const Le=new Map;function Te(Je,re){for(const Ee in re)null!=Je[Ee]&&("object"==typeof Je[Ee]&&"object"==typeof re[Ee]?Te(Je[Ee],re[Ee]):Je[Ee]=re[Ee]);return Je}const Ye=(Je=>{let re;const Ee=Ot(Ot({},ee),Je),$e=(Je=>Ot(Ot({},ye),Je))(Ee),tt=$e.performanceLogger;let pt,mt=!0,bt=!1;const yt=[],at=[],Mt=(Vt,Zt,rr)=>{let vr;$e.eventHandlerInterceptor=(gr,_t,$t,Ht)=>function(er){let lr;tt("domEvent",er);const fr=((Je,re)=>{const Ee=[];for(;Je&&Je!==re;)Ee.push(Je),Je=Je.parentNode;return Ee})(er.currentTarget,vr.domNode),ht=fr.some(Nt=>{var Wt;return customElements.get(null==Nt||null==(Wt=Nt.tagName)?void 0:Wt.toLowerCase())});if(er.eventPhase!==Event.CAPTURING_PHASE&&ht){const Nt=er.composedPath(),Wt=Nt.slice(Nt.indexOf(er.currentTarget),Nt.indexOf(vr.domNode)).filter(Qt=>Qt.getRootNode()===Qt.ownerDocument).reverse();lr=Q(vr.getLastRender(),Wt,!0)}else fr.reverse(),lr=Q(vr.getLastRender(),fr);let St;return lr&&(St=Ee.handleInterceptedEvent(re,lr,this,er)),tt("domEventProcessed",er),St},null==Ee.postProcessProjectionOptions||Ee.postProcessProjectionOptions($e);const yr=rr();vr=Vt(Zt,yr,$e),yt.push(vr),at.push(rr),Ee.afterFirstVNodeRendered&&Ee.afterFirstVNodeRendered(vr,yr)};let Pt=()=>{if(pt=void 0,mt){mt=!1,tt("renderStart",void 0);for(let Vt=0;Vt<yt.length;Vt++){const Zt=at[Vt]();tt("rendered",void 0),yt[Vt].update(Zt),tt("patched",void 0)}tt("renderDone",void 0),mt=!0}};return Ee.modifyDoRenderImplementation&&(Pt=Ee.modifyDoRenderImplementation(Pt,yt,at)),re={renderNow:Pt,scheduleRender:()=>{pt||bt||(pt=requestAnimationFrame(Pt))},stop:()=>{pt&&(cancelAnimationFrame(pt),pt=void 0),bt=!0},resume:()=>{bt=!1,mt=!0,re.scheduleRender()},append:(Vt,Zt)=>{Mt(H.v.append,Vt,Zt)},insertBefore:(Vt,Zt)=>{Mt(H.v.insertBefore,Vt,Zt)},merge:(Vt,Zt)=>{Mt(H.v.merge,Vt,Zt)},replace:(Vt,Zt)=>{Mt(H.v.replace,Vt,Zt)},detach:Vt=>{for(let Zt=0;Zt<at.length;Zt++)if(at[Zt]===Vt)return at.splice(Zt,1),yt.splice(Zt,1)[0];throw new Error("renderFunction was not found")}},re})({postProcessProjectionOptions(Je){const re=Je.eventHandlerInterceptor,Ee=/capture$/i;Je.eventHandlerInterceptor=($e,tt,pt,mt)=>{const bt=re($e,tt,pt,mt),yt=Ee.test($e);if(!(($e=$e.replace(Ee,"")).toLowerCase()in pt)||yt){const at=$e[2].toLowerCase()+$e.slice(3),Mt=Zt=>bt.call(pt,Zt);pt.addEventListener(at,Mt,yt);const Pt=()=>pt.removeEventListener(at,Mt,yt),Vt=mt.afterRemoved;mt.afterRemoved=Zt=>{null==Vt||Vt(Zt),Pt()}}return bt}},handleInterceptedEvent(Je,re,Ee,$e){const{eventPhase:tt,type:pt}=$e,mt=tt===Event.CAPTURING_PHASE;let bt=`on${pt}${mt?"capture":""}`;const yt=re.properties;(bt in yt||(bt=`on${pt[0].toUpperCase()}${pt.slice(1)}${mt?"Capture":""}`,bt in yt))&&(Le.clear(),Je.scheduleRender(),yt[bt].call(yt.bind||Ee,$e))}});let ct=!1,Ae=class extends((0,Z.v)(oe.Z.EventedAccessor)){constructor(Je,re){var Ee;super(Je,re),Ee=this,this._attached=!1,this._internalHandles=new Y.Z,this._projector=Ye,this._readyForTrueRender=!1,this.domNode=null,this.iconClass="esri-icon-checkbox-unchecked",this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=(0,z.Ds)((0,x.Z)(function*(){if(Ee._messageBundleProps&&Ee._messageBundleProps.length){const yt=yield(0,z.as)(Ee._messageBundleProps.map(function(){var at=(0,x.Z)(function*({bundlePath:Mt,propertyName:Pt}){let Vt=yield(0,xe.ME)(Mt);Ee.uiStrings&&Object.keys(Ee.uiStrings)&&(Vt=Te((0,L.d9)(Vt),Ee.uiStrings)),Ee[Pt]=Vt});return function(Mt){return at.apply(this,arguments)}}()));for(const at of yt)at.error&&je.error("widget-intl:locale-error",Ee.declaredClass,at.error)}yield Ee.loadLocale()})),function Me(){(0,ue.YY)((0,ve.hF)((0,me.V)("components/assets")))}();const tt=(0,he.Yo)()||"light";["light","dark"].includes(tt)||(0,ie.x9)(je,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const pt="esri-widget-uid-"+(0,ae.D)(),mt=this.render.bind(this);this._trackingTarget=new J.M(()=>this.scheduleRender());const bt=()=>{var yt;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:pt,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const at=mt();let{properties:Mt}=at;Mt||(at.properties=Mt={});let{key:Pt,styles:Vt}=Mt;Pt||(Mt.key=pt),Vt||(Mt.styles=Vt={}),Vt.display||(Vt.display="");let Zt=0;return null==(yt=at.children)||yt.forEach(rr=>{if((0,ce.ZJ)(rr.vnodeSelector))return;let{properties:vr}=rr;vr||(rr.properties=vr={}),vr.key||(vr.key=`${this.id}--${Zt++}`)}),(0,ce.dh)(this,at)};this.render=()=>{if(ct)return bt();let yt=Le.get(this);if(yt)return yt;this._trackingTarget.clear(),ct=!0;try{yt=(0,$.LJ)(this._trackingTarget,bt)}finally{ct=!1}return Le.set(this,yt),yt},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()}))}normalizeCtorArgs(Je,re){const Ee=Ot({},Je);return re&&(Ee.container=re),Ee}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(z.H9)}loadDependencies(){return(0,x.Z)(function*(){})()}loadLocale(){return(0,x.Z)(function*(){})()}destroy(){this.destroyed||(this._trackingTarget=(0,X.SC)(this._trackingTarget),this.viewModel=(0,X.SC)(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,Le.delete(this))}set container(Je){this._get("container")||this._set("container",Je)}castContainer(Je){return(0,te.L7)(Je)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+rt++}set id(Je){Je&&this._set("id",Je)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(Le.delete(this),this._projector.scheduleRender())}classes(...Je){return he.Sh.apply(this,Je)}own(Je){arguments.length>1&&(Je=Array.prototype.slice.call(arguments)),this._internalHandles.add(Je)}renderNow(){Le.delete(this),this._projector.renderNow()}_postInitialize(){var re,Je=this;if(this.destroyed)return;this.scheduleRender(),null!=(re=this._delegatedEventNames)&&re.length&&this._internalHandles.add((0,K.S1)(this,"viewModel",($e,tt)=>{tt&&this._internalHandles.remove("delegated-events"),$e&&this._internalHandles.add(this._delegatedEventNames.map(pt=>$e.on(pt,mt=>{this.emit(pt,mt)})),"delegated-events")})),this.postInitialize();const Ee=function(){var $e=(0,x.Z)(function*(){yield Je._loadLocale().catch(z.H9),Je.scheduleRender()});return function(){return $e.apply(this,arguments)}}();this._internalHandles.add([(0,De.qe)(Ee),this.watch("uiStrings",Ee),(0,K.N1)(this,"container",function(){var $e=(0,x.Z)(function*(tt){Je.destroyed||Je._attach(tt)});return function(tt){return $e.apply(this,arguments)}}())])}_attach(Je){Je&&(this._projector.merge(Je,this.render),this._attached=!0)}_detach(Je){Je&&this._attached&&(this._projector.detach(this.render),Je.parentNode&&Je.parentNode.removeChild(Je),this._attached=!1)}};Ae[ce.$X]=!0,(0,T._)([(0,V.Cb)()],Ae.prototype,"_readyForTrueRender",void 0),(0,T._)([(0,V.Cb)({value:null})],Ae.prototype,"container",null),(0,T._)([(0,P.p)("container")],Ae.prototype,"castContainer",null),(0,T._)([(0,V.Cb)({aliasOf:"container"})],Ae.prototype,"domNode",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"iconClass",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"id",null),(0,T._)([(0,V.Cb)()],Ae.prototype,"label",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"renderable",null),(0,T._)([(0,V.Cb)()],Ae.prototype,"uiStrings",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"viewModel",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"visible",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"key",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"children",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"afterCreate",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"afterUpdate",void 0),(0,T._)([(0,V.Cb)()],Ae.prototype,"afterRemoved",void 0),Ae=(0,T._)([(0,F.j)(Pe)],Ae);const Qe=Ae},24940:(ut,Oe,C)=>{"use strict";C.d(Oe,{h:()=>T});var x=C(38570);function T(){return function(te,oe){if(!te[oe])throw new TypeError(`Cannot auto bind undefined function '${oe}'`);return{value:ie(te[oe])}}}function ie(te){return function(oe,...Y){!function ne(te){const{type:oe}=te;return te instanceof KeyboardEvent||"keyup"===oe||"keydown"===oe||"keypress"===oe}(oe)?te.call(this,oe,...Y):(0,x.pf)(oe.key)&&(oe.preventDefault(),oe.stopPropagation(),oe.target.click())}}},25552:(ut,Oe,C)=>{"use strict";function x(T){return function(ne,ie){ne.hasOwnProperty("_messageBundleProps")||(ne._messageBundleProps=ne._messageBundleProps?ne._messageBundleProps.slice():[]),ne._messageBundleProps.push({bundlePath:T,propertyName:ie})}}C.d(Oe,{H:()=>x})},94450:(ut,Oe,C)=>{"use strict";C.d(Oe,{u:()=>te});var x=C(81431),T=function(oe){return{vnodeSelector:"",properties:void 0,children:void 0,text:oe.toString(),domNode:null}},ne=function(oe,Y){for(var j=0,L=oe.length;j<L;j++){var B=oe[j];Array.isArray(B)?ne(B,Y):null!=B&&!1!==B&&(B.hasOwnProperty("vnodeSelector")||(B=T(B)),Y.push(B))}};function te(oe,Y,...j){return"function"!=typeof oe||(0,x.ZJ)(oe)?function(oe,Y){for(var j=[],L=2;L<arguments.length;L++)j[L-2]=arguments[L];if(1===j.length&&"string"==typeof j[0])return{vnodeSelector:oe,properties:Y||void 0,children:void 0,text:j[0],domNode:null};var B=[];return ne(j,B),{vnodeSelector:oe,properties:Y||void 0,children:B,text:void 0,domNode:null}}(oe,Y,...j):oe(Y,...j)}},81431:(ut,Oe,C)=>{"use strict";C.d(Oe,{$X:()=>T,ZJ:()=>B,dh:()=>oe});var x=C(54024);const T=Symbol("widget"),ne=[],ie={},te=new WeakMap;function oe(X,Z){let z=Z.children;if(z&&z.length)for(let K=0;K<z.length;++K)z[K]=oe(X,z[K]);else z=ne;const ae=Z.vnodeSelector;if(B(ae)){const K=Z.properties||ie,V=K.key||ae;return{vnodeSelector:"div",properties:{key:V,afterCreate:Y,afterUpdate:j,afterRemoved:L,parentWidget:X,widgetConstructor:ae,widgetProperties:nn(Ot({},K),{key:V,children:z})},children:void 0,text:void 0,domNode:null}}return Z}function Y(X,Z,z,{parentWidget:ae,widgetConstructor:K,widgetProperties:V}){const P=new K(V);P.container=X,te.set(X,P),null==P.afterCreate||P.afterCreate(P,X),ae._internalHandles.add((0,x.kB)(()=>L(X)))}function j(X,Z,z,{widgetProperties:ae}){const K=te.get(X);K&&(K.set(ae),null==K.afterUpdate||K.afterUpdate(K,X))}function L(X){const Z=te.get(X);Z&&(Z.destroy(),te.delete(X))}function B(X){return"function"==typeof X&&X[T]}},40669:(ut,Oe,C)=>{"use strict";function j(B){return B&&"function"==typeof B.render}function L(B){return B&&"function"==typeof B.postMixInProperties&&"function"==typeof B.buildRendering&&"function"==typeof B.postCreate&&"function"==typeof B.startup}C.d(Oe,{o:()=>L,Qd:()=>j}),C(24940),C(55538),C(8314),C(63290),C(94450),C(38570)},38570:(ut,Oe,C)=>{"use strict";C.d(Oe,{Sh:()=>Yi,vU:()=>js,pV:()=>Fn,rk:()=>ei,XP:()=>mi,Yo:()=>Nn,pf:()=>Ji,$o:()=>So,dZ:()=>qn,w3:()=>ms,Se:()=>Li});var te=Object.prototype,oe=Function.prototype.toString,Y=te.hasOwnProperty,j=oe.call(Object),L=te.toString,B=function ne(Ve,Yt){return function(Ut){return Ve(Yt(Ut))}}(Object.getPrototypeOf,Object),ae={exports:{}},K={},V={exports:{}},P={};function F(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var H=/javascript\s*\:/gim;P.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},P.getDefaultWhiteList=F,P.onAttr=function $(Ve,Yt,Ut){},P.onIgnoreAttr=function J(Ve,Yt,Ut){},P.safeAttrValue=function de(Ve,Yt){return H.test(Yt)?"":Yt};var ye_trim=function(Ve){return String.prototype.trim?Ve.trim():Ve.replace(/(^\s*)|(\s*$)/g,"")},ye_trimRight=function(Ve){return String.prototype.trimRight?Ve.trimRight():Ve.replace(/(\s*$)/g,"")},se=P;function pe(Ve){return null==Ve}function me(Ve){(Ve=function ue(Ve){var Yt={};for(var Ut in Ve)Yt[Ut]=Ve[Ut];return Yt}(Ve||{})).whiteList=Ve.whiteList||se.whiteList,Ve.onAttr=Ve.onAttr||se.onAttr,Ve.onIgnoreAttr=Ve.onIgnoreAttr||se.onIgnoreAttr,Ve.safeAttrValue=Ve.safeAttrValue||se.safeAttrValue,this.options=Ve}me.prototype.process=function(Ve){if(!(Ve=(Ve=Ve||"").toString()))return"";var Ut=this.options,Mr=Ut.whiteList,br=Ut.onAttr,Yr=Ut.onIgnoreAttr,fn=Ut.safeAttrValue;return function le(Ve,Yt){";"!==(Ve=ye_trimRight(Ve))[Ve.length-1]&&(Ve+=";");var Ut=Ve.length,Mr=!1,br=0,Yr=0,fn="";function Rr(){if(!Mr){var Pn=ye_trim(Ve.slice(br,Yr)),zr=Pn.indexOf(":");if(-1!==zr){var qt=ye_trim(Pn.slice(0,zr)),Or=ye_trim(Pn.slice(zr+1));if(qt){var Un=Yt(br,fn.length,qt,Or,Pn);Un&&(fn+=Un+"; ")}}}br=Yr+1}for(;Yr<Ut;Yr++){var xr=Ve[Yr];if("/"===xr&&"*"===Ve[Yr+1]){var bn=Ve.indexOf("*/",Yr+2);if(-1===bn)break;br=(Yr=bn+1)+1,Mr=!1}else"("===xr?Mr=!0:")"===xr?Mr=!1:";"===xr?Mr||Rr():"\n"===xr&&Rr()}return ye_trim(fn)}(Ve,function(xr,bn,Pn,zr,qt){var Or=Mr[Pn],Un=!1;if(!0===Or?Un=Or:"function"==typeof Or?Un=Or(zr):Or instanceof RegExp&&(Un=Or.test(zr)),!0!==Un&&(Un=!1),zr=fn(Pn,zr)){var Gn,ai={position:bn,sourcePosition:xr,source:qt,isWhite:Un};if(Un)return pe(Gn=br(Pn,zr,ai))?Pn+":"+zr:Gn;if(!pe(Gn=Yr(Pn,zr,ai)))return Gn}})};var ve=me;!function(Ve,Yt){var Ut=P,Mr=ve;for(var Yr in(Yt=Ve.exports=function br(fn,Rr){return new Mr(Rr).process(fn)}).FilterCSS=Mr,Ut)Yt[Yr]=Ut[Yr]}(V,V.exports);var fe={indexOf:function(Ve,Yt){var Ut,Mr;if(Array.prototype.indexOf)return Ve.indexOf(Yt);for(Ut=0,Mr=Ve.length;Ut<Mr;Ut++)if(Ve[Ut]===Yt)return Ut;return-1},forEach:function(Ve,Yt,Ut){var Mr,br;if(Array.prototype.forEach)return Ve.forEach(Yt,Ut);for(Mr=0,br=Ve.length;Mr<br;Mr++)Yt.call(Ut,Ve[Mr],Mr,Ve)},trim:function(Ve){return String.prototype.trim?Ve.trim():Ve.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(Ve){var Ut=/\s|\n|\t/.exec(Ve);return Ut?Ut.index:-1}},ce=V.exports.getDefaultWhiteList,he=fe;var xe=new(0,V.exports.FilterCSS);function Ce(Ve){return Ve.replace(Ye,"&lt;").replace(ct,"&gt;")}var Ye=/</g,ct=/>/g,Ae=/"/g,Qe=/&quot;/g,Je=/&#([a-zA-Z0-9]*);?/gim,re=/&colon;?/gim,Ee=/&newline;?/gim,$e=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,tt=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,pt=/u\s*r\s*l\s*\(.*/gi;function mt(Ve){return Ve.replace(Ae,"&quot;")}function bt(Ve){return Ve.replace(Qe,'"')}function yt(Ve){return Ve.replace(Je,function(Ut,Mr){return String.fromCharCode("x"===Mr[0]||"X"===Mr[0]?parseInt(Mr.substr(1),16):parseInt(Mr,10))})}function at(Ve){return Ve.replace(re,":").replace(Ee," ")}function Mt(Ve){for(var Yt="",Ut=0,Mr=Ve.length;Ut<Mr;Ut++)Yt+=Ve.charCodeAt(Ut)<32?" ":Ve.charAt(Ut);return he.trim(Yt)}function Pt(Ve){return Mt(Ve=at(Ve=yt(Ve=bt(Ve))))}function Vt(Ve){return Ce(Ve=mt(Ve))}K.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},K.getDefaultWhiteList=function De(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},K.onTag=function Pe(Ve,Yt,Ut){},K.onIgnoreTag=function je(Ve,Yt,Ut){},K.onTagAttr=function rt(Ve,Yt,Ut){},K.onIgnoreTagAttr=function Le(Ve,Yt,Ut){},K.safeAttrValue=function Te(Ve,Yt,Ut,Mr){if(Ut=Pt(Ut),"href"===Yt||"src"===Yt){if("#"===(Ut=he.trim(Ut)))return"#";if("http://"!==Ut.substr(0,7)&&"https://"!==Ut.substr(0,8)&&"mailto:"!==Ut.substr(0,7)&&"tel:"!==Ut.substr(0,4)&&"data:image/"!==Ut.substr(0,11)&&"ftp://"!==Ut.substr(0,6)&&"./"!==Ut.substr(0,2)&&"../"!==Ut.substr(0,3)&&"#"!==Ut[0]&&"/"!==Ut[0])return""}else if("background"===Yt){if($e.lastIndex=0,$e.test(Ut))return""}else if("style"===Yt){if(tt.lastIndex=0,tt.test(Ut)||(pt.lastIndex=0,pt.test(Ut)&&($e.lastIndex=0,$e.test(Ut))))return"";!1!==Mr&&(Ut=(Mr=Mr||xe).process(Ut))}return Vt(Ut)},K.escapeHtml=Ce,K.escapeQuote=mt,K.unescapeQuote=bt,K.escapeHtmlEntities=yt,K.escapeDangerHtml5Entities=at,K.clearNonPrintableCharacter=Mt,K.friendlyAttrValue=Pt,K.escapeAttrValue=Vt,K.onIgnoreTagStripAll=function Zt(){return""},K.StripTagBody=function rr(Ve,Yt){"function"!=typeof Yt&&(Yt=function(){});var Ut=!Array.isArray(Ve),br=[],Yr=!1;return{onIgnoreTag:function(fn,Rr,xr){if(function Mr(fn){return!!Ut||-1!==he.indexOf(Ve,fn)}(fn)){if(xr.isClosing){var bn="[/removed]";return br.push([!1!==Yr?Yr:xr.position,xr.position+bn.length]),Yr=!1,bn}return Yr||(Yr=xr.position),"[removed]"}return Yt(fn,Rr,xr)},remove:function(fn){var Rr="",xr=0;return he.forEach(br,function(bn){Rr+=fn.slice(xr,bn[0]),xr=bn[1]}),Rr+=fn.slice(xr)}}},K.stripCommentTag=function vr(Ve){for(var Yt="",Ut=0;Ut<Ve.length;){var Mr=Ve.indexOf("\x3c!--",Ut);if(-1===Mr){Yt+=Ve.slice(Ut);break}Yt+=Ve.slice(Ut,Mr);var br=Ve.indexOf("--\x3e",Mr);if(-1===br)break;Ut=br+3}return Yt},K.stripBlankChar=function yr(Ve){var Yt=Ve.split("");return(Yt=Yt.filter(function(Ut){var Mr=Ut.charCodeAt(0);return!(127===Mr||Mr<=31&&10!==Mr&&13!==Mr)})).join("")},K.cssFilter=xe,K.getDefaultCSSWhiteList=ce;var gr={},_t=fe;function $t(Ve){var Yt=_t.spaceIndex(Ve);if(-1===Yt)var Ut=Ve.slice(1,-1);else Ut=Ve.slice(1,Yt+1);return"/"===(Ut=_t.trim(Ut).toLowerCase()).slice(0,1)&&(Ut=Ut.slice(1)),"/"===Ut.slice(-1)&&(Ut=Ut.slice(0,-1)),Ut}function Ht(Ve){return"</"===Ve.slice(0,2)}var lr=/[^a-zA-Z0-9_:\.\-]/gim;function ht(Ve,Yt){for(;Yt<Ve.length;Yt++){var Ut=Ve[Yt];if(" "!==Ut)return"="===Ut?Yt:-1}}function St(Ve,Yt){for(;Yt>0;Yt--){var Ut=Ve[Yt];if(" "!==Ut)return"="===Ut?Yt:-1}}function Wt(Ve){return function Nt(Ve){return'"'===Ve[0]&&'"'===Ve[Ve.length-1]||"'"===Ve[0]&&"'"===Ve[Ve.length-1]}(Ve)?Ve.substr(1,Ve.length-2):Ve}gr.parseTag=function er(Ve,Yt,Ut){var Mr="",br=0,Yr=!1,fn=!1,Rr=0,xr=Ve.length,bn="",Pn="";e:for(Rr=0;Rr<xr;Rr++){var zr=Ve.charAt(Rr);if(!1===Yr){if("<"===zr){Yr=Rr;continue}}else if(!1===fn){if("<"===zr){Mr+=Ut(Ve.slice(br,Rr)),Yr=Rr,br=Rr;continue}if(">"===zr){Mr+=Ut(Ve.slice(br,Yr)),bn=$t(Pn=Ve.slice(Yr,Rr+1)),Mr+=Yt(Yr,Mr.length,bn,Pn,Ht(Pn)),br=Rr+1,Yr=!1;continue}if('"'===zr||"'"===zr)for(var qt=1,Or=Ve.charAt(Rr-qt);""===Or.trim()||"="===Or;){if("="===Or){fn=zr;continue e}Or=Ve.charAt(Rr-++qt)}}else if(zr===fn){fn=!1;continue}}return br<Ve.length&&(Mr+=Ut(Ve.substr(br))),Mr},gr.parseAttr=function fr(Ve,Yt){var Ut=0,Mr=[],br=!1,Yr=Ve.length;function fn(zr,qt){if(!((zr=(zr=_t.trim(zr)).replace(lr,"").toLowerCase()).length<1)){var Or=Yt(zr,qt||"");Or&&Mr.push(Or)}}for(var Rr=0;Rr<Yr;Rr++){var Pn,xr=Ve.charAt(Rr);if(!1!==br||"="!==xr)if(!1===br||Rr!==Ut||'"'!==xr&&"'"!==xr||"="!==Ve.charAt(Rr-1)){if(/\s|\n|\t/.test(xr)){if(Ve=Ve.replace(/\s|\n|\t/g," "),!1===br){if(-1===(Pn=ht(Ve,Rr))){fn(_t.trim(Ve.slice(Ut,Rr))),br=!1,Ut=Rr+1;continue}Rr=Pn-1;continue}if(-1===(Pn=St(Ve,Rr-1))){fn(br,Wt(_t.trim(Ve.slice(Ut,Rr)))),br=!1,Ut=Rr+1;continue}}}else{if(-1===(Pn=Ve.indexOf(xr,Rr+1)))break;fn(br,_t.trim(Ve.slice(Ut+1,Pn))),br=!1,Ut=(Rr=Pn)+1}else br=Ve.slice(Ut,Rr),Ut=Rr+1}return Ut<Ve.length&&(!1===br?fn(Ve.slice(Ut)):fn(br,Wt(_t.trim(Ve.slice(Ut))))),_t.trim(Mr.join(" "))};var Qt=V.exports.FilterCSS,Kt=K,st=gr.parseTag,Ge=gr.parseAttr,Xe=fe;function He(Ve){return null==Ve}function wt(Ve){(Ve=function it(Ve){var Yt={};for(var Ut in Ve)Yt[Ut]=Ve[Ut];return Yt}(Ve||{})).stripIgnoreTag&&(Ve.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),Ve.onIgnoreTag=Kt.onIgnoreTagStripAll),Ve.whiteList=Ve.whiteList||Kt.whiteList,Ve.onTag=Ve.onTag||Kt.onTag,Ve.onTagAttr=Ve.onTagAttr||Kt.onTagAttr,Ve.onIgnoreTag=Ve.onIgnoreTag||Kt.onIgnoreTag,Ve.onIgnoreTagAttr=Ve.onIgnoreTagAttr||Kt.onIgnoreTagAttr,Ve.safeAttrValue=Ve.safeAttrValue||Kt.safeAttrValue,Ve.escapeHtml=Ve.escapeHtml||Kt.escapeHtml,this.options=Ve,!1===Ve.css?this.cssFilter=!1:(Ve.css=Ve.css||{},this.cssFilter=new Qt(Ve.css))}wt.prototype.process=function(Ve){if(!(Ve=(Ve=Ve||"").toString()))return"";var Ut=this.options,Mr=Ut.whiteList,br=Ut.onTag,Yr=Ut.onIgnoreTag,fn=Ut.onTagAttr,Rr=Ut.onIgnoreTagAttr,xr=Ut.safeAttrValue,bn=Ut.escapeHtml,Pn=this.cssFilter;Ut.stripBlankChar&&(Ve=Kt.stripBlankChar(Ve)),Ut.allowCommentTag||(Ve=Kt.stripCommentTag(Ve));var zr=!1;Ut.stripIgnoreTagBody&&(zr=Kt.StripTagBody(Ut.stripIgnoreTagBody,Yr),Yr=zr.onIgnoreTag);var qt=st(Ve,function(Or,Un,ai,Gn,Kr){var Bn,ui={sourcePosition:Or,position:Un,isClosing:Kr,isWhite:Mr.hasOwnProperty(ai)};if(!He(Bn=br(ai,Gn,ui)))return Bn;if(ui.isWhite){if(ui.isClosing)return"</"+ai+">";var gs=function Ue(Ve){var Yt=Xe.spaceIndex(Ve);if(-1===Yt)return{html:"",closing:"/"===Ve[Ve.length-2]};var Ut="/"===(Ve=Xe.trim(Ve.slice(Yt+1,-1)))[Ve.length-1];return Ut&&(Ve=Xe.trim(Ve.slice(0,-1))),{html:Ve,closing:Ut}}(Gn),Xi=Mr[ai],Ni=Ge(gs.html,function(Oo,ln){var In,fo=-1!==Xe.indexOf(Xi,Oo);return He(In=fn(ai,Oo,ln,fo))?fo?(ln=xr(ai,Oo,ln,Pn))?Oo+'="'+ln+'"':Oo:He(In=Rr(ai,Oo,ln,fo))?void 0:In:In});return Gn="<"+ai,Ni&&(Gn+=" "+Ni),gs.closing&&(Gn+=" /"),Gn+">"}return He(Bn=Yr(ai,Gn,ui))?bn(Gn):Bn},bn);return zr&&(qt=zr.remove(qt)),qt};var nr=wt;!function(Ve,Yt){var Ut=K,Mr=gr,br=nr;function Yr(xr,bn){return new br(bn).process(xr)}for(var fn in(Yt=Ve.exports=Yr).filterXSS=Yr,Yt.FilterXSS=br,Ut)Yt[fn]=Ut[fn];for(var fn in Mr)Yt[fn]=Mr[fn];(function Rr(){return"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope})()&&(self.filterXSS=Ve.exports)}(ae,ae.exports);var cn,Kn,wr=function(){function Ve(Yt,Ut){var br,Mr=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(Yr,fn,Rr,xr){return"a"===Yr&&"href"===fn||("img"===Yr||"source"===Yr)&&"src"===fn?Mr.sanitizeUrl(Rr):ae.exports.safeAttrValue(Yr,fn,Rr,xr)}},Yt&&!Ut?br=Yt:Yt&&Ut?(br=Object.create(this.arcgisFilterOptions),Object.keys(Yt).forEach(function(Yr){"whiteList"===Yr?br.whiteList=Mr._extendObjectOfArrays([Mr.arcgisWhiteList,Yt.whiteList||{}]):br[Yr]=Yt[Yr]})):(br=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=br,this._xssFilter=new ae.exports.FilterXSS(br)}return Ve.prototype.sanitize=function(Yt,Ut){switch(void 0===Ut&&(Ut={}),typeof Yt){case"number":return isNaN(Yt)||!isFinite(Yt)?null:Yt;case"boolean":return Yt;case"string":return this._xssFilter.process(Yt);case"object":return this._iterateOverObject(Yt,Ut);default:return Ut.allowUndefined&&void 0===Yt?void 0:null}},Ve.prototype.sanitizeUrl=function(Yt){var Ut=this._trim(Yt.substring(0,Yt.indexOf(":")));return"/"===Yt||"#"===Yt||"#"===Yt[0]||this.allowedProtocols.indexOf(Ut.toLowerCase())>-1?ae.exports.escapeAttrValue(Yt):""},Ve.prototype.sanitizeHTMLAttribute=function(Yt,Ut,Mr,br){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(Yt,Ut,Mr,br):ae.exports.safeAttrValue(Yt,Ut,Mr,br)},Ve.prototype.validate=function(Yt,Ut){void 0===Ut&&(Ut={});var Mr=this.sanitize(Yt,Ut);return{isValid:Yt===Mr,sanitized:Mr}},Ve.prototype._extendObjectOfArrays=function(Yt){var Ut={};return Yt.forEach(function(Mr){Object.keys(Mr).forEach(function(br){Ut[br]=Array.isArray(Mr[br])&&Array.isArray(Ut[br])?Ut[br].concat(Mr[br]):Mr[br]})}),Ut},Ve.prototype._iterateOverObject=function(Yt,Ut){var Mr=this;void 0===Ut&&(Ut={});try{var br=!1,Yr=void 0;if(Array.isArray(Yt))Yr=Yt.reduce(function(Rr,xr){var bn=Mr.validate(xr,Ut);return bn.isValid?Rr.concat([xr]):(br=!0,Rr.concat([bn.sanitized]))},[]);else{if(!function Z(Ve){if(!function X(Ve){return!!Ve&&"object"==typeof Ve}(Ve)||"[object Object]"!=L.call(Ve)||function T(Ve){var Yt=!1;if(null!=Ve&&"function"!=typeof Ve.toString)try{Yt=!!(Ve+"")}catch(Ut){}return Yt}(Ve))return!1;var Yt=B(Ve);if(null===Yt)return!0;var Ut=Y.call(Yt,"constructor")&&Yt.constructor;return"function"==typeof Ut&&Ut instanceof Ut&&oe.call(Ut)==j}(Yt))return Ut.allowUndefined&&void 0===Yt?void 0:null;Yr=Object.keys(Yt).reduce(function(Rr,xr){var bn=Yt[xr],Pn=Mr.validate(bn,Ut);return Pn.isValid?Rr[xr]=bn:(br=!0,Rr[xr]=Pn.sanitized),Rr},{})}return br?Yr:Yt}catch(Rr){return null}},Ve.prototype._trim=function(Yt){return String.prototype.trim?Yt.trim():Yt.replace(/(^\s*)|(\s*$)/g,"")},Ve}(),Dr=C(35575),Wr=(C(8314),C(63290)),si=function(Ve){cn||function(Ve){if("WebkitTransition"in Ve.style)cn="webkitTransitionEnd",Kn="webkitAnimationEnd";else{if(!("transition"in Ve.style))throw new Error("Your browser is not supported!");cn="transitionend",Kn="animationend"}}(Ve)},co=function(Ve,Yt){return void 0===Yt&&(Yt=Ve+"-active"),function(Ut){si(Ut);var Mr=!1,br=function(Yr){Mr||(Mr=!0,Ut.removeEventListener(cn,br),Ut.removeEventListener(Kn,br),Ut.classList.remove(Ve),Ut.classList.remove(Yt))};Ut.classList.add(Ve),Ut.addEventListener(cn,br),Ut.addEventListener(Kn,br),requestAnimationFrame(function(){Ut.classList.add(Yt)})}},xo=function(Ve,Yt){return void 0===Yt&&(Yt=Ve+"-active"),function(Ut,Mr){si(Ut);var br=!1,Yr=function(fn){br||(br=!0,Ut.removeEventListener(cn,Yr),Ut.removeEventListener(Kn,Yr),Mr())};Ut.classList.add(Ve),Ut.addEventListener(cn,Yr),Ut.addEventListener(Kn,Yr),requestAnimationFrame(function(){Ut.classList.add(Yt)})}};function Yi(Ve){const Yt=Dr.Z.acquire();for(let Mr=0;Mr<arguments.length;Mr++){const br=arguments[Mr],Yr=typeof br;if("string"===Yr)Yt.push(br);else if(Array.isArray(br))Yt.push.apply(Yt,br);else if("object"===Yr)for(const fn in br)br[fn]&&Yt.push(fn)}const Ut=Yt.join(" ");return Dr.Z.release(Yt),Ut}function qn(Ve){const Yt=null==Ve?void 0:Ve.closest("[dir]");return null!==Yt&&Yt instanceof HTMLElement&&"rtl"===Yt.dir||"rtl"===document.dir}function mi(Ve){return qn(Ve)?"rtl":"ltr"}function Fn(Ve){this[Ve.getAttribute("data-node-ref")]=null}function Li(Ve){this[Ve.getAttribute("data-node-ref")]=Ve}function js(Ve,Yt){return("enter"===Ve?co:xo)(Yt)}Wr.Z.getLogger("esri.widgets.support.widgetUtils");const Ea=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce((Ve,Yt)=>(Ve[Yt]=[],Ve),{}),Do=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],ms=new wr({whiteList:Ea,onTagAttr:(Ve,Yt,Ut)=>{const Mr=`${Yt}="${Ut}"`;if(Do.includes(Yt))return Mr},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Ji(Ve){return"Enter"===Ve||" "===Ve}function Nn(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function So(){return Nn().startsWith("dark")}function ei(){return"calcite-theme-"+(So()?"dark":"light")}},15861:(ut,Oe,C)=>{"use strict";function x(ne,ie,te,oe,Y,j,L){try{var B=ne[j](L),X=B.value}catch(Z){return void te(Z)}B.done?ie(X):Promise.resolve(X).then(oe,Y)}function T(ne){return function(){var ie=this,te=arguments;return new Promise(function(oe,Y){var j=ne.apply(ie,te);function L(X){x(j,oe,Y,L,B,"next",X)}function B(X){x(j,oe,Y,L,B,"throw",X)}L(void 0)})}}C.d(Oe,{Z:()=>T})}},ut=>{ut(ut.s=88653)}]);